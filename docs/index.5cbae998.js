var cn=(n,i,a)=>new Promise((u,g)=>{var h=D=>{try{O(a.next(D))}catch(W){g(W)}},P=D=>{try{O(a.throw(D))}catch(W){g(W)}},O=D=>D.done?u(D.value):Promise.resolve(D.value).then(h,P);O((a=a.apply(n,i)).next())});(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))u(g);new MutationObserver(g=>{for(const h of g)if(h.type==="childList")for(const P of h.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&u(P)}).observe(document,{childList:!0,subtree:!0});function a(g){const h={};return g.integrity&&(h.integrity=g.integrity),g.referrerpolicy&&(h.referrerPolicy=g.referrerpolicy),g.crossorigin==="use-credentials"?h.credentials="include":g.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function u(g){if(g.ep)return;g.ep=!0;const h=a(g);fetch(g.href,h)}})();var Eu=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function hf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function mg(n){var i=n.default;if(typeof i=="function"){var a=function(){return i.apply(this,arguments)};a.prototype=i.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(u){var g=Object.getOwnPropertyDescriptor(n,u);Object.defineProperty(a,u,g.get?g:{enumerable:!0,get:function(){return n[u]}})}),a}var ko={exports:{}},No={},jn={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ea=Symbol.for("react.element"),vg=Symbol.for("react.portal"),yg=Symbol.for("react.fragment"),wg=Symbol.for("react.strict_mode"),xg=Symbol.for("react.profiler"),Sg=Symbol.for("react.provider"),Cg=Symbol.for("react.context"),bg=Symbol.for("react.forward_ref"),Eg=Symbol.for("react.suspense"),kg=Symbol.for("react.memo"),Ng=Symbol.for("react.lazy"),Uh=Symbol.iterator;function Tg(n){return n===null||typeof n!="object"?null:(n=Uh&&n[Uh]||n["@@iterator"],typeof n=="function"?n:null)}var cf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ff=Object.assign,df={};function ss(n,i,a){this.props=n,this.context=i,this.refs=df,this.updater=a||cf}ss.prototype.isReactComponent={};ss.prototype.setState=function(n,i){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,i,"setState")};ss.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function pf(){}pf.prototype=ss.prototype;function ku(n,i,a){this.props=n,this.context=i,this.refs=df,this.updater=a||cf}var Nu=ku.prototype=new pf;Nu.constructor=ku;ff(Nu,ss.prototype);Nu.isPureReactComponent=!0;var Gh=Array.isArray,gf=Object.prototype.hasOwnProperty,Tu={current:null},_f={key:!0,ref:!0,__self:!0,__source:!0};function mf(n,i,a){var u,g={},h=null,P=null;if(i!=null)for(u in i.ref!==void 0&&(P=i.ref),i.key!==void 0&&(h=""+i.key),i)gf.call(i,u)&&!_f.hasOwnProperty(u)&&(g[u]=i[u]);var O=arguments.length-2;if(O===1)g.children=a;else if(1<O){for(var D=Array(O),W=0;W<O;W++)D[W]=arguments[W+2];g.children=D}if(n&&n.defaultProps)for(u in O=n.defaultProps,O)g[u]===void 0&&(g[u]=O[u]);return{$$typeof:ea,type:n,key:h,ref:P,props:g,_owner:Tu.current}}function Pg(n,i){return{$$typeof:ea,type:n.type,key:i,ref:n.ref,props:n.props,_owner:n._owner}}function Pu(n){return typeof n=="object"&&n!==null&&n.$$typeof===ea}function Ig(n){var i={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(a){return i[a]})}var Wh=/\/+/g;function il(n,i){return typeof n=="object"&&n!==null&&n.key!=null?Ig(""+n.key):i.toString(36)}function Ma(n,i,a,u,g){var h=typeof n;(h==="undefined"||h==="boolean")&&(n=null);var P=!1;if(n===null)P=!0;else switch(h){case"string":case"number":P=!0;break;case"object":switch(n.$$typeof){case ea:case vg:P=!0}}if(P)return P=n,g=g(P),n=u===""?"."+il(P,0):u,Gh(g)?(a="",n!=null&&(a=n.replace(Wh,"$&/")+"/"),Ma(g,i,a,"",function(W){return W})):g!=null&&(Pu(g)&&(g=Pg(g,a+(!g.key||P&&P.key===g.key?"":(""+g.key).replace(Wh,"$&/")+"/")+n)),i.push(g)),1;if(P=0,u=u===""?".":u+":",Gh(n))for(var O=0;O<n.length;O++){h=n[O];var D=u+il(h,O);P+=Ma(h,i,a,D,g)}else if(D=Tg(n),typeof D=="function")for(n=D.call(n),O=0;!(h=n.next()).done;)h=h.value,D=u+il(h,O++),P+=Ma(h,i,a,D,g);else if(h==="object")throw i=String(n),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return P}function pa(n,i,a){if(n==null)return n;var u=[],g=0;return Ma(n,u,"","",function(h){return i.call(a,h,g++)}),u}function Ag(n){if(n._status===-1){var i=n._result;i=i(),i.then(function(a){(n._status===0||n._status===-1)&&(n._status=1,n._result=a)},function(a){(n._status===0||n._status===-1)&&(n._status=2,n._result=a)}),n._status===-1&&(n._status=0,n._result=i)}if(n._status===1)return n._result.default;throw n._result}var wi={current:null},Ra={transition:null},Lg={ReactCurrentDispatcher:wi,ReactCurrentBatchConfig:Ra,ReactCurrentOwner:Tu};gt.Children={map:pa,forEach:function(n,i,a){pa(n,function(){i.apply(this,arguments)},a)},count:function(n){var i=0;return pa(n,function(){i++}),i},toArray:function(n){return pa(n,function(i){return i})||[]},only:function(n){if(!Pu(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};gt.Component=ss;gt.Fragment=yg;gt.Profiler=xg;gt.PureComponent=ku;gt.StrictMode=wg;gt.Suspense=Eg;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lg;gt.cloneElement=function(n,i,a){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var u=ff({},n.props),g=n.key,h=n.ref,P=n._owner;if(i!=null){if(i.ref!==void 0&&(h=i.ref,P=Tu.current),i.key!==void 0&&(g=""+i.key),n.type&&n.type.defaultProps)var O=n.type.defaultProps;for(D in i)gf.call(i,D)&&!_f.hasOwnProperty(D)&&(u[D]=i[D]===void 0&&O!==void 0?O[D]:i[D])}var D=arguments.length-2;if(D===1)u.children=a;else if(1<D){O=Array(D);for(var W=0;W<D;W++)O[W]=arguments[W+2];u.children=O}return{$$typeof:ea,type:n.type,key:g,ref:h,props:u,_owner:P}};gt.createContext=function(n){return n={$$typeof:Cg,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Sg,_context:n},n.Consumer=n};gt.createElement=mf;gt.createFactory=function(n){var i=mf.bind(null,n);return i.type=n,i};gt.createRef=function(){return{current:null}};gt.forwardRef=function(n){return{$$typeof:bg,render:n}};gt.isValidElement=Pu;gt.lazy=function(n){return{$$typeof:Ng,_payload:{_status:-1,_result:n},_init:Ag}};gt.memo=function(n,i){return{$$typeof:kg,type:n,compare:i===void 0?null:i}};gt.startTransition=function(n){var i=Ra.transition;Ra.transition={};try{n()}finally{Ra.transition=i}};gt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};gt.useCallback=function(n,i){return wi.current.useCallback(n,i)};gt.useContext=function(n){return wi.current.useContext(n)};gt.useDebugValue=function(){};gt.useDeferredValue=function(n){return wi.current.useDeferredValue(n)};gt.useEffect=function(n,i){return wi.current.useEffect(n,i)};gt.useId=function(){return wi.current.useId()};gt.useImperativeHandle=function(n,i,a){return wi.current.useImperativeHandle(n,i,a)};gt.useInsertionEffect=function(n,i){return wi.current.useInsertionEffect(n,i)};gt.useLayoutEffect=function(n,i){return wi.current.useLayoutEffect(n,i)};gt.useMemo=function(n,i){return wi.current.useMemo(n,i)};gt.useReducer=function(n,i,a){return wi.current.useReducer(n,i,a)};gt.useRef=function(n){return wi.current.useRef(n)};gt.useState=function(n){return wi.current.useState(n)};gt.useSyncExternalStore=function(n,i,a){return wi.current.useSyncExternalStore(n,i,a)};gt.useTransition=function(){return wi.current.useTransition()};gt.version="18.2.0";(function(n){n.exports=gt})(jn);const qh=hf(jn.exports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og=jn.exports,Mg=Symbol.for("react.element"),Rg=Symbol.for("react.fragment"),zg=Object.prototype.hasOwnProperty,Dg=Og.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fg={key:!0,ref:!0,__self:!0,__source:!0};function vf(n,i,a){var u,g={},h=null,P=null;a!==void 0&&(h=""+a),i.key!==void 0&&(h=""+i.key),i.ref!==void 0&&(P=i.ref);for(u in i)zg.call(i,u)&&!Fg.hasOwnProperty(u)&&(g[u]=i[u]);if(n&&n.defaultProps)for(u in i=n.defaultProps,i)g[u]===void 0&&(g[u]=i[u]);return{$$typeof:Mg,type:n,key:h,ref:P,props:g,_owner:Dg.current}}No.Fragment=Rg;No.jsx=vf;No.jsxs=vf;(function(n){n.exports=No})(ko);const Tr=ko.exports.Fragment,De=ko.exports.jsx,dt=ko.exports.jsxs;function Bg(){return De("style",{children:`
        body,
        .simple-html-grid-menu,
        .simple-html-grid {
            --simple-html-grid-main-bg-color: #374151;
            --simple-html-grid-sec-bg-color: #4b5563;
            --simple-html-grid-alt-bg-color: #4b5563;
            --simple-html-grid-main-bg-border: #1f2937;
            --simple-html-grid-sec-bg-border: #1f2937;
            --simple-html-grid-main-bg-selected: #234882;
            --simple-html-grid-main-font-color: #f9f7f7;
            --simple-html-grid-sec-font-color: #979494;
            --simple-html-grid-dropzone-color: #979494;
            --simple-html-grid-grouping-border: #1f2937;
            --simple-html-grid-boxshadow: #4b5563;
            --simple-html-grid-main-hr-border: #4b5563;
        }
        .simple-html-grid ul.dialog-row {
            box-shadow: none;
        
        }
        .simple-html-grid li.dialog-row {
            border-left: 1px dotted rgb(100, 100, 100);
        } 
        .simple-html-grid .grid-edit-button {
            border-color: #374151;
        }
        .simple-html-grid .filter-dialog-bottom-row{
            border-top: 0px;
        }
        .simple-html-grid .filter-dialog-bottom-row button{
            border: 1px solid #515458;
        }
        simple-html-grid-filter-dialog ul input{
            color: var(--simple-html-grid-main-font-color);
            background-color: var(--simple-html-grid-alt-bg-color);
        }
        simple-html-grid-filter-dialog ul textarea{
            color: var(--simple-html-grid-main-font-color);
            background-color: var(--simple-html-grid-alt-bg-color);
        }
    `})}function Vg(){return De("a",{href:"https://github.com/vegarringdal/ProteusXMLDrawing",children:dt("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",width:24,height:24,viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[De("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),De("path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"})]})})}function Hg(){return De("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-10 h-10",onClick:()=>{alert("Check consosle.log for errors/info (F12) in Chrome/Edge if you do not get expected result. Use mousebuttons to pan and mousewheel to zoom, click to select (you need to click on text or lines...work in progress")},children:De("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})})}const Kh=n=>{let i;const a=new Set,u=(D,W)=>{const K=typeof D=="function"?D(i):D;if(K!==i){const X=i;i=(W!=null?W:typeof K!="object")?K:Object.assign({},i,K),a.forEach(ie=>ie(i,X))}},g=()=>i,O={setState:u,getState:g,subscribe:D=>(a.add(D),()=>a.delete(D)),destroy:()=>a.clear()};return i=n(u,g,O),O},Ug=n=>n?Kh(n):Kh;var yf={exports:{}},wf={},xf={exports:{}},Sf={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yr=jn.exports;function Gg(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Wg=typeof Object.is=="function"?Object.is:Gg,qg=Yr.useState,Kg=Yr.useEffect,Qg=Yr.useLayoutEffect,Zg=Yr.useDebugValue;function jg(n,i){var a=i(),u=qg({inst:{value:a,getSnapshot:i}}),g=u[0].inst,h=u[1];return Qg(function(){g.value=a,g.getSnapshot=i,nl(g)&&h({inst:g})},[n,a,i]),Kg(function(){return nl(g)&&h({inst:g}),n(function(){nl(g)&&h({inst:g})})},[n]),Zg(a),a}function nl(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Wg(n,a)}catch(u){return!0}}function Xg(n,i){return i()}var Yg=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?Xg:jg;Sf.useSyncExternalStore=Yr.useSyncExternalStore!==void 0?Yr.useSyncExternalStore:Yg;(function(n){n.exports=Sf})(xf);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var To=jn.exports,$g=xf.exports;function Jg(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var e_=typeof Object.is=="function"?Object.is:Jg,t_=$g.useSyncExternalStore,i_=To.useRef,n_=To.useEffect,r_=To.useMemo,s_=To.useDebugValue;wf.useSyncExternalStoreWithSelector=function(n,i,a,u,g){var h=i_(null);if(h.current===null){var P={hasValue:!1,value:null};h.current=P}else P=h.current;h=r_(function(){function D(z){if(!W){if(W=!0,K=z,z=u(z),g!==void 0&&P.hasValue){var ue=P.value;if(g(ue,z))return X=ue}return X=z}if(ue=X,e_(K,z))return ue;var ee=u(z);return g!==void 0&&g(ue,ee)?ue:(K=z,X=ee)}var W=!1,K,X,ie=a===void 0?null:a;return[function(){return D(i())},ie===null?void 0:function(){return D(ie())}]},[i,a,u,g]);var O=t_(n,h[0],h[1]);return n_(function(){P.hasValue=!0,P.value=O},[O]),s_(O),O};(function(n){n.exports=wf})(yf);const a_=hf(yf.exports),{useSyncExternalStoreWithSelector:o_}=a_;function l_(n,i=n.getState,a){const u=o_(n.subscribe,n.getState,n.getServerState||n.getState,i,a);return jn.exports.useDebugValue(u),u}const Qh=n=>{const i=typeof n=="function"?Ug(n):n,a=(u,g)=>l_(i,u,g);return Object.assign(a,i),a},u_=n=>n?Qh(n):Qh;var h_=u_;const Mt=h_(n=>({currentTab:"viewer",isLoading:!1,selectedXmlFileName:"",selectedXsdFileName:"",loadingMessage:"",loadingHeader:"",selected:null,setLoading:i=>{n(()=>({isLoading:i}))},setSelected:i=>{n(()=>({selected:i}))}}));function c_(){const n=Mt();return n.isLoading?De("div",{className:"fixed grid w-full h-full items-center justify-center fadeIn z-[7010] bg-gray-800/70 ",children:dt("div",{className:"block w-96 h-80 bg-gray-800",children:[De("span",{className:"m-auto block text-center text-2xl  p-2 bg-gray-700 ",children:"Please wait"}),De("div",{className:"block m-2 mt-10",children:De("span",{className:"m-auto block text-center loader "})}),De("span",{className:"m-auto block text-center underline font-semibold ",children:n.loadingHeader}),De("span",{className:"m-auto block text-center mt-4 whitespace-pre-line ",children:n.loadingMessage||""})]})}):null}const Gr=new Map;function f_(){Gr.clear()}function d_(){return Gr}function p_(n,i){Gr.has(n)&&(console.warn("duplicate ID's in file",n),console.warn("prev",Gr.get(n)),console.warn("new",i)),Gr.set(n,i)}function g_(n){return Gr.get(n)||null}class __{constructor(i,a,u){this.element=i,this.attributeName=a,this.parent=u,this.value=i.getAttribute(a),this.valueAsString=this.value||"",this.valueAsNumber=parseFloat(this.value||""),u.attributes[a]=this.valueAsString,isNaN(this.valueAsNumber)&&(this.valueAsNumber=0)}}function Cf(n){const i=[];return Object.keys(n).forEach(u=>{Array.isArray(n[u])&&n[u].forEach(g=>{g&&typeof g.draw=="function"&&i.push(g)})}),i}const bf=new Map;function m_(n,i){bf.set(n,i)}function v_(n){return bf.get(n)||null}function y_(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ef={exports:{}};const w_={},x_=Object.freeze(Object.defineProperty({__proto__:null,default:w_},Symbol.toStringTag,{value:"Module"})),ja=mg(x_);var ga={exports:{}},Zh;function S_(){return Zh||(Zh=1,function(n,i){(function(a,u){u(i)})(Eu,function(a){var u=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239],g=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],h="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",P="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",O={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},D="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",W={5:D,"5module":D+" export import",6:D+" const class extends export import super"},K=/^in(stanceof)?$/,X=new RegExp("["+P+"]"),ie=new RegExp("["+P+h+"]");function z(p,A){for(var U=65536,Z=0;Z<A.length;Z+=2){if(U+=A[Z],U>p)return!1;if(U+=A[Z+1],U>=p)return!0}}function ue(p,A){return p<65?p===36:p<91?!0:p<97?p===95:p<123?!0:p<=65535?p>=170&&X.test(String.fromCharCode(p)):A===!1?!1:z(p,g)}function ee(p,A){return p<48?p===36:p<58?!0:p<65?!1:p<91?!0:p<97?p===95:p<123?!0:p<=65535?p>=170&&ie.test(String.fromCharCode(p)):A===!1?!1:z(p,g)||z(p,u)}var ce=function(A,U){U===void 0&&(U={}),this.label=A,this.keyword=U.keyword,this.beforeExpr=!!U.beforeExpr,this.startsExpr=!!U.startsExpr,this.isLoop=!!U.isLoop,this.isAssign=!!U.isAssign,this.prefix=!!U.prefix,this.postfix=!!U.postfix,this.binop=U.binop||null,this.updateContext=null};function $(p,A){return new ce(p,{beforeExpr:!0,binop:A})}var J={beforeExpr:!0},te={startsExpr:!0},pe={};function we(p,A){return A===void 0&&(A={}),A.keyword=p,pe[p]=new ce(p,A)}var B={num:new ce("num",te),regexp:new ce("regexp",te),string:new ce("string",te),name:new ce("name",te),privateId:new ce("privateId",te),eof:new ce("eof"),bracketL:new ce("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ce("]"),braceL:new ce("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ce("}"),parenL:new ce("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ce(")"),comma:new ce(",",J),semi:new ce(";",J),colon:new ce(":",J),dot:new ce("."),question:new ce("?",J),questionDot:new ce("?."),arrow:new ce("=>",J),template:new ce("template"),invalidTemplate:new ce("invalidTemplate"),ellipsis:new ce("...",J),backQuote:new ce("`",te),dollarBraceL:new ce("${",{beforeExpr:!0,startsExpr:!0}),eq:new ce("=",{beforeExpr:!0,isAssign:!0}),assign:new ce("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ce("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ce("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:$("||",1),logicalAND:$("&&",2),bitwiseOR:$("|",3),bitwiseXOR:$("^",4),bitwiseAND:$("&",5),equality:$("==/!=/===/!==",6),relational:$("</>/<=/>=",7),bitShift:$("<</>>/>>>",8),plusMin:new ce("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:$("%",10),star:$("*",10),slash:$("/",10),starstar:new ce("**",{beforeExpr:!0}),coalesce:$("??",1),_break:we("break"),_case:we("case",J),_catch:we("catch"),_continue:we("continue"),_debugger:we("debugger"),_default:we("default",J),_do:we("do",{isLoop:!0,beforeExpr:!0}),_else:we("else",J),_finally:we("finally"),_for:we("for",{isLoop:!0}),_function:we("function",te),_if:we("if"),_return:we("return",J),_switch:we("switch"),_throw:we("throw",J),_try:we("try"),_var:we("var"),_const:we("const"),_while:we("while",{isLoop:!0}),_with:we("with"),_new:we("new",{beforeExpr:!0,startsExpr:!0}),_this:we("this",te),_super:we("super",te),_class:we("class",te),_extends:we("extends",J),_export:we("export"),_import:we("import",te),_null:we("null",te),_true:we("true",te),_false:we("false",te),_in:we("in",{beforeExpr:!0,binop:7}),_instanceof:we("instanceof",{beforeExpr:!0,binop:7}),_typeof:we("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:we("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:we("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ne=/\r\n?|\n|\u2028|\u2029/,Pe=new RegExp(Ne.source,"g");function Fe(p){return p===10||p===13||p===8232||p===8233}function Ve(p,A,U){U===void 0&&(U=p.length);for(var Z=A;Z<U;Z++){var ne=p.charCodeAt(Z);if(Fe(ne))return Z<U-1&&ne===13&&p.charCodeAt(Z+1)===10?Z+2:Z+1}return-1}var ot=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ke=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,st=Object.prototype,Ee=st.hasOwnProperty,bt=st.toString,le=Object.hasOwn||function(p,A){return Ee.call(p,A)},lt=Array.isArray||function(p){return bt.call(p)==="[object Array]"};function Ae(p){return new RegExp("^(?:"+p.replace(/ /g,"|")+")$")}function be(p){return p<=65535?String.fromCharCode(p):(p-=65536,String.fromCharCode((p>>10)+55296,(p&1023)+56320))}var Be=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,it=function(A,U){this.line=A,this.column=U};it.prototype.offset=function(A){return new it(this.line,this.column+A)};var ut=function(A,U,Z){this.start=U,this.end=Z,A.sourceFile!==null&&(this.source=A.sourceFile)};function Ut(p,A){for(var U=1,Z=0;;){var ne=Ve(p,Z,A);if(ne<0)return new it(U,A-Z);++U,Z=ne}}var Gt={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Qe=!1;function qt(p){var A={};for(var U in Gt)A[U]=p&&le(p,U)?p[U]:Gt[U];if(A.ecmaVersion==="latest"?A.ecmaVersion=1e8:A.ecmaVersion==null?(!Qe&&typeof console=="object"&&console.warn&&(Qe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),A.ecmaVersion=11):A.ecmaVersion>=2015&&(A.ecmaVersion-=2009),A.allowReserved==null&&(A.allowReserved=A.ecmaVersion<5),p.allowHashBang==null&&(A.allowHashBang=A.ecmaVersion>=14),lt(A.onToken)){var Z=A.onToken;A.onToken=function(ne){return Z.push(ne)}}return lt(A.onComment)&&(A.onComment=oi(A,A.onComment)),A}function oi(p,A){return function(U,Z,ne,ge,_e,Ie){var Re={type:U?"Block":"Line",value:Z,start:ne,end:ge};p.locations&&(Re.loc=new ut(this,_e,Ie)),p.ranges&&(Re.range=[ne,ge]),A.push(Re)}}var Ni=1,je=2,nt=4,et=8,Sr=16,Mi=32,er=64,Sn=128,un=256,tr=Ni|je|un;function ir(p,A){return je|(p?nt:0)|(A?et:0)}var Cn=0,It=1,mt=2,Nt=3,Tt=4,rt=5,s=function(A,U,Z){this.options=A=qt(A),this.sourceFile=A.sourceFile,this.keywords=Ae(W[A.ecmaVersion>=6?6:A.sourceType==="module"?"5module":5]);var ne="";A.allowReserved!==!0&&(ne=O[A.ecmaVersion>=6?6:A.ecmaVersion===5?5:3],A.sourceType==="module"&&(ne+=" await")),this.reservedWords=Ae(ne);var ge=(ne?ne+" ":"")+O.strict;this.reservedWordsStrict=Ae(ge),this.reservedWordsStrictBind=Ae(ge+" "+O.strictBind),this.input=String(U),this.containsEsc=!1,Z?(this.pos=Z,this.lineStart=this.input.lastIndexOf(`
`,Z-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ne).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=B.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=A.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&A.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Ni),this.regexpState=null,this.privateNameStack=[]},e={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};s.prototype.parse=function(){var A=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(A)},e.inFunction.get=function(){return(this.currentVarScope().flags&je)>0},e.inGenerator.get=function(){return(this.currentVarScope().flags&et)>0&&!this.currentVarScope().inClassFieldInit},e.inAsync.get=function(){return(this.currentVarScope().flags&nt)>0&&!this.currentVarScope().inClassFieldInit},e.canAwait.get=function(){for(var p=this.scopeStack.length-1;p>=0;p--){var A=this.scopeStack[p];if(A.inClassFieldInit||A.flags&un)return!1;if(A.flags&je)return(A.flags&nt)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},e.allowSuper.get=function(){var p=this.currentThisScope(),A=p.flags,U=p.inClassFieldInit;return(A&er)>0||U||this.options.allowSuperOutsideMethod},e.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Sn)>0},e.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},e.allowNewDotTarget.get=function(){var p=this.currentThisScope(),A=p.flags,U=p.inClassFieldInit;return(A&(je|un))>0||U},e.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&un)>0},s.extend=function(){for(var A=[],U=arguments.length;U--;)A[U]=arguments[U];for(var Z=this,ne=0;ne<A.length;ne++)Z=A[ne](Z);return Z},s.parse=function(A,U){return new this(U,A).parse()},s.parseExpressionAt=function(A,U,Z){var ne=new this(Z,A,U);return ne.nextToken(),ne.parseExpression()},s.tokenizer=function(A,U){return new this(U,A)},Object.defineProperties(s.prototype,e);var t=s.prototype,r=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;t.strictDirective=function(p){if(this.options.ecmaVersion<5)return!1;for(;;){Ke.lastIndex=p,p+=Ke.exec(this.input)[0].length;var A=r.exec(this.input.slice(p));if(!A)return!1;if((A[1]||A[2])==="use strict"){Ke.lastIndex=p+A[0].length;var U=Ke.exec(this.input),Z=U.index+U[0].length,ne=this.input.charAt(Z);return ne===";"||ne==="}"||Ne.test(U[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(ne)||ne==="!"&&this.input.charAt(Z+1)==="=")}p+=A[0].length,Ke.lastIndex=p,p+=Ke.exec(this.input)[0].length,this.input[p]===";"&&p++}},t.eat=function(p){return this.type===p?(this.next(),!0):!1},t.isContextual=function(p){return this.type===B.name&&this.value===p&&!this.containsEsc},t.eatContextual=function(p){return this.isContextual(p)?(this.next(),!0):!1},t.expectContextual=function(p){this.eatContextual(p)||this.unexpected()},t.canInsertSemicolon=function(){return this.type===B.eof||this.type===B.braceR||Ne.test(this.input.slice(this.lastTokEnd,this.start))},t.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},t.semicolon=function(){!this.eat(B.semi)&&!this.insertSemicolon()&&this.unexpected()},t.afterTrailingComma=function(p,A){if(this.type===p)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),A||this.next(),!0},t.expect=function(p){this.eat(p)||this.unexpected()},t.unexpected=function(p){this.raise(p!=null?p:this.start,"Unexpected token")};var o=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};t.checkPatternErrors=function(p,A){if(!!p){p.trailingComma>-1&&this.raiseRecoverable(p.trailingComma,"Comma is not permitted after the rest element");var U=A?p.parenthesizedAssign:p.parenthesizedBind;U>-1&&this.raiseRecoverable(U,A?"Assigning to rvalue":"Parenthesized pattern")}},t.checkExpressionErrors=function(p,A){if(!p)return!1;var U=p.shorthandAssign,Z=p.doubleProto;if(!A)return U>=0||Z>=0;U>=0&&this.raise(U,"Shorthand property assignments are valid only in destructuring patterns"),Z>=0&&this.raiseRecoverable(Z,"Redefinition of __proto__ property")},t.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},t.isSimpleAssignTarget=function(p){return p.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(p.expression):p.type==="Identifier"||p.type==="MemberExpression"};var l=s.prototype;l.parseTopLevel=function(p){var A=Object.create(null);for(p.body||(p.body=[]);this.type!==B.eof;){var U=this.parseStatement(null,!0,A);p.body.push(U)}if(this.inModule)for(var Z=0,ne=Object.keys(this.undefinedExports);Z<ne.length;Z+=1){var ge=ne[Z];this.raiseRecoverable(this.undefinedExports[ge].start,"Export '"+ge+"' is not defined")}return this.adaptDirectivePrologue(p.body),this.next(),p.sourceType=this.options.sourceType,this.finishNode(p,"Program")};var c={kind:"loop"},f={kind:"switch"};l.isLet=function(p){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Ke.lastIndex=this.pos;var A=Ke.exec(this.input),U=this.pos+A[0].length,Z=this.input.charCodeAt(U);if(Z===91||Z===92||Z>55295&&Z<56320)return!0;if(p)return!1;if(Z===123)return!0;if(ue(Z,!0)){for(var ne=U+1;ee(Z=this.input.charCodeAt(ne),!0);)++ne;if(Z===92||Z>55295&&Z<56320)return!0;var ge=this.input.slice(U,ne);if(!K.test(ge))return!0}return!1},l.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Ke.lastIndex=this.pos;var p=Ke.exec(this.input),A=this.pos+p[0].length,U;return!Ne.test(this.input.slice(this.pos,A))&&this.input.slice(A,A+8)==="function"&&(A+8===this.input.length||!(ee(U=this.input.charCodeAt(A+8))||U>55295&&U<56320))},l.parseStatement=function(p,A,U){var Z=this.type,ne=this.startNode(),ge;switch(this.isLet(p)&&(Z=B._var,ge="let"),Z){case B._break:case B._continue:return this.parseBreakContinueStatement(ne,Z.keyword);case B._debugger:return this.parseDebuggerStatement(ne);case B._do:return this.parseDoStatement(ne);case B._for:return this.parseForStatement(ne);case B._function:return p&&(this.strict||p!=="if"&&p!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(ne,!1,!p);case B._class:return p&&this.unexpected(),this.parseClass(ne,!0);case B._if:return this.parseIfStatement(ne);case B._return:return this.parseReturnStatement(ne);case B._switch:return this.parseSwitchStatement(ne);case B._throw:return this.parseThrowStatement(ne);case B._try:return this.parseTryStatement(ne);case B._const:case B._var:return ge=ge||this.value,p&&ge!=="var"&&this.unexpected(),this.parseVarStatement(ne,ge);case B._while:return this.parseWhileStatement(ne);case B._with:return this.parseWithStatement(ne);case B.braceL:return this.parseBlock(!0,ne);case B.semi:return this.parseEmptyStatement(ne);case B._export:case B._import:if(this.options.ecmaVersion>10&&Z===B._import){Ke.lastIndex=this.pos;var _e=Ke.exec(this.input),Ie=this.pos+_e[0].length,Re=this.input.charCodeAt(Ie);if(Re===40||Re===46)return this.parseExpressionStatement(ne,this.parseExpression())}return this.options.allowImportExportEverywhere||(A||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),Z===B._import?this.parseImport(ne):this.parseExport(ne,U);default:if(this.isAsyncFunction())return p&&this.unexpected(),this.next(),this.parseFunctionStatement(ne,!0,!p);var qe=this.value,$e=this.parseExpression();return Z===B.name&&$e.type==="Identifier"&&this.eat(B.colon)?this.parseLabeledStatement(ne,qe,$e,p):this.parseExpressionStatement(ne,$e)}},l.parseBreakContinueStatement=function(p,A){var U=A==="break";this.next(),this.eat(B.semi)||this.insertSemicolon()?p.label=null:this.type!==B.name?this.unexpected():(p.label=this.parseIdent(),this.semicolon());for(var Z=0;Z<this.labels.length;++Z){var ne=this.labels[Z];if((p.label==null||ne.name===p.label.name)&&(ne.kind!=null&&(U||ne.kind==="loop")||p.label&&U))break}return Z===this.labels.length&&this.raise(p.start,"Unsyntactic "+A),this.finishNode(p,U?"BreakStatement":"ContinueStatement")},l.parseDebuggerStatement=function(p){return this.next(),this.semicolon(),this.finishNode(p,"DebuggerStatement")},l.parseDoStatement=function(p){return this.next(),this.labels.push(c),p.body=this.parseStatement("do"),this.labels.pop(),this.expect(B._while),p.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(B.semi):this.semicolon(),this.finishNode(p,"DoWhileStatement")},l.parseForStatement=function(p){this.next();var A=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(c),this.enterScope(0),this.expect(B.parenL),this.type===B.semi)return A>-1&&this.unexpected(A),this.parseFor(p,null);var U=this.isLet();if(this.type===B._var||this.type===B._const||U){var Z=this.startNode(),ne=U?"let":this.value;return this.next(),this.parseVar(Z,!0,ne),this.finishNode(Z,"VariableDeclaration"),(this.type===B._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&Z.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===B._in?A>-1&&this.unexpected(A):p.await=A>-1),this.parseForIn(p,Z)):(A>-1&&this.unexpected(A),this.parseFor(p,Z))}var ge=this.isContextual("let"),_e=!1,Ie=new o,Re=this.parseExpression(A>-1?"await":!0,Ie);return this.type===B._in||(_e=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===B._in?A>-1&&this.unexpected(A):p.await=A>-1),ge&&_e&&this.raise(Re.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Re,!1,Ie),this.checkLValPattern(Re),this.parseForIn(p,Re)):(this.checkExpressionErrors(Ie,!0),A>-1&&this.unexpected(A),this.parseFor(p,Re))},l.parseFunctionStatement=function(p,A,U){return this.next(),this.parseFunction(p,_|(U?0:m),!1,A)},l.parseIfStatement=function(p){return this.next(),p.test=this.parseParenExpression(),p.consequent=this.parseStatement("if"),p.alternate=this.eat(B._else)?this.parseStatement("if"):null,this.finishNode(p,"IfStatement")},l.parseReturnStatement=function(p){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(B.semi)||this.insertSemicolon()?p.argument=null:(p.argument=this.parseExpression(),this.semicolon()),this.finishNode(p,"ReturnStatement")},l.parseSwitchStatement=function(p){this.next(),p.discriminant=this.parseParenExpression(),p.cases=[],this.expect(B.braceL),this.labels.push(f),this.enterScope(0);for(var A,U=!1;this.type!==B.braceR;)if(this.type===B._case||this.type===B._default){var Z=this.type===B._case;A&&this.finishNode(A,"SwitchCase"),p.cases.push(A=this.startNode()),A.consequent=[],this.next(),Z?A.test=this.parseExpression():(U&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),U=!0,A.test=null),this.expect(B.colon)}else A||this.unexpected(),A.consequent.push(this.parseStatement(null));return this.exitScope(),A&&this.finishNode(A,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(p,"SwitchStatement")},l.parseThrowStatement=function(p){return this.next(),Ne.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),p.argument=this.parseExpression(),this.semicolon(),this.finishNode(p,"ThrowStatement")};var d=[];l.parseTryStatement=function(p){if(this.next(),p.block=this.parseBlock(),p.handler=null,this.type===B._catch){var A=this.startNode();if(this.next(),this.eat(B.parenL)){A.param=this.parseBindingAtom();var U=A.param.type==="Identifier";this.enterScope(U?Mi:0),this.checkLValPattern(A.param,U?Tt:mt),this.expect(B.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),A.param=null,this.enterScope(0);A.body=this.parseBlock(!1),this.exitScope(),p.handler=this.finishNode(A,"CatchClause")}return p.finalizer=this.eat(B._finally)?this.parseBlock():null,!p.handler&&!p.finalizer&&this.raise(p.start,"Missing catch or finally clause"),this.finishNode(p,"TryStatement")},l.parseVarStatement=function(p,A){return this.next(),this.parseVar(p,!1,A),this.semicolon(),this.finishNode(p,"VariableDeclaration")},l.parseWhileStatement=function(p){return this.next(),p.test=this.parseParenExpression(),this.labels.push(c),p.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(p,"WhileStatement")},l.parseWithStatement=function(p){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),p.object=this.parseParenExpression(),p.body=this.parseStatement("with"),this.finishNode(p,"WithStatement")},l.parseEmptyStatement=function(p){return this.next(),this.finishNode(p,"EmptyStatement")},l.parseLabeledStatement=function(p,A,U,Z){for(var ne=0,ge=this.labels;ne<ge.length;ne+=1){var _e=ge[ne];_e.name===A&&this.raise(U.start,"Label '"+A+"' is already declared")}for(var Ie=this.type.isLoop?"loop":this.type===B._switch?"switch":null,Re=this.labels.length-1;Re>=0;Re--){var qe=this.labels[Re];if(qe.statementStart===p.start)qe.statementStart=this.start,qe.kind=Ie;else break}return this.labels.push({name:A,kind:Ie,statementStart:this.start}),p.body=this.parseStatement(Z?Z.indexOf("label")===-1?Z+"label":Z:"label"),this.labels.pop(),p.label=U,this.finishNode(p,"LabeledStatement")},l.parseExpressionStatement=function(p,A){return p.expression=A,this.semicolon(),this.finishNode(p,"ExpressionStatement")},l.parseBlock=function(p,A,U){for(p===void 0&&(p=!0),A===void 0&&(A=this.startNode()),A.body=[],this.expect(B.braceL),p&&this.enterScope(0);this.type!==B.braceR;){var Z=this.parseStatement(null);A.body.push(Z)}return U&&(this.strict=!1),this.next(),p&&this.exitScope(),this.finishNode(A,"BlockStatement")},l.parseFor=function(p,A){return p.init=A,this.expect(B.semi),p.test=this.type===B.semi?null:this.parseExpression(),this.expect(B.semi),p.update=this.type===B.parenR?null:this.parseExpression(),this.expect(B.parenR),p.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(p,"ForStatement")},l.parseForIn=function(p,A){var U=this.type===B._in;return this.next(),A.type==="VariableDeclaration"&&A.declarations[0].init!=null&&(!U||this.options.ecmaVersion<8||this.strict||A.kind!=="var"||A.declarations[0].id.type!=="Identifier")&&this.raise(A.start,(U?"for-in":"for-of")+" loop variable declaration may not have an initializer"),p.left=A,p.right=U?this.parseExpression():this.parseMaybeAssign(),this.expect(B.parenR),p.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(p,U?"ForInStatement":"ForOfStatement")},l.parseVar=function(p,A,U){for(p.declarations=[],p.kind=U;;){var Z=this.startNode();if(this.parseVarId(Z,U),this.eat(B.eq)?Z.init=this.parseMaybeAssign(A):U==="const"&&!(this.type===B._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():Z.id.type!=="Identifier"&&!(A&&(this.type===B._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):Z.init=null,p.declarations.push(this.finishNode(Z,"VariableDeclarator")),!this.eat(B.comma))break}return p},l.parseVarId=function(p,A){p.id=this.parseBindingAtom(),this.checkLValPattern(p.id,A==="var"?It:mt,!1)};var _=1,m=2,w=4;l.parseFunction=function(p,A,U,Z,ne){this.initFunction(p),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!Z)&&(this.type===B.star&&A&m&&this.unexpected(),p.generator=this.eat(B.star)),this.options.ecmaVersion>=8&&(p.async=!!Z),A&_&&(p.id=A&w&&this.type!==B.name?null:this.parseIdent(),p.id&&!(A&m)&&this.checkLValSimple(p.id,this.strict||p.generator||p.async?this.treatFunctionsAsVar?It:mt:Nt));var ge=this.yieldPos,_e=this.awaitPos,Ie=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ir(p.async,p.generator)),A&_||(p.id=this.type===B.name?this.parseIdent():null),this.parseFunctionParams(p),this.parseFunctionBody(p,U,!1,ne),this.yieldPos=ge,this.awaitPos=_e,this.awaitIdentPos=Ie,this.finishNode(p,A&_?"FunctionDeclaration":"FunctionExpression")},l.parseFunctionParams=function(p){this.expect(B.parenL),p.params=this.parseBindingList(B.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},l.parseClass=function(p,A){this.next();var U=this.strict;this.strict=!0,this.parseClassId(p,A),this.parseClassSuper(p);var Z=this.enterClassBody(),ne=this.startNode(),ge=!1;for(ne.body=[],this.expect(B.braceL);this.type!==B.braceR;){var _e=this.parseClassElement(p.superClass!==null);_e&&(ne.body.push(_e),_e.type==="MethodDefinition"&&_e.kind==="constructor"?(ge&&this.raise(_e.start,"Duplicate constructor in the same class"),ge=!0):_e.key&&_e.key.type==="PrivateIdentifier"&&y(Z,_e)&&this.raiseRecoverable(_e.key.start,"Identifier '#"+_e.key.name+"' has already been declared"))}return this.strict=U,this.next(),p.body=this.finishNode(ne,"ClassBody"),this.exitClassBody(),this.finishNode(p,A?"ClassDeclaration":"ClassExpression")},l.parseClassElement=function(p){if(this.eat(B.semi))return null;var A=this.options.ecmaVersion,U=this.startNode(),Z="",ne=!1,ge=!1,_e="method",Ie=!1;if(this.eatContextual("static")){if(A>=13&&this.eat(B.braceL))return this.parseClassStaticBlock(U),U;this.isClassElementNameStart()||this.type===B.star?Ie=!0:Z="static"}if(U.static=Ie,!Z&&A>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===B.star)&&!this.canInsertSemicolon()?ge=!0:Z="async"),!Z&&(A>=9||!ge)&&this.eat(B.star)&&(ne=!0),!Z&&!ge&&!ne){var Re=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?_e=Re:Z=Re)}if(Z?(U.computed=!1,U.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),U.key.name=Z,this.finishNode(U.key,"Identifier")):this.parseClassElementName(U),A<13||this.type===B.parenL||_e!=="method"||ne||ge){var qe=!U.static&&v(U,"constructor"),$e=qe&&p;qe&&_e!=="method"&&this.raise(U.key.start,"Constructor can't have get/set modifier"),U.kind=qe?"constructor":_e,this.parseClassMethod(U,ne,ge,$e)}else this.parseClassField(U);return U},l.isClassElementNameStart=function(){return this.type===B.name||this.type===B.privateId||this.type===B.num||this.type===B.string||this.type===B.bracketL||this.type.keyword},l.parseClassElementName=function(p){this.type===B.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),p.computed=!1,p.key=this.parsePrivateIdent()):this.parsePropertyName(p)},l.parseClassMethod=function(p,A,U,Z){var ne=p.key;p.kind==="constructor"?(A&&this.raise(ne.start,"Constructor can't be a generator"),U&&this.raise(ne.start,"Constructor can't be an async method")):p.static&&v(p,"prototype")&&this.raise(ne.start,"Classes may not have a static property named prototype");var ge=p.value=this.parseMethod(A,U,Z);return p.kind==="get"&&ge.params.length!==0&&this.raiseRecoverable(ge.start,"getter should have no params"),p.kind==="set"&&ge.params.length!==1&&this.raiseRecoverable(ge.start,"setter should have exactly one param"),p.kind==="set"&&ge.params[0].type==="RestElement"&&this.raiseRecoverable(ge.params[0].start,"Setter cannot use rest params"),this.finishNode(p,"MethodDefinition")},l.parseClassField=function(p){if(v(p,"constructor")?this.raise(p.key.start,"Classes can't have a field named 'constructor'"):p.static&&v(p,"prototype")&&this.raise(p.key.start,"Classes can't have a static field named 'prototype'"),this.eat(B.eq)){var A=this.currentThisScope(),U=A.inClassFieldInit;A.inClassFieldInit=!0,p.value=this.parseMaybeAssign(),A.inClassFieldInit=U}else p.value=null;return this.semicolon(),this.finishNode(p,"PropertyDefinition")},l.parseClassStaticBlock=function(p){p.body=[];var A=this.labels;for(this.labels=[],this.enterScope(un|er);this.type!==B.braceR;){var U=this.parseStatement(null);p.body.push(U)}return this.next(),this.exitScope(),this.labels=A,this.finishNode(p,"StaticBlock")},l.parseClassId=function(p,A){this.type===B.name?(p.id=this.parseIdent(),A&&this.checkLValSimple(p.id,mt,!1)):(A===!0&&this.unexpected(),p.id=null)},l.parseClassSuper=function(p){p.superClass=this.eat(B._extends)?this.parseExprSubscripts(!1):null},l.enterClassBody=function(){var p={declared:Object.create(null),used:[]};return this.privateNameStack.push(p),p.declared},l.exitClassBody=function(){for(var p=this.privateNameStack.pop(),A=p.declared,U=p.used,Z=this.privateNameStack.length,ne=Z===0?null:this.privateNameStack[Z-1],ge=0;ge<U.length;++ge){var _e=U[ge];le(A,_e.name)||(ne?ne.used.push(_e):this.raiseRecoverable(_e.start,"Private field '#"+_e.name+"' must be declared in an enclosing class"))}};function y(p,A){var U=A.key.name,Z=p[U],ne="true";return A.type==="MethodDefinition"&&(A.kind==="get"||A.kind==="set")&&(ne=(A.static?"s":"i")+A.kind),Z==="iget"&&ne==="iset"||Z==="iset"&&ne==="iget"||Z==="sget"&&ne==="sset"||Z==="sset"&&ne==="sget"?(p[U]="true",!1):Z?!0:(p[U]=ne,!1)}function v(p,A){var U=p.computed,Z=p.key;return!U&&(Z.type==="Identifier"&&Z.name===A||Z.type==="Literal"&&Z.value===A)}l.parseExport=function(p,A){if(this.next(),this.eat(B.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(p.exported=this.parseModuleExportName(),this.checkExport(A,p.exported,this.lastTokStart)):p.exported=null),this.expectContextual("from"),this.type!==B.string&&this.unexpected(),p.source=this.parseExprAtom(),this.semicolon(),this.finishNode(p,"ExportAllDeclaration");if(this.eat(B._default)){this.checkExport(A,"default",this.lastTokStart);var U;if(this.type===B._function||(U=this.isAsyncFunction())){var Z=this.startNode();this.next(),U&&this.next(),p.declaration=this.parseFunction(Z,_|w,!1,U)}else if(this.type===B._class){var ne=this.startNode();p.declaration=this.parseClass(ne,"nullableID")}else p.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(p,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())p.declaration=this.parseStatement(null),p.declaration.type==="VariableDeclaration"?this.checkVariableExport(A,p.declaration.declarations):this.checkExport(A,p.declaration.id,p.declaration.id.start),p.specifiers=[],p.source=null;else{if(p.declaration=null,p.specifiers=this.parseExportSpecifiers(A),this.eatContextual("from"))this.type!==B.string&&this.unexpected(),p.source=this.parseExprAtom();else{for(var ge=0,_e=p.specifiers;ge<_e.length;ge+=1){var Ie=_e[ge];this.checkUnreserved(Ie.local),this.checkLocalExport(Ie.local),Ie.local.type==="Literal"&&this.raise(Ie.local.start,"A string literal cannot be used as an exported binding without `from`.")}p.source=null}this.semicolon()}return this.finishNode(p,"ExportNamedDeclaration")},l.checkExport=function(p,A,U){!p||(typeof A!="string"&&(A=A.type==="Identifier"?A.name:A.value),le(p,A)&&this.raiseRecoverable(U,"Duplicate export '"+A+"'"),p[A]=!0)},l.checkPatternExport=function(p,A){var U=A.type;if(U==="Identifier")this.checkExport(p,A,A.start);else if(U==="ObjectPattern")for(var Z=0,ne=A.properties;Z<ne.length;Z+=1){var ge=ne[Z];this.checkPatternExport(p,ge)}else if(U==="ArrayPattern")for(var _e=0,Ie=A.elements;_e<Ie.length;_e+=1){var Re=Ie[_e];Re&&this.checkPatternExport(p,Re)}else U==="Property"?this.checkPatternExport(p,A.value):U==="AssignmentPattern"?this.checkPatternExport(p,A.left):U==="RestElement"?this.checkPatternExport(p,A.argument):U==="ParenthesizedExpression"&&this.checkPatternExport(p,A.expression)},l.checkVariableExport=function(p,A){if(!!p)for(var U=0,Z=A;U<Z.length;U+=1){var ne=Z[U];this.checkPatternExport(p,ne.id)}},l.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},l.parseExportSpecifiers=function(p){var A=[],U=!0;for(this.expect(B.braceL);!this.eat(B.braceR);){if(U)U=!1;else if(this.expect(B.comma),this.afterTrailingComma(B.braceR))break;var Z=this.startNode();Z.local=this.parseModuleExportName(),Z.exported=this.eatContextual("as")?this.parseModuleExportName():Z.local,this.checkExport(p,Z.exported,Z.exported.start),A.push(this.finishNode(Z,"ExportSpecifier"))}return A},l.parseImport=function(p){return this.next(),this.type===B.string?(p.specifiers=d,p.source=this.parseExprAtom()):(p.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),p.source=this.type===B.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(p,"ImportDeclaration")},l.parseImportSpecifiers=function(){var p=[],A=!0;if(this.type===B.name){var U=this.startNode();if(U.local=this.parseIdent(),this.checkLValSimple(U.local,mt),p.push(this.finishNode(U,"ImportDefaultSpecifier")),!this.eat(B.comma))return p}if(this.type===B.star){var Z=this.startNode();return this.next(),this.expectContextual("as"),Z.local=this.parseIdent(),this.checkLValSimple(Z.local,mt),p.push(this.finishNode(Z,"ImportNamespaceSpecifier")),p}for(this.expect(B.braceL);!this.eat(B.braceR);){if(A)A=!1;else if(this.expect(B.comma),this.afterTrailingComma(B.braceR))break;var ne=this.startNode();ne.imported=this.parseModuleExportName(),this.eatContextual("as")?ne.local=this.parseIdent():(this.checkUnreserved(ne.imported),ne.local=ne.imported),this.checkLValSimple(ne.local,mt),p.push(this.finishNode(ne,"ImportSpecifier"))}return p},l.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===B.string){var p=this.parseLiteral(this.value);return Be.test(p.value)&&this.raise(p.start,"An export name cannot include a lone surrogate."),p}return this.parseIdent(!0)},l.adaptDirectivePrologue=function(p){for(var A=0;A<p.length&&this.isDirectiveCandidate(p[A]);++A)p[A].directive=p[A].expression.raw.slice(1,-1)},l.isDirectiveCandidate=function(p){return this.options.ecmaVersion>=5&&p.type==="ExpressionStatement"&&p.expression.type==="Literal"&&typeof p.expression.value=="string"&&(this.input[p.start]==='"'||this.input[p.start]==="'")};var C=s.prototype;C.toAssignable=function(p,A,U){if(this.options.ecmaVersion>=6&&p)switch(p.type){case"Identifier":this.inAsync&&p.name==="await"&&this.raise(p.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":p.type="ObjectPattern",U&&this.checkPatternErrors(U,!0);for(var Z=0,ne=p.properties;Z<ne.length;Z+=1){var ge=ne[Z];this.toAssignable(ge,A),ge.type==="RestElement"&&(ge.argument.type==="ArrayPattern"||ge.argument.type==="ObjectPattern")&&this.raise(ge.argument.start,"Unexpected token")}break;case"Property":p.kind!=="init"&&this.raise(p.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(p.value,A);break;case"ArrayExpression":p.type="ArrayPattern",U&&this.checkPatternErrors(U,!0),this.toAssignableList(p.elements,A);break;case"SpreadElement":p.type="RestElement",this.toAssignable(p.argument,A),p.argument.type==="AssignmentPattern"&&this.raise(p.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":p.operator!=="="&&this.raise(p.left.end,"Only '=' operator can be used for specifying default value."),p.type="AssignmentPattern",delete p.operator,this.toAssignable(p.left,A);break;case"ParenthesizedExpression":this.toAssignable(p.expression,A,U);break;case"ChainExpression":this.raiseRecoverable(p.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!A)break;default:this.raise(p.start,"Assigning to rvalue")}else U&&this.checkPatternErrors(U,!0);return p},C.toAssignableList=function(p,A){for(var U=p.length,Z=0;Z<U;Z++){var ne=p[Z];ne&&this.toAssignable(ne,A)}if(U){var ge=p[U-1];this.options.ecmaVersion===6&&A&&ge&&ge.type==="RestElement"&&ge.argument.type!=="Identifier"&&this.unexpected(ge.argument.start)}return p},C.parseSpread=function(p){var A=this.startNode();return this.next(),A.argument=this.parseMaybeAssign(!1,p),this.finishNode(A,"SpreadElement")},C.parseRestBinding=function(){var p=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==B.name&&this.unexpected(),p.argument=this.parseBindingAtom(),this.finishNode(p,"RestElement")},C.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case B.bracketL:var p=this.startNode();return this.next(),p.elements=this.parseBindingList(B.bracketR,!0,!0),this.finishNode(p,"ArrayPattern");case B.braceL:return this.parseObj(!0)}return this.parseIdent()},C.parseBindingList=function(p,A,U){for(var Z=[],ne=!0;!this.eat(p);)if(ne?ne=!1:this.expect(B.comma),A&&this.type===B.comma)Z.push(null);else{if(U&&this.afterTrailingComma(p))break;if(this.type===B.ellipsis){var ge=this.parseRestBinding();this.parseBindingListItem(ge),Z.push(ge),this.type===B.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(p);break}else{var _e=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(_e),Z.push(_e)}}return Z},C.parseBindingListItem=function(p){return p},C.parseMaybeDefault=function(p,A,U){if(U=U||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(B.eq))return U;var Z=this.startNodeAt(p,A);return Z.left=U,Z.right=this.parseMaybeAssign(),this.finishNode(Z,"AssignmentPattern")},C.checkLValSimple=function(p,A,U){A===void 0&&(A=Cn);var Z=A!==Cn;switch(p.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(p.name)&&this.raiseRecoverable(p.start,(Z?"Binding ":"Assigning to ")+p.name+" in strict mode"),Z&&(A===mt&&p.name==="let"&&this.raiseRecoverable(p.start,"let is disallowed as a lexically bound name"),U&&(le(U,p.name)&&this.raiseRecoverable(p.start,"Argument name clash"),U[p.name]=!0),A!==rt&&this.declareName(p.name,A,p.start));break;case"ChainExpression":this.raiseRecoverable(p.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":Z&&this.raiseRecoverable(p.start,"Binding member expression");break;case"ParenthesizedExpression":return Z&&this.raiseRecoverable(p.start,"Binding parenthesized expression"),this.checkLValSimple(p.expression,A,U);default:this.raise(p.start,(Z?"Binding":"Assigning to")+" rvalue")}},C.checkLValPattern=function(p,A,U){switch(A===void 0&&(A=Cn),p.type){case"ObjectPattern":for(var Z=0,ne=p.properties;Z<ne.length;Z+=1){var ge=ne[Z];this.checkLValInnerPattern(ge,A,U)}break;case"ArrayPattern":for(var _e=0,Ie=p.elements;_e<Ie.length;_e+=1){var Re=Ie[_e];Re&&this.checkLValInnerPattern(Re,A,U)}break;default:this.checkLValSimple(p,A,U)}},C.checkLValInnerPattern=function(p,A,U){switch(A===void 0&&(A=Cn),p.type){case"Property":this.checkLValInnerPattern(p.value,A,U);break;case"AssignmentPattern":this.checkLValPattern(p.left,A,U);break;case"RestElement":this.checkLValPattern(p.argument,A,U);break;default:this.checkLValPattern(p,A,U)}};var T=function(A,U,Z,ne,ge){this.token=A,this.isExpr=!!U,this.preserveSpace=!!Z,this.override=ne,this.generator=!!ge},N={b_stat:new T("{",!1),b_expr:new T("{",!0),b_tmpl:new T("${",!1),p_stat:new T("(",!1),p_expr:new T("(",!0),q_tmpl:new T("`",!0,!0,function(p){return p.tryReadTemplateToken()}),f_stat:new T("function",!1),f_expr:new T("function",!0),f_expr_gen:new T("function",!0,!1,null,!0),f_gen:new T("function",!1,!1,null,!0)},k=s.prototype;k.initialContext=function(){return[N.b_stat]},k.curContext=function(){return this.context[this.context.length-1]},k.braceIsBlock=function(p){var A=this.curContext();return A===N.f_expr||A===N.f_stat?!0:p===B.colon&&(A===N.b_stat||A===N.b_expr)?!A.isExpr:p===B._return||p===B.name&&this.exprAllowed?Ne.test(this.input.slice(this.lastTokEnd,this.start)):p===B._else||p===B.semi||p===B.eof||p===B.parenR||p===B.arrow?!0:p===B.braceL?A===N.b_stat:p===B._var||p===B._const||p===B.name?!1:!this.exprAllowed},k.inGeneratorContext=function(){for(var p=this.context.length-1;p>=1;p--){var A=this.context[p];if(A.token==="function")return A.generator}return!1},k.updateContext=function(p){var A,U=this.type;U.keyword&&p===B.dot?this.exprAllowed=!1:(A=U.updateContext)?A.call(this,p):this.exprAllowed=U.beforeExpr},k.overrideContext=function(p){this.curContext()!==p&&(this.context[this.context.length-1]=p)},B.parenR.updateContext=B.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var p=this.context.pop();p===N.b_stat&&this.curContext().token==="function"&&(p=this.context.pop()),this.exprAllowed=!p.isExpr},B.braceL.updateContext=function(p){this.context.push(this.braceIsBlock(p)?N.b_stat:N.b_expr),this.exprAllowed=!0},B.dollarBraceL.updateContext=function(){this.context.push(N.b_tmpl),this.exprAllowed=!0},B.parenL.updateContext=function(p){var A=p===B._if||p===B._for||p===B._with||p===B._while;this.context.push(A?N.p_stat:N.p_expr),this.exprAllowed=!0},B.incDec.updateContext=function(){},B._function.updateContext=B._class.updateContext=function(p){p.beforeExpr&&p!==B._else&&!(p===B.semi&&this.curContext()!==N.p_stat)&&!(p===B._return&&Ne.test(this.input.slice(this.lastTokEnd,this.start)))&&!((p===B.colon||p===B.braceL)&&this.curContext()===N.b_stat)?this.context.push(N.f_expr):this.context.push(N.f_stat),this.exprAllowed=!1},B.backQuote.updateContext=function(){this.curContext()===N.q_tmpl?this.context.pop():this.context.push(N.q_tmpl),this.exprAllowed=!1},B.star.updateContext=function(p){if(p===B._function){var A=this.context.length-1;this.context[A]===N.f_expr?this.context[A]=N.f_expr_gen:this.context[A]=N.f_gen}this.exprAllowed=!0},B.name.updateContext=function(p){var A=!1;this.options.ecmaVersion>=6&&p!==B.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(A=!0),this.exprAllowed=A};var b=s.prototype;b.checkPropClash=function(p,A,U){if(!(this.options.ecmaVersion>=9&&p.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(p.computed||p.method||p.shorthand))){var Z=p.key,ne;switch(Z.type){case"Identifier":ne=Z.name;break;case"Literal":ne=String(Z.value);break;default:return}var ge=p.kind;if(this.options.ecmaVersion>=6){ne==="__proto__"&&ge==="init"&&(A.proto&&(U?U.doubleProto<0&&(U.doubleProto=Z.start):this.raiseRecoverable(Z.start,"Redefinition of __proto__ property")),A.proto=!0);return}ne="$"+ne;var _e=A[ne];if(_e){var Ie;ge==="init"?Ie=this.strict&&_e.init||_e.get||_e.set:Ie=_e.init||_e[ge],Ie&&this.raiseRecoverable(Z.start,"Redefinition of property")}else _e=A[ne]={init:!1,get:!1,set:!1};_e[ge]=!0}},b.parseExpression=function(p,A){var U=this.start,Z=this.startLoc,ne=this.parseMaybeAssign(p,A);if(this.type===B.comma){var ge=this.startNodeAt(U,Z);for(ge.expressions=[ne];this.eat(B.comma);)ge.expressions.push(this.parseMaybeAssign(p,A));return this.finishNode(ge,"SequenceExpression")}return ne},b.parseMaybeAssign=function(p,A,U){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(p);this.exprAllowed=!1}var Z=!1,ne=-1,ge=-1,_e=-1;A?(ne=A.parenthesizedAssign,ge=A.trailingComma,_e=A.doubleProto,A.parenthesizedAssign=A.trailingComma=-1):(A=new o,Z=!0);var Ie=this.start,Re=this.startLoc;(this.type===B.parenL||this.type===B.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=p==="await");var qe=this.parseMaybeConditional(p,A);if(U&&(qe=U.call(this,qe,Ie,Re)),this.type.isAssign){var $e=this.startNodeAt(Ie,Re);return $e.operator=this.value,this.type===B.eq&&(qe=this.toAssignable(qe,!1,A)),Z||(A.parenthesizedAssign=A.trailingComma=A.doubleProto=-1),A.shorthandAssign>=qe.start&&(A.shorthandAssign=-1),this.type===B.eq?this.checkLValPattern(qe):this.checkLValSimple(qe),$e.left=qe,this.next(),$e.right=this.parseMaybeAssign(p),_e>-1&&(A.doubleProto=_e),this.finishNode($e,"AssignmentExpression")}else Z&&this.checkExpressionErrors(A,!0);return ne>-1&&(A.parenthesizedAssign=ne),ge>-1&&(A.trailingComma=ge),qe},b.parseMaybeConditional=function(p,A){var U=this.start,Z=this.startLoc,ne=this.parseExprOps(p,A);if(this.checkExpressionErrors(A))return ne;if(this.eat(B.question)){var ge=this.startNodeAt(U,Z);return ge.test=ne,ge.consequent=this.parseMaybeAssign(),this.expect(B.colon),ge.alternate=this.parseMaybeAssign(p),this.finishNode(ge,"ConditionalExpression")}return ne},b.parseExprOps=function(p,A){var U=this.start,Z=this.startLoc,ne=this.parseMaybeUnary(A,!1,!1,p);return this.checkExpressionErrors(A)||ne.start===U&&ne.type==="ArrowFunctionExpression"?ne:this.parseExprOp(ne,U,Z,-1,p)},b.parseExprOp=function(p,A,U,Z,ne){var ge=this.type.binop;if(ge!=null&&(!ne||this.type!==B._in)&&ge>Z){var _e=this.type===B.logicalOR||this.type===B.logicalAND,Ie=this.type===B.coalesce;Ie&&(ge=B.logicalAND.binop);var Re=this.value;this.next();var qe=this.start,$e=this.startLoc,At=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,ne),qe,$e,ge,ne),ii=this.buildBinary(A,U,p,At,Re,_e||Ie);return(_e&&this.type===B.coalesce||Ie&&(this.type===B.logicalOR||this.type===B.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(ii,A,U,Z,ne)}return p},b.buildBinary=function(p,A,U,Z,ne,ge){Z.type==="PrivateIdentifier"&&this.raise(Z.start,"Private identifier can only be left side of binary expression");var _e=this.startNodeAt(p,A);return _e.left=U,_e.operator=ne,_e.right=Z,this.finishNode(_e,ge?"LogicalExpression":"BinaryExpression")},b.parseMaybeUnary=function(p,A,U,Z){var ne=this.start,ge=this.startLoc,_e;if(this.isContextual("await")&&this.canAwait)_e=this.parseAwait(Z),A=!0;else if(this.type.prefix){var Ie=this.startNode(),Re=this.type===B.incDec;Ie.operator=this.value,Ie.prefix=!0,this.next(),Ie.argument=this.parseMaybeUnary(null,!0,Re,Z),this.checkExpressionErrors(p,!0),Re?this.checkLValSimple(Ie.argument):this.strict&&Ie.operator==="delete"&&Ie.argument.type==="Identifier"?this.raiseRecoverable(Ie.start,"Deleting local variable in strict mode"):Ie.operator==="delete"&&S(Ie.argument)?this.raiseRecoverable(Ie.start,"Private fields can not be deleted"):A=!0,_e=this.finishNode(Ie,Re?"UpdateExpression":"UnaryExpression")}else if(!A&&this.type===B.privateId)(Z||this.privateNameStack.length===0)&&this.unexpected(),_e=this.parsePrivateIdent(),this.type!==B._in&&this.unexpected();else{if(_e=this.parseExprSubscripts(p,Z),this.checkExpressionErrors(p))return _e;for(;this.type.postfix&&!this.canInsertSemicolon();){var qe=this.startNodeAt(ne,ge);qe.operator=this.value,qe.prefix=!1,qe.argument=_e,this.checkLValSimple(_e),this.next(),_e=this.finishNode(qe,"UpdateExpression")}}if(!U&&this.eat(B.starstar))if(A)this.unexpected(this.lastTokStart);else return this.buildBinary(ne,ge,_e,this.parseMaybeUnary(null,!1,!1,Z),"**",!1);else return _e};function S(p){return p.type==="MemberExpression"&&p.property.type==="PrivateIdentifier"||p.type==="ChainExpression"&&S(p.expression)}b.parseExprSubscripts=function(p,A){var U=this.start,Z=this.startLoc,ne=this.parseExprAtom(p,A);if(ne.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return ne;var ge=this.parseSubscripts(ne,U,Z,!1,A);return p&&ge.type==="MemberExpression"&&(p.parenthesizedAssign>=ge.start&&(p.parenthesizedAssign=-1),p.parenthesizedBind>=ge.start&&(p.parenthesizedBind=-1),p.trailingComma>=ge.start&&(p.trailingComma=-1)),ge},b.parseSubscripts=function(p,A,U,Z,ne){for(var ge=this.options.ecmaVersion>=8&&p.type==="Identifier"&&p.name==="async"&&this.lastTokEnd===p.end&&!this.canInsertSemicolon()&&p.end-p.start===5&&this.potentialArrowAt===p.start,_e=!1;;){var Ie=this.parseSubscript(p,A,U,Z,ge,_e,ne);if(Ie.optional&&(_e=!0),Ie===p||Ie.type==="ArrowFunctionExpression"){if(_e){var Re=this.startNodeAt(A,U);Re.expression=Ie,Ie=this.finishNode(Re,"ChainExpression")}return Ie}p=Ie}},b.parseSubscript=function(p,A,U,Z,ne,ge,_e){var Ie=this.options.ecmaVersion>=11,Re=Ie&&this.eat(B.questionDot);Z&&Re&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var qe=this.eat(B.bracketL);if(qe||Re&&this.type!==B.parenL&&this.type!==B.backQuote||this.eat(B.dot)){var $e=this.startNodeAt(A,U);$e.object=p,qe?($e.property=this.parseExpression(),this.expect(B.bracketR)):this.type===B.privateId&&p.type!=="Super"?$e.property=this.parsePrivateIdent():$e.property=this.parseIdent(this.options.allowReserved!=="never"),$e.computed=!!qe,Ie&&($e.optional=Re),p=this.finishNode($e,"MemberExpression")}else if(!Z&&this.eat(B.parenL)){var At=new o,ii=this.yieldPos,Ri=this.awaitPos,$i=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var bn=this.parseExprList(B.parenR,this.options.ecmaVersion>=8,!1,At);if(ne&&!Re&&!this.canInsertSemicolon()&&this.eat(B.arrow))return this.checkPatternErrors(At,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=ii,this.awaitPos=Ri,this.awaitIdentPos=$i,this.parseArrowExpression(this.startNodeAt(A,U),bn,!0,_e);this.checkExpressionErrors(At,!0),this.yieldPos=ii||this.yieldPos,this.awaitPos=Ri||this.awaitPos,this.awaitIdentPos=$i||this.awaitIdentPos;var Ji=this.startNodeAt(A,U);Ji.callee=p,Ji.arguments=bn,Ie&&(Ji.optional=Re),p=this.finishNode(Ji,"CallExpression")}else if(this.type===B.backQuote){(Re||ge)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var en=this.startNodeAt(A,U);en.tag=p,en.quasi=this.parseTemplate({isTagged:!0}),p=this.finishNode(en,"TaggedTemplateExpression")}return p},b.parseExprAtom=function(p,A){this.type===B.slash&&this.readRegexp();var U,Z=this.potentialArrowAt===this.start;switch(this.type){case B._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),U=this.startNode(),this.next(),this.type===B.parenL&&!this.allowDirectSuper&&this.raise(U.start,"super() call outside constructor of a subclass"),this.type!==B.dot&&this.type!==B.bracketL&&this.type!==B.parenL&&this.unexpected(),this.finishNode(U,"Super");case B._this:return U=this.startNode(),this.next(),this.finishNode(U,"ThisExpression");case B.name:var ne=this.start,ge=this.startLoc,_e=this.containsEsc,Ie=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!_e&&Ie.name==="async"&&!this.canInsertSemicolon()&&this.eat(B._function))return this.overrideContext(N.f_expr),this.parseFunction(this.startNodeAt(ne,ge),0,!1,!0,A);if(Z&&!this.canInsertSemicolon()){if(this.eat(B.arrow))return this.parseArrowExpression(this.startNodeAt(ne,ge),[Ie],!1,A);if(this.options.ecmaVersion>=8&&Ie.name==="async"&&this.type===B.name&&!_e&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Ie=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(B.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(ne,ge),[Ie],!0,A)}return Ie;case B.regexp:var Re=this.value;return U=this.parseLiteral(Re.value),U.regex={pattern:Re.pattern,flags:Re.flags},U;case B.num:case B.string:return this.parseLiteral(this.value);case B._null:case B._true:case B._false:return U=this.startNode(),U.value=this.type===B._null?null:this.type===B._true,U.raw=this.type.keyword,this.next(),this.finishNode(U,"Literal");case B.parenL:var qe=this.start,$e=this.parseParenAndDistinguishExpression(Z,A);return p&&(p.parenthesizedAssign<0&&!this.isSimpleAssignTarget($e)&&(p.parenthesizedAssign=qe),p.parenthesizedBind<0&&(p.parenthesizedBind=qe)),$e;case B.bracketL:return U=this.startNode(),this.next(),U.elements=this.parseExprList(B.bracketR,!0,!0,p),this.finishNode(U,"ArrayExpression");case B.braceL:return this.overrideContext(N.b_expr),this.parseObj(!1,p);case B._function:return U=this.startNode(),this.next(),this.parseFunction(U,0);case B._class:return this.parseClass(this.startNode(),!1);case B._new:return this.parseNew();case B.backQuote:return this.parseTemplate();case B._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},b.parseExprImport=function(){var p=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var A=this.parseIdent(!0);switch(this.type){case B.parenL:return this.parseDynamicImport(p);case B.dot:return p.meta=A,this.parseImportMeta(p);default:this.unexpected()}},b.parseDynamicImport=function(p){if(this.next(),p.source=this.parseMaybeAssign(),!this.eat(B.parenR)){var A=this.start;this.eat(B.comma)&&this.eat(B.parenR)?this.raiseRecoverable(A,"Trailing comma is not allowed in import()"):this.unexpected(A)}return this.finishNode(p,"ImportExpression")},b.parseImportMeta=function(p){this.next();var A=this.containsEsc;return p.property=this.parseIdent(!0),p.property.name!=="meta"&&this.raiseRecoverable(p.property.start,"The only valid meta property for import is 'import.meta'"),A&&this.raiseRecoverable(p.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(p.start,"Cannot use 'import.meta' outside a module"),this.finishNode(p,"MetaProperty")},b.parseLiteral=function(p){var A=this.startNode();return A.value=p,A.raw=this.input.slice(this.start,this.end),A.raw.charCodeAt(A.raw.length-1)===110&&(A.bigint=A.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(A,"Literal")},b.parseParenExpression=function(){this.expect(B.parenL);var p=this.parseExpression();return this.expect(B.parenR),p},b.parseParenAndDistinguishExpression=function(p,A){var U=this.start,Z=this.startLoc,ne,ge=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var _e=this.start,Ie=this.startLoc,Re=[],qe=!0,$e=!1,At=new o,ii=this.yieldPos,Ri=this.awaitPos,$i;for(this.yieldPos=0,this.awaitPos=0;this.type!==B.parenR;)if(qe?qe=!1:this.expect(B.comma),ge&&this.afterTrailingComma(B.parenR,!0)){$e=!0;break}else if(this.type===B.ellipsis){$i=this.start,Re.push(this.parseParenItem(this.parseRestBinding())),this.type===B.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else Re.push(this.parseMaybeAssign(!1,At,this.parseParenItem));var bn=this.lastTokEnd,Ji=this.lastTokEndLoc;if(this.expect(B.parenR),p&&!this.canInsertSemicolon()&&this.eat(B.arrow))return this.checkPatternErrors(At,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=ii,this.awaitPos=Ri,this.parseParenArrowList(U,Z,Re,A);(!Re.length||$e)&&this.unexpected(this.lastTokStart),$i&&this.unexpected($i),this.checkExpressionErrors(At,!0),this.yieldPos=ii||this.yieldPos,this.awaitPos=Ri||this.awaitPos,Re.length>1?(ne=this.startNodeAt(_e,Ie),ne.expressions=Re,this.finishNodeAt(ne,"SequenceExpression",bn,Ji)):ne=Re[0]}else ne=this.parseParenExpression();if(this.options.preserveParens){var en=this.startNodeAt(U,Z);return en.expression=ne,this.finishNode(en,"ParenthesizedExpression")}else return ne},b.parseParenItem=function(p){return p},b.parseParenArrowList=function(p,A,U,Z){return this.parseArrowExpression(this.startNodeAt(p,A),U,!1,Z)};var x=[];b.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var p=this.startNode(),A=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(B.dot)){p.meta=A;var U=this.containsEsc;return p.property=this.parseIdent(!0),p.property.name!=="target"&&this.raiseRecoverable(p.property.start,"The only valid meta property for new is 'new.target'"),U&&this.raiseRecoverable(p.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(p.start,"'new.target' can only be used in functions and class static block"),this.finishNode(p,"MetaProperty")}var Z=this.start,ne=this.startLoc,ge=this.type===B._import;return p.callee=this.parseSubscripts(this.parseExprAtom(),Z,ne,!0,!1),ge&&p.callee.type==="ImportExpression"&&this.raise(Z,"Cannot use new with import()"),this.eat(B.parenL)?p.arguments=this.parseExprList(B.parenR,this.options.ecmaVersion>=8,!1):p.arguments=x,this.finishNode(p,"NewExpression")},b.parseTemplateElement=function(p){var A=p.isTagged,U=this.startNode();return this.type===B.invalidTemplate?(A||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),U.value={raw:this.value,cooked:null}):U.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),U.tail=this.type===B.backQuote,this.finishNode(U,"TemplateElement")},b.parseTemplate=function(p){p===void 0&&(p={});var A=p.isTagged;A===void 0&&(A=!1);var U=this.startNode();this.next(),U.expressions=[];var Z=this.parseTemplateElement({isTagged:A});for(U.quasis=[Z];!Z.tail;)this.type===B.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(B.dollarBraceL),U.expressions.push(this.parseExpression()),this.expect(B.braceR),U.quasis.push(Z=this.parseTemplateElement({isTagged:A}));return this.next(),this.finishNode(U,"TemplateLiteral")},b.isAsyncProp=function(p){return!p.computed&&p.key.type==="Identifier"&&p.key.name==="async"&&(this.type===B.name||this.type===B.num||this.type===B.string||this.type===B.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===B.star)&&!Ne.test(this.input.slice(this.lastTokEnd,this.start))},b.parseObj=function(p,A){var U=this.startNode(),Z=!0,ne={};for(U.properties=[],this.next();!this.eat(B.braceR);){if(Z)Z=!1;else if(this.expect(B.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(B.braceR))break;var ge=this.parseProperty(p,A);p||this.checkPropClash(ge,ne,A),U.properties.push(ge)}return this.finishNode(U,p?"ObjectPattern":"ObjectExpression")},b.parseProperty=function(p,A){var U=this.startNode(),Z,ne,ge,_e;if(this.options.ecmaVersion>=9&&this.eat(B.ellipsis))return p?(U.argument=this.parseIdent(!1),this.type===B.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(U,"RestElement")):(U.argument=this.parseMaybeAssign(!1,A),this.type===B.comma&&A&&A.trailingComma<0&&(A.trailingComma=this.start),this.finishNode(U,"SpreadElement"));this.options.ecmaVersion>=6&&(U.method=!1,U.shorthand=!1,(p||A)&&(ge=this.start,_e=this.startLoc),p||(Z=this.eat(B.star)));var Ie=this.containsEsc;return this.parsePropertyName(U),!p&&!Ie&&this.options.ecmaVersion>=8&&!Z&&this.isAsyncProp(U)?(ne=!0,Z=this.options.ecmaVersion>=9&&this.eat(B.star),this.parsePropertyName(U,A)):ne=!1,this.parsePropertyValue(U,p,Z,ne,ge,_e,A,Ie),this.finishNode(U,"Property")},b.parsePropertyValue=function(p,A,U,Z,ne,ge,_e,Ie){if((U||Z)&&this.type===B.colon&&this.unexpected(),this.eat(B.colon))p.value=A?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,_e),p.kind="init";else if(this.options.ecmaVersion>=6&&this.type===B.parenL)A&&this.unexpected(),p.kind="init",p.method=!0,p.value=this.parseMethod(U,Z);else if(!A&&!Ie&&this.options.ecmaVersion>=5&&!p.computed&&p.key.type==="Identifier"&&(p.key.name==="get"||p.key.name==="set")&&this.type!==B.comma&&this.type!==B.braceR&&this.type!==B.eq){(U||Z)&&this.unexpected(),p.kind=p.key.name,this.parsePropertyName(p),p.value=this.parseMethod(!1);var Re=p.kind==="get"?0:1;if(p.value.params.length!==Re){var qe=p.value.start;p.kind==="get"?this.raiseRecoverable(qe,"getter should have no params"):this.raiseRecoverable(qe,"setter should have exactly one param")}else p.kind==="set"&&p.value.params[0].type==="RestElement"&&this.raiseRecoverable(p.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!p.computed&&p.key.type==="Identifier"?((U||Z)&&this.unexpected(),this.checkUnreserved(p.key),p.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=ne),p.kind="init",A?p.value=this.parseMaybeDefault(ne,ge,this.copyNode(p.key)):this.type===B.eq&&_e?(_e.shorthandAssign<0&&(_e.shorthandAssign=this.start),p.value=this.parseMaybeDefault(ne,ge,this.copyNode(p.key))):p.value=this.copyNode(p.key),p.shorthand=!0):this.unexpected()},b.parsePropertyName=function(p){if(this.options.ecmaVersion>=6){if(this.eat(B.bracketL))return p.computed=!0,p.key=this.parseMaybeAssign(),this.expect(B.bracketR),p.key;p.computed=!1}return p.key=this.type===B.num||this.type===B.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},b.initFunction=function(p){p.id=null,this.options.ecmaVersion>=6&&(p.generator=p.expression=!1),this.options.ecmaVersion>=8&&(p.async=!1)},b.parseMethod=function(p,A,U){var Z=this.startNode(),ne=this.yieldPos,ge=this.awaitPos,_e=this.awaitIdentPos;return this.initFunction(Z),this.options.ecmaVersion>=6&&(Z.generator=p),this.options.ecmaVersion>=8&&(Z.async=!!A),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ir(A,Z.generator)|er|(U?Sn:0)),this.expect(B.parenL),Z.params=this.parseBindingList(B.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(Z,!1,!0,!1),this.yieldPos=ne,this.awaitPos=ge,this.awaitIdentPos=_e,this.finishNode(Z,"FunctionExpression")},b.parseArrowExpression=function(p,A,U,Z){var ne=this.yieldPos,ge=this.awaitPos,_e=this.awaitIdentPos;return this.enterScope(ir(U,!1)|Sr),this.initFunction(p),this.options.ecmaVersion>=8&&(p.async=!!U),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,p.params=this.toAssignableList(A,!0),this.parseFunctionBody(p,!0,!1,Z),this.yieldPos=ne,this.awaitPos=ge,this.awaitIdentPos=_e,this.finishNode(p,"ArrowFunctionExpression")},b.parseFunctionBody=function(p,A,U,Z){var ne=A&&this.type!==B.braceL,ge=this.strict,_e=!1;if(ne)p.body=this.parseMaybeAssign(Z),p.expression=!0,this.checkParams(p,!1);else{var Ie=this.options.ecmaVersion>=7&&!this.isSimpleParamList(p.params);(!ge||Ie)&&(_e=this.strictDirective(this.end),_e&&Ie&&this.raiseRecoverable(p.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Re=this.labels;this.labels=[],_e&&(this.strict=!0),this.checkParams(p,!ge&&!_e&&!A&&!U&&this.isSimpleParamList(p.params)),this.strict&&p.id&&this.checkLValSimple(p.id,rt),p.body=this.parseBlock(!1,void 0,_e&&!ge),p.expression=!1,this.adaptDirectivePrologue(p.body.body),this.labels=Re}this.exitScope()},b.isSimpleParamList=function(p){for(var A=0,U=p;A<U.length;A+=1){var Z=U[A];if(Z.type!=="Identifier")return!1}return!0},b.checkParams=function(p,A){for(var U=Object.create(null),Z=0,ne=p.params;Z<ne.length;Z+=1){var ge=ne[Z];this.checkLValInnerPattern(ge,It,A?null:U)}},b.parseExprList=function(p,A,U,Z){for(var ne=[],ge=!0;!this.eat(p);){if(ge)ge=!1;else if(this.expect(B.comma),A&&this.afterTrailingComma(p))break;var _e=void 0;U&&this.type===B.comma?_e=null:this.type===B.ellipsis?(_e=this.parseSpread(Z),Z&&this.type===B.comma&&Z.trailingComma<0&&(Z.trailingComma=this.start)):_e=this.parseMaybeAssign(!1,Z),ne.push(_e)}return ne},b.checkUnreserved=function(p){var A=p.start,U=p.end,Z=p.name;if(this.inGenerator&&Z==="yield"&&this.raiseRecoverable(A,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&Z==="await"&&this.raiseRecoverable(A,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&Z==="arguments"&&this.raiseRecoverable(A,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(Z==="arguments"||Z==="await")&&this.raise(A,"Cannot use "+Z+" in class static initialization block"),this.keywords.test(Z)&&this.raise(A,"Unexpected keyword '"+Z+"'"),!(this.options.ecmaVersion<6&&this.input.slice(A,U).indexOf("\\")!==-1)){var ne=this.strict?this.reservedWordsStrict:this.reservedWords;ne.test(Z)&&(!this.inAsync&&Z==="await"&&this.raiseRecoverable(A,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(A,"The keyword '"+Z+"' is reserved"))}},b.parseIdent=function(p,A){var U=this.startNode();return this.type===B.name?U.name=this.value:this.type.keyword?(U.name=this.type.keyword,(U.name==="class"||U.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!p),this.finishNode(U,"Identifier"),p||(this.checkUnreserved(U),U.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=U.start)),U},b.parsePrivateIdent=function(){var p=this.startNode();return this.type===B.privateId?p.name=this.value:this.unexpected(),this.next(),this.finishNode(p,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(p.start,"Private field '#"+p.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(p),p},b.parseYield=function(p){this.yieldPos||(this.yieldPos=this.start);var A=this.startNode();return this.next(),this.type===B.semi||this.canInsertSemicolon()||this.type!==B.star&&!this.type.startsExpr?(A.delegate=!1,A.argument=null):(A.delegate=this.eat(B.star),A.argument=this.parseMaybeAssign(p)),this.finishNode(A,"YieldExpression")},b.parseAwait=function(p){this.awaitPos||(this.awaitPos=this.start);var A=this.startNode();return this.next(),A.argument=this.parseMaybeUnary(null,!0,!1,p),this.finishNode(A,"AwaitExpression")};var E=s.prototype;E.raise=function(p,A){var U=Ut(this.input,p);A+=" ("+U.line+":"+U.column+")";var Z=new SyntaxError(A);throw Z.pos=p,Z.loc=U,Z.raisedAt=this.pos,Z},E.raiseRecoverable=E.raise,E.curPosition=function(){if(this.options.locations)return new it(this.curLine,this.pos-this.lineStart)};var I=s.prototype,M=function(A){this.flags=A,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};I.enterScope=function(p){this.scopeStack.push(new M(p))},I.exitScope=function(){this.scopeStack.pop()},I.treatFunctionsAsVarInScope=function(p){return p.flags&je||!this.inModule&&p.flags&Ni},I.declareName=function(p,A,U){var Z=!1;if(A===mt){var ne=this.currentScope();Z=ne.lexical.indexOf(p)>-1||ne.functions.indexOf(p)>-1||ne.var.indexOf(p)>-1,ne.lexical.push(p),this.inModule&&ne.flags&Ni&&delete this.undefinedExports[p]}else if(A===Tt){var ge=this.currentScope();ge.lexical.push(p)}else if(A===Nt){var _e=this.currentScope();this.treatFunctionsAsVar?Z=_e.lexical.indexOf(p)>-1:Z=_e.lexical.indexOf(p)>-1||_e.var.indexOf(p)>-1,_e.functions.push(p)}else for(var Ie=this.scopeStack.length-1;Ie>=0;--Ie){var Re=this.scopeStack[Ie];if(Re.lexical.indexOf(p)>-1&&!(Re.flags&Mi&&Re.lexical[0]===p)||!this.treatFunctionsAsVarInScope(Re)&&Re.functions.indexOf(p)>-1){Z=!0;break}if(Re.var.push(p),this.inModule&&Re.flags&Ni&&delete this.undefinedExports[p],Re.flags&tr)break}Z&&this.raiseRecoverable(U,"Identifier '"+p+"' has already been declared")},I.checkLocalExport=function(p){this.scopeStack[0].lexical.indexOf(p.name)===-1&&this.scopeStack[0].var.indexOf(p.name)===-1&&(this.undefinedExports[p.name]=p)},I.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},I.currentVarScope=function(){for(var p=this.scopeStack.length-1;;p--){var A=this.scopeStack[p];if(A.flags&tr)return A}},I.currentThisScope=function(){for(var p=this.scopeStack.length-1;;p--){var A=this.scopeStack[p];if(A.flags&tr&&!(A.flags&Sr))return A}};var L=function(A,U,Z){this.type="",this.start=U,this.end=0,A.options.locations&&(this.loc=new ut(A,Z)),A.options.directSourceFile&&(this.sourceFile=A.options.directSourceFile),A.options.ranges&&(this.range=[U,0])},R=s.prototype;R.startNode=function(){return new L(this,this.start,this.startLoc)},R.startNodeAt=function(p,A){return new L(this,p,A)};function F(p,A,U,Z){return p.type=A,p.end=U,this.options.locations&&(p.loc.end=Z),this.options.ranges&&(p.range[1]=U),p}R.finishNode=function(p,A){return F.call(this,p,A,this.lastTokEnd,this.lastTokEndLoc)},R.finishNodeAt=function(p,A,U,Z){return F.call(this,p,A,U,Z)},R.copyNode=function(p){var A=new L(this,p.start,this.startLoc);for(var U in p)A[U]=p[U];return A};var H="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",G=H+" Extended_Pictographic",V=G,q=V+" EBase EComp EMod EPres ExtPict",Q=q,j={9:H,10:G,11:V,12:q,13:Q},Y="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",re="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",oe=re+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",de=oe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ye=de+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",xe=ye+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",he={9:re,10:oe,11:de,12:ye,13:xe},fe={};function Se(p){var A=fe[p]={binary:Ae(j[p]+" "+Y),nonBinary:{General_Category:Ae(Y),Script:Ae(he[p])}};A.nonBinary.Script_Extensions=A.nonBinary.Script,A.nonBinary.gc=A.nonBinary.General_Category,A.nonBinary.sc=A.nonBinary.Script,A.nonBinary.scx=A.nonBinary.Script_Extensions}for(var Ce=0,Te=[9,10,11,12,13];Ce<Te.length;Ce+=1){var Oe=Te[Ce];Se(Oe)}var me=s.prototype,Me=function(A){this.parser=A,this.validFlags="gim"+(A.options.ecmaVersion>=6?"uy":"")+(A.options.ecmaVersion>=9?"s":"")+(A.options.ecmaVersion>=13?"d":""),this.unicodeProperties=fe[A.options.ecmaVersion>=13?13:A.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Me.prototype.reset=function(A,U,Z){var ne=Z.indexOf("u")!==-1;this.start=A|0,this.source=U+"",this.flags=Z,this.switchU=ne&&this.parser.options.ecmaVersion>=6,this.switchN=ne&&this.parser.options.ecmaVersion>=9},Me.prototype.raise=function(A){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+A)},Me.prototype.at=function(A,U){U===void 0&&(U=!1);var Z=this.source,ne=Z.length;if(A>=ne)return-1;var ge=Z.charCodeAt(A);if(!(U||this.switchU)||ge<=55295||ge>=57344||A+1>=ne)return ge;var _e=Z.charCodeAt(A+1);return _e>=56320&&_e<=57343?(ge<<10)+_e-56613888:ge},Me.prototype.nextIndex=function(A,U){U===void 0&&(U=!1);var Z=this.source,ne=Z.length;if(A>=ne)return ne;var ge=Z.charCodeAt(A),_e;return!(U||this.switchU)||ge<=55295||ge>=57344||A+1>=ne||(_e=Z.charCodeAt(A+1))<56320||_e>57343?A+1:A+2},Me.prototype.current=function(A){return A===void 0&&(A=!1),this.at(this.pos,A)},Me.prototype.lookahead=function(A){return A===void 0&&(A=!1),this.at(this.nextIndex(this.pos,A),A)},Me.prototype.advance=function(A){A===void 0&&(A=!1),this.pos=this.nextIndex(this.pos,A)},Me.prototype.eat=function(A,U){return U===void 0&&(U=!1),this.current(U)===A?(this.advance(U),!0):!1},me.validateRegExpFlags=function(p){for(var A=p.validFlags,U=p.flags,Z=0;Z<U.length;Z++){var ne=U.charAt(Z);A.indexOf(ne)===-1&&this.raise(p.start,"Invalid regular expression flag"),U.indexOf(ne,Z+1)>-1&&this.raise(p.start,"Duplicate regular expression flag")}},me.validateRegExpPattern=function(p){this.regexp_pattern(p),!p.switchN&&this.options.ecmaVersion>=9&&p.groupNames.length>0&&(p.switchN=!0,this.regexp_pattern(p))},me.regexp_pattern=function(p){p.pos=0,p.lastIntValue=0,p.lastStringValue="",p.lastAssertionIsQuantifiable=!1,p.numCapturingParens=0,p.maxBackReference=0,p.groupNames.length=0,p.backReferenceNames.length=0,this.regexp_disjunction(p),p.pos!==p.source.length&&(p.eat(41)&&p.raise("Unmatched ')'"),(p.eat(93)||p.eat(125))&&p.raise("Lone quantifier brackets")),p.maxBackReference>p.numCapturingParens&&p.raise("Invalid escape");for(var A=0,U=p.backReferenceNames;A<U.length;A+=1){var Z=U[A];p.groupNames.indexOf(Z)===-1&&p.raise("Invalid named capture referenced")}},me.regexp_disjunction=function(p){for(this.regexp_alternative(p);p.eat(124);)this.regexp_alternative(p);this.regexp_eatQuantifier(p,!0)&&p.raise("Nothing to repeat"),p.eat(123)&&p.raise("Lone quantifier brackets")},me.regexp_alternative=function(p){for(;p.pos<p.source.length&&this.regexp_eatTerm(p););},me.regexp_eatTerm=function(p){return this.regexp_eatAssertion(p)?(p.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(p)&&p.switchU&&p.raise("Invalid quantifier"),!0):(p.switchU?this.regexp_eatAtom(p):this.regexp_eatExtendedAtom(p))?(this.regexp_eatQuantifier(p),!0):!1},me.regexp_eatAssertion=function(p){var A=p.pos;if(p.lastAssertionIsQuantifiable=!1,p.eat(94)||p.eat(36))return!0;if(p.eat(92)){if(p.eat(66)||p.eat(98))return!0;p.pos=A}if(p.eat(40)&&p.eat(63)){var U=!1;if(this.options.ecmaVersion>=9&&(U=p.eat(60)),p.eat(61)||p.eat(33))return this.regexp_disjunction(p),p.eat(41)||p.raise("Unterminated group"),p.lastAssertionIsQuantifiable=!U,!0}return p.pos=A,!1},me.regexp_eatQuantifier=function(p,A){return A===void 0&&(A=!1),this.regexp_eatQuantifierPrefix(p,A)?(p.eat(63),!0):!1},me.regexp_eatQuantifierPrefix=function(p,A){return p.eat(42)||p.eat(43)||p.eat(63)||this.regexp_eatBracedQuantifier(p,A)},me.regexp_eatBracedQuantifier=function(p,A){var U=p.pos;if(p.eat(123)){var Z=0,ne=-1;if(this.regexp_eatDecimalDigits(p)&&(Z=p.lastIntValue,p.eat(44)&&this.regexp_eatDecimalDigits(p)&&(ne=p.lastIntValue),p.eat(125)))return ne!==-1&&ne<Z&&!A&&p.raise("numbers out of order in {} quantifier"),!0;p.switchU&&!A&&p.raise("Incomplete quantifier"),p.pos=U}return!1},me.regexp_eatAtom=function(p){return this.regexp_eatPatternCharacters(p)||p.eat(46)||this.regexp_eatReverseSolidusAtomEscape(p)||this.regexp_eatCharacterClass(p)||this.regexp_eatUncapturingGroup(p)||this.regexp_eatCapturingGroup(p)},me.regexp_eatReverseSolidusAtomEscape=function(p){var A=p.pos;if(p.eat(92)){if(this.regexp_eatAtomEscape(p))return!0;p.pos=A}return!1},me.regexp_eatUncapturingGroup=function(p){var A=p.pos;if(p.eat(40)){if(p.eat(63)&&p.eat(58)){if(this.regexp_disjunction(p),p.eat(41))return!0;p.raise("Unterminated group")}p.pos=A}return!1},me.regexp_eatCapturingGroup=function(p){if(p.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(p):p.current()===63&&p.raise("Invalid group"),this.regexp_disjunction(p),p.eat(41))return p.numCapturingParens+=1,!0;p.raise("Unterminated group")}return!1},me.regexp_eatExtendedAtom=function(p){return p.eat(46)||this.regexp_eatReverseSolidusAtomEscape(p)||this.regexp_eatCharacterClass(p)||this.regexp_eatUncapturingGroup(p)||this.regexp_eatCapturingGroup(p)||this.regexp_eatInvalidBracedQuantifier(p)||this.regexp_eatExtendedPatternCharacter(p)},me.regexp_eatInvalidBracedQuantifier=function(p){return this.regexp_eatBracedQuantifier(p,!0)&&p.raise("Nothing to repeat"),!1},me.regexp_eatSyntaxCharacter=function(p){var A=p.current();return ze(A)?(p.lastIntValue=A,p.advance(),!0):!1};function ze(p){return p===36||p>=40&&p<=43||p===46||p===63||p>=91&&p<=94||p>=123&&p<=125}me.regexp_eatPatternCharacters=function(p){for(var A=p.pos,U=0;(U=p.current())!==-1&&!ze(U);)p.advance();return p.pos!==A},me.regexp_eatExtendedPatternCharacter=function(p){var A=p.current();return A!==-1&&A!==36&&!(A>=40&&A<=43)&&A!==46&&A!==63&&A!==91&&A!==94&&A!==124?(p.advance(),!0):!1},me.regexp_groupSpecifier=function(p){if(p.eat(63)){if(this.regexp_eatGroupName(p)){p.groupNames.indexOf(p.lastStringValue)!==-1&&p.raise("Duplicate capture group name"),p.groupNames.push(p.lastStringValue);return}p.raise("Invalid group")}},me.regexp_eatGroupName=function(p){if(p.lastStringValue="",p.eat(60)){if(this.regexp_eatRegExpIdentifierName(p)&&p.eat(62))return!0;p.raise("Invalid capture group name")}return!1},me.regexp_eatRegExpIdentifierName=function(p){if(p.lastStringValue="",this.regexp_eatRegExpIdentifierStart(p)){for(p.lastStringValue+=be(p.lastIntValue);this.regexp_eatRegExpIdentifierPart(p);)p.lastStringValue+=be(p.lastIntValue);return!0}return!1},me.regexp_eatRegExpIdentifierStart=function(p){var A=p.pos,U=this.options.ecmaVersion>=11,Z=p.current(U);return p.advance(U),Z===92&&this.regexp_eatRegExpUnicodeEscapeSequence(p,U)&&(Z=p.lastIntValue),He(Z)?(p.lastIntValue=Z,!0):(p.pos=A,!1)};function He(p){return ue(p,!0)||p===36||p===95}me.regexp_eatRegExpIdentifierPart=function(p){var A=p.pos,U=this.options.ecmaVersion>=11,Z=p.current(U);return p.advance(U),Z===92&&this.regexp_eatRegExpUnicodeEscapeSequence(p,U)&&(Z=p.lastIntValue),ht(Z)?(p.lastIntValue=Z,!0):(p.pos=A,!1)};function ht(p){return ee(p,!0)||p===36||p===95||p===8204||p===8205}me.regexp_eatAtomEscape=function(p){return this.regexp_eatBackReference(p)||this.regexp_eatCharacterClassEscape(p)||this.regexp_eatCharacterEscape(p)||p.switchN&&this.regexp_eatKGroupName(p)?!0:(p.switchU&&(p.current()===99&&p.raise("Invalid unicode escape"),p.raise("Invalid escape")),!1)},me.regexp_eatBackReference=function(p){var A=p.pos;if(this.regexp_eatDecimalEscape(p)){var U=p.lastIntValue;if(p.switchU)return U>p.maxBackReference&&(p.maxBackReference=U),!0;if(U<=p.numCapturingParens)return!0;p.pos=A}return!1},me.regexp_eatKGroupName=function(p){if(p.eat(107)){if(this.regexp_eatGroupName(p))return p.backReferenceNames.push(p.lastStringValue),!0;p.raise("Invalid named reference")}return!1},me.regexp_eatCharacterEscape=function(p){return this.regexp_eatControlEscape(p)||this.regexp_eatCControlLetter(p)||this.regexp_eatZero(p)||this.regexp_eatHexEscapeSequence(p)||this.regexp_eatRegExpUnicodeEscapeSequence(p,!1)||!p.switchU&&this.regexp_eatLegacyOctalEscapeSequence(p)||this.regexp_eatIdentityEscape(p)},me.regexp_eatCControlLetter=function(p){var A=p.pos;if(p.eat(99)){if(this.regexp_eatControlLetter(p))return!0;p.pos=A}return!1},me.regexp_eatZero=function(p){return p.current()===48&&!pt(p.lookahead())?(p.lastIntValue=0,p.advance(),!0):!1},me.regexp_eatControlEscape=function(p){var A=p.current();return A===116?(p.lastIntValue=9,p.advance(),!0):A===110?(p.lastIntValue=10,p.advance(),!0):A===118?(p.lastIntValue=11,p.advance(),!0):A===102?(p.lastIntValue=12,p.advance(),!0):A===114?(p.lastIntValue=13,p.advance(),!0):!1},me.regexp_eatControlLetter=function(p){var A=p.current();return ft(A)?(p.lastIntValue=A%32,p.advance(),!0):!1};function ft(p){return p>=65&&p<=90||p>=97&&p<=122}me.regexp_eatRegExpUnicodeEscapeSequence=function(p,A){A===void 0&&(A=!1);var U=p.pos,Z=A||p.switchU;if(p.eat(117)){if(this.regexp_eatFixedHexDigits(p,4)){var ne=p.lastIntValue;if(Z&&ne>=55296&&ne<=56319){var ge=p.pos;if(p.eat(92)&&p.eat(117)&&this.regexp_eatFixedHexDigits(p,4)){var _e=p.lastIntValue;if(_e>=56320&&_e<=57343)return p.lastIntValue=(ne-55296)*1024+(_e-56320)+65536,!0}p.pos=ge,p.lastIntValue=ne}return!0}if(Z&&p.eat(123)&&this.regexp_eatHexDigits(p)&&p.eat(125)&&ct(p.lastIntValue))return!0;Z&&p.raise("Invalid unicode escape"),p.pos=U}return!1};function ct(p){return p>=0&&p<=1114111}me.regexp_eatIdentityEscape=function(p){if(p.switchU)return this.regexp_eatSyntaxCharacter(p)?!0:p.eat(47)?(p.lastIntValue=47,!0):!1;var A=p.current();return A!==99&&(!p.switchN||A!==107)?(p.lastIntValue=A,p.advance(),!0):!1},me.regexp_eatDecimalEscape=function(p){p.lastIntValue=0;var A=p.current();if(A>=49&&A<=57){do p.lastIntValue=10*p.lastIntValue+(A-48),p.advance();while((A=p.current())>=48&&A<=57);return!0}return!1},me.regexp_eatCharacterClassEscape=function(p){var A=p.current();if(Xe(A))return p.lastIntValue=-1,p.advance(),!0;if(p.switchU&&this.options.ecmaVersion>=9&&(A===80||A===112)){if(p.lastIntValue=-1,p.advance(),p.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(p)&&p.eat(125))return!0;p.raise("Invalid property name")}return!1};function Xe(p){return p===100||p===68||p===115||p===83||p===119||p===87}me.regexp_eatUnicodePropertyValueExpression=function(p){var A=p.pos;if(this.regexp_eatUnicodePropertyName(p)&&p.eat(61)){var U=p.lastStringValue;if(this.regexp_eatUnicodePropertyValue(p)){var Z=p.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(p,U,Z),!0}}if(p.pos=A,this.regexp_eatLoneUnicodePropertyNameOrValue(p)){var ne=p.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(p,ne),!0}return!1},me.regexp_validateUnicodePropertyNameAndValue=function(p,A,U){le(p.unicodeProperties.nonBinary,A)||p.raise("Invalid property name"),p.unicodeProperties.nonBinary[A].test(U)||p.raise("Invalid property value")},me.regexp_validateUnicodePropertyNameOrValue=function(p,A){p.unicodeProperties.binary.test(A)||p.raise("Invalid property name")},me.regexp_eatUnicodePropertyName=function(p){var A=0;for(p.lastStringValue="";Ze(A=p.current());)p.lastStringValue+=be(A),p.advance();return p.lastStringValue!==""};function Ze(p){return ft(p)||p===95}me.regexp_eatUnicodePropertyValue=function(p){var A=0;for(p.lastStringValue="";_t(A=p.current());)p.lastStringValue+=be(A),p.advance();return p.lastStringValue!==""};function _t(p){return Ze(p)||pt(p)}me.regexp_eatLoneUnicodePropertyNameOrValue=function(p){return this.regexp_eatUnicodePropertyValue(p)},me.regexp_eatCharacterClass=function(p){if(p.eat(91)){if(p.eat(94),this.regexp_classRanges(p),p.eat(93))return!0;p.raise("Unterminated character class")}return!1},me.regexp_classRanges=function(p){for(;this.regexp_eatClassAtom(p);){var A=p.lastIntValue;if(p.eat(45)&&this.regexp_eatClassAtom(p)){var U=p.lastIntValue;p.switchU&&(A===-1||U===-1)&&p.raise("Invalid character class"),A!==-1&&U!==-1&&A>U&&p.raise("Range out of order in character class")}}},me.regexp_eatClassAtom=function(p){var A=p.pos;if(p.eat(92)){if(this.regexp_eatClassEscape(p))return!0;if(p.switchU){var U=p.current();(U===99||jt(U))&&p.raise("Invalid class escape"),p.raise("Invalid escape")}p.pos=A}var Z=p.current();return Z!==93?(p.lastIntValue=Z,p.advance(),!0):!1},me.regexp_eatClassEscape=function(p){var A=p.pos;if(p.eat(98))return p.lastIntValue=8,!0;if(p.switchU&&p.eat(45))return p.lastIntValue=45,!0;if(!p.switchU&&p.eat(99)){if(this.regexp_eatClassControlLetter(p))return!0;p.pos=A}return this.regexp_eatCharacterClassEscape(p)||this.regexp_eatCharacterEscape(p)},me.regexp_eatClassControlLetter=function(p){var A=p.current();return pt(A)||A===95?(p.lastIntValue=A%32,p.advance(),!0):!1},me.regexp_eatHexEscapeSequence=function(p){var A=p.pos;if(p.eat(120)){if(this.regexp_eatFixedHexDigits(p,2))return!0;p.switchU&&p.raise("Invalid escape"),p.pos=A}return!1},me.regexp_eatDecimalDigits=function(p){var A=p.pos,U=0;for(p.lastIntValue=0;pt(U=p.current());)p.lastIntValue=10*p.lastIntValue+(U-48),p.advance();return p.pos!==A};function pt(p){return p>=48&&p<=57}me.regexp_eatHexDigits=function(p){var A=p.pos,U=0;for(p.lastIntValue=0;xt(U=p.current());)p.lastIntValue=16*p.lastIntValue+Kt(U),p.advance();return p.pos!==A};function xt(p){return p>=48&&p<=57||p>=65&&p<=70||p>=97&&p<=102}function Kt(p){return p>=65&&p<=70?10+(p-65):p>=97&&p<=102?10+(p-97):p-48}me.regexp_eatLegacyOctalEscapeSequence=function(p){if(this.regexp_eatOctalDigit(p)){var A=p.lastIntValue;if(this.regexp_eatOctalDigit(p)){var U=p.lastIntValue;A<=3&&this.regexp_eatOctalDigit(p)?p.lastIntValue=A*64+U*8+p.lastIntValue:p.lastIntValue=A*8+U}else p.lastIntValue=A;return!0}return!1},me.regexp_eatOctalDigit=function(p){var A=p.current();return jt(A)?(p.lastIntValue=A-48,p.advance(),!0):(p.lastIntValue=0,!1)};function jt(p){return p>=48&&p<=55}me.regexp_eatFixedHexDigits=function(p,A){var U=p.pos;p.lastIntValue=0;for(var Z=0;Z<A;++Z){var ne=p.current();if(!xt(ne))return p.pos=U,!1;p.lastIntValue=16*p.lastIntValue+Kt(ne),p.advance()}return!0};var zt=function(A){this.type=A.type,this.value=A.value,this.start=A.start,this.end=A.end,A.options.locations&&(this.loc=new ut(A,A.startLoc,A.endLoc)),A.options.ranges&&(this.range=[A.start,A.end])},Ge=s.prototype;Ge.next=function(p){!p&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new zt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Ge.getToken=function(){return this.next(),new zt(this)},typeof Symbol!="undefined"&&(Ge[Symbol.iterator]=function(){var p=this;return{next:function(){var A=p.getToken();return{done:A.type===B.eof,value:A}}}}),Ge.nextToken=function(){var p=this.curContext();if((!p||!p.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(B.eof);if(p.override)return p.override(this);this.readToken(this.fullCharCodeAtPos())},Ge.readToken=function(p){return ue(p,this.options.ecmaVersion>=6)||p===92?this.readWord():this.getTokenFromCode(p)},Ge.fullCharCodeAtPos=function(){var p=this.input.charCodeAt(this.pos);if(p<=55295||p>=56320)return p;var A=this.input.charCodeAt(this.pos+1);return A<=56319||A>=57344?p:(p<<10)+A-56613888},Ge.skipBlockComment=function(){var p=this.options.onComment&&this.curPosition(),A=this.pos,U=this.input.indexOf("*/",this.pos+=2);if(U===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=U+2,this.options.locations)for(var Z=void 0,ne=A;(Z=Ve(this.input,ne,this.pos))>-1;)++this.curLine,ne=this.lineStart=Z;this.options.onComment&&this.options.onComment(!0,this.input.slice(A+2,U),A,this.pos,p,this.curPosition())},Ge.skipLineComment=function(p){for(var A=this.pos,U=this.options.onComment&&this.curPosition(),Z=this.input.charCodeAt(this.pos+=p);this.pos<this.input.length&&!Fe(Z);)Z=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(A+p,this.pos),A,this.pos,U,this.curPosition())},Ge.skipSpace=function(){e:for(;this.pos<this.input.length;){var p=this.input.charCodeAt(this.pos);switch(p){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(p>8&&p<14||p>=5760&&ot.test(String.fromCharCode(p)))++this.pos;else break e}}},Ge.finishToken=function(p,A){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var U=this.type;this.type=p,this.value=A,this.updateContext(U)},Ge.readToken_dot=function(){var p=this.input.charCodeAt(this.pos+1);if(p>=48&&p<=57)return this.readNumber(!0);var A=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&p===46&&A===46?(this.pos+=3,this.finishToken(B.ellipsis)):(++this.pos,this.finishToken(B.dot))},Ge.readToken_slash=function(){var p=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):p===61?this.finishOp(B.assign,2):this.finishOp(B.slash,1)},Ge.readToken_mult_modulo_exp=function(p){var A=this.input.charCodeAt(this.pos+1),U=1,Z=p===42?B.star:B.modulo;return this.options.ecmaVersion>=7&&p===42&&A===42&&(++U,Z=B.starstar,A=this.input.charCodeAt(this.pos+2)),A===61?this.finishOp(B.assign,U+1):this.finishOp(Z,U)},Ge.readToken_pipe_amp=function(p){var A=this.input.charCodeAt(this.pos+1);if(A===p){if(this.options.ecmaVersion>=12){var U=this.input.charCodeAt(this.pos+2);if(U===61)return this.finishOp(B.assign,3)}return this.finishOp(p===124?B.logicalOR:B.logicalAND,2)}return A===61?this.finishOp(B.assign,2):this.finishOp(p===124?B.bitwiseOR:B.bitwiseAND,1)},Ge.readToken_caret=function(){var p=this.input.charCodeAt(this.pos+1);return p===61?this.finishOp(B.assign,2):this.finishOp(B.bitwiseXOR,1)},Ge.readToken_plus_min=function(p){var A=this.input.charCodeAt(this.pos+1);return A===p?A===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ne.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(B.incDec,2):A===61?this.finishOp(B.assign,2):this.finishOp(B.plusMin,1)},Ge.readToken_lt_gt=function(p){var A=this.input.charCodeAt(this.pos+1),U=1;return A===p?(U=p===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+U)===61?this.finishOp(B.assign,U+1):this.finishOp(B.bitShift,U)):A===33&&p===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(A===61&&(U=2),this.finishOp(B.relational,U))},Ge.readToken_eq_excl=function(p){var A=this.input.charCodeAt(this.pos+1);return A===61?this.finishOp(B.equality,this.input.charCodeAt(this.pos+2)===61?3:2):p===61&&A===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(B.arrow)):this.finishOp(p===61?B.eq:B.prefix,1)},Ge.readToken_question=function(){var p=this.options.ecmaVersion;if(p>=11){var A=this.input.charCodeAt(this.pos+1);if(A===46){var U=this.input.charCodeAt(this.pos+2);if(U<48||U>57)return this.finishOp(B.questionDot,2)}if(A===63){if(p>=12){var Z=this.input.charCodeAt(this.pos+2);if(Z===61)return this.finishOp(B.assign,3)}return this.finishOp(B.coalesce,2)}}return this.finishOp(B.question,1)},Ge.readToken_numberSign=function(){var p=this.options.ecmaVersion,A=35;if(p>=13&&(++this.pos,A=this.fullCharCodeAtPos(),ue(A,!0)||A===92))return this.finishToken(B.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+be(A)+"'")},Ge.getTokenFromCode=function(p){switch(p){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(B.parenL);case 41:return++this.pos,this.finishToken(B.parenR);case 59:return++this.pos,this.finishToken(B.semi);case 44:return++this.pos,this.finishToken(B.comma);case 91:return++this.pos,this.finishToken(B.bracketL);case 93:return++this.pos,this.finishToken(B.bracketR);case 123:return++this.pos,this.finishToken(B.braceL);case 125:return++this.pos,this.finishToken(B.braceR);case 58:return++this.pos,this.finishToken(B.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(B.backQuote);case 48:var A=this.input.charCodeAt(this.pos+1);if(A===120||A===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(A===111||A===79)return this.readRadixNumber(8);if(A===98||A===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(p);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(p);case 124:case 38:return this.readToken_pipe_amp(p);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(p);case 60:case 62:return this.readToken_lt_gt(p);case 61:case 33:return this.readToken_eq_excl(p);case 63:return this.readToken_question();case 126:return this.finishOp(B.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+be(p)+"'")},Ge.finishOp=function(p,A){var U=this.input.slice(this.pos,this.pos+A);return this.pos+=A,this.finishToken(p,U)},Ge.readRegexp=function(){for(var p,A,U=this.pos;;){this.pos>=this.input.length&&this.raise(U,"Unterminated regular expression");var Z=this.input.charAt(this.pos);if(Ne.test(Z)&&this.raise(U,"Unterminated regular expression"),p)p=!1;else{if(Z==="[")A=!0;else if(Z==="]"&&A)A=!1;else if(Z==="/"&&!A)break;p=Z==="\\"}++this.pos}var ne=this.input.slice(U,this.pos);++this.pos;var ge=this.pos,_e=this.readWord1();this.containsEsc&&this.unexpected(ge);var Ie=this.regexpState||(this.regexpState=new Me(this));Ie.reset(U,ne,_e),this.validateRegExpFlags(Ie),this.validateRegExpPattern(Ie);var Re=null;try{Re=new RegExp(ne,_e)}catch(qe){}return this.finishToken(B.regexp,{pattern:ne,flags:_e,value:Re})},Ge.readInt=function(p,A,U){for(var Z=this.options.ecmaVersion>=12&&A===void 0,ne=U&&this.input.charCodeAt(this.pos)===48,ge=this.pos,_e=0,Ie=0,Re=0,qe=A==null?1/0:A;Re<qe;++Re,++this.pos){var $e=this.input.charCodeAt(this.pos),At=void 0;if(Z&&$e===95){ne&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Ie===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Re===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Ie=$e;continue}if($e>=97?At=$e-97+10:$e>=65?At=$e-65+10:$e>=48&&$e<=57?At=$e-48:At=1/0,At>=p)break;Ie=$e,_e=_e*p+At}return Z&&Ie===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===ge||A!=null&&this.pos-ge!==A?null:_e};function Pt(p,A){return A?parseInt(p,8):parseFloat(p.replace(/_/g,""))}function Qt(p){return typeof BigInt!="function"?null:BigInt(p.replace(/_/g,""))}Ge.readRadixNumber=function(p){var A=this.pos;this.pos+=2;var U=this.readInt(p);return U==null&&this.raise(this.start+2,"Expected number in radix "+p),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(U=Qt(this.input.slice(A,this.pos)),++this.pos):ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(B.num,U)},Ge.readNumber=function(p){var A=this.pos;!p&&this.readInt(10,void 0,!0)===null&&this.raise(A,"Invalid number");var U=this.pos-A>=2&&this.input.charCodeAt(A)===48;U&&this.strict&&this.raise(A,"Invalid number");var Z=this.input.charCodeAt(this.pos);if(!U&&!p&&this.options.ecmaVersion>=11&&Z===110){var ne=Qt(this.input.slice(A,this.pos));return++this.pos,ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(B.num,ne)}U&&/[89]/.test(this.input.slice(A,this.pos))&&(U=!1),Z===46&&!U&&(++this.pos,this.readInt(10),Z=this.input.charCodeAt(this.pos)),(Z===69||Z===101)&&!U&&(Z=this.input.charCodeAt(++this.pos),(Z===43||Z===45)&&++this.pos,this.readInt(10)===null&&this.raise(A,"Invalid number")),ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var ge=Pt(this.input.slice(A,this.pos),U);return this.finishToken(B.num,ge)},Ge.readCodePoint=function(){var p=this.input.charCodeAt(this.pos),A;if(p===123){this.options.ecmaVersion<6&&this.unexpected();var U=++this.pos;A=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,A>1114111&&this.invalidStringToken(U,"Code point out of bounds")}else A=this.readHexChar(4);return A},Ge.readString=function(p){for(var A="",U=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var Z=this.input.charCodeAt(this.pos);if(Z===p)break;Z===92?(A+=this.input.slice(U,this.pos),A+=this.readEscapedChar(!1),U=this.pos):Z===8232||Z===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Fe(Z)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return A+=this.input.slice(U,this.pos++),this.finishToken(B.string,A)};var Jt={};Ge.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(p){if(p===Jt)this.readInvalidTemplateToken();else throw p}this.inTemplateElement=!1},Ge.invalidStringToken=function(p,A){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Jt;this.raise(p,A)},Ge.readTmplToken=function(){for(var p="",A=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var U=this.input.charCodeAt(this.pos);if(U===96||U===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===B.template||this.type===B.invalidTemplate)?U===36?(this.pos+=2,this.finishToken(B.dollarBraceL)):(++this.pos,this.finishToken(B.backQuote)):(p+=this.input.slice(A,this.pos),this.finishToken(B.template,p));if(U===92)p+=this.input.slice(A,this.pos),p+=this.readEscapedChar(!0),A=this.pos;else if(Fe(U)){switch(p+=this.input.slice(A,this.pos),++this.pos,U){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:p+=`
`;break;default:p+=String.fromCharCode(U);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),A=this.pos}else++this.pos}},Ge.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(B.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Ge.readEscapedChar=function(p){var A=this.input.charCodeAt(++this.pos);switch(++this.pos,A){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return be(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),p){var U=this.pos-1;return this.invalidStringToken(U,"Invalid escape sequence in template string"),null}default:if(A>=48&&A<=55){var Z=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],ne=parseInt(Z,8);return ne>255&&(Z=Z.slice(0,-1),ne=parseInt(Z,8)),this.pos+=Z.length-1,A=this.input.charCodeAt(this.pos),(Z!=="0"||A===56||A===57)&&(this.strict||p)&&this.invalidStringToken(this.pos-1-Z.length,p?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(ne)}return Fe(A)?"":String.fromCharCode(A)}},Ge.readHexChar=function(p){var A=this.pos,U=this.readInt(16,p);return U===null&&this.invalidStringToken(A,"Bad character escape sequence"),U},Ge.readWord1=function(){this.containsEsc=!1;for(var p="",A=!0,U=this.pos,Z=this.options.ecmaVersion>=6;this.pos<this.input.length;){var ne=this.fullCharCodeAtPos();if(ee(ne,Z))this.pos+=ne<=65535?1:2;else if(ne===92){this.containsEsc=!0,p+=this.input.slice(U,this.pos);var ge=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var _e=this.readCodePoint();(A?ue:ee)(_e,Z)||this.invalidStringToken(ge,"Invalid Unicode escape"),p+=be(_e),U=this.pos}else break;A=!1}return p+this.input.slice(U,this.pos)},Ge.readWord=function(){var p=this.readWord1(),A=B.name;return this.keywords.test(p)&&(A=pe[p]),this.finishToken(A,p)};var fi="8.8.0";s.acorn={Parser:s,version:fi,defaultOptions:Gt,Position:it,SourceLocation:ut,getLineInfo:Ut,Node:L,TokenType:ce,tokTypes:B,keywordTypes:pe,TokContext:T,tokContexts:N,isIdentifierChar:ee,isIdentifierStart:ue,Token:zt,isNewLine:Fe,lineBreak:Ne,lineBreakG:Pe,nonASCIIwhitespace:ot};function Cr(p,A){return s.parse(p,A)}function sa(p,A,U){return s.parseExpressionAt(p,A,U)}function aa(p,A){return s.tokenizer(p,A)}a.Node=L,a.Parser=s,a.Position=it,a.SourceLocation=ut,a.TokContext=T,a.Token=zt,a.TokenType=ce,a.defaultOptions=Gt,a.getLineInfo=Ut,a.isIdentifierChar=ee,a.isIdentifierStart=ue,a.isNewLine=Fe,a.keywordTypes=pe,a.lineBreak=Ne,a.lineBreakG=Pe,a.nonASCIIwhitespace=ot,a.parse=Cr,a.parseExpressionAt=sa,a.tokContexts=N,a.tokTypes=B,a.tokenizer=aa,a.version=fi,Object.defineProperty(a,"__esModule",{value:!0})})}(ga,ga.exports)),ga.exports}/*!
 * Paper.js v0.12.15 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Mar 17 10:49:48 2021 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(n){(function(i,a){i=i||ja;var u=i.window,g=i.document,h=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],r=t.slice,o=Object.create,l=Object.getOwnPropertyDescriptor,c=Object.defineProperty,f=t.forEach||function(v,C){for(var T=0,N=this.length;T<N;T++)v.call(C,this[T],T,this)},d=function(v,C){for(var T in this)this.hasOwnProperty(T)&&v.call(C,this[T],T,this)},_=Object.assign||function(v){for(var C=1,T=arguments.length;C<T;C++){var N=arguments[C];for(var k in N)N.hasOwnProperty(k)&&(v[k]=N[k])}return v},m=function(v,C,T){if(v){var N=l(v,"length");(N&&typeof N.value=="number"?f:d).call(v,C,T=T||v)}return T};function w(v,C,T,N,k){var b={};function S(L,R){R=R||(R=l(C,L))&&(R.get?R:R.value),typeof R=="string"&&R[0]==="#"&&(R=v[R.substring(1)]||R);var F=typeof R=="function",H=R,G=k||F&&!R.base?R&&R.get?L in v:v[L]:null,V;(!k||!G)&&(F&&G&&(R.base=G),F&&N!==!1&&(V=L.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(b[V[3].toLowerCase()+V[4]]=V[2]),(!H||F||!H.get||typeof H.get!="function"||!y.isPlainObject(H))&&(H={value:H,writable:!0}),(l(v,L)||{configurable:!0}).configurable&&(H.configurable=!0,H.enumerable=T!=null?T:!V),c(v,L,H))}if(C){for(var x in C)C.hasOwnProperty(x)&&!e.test(x)&&S(x);for(var x in b){var E=b[x],I=v["set"+E],M=v["get"+E]||I&&v["is"+E];M&&(N===!0||M.length===0)&&S(x,{get:M,set:I})}}return v}function y(){for(var v=0,C=arguments.length;v<C;v++){var T=arguments[v];T&&_(this,T)}return this}return w(y,{inject:function(v){if(v){var C=v.statics===!0?v:v.statics,T=v.beans,N=v.preserve;C!==v&&w(this.prototype,v,v.enumerable,T,N),w(this,C,null,T,N)}for(var k=1,b=arguments.length;k<b;k++)this.inject(arguments[k]);return this},extend:function(){for(var v=this,C,T,N=0,k,b=arguments.length;N<b&&!(C&&T);N++)k=arguments[N],C=C||k.initialize,T=T||k.prototype;return C=C||function(){v.apply(this,arguments)},T=C.prototype=T||o(this.prototype),c(T,"constructor",{value:C,writable:!0,configurable:!0}),w(C,this),arguments.length&&this.inject.apply(C,arguments),C.base=v,C}}).inject({enumerable:!1,initialize:y,set:y,inject:function(){for(var v=0,C=arguments.length;v<C;v++){var T=arguments[v];T&&w(this,T,T.enumerable,T.beans,T.preserve)}return this},extend:function(){var v=o(this);return v.inject.apply(v,arguments)},each:function(v,C){return m(this,v,C)},clone:function(){return new this.constructor(this)},statics:{set:_,each:m,create:o,define:c,describe:l,clone:function(v){return _(new v.constructor,v)},isPlainObject:function(v){var C=v!=null&&v.constructor;return C&&(C===Object||C===y||C.name==="Object")},pick:function(v,C){return v!==a?v:C},slice:function(v,C,T){return r.call(v,C,T)}}})};n.exports=h,h.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+h.each(this,function(e,t){if(!/^_/.test(t)){var r=typeof e;this.push(t+": "+(r==="number"?K.instance.number(e):r==="string"?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return h.importJSON(e,this)},exportJSON:function(e){return h.exportJSON(this,e)},toJSON:function(){return h.serialize(this)},set:function(e,t){return e&&h.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),r=t.prototype._class;return r&&!h.exports[r]&&(h.exports[r]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&typeof e=="object"&&typeof t=="object"){if(Array.isArray(e)&&Array.isArray(t)){var r=e.length;if(r!==t.length)return!1;for(;r--;)if(!h.equals(e[r],t[r]))return!1}else{var o=Object.keys(e),r=o.length;if(r!==Object.keys(t).length)return!1;for(;r--;){var l=o[r];if(!(t.hasOwnProperty(l)&&h.equals(e[l],t[l])))return!1}}return!0}return!1},read:function(e,t,r,o){if(this===h){var l=this.peek(e,t);return e.__index++,l}var c=this.prototype,f=c._readIndex,d=t||f&&e.__index||0,_=e.length,m=e[d];if(o=o||_-d,m instanceof this||r&&r.readNull&&m==null&&o<=1)return f&&(e.__index=d+1),m&&r&&r.clone?m.clone():m;if(m=h.create(c),f&&(m.__read=!0),m=m.initialize.apply(m,d>0||d+o<_?h.slice(e,d,d+o):e)||m,f){e.__index=d+m.__read;var w=m.__filtered;w&&(e.__filtered=w,m.__filtered=a),m.__read=a}return m},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,r,o){for(var l=[],c,f=t||0,d=o?f+o:e.length,_=f;_<d;_++)l.push(Array.isArray(c=e[_])?this.read(c,0,r):this.read(e,_,r,1));return l},readNamed:function(e,t,r,o,l){var c=this.getNamed(e,t),f=c!==a;if(f){var d=e.__filtered;if(!d){var _=this.getSource(e);d=e.__filtered=h.create(_),d.__unfiltered=_}d[t]=a}return this.read(f?[c]:e,r,o,l)},readSupported:function(e,t){var r=this.getSource(e),o=this,l=!1;return r&&Object.keys(r).forEach(function(c){if(c in t){var f=o.readNamed(e,c);f!==a&&(t[c]=f),l=!0}}),l},getSource:function(e){var t=e.__source;if(t===a){var r=e.length===1&&e[0];t=e.__source=r&&h.isPlainObject(r)?r:null}return t},getNamed:function(e,t){var r=this.getSource(e);if(r)return t?r[t]:e.__filtered||r},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,r,o){var l;function c(w){if(!(r&&w in r)&&!(l&&w in l)){var y=t[w];y!==a&&(e[w]=y)}}if(o){for(var f={},d=0,_,m=o.length;d<m;d++)(_=o[d])in t&&(c(_),f[_]=!0);l=f}return Object.keys(t.__unfiltered||t).forEach(c),e},isPlainValue:function(e,t){return h.isPlainObject(e)||Array.isArray(e)||t&&typeof e=="string"},serialize:function(e,t,r,o){t=t||{};var l=!o,c;if(l&&(t.formatter=new K(t.precision),o={length:0,definitions:{},references:{},add:function(y,v){var C="#"+y._id,T=this.references[C];if(!T){this.length++;var N=v.call(y),k=y._class;k&&N[0]!==k&&N.unshift(k),this.definitions[C]=N,T=this.references[C]=[C]}return T}}),e&&e._serialize){c=e._serialize(t,o);var f=e._class;f&&!e._compactSerialize&&(l||!r)&&c[0]!==f&&c.unshift(f)}else if(Array.isArray(e)){c=[];for(var d=0,_=e.length;d<_;d++)c[d]=h.serialize(e[d],t,r,o)}else if(h.isPlainObject(e)){c={};for(var m=Object.keys(e),d=0,_=m.length;d<_;d++){var w=m[d];c[w]=h.serialize(e[w],t,r,o)}}else typeof e=="number"?c=t.formatter.number(e,t.precision):c=e;return l&&o.length>0?[["dictionary",o.definitions],c]:c},deserialize:function(e,t,r,o,l){var c=e,f=!r,d=f&&e&&e.length&&e[0][0]==="dictionary";if(r=r||{},Array.isArray(e)){var _=e[0],m=_==="dictionary";if(e.length==1&&/^#/.test(_))return r.dictionary[_];_=h.exports[_],c=[];for(var w=_?1:0,y=e.length;w<y;w++)c.push(h.deserialize(e[w],t,r,m,d));if(_){var v=c;t?c=t(_,v,f||l):c=new _(v)}}else if(h.isPlainObject(e)){c={},o&&(r.dictionary=c);for(var C in e)c[C]=h.deserialize(e[C],t,r)}return d?c[1]:c},exportJSON:function(e,t){var r=h.serialize(e,t);return t&&t.asString==!1?r:JSON.stringify(r)},importJSON:function(e,t){return h.deserialize(typeof e=="string"?JSON.parse(e):e,function(r,o,l){var c=l&&t&&t.constructor===r,f=c?t:h.create(r.prototype);if(o.length===1&&f instanceof B&&(c||!(f instanceof Pe))){var d=o[0];h.isPlainObject(d)&&(d.insert=!1,c&&(o=o.concat([{insert:!0}])))}return(c?f.set:r).apply(f,o),c&&(t=null),f})},push:function(e,t){var r=t.length;if(r<4096)e.push.apply(e,t);else{var o=e.length;e.length+=r;for(var l=0;l<r;l++)e[o+l]=t[l]}return e},splice:function(e,t,r,o){var l=t&&t.length,c=r===a;r=c?e.length:r,r>e.length&&(r=e.length);for(var f=0;f<l;f++)t[f]._index=r+f;if(c)return h.push(e,t),[];var d=[r,o];t&&h.push(d,t);for(var _=e.splice.apply(e,d),f=0,m=_.length;f<m;f++)_[f]._index=a;for(var f=r+l,m=e.length;f<m;f++)e[f]._index=f;return _},capitalize:function(e){return e.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(t,r){return r.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var P={on:function(e,t){if(typeof e!="string")h.each(e,function(c,f){this.on(f,c)},this);else{var r=this._eventTypes,o=r&&r[e],l=this._callbacks=this._callbacks||{};l=l[e]=l[e]||[],l.indexOf(t)===-1&&(l.push(t),o&&o.install&&l.length===1&&o.install.call(this,e))}return this},off:function(e,t){if(typeof e!="string"){h.each(e,function(f,d){this.off(d,f)},this);return}var r=this._eventTypes,o=r&&r[e],l=this._callbacks&&this._callbacks[e],c;return l&&(!t||(c=l.indexOf(t))!==-1&&l.length===1?(o&&o.uninstall&&o.uninstall.call(this,e),delete this._callbacks[e]):c!==-1&&l.splice(c,1)),this},once:function(e,t){return this.on(e,function r(){t.apply(this,arguments),this.off(e,r)})},emit:function(e,t){var r=this._callbacks&&this._callbacks[e];if(!r)return!1;var o=h.slice(arguments,1),l=t&&t.target&&!t.currentTarget;r=r.slice(),l&&(t.currentTarget=this);for(var c=0,f=r.length;c<f;c++)if(r[c].apply(this,o)==!1){t&&t.stop&&t.stop();break}return l&&delete t.currentTarget,!0},responds:function(e){return!!(this._callbacks&&this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,r=this._callbacks,o=e?"install":"uninstall";if(t){for(var l in r)if(r[l].length>0){var c=t[l],f=c&&c[o];f&&f.call(this,l)}}},statics:{inject:function e(t){var r=t._events;if(r){var o={};h.each(r,function(l,c){var f=typeof l=="string",d=f?l:c,_=h.capitalize(d),m=d.substring(2).toLowerCase();o[m]=f?{}:l,d="_"+d,t["get"+_]=function(){return this[d]},t["set"+_]=function(w){var y=this[d];y&&this.off(m,y),w&&this.on(m,w),this[d]=w}}),t._eventTypes=o}return e.base.apply(this,arguments)}}},O=h.extend({_class:"PaperScope",initialize:function e(){s=this,this.settings=new h({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var r=mt.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in r||"mozDash"in r,nativeBlendModes:Nt.nativeModes},mt.release(r)}if(!this.agent){var o=i.navigator.userAgent.toLowerCase(),l=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(o)||[])[0],c=l==="darwin"?"mac":l,f=t.agent=t.browser={platform:c};c&&(f[c]=!0),o.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(d,_,m,w,y){if(!f.chrome){var v=_==="opera"?w:/^(node|trident)$/.test(_)?y:m;f.version=v,f.versionNumber=parseFloat(v),_={trident:"msie",jsdom:"node"}[_]||_,f.name=_,f[_]=!0}}),f.chrome&&delete f.webkit,f.atom&&delete f.chrome}},version:"0.12.15",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var r=s.PaperScript.execute(e,this,t);return et.updateFocus(),r},install:function(e){var t=this;h.each(["project","view","tool"],function(o){h.define(e,o,{configurable:!0,get:function(){return t[o]}})});for(var r in this)!/^_/.test(r)&&this[r]&&(e[r]=this[r])},setup:function(e){return s=this,this.project=new we(e),this},createCanvas:function(e,t){return mt.getCanvas(e,t)},activate:function(){s=this},clear:function(){for(var e=this.projects,t=this.tools,r=e.length-1;r>=0;r--)e[r].remove();for(var r=t.length-1;r>=0;r--)t[r].remove()},remove:function(){this.clear(),delete O._scopes[this._id]},statics:new function(){function e(t){return t+="Attribute",function(r,o){return r[t](o)||r[t]("data-paper-"+o)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),D=h.extend(P,{initialize:function(e){this._scope=s,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(h.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),W={findItemBoundsCollisions:function(e,t,r){function o(f){for(var d=new Array(f.length),_=0;_<f.length;_++){var m=f[_].getBounds();d[_]=[m.left,m.top,m.right,m.bottom]}return d}var l=o(e),c=!t||t===e?l:o(t);return this.findBoundsCollisions(l,c,r||0)},findCurveBoundsCollisions:function(e,t,r,o){function l(v){for(var C=Math.min,T=Math.max,N=new Array(v.length),k=0;k<v.length;k++){var b=v[k];N[k]=[C(b[0],b[2],b[4],b[6]),C(b[1],b[3],b[5],b[7]),T(b[0],b[2],b[4],b[6]),T(b[1],b[3],b[5],b[7])]}return N}var c=l(e),f=!t||t===e?c:l(t);if(o){for(var d=this.findBoundsCollisions(c,f,r||0,!1,!0),_=this.findBoundsCollisions(c,f,r||0,!0,!0),m=[],w=0,y=d.length;w<y;w++)m[w]={hor:d[w],ver:_[w]};return m}return this.findBoundsCollisions(c,f,r||0)},findBoundsCollisions:function(e,t,r,o,l){var c=!t||e===t,f=c?e:e.concat(t),d=e.length,_=f.length;function m(de,ye,xe){for(var he=0,fe=de.length;he<fe;){var Se=fe+he>>>1;f[de[Se]][ye]<xe?he=Se+1:fe=Se}return he-1}for(var w=o?1:0,y=w+2,v=o?0:1,C=v+2,T=new Array(_),N=0;N<_;N++)T[N]=N;T.sort(function(de,ye){return f[de][w]-f[ye][w]});for(var k=[],b=new Array(d),N=0;N<_;N++){var S=T[N],x=f[S],E=c?S:S-d,I=S<d,M=c||!I,L=I?[]:null;if(k.length){var R=m(k,y,x[w]-r)+1;if(k.splice(0,R),c&&l){L=L.concat(k);for(var F=0;F<k.length;F++){var H=k[F];b[H].push(E)}}else for(var G=x[C],V=x[v],F=0;F<k.length;F++){var H=k[F],q=f[H],Q=H<d,j=c||H>=d;(l||(I&&j||M&&Q)&&G>=q[v]-r&&V<=q[C]+r)&&(I&&j&&L.push(c?H:H-d),M&&Q&&b[H].push(E))}}if(I&&(e===t&&L.push(S),b[S]=L),k.length){var Y=x[y],re=m(k,y,Y);k.splice(re+1,0,S)}else k.push(S)}for(var N=0;N<b.length;N++){var oe=b[N];oe&&oe.sort(function(ye,xe){return ye-xe})}return b}},K=h.extend({initialize:function(e){this.precision=h.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,r){return this.number(e)+(r||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});K.instance=new K;var X=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],r=Math.abs,o=Math.sqrt,l=Math.pow,c=Math.log2||function(y){return Math.log(y)*Math.LOG2E},f=1e-12,d=112e-18;function _(y,v,C){return y<v?v:y>C?C:y}function m(y,v,C){function T(R){var F=R*134217729,H=R-F,G=H+F,V=R-G;return[G,V]}var N=v*v-y*C,k=v*v+y*C;if(r(N)*3<k){var b=T(y),S=T(v),x=T(C),E=v*v,I=S[0]*S[0]-E+2*S[0]*S[1]+S[1]*S[1],M=y*C,L=b[0]*x[0]-M+b[0]*x[1]+b[1]*x[0]+b[1]*x[1];N=E-M+(I-L)}return N}function w(){var y=Math.max.apply(Math,arguments);return y&&(y<1e-8||y>1e8)?l(2,-Math.round(c(y))):0}return{EPSILON:f,MACHINE_EPSILON:d,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(o(2)-1)/3,isZero:function(y){return y>=-f&&y<=f},isMachineZero:function(y){return y>=-d&&y<=d},clamp:_,integrate:function(y,v,C,T){for(var N=e[T-2],k=t[T-2],b=(C-v)*.5,S=b+v,x=0,E=T+1>>1,I=T&1?k[x++]*y(S):0;x<E;){var M=b*N[x];I+=k[x++]*(y(S+M)+y(S-M))}return b*I},findRoot:function(y,v,C,T,N,k,b){for(var S=0;S<k;S++){var x=y(C),E=x/v(C),I=C-E;if(r(E)<b){C=I;break}x>0?(N=C,C=I<=T?(T+N)*.5:I):(T=C,C=I>=N?(T+N)*.5:I)}return _(C,T,N)},solveQuadratic:function(y,v,C,T,N,k){var b,S=1/0;if(r(y)<f){if(r(v)<f)return r(C)<f?-1:0;b=-C/v}else{v*=-.5;var x=m(y,v,C);if(x&&r(x)<d){var E=w(r(y),r(v),r(C));E&&(y*=E,v*=E,C*=E,x=m(y,v,C))}if(x>=-d){var I=x<0?0:o(x),M=v+(v<0?-I:I);M===0?(b=C/y,S=-b):(b=M/y,S=C/M)}}var L=0,R=N==null,F=N-f,H=k+f;return isFinite(b)&&(R||b>F&&b<H)&&(T[L++]=R?b:_(b,N,k)),S!==b&&isFinite(S)&&(R||S>F&&S<H)&&(T[L++]=R?S:_(S,N,k)),L},solveCubic:function(y,v,C,T,N,k,b){var S=w(r(y),r(v),r(C),r(T)),x,E,I,M,L;S&&(y*=S,v*=S,C*=S,T*=S);function R(re){x=re;var oe=y*x;E=oe+v,I=E*x+C,M=(oe+E)*x+I,L=I*x+T}if(r(y)<f)y=v,E=C,I=T,x=1/0;else if(r(T)<f)E=v,I=C,x=0;else{R(-(v/y)/3);var F=L/y,H=l(r(F),1/3),G=F<0?-1:1,V=-M/y,q=V>0?1.324717957244746*Math.max(H,o(V)):H,Q=x-G*q;if(Q!==x){do R(Q),Q=M===0?x:x-L/M/(1+d);while(G*Q>G*x);r(y)*x*x>r(T/x)&&(I=-T/x,E=(I-C)/x)}}var j=X.solveQuadratic(y,E,I,N,k,b),Y=k==null;return isFinite(x)&&(j===0||j>0&&x!==N[0]&&x!==N[1])&&(Y||x>k-f&&x<b+f)&&(N[j++]=Y?x:_(x,k,b)),j}}},ie={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}else return this._id++}},z=h.extend({_class:"Point",_readIndex:!0,initialize:function(t,r){var o=typeof t,l=this.__read,c=0;if(o==="number"){var f=typeof r=="number";this._set(t,f?r:t),l&&(c=f?2:1)}else if(o==="undefined"||t===null)this._set(0,0),l&&(c=t===null?1:0);else{var d=o==="string"?t.split(/[\s,]+/)||[]:t;c=1,Array.isArray(d)?this._set(+d[0],+(d.length>1?d[1]:d[0])):"x"in d?this._set(d.x||0,d.y||0):"width"in d?this._set(d.width||0,d.height||0):"angle"in d?(this._set(d.length||0,0),this.setAngle(d.angle||0)):(this._set(0,0),c=0)}return l&&(this.__read=c),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new z(this.x,this.y)},toString:function(){var e=K.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var r=e/this.getLength();X.isZero(r)&&this.getAngle(),this._set(this.x*r,this.y*r)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=z.read(arguments),t=this.getLength()*e.getLength();if(X.isZero(t))return NaN;var r=this.dot(e)/t;return Math.acos(r<-1?-1:r>1?1:r)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=z.read(arguments);return Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},getDistance:function(){var e=arguments,t=z.read(e),r=t.x-this.x,o=t.y-this.y,l=r*r+o*o,c=h.read(e);return c?l:Math.sqrt(l)},normalize:function(e){e===a&&(e=1);var t=this.getLength(),r=t!==0?e/t:0,o=new z(this.x*r,this.y*r);return r>=0&&(o._angle=this._angle),o},rotate:function(e,t){if(e===0)return this.clone();e=e*Math.PI/180;var r=t?this.subtract(t):this,o=Math.sin(e),l=Math.cos(e);return r=new z(r.x*l-r.y*o,r.x*o+r.y*l),t?r.add(t):r},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=z.read(arguments);return new z(this.x+e.x,this.y+e.y)},subtract:function(){var e=z.read(arguments);return new z(this.x-e.x,this.y-e.y)},multiply:function(){var e=z.read(arguments);return new z(this.x*e.x,this.y*e.y)},divide:function(){var e=z.read(arguments);return new z(this.x/e.x,this.y/e.y)},modulo:function(){var e=z.read(arguments);return new z(this.x%e.x,this.y%e.y)},negate:function(){return new z(-this.x,-this.y)},isInside:function(){return $.read(arguments).contains(this)},isClose:function(){var e=arguments,t=z.read(e),r=h.read(e);return this.getDistance(t)<=r},isCollinear:function(){var e=z.read(arguments);return z.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=z.read(arguments);return z.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=X.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=z.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=z.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=z.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new z(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=z.read(e),r=z.read(e);return new z(Math.min(t.x,r.x),Math.min(t.y,r.y))},max:function(){var e=arguments,t=z.read(e),r=z.read(e);return new z(Math.max(t.x,r.x),Math.max(t.y,r.y))},random:function(){return new z(Math.random(),Math.random())},isCollinear:function(e,t,r,o){return Math.abs(e*o-t*r)<=Math.sqrt((e*e+t*t)*(r*r+o*o))*1e-8},isOrthogonal:function(e,t,r,o){return Math.abs(e*r+t*o)<=Math.sqrt((e*e+t*t)*(r*r+o*o))*1e-8}}},h.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new z(t(this.x),t(this.y))}},{})),ue=z.extend({initialize:function(t,r,o,l){this._x=t,this._y=r,this._owner=o,this._setter=l},_set:function(e,t,r){return this._x=e,this._y=t,r||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),ee=h.extend({_class:"Size",_readIndex:!0,initialize:function(t,r){var o=typeof t,l=this.__read,c=0;if(o==="number"){var f=typeof r=="number";this._set(t,f?r:t),l&&(c=f?2:1)}else if(o==="undefined"||t===null)this._set(0,0),l&&(c=t===null?1:0);else{var d=o==="string"?t.split(/[\s,]+/)||[]:t;c=1,Array.isArray(d)?this._set(+d[0],+(d.length>1?d[1]:d[0])):"width"in d?this._set(d.width||0,d.height||0):"x"in d?this._set(d.x||0,d.y||0):(this._set(0,0),c=0)}return l&&(this.__read=c),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new ee(this.width,this.height)},toString:function(){var e=K.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=ee.read(arguments);return new ee(this.width+e.width,this.height+e.height)},subtract:function(){var e=ee.read(arguments);return new ee(this.width-e.width,this.height-e.height)},multiply:function(){var e=ee.read(arguments);return new ee(this.width*e.width,this.height*e.height)},divide:function(){var e=ee.read(arguments);return new ee(this.width/e.width,this.height/e.height)},modulo:function(){var e=ee.read(arguments);return new ee(this.width%e.width,this.height%e.height)},negate:function(){return new ee(-this.width,-this.height)},isZero:function(){var e=X.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new ee(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new ee(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new ee(Math.random(),Math.random())}}},h.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new ee(t(this.width),t(this.height))}},{})),ce=ee.extend({initialize:function(t,r,o,l){this._width=t,this._height=r,this._owner=o,this._setter=l},_set:function(e,t,r){return this._width=e,this._height=t,r||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),$=h.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,r,o,l){var c=arguments,f=typeof t,d;if(f==="number"?(this._set(t,r,o,l),d=4):f==="undefined"||t===null?(this._set(0,0,0,0),d=t===null?1:0):c.length===1&&(Array.isArray(t)?(this._set.apply(this,t),d=1):t.x!==a||t.width!==a?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),d=1):t.from===a&&t.to===a&&(this._set(0,0,0,0),h.readSupported(c,this)&&(d=1))),d===a){var _=z.readNamed(c,"from"),m=h.peek(c),w=_.x,y=_.y,v,C;if(m&&m.x!==a||h.hasNamed(c,"to")){var T=z.readNamed(c,"to");v=T.x-w,C=T.y-y,v<0&&(w=T.x,v=-v),C<0&&(y=T.y,C=-C)}else{var N=ee.read(c);v=N.width,C=N.height}this._set(w,y,v,C),d=c.__index}var k=c.__filtered;return k&&(this.__filtered=k),this.__read&&(this.__read=d),this},set:"#initialize",_set:function(e,t,r,o){return this.x=e,this.y=t,this.width=r,this.height=o,this},clone:function(){return new $(this.x,this.y,this.width,this.height)},equals:function(e){var t=h.isPlainValue(e)?$.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=K.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?z:ue;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var e=z.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?ee:ce;return new t(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=ee.read(arguments),t=this._sx,r=this._sy,o=e.width,l=e.height;t&&(this.x+=(this.width-o)*t),r&&(this.y+=(this.height-l)*r),this.width=o,this.height=l,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=this._sx===.5?t*2:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=this._sy===.5?t*2:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=this._sx===.5?t*2:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=this._sy===.5?t*2:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||this._sx===.5?this.x=e-this.width/2:(this._sx&&(this.x+=(e-this.x)*2*this._sx),this.width=(e-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||this._sy===.5?this.y=e-this.height/2:(this._sy&&(this.y+=(e-this.y)*2*this._sy),this.height=(e-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(e){var t=e?z:ue;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=z.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(e){return e&&e.width!==a||(Array.isArray(e)?e:arguments).length===4?this._containsRectangle($.read(arguments)):this._containsPoint(z.read(arguments))},_containsPoint:function(e){var t=e.x,r=e.y;return t>=this.x&&r>=this.y&&t<=this.x+this.width&&r<=this.y+this.height},_containsRectangle:function(e){var t=e.x,r=e.y;return t>=this.x&&r>=this.y&&t+e.width<=this.x+this.width&&r+e.height<=this.y+this.height},intersects:function(){var e=$.read(arguments),t=h.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=$.read(arguments),t=Math.max(this.x,e.x),r=Math.max(this.y,e.y),o=Math.min(this.x+this.width,e.x+e.width),l=Math.min(this.y+this.height,e.y+e.height);return new $(t,r,o-t,l-r)},unite:function(){var e=$.read(arguments),t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),o=Math.max(this.x+this.width,e.x+e.width),l=Math.max(this.y+this.height,e.y+e.height);return new $(t,r,o-t,l-r)},include:function(){var e=z.read(arguments),t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),o=Math.max(this.x+this.width,e.x),l=Math.max(this.y+this.height,e.y);return new $(t,r,o-t,l-r)},expand:function(){var e=ee.read(arguments),t=e.width,r=e.height;return new $(this.x-t/2,this.y-r/2,this.width+t,this.height+r)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===a?e:t)-this.height)}},h.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var r=e.join(""),o=/^[RL]/.test(r);t>=4&&(e[1]+=o?"Y":"X");var l=e[o?0:1],c=e[o?1:0],f="get"+l,d="get"+c,_="set"+l,m="set"+c,w="get"+r,y="set"+r;this[w]=function(v){var C=v?z:ue;return new C(this[f](),this[d](),this,y)},this[y]=function(){var v=z.read(arguments);this[_](v.x),this[m](v.y)}},{beans:!0})),J=$.extend({initialize:function(t,r,o,l,c,f){this._set(t,r,o,l,!0),this._owner=c,this._setter=f},_set:function(e,t,r,o,l){return this._x=e,this._y=t,this._width=r,this._height=o,l||this._owner[this._setter](this),this}},new function(){var e=$.prototype;return h.each(["x","y","width","height"],function(t){var r=h.capitalize(t),o="_"+t;this["get"+r]=function(){return this[o]},this["set"+r]=function(l){this[o]=l,this._dontNotify||this._owner[this._setter](this)}},h.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var r="set"+t;this[r]=function(){this._dontNotify=!0,e[r].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(t){var r=this._owner;r._changeSelection&&r._changeSelection(2,t)}}))}),te=h.extend({_class:"Matrix",initialize:function e(t,r){var o=arguments,l=o.length,c=!0;if(l>=6?this._set.apply(this,o):l===1||l===2?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,r):Array.isArray(t)?this._set.apply(this,r?t.concat([r]):t):c=!1:l?c=!1:this.reset(),!c)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,r,o,l,c,f){return this._a=e,this._b=t,this._c=r,this._d=o,this._tx=l,this._ty=c,f||this._changed(),this},_serialize:function(e,t){return h.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new te(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=K.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var r=this._owner;return r?(r.transform(null,h.pick(e,!0),t),this.isIdentity()):!1},translate:function(){var e=z.read(arguments),t=e.x,r=e.y;return this._tx+=t*this._a+r*this._c,this._ty+=t*this._b+r*this._d,this._changed(),this},scale:function(){var e=arguments,t=z.read(e),r=z.read(e,0,{readNull:!0});return r&&this.translate(r),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,r&&this.translate(r.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=z.read(arguments,1),r=t.x,o=t.y,l=Math.cos(e),c=Math.sin(e),f=r-r*l+o*c,d=o-r*c-o*l,_=this._a,m=this._b,w=this._c,y=this._d;return this._a=l*_+c*w,this._b=l*m+c*y,this._c=-c*_+l*w,this._d=-c*m+l*y,this._tx+=f*_+d*w,this._ty+=f*m+d*y,this._changed(),this},shear:function(){var e=arguments,t=z.read(e),r=z.read(e,0,{readNull:!0});r&&this.translate(r);var o=this._a,l=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*o,this._d+=t.x*l,r&&this.translate(r.negate()),this._changed(),this},skew:function(){var e=arguments,t=z.read(e),r=z.read(e,0,{readNull:!0}),o=Math.PI/180,l=new z(Math.tan(t.x*o),Math.tan(t.y*o));return this.shear(l,r)},append:function(e,t){if(e){var r=this._a,o=this._b,l=this._c,c=this._d,f=e._a,d=e._c,_=e._b,m=e._d,w=e._tx,y=e._ty;this._a=f*r+_*l,this._c=d*r+m*l,this._b=f*o+_*c,this._d=d*o+m*c,this._tx+=w*r+y*l,this._ty+=w*o+y*c,t||this._changed()}return this},prepend:function(e,t){if(e){var r=this._a,o=this._b,l=this._c,c=this._d,f=this._tx,d=this._ty,_=e._a,m=e._c,w=e._b,y=e._d,v=e._tx,C=e._ty;this._a=_*r+m*o,this._c=_*l+m*c,this._b=w*r+y*o,this._d=w*l+y*c,this._tx=_*f+m*d+v,this._ty=w*f+y*d+C,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,r=this._c,o=this._d,l=this._tx,c=this._ty,f=e*o-t*r,d=null;return f&&!isNaN(f)&&isFinite(l)&&isFinite(c)&&(this._a=o/f,this._b=-t/f,this._c=-r/f,this._d=e/f,this._tx=(r*c-o*l)/f,this._ty=(t*l-e*c)/f,d=this),d},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new te(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,r){return arguments.length<3?this._transformPoint(z.read(arguments)):this._transformCoordinates(e,t,r)},_transformPoint:function(e,t,r){var o=e.x,l=e.y;return t||(t=new z),t._set(o*this._a+l*this._c+this._tx,o*this._b+l*this._d+this._ty,r)},_transformCoordinates:function(e,t,r){for(var o=0,l=2*r;o<l;o+=2){var c=e[o],f=e[o+1];t[o]=c*this._a+f*this._c+this._tx,t[o+1]=c*this._b+f*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,r=e.y,o=t+e.width,l=r+e.height,c=[t,r,o,r,o,l,t,l];return this._transformCoordinates(c,c,4)},_transformBounds:function(e,t,r){for(var o=this._transformCorners(e),l=o.slice(0,2),c=l.slice(),f=2;f<8;f++){var d=o[f],_=f&1;d<l[_]?l[_]=d:d>c[_]&&(c[_]=d)}return t||(t=new $),t._set(l[0],l[1],c[0]-l[0],c[1]-l[1],r)},inverseTransform:function(){return this._inverseTransform(z.read(arguments))},_inverseTransform:function(e,t,r){var o=this._a,l=this._b,c=this._c,f=this._d,d=this._tx,_=this._ty,m=o*f-l*c,w=null;if(m&&!isNaN(m)&&isFinite(d)&&isFinite(_)){var y=e.x-this._tx,v=e.y-this._ty;t||(t=new z),w=t._set((y*f-v*c)/m,(v*o-y*l)/m,r)}return w},decompose:function(){var e=this._a,t=this._b,r=this._c,o=this._d,l=e*o-t*r,c=Math.sqrt,f=Math.atan2,d=180/Math.PI,_,m,w;if(e!==0||t!==0){var y=c(e*e+t*t);_=Math.acos(e/y)*(t>0?1:-1),m=[y,l/y],w=[f(e*r+t*o,y*y),0]}else if(r!==0||o!==0){var v=c(r*r+o*o);_=Math.asin(r/v)*(o>0?1:-1),m=[l/v,v],w=[0,f(e*r+t*o,v*v)]}else _=0,w=m=[0,0];return{translation:this.getTranslation(),rotation:_*d,scaling:new z(m),skewing:new z(w[0]*d,w[1]*d)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new z(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},h.each(["a","b","c","d","tx","ty"],function(e){var t=h.capitalize(e),r="_"+e;this["get"+t]=function(){return this[r]},this["set"+t]=function(o){this[r]=o,this._changed()}},{})),pe=h.extend({_class:"Line",initialize:function(t,r,o,l,c){var f=!1;arguments.length>=4?(this._px=t,this._py=r,this._vx=o,this._vy=l,f=c):(this._px=t.x,this._py=t.y,this._vx=r.x,this._vy=r.y,f=o),f||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new z(this._px,this._py)},getVector:function(){return new z(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return pe.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return pe.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return pe.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return z.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return z.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,r,o,l,c,f,d,_,m){_||(r-=e,o-=t,f-=l,d-=c);var w=r*d-o*f;if(!X.isMachineZero(w)){var y=e-l,v=t-c,C=(f*v-d*y)/w,T=(r*v-o*y)/w,N=1e-12,k=-N,b=1+N;if(m||k<C&&C<b&&k<T&&T<b)return m||(C=C<=0?0:C>=1?1:C),new z(e+C*r,t+C*o)}},getSide:function(e,t,r,o,l,c,f,d){f||(r-=e,o-=t);var _=l-e,m=c-t,w=_*o-m*r;return!d&&X.isMachineZero(w)&&(w=(_*r+_*r)/(r*r+o*o),w>=0&&w<=1&&(w=0)),w<0?-1:w>0?1:0},getSignedDistance:function(e,t,r,o,l,c,f){return f||(r-=e,o-=t),r===0?o>0?l-e:e-l:o===0?r<0?c-t:t-c:((l-e)*o-(c-t)*r)/(o>r?o*Math.sqrt(1+r*r/(o*o)):r*Math.sqrt(1+o*o/(r*r)))},getDistance:function(e,t,r,o,l,c,f){return Math.abs(pe.getSignedDistance(e,t,r,o,l,c,f))}}}),we=D.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){D.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Ni(null,null,this),this._view=et.create(this,t||mt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return h.serialize(this._children,e,!0,t)},_changed:function(e,t){if(e&1){var r=this._view;r&&(r._needsUpdate=!0,!r._requested&&r._autoUpdate&&r.requestUpdate())}var o=this._changes;if(o&&t){var l=this._changesById,c=t._id,f=l[c];f?f.flags|=e:o.push(l[c]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return e.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Pe({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:ot,match:function(r){var o=r._definition,l=o._id;return t[l]||(t[l]=!0,e.push(o)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var r in e){var o=e[r],l=o._selection;l&1&&o.isInserted()?t.push(o):l||this._updateSelection(o)}return t},_updateSelection:function(e){var t=e._id,r=this._selectionItems;e._selection?r[t]!==e&&(this._selectionCount++,r[t]=e):r[t]===e&&(this._selectionCount--,delete r[t])},selectAll:function(){for(var e=this._children,t=0,r=e.length;t<r;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(a,e)},insertLayer:function(e,t){if(t instanceof Pe){t._remove(!1,!0),h.splice(this._children,[t],e,0),t._setProject(this,!0);var r=t._name;r&&t.setName(r),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,r){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(a,new Pe(B.NO_INSERT),!0)).insertChild(e,t),r&&t.activate&&t.activate(),t},getItems:function(e){return B._getItems(this,e)},getItem:function(e){return B._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return h.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){e==="mouseup"&&(t.mousedrag=null);var r=t[e];if(r){for(var o in r){var l=r[o];for(var c in t){var f=t[c];f&&f!=r&&delete f[l._id]}l.remove()}t[e]=null}}},draw:function(e,t,r){this._updateVersion++,e.save(),t.applyToContext(e);for(var o=this._children,l=new h({offset:new z(0,0),pixelRatio:r,viewMatrix:t.isIdentity()?null:t,matrices:[new te],updateMatrix:!0}),c=0,f=o.length;c<f;c++)o[c].draw(e,l);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var d=this._selectionItems,_=this._scope.settings.handleSize,m=this._updateVersion;for(var w in d)d[w]._drawSelection(e,t,_,d,m);e.restore()}}}),B=h.extend(P,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=h.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new te,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return h.each(e,function(t){this._events[t]={install:function(r){this.getView()._countItemEvent(r,1)},uninstall:function(r){this.getView()._countItemEvent(r,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var r=e&&h.isPlainObject(e),o=r&&e.internal===!0,l=this._matrix=new te,c=r&&e.project||s.project,f=s.settings;return this._id=o?null:ie.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&f.applyMatrix,t&&l.translate(t),l._owner=this,this._style=new Ni(c._currentStyle,this,c),o||r&&e.insert==!1||!f.insertItems&&!(r&&e.insert===!0)?this._setProject(c):(r&&e.parent||c)._insertItem(a,this,!0),r&&e!==B.NO_INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),r},_serialize:function(e,t){var r={},o=this;function l(c){for(var f in c){var d=o[f];h.equals(d,f==="leading"?c.fontSize*1.2:c[f])||(r[f]=h.serialize(d,e,f!=="data",t))}}return l(this._serializeFields),this instanceof Ne||l(this._style._defaults),[this._class,r]},_changed:function(e){var t=this._symbol,r=this._parent||t,o=this._project;e&8&&(this._bounds=this._position=this._decomposed=a),e&16&&(this._globalMatrix=a),r&&e&72&&B._clearBoundsCache(r),e&2&&B._clearBoundsCache(this),o&&o._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var r=t._children,o=t._namedChildren;(o[e]=o[e]||[]).push(this),e in r||(r[e]=this)}this._name=e||a,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},h.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=h.capitalize(e),r="_"+e,o={locked:256,visible:265};this["get"+t]=function(){return this[r]},this["set"+t]=function(l){l!=this[r]&&(this[r]=l,this._changed(o[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var r=this._selection;this.setSelection(t?r|e:r&~e)},isSelected:function(){if(this._selectChildren){for(var e=this._children,t=0,r=e.length;t<r;t++)if(e[t].isSelected())return!0}return!!(this._selection&1)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,r=0,o=t.length;r<o;r++)t[r].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(this._selection&1);if(e&&t){for(var r=0,o=e.length;r<o;r++)if(!e[r].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var r=0,o=t.length;r<o;r++)t[r].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?z:ue,r=this._position||(this._position=this._getPositionFromBounds());return new t(r.x,r.y,this,"setPosition")},setPosition:function(){this.translate(z.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new ue(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=z.read(arguments,0,{clone:!0,readNull:!0}),this._position=a}},h.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(r){return this.getBounds(r,e)}},{beans:!0,getBounds:function(e,t){var r=t||e instanceof te,o=h.set({},r?t:e,this._boundsOptions);(!o.stroke||this.getStrokeScaling())&&(o.cacheItem=this);var l=this._getCachedBounds(r&&e,o).rect;return arguments.length?l:new J(l.x,l.y,l.width,l.height,this,"setBounds")},setBounds:function(){var e=$.read(arguments),t=this.getBounds(),r=this._matrix,o=new te,l=e.getCenter();o.translate(l),(e.width!=t.width||e.height!=t.height)&&(r.isInvertible()||(r.set(r._backup||new te().translate(r.getTranslation())),t=this.getBounds()),o.scale(t.width!==0?e.width/t.width:0,t.height!==0?e.height/t.height:0)),l=t.getCenter(),o.translate(-l.x,-l.y),this.transform(o)},_getBounds:function(e,t){var r=this._children;return!r||!r.length?new $:(B._updateBoundsCache(this,t.cacheItem),B._getBounds(r,e,t))},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,r){e=e&&e._orNullIfIdentity();var o=t.internal&&!r,l=t.cacheItem,c=o?null:this._matrix._orNullIfIdentity(),f=l&&(!e||e.equals(c))&&this._getBoundsCacheKey(t,o),d=this._bounds;if(B._updateBoundsCache(this._parent||this._symbol,l),f&&d&&f in d){var _=d[f];return{rect:_.rect.clone(),nonscaling:_.nonscaling}}var m=this._getBounds(e||c,t),w=m.rect||m,y=this._style,v=m.nonscaling||y.hasStroke()&&!y.getStrokeScaling();if(f){d||(this._bounds=d={});var _=d[f]={rect:w.clone(),nonscaling:v,internal:o}}return{rect:w,nonscaling:v}},_getStrokeMatrix:function(e,t){var r=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,o=r?r.getViewMatrix().invert():e;return o&&o._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var r=t._id,o=e._boundsCache=e._boundsCache||{ids:{},list:[]};o.ids[r]||(o.list.push(t),o.ids[r]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=a;for(var r=0,o=t.list,l=o.length;r<l;r++){var c=o[r];c!==e&&(c._bounds=c._position=a,c._boundsCache&&B._clearBoundsCache(c))}}},_getBounds:function(e,t,r){var o=1/0,l=-o,c=o,f=l,d=!1;r=r||{};for(var _=0,m=e.length;_<m;_++){var w=e[_];if(w._visible&&!w.isEmpty(!0)){var y=w._getCachedBounds(t&&t.appended(w._matrix),r,!0),v=y.rect;o=Math.min(v.x,o),c=Math.min(v.y,c),l=Math.max(v.x+v.width,l),f=Math.max(v.y+v.height,f),y.nonscaling&&(d=!0)}}return{rect:isFinite(o)?new $(o,c,l-o,f-c):new $,nonscaling:d}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(t!=null&&e!=null){var r=this._decomposed;this.rotate(e-t),r&&(r.rotation=e,this._decomposed=r)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new ue(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=z.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var r=this.getRotation(),o=this._decomposed,l=new te,c=X.isZero;if(c(e.x)||c(e.y))l.translate(o.translation),r&&l.rotate(r),l.scale(t.x,t.y),this._matrix.set(l);else{var f=this.getPosition(!0);l.translate(f),r&&l.rotate(r),l.scale(t.x/e.x,t.y/e.y),r&&l.rotate(-r),l.translate(f.negate()),this.transform(l)}o&&(o.scaling=t,this._decomposed=o)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var r=this._parent,o=[];r;){if(!r._globalMatrix){t=null;for(var l=0,c=o.length;l<c;l++)o[l]._globalMatrix=null;break}o.push(r),r=r._parent}if(!t){t=this._globalMatrix=this._matrix.clone();var r=this._parent;r&&t.prepend(r.getGlobalMatrix(!0))}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var r=this._children,o=0,l=r&&r.length;o<l;o++)r[o]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var r=this._children,o=0,l=r&&r.length;o<l;o++)r[o]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof Pe)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return h.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(B.NO_INSERT),r=this._children,o=h.pick(e?e.insert:a,e===a||e===!0),l=h.pick(e?e.deep:a,!0);r&&t.copyAttributes(this),(!r||l)&&t.copyContent(this),r||t.copyAttributes(this),o&&t.insertAbove(this);var c=this._name,f=this._parent;if(c&&f){for(var r=f._children,d=c,_=1;r[c];)c=d+" "+_++;c!==d&&t.setName(c)}return t},copyContent:function(e){for(var t=e._children,r=0,o=t&&t.length;r<o;r++)this.addChild(t[r].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var r=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],o=0,l=r.length;o<l;o++){var c=r[o];e.hasOwnProperty(c)&&(this[c]=e[c])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var f=e._data,d=e._name;this._data=f?h.clone(f):null,d&&this.setName(d)},rasterize:function(e,t){var r,o,l;h.isPlainObject(e)?(r=e.resolution,o=e.insert,l=e.raster):(r=e,o=t),l?l.matrix.reset(!0):l=new Ve(B.NO_INSERT);var c=this.getStrokeBounds(),f=(r||this.getView().getResolution())/72,d=c.getTopLeft().floor(),_=c.getBottomRight().ceil(),m=new ee(_.subtract(d)),w=m.multiply(f);if(l.setSize(w,!0),!w.isZero()){var y=l.getContext(!0),v=new te().scale(f).translate(d.negate());y.save(),v.applyToContext(y),this.draw(y,new h({matrices:[v]})),y.restore()}return l.transform(new te().translate(d.add(m.divide(2))).scale(1/f)),(o===a||o)&&l.insertAbove(this),l},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(z.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var r=t.length-1;r>=0;r--)if(t[r].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return $.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new be.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof B?this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0:!1}},new function(){function e(){var o=arguments;return this._hitTest(z.read(o),st.getOptions(o))}function t(){var o=arguments,l=z.read(o),c=st.getOptions(o),f=[];return this._hitTest(l,new h({all:f},c)),f}function r(o,l,c,f){var d=this._children;if(d)for(var _=d.length-1;_>=0;_--){var m=d[_],w=m!==f&&m._hitTest(o,l,c);if(w&&!l.all)return w}return null}return we.inject({hitTest:e,hitTestAll:t,_hitTest:r}),{hitTest:e,hitTestAll:t,_hitTestChildren:r}},{_hitTest:function(e,t,r){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var o=this._matrix,l=r?r.appended(o):this.getGlobalMatrix().prepend(this.getView()._matrix),c=Math.max(t.tolerance,1e-12),f=t._tolerancePadding=new ee(be._getStrokePadding(c,o._shiftless().invert()));if(e=o._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(f.multiply(2))._containsPoint(e))return null;var d=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==h.hyphenate(this._class)||t.class&&!(this instanceof t.class)),_=t.match,m=this,w,y;function v(x){return x&&_&&!_(x)&&(x=null),x&&t.all&&t.all.push(x),x}function C(x,E){var I=E?w["get"+E]():m.getPosition();if(e.subtract(I).divide(f).length<=1)return new st(x,m,{name:E?h.hyphenate(E):x,point:I})}var T=t.position,N=t.center,k=t.bounds;if(d&&this._parent&&(T||N||k)){if((N||k)&&(w=this.getInternalBounds()),y=T&&C("position")||N&&C("center","Center"),!y&&k)for(var b=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],S=0;S<8&&!y;S++)y=C("bounds",b[S]);y=v(y)}return y||(y=this._hitTestChildren(e,t,l)||d&&v(this._hitTestSelf(e,t,l,this.getStrokeScaling()?null:l._shiftless().invert()))||null),y&&y.point&&(y.point=o.transform(y.point)),y},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new st("fill",this)},matches:function(e,t){function r(f,d){for(var _ in f)if(f.hasOwnProperty(_)){var m=f[_],w=d[_];if(h.isPlainObject(m)&&h.isPlainObject(w)){if(!r(m,w))return!1}else if(!h.equals(m,w))return!1}return!0}var o=typeof e;if(o==="object"){for(var l in e)if(e.hasOwnProperty(l)&&!this.matches(l,e[l]))return!1;return!0}else{if(o==="function")return e(this);if(e==="match")return t(this);var c=/^(empty|editable)$/.test(e)?this["is"+h.capitalize(e)]():e==="type"?h.hyphenate(this._class):this[e];if(e==="class"){if(typeof t=="function")return this instanceof t;c=this._class}if(typeof t=="function")return!!t(c);if(t){if(t.test)return t.test(c);if(h.isPlainObject(t))return r(t,c)}return h.equals(c,t)}},getItems:function(e){return B._getItems(this,e,this._matrix)},getItem:function(e){return B._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,r,o,l,c){if(!l){var f=typeof r=="object"&&r,d=f&&f.overlapping,_=f&&f.inside,m=d||_,v=m&&$.read([m]);l={items:[],recursive:f&&f.recursive!==!1,inside:!!_,overlapping:!!d,rect:v,path:d&&new be.Rectangle({rectangle:v,insert:!1})},f&&(r=h.filter({},r,{recursive:!0,inside:!0,overlapping:!0}))}var w=t._children,y=l.items,v=l.rect;o=v&&(o||new te);for(var C=0,T=w&&w.length;C<T;C++){var N=w[C],k=o&&o.appended(N._matrix),b=!0;if(v){var m=N.getBounds(k);if(!v.intersects(m))continue;v.contains(m)||l.overlapping&&(m.contains(v)||l.path.intersects(N,k))||(b=!1)}if(b&&N.matches(r)&&(y.push(N),c)||(l.recursive!==!1&&e(N,r,k,l,c),c&&y.length>0))break}return y}}},{importJSON:function(e){var t=h.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(a,e)},insertChild:function(e,t){var r=t?this.insertChildren(e,[t]):null;return r&&r[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var r=this._children;if(r&&t&&t.length>0){t=h.slice(t);for(var o={},l=t.length-1;l>=0;l--){var c=t[l],f=c&&c._id;!c||o[f]?t.splice(l,1):(c._remove(!1,!0),o[f]=!0)}h.splice(r,t,e,0);for(var d=this._project,_=d._changes,l=0,m=t.length;l<m;l++){var c=t[l],w=c._name;c._parent=this,c._setProject(d,!0),w&&c.setName(w),_&&c._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var r=e&&e._getOwner(),o=e!==this&&r?this:null;return o&&(o._remove(!1,!0),r._insertItem(e._index+t,o)),o},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(a,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(a,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&t.length===1){var r=t[0].reduce(e);return this._parent?(r.insertAbove(this),this.remove()):r.remove(),r}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,r=e._namedChildren,o=this._name,l=r[o],c=l?l.indexOf(this):-1;c!==-1&&(t[o]==this&&delete t[o],l.splice(c,1),l.length?t[o]=l[0]:delete r[o])}},_remove:function(e,t){var r=this._getOwner(),o=this._project,l=this._index;return this._style&&this._style._dispose(),r?(this._name&&this._removeNamed(),l!=null&&(o._activeLayer===this&&(o._activeLayer=this.getNextSibling()||this.getPreviousSibling()),h.splice(r._children,null,l,1)),this._installEvents(!1),e&&o._changes&&this._changed(5),t&&r._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=h.pick(t,this._children.length);for(var r=h.splice(this._children,null,e,t-e),o=r.length-1;o>=0;o--)r[o]._remove(!0,!1);return r.length>0&&this._changed(11),r},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,r=t?t.length:0;if(e){for(var o=0;o<r;o++)if(!t[o].isEmpty(e))return!1;return!0}return!r},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(f){var d=[];do d.unshift(f);while(f=f._parent);return d}for(var r=t(this),o=t(e),l=0,c=Math.min(r.length,o.length);l<c;l++)if(r[l]!=o[l])return r[l]._index<o[l]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return this._getOrder(e)===1},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},h.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var r=arguments,o=(t?h:z).read(r),l=z.read(r,0,{readNull:!0});return this.transform(new te()[e](o,l||this.getPosition(!0)))}},{translate:function(){var e=new te;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,r){var o=this._matrix,l=e&&!e.isIdentity(),c=r&&this._canApplyMatrix||this._applyMatrix&&(l||!o.isIdentity()||t&&this._children);if(!l&&!c)return this;if(l){!e.isInvertible()&&o.isInvertible()&&(o._backup=o.getValues()),o.prepend(e,!0);var f=this._style,d=f.getFillColor(!0),_=f.getStrokeColor(!0);d&&d.transform(e),_&&_.transform(e)}if(c&&(c=this._transformContent(o,t,r))){var m=this._pivot;m&&o._transformPoint(m,m,!0),o.reset(!0),r&&this._canApplyMatrix&&(this._applyMatrix=!0)}var w=this._bounds,y=this._position;(l||c)&&this._changed(25);var v=l&&w&&e.decompose();if(v&&v.skewing.isZero()&&v.rotation%90===0){for(var C in w){var T=w[C];if(T.nonscaling)delete w[C];else if(c||!T.internal){var N=T.rect;e._transformBounds(N,N)}}this._bounds=w;var k=w[this._getBoundsCacheKey(this._boundsOptions||{})];k&&(this._position=this._getPositionFromBounds(k.rect))}else l&&y&&this._pivot&&(this._position=e._transformPoint(y,y));return this},_transformContent:function(e,t,r){var o=this._children;if(o){for(var l=0,c=o.length;l<c;l++)o[l].transform(e,t,r);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(z.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(z.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(z.read(arguments))},localToParent:function(){return this._matrix._transformPoint(z.read(arguments))},fitBounds:function(e,t){e=$.read(arguments);var r=this.getBounds(),o=r.height/r.width,l=e.height/e.width,c=(t?o>l:o<l)?e.width/r.width:e.height/r.height,f=new $(new z,new ee(r.width*c,r.height*c));f.setCenter(e.getCenter()),this.setBounds(f)}}),{_setStyles:function(e,t,r){var o=this._style,l=this._matrix;if(o.hasFill()&&(e.fillStyle=o.getFillColor().toCanvasStyle(e,l)),o.hasStroke()){e.strokeStyle=o.getStrokeColor().toCanvasStyle(e,l),e.lineWidth=o.getStrokeWidth();var c=o.getStrokeJoin(),f=o.getStrokeCap(),d=o.getMiterLimit();if(c&&(e.lineJoin=c),f&&(e.lineCap=f),d&&(e.miterLimit=d),s.support.nativeDash){var _=o.getDashArray(),m=o.getDashOffset();_&&_.length&&("setLineDash"in e?(e.setLineDash(_),e.lineDashOffset=m):(e.mozDash=_,e.mozDashOffset=m))}}if(o.hasShadow()){var w=t.pixelRatio||1,y=r._shiftless().prepend(new te().scale(w,w)),v=y.transform(new z(o.getShadowBlur(),0)),C=y.transform(this.getShadowOffset());e.shadowColor=o.getShadowColor().toCanvasStyle(e),e.shadowBlur=v.getLength(),e.shadowOffsetX=C.x,e.shadowOffsetY=C.y}},draw:function(e,t,r){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var o=t.matrices,l=t.viewMatrix,c=this._matrix,f=o[o.length-1].appended(c);if(!!f.isInvertible()){l=l?l.appended(f):f,o.push(f),t.updateMatrix&&(this._globalMatrix=f);var d=this._blendMode,_=X.clamp(this._opacity,0,1),m=d==="normal",w=Nt.nativeModes[d],y=m&&_===1||t.dontStart||t.clip||(w||m&&_<1)&&this._canComposite(),v=t.pixelRatio||1,C,T,N;if(!y){var k=this.getStrokeBounds(l);if(!k.width||!k.height){o.pop();return}N=t.offset,T=t.offset=k.getTopLeft().floor(),C=e,e=mt.getContext(k.getSize().ceil().add(1).multiply(v)),v!==1&&e.scale(v,v)}e.save();var b=r?r.appended(c):this._canScaleStroke&&!this.getStrokeScaling(!0)&&l,S=!y&&t.clipItem,x=!b||S;if(y?(e.globalAlpha=_,w&&(e.globalCompositeOperation=d)):x&&e.translate(-T.x,-T.y),x&&(y?c:l).applyToContext(e),S&&t.clipItem.draw(e,t.extend({clip:!0})),b){e.setTransform(v,0,0,v,0,0);var E=t.offset;E&&e.translate(-E.x,-E.y)}this._draw(e,t,l,b),e.restore(),o.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),y||(Nt.process(d,e,C,_,T.subtract(N).multiply(v)),mt.release(e),t.offset=N)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof Be)return t._isUpdated(e);var r=this._updateVersion===e;return!r&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,r=!0),r},_drawSelection:function(e,t,r,o,l){var c=this._selection,f=c&1,d=c&2||f&&this._selectBounds,_=c&4;if(this._drawSelected||(f=!1),(f||d||_)&&this._isUpdated(l)){var m,w=this.getSelectedColor(!0)||(m=this.getLayer())&&m.getSelectedColor(!0),y=t.appended(this.getGlobalMatrix(!0)),v=r/2;if(e.strokeStyle=e.fillStyle=w?w.toCanvasStyle(e):"#009dec",f&&this._drawSelected(e,y,o),_){var C=this.getPosition(!0),T=this._parent,N=T?T.localToGlobal(C):C,k=N.x,b=N.y;e.beginPath(),e.arc(k,b,v,0,Math.PI*2,!0),e.stroke();for(var S=[[0,-1],[1,0],[0,1],[-1,0]],x=v,E=r+1,I=0;I<4;I++){var M=S[I],L=M[0],R=M[1];e.moveTo(k+L*x,b+R*x),e.lineTo(k+L*E,b+R*E),e.stroke()}}if(d){var F=y._transformCorners(this.getInternalBounds());e.beginPath();for(var I=0;I<8;I++)e[I?"lineTo":"moveTo"](F[I],F[++I]);e.closePath(),e.stroke();for(var I=0;I<8;I++)e.fillRect(F[I]-v,F[++I]-v,r,r)}}},_canComposite:function(){return!1}},h.each(["down","drag","up","move"],function(e){this["removeOn"+h.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var r="mouse"+t,o=this._project,l=o._removeSets=o._removeSets||{};l[r]=l[r]||{},l[r][this._id]=this}return this}}),{tween:function(e,t,r){r||(r=t,t=e,e=null,r||(r=t,t=null));var o=r&&r.easing,l=r&&r.start,c=r!=null&&(typeof r=="number"?r:r.duration),f=new Cn(this,e,t,c,o,l);function d(_){f._handleFrame(_.time*1e3),f.running||this.off("frame",d)}return c&&this.on("frame",d),f},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),Ne=B.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function e(t){e.base.call(this,t),t&2050&&(this._clipItem=a)},_getClipItem:function(){var e=this._clipItem;if(e===a){e=null;for(var t=this._children,r=0,o=t.length;r<o;r++)if(t[r]._clipMask){e=t[r];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,r){var o=this._getClipItem();return o?o._getCachedBounds(o._matrix.prepended(t),h.set({},r,{stroke:!1})):e.base.call(this,t,r)},_hitTestChildren:function e(t,r,o){var l=this._getClipItem();return(!l||l.contains(t))&&e.base.call(this,t,r,o,l)},_draw:function(e,t){var r=t.clip,o=!r&&this._getClipItem();t=t.extend({clipItem:o,clip:!1}),r?(e.beginPath(),t.dontStart=t.dontFinish=!0):o&&o.draw(e,t.extend({clip:!0}));for(var l=this._children,c=0,f=l.length;c<f;c++){var d=l[c];d!==o&&d.draw(e,t)}}}),Pe=Ne.extend({_class:"Layer",initialize:function(){Ne.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function e(){return this._parent?e.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Fe=B.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,r){this._initialize(t,r)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&h.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new ce(e.width,e.height,this,"setSize")},setSize:function(){var e=ee.read(arguments);if(!this._size)this._size=e.clone();else if(!this._size.equals(e)){var t=this._type,r=e.width,o=e.height;t==="rectangle"?this._radius.set(ee.min(this._radius,e.divide(2).abs())):t==="circle"?(r=o=(r+o)/2,this._radius=r/2):t==="ellipse"&&this._radius._set(r/2,o/2),this._size._set(r,o),this._changed(9)}},getRadius:function(){var e=this._radius;return this._type==="circle"?e:new ce(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if(t==="circle"){if(e===this._radius)return;var r=e*2;this._radius=e,this._size._set(r,r)}else if(e=ee.read(arguments),!this._radius)this._radius=e.clone();else{if(this._radius.equals(e))return;if(this._radius.set(e),t==="rectangle"){var r=ee.max(this._size,e.multiply(2));this._size.set(r)}else t==="ellipse"&&this._size._set(e.width*2,e.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new be[h.capitalize(this._type)]({center:new z,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),s.settings.applyMatrix&&t.setApplyMatrix(!0),(e===a||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,r,o){var l=this._style,c=l.hasFill(),f=l.hasStroke(),d=t.dontFinish||t.clip,_=!o;if(c||f||d){var m=this._type,w=this._radius,y=m==="circle";if(t.dontStart||e.beginPath(),_&&y)e.arc(0,0,w,0,Math.PI*2,!0);else{var v=y?w:w.width,C=y?w:w.height,T=this._size,N=T.width,k=T.height;if(_&&m==="rectangle"&&v===0&&C===0)e.rect(-N/2,-k/2,N,k);else{var b=N/2,S=k/2,x=1-.5522847498307936,E=v*x,I=C*x,M=[-b,-S+C,-b,-S+I,-b+E,-S,-b+v,-S,b-v,-S,b-E,-S,b,-S+I,b,-S+C,b,S-C,b,S-I,b-E,S,b-v,S,-b+v,S,-b+E,S,-b,S-I,-b,S-C];o&&o.transform(M,M,32),e.moveTo(M[0],M[1]),e.bezierCurveTo(M[2],M[3],M[4],M[5],M[6],M[7]),b!==v&&e.lineTo(M[8],M[9]),e.bezierCurveTo(M[10],M[11],M[12],M[13],M[14],M[15]),S!==C&&e.lineTo(M[16],M[17]),e.bezierCurveTo(M[18],M[19],M[20],M[21],M[22],M[23]),b!==v&&e.lineTo(M[24],M[25]),e.bezierCurveTo(M[26],M[27],M[28],M[29],M[30],M[31])}}e.closePath()}!d&&(c||f)&&(this._setStyles(e,t,r),c&&(e.fill(l.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),f&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var r=new $(this._size).setCenter(0,0),o=this._style,l=t.stroke&&o.hasStroke()&&o.getStrokeWidth();return e&&(r=e._transformBounds(r)),l?r.expand(be._getStrokePadding(l,this._getStrokeMatrix(e,t))):r}},new function(){function e(r,o,l){var c=r._radius;if(!c.isZero())for(var f=r._size.divide(2),d=1;d<=4;d++){var _=new z(d>1&&d<4?-1:1,d>2?-1:1),m=_.multiply(f),w=m.subtract(_.multiply(c)),y=new $(l?m.add(_.multiply(l)):m,w);if(y.contains(o))return{point:w,quadrant:d}}}function t(r,o,l,c){var f=r.divide(o);return(!c||f.isInQuadrant(c))&&f.subtract(f.normalize()).multiply(o).divide(l).length<=1}return{_contains:function r(o){if(this._type==="rectangle"){var l=e(this,o);return l?o.subtract(l.point).divide(this._radius).getLength()<=1:r.base.call(this,o)}else return o.divide(this.size).getLength()<=.5},_hitTestSelf:function r(o,l,c,f){var d=!1,_=this._style,m=l.stroke&&_.hasStroke(),w=l.fill&&_.hasFill();if(m||w){var y=this._type,v=this._radius,C=m?_.getStrokeWidth()/2:0,T=l._tolerancePadding.add(be._getStrokePadding(C,!_.getStrokeScaling()&&f));if(y==="rectangle"){var N=T.multiply(2),k=e(this,o,N);if(k)d=t(o.subtract(k.point),v,T,k.quadrant);else{var b=new $(this._size).setCenter(0,0),S=b.expand(N),x=b.expand(N.negate());d=S._containsPoint(o)&&!x._containsPoint(o)}}else d=t(o,v,T)}return d?new st(m?"stroke":"fill",this):r.base.apply(this,arguments)}}},{statics:new function(){function e(t,r,o,l,c){var f=h.create(Fe.prototype);return f._type=t,f._size=o,f._radius=l,f._initialize(h.getNamed(c),r),f}return{Circle:function(){var t=arguments,r=z.readNamed(t,"center"),o=h.readNamed(t,"radius");return e("circle",r,new ee(o*2),o,t)},Rectangle:function(){var t=arguments,r=$.readNamed(t,"rectangle"),o=ee.min(ee.readNamed(t,"radius"),r.getSize(!0).divide(2));return e("rectangle",r.getCenter(!0),r.getSize(!0),o,t)},Ellipse:function(){var t=arguments,r=Fe._readEllipse(t),o=r.radius;return e("ellipse",r.center,o.multiply(2),o,t)},_readEllipse:function(t){var r,o;if(h.hasNamed(t,"radius"))r=z.readNamed(t,"center"),o=ee.readNamed(t,"radius");else{var l=$.readNamed(t,"rectangle");r=l.getCenter(!0),o=l.getSize(!0).divide(2)}return{center:r,radius:o}}}}}),Ve=B.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,r){if(!this._initialize(t,r!==a&&z.read(arguments))){var o,l=typeof t,c=l==="string"?g.getElementById(t):l==="object"?t:null;if(c&&c!==B.NO_INSERT){if(c.getContext||c.naturalHeight!=null)o=c;else if(c){var f=ee.read(arguments);f.isZero()||(o=mt.getCanvas(f))}}o?this.setImage(o):this.setSource(t)}this._size||(this._size=new ee,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,r=e._canvas;if(t)this._setImage(t);else if(r){var o=mt.getCanvas(e._size);o.getContext("2d").drawImage(r,0,0),this._setImage(o)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new ce(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var r=ee.read(arguments);if(r.equals(this._size))t&&this.clear();else if(r.width>0&&r.height>0){var o=!t&&this.getElement();this._setImage(mt.getCanvas(r)),o&&this.getContext(!0).drawImage(o,0,0,r.width,r.height)}else this._canvas&&mt.release(this._canvas),this._size=r.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||e.width===0&&e.height===0},getResolution:function(){var e=this._matrix,t=new z(0,0).transform(e),r=new z(1,0).transform(e).subtract(t),o=new z(0,1).transform(e).subtract(t);return new ee(72/r.getLength(),72/o.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function r(o){var l=t.getView(),c=o&&o.type||"load";l&&t.responds(c)&&(s=l._scope,t.emit(c,new Mi(o)))}this._setImage(e),this._loaded?setTimeout(r,0):e&&nt.add(e,{load:function(o){t._setImage(e),r(o)},error:r})},_setImage:function(e){this._canvas&&mt.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new ee(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=mt.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){mt.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new i.Image,r=this._crossOrigin;r&&(t.crossOrigin=r),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing=typeof e=="string"?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=$.read(arguments),t=mt.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=$.read(arguments),t=new Ve(B.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var r=this.getCanvas();return r?r.toDataURL.apply(r,arguments):null},drawImage:function(e){var t=z.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,r;if(e?e instanceof Ae?(r=e,t=e.getBounds()):typeof e=="object"&&("width"in e?t=new $(e):"x"in e&&(t=new $(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var o=32,l=Math.min(t.width,o),c=Math.min(t.height,o),f=Ve._sampleContext;f?f.clearRect(0,0,o+1,o+1):f=Ve._sampleContext=mt.getContext(new ee(o)),f.save();var d=new te().scale(l/t.width,c/t.height).translate(-t.x,-t.y);d.applyToContext(f),r&&r.draw(f,new h({clip:!0,matrices:[d]})),this._matrix.applyToContext(f);var _=this.getElement(),m=this._size;_&&f.drawImage(_,-m.width/2,-m.height/2),f.restore();for(var w=f.getImageData(.5,.5,Math.ceil(l),Math.ceil(c)).data,y=[0,0,0],v=0,C=0,T=w.length;C<T;C+=4){var N=w[C+3];v+=N,N/=255,y[0]+=w[C]*N,y[1]+=w[C+1]*N,y[2]+=w[C+2]*N}for(var C=0;C<3;C++)y[C]/=v;return v?Qe.read(y):null},getPixel:function(){var e=z.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new Qe("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=z.read(e),r=Qe.read(e),o=r._convert("rgb"),l=r._alpha,c=this.getContext(!0),f=c.createImageData(1,1),d=f.data;d[0]=o[0]*255,d[1]=o[1]*255,d[2]=o[2]*255,d[3]=l!=null?l*255:255,c.putImageData(f,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=ee.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=$.read(arguments);return e.isEmpty()&&(e=new $(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},setImageData:function(e){var t=z.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},_getBounds:function(e,t){var r=new $(this._size).setCenter(0,0);return e?e._transformBounds(r):r},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new st("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,r){var o=this.getElement();if(o&&o.width>0&&o.height>0){e.globalAlpha=X.clamp(this._opacity,0,1),this._setStyles(e,t,r);var l=this._smoothing,c=l==="off";je.setPrefixed(e,c?"imageSmoothingEnabled":"imageSmoothingQuality",c?!1:l),e.drawImage(o,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),ot=B.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,r){this._initialize(t,r!==a&&z.read(arguments,1))||this.setDefinition(t instanceof Ke?t:new Ke(t))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var r=this._definition._item;return r._getCachedBounds(r._matrix.prepended(e),t)},_hitTestSelf:function(e,t,r){var o=t.extend({all:!1}),l=this._definition._item._hitTest(e,o,r);return l&&(l.item=this),l},_draw:function(e,t){this._definition._item.draw(e,t)}}),Ke=h.extend({_class:"SymbolDefinition",initialize:function(t,r){this._id=ie.get(),this.project=s.project,t&&this.setItem(t,r)},_serialize:function(e,t){return t.add(this,function(){return h.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){e&8&&B._clearBoundsCache(this),e&1&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new z),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new ot(this,e)},clone:function(){return new Ke(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),st=h.extend({_class:"HitResult",initialize:function(t,r,o){this.type=t,this.item=r,o&&this.inject(o)},statics:{getOptions:function(e){var t=e&&h.read(e);return new h({type:null,tolerance:s.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),Ee=h.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,r,o,l,c,f){var d=arguments.length,_,m,w,y;d>0&&(t==null||typeof t=="object"?d===1&&t&&"point"in t?(_=t.point,m=t.handleIn,w=t.handleOut,y=t.selection):(_=t,m=r,w=o,y=l):(_=[t,r],m=o!==a?[o,l]:null,w=c!==a?[c,f]:null)),new bt(_,this,"_point"),new bt(m,this,"_handleIn"),new bt(w,this,"_handleOut"),y&&this.setSelection(y)},_serialize:function(e,t){var r=this._point,o=this._selection,l=o||this.hasHandles()?[r,this._handleIn,this._handleOut]:r;return o&&l.push(o),h.serialize(l,e,!0,t)},_changed:function(e){var t=this._path;if(!!t){var r=t._curves,o=this._index,l;r&&((!e||e===this._point||e===this._handleIn)&&(l=o>0?r[o-1]:t._closed?r[r.length-1]:null)&&l._changed(),(!e||e===this._point||e===this._handleOut)&&(l=r[o])&&l._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(z.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(z.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(z.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,r=this._path;this._selection=e=e||0,r&&e!==t&&(r._updateSelection(this,t,e),r._changed(257))},_changeSelection:function(e,t){var r=this._selection;this.setSelection(t?r|e:r&~e)},isSelected:function(){return!!(this._selection&7)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==a?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new lt(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,r){var o=e||{},l=o.type,c=o.factor,f=this.getPrevious(),d=this.getNext(),_=(f||this)._point,m=this._point,w=(d||this)._point,y=_.getDistance(m),v=m.getDistance(w);if(!l||l==="catmull-rom"){var C=c===a?.5:c,T=Math.pow(y,C),N=T*T,k=Math.pow(v,C),b=k*k;if(!t&&f){var S=2*b+3*k*T+N,x=3*k*(k+T);this.setHandleIn(x!==0?new z((b*_._x+S*m._x-N*w._x)/x-m._x,(b*_._y+S*m._y-N*w._y)/x-m._y):new z)}if(!r&&d){var S=2*N+3*T*k+b,x=3*T*(T+k);this.setHandleOut(x!==0?new z((N*w._x+S*m._x-b*_._x)/x-m._x,(N*w._y+S*m._y-b*_._y)/x-m._y):new z)}}else if(l==="geometric"){if(f&&d){var E=_.subtract(w),I=c===a?.4:c,M=I*y/(y+v);t||this.setHandleIn(E.multiply(M)),r||this.setHandleOut(E.multiply(M-I))}}else throw new Error("Smoothing method '"+l+"' not supported.")},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,r=e.clone();e.set(t),t.set(r)},reversed:function(){return new Ee(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Ee(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,r){var o=1-r,l=r,c=e._point,f=t._point,d=e._handleIn,_=t._handleIn,m=t._handleOut,w=e._handleOut;this._point._set(o*c._x+l*f._x,o*c._y+l*f._y,!0),this._handleIn._set(o*d._x+l*_._x,o*d._y+l*_._y,!0),this._handleOut._set(o*w._x+l*m._x,o*w._y+l*m._y,!0),this._changed()},_transformCoordinates:function(e,t,r){var o=this._point,l=!r||!this._handleIn.isZero()?this._handleIn:null,c=!r||!this._handleOut.isZero()?this._handleOut:null,f=o._x,d=o._y,_=2;return t[0]=f,t[1]=d,l&&(t[_++]=l._x+f,t[_++]=l._y+d),c&&(t[_++]=c._x+f,t[_++]=c._y+d),e&&(e._transformCoordinates(t,t,_/2),f=t[0],d=t[1],r?(o._x=f,o._y=d,_=2,l&&(l._x=t[_++]-f,l._y=t[_++]-d),c&&(c._x=t[_++]-f,c._y=t[_++]-d)):(l||(t[_++]=f,t[_++]=d),c||(t[_++]=f,t[_++]=d))),t}}),bt=z.extend({initialize:function(t,r,o){var l,c,f;if(!t)l=c=0;else if((l=t[0])!==a)c=t[1];else{var d=t;(l=d.x)===a&&(d=z.read(arguments),l=d.x),c=d.y,f=d.selected}this._x=l,this._y=c,this._owner=r,r[o]=this,f&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=X.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),le=h.extend({_class:"Curve",beans:!0,initialize:function(t,r,o,l,c,f,d,_){var m=arguments.length,w,y,v,C,T,N;m===3?(this._path=t,w=r,y=o):m?m===1?"segment1"in t?(w=new Ee(t.segment1),y=new Ee(t.segment2)):"point1"in t?(v=t.point1,T=t.handle1,N=t.handle2,C=t.point2):Array.isArray(t)&&(v=[t[0],t[1]],C=[t[6],t[7]],T=[t[2]-t[0],t[3]-t[1]],N=[t[4]-t[6],t[5]-t[7]]):m===2?(w=new Ee(t),y=new Ee(r)):m===4?(v=t,T=r,N=o,C=l):m===8&&(v=[t,r],C=[d,_],T=[o-t,l-r],N=[c-d,f-_]):(w=new Ee,y=new Ee),this._segment1=w||new Ee(v,null,T),this._segment2=y||new Ee(C,N,null)},_serialize:function(e,t){return h.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=a},clone:function(){return new le(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return le.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,r=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(r)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(z.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(z.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(z.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(z.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return le.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],r=0;r<8;r+=2)t.push(new z(e[r],e[r+1]));return t}},{getLength:function(){return this._length==null&&(this._length=le.getLength(this.getValues(),0,1)),this._length},getArea:function(){return le.getArea(this.getValues())},getLine:function(){return new pe(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new le(le.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return le.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var r=1e-8,o=1-r,l=null;if(e>=r&&e<=o){var c=le.subdivide(this.getValues(),e),f=c[0],d=c[1],_=t||this.hasHandles(),m=this._segment1,w=this._segment2,y=this._path;_&&(m._handleOut._set(f[2]-f[0],f[3]-f[1]),w._handleIn._set(d[4]-d[6],d[5]-d[7]));var v=f[6],C=f[7],T=new Ee(new z(v,C),_&&new z(f[4]-v,f[5]-C),_&&new z(d[2]-v,d[3]-C));y?(y.insert(m._index+1,T),l=this.getNext()):(this._segment2=T,this._changed(),l=new le(T,w))}return l},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===a?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===a?.5:t?e:this.getTimeAt(e))},reversed:function(){return new le(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,r,o){var l=e._point,c=e._handleOut,f=t._handleIn,d=t._point,_=l.x,m=l.y,w=d.x,y=d.y,v=o?[_,m,_,m,w,y,w,y]:[_,m,_+c._x,m+c._y,w+f._x,y+f._y,w,y];return r&&r._transformCoordinates(v,v,4),v},subdivide:function(e,t){var r=e[0],o=e[1],l=e[2],c=e[3],f=e[4],d=e[5],_=e[6],m=e[7];t===a&&(t=.5);var w=1-t,y=w*r+t*l,v=w*o+t*c,C=w*l+t*f,T=w*c+t*d,N=w*f+t*_,k=w*d+t*m,b=w*y+t*C,S=w*v+t*T,x=w*C+t*N,E=w*T+t*k,I=w*b+t*x,M=w*S+t*E;return[[r,o,y,v,b,S,I,M],[I,M,x,E,N,k,_,m]]},getMonoCurves:function(e,t){var r=[],o=t?0:1,l=e[o+0],c=e[o+2],f=e[o+4],d=e[o+6];if(l>=c==c>=f&&c>=f==f>=d||le.isStraight(e))r.push(e);else{var _=3*(c-f)-l+d,m=2*(l+f)-4*c,w=c-l,y=1e-8,v=1-y,C=[],T=X.solveQuadratic(_,m,w,C,y,v);if(!T)r.push(e);else{C.sort();var N=C[0],k=le.subdivide(e,N);r.push(k[0]),T>1&&(N=(C[1]-N)/(1-N),k=le.subdivide(k[1],N),r.push(k[0])),r.push(k[1])}}return r},solveCubic:function(e,t,r,o,l,c){var f=e[t],d=e[t+2],_=e[t+4],m=e[t+6],w=0;if(!(f<r&&m<r&&d<r&&_<r||f>r&&m>r&&d>r&&_>r)){var y=3*(d-f),v=3*(_-d)-y,C=m-f-y-v;w=X.solveCubic(C,v,y,f-r,o,l,c)}return w},getTimeOf:function(e,t){var r=new z(e[0],e[1]),o=new z(e[6],e[7]),l=1e-12,c=1e-7,f=t.isClose(r,l)?0:t.isClose(o,l)?1:null;if(f===null)for(var d=[t.x,t.y],_=[],m=0;m<2;m++)for(var w=le.solveCubic(e,m,d[m],_,0,1),y=0;y<w;y++){var v=_[y];if(t.isClose(le.getPoint(e,v),c))return v}return t.isClose(r,c)?0:t.isClose(o,c)?1:null},getNearestTime:function(e,t){if(le.isStraight(e)){var r=e[0],o=e[1],l=e[6],c=e[7],f=l-r,d=c-o,_=f*f+d*d;if(_===0)return 0;var m=((t.x-r)*f+(t.y-o)*d)/_;return m<1e-12?0:m>.999999999999?1:le.getTimeOf(e,new z(r+m*f,o+m*d))}var w=100,y=1/0,v=0;function C(k){if(k>=0&&k<=1){var b=t.getDistance(le.getPoint(e,k),!0);if(b<y)return y=b,v=k,!0}}for(var T=0;T<=w;T++)C(T/w);for(var N=1/(w*2);N>1e-8;)!C(v-N)&&!C(v+N)&&(N/=2);return v},getPart:function(e,t,r){var o=t>r;if(o){var l=t;t=r,r=l}return t>0&&(e=le.subdivide(e,t)[1]),r<1&&(e=le.subdivide(e,(r-t)/(1-t))[0]),o?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var r=e[0],o=e[1],l=e[2],c=e[3],f=e[4],d=e[5],_=e[6],m=e[7],w=3*l-2*r-_,y=3*c-2*o-m,v=3*f-2*_-r,C=3*d-2*m-o;return Math.max(w*w,v*v)+Math.max(y*y,C*C)<=16*t*t},getArea:function(e){var t=e[0],r=e[1],o=e[2],l=e[3],c=e[4],f=e[5],d=e[6],_=e[7];return 3*((_-r)*(o+c)-(d-t)*(l+f)+l*(t-c)-o*(r-f)+_*(c+t/3)-d*(f+r/3))/20},getBounds:function(e){for(var t=e.slice(0,2),r=t.slice(),o=[0,0],l=0;l<2;l++)le._addBounds(e[l],e[l+2],e[l+4],e[l+6],l,0,t,r,o);return new $(t[0],t[1],r[0]-t[0],r[1]-t[1])},_addBounds:function(e,t,r,o,l,c,f,d,_){function m(I,M){var L=I-M,R=I+M;L<f[l]&&(f[l]=L),R>d[l]&&(d[l]=R)}c/=2;var w=f[l]+c,y=d[l]-c;if(e<w||t<w||r<w||o<w||e>y||t>y||r>y||o>y)if(t<e!=t<o&&r<e!=r<o)m(e,0),m(o,0);else{var v=3*(t-r)-e+o,C=2*(e+r)-4*t,T=t-e,N=X.solveQuadratic(v,C,T,_),k=1e-8,b=1-k;m(o,0);for(var S=0;S<N;S++){var x=_[S],E=1-x;k<=x&&x<=b&&m(E*E*E*e+3*E*E*x*t+3*E*x*x*r+x*x*x*o,c)}}}}},h.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=be[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),h.each({isStraight:function(e,t,r,o){if(t.isZero()&&r.isZero())return!0;var l=o.subtract(e);if(l.isZero())return!1;if(l.isCollinear(t)&&l.isCollinear(r)){var c=new pe(e,o),f=1e-7;if(c.getDistance(e.add(t))<f&&c.getDistance(o.add(r))<f){var d=l.dot(l),_=l.dot(t)/d,m=l.dot(r)/d;return _>=0&&_<=1&&m<=0&&m>=-1}}return!1},isLinear:function(e,t,r,o){var l=o.subtract(e).divide(3);return t.equals(l)&&r.negate().equals(l)}},function(e,t){this[t]=function(r){var o=this._segment1,l=this._segment2;return e(o._point,o._handleOut,l._handleIn,l._point,r)},this.statics[t]=function(r,o){var l=r[0],c=r[1],f=r[6],d=r[7];return e(new z(l,c),new z(r[2]-l,r[3]-c),new z(r[4]-f,r[5]-d),new z(f,d),o)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return e!=null&&e>=0&&e<=1?new lt(this,e):null},getTimeAt:function(e,t){return le.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=z.read(arguments);return e.isZero()?[]:le.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(z.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return le.getTimeOf(this.getValues(),z.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=z.read(arguments),t=this.getValues(),r=le.getNearestTime(t,e),o=le.getPoint(t,r);return new lt(this,r,o,null,e.getDistance(o))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return h.each(e,function(t){this[t+"At"]=function(r,o){var l=this.getValues();return le[t](l,o?r:le.getTimeAt(l,r))},this[t+"AtTime"]=function(r){return le[t](this.getValues(),r)}},{statics:{_evaluateMethods:e}})},new function(){function e(o){var l=o[0],c=o[1],f=o[2],d=o[3],_=o[4],m=o[5],w=o[6],y=o[7],v=9*(f-_)+3*(w-l),C=6*(l+_)-12*f,T=3*(f-l),N=9*(d-m)+3*(y-c),k=6*(c+m)-12*d,b=3*(d-c);return function(S){var x=(v*S+C)*S+T,E=(N*S+k)*S+b;return Math.sqrt(x*x+E*E)}}function t(o,l){return Math.max(2,Math.min(16,Math.ceil(Math.abs(l-o)*32)))}function r(o,l,c,f){if(l==null||l<0||l>1)return null;var d=o[0],_=o[1],m=o[2],w=o[3],y=o[4],v=o[5],C=o[6],T=o[7],N=X.isZero;N(m-d)&&N(w-_)&&(m=d,w=_),N(y-C)&&N(v-T)&&(y=C,v=T);var k=3*(m-d),b=3*(y-m)-k,S=C-d-k-b,x=3*(w-_),E=3*(v-w)-x,I=T-_-x-E,M,L;if(c===0)M=l===0?d:l===1?C:((S*l+b)*l+k)*l+d,L=l===0?_:l===1?T:((I*l+E)*l+x)*l+_;else{var R=1e-8,F=1-R;if(l<R?(M=k,L=x):l>F?(M=3*(C-y),L=3*(T-v)):(M=(3*S*l+2*b)*l+k,L=(3*I*l+2*E)*l+x),f){M===0&&L===0&&(l<R||l>F)&&(M=y-m,L=v-w);var H=Math.sqrt(M*M+L*L);H&&(M/=H,L/=H)}if(c===3){var y=6*S*l+2*b,v=6*I*l+2*E,G=Math.pow(M*M+L*L,3/2);M=G!==0?(M*v-L*y)/G:0,L=0}}return c===2?new z(L,-M):new z(M,L)}return{statics:{classify:function(o){var l=o[0],c=o[1],f=o[2],d=o[3],_=o[4],m=o[5],w=o[6],y=o[7],v=l*(y-m)+c*(_-w)+w*m-y*_,C=f*(c-y)+d*(w-l)+l*y-c*w,T=_*(d-c)+m*(l-f)+f*c-d*l,N=3*T,k=N-C,b=k-C+v,S=Math.sqrt(b*b+k*k+N*N),x=S!==0?1/S:0,E=X.isZero,I="serpentine";b*=x,k*=x,N*=x;function M(H,G,V){var q=G!==a,Q=q&&G>0&&G<1,j=q&&V>0&&V<1;return q&&(!(Q||j)||H==="loop"&&!(Q&&j))&&(H="arch",Q=j=!1),{type:H,roots:Q||j?Q&&j?G<V?[G,V]:[V,G]:[Q?G:V]:null}}if(E(b))return E(k)?M(E(N)?"line":"quadratic"):M(I,N/(3*k));var L=3*k*k-4*b*N;if(E(L))return M("cusp",k/(2*b));var R=L>0?Math.sqrt(L/3):Math.sqrt(-L),F=2*b;return M(L>0?I:"loop",(k+R)/F,(k-R)/F)},getLength:function(o,l,c,f){if(l===a&&(l=0),c===a&&(c=1),le.isStraight(o)){var d=o;c<1&&(d=le.subdivide(d,c)[0],l/=c),l>0&&(d=le.subdivide(d,l)[1]);var _=d[6]-d[0],m=d[7]-d[1];return Math.sqrt(_*_+m*m)}return X.integrate(f||e(o),l,c,t(l,c))},getTimeAt:function(o,l,c){if(c===a&&(c=l<0?1:0),l===0)return c;var f=Math.abs,d=1e-12,_=l>0,m=_?c:0,w=_?1:c,y=e(o),v=le.getLength(o,m,w,y),C=f(l)-v;if(f(C)<d)return _?w:m;if(C>d)return null;var T=l/v,N=0;function k(b){return N+=X.integrate(y,c,b,t(c,b)),c=b,N-l}return X.findRoot(k,y,c+T,m,w,32,1e-12)},getPoint:function(o,l){return r(o,l,0,!1)},getTangent:function(o,l){return r(o,l,1,!0)},getWeightedTangent:function(o,l){return r(o,l,1,!1)},getNormal:function(o,l){return r(o,l,2,!0)},getWeightedNormal:function(o,l){return r(o,l,2,!1)},getCurvature:function(o,l){return r(o,l,3,!1).x},getPeaks:function(o){var l=o[0],c=o[1],f=o[2],d=o[3],_=o[4],m=o[5],w=o[6],y=o[7],v=-l+3*f-3*_+w,C=3*l-6*f+3*_,T=-3*l+3*f,N=-c+3*d-3*m+y,k=3*c-6*d+3*m,b=-3*c+3*d,S=1e-8,x=1-S,E=[];return X.solveCubic(9*(v*v+N*N),9*(v*C+k*N),2*(C*C+k*k)+3*(T*v+b*N),T*C+k*b,E,S,x),E.sort()}}}},new function(){function e(C,T,N,k,b,S,x){var E=!x&&N.getPrevious()===b,I=!x&&N!==b&&N.getNext()===b,M=1e-8,L=1-M;if(k!==null&&k>=(E?M:0)&&k<=(I?L:1)&&S!==null&&S>=(I?M:0)&&S<=(E?L:1)){var R=new lt(N,k,null,x),F=new lt(b,S,null,x);R._intersection=F,F._intersection=R,(!T||T(R))&&lt.insert(C,R,!0)}}function t(C,T,N,k,b,S,x,E,I,M,L,R,F){if(++I>=4096||++E>=40)return I;var H=1e-9,G=T[0],V=T[1],q=T[6],Q=T[7],j=pe.getSignedDistance,Y=j(G,V,q,Q,T[2],T[3]),re=j(G,V,q,Q,T[4],T[5]),oe=Y*re>0?3/4:4/9,de=oe*Math.min(0,Y,re),ye=oe*Math.max(0,Y,re),xe=j(G,V,q,Q,C[0],C[1]),he=j(G,V,q,Q,C[2],C[3]),fe=j(G,V,q,Q,C[4],C[5]),Se=j(G,V,q,Q,C[6],C[7]),Ce=r(xe,he,fe,Se),Te=Ce[0],Oe=Ce[1],me,Me;if(Y===0&&re===0&&xe===0&&he===0&&fe===0&&Se===0||(me=o(Te,Oe,de,ye))==null||(Me=o(Te.reverse(),Oe.reverse(),de,ye))==null)return I;var ze=M+(L-M)*me,He=M+(L-M)*Me;if(Math.max(F-R,He-ze)<H){var ht=(ze+He)/2,ft=(R+F)/2;e(b,S,x?k:N,x?ft:ht,x?N:k,x?ht:ft)}else{C=le.getPart(C,me,Me);var ct=F-R;if(Me-me>.8)if(He-ze>ct){var Xe=le.subdivide(C,.5),ht=(ze+He)/2;I=t(T,Xe[0],k,N,b,S,!x,E,I,R,F,ze,ht),I=t(T,Xe[1],k,N,b,S,!x,E,I,R,F,ht,He)}else{var Xe=le.subdivide(T,.5),ft=(R+F)/2;I=t(Xe[0],C,k,N,b,S,!x,E,I,R,ft,ze,He),I=t(Xe[1],C,k,N,b,S,!x,E,I,ft,F,ze,He)}else ct===0||ct>=H?I=t(T,C,k,N,b,S,!x,E,I,R,F,ze,He):I=t(C,T,N,k,b,S,x,E,I,ze,He,R,F)}return I}function r(C,T,N,k){var b=[0,C],S=[1/3,T],x=[2/3,N],E=[1,k],I=T-(2*C+k)/3,M=N-(C+2*k)/3,L;if(I*M<0)L=[[b,S,E],[b,x,E]];else{var R=I/M;L=[R>=2?[b,S,E]:R<=.5?[b,x,E]:[b,S,x,E],[b,E]]}return(I||M)<0?L.reverse():L}function o(C,T,N,k){return C[0][1]<N?l(C,!0,N):T[0][1]>k?l(T,!1,k):C[0][0]}function l(C,T,N){for(var k=C[0][0],b=C[0][1],S=1,x=C.length;S<x;S++){var E=C[S][0],I=C[S][1];if(T?I>=N:I<=N)return I===N?E:k+(N-b)*(E-k)/(I-b);k=E,b=I}return null}function c(C,T,N,k,b){var S=X.isZero;if(S(k)&&S(b)){var x=le.getTimeOf(C,new z(T,N));return x===null?[]:[x]}for(var E=Math.atan2(-b,k),I=Math.sin(E),M=Math.cos(E),L=[],R=[],F=0;F<8;F+=2){var H=C[F]-T,G=C[F+1]-N;L.push(H*M-G*I,H*I+G*M)}return le.solveCubic(L,1,0,R,0,1),R}function f(C,T,N,k,b,S,x){for(var E=T[0],I=T[1],M=T[6],L=T[7],R=c(C,E,I,M-E,L-I),F=0,H=R.length;F<H;F++){var G=R[F],V=le.getPoint(C,G),q=le.getTimeOf(T,V);q!==null&&e(b,S,x?k:N,x?q:G,x?N:k,x?G:q)}}function d(C,T,N,k,b,S){var x=pe.intersect(C[0],C[1],C[6],C[7],T[0],T[1],T[6],T[7]);x&&e(b,S,N,le.getTimeOf(C,x),k,le.getTimeOf(T,x))}function _(C,T,N,k,b,S){var x=1e-12,E=Math.min,I=Math.max;if(I(C[0],C[2],C[4],C[6])+x>E(T[0],T[2],T[4],T[6])&&E(C[0],C[2],C[4],C[6])-x<I(T[0],T[2],T[4],T[6])&&I(C[1],C[3],C[5],C[7])+x>E(T[1],T[3],T[5],T[7])&&E(C[1],C[3],C[5],C[7])-x<I(T[1],T[3],T[5],T[7])){var M=y(C,T);if(M)for(var L=0;L<2;L++){var R=M[L];e(b,S,N,R[0],k,R[1],!0)}else{var F=le.isStraight(C),H=le.isStraight(T),G=F&&H,V=F&&!H,q=b.length;if((G?d:F||H?f:t)(V?T:C,V?C:T,V?k:N,V?N:k,b,S,V,0,0,0,1,0,1),!G||b.length===q)for(var L=0;L<4;L++){var Q=L>>1,j=L&1,Y=Q*6,re=j*6,oe=new z(C[Y],C[Y+1]),de=new z(T[re],T[re+1]);oe.isClose(de,x)&&e(b,S,N,Q,k,j)}}}return b}function m(C,T,N,k){var b=le.classify(C);if(b.type==="loop"){var S=b.roots;e(N,k,T,S[0],T,S[1])}return N}function w(C,T,N,k,b,S){var x=1e-7,E=!T;E&&(T=C);for(var I=C.length,M=T.length,L=new Array(I),R=E?L:new Array(M),F=[],H=0;H<I;H++)L[H]=C[H].getValues(k);if(!E)for(var H=0;H<M;H++)R[H]=T[H].getValues(b);for(var G=W.findCurveBoundsCollisions(L,R,x),V=0;V<I;V++){var q=C[V],Q=L[V];E&&m(Q,q,F,N);var j=G[V];if(j)for(var Y=0;Y<j.length;Y++){if(S&&F.length)return F;var re=j[Y];if(!E||re>V){var oe=T[re],de=R[re];_(Q,de,q,oe,F,N)}}}return F}function y(C,T){function N(Se){var Ce=Se[6]-Se[0],Te=Se[7]-Se[1];return Ce*Ce+Te*Te}var k=Math.abs,b=pe.getDistance,S=1e-8,x=1e-7,E=le.isStraight(C),I=le.isStraight(T),M=E&&I,L=N(C)<N(T),R=L?T:C,F=L?C:T,H=R[0],G=R[1],V=R[6]-H,q=R[7]-G;if(b(H,G,V,q,F[0],F[1],!0)<x&&b(H,G,V,q,F[6],F[7],!0)<x)!M&&b(H,G,V,q,R[2],R[3],!0)<x&&b(H,G,V,q,R[4],R[5],!0)<x&&b(H,G,V,q,F[2],F[3],!0)<x&&b(H,G,V,q,F[4],F[5],!0)<x&&(E=I=M=!0);else if(M)return null;if(E^I)return null;for(var Q=[C,T],j=[],Y=0;Y<4&&j.length<2;Y++){var re=Y&1,oe=re^1,de=Y>>1,ye=le.getTimeOf(Q[re],new z(Q[oe][de?6:0],Q[oe][de?7:1]));if(ye!=null){var xe=re?[de,ye]:[ye,de];(!j.length||k(xe[0]-j[0][0])>S&&k(xe[1]-j[0][1])>S)&&j.push(xe)}if(Y>2&&!j.length)break}if(j.length!==2)j=null;else if(!M){var he=le.getPart(C,j[0][0],j[1][0]),fe=le.getPart(T,j[0][1],j[1][1]);(k(fe[2]-he[2])>x||k(fe[3]-he[3])>x||k(fe[4]-he[4])>x||k(fe[5]-he[5])>x)&&(j=null)}return j}function v(C,T){var N=C[0],k=C[1],b=C[2],S=C[3],x=C[4],E=C[5],I=C[6],M=C[7],L=T.normalize(),R=L.x,F=L.y,H=3*I-9*x+9*b-3*N,G=3*M-9*E+9*S-3*k,V=6*x-12*b+6*N,q=6*E-12*S+6*k,Q=3*b-3*N,j=3*S-3*k,Y=2*H*F-2*G*R,re=[];if(Math.abs(Y)<X.CURVETIME_EPSILON){var oe=H*j-G*Q,Y=H*q-G*V;if(Y!=0){var de=-oe/Y;de>=0&&de<=1&&re.push(de)}}else{var ye=(V*V-4*H*Q)*F*F+(-2*V*q+4*G*Q+4*H*j)*R*F+(q*q-4*G*j)*R*R,xe=V*F-q*R;if(ye>=0&&Y!=0){var he=Math.sqrt(ye),fe=-(xe+he)/Y,Se=(-xe+he)/Y;fe>=0&&fe<=1&&re.push(fe),Se>=0&&Se<=1&&re.push(Se)}}return re}return{getIntersections:function(C){var T=this.getValues(),N=C&&C!==this&&C.getValues();return N?_(T,N,this,C,[]):m(T,this,[])},statics:{getOverlaps:y,getIntersections:w,getCurveLineIntersections:c,getTimesWithTangent:v}}}),lt=h.extend({_class:"CurveLocation",initialize:function(t,r,o,l,c){if(r>=.99999999){var f=t.getNext();f&&(r=0,t=f)}this._setCurve(t),this._time=r,this._point=o||t.getPointAtTime(r),this._overlap=l,this._distance=c,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),r=this.getTime();r===0?e=t._segment1:r===1?e=t._segment2:r!=null&&(e=t.getPartLength(0,r)<t.getPartLength(r,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function r(o){var l=o&&o.getCurve();if(l&&(t._time=l.getTimeOf(t._point))!=null)return t._setCurve(l),l}return this._curve||r(this._segment)||r(this._segment1)||r(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&t==null?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(e==null){e=0;var t=this.getPath(),r=this.getIndex();if(t&&r!=null)for(var o=t.getCurves(),l=0;l<r;l++)e+=o[l].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(e==null){var t=this.getCurve(),r=this.getTime();this._curveOffset=e=r!=null&&t&&t.getPartLength(0,r)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,r=e&&e.splitAtTime(this.getTime());return r&&this._setSegment(t.getLastSegment()),r},equals:function(e,t){var r=this===e;if(!r&&e instanceof lt){var o=this.getCurve(),l=e.getCurve(),c=o._path,f=l._path;if(c===f){var d=Math.abs,_=1e-7,m=d(this.getOffset()-e.getOffset()),w=!t&&this._intersection,y=!t&&e._intersection;r=(m<_||c&&d(c.getLength()-m)<_)&&(!w&&!y||w&&y&&w.equals(y,!0))}}return r},toString:function(){var e=[],t=this.getPoint(),r=K.instance;t&&e.push("point: "+t);var o=this.getIndex();o!=null&&e.push("index: "+o);var l=this.getTime();return l!=null&&e.push("time: "+r.number(l)),this._distance!=null&&e.push("distance: "+r.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),r=e.getCurve();return!(t.isStraight()&&r.isStraight()&&t.getLine().intersect(r.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),r=e.getTime(),o=1e-8,l=1-o,c=t>=o&&t<=l,f=r>=o&&r<=l;if(c&&f)return!this.isTouching();var d=this.getCurve(),_=d&&t<o?d.getPrevious():d,m=e.getCurve(),w=m&&r<o?m.getPrevious():m;if(t>l&&(d=d.getNext()),r>l&&(m=m.getNext()),!_||!d||!w||!m)return!1;var y=[];function v(R,F){var H=R.getValues(),G=le.classify(H).roots||le.getPeaks(H),V=G.length,q=le.getLength(H,F&&V?G[V-1]:0,!F&&V?G[0]:1);y.push(V?q:q/32)}function C(R,F,H){return F<H?R>F&&R<H:R>F||R<H}c||(v(_,!0),v(d,!1)),f||(v(w,!0),v(m,!1));var T=this.getPoint(),N=Math.min.apply(Math,y),k=c?d.getTangentAtTime(t):d.getPointAt(N).subtract(T),b=c?k.negate():_.getPointAt(-N).subtract(T),S=f?m.getTangentAtTime(r):m.getPointAt(N).subtract(T),x=f?S.negate():w.getPointAt(-N).subtract(T),E=b.getAngle(),I=k.getAngle(),M=x.getAngle(),L=S.getAngle();return!!(c?C(E,M,L)^C(I,M,L)&&C(E,L,M)^C(I,L,M):C(M,E,I)^C(L,E,I)&&C(M,I,E)^C(L,I,E))},hasOverlap:function(){return!!this._overlap}},h.each(le._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var r=this.getCurve(),o=this.getTime();return o!=null&&r&&r[t](o,!0)}},{preserve:!0}),new function(){function e(t,r,o){var l=t.length,c=0,f=l-1;function d(T,N){for(var k=T+N;k>=-1&&k<=l;k+=N){var b=t[(k%l+l)%l];if(!r.getPoint().isClose(b.getPoint(),1e-7))break;if(r.equals(b))return b}return null}for(;c<=f;){var _=c+f>>>1,m=t[_],w;if(o&&(w=r.equals(m)?m:d(_,-1)||d(_,1)))return r._overlap&&(w._overlap=w._intersection._overlap=!0),w;var y=r.getPath(),v=m.getPath(),C=y!==v?y._id-v._id:r.getIndex()+r.getTime()-(m.getIndex()+m.getTime());C<0?f=_-1:c=_+1}return t.splice(c,0,r),r}return{statics:{insert:e,expand:function(t){for(var r=t.slice(),o=t.length-1;o>=0;o--)e(r,t[o]._intersection,!1);return r}}}}),Ae=B.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,r,o;if(h.isPlainObject(e)?(r=e.segments,t=e.pathData):Array.isArray(e)?r=e:typeof e=="string"&&(t=e),r){var l=r[0];o=l&&Array.isArray(l[0])}else t&&(o=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));var c=o?Be:be;return new c(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),r,o=!1,l,c,f=new z,d=new z;function _(x,E){var I=+r[x];return o&&(I+=f[E]),I}function m(x){return new z(_(x,"x"),_(x+1,"y"))}this.clear();for(var w=0,y=t&&t.length;w<y;w++){var v=t[w],C=v[0],T=C.toLowerCase();r=v.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var N=r&&r.length;switch(o=C===T,l==="z"&&!/[mz]/.test(T)&&this.moveTo(f),T){case"m":case"l":for(var k=T==="m",b=0;b<N;b+=2)this[k?"moveTo":"lineTo"](f=m(b)),k&&(d=f,k=!1);c=f;break;case"h":case"v":var S=T==="h"?"x":"y";f=f.clone();for(var b=0;b<N;b++)f[S]=_(b,S),this.lineTo(f);c=f;break;case"c":for(var b=0;b<N;b+=6)this.cubicCurveTo(m(b),c=m(b+2),f=m(b+4));break;case"s":for(var b=0;b<N;b+=4)this.cubicCurveTo(/[cs]/.test(l)?f.multiply(2).subtract(c):f,c=m(b),f=m(b+2)),l=T;break;case"q":for(var b=0;b<N;b+=4)this.quadraticCurveTo(c=m(b),f=m(b+2));break;case"t":for(var b=0;b<N;b+=2)this.quadraticCurveTo(c=/[qt]/.test(l)?f.multiply(2).subtract(c):f,f=m(b)),l=T;break;case"a":for(var b=0;b<N;b+=7)this.arcTo(f=m(b+5),new ee(+r[b],+r[b+1]),+r[b+2],+r[b+4],+r[b+3]);break;case"z":this.closePath(1e-12),f=d;break}l=T}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!(this.getFillRule()==="evenodd"?t.windingL&1||t.windingR&1:t.winding)},getIntersections:function(e,t,r,o){var l=this===e||!e,c=this._matrix._orNullIfIdentity(),f=l?c:(r||e._matrix)._orNullIfIdentity();return l||this.getBounds(c).intersects(e.getBounds(f),1e-12)?le.getIntersections(this.getCurves(),!l&&e.getCurves(),t,c,f,o):[]},getCrossings:function(e){return this.getIntersections(e,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var e=z.read(arguments),t=this.getCurves(),r=1/0,o=null,l=0,c=t.length;l<c;l++){var f=t[l].getNearestLocation(e);f._distance<r&&(r=f._distance,o=f)}return o},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,r){var o=!this._children,l=o?"_segments":"_children",c=e[l],f=t[l],d=this[l];if(!c||!f||c.length!==f.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var _=d.length,m=f.length;if(_<m)for(var w=o?Ee:be,y=_;y<m;y++)this.add(new w);else _>m&&this[o?"removeSegments":"removeChildren"](m,_);for(var y=0;y<m;y++)d[y].interpolate(c[y],f[y],r);o&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var r=this._children||[this],o=e._children?e._children.slice():[e],l=r.length,c=o.length,f=[],d=0;t=!0;for(var _=W.findItemBoundsCollisions(r,o,X.GEOMETRIC_EPSILON),m=l-1;m>=0&&t;m--){var w=r[m];t=!1;var y=_[m];if(y)for(var v=y.length-1;v>=0&&!t;v--)w.compare(o[y[v]])&&(f[y[v]]||(f[y[v]]=!0,d++),t=!0)}t=t&&d===c}return t}}),be=Ae.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var r=arguments,o=Array.isArray(t)?typeof t[0]=="object"?t:r:t&&t.size===a&&(t.x!==a||t.point!==a)?r:null;o&&o.length>0?this.setSegments(o):(this._curves=a,this._segmentSelection=0,!o&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!o&&t)},_equals:function(e){return this._closed===e._closed&&h.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),t&8){if(this._length=this._area=a,t&32)this._version++;else if(this._curves)for(var r=0,o=this._curves.length;r<o;r++)this._curves[r]._changed()}else t&64&&(this._bounds=a)},getStyle:function(){var e=this._parent;return(e instanceof Be?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),r=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=a,r){var o=e[r-1];typeof o=="boolean"&&(this.setClosed(o),r--),this._add(Ee.readList(e,0,{},r))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var r=this._countCurves();e=this._curves=new Array(r);for(var o=0;o<r;o++)e[o]=new le(this,t[o],t[o+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new le(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var r=this._segments,o=r.length,l=new K(t),c=new Array(6),f=!0,d,_,m,w,y,v,C,T,N=[];function k(S,x){if(S._transformCoordinates(e,c),d=c[0],_=c[1],f)N.push("M"+l.pair(d,_)),f=!1;else if(y=c[2],v=c[3],y===d&&v===_&&C===m&&T===w){if(!x){var E=d-m,I=_-w;N.push(E===0?"v"+l.number(I):I===0?"h"+l.number(E):"l"+l.pair(E,I))}}else N.push("c"+l.pair(C-m,T-w)+" "+l.pair(y-m,v-w)+" "+l.pair(d-m,_-w));m=d,w=_,C=c[4],T=c[5]}if(!o)return"";for(var b=0;b<o;b++)k(r[b]);return this._closed&&o>0&&(k(r[0],!0),N.push("z")),N.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,r=new Array(6),o=0,l=t.length;o<l;o++)t[o]._transformCoordinates(e,r,!0);return!0},_add:function(e,f){for(var r=this._segments,o=this._curves,l=e.length,c=f==null,f=c?r.length:f,d=0;d<l;d++){var _=e[d];_._path&&(_=e[d]=_.clone()),_._path=this,_._index=f+d,_._selection&&this._updateSelection(_,0,_._selection)}if(c)h.push(r,e);else{r.splice.apply(r,[f,0].concat(e));for(var d=f+l,m=r.length;d<m;d++)r[d]._index=d}if(o){var w=this._countCurves(),y=f>0&&f+l-1===w?f-1:f,v=y,C=Math.min(y+l,w);e._curves&&(o.splice.apply(o,[y,0].concat(e._curves)),v+=e._curves.length);for(var d=v;d<C;d++)o.splice(d,0,new le(this,null,null));this._adjustCurves(y,C)}return this._changed(41),e},_adjustCurves:function(e,t){for(var r=this._segments,o=this._curves,l,c=e;c<t;c++)l=o[c],l._path=this,l._segment1=r[c],l._segment2=r[c+1]||r[0],l._changed();(l=o[this._closed&&!e?r.length-1:e-1])&&(l._segment2=r[e]||r[0],l._changed()),(l=o[t])&&(l._segment1=r[t],l._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&typeof e!="number"?this._add(Ee.readList(t)):this._add([Ee.read(t)])[0]},insert:function(e,t){var r=arguments;return r.length>2&&typeof t!="number"?this._add(Ee.readList(r,1),e):this._add([Ee.read(r,1)],e)[0]},addSegment:function(){return this._add([Ee.read(arguments)])[0]},insertSegment:function(e){return this._add([Ee.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(Ee.readList(e))},insertSegments:function(e,t){return this._add(Ee.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,r){e=e||0,t=h.pick(t,this._segments.length);var o=this._segments,l=this._curves,c=o.length,f=o.splice(e,t-e),d=f.length;if(!d)return f;for(var _=0;_<d;_++){var m=f[_];m._selection&&this._updateSelection(m,m._selection,0),m._index=m._path=null}for(var _=e,w=o.length;_<w;_++)o[_]._index=_;if(l){for(var y=e>0&&t===c+(this._closed?1:0)?e-1:e,l=l.splice(y,d),_=l.length-1;_>=0;_--)l[_]._path=null;r&&(f._curves=l.slice(1)),this._adjustCurves(y,y)}return this._changed(41),f},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,r=e.length;t<r;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,r=e.length;t<r;t++)e[t].clearHandles()},getLength:function(){if(this._length==null){for(var e=this.getCurves(),t=0,r=0,o=e.length;r<o;r++)t+=e[r].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(e==null){var t=this._segments,r=this._closed;e=0;for(var o=0,l=t.length;o<l;o++){var c=o+1===l;e+=le.getArea(le.getValues(t[o],t[c?0:o+1],null,c&&!r))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===e*7},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){t&1||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,r=t.length,o=e?7:0;this._segmentSelection=o*r;for(var l=0;l<r;l++)t[l]._selection=o},_updateSelection:function(e,t,r){e._selection=r;var o=this._segmentSelection+=r-t;o>0&&this.setSelected(!0)},divideAt:function(e){var t=this.getLocationAt(e),r;return t&&(r=t.getCurve().divideAt(t.getCurveOffset()))?r._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),r=t&&t.index,o=t&&t.time,l=1e-8,c=1-l;o>c&&(r++,o=0);var f=this.getCurves();if(r>=0&&r<f.length){o>=l&&f[r++].divideAtTime(o);var d=this.removeSegments(r,this._segments.length,!0),_;return this._closed?(this.setClosed(!1),_=this):(_=new be(B.NO_INSERT),_.insertAbove(this),_.copyAttributes(this)),_._add(d,0),this.addSegment(d[0]),_}return null},split:function(e,t){var r,o=t===a?e:(r=this.getCurves()[e])&&r.getLocationAtTime(t);return o!=null?this.splitAt(o):null},join:function(e,t){var r=t||0;if(e&&e!==this){var o=e._segments,l=this.getLastSegment(),c=e.getLastSegment();if(!c)return this;l&&l._point.isClose(c._point,r)&&e.reverse();var f=e.getFirstSegment();if(l&&l._point.isClose(f._point,r))l.setHandleOut(f._handleOut),this._add(o.slice(1));else{var d=this.getFirstSegment();d&&d._point.isClose(f._point,r)&&e.reverse(),c=e.getLastSegment(),d&&d._point.isClose(c._point,r)?(d.setHandleIn(c._handleIn),this._add(o.slice(0,o.length-1),0)):this._add(o.slice())}e._closed&&this._add([o[0]]),e.remove()}var _=this.getFirstSegment(),m=this.getLastSegment();return _!==m&&_._point.isClose(m._point,r)&&(_.setHandleIn(m._handleIn),m.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),r=e&&e.simplify,o=r?1e-7:0,l=t.length-1;l>=0;l--){var c=t[l];!c.hasHandles()&&(!c.hasLength(o)||r&&c.isCollinear(c.getNext()))&&c.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var r=this._segments[e],o=r._handleIn;r._handleIn=r._handleOut,r._handleOut=o,r._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new it(this,e||.25,256,!0),r=t.parts,o=r.length,l=[],c=0;c<o;c++)l.push(new Ee(r[c].curve.slice(0,2)));!this._closed&&o>0&&l.push(new Ee(r[o-1].curve.slice(6))),this.setSegments(l)},simplify:function(e){var t=new ut(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,r=e||{},o=r.type||"asymmetric",l=this._segments,c=l.length,f=this._closed;function d(Te,Oe){var me=Te&&Te.index;if(me!=null){var Me=Te.path;if(Me&&Me!==t)throw new Error(Te._class+" "+me+" of "+Me+" is not part of "+t);Oe&&Te instanceof le&&me++}else me=typeof Te=="number"?Te:Oe;return Math.min(me<0&&f?me%c:me<0?me+c:me,c-1)}var _=f&&r.from===a&&r.to===a,m=d(r.from,0),w=d(r.to,c-1);if(m>w)if(f)m-=c;else{var y=m;m=w,w=y}if(/^(?:asymmetric|continuous)$/.test(o)){var v=o==="asymmetric",C=Math.min,T=w-m+1,N=T-1,k=_?C(T,4):1,b=k,S=k,x=[];if(f||(b=C(1,m),S=C(1,c-w-1)),N+=b+S,N<=1)return;for(var E=0,I=m-b;E<=N;E++,I++)x[E]=l[(I<0?I+c:I)%c]._point;for(var M=x[0]._x+2*x[1]._x,L=x[0]._y+2*x[1]._y,R=2,F=N-1,H=[M],G=[L],V=[R],q=[],Q=[],E=1;E<N;E++){var j=E<F,Y=j||v?1:2,re=j?4:v?2:7,oe=j?4:v?3:8,de=j?2:v?0:1,ye=Y/R;R=V[E]=re-ye,M=H[E]=oe*x[E]._x+de*x[E+1]._x-ye*M,L=G[E]=oe*x[E]._y+de*x[E+1]._y-ye*L}q[F]=H[F]/V[F],Q[F]=G[F]/V[F];for(var E=N-2;E>=0;E--)q[E]=(H[E]-q[E+1])/V[E],Q[E]=(G[E]-Q[E+1])/V[E];q[N]=(3*x[N]._x-q[F])/2,Q[N]=(3*x[N]._y-Q[F])/2;for(var E=b,xe=N-S,I=m;E<=xe;E++,I++){var he=l[I<0?I+c:I],fe=he._point,Se=q[E]-fe._x,Ce=Q[E]-fe._y;(_||E<xe)&&he.setHandleOut(Se,Ce),(_||E>b)&&he.setHandleIn(-Se,-Ce)}}else for(var E=m;E<=w;E++)l[E<0?E+c:E].smooth(r,!_&&E===m,!_&&E===w)},toShape:function(e){if(!this._closed)return null;var t=this._segments,r,o,l,c;function f(v,C){var T=t[v],N=T.getNext(),k=t[C],b=k.getNext();return T._handleOut.isZero()&&N._handleIn.isZero()&&k._handleOut.isZero()&&b._handleIn.isZero()&&N._point.subtract(T._point).isCollinear(b._point.subtract(k._point))}function d(v){var C=t[v],T=C.getPrevious(),N=C.getNext();return T._handleOut.isZero()&&C._handleIn.isZero()&&C._handleOut.isZero()&&N._handleIn.isZero()&&C._point.subtract(T._point).isOrthogonal(N._point.subtract(C._point))}function _(v){var C=t[v],T=C.getNext(),N=C._handleOut,k=T._handleIn,b=.5522847498307936;if(N.isOrthogonal(k)){var S=C._point,x=T._point,E=new pe(S,N,!0).intersect(new pe(x,k,!0),!0);return E&&X.isZero(N.getLength()/E.subtract(S).getLength()-b)&&X.isZero(k.getLength()/E.subtract(x).getLength()-b)}return!1}function m(v,C){return t[v]._point.getDistance(t[C]._point)}if(!this.hasHandles()&&t.length===4&&f(0,2)&&f(1,3)&&d(1)?(r=Fe.Rectangle,o=new ee(m(0,3),m(0,1)),c=t[1]._point.add(t[2]._point).divide(2)):t.length===8&&_(0)&&_(2)&&_(4)&&_(6)&&f(1,5)&&f(3,7)?(r=Fe.Rectangle,o=new ee(m(1,6),m(0,3)),l=o.subtract(new ee(m(0,7),m(1,2))).divide(2),c=t[3]._point.add(t[4]._point).divide(2)):t.length===4&&_(0)&&_(1)&&_(2)&&_(3)&&(X.isZero(m(0,2)-m(1,3))?(r=Fe.Circle,l=m(0,2)/2):(r=Fe.Ellipse,l=new ee(m(2,0)/2,m(3,1)/2)),c=t[1]._point),r){var w=this.getPosition(!0),y=new r({center:w,size:o,radius:l,insert:!1});return y.copyAttributes(this,!0),y._matrix.prepend(this._matrix),y.rotate(c.subtract(w).getAngle()+90),(e===a||e)&&y.insertAbove(this),y}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof Be)return e.base.call(this,t);var r=this.getCurves(),o=t.getCurves(),l=r.length,c=o.length;if(!l||!c)return l==c;for(var f=r[0].getValues(),d=[],_=0,m,w=0,y,v=0;v<c;v++){var k=o[v].getValues();d.push(k);var C=le.getOverlaps(f,k);if(C){m=!v&&C[0][0]>0?c-1:v,y=C[0][1];break}}for(var T=Math.abs,N=1e-8,k=d[m],b;f&&k;){var C=le.getOverlaps(f,k);if(C){var S=C[0][0];if(T(S-w)<N){w=C[1][0],w===1&&(f=++_<l?r[_].getValues():null,w=0);var x=C[0][1];if(T(x-y)<N){if(b||(b=[m,x]),y=C[1][1],y===1&&(++m>=c&&(m=0),k=d[m]||o[m].getValues(),y=0),!f)return b[0]===m&&b[1]===y;continue}}}break}return!1},_hitTestSelf:function(e,t,r,o){var l=this,c=this.getStyle(),f=this._segments,d=f.length,_=this._closed,m=t._tolerancePadding,w=m,y,v,C,T,N,k,b=t.stroke&&c.hasStroke(),S=t.fill&&c.hasFill(),x=t.curves,E=b?c.getStrokeWidth()/2:S&&t.tolerance>0||x?0:null;E!==null&&(E>0?(y=c.getStrokeJoin(),v=c.getStrokeCap(),C=c.getMiterLimit(),w=w.add(be._getStrokePadding(E,o))):y=v="round");function I(q,Q){return e.subtract(q).divide(Q).length<=1}function M(q,Q,j){if(!t.selected||Q.isSelected()){var Y=q._point;if(Q!==Y&&(Q=Q.add(Y)),I(Q,w))return new st(j,l,{segment:q,point:Q})}}function L(q,Q){return(Q||t.segments)&&M(q,q._point,"segment")||!Q&&t.handles&&(M(q,q._handleIn,"handle-in")||M(q,q._handleOut,"handle-out"))}function R(q){T.add(q)}function F(q){var Q=_||q._index>0&&q._index<d-1;if((Q?y:v)==="round")return I(q._point,w);if(T=new be({internal:!0,closed:!0}),Q?q.isSmooth()||be._addBevelJoin(q,y,E,C,null,o,R,!0):v==="square"&&be._addSquareCap(q,v,E,null,o,R,!0),!T.isEmpty()){var j;return T.contains(e)||(j=T.getNearestLocation(e))&&I(j.getPoint(),m)}}if(t.ends&&!t.segments&&!_){if(k=L(f[0],!0)||L(f[d-1],!0))return k}else if(t.segments||t.handles){for(var H=0;H<d;H++)if(k=L(f[H]))return k}if(E!==null){if(N=this.getNearestLocation(e),N){var G=N.getTime();G===0||G===1&&d>1?F(N.getSegment())||(N=null):I(N.getPoint(),w)||(N=null)}if(!N&&y==="miter"&&d>1)for(var H=0;H<d;H++){var V=f[H];if(e.getDistance(V._point)<=C*E&&F(V)){N=V.getLocation();break}}}return!N&&S&&this._contains(e)||N&&!b&&!x?new st("fill",this):N?new st(b?"stroke":"curve",this,{location:N,point:N.getPoint()}):null}},h.each(le._evaluateMethods,function(e){this[e+"At"]=function(t){var r=this.getLocationAt(t);return r&&r[e]()}},{beans:!1,getLocationOf:function(){for(var e=z.read(arguments),t=this.getCurves(),r=0,o=t.length;r<o;r++){var l=t[r].getLocationOf(e);if(l)return l}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if(typeof e=="number"){for(var t=this.getCurves(),r=0,o=0,l=t.length;o<l;o++){var c=r,f=t[o];if(r+=f.getLength(),r>e)return f.getLocationAt(e-c)}if(t.length>0&&e<=this.getLength())return new lt(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=z.read(arguments);if(e.isZero())return[];for(var t=[],r=0,o=this.getCurves(),l=0,c=o.length;l<c;l++){for(var f=o[l],d=f.getTimesWithTangent(e),_=0,m=d.length;_<m;_++){var w=r+f.getOffsetAtTime(d[_]);t.indexOf(w)<0&&t.push(w)}r+=f.length}return t}}),new function(){function e(r,o,l,c){if(c<=0)return;var f=c/2,d=c-2,_=f-1,m=new Array(6),w,y;function v(S){var x=m[S],E=m[S+1];(w!=x||y!=E)&&(r.beginPath(),r.moveTo(w,y),r.lineTo(x,E),r.stroke(),r.beginPath(),r.arc(x,E,f,0,Math.PI*2,!0),r.fill())}for(var C=0,T=o.length;C<T;C++){var N=o[C],k=N._selection;if(N._transformCoordinates(l,m),w=m[0],y=m[1],k&2&&v(2),k&4&&v(4),r.fillRect(w-f,y-f,c,c),d>0&&!(k&1)){var b=r.fillStyle;r.fillStyle="#ffffff",r.fillRect(w-_,y-_,d,d),r.fillStyle=b}}}function t(r,o,l){var c=o._segments,f=c.length,d=new Array(6),_=!0,m,w,y,v,C,T,N,k;function b(x){if(l)x._transformCoordinates(l,d),m=d[0],w=d[1];else{var E=x._point;m=E._x,w=E._y}if(_)r.moveTo(m,w),_=!1;else{if(l)C=d[2],T=d[3];else{var I=x._handleIn;C=m+I._x,T=w+I._y}C===m&&T===w&&N===y&&k===v?r.lineTo(m,w):r.bezierCurveTo(N,k,C,T,m,w)}if(y=m,v=w,l)N=d[4],k=d[5];else{var I=x._handleOut;N=y+I._x,k=v+I._y}}for(var S=0;S<f;S++)b(c[S]);o._closed&&f>0&&b(c[0])}return{_draw:function(r,o,l,c){var f=o.dontStart,d=o.dontFinish||o.clip,_=this.getStyle(),m=_.hasFill(),w=_.hasStroke(),y=_.getDashArray(),v=!s.support.nativeDash&&w&&y&&y.length;f||r.beginPath(),(m||w&&!v||d)&&(t(r,this,c),this._closed&&r.closePath());function C(x){return y[(x%v+v)%v]}if(!d&&(m||w)&&(this._setStyles(r,o,l),m&&(r.fill(_.getFillRule()),r.shadowColor="rgba(0,0,0,0)"),w)){if(v){f||r.beginPath();for(var T=new it(this,.25,32,!1,c),N=T.length,k=-_.getDashOffset(),b,S=0;k>0;)k-=C(S--)+C(S--);for(;k<N;)b=k+C(S++),(k>0||b>0)&&T.drawPart(r,Math.max(k,0),Math.max(b,0)),k=b+C(S++)}r.stroke()}},_drawSelected:function(r,o){r.beginPath(),t(r,this,o),r.stroke(),e(r,this._segments,o,s.settings.handleSize)}}},new function(){function e(t){var r=t._segments;if(!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return{moveTo:function(){var t=this._segments;t.length===1&&this.removeSegment(0),t.length||this._add([new Ee(z.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Ee(z.read(arguments))])},cubicCurveTo:function(){var t=arguments,r=z.read(t),o=z.read(t),l=z.read(t),c=e(this);c.setHandleOut(r.subtract(c._point)),this._add([new Ee(l,o.subtract(l))])},quadraticCurveTo:function(){var t=arguments,r=z.read(t),o=z.read(t),l=e(this)._point;this.cubicCurveTo(r.add(l.subtract(r).multiply(1/3)),r.add(o.subtract(r).multiply(1/3)),o)},curveTo:function(){var t=arguments,r=z.read(t),o=z.read(t),l=h.pick(h.read(t),.5),c=1-l,f=e(this)._point,d=r.subtract(f.multiply(c*c)).subtract(o.multiply(l*l)).divide(2*l*c);if(d.isNaN())throw new Error("Cannot put a curve through points with parameter = "+l);this.quadraticCurveTo(d,o)},arcTo:function(){var t=arguments,r=Math.abs,o=Math.sqrt,l=e(this),c=l._point,f=z.read(t),d,_=h.peek(t),m=h.pick(_,!0),w,y,v,C;if(typeof m=="boolean")var T=c.add(f).divide(2),d=T.add(T.subtract(c).rotate(m?-90:90));else if(h.remain(t)<=2)d=f,f=z.read(t);else if(!c.equals(f)){var N=ee.read(t),k=X.isZero;if(k(N.width)||k(N.height))return this.lineTo(f);var b=h.read(t),m=!!h.read(t),S=!!h.read(t),T=c.add(f).divide(2),x=c.subtract(T).rotate(-b),E=x.x,I=x.y,M=r(N.width),L=r(N.height),R=M*M,F=L*L,H=E*E,G=I*I,V=o(H/R+G/F);if(V>1&&(M*=V,L*=V,R=M*M,F=L*L),V=(R*F-R*G-F*H)/(R*G+F*H),r(V)<1e-12&&(V=0),V<0)throw new Error("Cannot create an arc with the given arguments");w=new z(M*I/L,-L*E/M).multiply((S===m?-1:1)*o(V)).rotate(b).add(T),C=new te().translate(w).rotate(b).scale(M,L),v=C._inverseTransform(c),y=v.getDirectedAngle(C._inverseTransform(f)),!m&&y>0?y-=360:m&&y<0&&(y+=360)}if(d){var q=new pe(c.add(d).divide(2),d.subtract(c).rotate(90),!0),Q=new pe(d.add(f).divide(2),f.subtract(d).rotate(90),!0),j=new pe(c,f),Y=j.getSide(d);if(w=q.intersect(Q,!0),!w){if(!Y)return this.lineTo(f);throw new Error("Cannot create an arc with the given arguments")}v=c.subtract(w),y=v.getDirectedAngle(f.subtract(w));var re=j.getSide(w,!0);re===0?y=Y*r(y):Y===re&&(y+=y<0?360:-360)}if(y){for(var oe=1e-7,de=r(y),ye=de>=360?4:Math.ceil((de-oe)/90),xe=y/ye,he=xe*Math.PI/360,fe=4/3*Math.sin(he)/(1+Math.cos(he)),Se=[],Ce=0;Ce<=ye;Ce++){var x=f,Te=null;if(Ce<ye&&(Te=v.rotate(90).multiply(fe),C?(x=C._transformPoint(v),Te=C._transformPoint(v.add(Te)).subtract(x)):x=w.add(v)),!Ce)l.setHandleOut(Te);else{var Oe=v.rotate(-90).multiply(fe);C&&(Oe=C._transformPoint(v.add(Oe)).subtract(x)),Se.push(new Ee(x,Oe,Te))}v=v.rotate(xe)}this._add(Se)}},lineBy:function(){var t=z.read(arguments),r=e(this)._point;this.lineTo(r.add(t))},curveBy:function(){var t=arguments,r=z.read(t),o=z.read(t),l=h.read(t),c=e(this)._point;this.curveTo(c.add(r),c.add(o),l)},cubicCurveBy:function(){var t=arguments,r=z.read(t),o=z.read(t),l=z.read(t),c=e(this)._point;this.cubicCurveTo(c.add(r),c.add(o),c.add(l))},quadraticCurveBy:function(){var t=arguments,r=z.read(t),o=z.read(t),l=e(this)._point;this.quadraticCurveTo(l.add(r),l.add(o))},arcBy:function(){var t=arguments,r=e(this)._point,o=r.add(z.read(t)),l=h.pick(h.peek(t),!0);typeof l=="boolean"?this.arcTo(o,l):this.arcTo(o,r.add(z.read(t)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(e,t){var r=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return be[r](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,r,o,l,c){var f=e[0];if(!f)return new $;var d=new Array(6),_=f._transformCoordinates(o,new Array(6)),m=_.slice(0,2),w=m.slice(),y=new Array(2);function v(N){N._transformCoordinates(o,d);for(var k=0;k<2;k++)le._addBounds(_[k],_[k+4],d[k+2],d[k],k,c?c[k]:0,m,w,y);var b=_;_=d,d=b}for(var C=1,T=e.length;C<T;C++)v(e[C]);return t&&v(f),new $(m[0],m[1],w[0]-m[0],w[1]-m[1])},getStrokeBounds:function(e,t,r,o,l){var c=r.getStyle(),f=c.hasStroke(),d=c.getStrokeWidth(),_=f&&r._getStrokeMatrix(o,l),m=f&&be._getStrokePadding(d,_),w=be.getBounds(e,t,r,o,l,m);if(!f)return w;var y=d/2,v=c.getStrokeJoin(),C=c.getStrokeCap(),T=c.getMiterLimit(),N=new $(new ee(m));function k(M){w=w.include(M)}function b(M){w=w.unite(N.setCenter(M._point.transform(o)))}function S(M,L){L==="round"||M.isSmooth()?b(M):be._addBevelJoin(M,L,y,T,o,_,k)}function x(M,L){L==="round"?b(M):be._addSquareCap(M,L,y,o,_,k)}var E=e.length-(t?0:1);if(E>0){for(var I=1;I<E;I++)S(e[I],v);t?S(e[0],v):(x(e[0],C),x(e[e.length-1],C))}return w},_getStrokePadding:function(e,t){if(!t)return[e,e];var r=new z(e,0).transform(t),o=new z(0,e).transform(t),l=r.getAngleInRadians(),c=r.getLength(),f=o.getLength(),d=Math.sin(l),_=Math.cos(l),m=Math.tan(l),w=Math.atan2(f*m,c),y=Math.atan2(f,m*c);return[Math.abs(c*Math.cos(w)*_+f*Math.sin(w)*d),Math.abs(f*Math.sin(y)*_+c*Math.cos(y)*d)]},_addBevelJoin:function(e,t,r,o,l,c,f,d){var _=e.getCurve(),m=_.getPrevious(),w=_.getPoint1().transform(l),y=m.getNormalAtTime(1).multiply(r).transform(c),v=_.getNormalAtTime(0).multiply(r).transform(c),C=y.getDirectedAngle(v);if((C<0||C>=180)&&(y=y.negate(),v=v.negate()),d&&f(w),f(w.add(y)),t==="miter"){var T=new pe(w.add(y),new z(-y.y,y.x),!0).intersect(new pe(w.add(v),new z(-v.y,v.x),!0),!0);T&&w.getDistance(T)<=o*r&&f(T)}f(w.add(v))},_addSquareCap:function(e,t,r,o,l,c,f){var d=e._point.transform(o),_=e.getLocation(),m=_.getNormal().multiply(_.getTime()===0?r:-r).transform(l);t==="square"&&(f&&(c(d.subtract(m)),c(d.add(m))),d=d.add(m.rotate(-90))),c(d.add(m)),c(d.subtract(m))},getHandleBounds:function(e,t,r,o,l){var c=r.getStyle(),f=l.stroke&&c.hasStroke(),d,_;if(f){var m=r._getStrokeMatrix(o,l),w=c.getStrokeWidth()/2,y=w;c.getStrokeJoin()==="miter"&&(y=w*c.getMiterLimit()),c.getStrokeCap()==="square"&&(y=Math.max(y,w*Math.SQRT2)),d=be._getStrokePadding(w,m),_=be._getStrokePadding(y,m)}for(var v=new Array(6),C=1/0,T=-C,N=C,k=T,b=0,S=e.length;b<S;b++){var x=e[b];x._transformCoordinates(o,v);for(var E=0;E<6;E+=2){var I=E?d:_,M=I?I[0]:0,L=I?I[1]:0,R=v[E],F=v[E+1],H=R-M,G=R+M,V=F-L,q=F+L;H<C&&(C=H),G>T&&(T=G),V<N&&(N=V),q>k&&(k=q)}}return new $(C,N,T-C,k-N)}}});be.inject({statics:new function(){var e=.5522847498307936,t=[new Ee([-1,0],[0,e],[0,-e]),new Ee([0,-1],[-e,0],[e,0]),new Ee([1,0],[0,-e],[0,e]),new Ee([0,1],[e,0],[-e,0])];function r(l,c,f){var d=h.getNamed(f),_=new be(d&&d.insert==!1&&B.NO_INSERT);return _._add(l),_._closed=c,_.set(d,{insert:!0})}function o(l,c,f){for(var d=new Array(4),_=0;_<4;_++){var m=t[_];d[_]=new Ee(m._point.multiply(c).add(l),m._handleIn.multiply(c),m._handleOut.multiply(c))}return r(d,!0,f)}return{Line:function(){var l=arguments;return r([new Ee(z.readNamed(l,"from")),new Ee(z.readNamed(l,"to"))],!1,l)},Circle:function(){var l=arguments,c=z.readNamed(l,"center"),f=h.readNamed(l,"radius");return o(c,new ee(f),l)},Rectangle:function(){var l=arguments,c=$.readNamed(l,"rectangle"),f=ee.readNamed(l,"radius",0,{readNull:!0}),d=c.getBottomLeft(!0),_=c.getTopLeft(!0),m=c.getTopRight(!0),w=c.getBottomRight(!0),y;if(!f||f.isZero())y=[new Ee(d),new Ee(_),new Ee(m),new Ee(w)];else{f=ee.min(f,c.getSize(!0).divide(2));var v=f.width,C=f.height,T=v*e,N=C*e;y=[new Ee(d.add(v,0),null,[-T,0]),new Ee(d.subtract(0,C),[0,N]),new Ee(_.add(0,C),null,[0,-N]),new Ee(_.add(v,0),[-T,0],null),new Ee(m.subtract(v,0),null,[T,0]),new Ee(m.add(0,C),[0,-N],null),new Ee(w.subtract(0,C),null,[0,N]),new Ee(w.subtract(v,0),[T,0])]}return r(y,!0,l)},RoundRectangle:"#Rectangle",Ellipse:function(){var l=arguments,c=Fe._readEllipse(l);return o(c.center,c.radius,l)},Oval:"#Ellipse",Arc:function(){var l=arguments,c=z.readNamed(l,"from"),f=z.readNamed(l,"through"),d=z.readNamed(l,"to"),_=h.getNamed(l),m=new be(_&&_.insert==!1&&B.NO_INSERT);return m.moveTo(c),m.arcTo(f,d),m.set(_)},RegularPolygon:function(){for(var l=arguments,c=z.readNamed(l,"center"),f=h.readNamed(l,"sides"),d=h.readNamed(l,"radius"),_=360/f,m=f%3===0,w=new z(0,m?-d:d),y=m?-1:.5,v=new Array(f),C=0;C<f;C++)v[C]=new Ee(c.add(w.rotate((C+y)*_)));return r(v,!0,l)},Star:function(){for(var l=arguments,c=z.readNamed(l,"center"),f=h.readNamed(l,"points")*2,d=h.readNamed(l,"radius1"),_=h.readNamed(l,"radius2"),m=360/f,w=new z(0,-1),y=new Array(f),v=0;v<f;v++)y[v]=new Ee(c.add(w.rotate(m*v).multiply(v%2?_:d)));return r(y,!0,l)}}}});var Be=Ae.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function e(t,r){var o=r,l=o[0];l&&typeof l[0]=="number"&&(o=[o]);for(var c=r.length-1;c>=0;c--){var f=o[c];o===r&&!(f instanceof be)&&(o=h.slice(o)),Array.isArray(f)?o[c]=new be({segments:f,insert:!1}):f instanceof Be&&(o.splice.apply(o,[c,1].concat(f.removeChildren())),f.remove())}return e.base.call(this,t,o)},reduce:function e(t){for(var r=this._children,o=r.length-1;o>=0;o--){var l=r[o].reduce(t);l.isEmpty()&&l.remove()}if(!r.length){var l=new be(B.NO_INSERT);return l.copyAttributes(this),l.insertAbove(this),this.remove(),l}return e.base.call(this)},isClosed:function(){for(var e=this._children,t=0,r=e.length;t<r;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,r=0,o=t.length;r<o;r++)t[r].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],r=0,o=e.length;r<o;r++)h.push(t,e[r].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,r=0,o=e.length;r<o;r++)t+=e[r].getArea();return t},getLength:function(){for(var e=this._children,t=0,r=0,o=e.length;r<o;r++)t+=e[r].getLength();return t},getPathData:function(e,t){for(var r=this._children,o=[],l=0,c=r.length;l<c;l++){var f=r[l],d=f._matrix;o.push(f.getPathData(e&&!d.isIdentity()?e.appended(d):e,t))}return o.join("")},_hitTestChildren:function e(t,r,o){return e.base.call(this,t,r.class===be||r.type==="path"?r:h.set({},r,{fill:!1}),o)},_draw:function(e,t,r,o){var l=this._children;if(!!l.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var c=0,f=l.length;c<f;c++)l[c].draw(e,t,o);if(!t.clip){this._setStyles(e,t,r);var d=this._style;d.hasFill()&&(e.fill(d.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),d.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,r){for(var o=this._children,l=0,c=o.length;l<c;l++){var f=o[l],d=f._matrix;r[f._id]||f._drawSelected(e,d.isIdentity()?t:t.appended(d))}}},new function(){function e(t,r){var o=t._children;if(r&&!o.length)throw new Error("Use a moveTo() command first");return o[o.length-1]}return h.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var r=e(this,!0);r[t].apply(r,arguments)}},{moveTo:function(){var t=e(this),r=t&&t.isEmpty()?t:new be(B.NO_INSERT);r!==t&&this.addChild(r),r.moveTo.apply(r,arguments)},moveBy:function(){var t=e(this,!0),r=t&&t.getLastSegment(),o=z.read(arguments);this.moveTo(r?o.add(r._point):o)},closePath:function(t){e(this,!0).closePath(t)}})},h.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var r=this._children,o,l=0,c=r.length;l<c;l++)o=r[l][e](t)||o;return o}},{}));Ae.inject(new function(){var e=Math.min,t=Math.max,r=Math.abs,o={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function l(b){return b._children||[b]}function c(b,S){var x=b.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(S){for(var E=l(x),I=0,M=E.length;I<M;I++){var b=E[I];!b._closed&&!b.isEmpty()&&(b.closePath(1e-12),b.getFirstSegment().setHandleIn(0,0),b.getLastSegment().setHandleOut(0,0))}x=x.resolveCrossings().reorient(x.getFillRule()==="nonzero",!0)}return x}function f(b,S,x,E,I){var M=new Be(B.NO_INSERT);return M.addChildren(b,!0),M=M.reduce({simplify:S}),I&&I.insert==!1||M.insertAbove(E&&x.isSibling(E)&&x.getIndex()<E.getIndex()?E:x),M.copyAttributes(x,!0),M}function d(b){return b.hasOverlap()||b.isCrossing()}function _(b,S,x,E){if(E&&(E.trace==!1||E.stroke)&&/^(subtract|intersect)$/.test(x))return m(b,S,x);var I=c(b,!0),M=S&&b!==S&&c(S,!0),L=o[x];L[x]=!0,M&&(L.subtract||L.exclude)^(M.isClockwise()^I.isClockwise())&&M.reverse();var R=C(lt.expand(I.getIntersections(M,d))),F=l(I),H=M&&l(M),G=[],V=[],q;function Q(Te){for(var Oe=0,me=Te.length;Oe<me;Oe++){var Me=Te[Oe];h.push(G,Me._segments),h.push(V,Me.getCurves()),Me._overlapsOnly=!0}}function j(Te){for(var Oe=[],me=0,Me=Te&&Te.length;me<Me;me++)Oe.push(V[Te[me]]);return Oe}if(R.length){Q(F),H&&Q(H);for(var Y=new Array(V.length),re=0,oe=V.length;re<oe;re++)Y[re]=V[re].getValues();for(var de=W.findCurveBoundsCollisions(Y,Y,0,!0),ye={},re=0;re<V.length;re++){var xe=V[re],he=xe._path._id,fe=ye[he]=ye[he]||{};fe[xe.getIndex()]={hor:j(de[re].hor),ver:j(de[re].ver)}}for(var re=0,oe=R.length;re<oe;re++)N(R[re]._segment,I,M,ye,L);for(var re=0,oe=G.length;re<oe;re++){var Se=G[re],Ce=Se._intersection;Se._winding||N(Se,I,M,ye,L),Ce&&Ce._overlap||(Se._path._overlapsOnly=!1)}q=k(G,L)}else q=v(H?F.concat(H):F.slice(),function(Te){return!!L[Te]});return f(q,!0,b,S,E)}function m(b,S,x){var E=c(b),I=c(S),M=E.getIntersections(I,d),L=x==="subtract",R=x==="divide",F={},H=[];function G(Q){if(!F[Q._id]&&(R||I.contains(Q.getPointAt(Q.getLength()/2))^L))return H.unshift(Q),F[Q._id]=!0}for(var V=M.length-1;V>=0;V--){var q=M[V].split();q&&(G(q)&&q.getFirstSegment().setHandleIn(0,0),E.getLastSegment().setHandleOut(0,0))}return G(E),f(H,!1,b,S)}function w(b,S){for(var x=b;x;){if(x===S)return;x=x._previous}for(;b._next&&b._next!==S;)b=b._next;if(!b._next){for(;S._previous;)S=S._previous;b._next=S,S._previous=b}}function y(b){for(var S=b.length-1;S>=0;S--)b[S].clearHandles()}function v(b,S,x){var E=b&&b.length;if(E){var I=h.each(b,function(de,ye){this[de._id]={container:null,winding:de.isClockwise()?1:-1,index:ye}},{}),M=b.slice().sort(function(de,ye){return r(ye.getArea())-r(de.getArea())}),L=M[0],R=W.findItemBoundsCollisions(M,null,X.GEOMETRIC_EPSILON);x==null&&(x=L.isClockwise());for(var F=0;F<E;F++){var H=M[F],G=I[H._id],V=0,q=R[F];if(q){for(var Q=null,j=q.length-1;j>=0;j--)if(q[j]<F){Q=Q||H.getInteriorPoint();var Y=M[q[j]];if(Y.contains(Q)){var re=I[Y._id];V=re.winding,G.winding+=V,G.container=re.exclude?re.container:Y;break}}}if(S(G.winding)===S(V))G.exclude=!0,b[G.index]=null;else{var oe=G.container;H.setClockwise(oe?!oe.isClockwise():x)}}}return b}function C(b,S,x){var E=S&&[],I=1e-8,M=1-I,L=!1,R=x||[],F=x&&{},H,G,V;function q(Oe){return Oe._path._id+"."+Oe._segment1._index}for(var Q=(x&&x.length)-1;Q>=0;Q--){var j=x[Q];j._path&&(F[q(j)]=!0)}for(var Q=b.length-1;Q>=0;Q--){var Y=b[Q],re=Y._time,oe=re,de=S&&!S(Y),j=Y._curve,ye;if(j&&(j!==G?(L=!j.hasHandles()||F&&F[q(j)],H=[],V=null,G=j):V>=I&&(re/=V)),de){H&&H.push(Y);continue}else S&&E.unshift(Y);if(V=oe,re<I)ye=j._segment1;else if(re>M)ye=j._segment2;else{var xe=j.divideAtTime(re,!0);L&&R.push(j,xe),ye=xe._segment1;for(var he=H.length-1;he>=0;he--){var fe=H[he];fe._time=(fe._time-re)/(1-re)}}Y._setSegment(ye);var Se=ye._intersection,Ce=Y._intersection;if(Se){w(Se,Ce);for(var Te=Se;Te;)w(Te._intersection,Se),Te=Te._next}else ye._intersection=Ce}return x||y(R),E||b}function T(b,S,x,E,I){var M=Array.isArray(S)?S:S[x?"hor":"ver"],L=x?1:0,R=L^1,F=[b.x,b.y],H=F[L],G=F[R],V=1e-9,q=1e-6,Q=H-V,j=H+V,Y=0,re=0,oe=0,de=0,ye=!1,xe=!1,he=1,fe=[],Se,Ce;function Te(Ze){var _t=Ze[R+0],pt=Ze[R+6];if(!(G<e(_t,pt)||G>t(_t,pt))){var xt=Ze[L+0],Kt=Ze[L+2],jt=Ze[L+4],zt=Ze[L+6];if(_t===pt){(xt<j&&zt>Q||zt<j&&xt>Q)&&(ye=!0);return}var Ge=G===_t?0:G===pt||Q>t(xt,Kt,jt,zt)||j<e(xt,Kt,jt,zt)?1:le.solveCubic(Ze,R,G,fe,0,1)>0?fe[0]:1,Pt=Ge===0?xt:Ge===1?zt:le.getPoint(Ze,Ge)[x?"y":"x"],Qt=_t>pt?1:-1,Jt=Se[R]>Se[R+6]?1:-1,fi=Se[L+6];return G!==_t?(Pt<Q?oe+=Qt:Pt>j?de+=Qt:ye=!0,Pt>H-q&&Pt<H+q&&(he/=2)):(Qt!==Jt?xt<Q?oe+=Qt:xt>j&&(de+=Qt):xt!=fi&&(fi<j&&Pt>j?(de+=Qt,ye=!0):fi>Q&&Pt<Q&&(oe+=Qt,ye=!0)),he/=4),Se=Ze,!I&&Pt>Q&&Pt<j&&le.getTangent(Ze,Ge)[x?"x":"y"]===0&&T(b,S,!x,E,!0)}}function Oe(Ze){var _t=Ze[R+0],pt=Ze[R+2],xt=Ze[R+4],Kt=Ze[R+6];if(G<=t(_t,pt,xt,Kt)&&G>=e(_t,pt,xt,Kt)){for(var jt=Ze[L+0],zt=Ze[L+2],Ge=Ze[L+4],Pt=Ze[L+6],Qt=Q>t(jt,zt,Ge,Pt)||j<e(jt,zt,Ge,Pt)?[Ze]:le.getMonoCurves(Ze,x),Jt,fi=0,Cr=Qt.length;fi<Cr;fi++)if(Jt=Te(Qt[fi]))return Jt}}for(var me=0,Me=M.length;me<Me;me++){var ze=M[me],He=ze._path,ht=ze.getValues(),ft;if((!me||M[me-1]._path!==He)&&(Se=null,He._closed||(Ce=le.getValues(He.getLastCurve().getSegment2(),ze.getSegment1(),null,!E),Ce[R]!==Ce[R+6]&&(Se=Ce)),!Se)){Se=ht;for(var ct=He.getLastCurve();ct&&ct!==ze;){var Xe=ct.getValues();if(Xe[R]!==Xe[R+6]){Se=Xe;break}ct=ct.getPrevious()}}if(ft=Oe(ht))return ft;if(me+1===Me||M[me+1]._path!==He){if(Ce&&(ft=Oe(Ce)))return ft;ye&&!oe&&!de&&(oe=de=He.isClockwise(E)^x?1:-1),Y+=oe,re+=de,oe=de=0,ye&&(xe=!0,ye=!1),Ce=null}}return Y=r(Y),re=r(re),{winding:t(Y,re),windingL:Y,windingR:re,quality:he,onPath:xe}}function N(b,S,x,E,I){var M=[],L=b,R=0,V;do{var F=b.getCurve();if(F){var H=F.getLength();M.push({segment:b,curve:F,length:H}),R+=H}b=b.getNext()}while(b&&!b._intersection&&b!==L);for(var G=[.5,.25,.75],V={winding:0,quality:-1},q=.001,Q=1-q,j=0;j<G.length&&V.quality<.5;j++)for(var H=R*G[j],Y=0,re=M.length;Y<re;Y++){var oe=M[Y],de=oe.length;if(H<=de){var F=oe.curve,ye=F._path,xe=ye._parent,he=xe instanceof Be?xe:ye,fe=X.clamp(F.getTimeAt(H),q,Q),Se=F.getPointAtTime(fe),Ce=r(F.getTangentAtTime(fe).y)<Math.SQRT1_2,Te=null;if(I.subtract&&x){var Oe=he===S?x:S,me=Oe._getWinding(Se,Ce,!0);if(he===S&&me.winding||he===x&&!me.winding){if(me.quality<1)continue;Te={winding:0,quality:1}}}Te=Te||T(Se,E[ye._id][F.getIndex()],Ce,!0),Te.quality>V.quality&&(V=Te);break}H-=de}for(var Y=M.length-1;Y>=0;Y--)M[Y].segment._winding=V}function k(b,S){var x=[],E;function I(Me){var ze;return!!(Me&&!Me._visited&&(!S||S[(ze=Me._winding||{}).winding]&&!(S.unite&&ze.winding===2&&ze.windingL&&ze.windingR)))}function M(Me){if(Me){for(var ze=0,He=E.length;ze<He;ze++)if(Me===E[ze])return!0}return!1}function L(Me){for(var ze=Me._segments,He=0,ht=ze.length;He<ht;He++)ze[He]._visited=!0}function R(Me,ze){var He=Me._intersection,ht=He,ft=[];ze&&(E=[Me]);function ct(Xe,Ze){for(;Xe&&Xe!==Ze;){var _t=Xe._segment,pt=_t&&_t._path;if(pt){var xt=_t.getNext()||pt.getFirstSegment(),Kt=xt._intersection;_t!==Me&&(M(_t)||M(xt)||xt&&I(_t)&&(I(xt)||Kt&&I(Kt._segment)))&&ft.push(_t),ze&&E.push(_t)}Xe=Xe._next}}if(He){for(ct(He);He&&He._previous;)He=He._previous;ct(He,ht)}return ft}b.sort(function(Me,ze){var He=Me._intersection,ht=ze._intersection,ft=!!(He&&He._overlap),ct=!!(ht&&ht._overlap),Xe=Me._path,Ze=ze._path;return ft^ct?ft?1:-1:!He^!ht?He?1:-1:Xe!==Ze?Xe._id-Ze._id:Me._index-ze._index});for(var F=0,H=b.length;F<H;F++){var G=b[F],V=I(G),q=null,Q=!1,j=!0,Y=[],re,oe,de;if(V&&G._path._overlapsOnly){var ye=G._path,xe=G._intersection._segment._path;ye.compare(xe)&&(ye.getArea()&&x.push(ye.clone(!1)),L(ye),L(xe),V=!1)}for(;V;){var he=!q,fe=R(G,he),Se=fe.shift(),Q=!he&&(M(G)||M(Se)),Ce=!Q&&Se;if(he&&(q=new be(B.NO_INSERT),re=null),Q){(G.isFirst()||G.isLast())&&(j=G._path._closed),G._visited=!0;break}if(Ce&&re&&(Y.push(re),re=null),re||(Ce&&fe.push(G),re={start:q._segments.length,crossings:fe,visited:oe=[],handleIn:de}),Ce&&(G=Se),!I(G)){q.removeSegments(re.start);for(var Te=0,Oe=oe.length;Te<Oe;Te++)oe[Te]._visited=!1;oe.length=0;do G=re&&re.crossings.shift(),(!G||!G._path)&&(G=null,re=Y.pop(),re&&(oe=re.visited,de=re.handleIn));while(re&&!I(G));if(!G)break}var me=G.getNext();q.add(new Ee(G._point,de,me&&G._handleOut)),G._visited=!0,oe.push(G),G=me||G._path.getFirstSegment(),de=me&&me._handleIn}Q&&(j&&(q.getFirstSegment().setHandleIn(de),q.setClosed(j)),q.getArea()!==0&&x.push(q))}return x}return{_getWinding:function(b,S,x){return T(b,this.getCurves(),S,x)},unite:function(b,S){return _(this,b,"unite",S)},intersect:function(b,S){return _(this,b,"intersect",S)},subtract:function(b,S){return _(this,b,"subtract",S)},exclude:function(b,S){return _(this,b,"exclude",S)},divide:function(b,S){return S&&(S.trace==!1||S.stroke)?m(this,b,"divide"):f([this.subtract(b,S),this.intersect(b,S)],!0,this,b,S)},resolveCrossings:function(){var b=this._children,S=b||[this];function x(re,oe){var de=re&&re._intersection;return de&&de._overlap&&de._path===oe}var E=!1,I=!1,M=this.getIntersections(null,function(re){return re.hasOverlap()&&(E=!0)||re.isCrossing()&&(I=!0)}),L=E&&I&&[];if(M=lt.expand(M),E)for(var R=C(M,function(re){return re.hasOverlap()},L),F=R.length-1;F>=0;F--){var H=R[F],G=H._path,V=H._segment,q=V.getPrevious(),Q=V.getNext();x(q,G)&&x(Q,G)&&(V.remove(),q._handleOut._set(0,0),Q._handleIn._set(0,0),q!==V&&!q.getCurve().hasLength()&&(Q._handleIn.set(q._handleIn),q.remove()))}I&&(C(M,E&&function(re){var oe=re.getCurve(),de=re.getSegment(),ye=re._intersection,xe=ye._curve,he=ye._segment;if(oe&&xe&&oe._path&&xe._path)return!0;de&&(de._intersection=null),he&&(he._intersection=null)},L),L&&y(L),S=k(h.each(S,function(re){h.push(this,re._segments)},[])));var j=S.length,Y;return j>1&&b?(S!==b&&this.setChildren(S),Y=this):j===1&&!b&&(S[0]!==this&&this.setSegments(S[0].removeSegments()),Y=this),Y||(Y=new Be(B.NO_INSERT),Y.addChildren(S),Y=Y.reduce(),Y.copyAttributes(this),this.replaceWith(Y)),Y},reorient:function(b,S){var x=this._children;return x&&x.length?this.setChildren(v(this.removeChildren(),function(E){return!!(b?E:E&1)},S)):S!==a&&this.setClockwise(S),this},getInteriorPoint:function(){var b=this.getBounds(),S=b.getCenter(!0);if(!this.contains(S)){for(var x=this.getCurves(),E=S.y,I=[],M=[],L=0,R=x.length;L<R;L++){var F=x[L].getValues(),H=F[1],G=F[3],V=F[5],q=F[7];if(E>=e(H,G,V,q)&&E<=t(H,G,V,q))for(var Q=le.getMonoCurves(F),j=0,Y=Q.length;j<Y;j++){var re=Q[j],oe=re[1],de=re[7];if(oe!==de&&(E>=oe&&E<=de||E>=de&&E<=oe)){var ye=E===oe?re[0]:E===de?re[6]:le.solveCubic(re,1,E,M,0,1)===1?le.getPoint(re,M[0]).x:(re[0]+re[6])/2;I.push(ye)}}}I.length>1&&(I.sort(function(xe,he){return xe-he}),S.x=(I[0]+I[1])/2)}return S}}});var it=h.extend({_class:"PathFlattener",initialize:function(e,t,r,o,l){var c=[],f=[],d=0,_=1/(r||32),m=e._segments,w=m[0],y;function v(k,b){var S=le.getValues(k,b,l);c.push(S),C(S,k._index,0,1)}function C(k,b,S,x){if(x-S>_&&!(o&&le.isStraight(k))&&!le.isFlatEnough(k,t||.25)){var E=le.subdivide(k,.5),I=(S+x)/2;C(E[0],b,S,I),C(E[1],b,I,x)}else{var M=k[6]-k[0],L=k[7]-k[1],R=Math.sqrt(M*M+L*L);R>0&&(d+=R,f.push({offset:d,curve:k,index:b,time:x}))}}for(var T=1,N=m.length;T<N;T++)y=m[T],v(w,y),w=y;e._closed&&v(y||w,m[0]),this.curves=c,this.parts=f,this.length=d,this.index=0},_get:function(e){for(var t=this.parts,r=t.length,o,l=this.index;o=l,!(!l||t[--l].offset<e););for(;o<r;o++){var c=t[o];if(c.offset>=e){this.index=o;var f=t[o-1],d=f&&f.index===c.index?f.time:0,_=f?f.offset:0;return{index:c.index,time:d+(c.time-d)*(e-_)/(c.offset-_)}}}return{index:t[r-1].index,time:1}},drawPart:function(e,t,r){for(var o=this._get(t),l=this._get(r),c=o.index,f=l.index;c<=f;c++){var d=le.getPart(this.curves[c],c===o.index?o.time:0,c===l.index?l.time:1);c===o.index&&e.moveTo(d[0],d[1]),e.bezierCurveTo.apply(e,d.slice(2))}}},h.each(le._evaluateMethods,function(e){this[e+"At"]=function(t){var r=this._get(t);return le[e](this.curves[r.index],r.time)}},{})),ut=h.extend({initialize:function(e){for(var t=this.points=[],r=e._segments,o=e._closed,l=0,c,f=r.length;l<f;l++){var d=r[l].point;(!c||!c.equals(d))&&t.push(c=d.clone())}o&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=o},fit:function(e){var t=this.points,r=t.length,o=null;return r>0&&(o=[new Ee(t[0])],r>1&&(this.fitCubic(o,e,0,r-1,t[1].subtract(t[0]),t[r-2].subtract(t[r-1])),this.closed&&(o.shift(),o.pop()))),o},fitCubic:function(e,t,r,o,l,c){var f=this.points;if(o-r===1){var d=f[r],_=f[o],m=d.getDistance(_)/3;this.addCurve(e,[d,d.add(l.normalize(m)),_.add(c.normalize(m)),_]);return}for(var w=this.chordLengthParameterize(r,o),y=Math.max(t,t*t),v,C=!0,T=0;T<=4;T++){var N=this.generateBezier(r,o,w,l,c),k=this.findMaxError(r,o,N,w);if(k.error<t&&C){this.addCurve(e,N);return}if(v=k.index,k.error>=y)break;C=this.reparameterize(r,o,w,N),y=k.error}var b=f[v-1].subtract(f[v+1]);this.fitCubic(e,t,r,v,l,b),this.fitCubic(e,t,v,o,b.negate(),c)},addCurve:function(e,t){var r=e[e.length-1];r.setHandleOut(t[1].subtract(t[0])),e.push(new Ee(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,r,o,l){for(var c=1e-12,f=Math.abs,d=this.points,_=d[e],m=d[t],w=[[0,0],[0,0]],y=[0,0],v=0,C=t-e+1;v<C;v++){var T=r[v],N=1-T,k=3*T*N,b=N*N*N,S=k*N,x=k*T,E=T*T*T,I=o.normalize(S),M=l.normalize(x),L=d[e+v].subtract(_.multiply(b+S)).subtract(m.multiply(x+E));w[0][0]+=I.dot(I),w[0][1]+=I.dot(M),w[1][0]=w[0][1],w[1][1]+=M.dot(M),y[0]+=I.dot(L),y[1]+=M.dot(L)}var R=w[0][0]*w[1][1]-w[1][0]*w[0][1],F,H;if(f(R)>c){var G=w[0][0]*y[1]-w[1][0]*y[0],V=y[0]*w[1][1]-y[1]*w[0][1];F=V/R,H=G/R}else{var q=w[0][0]+w[0][1],Q=w[1][0]+w[1][1];F=H=f(q)>c?y[0]/q:f(Q)>c?y[1]/Q:0}var j=m.getDistance(_),Y=c*j,re,oe;if(F<Y||H<Y)F=H=j/3;else{var de=m.subtract(_);re=o.normalize(F),oe=l.normalize(H),re.dot(de)-oe.dot(de)>j*j&&(F=H=j/3,re=oe=null)}return[_,_.add(re||o.normalize(F)),m.add(oe||l.normalize(H)),m]},reparameterize:function(e,t,r,o){for(var l=e;l<=t;l++)r[l-e]=this.findRoot(o,this.points[l],r[l-e]);for(var l=1,c=r.length;l<c;l++)if(r[l]<=r[l-1])return!1;return!0},findRoot:function(e,t,r){for(var o=[],l=[],c=0;c<=2;c++)o[c]=e[c+1].subtract(e[c]).multiply(3);for(var c=0;c<=1;c++)l[c]=o[c+1].subtract(o[c]).multiply(2);var f=this.evaluate(3,e,r),d=this.evaluate(2,o,r),_=this.evaluate(1,l,r),m=f.subtract(t),w=d.dot(d)+m.dot(_);return X.isMachineZero(w)?r:r-m.dot(d)/w},evaluate:function(e,t,r){for(var o=t.slice(),l=1;l<=e;l++)for(var c=0;c<=e-l;c++)o[c]=o[c].multiply(1-r).add(o[c+1].multiply(r));return o[0]},chordLengthParameterize:function(e,t){for(var r=[0],o=e+1;o<=t;o++)r[o-e]=r[o-e-1]+this.points[o].getDistance(this.points[o-1]);for(var o=1,l=t-e;o<=l;o++)r[o]/=r[l];return r},findMaxError:function(e,t,r,o){for(var l=Math.floor((t-e+1)/2),c=0,f=e+1;f<t;f++){var d=this.evaluate(3,r,o[f-e]),_=d.subtract(this.points[f]),m=_.x*_.x+_.y*_.y;m>=c&&(c=m,l=f)}return{error:c,index:l}}}),Ut=B.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var r=t&&h.isPlainObject(t)&&t.x===a&&t.y===a;this._initialize(r&&t,!r&&z.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Gt=Ut.extend({_class:"PointText",initialize:function(){Ut.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new ue(e.x,e.y,this,"setPoint")},setPoint:function(){var e=z.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,r){if(!!this._content){this._setStyles(e,t,r);var o=this._lines,l=this._style,c=l.hasFill(),f=l.hasStroke(),d=l.getLeading(),_=e.shadowColor;e.font=l.getFontStyle(),e.textAlign=l.getJustification();for(var m=0,w=o.length;m<w;m++){e.shadowColor=_;var y=o[m];c&&(e.fillText(y,0,0),e.shadowColor="rgba(0,0,0,0)"),f&&e.strokeText(y,0,0),e.translate(0,d)}}},_getBounds:function(e,t){var r=this._style,o=this._lines,l=o.length,c=r.getJustification(),f=r.getLeading(),d=this.getView().getTextWidth(r.getFontStyle(),o),_=0;c!=="left"&&(_-=d/(c==="center"?2:1));var m=new $(_,l?-.75*f:0,d,l*f);return e?e._transformBounds(m,m):m}}),Qe=h.extend(new function(){var e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},t={},r={transparent:[0,0,0,0]},o;function l(d){var _=d.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||d.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),m="rgb",w;if(_){var y=_[4]?4:3;w=new Array(y);for(var v=0;v<y;v++){var C=_[v+1];w[v]=parseInt(C.length==1?C+C:C,16)/255}}else if(_=d.match(/^(rgb|hsl)a?\((.*)\)$/)){m=_[1],w=_[2].trim().split(/[,\s]+/g);for(var T=m==="hsl",v=0,N=Math.min(w.length,4);v<N;v++){var k=w[v],C=parseFloat(k);if(T)if(v===0){var b=k.match(/([a-z]*)$/)[1];C*={turn:360,rad:180/Math.PI,grad:.9}[b]||1}else v<3&&(C/=100);else v<3&&(C/=/%$/.test(k)?100:255);w[v]=C}}else{var S=r[d];if(!S)if(u){o||(o=mt.getContext(1,1),o.globalCompositeOperation="copy"),o.fillStyle="rgba(0,0,0,0)",o.fillStyle=d,o.fillRect(0,0,1,1);var x=o.getImageData(0,0,1,1).data;S=r[d]=[x[0]/255,x[1]/255,x[2]/255]}else S=[0,0,0];w=S.slice()}return[m,w]}var c=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],f={"rgb-hsb":function(d,_,m){var w=Math.max(d,_,m),y=Math.min(d,_,m),v=w-y,C=v===0?0:(w==d?(_-m)/v+(_<m?6:0):w==_?(m-d)/v+2:(d-_)/v+4)*60;return[C,w===0?0:v/w,w]},"hsb-rgb":function(d,_,m){d=(d/60%6+6)%6;var y=Math.floor(d),w=d-y,y=c[y],v=[m,m*(1-_),m*(1-_*w),m*(1-_*(1-w))];return[v[y[0]],v[y[1]],v[y[2]]]},"rgb-hsl":function(d,_,m){var w=Math.max(d,_,m),y=Math.min(d,_,m),v=w-y,C=v===0,T=C?0:(w==d?(_-m)/v+(_<m?6:0):w==_?(m-d)/v+2:(d-_)/v+4)*60,N=(w+y)/2,k=C?0:N<.5?v/(w+y):v/(2-w-y);return[T,k,N]},"hsl-rgb":function(d,_,m){if(d=(d/360%1+1)%1,_===0)return[m,m,m];for(var w=[d+1/3,d,d-1/3],y=m<.5?m*(1+_):m+_-m*_,v=2*m-y,C=[],T=0;T<3;T++){var N=w[T];N<0&&(N+=1),N>1&&(N-=1),C[T]=6*N<1?v+(y-v)*6*N:2*N<1?y:3*N<2?v+(y-v)*(2/3-N)*6:v}return C},"rgb-gray":function(d,_,m){return[d*.2989+_*.587+m*.114]},"gray-rgb":function(d){return[d,d,d]},"gray-hsb":function(d){return[0,0,d]},"gray-hsl":function(d){return[0,0,d]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return h.each(e,function(d,_){t[_]=[],h.each(d,function(m,w){var y=h.capitalize(m),v=/^(hue|saturation)$/.test(m),C=t[_][w]=_==="gradient"?m==="gradient"?function(T){var N=this._components[0];return T=qt.read(Array.isArray(T)?T:arguments,0,{readNull:!0}),N!==T&&(N&&N._removeOwner(this),T&&T._addOwner(this)),T}:function(){return z.read(arguments,0,{readNull:m==="highlight",clone:!0})}:function(T){return T==null||isNaN(T)?0:+T};this["get"+y]=function(){return this._type===_||v&&/^hs[bl]$/.test(this._type)?this._components[w]:this._convert(_)[w]},this["set"+y]=function(T){this._type!==_&&!(v&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(_),this._properties=e[_],this._type=_),this._components[w]=C.call(this,T),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function d(_){var m=arguments,w=this.__read,y=0,v,C,T,N;Array.isArray(_)&&(m=_,_=m[0]);var k=_!=null&&typeof _;if(k==="string"&&_ in e&&(v=_,_=m[1],Array.isArray(_)?(C=_,T=m[2]):(w&&(y=1),m=h.slice(m,1),k=typeof _)),!C){if(N=k==="number"?m:k==="object"&&_.length!=null?_:null,N){v||(v=N.length>=3?"rgb":"gray");var b=e[v].length;T=N[b],w&&(y+=N===arguments?b+(T!=null?1:0):1),N.length>b&&(N=h.slice(N,0,b))}else if(k==="string"){var S=l(_);v=S[0],C=S[1],C.length===4&&(T=C[3],C.length--)}else if(k==="object")if(_.constructor===d){if(v=_._type,C=_._components.slice(),T=_._alpha,v==="gradient")for(var x=1,E=C.length;x<E;x++){var I=C[x];I&&(C[x]=I.clone())}}else if(_.constructor===qt)v="gradient",N=m;else{v="hue"in _?"lightness"in _?"hsl":"hsb":"gradient"in _||"stops"in _||"radial"in _?"gradient":"gray"in _?"gray":"rgb";var M=e[v],L=t[v];this._components=C=[];for(var x=0,E=M.length;x<E;x++){var R=_[M[x]];R==null&&!x&&v==="gradient"&&"stops"in _&&(R={stops:_.stops,radial:_.radial}),R=L[x].call(this,R),R!=null&&(C[x]=R)}T=_.alpha}w&&v&&(y=1)}if(this._type=v||"rgb",!C){this._components=C=[];for(var L=t[this._type],x=0,E=L.length;x<E;x++){var R=L[x].call(this,N&&N[x]);R!=null&&(C[x]=R)}}return this._components=C,this._properties=e[this._type],this._alpha=T,w&&(this.__read=y),this},set:"#initialize",_serialize:function(d,_){var m=this.getComponents();return h.serialize(/^(gray|rgb)$/.test(this._type)?m:[this._type].concat(m),d,!0,_)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(d){var _;return this._type===d?this._components.slice():(_=f[this._type+"-"+d])?_.apply(this,this._components):f["rgb-"+d].apply(this,f[this._type+"-rgb"].apply(this,this._components))},convert:function(d){return new Qe(d,this._convert(d),this._alpha)},getType:function(){return this._type},setType:function(d){this._components=this._convert(d),this._properties=e[d],this._type=d},getComponents:function(){var d=this._components.slice();return this._alpha!=null&&d.push(this._alpha),d},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(d){this._alpha=d==null?null:Math.min(Math.max(d,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(d){var _=h.isPlainValue(d,!0)?Qe.read(arguments):d;return _===this||_&&this._class===_._class&&this._type===_._type&&this.getAlpha()===_.getAlpha()&&h.equals(this._components,_._components)||!1},toString:function(){for(var d=this._properties,_=[],m=this._type==="gradient",w=K.instance,y=0,v=d.length;y<v;y++){var C=this._components[y];C!=null&&_.push(d[y]+": "+(m?C:w.number(C)))}return this._alpha!=null&&_.push("alpha: "+w.number(this._alpha)),"{ "+_.join(", ")+" }"},toCSS:function(d){var _=this._convert("rgb"),m=d||this._alpha==null?1:this._alpha;function w(y){return Math.round((y<0?0:y>1?1:y)*255)}return _=[w(_[0]),w(_[1]),w(_[2])],m<1&&_.push(m<0?0:m),d?"#"+((1<<24)+(_[0]<<16)+(_[1]<<8)+_[2]).toString(16).slice(1):(_.length==4?"rgba(":"rgb(")+_.join(",")+")"},toCanvasStyle:function(d,_){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var m=this._components,w=m[0],y=w._stops,v=m[1],C=m[2],T=m[3],N=_&&_.inverted(),k;if(N&&(v=N._transformPoint(v),C=N._transformPoint(C),T&&(T=N._transformPoint(T))),w._radial){var b=C.getDistance(v);if(T){var S=T.subtract(v);S.getLength()>b&&(T=v.add(S.normalize(b-.1)))}var x=T||v;k=d.createRadialGradient(x.x,x.y,0,v.x,v.y,b)}else k=d.createLinearGradient(v.x,v.y,C.x,C.y);for(var E=0,I=y.length;E<I;E++){var M=y[E],L=M._offset;k.addColorStop(L==null?E/(I-1):L,M._color.toCanvasStyle())}return this._canvasStyle=k},transform:function(d){if(this._type==="gradient"){for(var _=this._components,m=1,w=_.length;m<w;m++){var y=_[m];d._transformPoint(y,y,!0)}this._changed()}},statics:{_types:e,random:function(){var d=Math.random;return new Qe(d(),d(),d())},_setOwner:function(d,_,m){return d&&(d._owner&&_&&d._owner!==_&&(d=d.clone()),!d._owner^!_&&(d._owner=_||null,d._setter=m||null)),d}}})},new function(){var e={add:function(t,r){return t+r},subtract:function(t,r){return t-r},multiply:function(t,r){return t*r},divide:function(t,r){return t/r}};return h.each(e,function(t,r){this[r]=function(o){o=Qe.read(arguments);for(var l=this._type,c=this._components,f=o._convert(l),d=0,_=c.length;d<_;d++)f[d]=t(c[d],f[d]);return new Qe(l,f,this._alpha!=null?t(this._alpha,o.getAlpha()):null)}},{})}),qt=h.extend({_class:"Gradient",initialize:function(t,r){this._id=ie.get(),t&&h.isPlainObject(t)&&(this.set(t),t=r=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof r=="string"&&r==="radial"||r||!1)},_serialize:function(e,t){return t.add(this,function(){return h.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length||(this._owners=a))},clone:function(){for(var e=[],t=0,r=this._stops.length;t<r;t++)e[t]=this._stops[t].clone();return new qt(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var r=0,o=t.length;r<o;r++)t[r]._owner=a;t=this._stops=oi.readList(e,0,{clone:!0});for(var r=0,o=t.length;r<o;r++)t[r]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,r=e._stops,o=t.length;if(o===r.length){for(var l=0;l<o;l++)if(!t[l].equals(r[l]))return!1;return!0}}return!1}}),oi=h.extend({_class:"GradientStop",initialize:function(t,r){var o=t,l=r;typeof t=="object"&&r===a&&(Array.isArray(t)&&typeof t[0]!="number"?(o=t[0],l=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(o=t.color,l=t.offset||t.rampPoint||0)),this.setColor(o),this.setOffset(l)},clone:function(){return new oi(this._color.clone(),this._offset)},_serialize:function(e,t){var r=this._color,o=this._offset;return h.serialize(o==null?[r]:[r,o],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Qe._setOwner(this._color,null),this._color=Qe._setOwner(Qe.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),Ni=h.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new z,selectedColor:null},t=h.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),r=h.set({},t,{fillColor:new Qe}),o={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},l={beans:!0},c={_class:"Style",beans:!0,initialize:function(d,_,m){this._values={},this._owner=_,this._project=_&&_._project||m||s.project,this._defaults=!_||_ instanceof Ne?t:_ instanceof Ut?r:e,d&&this.set(d)}};return h.each(t,function(f,d){var _=/Color$/.test(d),m=d==="shadowOffset",w=h.capitalize(d),y=o[d],v="set"+w,C="get"+w;c[v]=function(T){var N=this._owner,k=N&&N._children,b=k&&k.length>0&&!(N instanceof Be);if(b)for(var S=0,x=k.length;S<x;S++)k[S]._style[v](T);if((d==="selectedColor"||!b)&&d in this._defaults){var E=this._values[d];E!==T&&(_&&(E&&(Qe._setOwner(E,null),E._canvasStyle=null),T&&T.constructor===Qe&&(T=Qe._setOwner(T,N,b&&v))),this._values[d]=T,N&&N._changed(y||129))}},c[C]=function(T){var N=this._owner,k=N&&N._children,b=k&&k.length>0&&!(N instanceof Be),S;if(b&&!T)for(var x=0,E=k.length;x<E;x++){var I=k[x]._style[C]();if(!x)S=I;else if(!h.equals(S,I))return a}else if(d in this._defaults){var S=this._values[d];if(S===a)S=this._defaults[d],S&&S.clone&&(S=S.clone());else{var M=_?Qe:m?z:null;M&&!(S&&S.constructor===M)&&(this._values[d]=S=M.read([S],0,{readNull:!0,clone:!0}))}}return S&&_&&(S=Qe._setOwner(S,N,b&&v)),S},l[C]=function(T){return this._style[C](T)},l[v]=function(T){this._style[v](T)}}),h.each({Font:"FontFamily",WindingRule:"FillRule"},function(f,d){var _="get"+d,m="set"+d;c[_]=l[_]="#get"+f,c[m]=l[m]="#set"+f}),B.inject(l),c},{set:function(e){var t=e instanceof Ni,r=t?e._values:e;if(r){for(var o in r)if(o in this._defaults){var l=r[o];this[o]=l&&t&&l.clone?l.clone():l}}},equals:function(e){function t(r,o,l){var c=r._values,f=o._values,d=o._defaults;for(var _ in c){var m=c[_],w=f[_];if(!(l&&_ in f)&&!h.equals(m,w===a?d[_]:w))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;e=this.getFillColor(),e&&(e._canvasStyle=null),e=this.getStrokeColor(),e&&(e._canvasStyle=null),e=this.getShadowColor(),e&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),r=this.getFontSize();return/pt|em|%|px/.test(r)&&(r=this.getView().getPixelSize(r)),t!=null?t:r*1.2}}),je=new function(){function e(t,r,o,l){for(var c=["","webkit","moz","Moz","ms","o"],f=r[0].toUpperCase()+r.substring(1),d=0;d<6;d++){var _=c[d],m=_?_+f:r;if(m in t){if(o)t[m]=l;else return t[m];break}}}return{getStyles:function(t){var r=t&&t.nodeType!==9?t.ownerDocument:t,o=r&&r.defaultView;return o&&o.getComputedStyle(t,"")},getBounds:function(t,r){var o=t.ownerDocument,l=o.body,c=o.documentElement,f;try{f=t.getBoundingClientRect()}catch(w){f={left:0,top:0,width:0,height:0}}var d=f.left-(c.clientLeft||l.clientLeft||0),_=f.top-(c.clientTop||l.clientTop||0);if(!r){var m=o.defaultView;d+=m.pageXOffset||c.scrollLeft||l.scrollLeft,_+=m.pageYOffset||c.scrollTop||l.scrollTop}return new $(d,_,f.width,f.height)},getViewportBounds:function(t){var r=t.ownerDocument,o=r.defaultView,l=r.documentElement;return new $(0,0,o.innerWidth||l.clientWidth,o.innerHeight||l.clientHeight)},getOffset:function(t,r){return je.getBounds(t,r).getPoint()},getSize:function(t){return je.getBounds(t,!0).getSize()},isInvisible:function(t){return je.getSize(t).equals(new ee(0,0))},isInView:function(t){return!je.isInvisible(t)&&je.getViewportBounds(t).intersects(je.getBounds(t,!0))},isInserted:function(t){return g.body.contains(t)},getPrefixed:function(t,r){return t&&e(t,r)},setPrefixed:function(t,r,o){if(typeof r=="object")for(var l in r)e(t,l,!0,r[l]);else e(t,r,!0,o)}}},nt={add:function(e,t){if(e)for(var r in t)for(var o=t[r],l=r.split(/[\s,]+/g),c=0,f=l.length;c<f;c++){var d=l[c],_=e===g&&(d==="touchstart"||d==="touchmove")?{passive:!1}:!1;e.addEventListener(d,o,_)}},remove:function(e,t){if(e)for(var r in t)for(var o=t[r],l=r.split(/[\s,]+/g),c=0,f=l.length;c<f;c++)e.removeEventListener(l[c],o,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new z(t.pageX||t.clientX+g.documentElement.scrollLeft,t.pageY||t.clientY+g.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return nt.getPoint(e).subtract(je.getOffset(t||nt.getTarget(e)))}};nt.requestAnimationFrame=new function(){var e=je.getPrefixed(u,"requestAnimationFrame"),t=!1,r=[],o;function l(){var c=r;r=[];for(var f=0,d=c.length;f<d;f++)c[f]();t=e&&r.length,t&&e(l)}return function(c){r.push(c),e?t||(e(l),t=!0):o||(o=setInterval(l,1e3/60))}};var et=h.extend(P,{_class:"View",initialize:function e(t,r){function o(y){return r[y]||parseInt(r.getAttribute(y),10)}function l(){var y=je.getSize(r);return y.isNaN()||y.isZero()?new ee(o("width"),o("height")):y}var c;if(u&&r){this._id=r.getAttribute("id"),this._id==null&&r.setAttribute("id",this._id="paper-view-"+e._id++),nt.add(r,this._viewEvents);var f="none";if(je.setPrefixed(r.style,{userDrag:f,userSelect:f,touchCallout:f,contentZooming:f,tapHighlightColor:"rgba(0,0,0,0)"}),O.hasAttribute(r,"resize")){var d=this;nt.add(u,this._windowEvents={resize:function(){d.setViewSize(l())}})}if(c=l(),O.hasAttribute(r,"stats")&&typeof Stats!="undefined"){this._stats=new Stats;var _=this._stats.domElement,m=_.style,w=je.getOffset(r);m.position="absolute",m.left=w.x+"px",m.top=w.y+"px",g.body.appendChild(_)}}else c=new ee(r),r=null;this._project=t,this._scope=t._scope,this._element=r,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(c.width,c.height),this._viewSize=c,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new te)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!s.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;et._focused===this&&(et._focused=null),et._views.splice(et._views.indexOf(this),1),delete et._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),nt.remove(this._element,this._viewEvents),nt.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:h.each(B._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;nt.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!je.getPrefixed(g,"hidden")||O.getAttribute(t,"keepalive")==="true")&&je.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){s=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new h({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var r=this._frameItems;t?(r[e._id]={item:e,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete r[e._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var r=this._frameItems[t];r.item.emit("frame",new h(e,{time:r.time+=e.delta,count:r.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=a},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var e=this._viewSize;return new ce(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=ee.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var r=this._element;r&&(r.width!==e&&(r.width=e),r.height!==t&&(r.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new $(new z,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return je.isInView(this._element)},isInserted:function(){return je.isInserted(this._element)},getPixelSize:function(e){var t=this._element,r;if(t){var o=t.parentNode,l=g.createElement("div");l.style.fontSize=e,o.appendChild(l),r=parseFloat(je.getStyles(l).fontSize),o.removeChild(l)}else r=parseFloat(r);return r},getTextWidth:function(e,t){return 0}},h.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var r=arguments,o=(t?h:z).read(r),l=z.read(r,0,{readNull:!0});return this.transform(new te()[e](o,l||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new te;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=z.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform(new te().scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();t!=null&&e!=null&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new ue(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=z.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(z.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(z.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(z.read(arguments))},getEventPoint:function(e){return this.viewToProject(nt.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){g&&typeof t=="string"&&(t=g.getElementById(t));var r=u?Sr:et;return new r(e,t)}}},new function(){if(!u)return;var e,t,r=!1,o=!1;function l(V){var q=nt.getTarget(V);return q.getAttribute&&et._viewsById[q.getAttribute("id")]}function c(){var V=et._focused;if(!V||!V.isVisible()){for(var q=0,Q=et._views.length;q<Q;q++)if((V=et._views[q]).isVisible()){et._focused=t=V;break}}}function f(V,q,Q){V._handleMouseEvent("mousemove",q,Q)}var d=u.navigator,_,m,w;d.pointerEnabled||d.msPointerEnabled?(_="pointerdown MSPointerDown",m="pointermove MSPointerMove",w="pointerup pointercancel MSPointerUp MSPointerCancel"):(_="touchstart",m="touchmove",w="touchend touchcancel","ontouchstart"in u&&d.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(_+=" mousedown",m+=" mousemove",w+=" mouseup"));var y={},v={mouseout:function(V){var q=et._focused,Q=nt.getRelatedTarget(V);if(q&&(!Q||Q.nodeName==="HTML")){var j=nt.getOffset(V,q._element),Y=j.x,re=Math.abs,oe=re(Y),de=1<<25,ye=oe-de;j.x=re(ye)<oe?ye*(Y<0?-1:1):Y,f(q,V,q.viewToProject(j))}},scroll:c};y[_]=function(V){var q=et._focused=l(V);r||(r=!0,q._handleMouseEvent("mousedown",V))},v[m]=function(V){var q=et._focused;if(!o){var Q=l(V);Q?q!==Q&&(q&&f(q,V),e||(e=q),q=et._focused=t=Q):t&&t===q&&(e&&!e.isInserted()&&(e=null),q=et._focused=e,e=null,c())}q&&f(q,V)},v[_]=function(){o=!0},v[w]=function(V){var q=et._focused;q&&r&&q._handleMouseEvent("mouseup",V),o=r=!1},nt.add(g,v),nt.add(u,{load:c});var C=!1,T=!1,N={doubleclick:"click",mousedrag:"mousemove"},k=!1,b,S,x,E,I,M,L,R;function F(V,q,Q,j,Y,re,oe){var de=!1,ye;function xe(he,fe){if(he.responds(fe)){if(ye||(ye=new un(fe,j,Y,q||he,re?Y.subtract(re):null)),he.emit(fe,ye)&&(C=!0,ye.prevented&&(T=!0),ye.stopped))return de=!0}else{var Se=N[fe];if(Se)return xe(he,Se)}}for(;V&&V!==oe&&!xe(V,Q);)V=V._parent;return de}function H(V,q,Q,j,Y,re){return V._project.removeOn(Q),T=C=!1,I&&F(I,null,Q,j,Y,re)||q&&q!==I&&!q.isDescendant(I)&&F(q,null,Q==="mousedrag"?"mousemove":Q,j,Y,re,I)||F(V,I||q||V,Q,j,Y,re)}var G={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:y,_handleMouseEvent:function(V,q,Q){var j=this._itemEvents,Y=j.native[V],re=V==="mousemove",oe=this._scope.tool,de=this;function ye(Oe){return j.virtual[Oe]||de.responds(Oe)||oe&&oe.responds(Oe)}re&&r&&ye("mousedrag")&&(V="mousedrag"),Q||(Q=this.getEventPoint(q));var xe=this.getBounds().contains(Q),he=Y&&xe&&de._project.hitTest(Q,{tolerance:0,fill:!0,stroke:!0}),fe=he&&he.item||null,Se=!1,Ce={};if(Ce[V.substr(5)]=!0,Y&&fe!==E&&(E&&F(E,null,"mouseleave",q,Q),fe&&F(fe,null,"mouseenter",q,Q),E=fe),k^xe&&(F(this,null,xe?"mouseenter":"mouseleave",q,Q),Se=!0),(xe||Ce.drag)&&!Q.equals(S)&&(H(this,fe,re?V:"mousemove",q,Q,S),Se=!0),k=xe,Ce.down&&xe||Ce.up&&b){if(H(this,fe,V,q,Q,b),Ce.down){if(R=fe===M&&Date.now()-L<300,x=M=fe,!T&&fe){for(var Te=fe;Te&&!Te.responds("mousedrag");)Te=Te._parent;Te&&(I=fe)}b=Q}else Ce.up&&(!T&&fe===x&&(L=Date.now(),H(this,fe,R?"doubleclick":"click",q,Q,b),R=!1),x=I=null);k=!1,Se=!0}S=Q,Se&&oe&&(C=oe._handleMouseEvent(V,q,Q,Ce)||C),q.cancelable!==!1&&(C&&!Ce.move||Ce.down&&ye("mouseup"))&&q.preventDefault()},_handleKeyEvent:function(V,q,Q,j){var Y=this._scope,re=Y.tool,oe;function de(ye){ye.responds(V)&&(s=Y,ye.emit(V,oe=oe||new er(V,q,Q,j)))}this.isVisible()&&(de(this),re&&re.responds(V)&&de(re))},_countItemEvent:function(V,q){var Q=this._itemEvents,j=Q.native,Y=Q.virtual;for(var re in G)j[re]=(j[re]||0)+(G[re][V]||0)*q;Y[V]=(Y[V]||0)+q},statics:{updateFocus:c,_resetState:function(){r=o=C=k=!1,e=t=b=S=x=E=I=M=L=R=null}}}}),Sr=et.extend({_class:"CanvasView",initialize:function(t,r){if(!(r instanceof u.HTMLCanvasElement)){var o=ee.read(arguments,1);if(o.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+h.slice(arguments,1));r=mt.getCanvas(o)}var l=this._context=r.getContext("2d");if(l.save(),this._pixelRatio=1,!/^off|false$/.test(O.getAttribute(r,"hidpi"))){var c=u.devicePixelRatio||1,f=je.getPrefixed(l,"backingStorePixelRatio")||1;this._pixelRatio=c/f}et.call(this,t,r),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,r){var o=this._pixelRatio;if(e.base.call(this,t*o,r*o),o!==1){var l=this._element,c=this._context;if(!O.hasAttribute(l,"resize")){var f=l.style;f.width=t+"px",f.height=r+"px"}c.restore(),c.save(),c.scale(o,o)}},getContext:function(){return this._context},getPixelSize:function e(t){var r=s.agent,o;if(r&&r.firefox)o=e.base.call(this,t);else{var l=this._context,c=l.font;l.font=t+" serif",o=parseFloat(l.font),l.font=c}return o},getTextWidth:function(e,t){var r=this._context,o=r.font,l=0;r.font=e;for(var c=0,f=t.length;c<f;c++)l=Math.max(l,r.measureText(t[c]).width);return r.font=o,l},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,r=this._viewSize;return t.clearRect(0,0,r.width+1,r.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Mi=h.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Sn.modifiers}}),er=Mi.extend({_class:"KeyEvent",initialize:function(t,r,o,l){this.type=t,this.event=r,this.key=o,this.character=l},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Sn=new function(){var e={"	":"tab"," ":"space","\b":"backspace","\x7F":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},t={tab:"	",space:" ",enter:"\r"},r={},o={},l,c,f=new h({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var m=s&&s.agent;return m&&m.mac?this.meta:this.control}}});function d(m){var w=m.key||m.keyIdentifier;return w=/^U\+/.test(w)?String.fromCharCode(parseInt(w.substr(2),16)):/^Arrow[A-Z]/.test(w)?w.substr(5):w==="Unidentified"||w===a?String.fromCharCode(m.keyCode):w,e[w]||(w.length>1?h.hyphenate(w):w.toLowerCase())}function _(m,w,y,v){var C=et._focused,T;if(r[w]=m,m?o[w]=y:delete o[w],w.length>1&&(T=h.camelize(w))in f){f[T]=m;var N=s&&s.agent;if(T==="meta"&&N&&N.mac)if(m)l={};else{for(var k in l)k in o&&_(!1,k,l[k],v);l=null}}else m&&l&&(l[w]=y);C&&C._handleKeyEvent(m?"keydown":"keyup",v,w,y)}return nt.add(g,{keydown:function(m){var w=d(m),y=s&&s.agent;w.length>1||y&&y.chrome&&(m.altKey||y.mac&&m.metaKey||!y.mac&&m.ctrlKey)?_(!0,w,t[w]||(w.length>1?"":w),m):c=w},keypress:function(m){if(c){var w=d(m),y=m.charCode,v=y>=32?String.fromCharCode(y):w.length>1?"":w;w!==c&&(w=v.toLowerCase()),_(!0,w,v,m),c=null}},keyup:function(m){var w=d(m);w in o&&_(!1,w,o[w],m)}}),nt.add(u,{blur:function(m){for(var w in o)_(!1,w,o[w],m)}}),{modifiers:f,isDown:function(m){return!!r[m]}}},un=Mi.extend({_class:"MouseEvent",initialize:function(t,r,o,l,c){this.type=t,this.event=r,this.point=o,this.target=l,this.delta=c},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),tr=Mi.extend({_class:"ToolEvent",_item:null,initialize:function(t,r,o){this.tool=t,this.type=r,this.event=o},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,r=t._parent;/^(Group|CompoundPath)$/.test(r._class);)t=r,r=r._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ir=D.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){D.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,e!=null&&this._maxDistance!=null&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,this._minDistance!=null&&e!=null&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,r,o){s=this._scope,o.drag&&!this.responds(e)&&(e="mousemove");var l=o.move||o.drag,c=this.responds(e),f=this.minDistance,d=this.maxDistance,_=!1,m=this;function w(v,C){var T=r,N=l?m._point:m._downPoint||T;if(l){if(m._moveCount>=0&&T.equals(N))return!1;if(N&&(v!=null||C!=null)){var k=T.subtract(N),b=k.getLength();if(b<(v||0))return!1;C&&(T=N.add(k.normalize(Math.min(b,C))))}m._moveCount++}return m._point=T,m._lastPoint=N||T,o.down&&(m._moveCount=-1,m._downPoint=T,m._downCount++),!0}function y(){c&&(_=m.emit(e,new tr(m,e,t))||_)}if(o.down)w(),y();else if(o.up)w(null,d),y();else if(c)for(;w(f,d);)y();return _}}),Cn=h.extend(P,{_class:"Tween",statics:{easings:new h({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+2*(2-e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,r,o,l,c,f){this.object=t;var d=typeof c,_=d==="function";this.type=_?d:d==="string"?c:"linear",this.easing=_?c:e.easings[this.type],this.duration=l,this.running=!1,this._then=null,this._startTime=null;var m=r||o;this._keys=m?Object.keys(m):[],this._parsedKeys=this._parseKeys(this._keys),this._from=m&&this._getState(r),this._to=m&&this._getState(o),f!==!1&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),r=this._keys,o=function(w){return typeof w=="function"?w(t,e):w},l=0,c=r&&r.length;l<c;l++){var f=r[l],d=o(this._from[f]),_=o(this._to[f]),m=d&&_&&d.__add&&_.__add?_.__subtract(d).__multiply(t).__add(d):(_-d)*t+d;this._setProperty(this._parsedKeys[f],m)}this.responds("update")&&this.emit("update",new h({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,r=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(r)},_getState:function(e){for(var t=this._keys,r={},o=0,l=t.length;o<l;o++){var c=t[o],f=this._parsedKeys[c],d=this._getProperty(f),_;if(e){var m=this._resolveValue(d,e[c]);this._setProperty(f,m),_=this._getProperty(f),_=_&&_.clone?_.clone():_,this._setProperty(f,d)}else _=d&&d.clone?d.clone():d;r[c]=_}return r},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&t.length===2){var r=t[0];return r&&r.match&&r.match(/^[+\-\*\/]=/)?this._calculate(e,r[0],t[1]):t}else if(typeof t=="string"){var o=t.match(/^[+\-*/]=(.*)/);if(o){var l=JSON.parse(o[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],l)}}}return t},_calculate:function(e,t,r){return s.PaperScript.calculateBinary(e,t,r)},_parseKeys:function(e){for(var t={},r=0,o=e.length;r<o;r++){var l=e[r],c=l.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[l]=c.split("/")}return t},_getProperty:function(e,t){for(var r=this.object,o=0,l=e.length-(t||0);o<l&&r;o++)r=r[e[o]];return r},_setProperty:function(e,t){var r=this._getProperty(e,1);r&&(r[e[e.length-1]]=t)}}),It={request:function(e){var t=new i.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,h.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var r=t.status;r===0||r===200?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var r=t.status,o='Could not load "'+e.url+'" (Status: '+r+")";if(e.onError)e.onError(o,r);else throw new Error(o)},t.send(null)}},mt=h.exports.CanvasProvider={canvases:[],getCanvas:function(e,t){if(!u)return null;var r,o=!0;typeof e=="object"&&(t=e.height,e=e.width),this.canvases.length?r=this.canvases.pop():(r=g.createElement("canvas"),o=!1);var l=r.getContext("2d");if(!l)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===e&&r.height===t?o&&l.clearRect(0,0,e+1,t+1):(r.width=e,r.height=t),l.save(),r},getContext:function(e,t){var r=this.getCanvas(e,t);return r?r.getContext("2d"):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},Nt=new function(){var e=Math.min,t=Math.max,r=Math.abs,o,l,c,f,d,_,m,w,y,v,C;function T(I,M,L){return .2989*I+.587*M+.114*L}function N(I,M,L,H){var F=H-T(I,M,L);y=I+F,v=M+F,C=L+F;var H=T(y,v,C),G=e(y,v,C),V=t(y,v,C);if(G<0){var q=H-G;y=H+(y-H)*H/q,v=H+(v-H)*H/q,C=H+(C-H)*H/q}if(V>255){var Q=255-H,j=V-H;y=H+(y-H)*Q/j,v=H+(v-H)*Q/j,C=H+(C-H)*Q/j}}function k(I,M,L){return t(I,M,L)-e(I,M,L)}function b(I,M,L,R){var F=[I,M,L],H=t(I,M,L),G=e(I,M,L),V;G=G===I?0:G===M?1:2,H=H===I?0:H===M?1:2,V=e(G,H)===0?t(G,H)===1?2:1:0,F[H]>F[G]?(F[V]=(F[V]-F[G])*R/(F[H]-F[G]),F[H]=R):F[V]=F[H]=0,F[G]=0,y=F[0],v=F[1],C=F[2]}var S={multiply:function(){y=d*o/255,v=_*l/255,C=m*c/255},screen:function(){y=d+o-d*o/255,v=_+l-_*l/255,C=m+c-m*c/255},overlay:function(){y=d<128?2*d*o/255:255-2*(255-d)*(255-o)/255,v=_<128?2*_*l/255:255-2*(255-_)*(255-l)/255,C=m<128?2*m*c/255:255-2*(255-m)*(255-c)/255},"soft-light":function(){var I=o*d/255;y=I+d*(255-(255-d)*(255-o)/255-I)/255,I=l*_/255,v=I+_*(255-(255-_)*(255-l)/255-I)/255,I=c*m/255,C=I+m*(255-(255-m)*(255-c)/255-I)/255},"hard-light":function(){y=o<128?2*o*d/255:255-2*(255-o)*(255-d)/255,v=l<128?2*l*_/255:255-2*(255-l)*(255-_)/255,C=c<128?2*c*m/255:255-2*(255-c)*(255-m)/255},"color-dodge":function(){y=d===0?0:o===255?255:e(255,255*d/(255-o)),v=_===0?0:l===255?255:e(255,255*_/(255-l)),C=m===0?0:c===255?255:e(255,255*m/(255-c))},"color-burn":function(){y=d===255?255:o===0?0:t(0,255-(255-d)*255/o),v=_===255?255:l===0?0:t(0,255-(255-_)*255/l),C=m===255?255:c===0?0:t(0,255-(255-m)*255/c)},darken:function(){y=d<o?d:o,v=_<l?_:l,C=m<c?m:c},lighten:function(){y=d>o?d:o,v=_>l?_:l,C=m>c?m:c},difference:function(){y=d-o,y<0&&(y=-y),v=_-l,v<0&&(v=-v),C=m-c,C<0&&(C=-C)},exclusion:function(){y=d+o*(255-d-d)/255,v=_+l*(255-_-_)/255,C=m+c*(255-m-m)/255},hue:function(){b(o,l,c,k(d,_,m)),N(y,v,C,T(d,_,m))},saturation:function(){b(d,_,m,k(o,l,c)),N(y,v,C,T(d,_,m))},luminosity:function(){N(d,_,m,T(o,l,c))},color:function(){N(o,l,c,T(d,_,m))},add:function(){y=e(d+o,255),v=e(_+l,255),C=e(m+c,255)},subtract:function(){y=t(d-o,0),v=t(_-l,0),C=t(m-c,0)},average:function(){y=(d+o)/2,v=(_+l)/2,C=(m+c)/2},negation:function(){y=255-r(255-o-d),v=255-r(255-l-_),C=255-r(255-c-m)}},x=this.nativeModes=h.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(I){this[I]=!0},{}),E=mt.getContext(1,1);E&&(h.each(S,function(I,M){var L=M==="darken",R=!1;E.save();try{E.fillStyle=L?"#300":"#a00",E.fillRect(0,0,1,1),E.globalCompositeOperation=M,E.globalCompositeOperation===M&&(E.fillStyle=L?"#a00":"#300",E.fillRect(0,0,1,1),R=E.getImageData(0,0,1,1).data[0]!==L?170:51)}catch(F){}E.restore(),x[M]=R}),mt.release(E)),this.process=function(I,M,L,R,F){var H=M.canvas,G=I==="normal";if(G||x[I])L.save(),L.setTransform(1,0,0,1,0,0),L.globalAlpha=R,G||(L.globalCompositeOperation=I),L.drawImage(H,F.x,F.y),L.restore();else{var V=S[I];if(!V)return;for(var q=L.getImageData(F.x,F.y,H.width,H.height),Q=q.data,j=M.getImageData(0,0,H.width,H.height).data,Y=0,re=Q.length;Y<re;Y+=4){o=j[Y],d=Q[Y],l=j[Y+1],_=Q[Y+1],c=j[Y+2],m=Q[Y+2],f=j[Y+3],w=Q[Y+3],V();var oe=f*R/255,de=1-oe;Q[Y]=oe*y+de*d,Q[Y+1]=oe*v+de*_,Q[Y+2]=oe*C+de*m,Q[Y+3]=f*R+de*w}L.putImageData(q,F.x,F.y)}}},Tt=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",r="http://www.w3.org/1999/xlink",o={href:r,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function l(d,_,m){return f(g.createElementNS(e,d),_,m)}function c(d,_){var m=o[_],w=m?d.getAttributeNS(m,_):d.getAttribute(_);return w==="null"?null:w}function f(d,_,m){for(var w in _){var y=_[w],v=o[w];typeof y=="number"&&m&&(y=m.number(y)),v?d.setAttributeNS(v,w,y):d.setAttribute(w,y)}return d}return{svg:e,xmlns:t,xlink:r,create:l,get:c,set:f}},rt=h.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof Ae||e instanceof Fe||e instanceof Ut)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var r=h.capitalize(t),o=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:o,fromSVG:o&&h.each(o,function(l,c){this[l]=c},{}),exportFilter:e[3],get:"get"+r,set:"set"+r}},{});new function(){var e;function t(S,x,E){var I=new h,M=S.getTranslation();if(x){var L;S.isInvertible()?(S=S._shiftless(),L=S._inverseTransform(M),M=null):L=new z,I[E?"cx":"x"]=L.x,I[E?"cy":"y"]=L.y}if(!S.isIdentity()){var R=S.decompose();if(R){var F=[],H=R.rotation,G=R.scaling,V=R.skewing;M&&!M.isZero()&&F.push("translate("+e.point(M)+")"),H&&F.push("rotate("+e.number(H)+")"),(!X.isZero(G.x-1)||!X.isZero(G.y-1))&&F.push("scale("+e.point(G)+")"),V.x&&F.push("skewX("+e.number(V.x)+")"),V.y&&F.push("skewY("+e.number(V.y)+")"),I.transform=F.join(" ")}else I.transform="matrix("+S.getValues().join(",")+")"}return I}function r(S,x){for(var E=t(S._matrix),I=S._children,M=Tt.create("g",E,e),L=0,R=I.length;L<R;L++){var F=I[L],H=k(F,x);if(H)if(F.isClipMask()){var G=Tt.create("clipPath");G.appendChild(H),T(F,G,"clip"),Tt.set(M,{"clip-path":"url(#"+G.id+")"})}else M.appendChild(H)}return M}function o(S,x){var E=t(S._matrix,!0),I=S.getSize(),M=S.getImage();return E.x-=I.width/2,E.y-=I.height/2,E.width=I.width,E.height=I.height,E.href=x.embedImages==!1&&M&&M.src||S.toDataURL(),Tt.create("image",E,e)}function l(S,x){var E=x.matchShapes;if(E){var I=S.toShape(!1);if(I)return c(I)}var M=S._segments,L=M.length,R,F=t(S._matrix);if(E&&L>=2&&!S.hasHandles())if(L>2){R=S._closed?"polygon":"polyline";for(var H=[],G=0;G<L;G++)H.push(e.point(M[G]._point));F.points=H.join(" ")}else{R="line";var V=M[0]._point,q=M[1]._point;F.set({x1:V.x,y1:V.y,x2:q.x,y2:q.y})}else R="path",F.d=S.getPathData(null,x.precision);return Tt.create(R,F,e)}function c(S){var x=S._type,E=S._radius,I=t(S._matrix,!0,x!=="rectangle");if(x==="rectangle"){x="rect";var M=S._size,L=M.width,R=M.height;I.x-=L/2,I.y-=R/2,I.width=L,I.height=R,E.isZero()&&(E=null)}return E&&(x==="circle"?I.r=E:(I.rx=E.width,I.ry=E.height)),Tt.create(x,I,e)}function f(S,x){var E=t(S._matrix),I=S.getPathData(null,x.precision);return I&&(E.d=I),Tt.create("path",E,e)}function d(S,x){var E=t(S._matrix,!0),I=S._definition,M=C(I,"symbol"),L=I._item,R=L.getStrokeBounds();return M||(M=Tt.create("symbol",{viewBox:e.rectangle(R)}),M.appendChild(k(L,x)),T(I,M,"symbol")),E.href="#"+M.id,E.x+=R.x,E.y+=R.y,E.width=R.width,E.height=R.height,E.overflow="visible",Tt.create("use",E,e)}function _(S){var x=C(S,"color");if(!x){var E=S.getGradient(),I=E._radial,M=S.getOrigin(),L=S.getDestination(),R;if(I){R={cx:M.x,cy:M.y,r:M.getDistance(L)};var F=S.getHighlight();F&&(R.fx=F.x,R.fy=F.y)}else R={x1:M.x,y1:M.y,x2:L.x,y2:L.y};R.gradientUnits="userSpaceOnUse",x=Tt.create((I?"radial":"linear")+"Gradient",R,e);for(var H=E._stops,G=0,V=H.length;G<V;G++){var q=H[G],Q=q._color,j=Q.getAlpha(),Y=q._offset;R={offset:Y==null?G/(V-1):Y},Q&&(R["stop-color"]=Q.toCSS(!0)),j<1&&(R["stop-opacity"]=j),x.appendChild(Tt.create("stop",R,e))}T(S,x,"color")}return"url(#"+x.id+")"}function m(S){var x=Tt.create("text",t(S._matrix,!0),e);return x.textContent=S._content,x}var w={Group:r,Layer:r,Raster:o,Path:l,Shape:c,CompoundPath:f,SymbolItem:d,PointText:m};function y(S,x,E){var I={},M=!E&&S.getParent(),L=[];return S._name!=null&&(I.id=S._name),h.each(rt,function(R){var F=R.get,H=R.type,G=S[F]();if(R.exportFilter?R.exportFilter(S,G):!M||!h.equals(M[F](),G)){if(H==="color"&&G!=null){var V=G.getAlpha();V<1&&(I[R.attribute+"-opacity"]=V)}H==="style"?L.push(R.attribute+": "+G):I[R.attribute]=G==null?"none":H==="color"?G.gradient?_(G):G.toCSS(!0):H==="array"?G.join(","):H==="lookup"?R.toSVG[G]:G}}),L.length&&(I.style=L.join(";")),I.opacity===1&&delete I.opacity,S._visible||(I.visibility="hidden"),Tt.set(x,I,e)}var v;function C(S,x){return v||(v={ids:{},svgs:{}}),S&&v.svgs[x+"-"+(S._id||S.__id||(S.__id=ie.get("svg")))]}function T(S,x,E){v||C();var I=v.ids[E]=(v.ids[E]||0)+1;x.id=E+"-"+I,v.svgs[E+"-"+(S._id||S.__id)]=x}function N(S,x){var E=S,I=null;if(v){E=S.nodeName.toLowerCase()==="svg"&&S;for(var M in v.svgs)I||(E||(E=Tt.create("svg"),E.appendChild(S)),I=E.insertBefore(Tt.create("defs"),E.firstChild)),I.appendChild(v.svgs[M]);v=null}return x.asString?new i.XMLSerializer().serializeToString(E):E}function k(S,x,E){var I=w[S._class],M=I&&I(S,x);if(M){var L=x.onExport;L&&(M=L(S,M,x)||M);var R=JSON.stringify(S._data);R&&R!=="{}"&&R!=="null"&&M.setAttribute("data-paper-data",R)}return M&&y(S,M,E)}function b(S){return S||(S={}),e=new K(S.precision),S}B.inject({exportSVG:function(S){return S=b(S),N(k(this,S,!0),S)}}),we.inject({exportSVG:function(S){S=b(S);var x=this._children,E=this.getView(),I=h.pick(S.bounds,"view"),M=S.matrix||I==="view"&&E._matrix,L=M&&te.read([M]),R=I==="view"?new $([0,0],E.getViewSize()):I==="content"?B._getBounds(x,L,{stroke:!0}).rect:$.read([I],0,{readNull:!0}),F={version:"1.1",xmlns:Tt.svg,"xmlns:xlink":Tt.xlink};R&&(F.width=R.width,F.height=R.height,(R.x||R.x===0||R.y||R.y===0)&&(F.viewBox=e.rectangle(R)));var H=Tt.create("svg",F,e),G=H;L&&!L.isIdentity()&&(G=H.appendChild(Tt.create("g",t(L),e)));for(var V=0,q=x.length;V<q;V++)G.appendChild(k(x[V],S,!0));return N(H,S)}})},new function(){var e={},t;function r(x,E,I,M,L,R){var F=Tt.get(x,E)||R,H=F==null?M?null:I?"":0:I?F:parseFloat(F);return/%\s*$/.test(F)?H/100*(L?1:t[/x|^width/.test(E)?"width":"height"]):H}function o(x,E,I,M,L,R,F){return E=r(x,E||"x",!1,M,L,R),I=r(x,I||"y",!1,M,L,F),M&&(E==null||I==null)?null:new z(E,I)}function l(x,E,I,M,L){return E=r(x,E||"width",!1,M,L),I=r(x,I||"height",!1,M,L),M&&(E==null||I==null)?null:new ee(E,I)}function c(x,E,I){return x==="none"?null:E==="number"?parseFloat(x):E==="array"?x?x.split(/[\s,]+/g).map(parseFloat):[]:E==="color"?k(x)||x:E==="lookup"?I[x]:x}function f(x,E,I,M){var L=x.childNodes,R=E==="clippath",F=E==="defs",H=new Ne,G=H._project,V=G._currentStyle,q=[];if(!R&&!F&&(H=N(H,x,M),G._currentStyle=H._style.clone()),M)for(var Q=x.querySelectorAll("defs"),j=0,Y=Q.length;j<Y;j++)b(Q[j],I,!1);for(var j=0,Y=L.length;j<Y;j++){var re=L[j],oe;re.nodeType===1&&!/^defs$/i.test(re.nodeName)&&(oe=b(re,I,!1))&&!(oe instanceof Ke)&&q.push(oe)}return H.addChildren(q),R&&(H=N(H.reduce(),x,M)),G._currentStyle=V,(R||F)&&(H.remove(),H=null),H}function d(x,E){for(var I=x.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),M=[],L=0,R=I.length;L<R;L+=2)M.push(new z(parseFloat(I[L]),parseFloat(I[L+1])));var F=new be(M);return E==="polygon"&&F.closePath(),F}function _(x){return Ae.create(x.getAttribute("d"))}function m(x,E){var I=(r(x,"href",!0)||"").substring(1),M=E==="radialgradient",L;if(I)L=e[I].getGradient(),L._radial^M&&(L=L.clone(),L._radial=M);else{for(var R=x.childNodes,F=[],H=0,G=R.length;H<G;H++){var V=R[H];V.nodeType===1&&F.push(N(new oi,V))}L=new qt(F,M)}var q,Q,j,Y=r(x,"gradientUnits",!0)!=="userSpaceOnUse";M?(q=o(x,"cx","cy",!1,Y,"50%","50%"),Q=q.add(r(x,"r",!1,!1,Y,"50%"),0),j=o(x,"fx","fy",!0,Y)):(q=o(x,"x1","y1",!1,Y,"0%","0%"),Q=o(x,"x2","y2",!1,Y,"100%","0%"));var re=N(new Qe(L,q,Q,j),x);return re._scaleToBounds=Y,null}var w={"#document":function(x,E,I,M){for(var L=x.childNodes,R=0,F=L.length;R<F;R++){var H=L[R];if(H.nodeType===1)return b(H,I,M)}},g:f,svg:f,clippath:f,polygon:d,polyline:d,path:_,lineargradient:m,radialgradient:m,image:function(x){var E=new Ve(r(x,"href",!0));return E.on("load",function(){var I=l(x);this.setSize(I);var M=o(x).add(I.divide(2));this._matrix.append(new te().translate(M))}),E},symbol:function(x,E,I,M){return new Ke(f(x,E,I,M),!0)},defs:f,use:function(x){var E=(r(x,"href",!0)||"").substring(1),I=e[E],M=o(x);return I?I instanceof Ke?I.place(M):I.clone().translate(M):null},circle:function(x){return new Fe.Circle(o(x,"cx","cy"),r(x,"r"))},ellipse:function(x){return new Fe.Ellipse({center:o(x,"cx","cy"),radius:l(x,"rx","ry")})},rect:function(x){return new Fe.Rectangle(new $(o(x),l(x)),l(x,"rx","ry"))},line:function(x){return new be.Line(o(x,"x1","y1"),o(x,"x2","y2"))},text:function(x){var E=new Gt(o(x).add(o(x,"dx","dy")));return E.setContent(x.textContent.trim()||""),E},switch:f};function y(x,E,I,M){if(x.transform){for(var L=(M.getAttribute(I)||"").split(/\)\s*/g),R=new te,F=0,H=L.length;F<H;F++){var G=L[F];if(!G)break;for(var V=G.split(/\(\s*/),q=V[0],Q=V[1].split(/[\s,]+/g),j=0,Y=Q.length;j<Y;j++)Q[j]=parseFloat(Q[j]);switch(q){case"matrix":R.append(new te(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]));break;case"rotate":R.rotate(Q[0],Q[1]||0,Q[2]||0);break;case"translate":R.translate(Q[0],Q[1]||0);break;case"scale":R.scale(Q);break;case"skewX":R.skew(Q[0],0);break;case"skewY":R.skew(0,Q[0]);break}}x.transform(R)}}function v(x,E,I){var M=I==="fill-opacity"?"getFillColor":"getStrokeColor",L=x[M]&&x[M]();L&&L.setAlpha(parseFloat(E))}var C=h.set(h.each(rt,function(x){this[x.attribute]=function(E,I){if(E[x.set]&&(E[x.set](c(I,x.type,x.fromSVG)),x.type==="color")){var M=E[x.get]();if(M&&M._scaleToBounds){var L=E.getBounds();M.transform(new te().translate(L.getPoint()).scale(L.getSize()))}}}},{}),{id:function(x,E){e[E]=x,x.setName&&x.setName(E)},"clip-path":function(x,E){var I=k(E);if(I)if(I=I.clone(),I.setClipMask(!0),x instanceof Ne)x.insertChild(0,I);else return new Ne(I,x)},gradientTransform:y,transform:y,"fill-opacity":v,"stroke-opacity":v,visibility:function(x,E){x.setVisible&&x.setVisible(E==="visible")},display:function(x,E){x.setVisible&&x.setVisible(E!==null)},"stop-color":function(x,E){x.setColor&&x.setColor(E)},"stop-opacity":function(x,E){x._color&&x._color.setAlpha(parseFloat(E))},offset:function(x,E){if(x.setOffset){var I=E.match(/(.*)%$/);x.setOffset(I?I[1]/100:parseFloat(E))}},viewBox:function(x,E,I,M,L){var R=new $(c(E,"array")),F=l(M,null,null,!0),H,G;if(x instanceof Ne){var V=F?F.divide(R.getSize()):1,G=new te().scale(V).translate(R.getPoint().negate());H=x}else x instanceof Ke&&(F&&R.setSize(F),H=x._item);if(H){if(T(M,"overflow",L)!=="visible"){var q=new Fe.Rectangle(R);q.setClipMask(!0),H.addChild(q)}G&&H.transform(G)}}});function T(x,E,I){var M=x.attributes[E],L=M&&M.value;if(!L&&x.style){var R=h.camelize(E);L=x.style[R],!L&&I.node[R]!==I.parent[R]&&(L=I.node[R])}return L?L==="none"?null:L:a}function N(x,E,I){var M=E.parentNode,L={node:je.getStyles(E)||{},parent:!I&&!/^defs$/i.test(M.tagName)&&je.getStyles(M)||{}};return h.each(C,function(R,F){var H=T(E,F,L);x=H!==a&&R(x,H,F,E,L)||x}),x}function k(x){var E=x&&x.match(/\((?:["'#]*)([^"')]+)/),I=E&&E[1],M=I&&e[u?I.replace(u.location.href.split("#")[0]+"#",""):I];return M&&M._scaleToBounds&&(M=M.clone(),M._scaleToBounds=!0),M}function b(x,E,I){var M=x.nodeName.toLowerCase(),L=M!=="#document",R=g.body,F,H,G;I&&L&&(t=s.getView().getSize(),t=l(x,null,null,!0)||t,F=Tt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),H=x.parentNode,G=x.nextSibling,F.appendChild(x),R.appendChild(F));var V=s.settings,q=V.applyMatrix,Q=V.insertItems;V.applyMatrix=!1,V.insertItems=!1;var j=w[M],Y=j&&j(x,M,E,I)||null;if(V.insertItems=Q,V.applyMatrix=q,Y){L&&!(Y instanceof Ne)&&(Y=N(Y,x,I));var re=E.onImport,oe=L&&x.getAttribute("data-paper-data");re&&(Y=re(x,Y,E)||Y),E.expandShapes&&Y instanceof Fe&&(Y.remove(),Y=Y.toPath()),oe&&(Y._data=JSON.parse(oe))}return F&&(R.removeChild(F),H&&(G?H.insertBefore(x,G):H.appendChild(x))),I&&(e={},Y&&h.pick(E.applyMatrix,q)&&Y.matrix.apply(!0,!0)),Y}function S(x,E,I){if(!x)return null;E=typeof E=="function"?{onLoad:E}:E||{};var M=s,L=null;function R(V){try{var q=typeof V=="object"?V:new i.DOMParser().parseFromString(V.trim(),"image/svg+xml");if(!q.nodeName)throw q=null,new Error("Unsupported SVG source: "+x);s=M,L=b(q,E,!0),(!E||E.insert!==!1)&&I._insertItem(a,L);var Q=E.onLoad;Q&&Q(L,V)}catch(j){F(j)}}function F(V,q){var Q=E.onError;if(Q)Q(V,q);else throw new Error(V)}if(typeof x=="string"&&!/^[\s\S]*</.test(x)){var H=g.getElementById(x);H?R(H):It.request({url:x,async:!0,onLoad:R,onError:F})}else if(typeof File!="undefined"&&x instanceof File){var G=new FileReader;return G.onload=function(){R(G.result)},G.onerror=function(){F(G.error)},G.readAsText(x)}else R(x);return L}B.inject({importSVG:function(x,E){return S(x,E,this)}}),we.inject({importSVG:function(x,E){return this.activate(),S(x,E,this)}})},h.exports.PaperScript=function(){var e=this,t=e.acorn;if(!t&&typeof y_!="undefined")try{t=S_()}catch(N){}if(!t){var r,o;t=r=o={},function(N,k){if(typeof r=="object"&&typeof o=="object")return k(r);if(typeof a=="function"&&a.amd)return a(["exports"],k);k(N.acorn||(N.acorn={}))}(this,function(N){N.version="0.5.0";var k,b,S,x;N.parse=function(se,ae){return b=String(se),S=b.length,I(ae),Lh(),ug(k.program)};var E=N.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function I(se){k=se||{};for(var ae in E)Object.prototype.hasOwnProperty.call(k,ae)||(k[ae]=E[ae]);x=k.sourceFile||null}var M=N.getLineInfo=function(se,ae){for(var ve=1,ke=0;;){br.lastIndex=ke;var Ye=br.exec(se);if(Ye&&Ye.index<ae)++ve,ke=Ye.index+Ye[0].length;else break}return{line:ve,column:ae-ke}};N.tokenize=function(se,ae){b=String(se),S=b.length,I(ae),Lh();var ve={};function ke(Ye){return oe=F,sr(Ye),ve.start=R,ve.end=F,ve.startLoc=H,ve.endLoc=G,ve.type=V,ve.value=q,ve}return ke.jumpTo=function(Ye,Je){if(L=Ye,k.locations){j=1,Y=br.lastIndex=0;for(var tt;(tt=br.exec(b))&&tt.index<Ye;)++j,Y=tt.index+tt[0].length}Q=Je,Er()},ke};var L,R,F,H,G,V,q,Q,j,Y,re,oe,de,ye,xe,he;function fe(se,ae){var ve=M(b,se);ae+=" ("+ve.line+":"+ve.column+")";var ke=new SyntaxError(ae);throw ke.pos=se,ke.loc=ve,ke.raisedAt=L,ke}var Se=[],Ce={type:"num"},Te={type:"regexp"},Oe={type:"string"},me={type:"name"},Me={type:"eof"},ze={keyword:"break"},He={keyword:"case",beforeExpr:!0},ht={keyword:"catch"},ft={keyword:"continue"},ct={keyword:"debugger"},Xe={keyword:"default"},Ze={keyword:"do",isLoop:!0},_t={keyword:"else",beforeExpr:!0},pt={keyword:"finally"},xt={keyword:"for",isLoop:!0},Kt={keyword:"function"},jt={keyword:"if"},zt={keyword:"return",beforeExpr:!0},Ge={keyword:"switch"},Pt={keyword:"throw",beforeExpr:!0},Qt={keyword:"try"},Jt={keyword:"var"},fi={keyword:"while",isLoop:!0},Cr={keyword:"with"},sa={keyword:"new",beforeExpr:!0},aa={keyword:"this"},p={keyword:"null",atomValue:null},A={keyword:"true",atomValue:!0},U={keyword:"false",atomValue:!1},Z={keyword:"in",binop:7,beforeExpr:!0},ne={break:ze,case:He,catch:ht,continue:ft,debugger:ct,default:Xe,do:Ze,else:_t,finally:pt,for:xt,function:Kt,if:jt,return:zt,switch:Ge,throw:Pt,try:Qt,var:Jt,while:fi,with:Cr,null:p,true:A,false:U,new:sa,in:Z,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:aa,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ge={type:"[",beforeExpr:!0},_e={type:"]"},Ie={type:"{",beforeExpr:!0},Re={type:"}"},qe={type:"(",beforeExpr:!0},$e={type:")"},At={type:",",beforeExpr:!0},ii={type:";",beforeExpr:!0},Ri={type:":",beforeExpr:!0},$i={type:"."},bn={type:"?",beforeExpr:!0},Ji={binop:10,beforeExpr:!0},en={isAssign:!0,beforeExpr:!0},nr={isAssign:!0,beforeExpr:!0},zp={postfix:!0,prefix:!0,isUpdate:!0},bh={prefix:!0,beforeExpr:!0},Eh={binop:1,beforeExpr:!0},kh={binop:2,beforeExpr:!0},Dp={binop:3,beforeExpr:!0},Fp={binop:4,beforeExpr:!0},Bp={binop:5,beforeExpr:!0},Vp={binop:6,beforeExpr:!0},Hp={binop:7,beforeExpr:!0},Up={binop:8,beforeExpr:!0},Gp={binop:9,prefix:!0,beforeExpr:!0},Wp={binop:10,beforeExpr:!0};N.tokTypes={bracketL:ge,bracketR:_e,braceL:Ie,braceR:Re,parenL:qe,parenR:$e,comma:At,semi:ii,colon:Ri,dot:$i,question:bn,slash:Ji,eq:en,name:me,eof:Me,num:Ce,regexp:Te,string:Oe};for(var Nh in ne)N.tokTypes["_"+Nh]=ne[Nh];function ls(se){se=se.split(" ");var ae="",ve=[];e:for(var ke=0;ke<se.length;++ke){for(var Ye=0;Ye<ve.length;++Ye)if(ve[Ye][0].length==se[ke].length){ve[Ye].push(se[ke]);continue e}ve.push([se[ke]])}function Je(St){if(St.length==1)return ae+="return str === "+JSON.stringify(St[0])+";";ae+="switch(str){";for(var Wi=0;Wi<St.length;++Wi)ae+="case "+JSON.stringify(St[Wi])+":";ae+="return true}return false;"}if(ve.length>3){ve.sort(function(St,Wi){return Wi.length-St.length}),ae+="switch(str.length){";for(var ke=0;ke<ve.length;++ke){var tt=ve[ke];ae+="case "+tt[0].length+":",Je(tt)}ae+="}"}else Je(se);return new Function("str",ae)}var qp=ls("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Kp=ls("class enum extends super const export import"),Th=ls("implements interface let package private protected public static yield"),oa=ls("eval arguments"),Qp=ls("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Zp=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ph="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",jp="\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u0620-\u0649\u0672-\u06D3\u06E7-\u06E8\u06FB-\u06FC\u0730-\u074A\u0800-\u0814\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0840-\u0857\u08E4-\u08FE\u0900-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09D7\u09DF-\u09E0\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5F-\u0B60\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2-\u0CE3\u0CE6-\u0CEF\u0D02\u0D03\u0D46-\u0D48\u0D57\u0D62-\u0D63\u0D66-\u0D6F\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E34-\u0E3A\u0E40-\u0E45\u0E50-\u0E59\u0EB4-\u0EB9\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F41-\u0F47\u0F71-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1029\u1040-\u1049\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u170E-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17B2\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1920-\u192B\u1930-\u193B\u1951-\u196D\u19B0-\u19C0\u19C8-\u19C9\u19D0-\u19D9\u1A00-\u1A15\u1A20-\u1A53\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1B46-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C00-\u1C22\u1C40-\u1C49\u1C5B-\u1C7D\u1CD0-\u1CD2\u1D00-\u1DBE\u1E01-\u1F15\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2D81-\u2D96\u2DE0-\u2DFF\u3021-\u3028\u3099\u309A\uA640-\uA66D\uA674-\uA67D\uA69F\uA6F0-\uA6F1\uA7F8-\uA800\uA806\uA80B\uA823-\uA827\uA880-\uA881\uA8B4-\uA8C4\uA8D0-\uA8D9\uA8F3-\uA8F7\uA900-\uA909\uA926-\uA92D\uA930-\uA945\uA980-\uA983\uA9B3-\uA9C0\uAA00-\uAA27\uAA40-\uAA41\uAA4C-\uAA4D\uAA50-\uAA59\uAA7B\uAAE0-\uAAE9\uAAF2-\uAAF3\uABC0-\uABE1\uABEC\uABED\uABF0-\uABF9\uFB20-\uFB28\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",Ih=new RegExp("["+Ph+"]"),Xp=new RegExp("["+Ph+jp+"]"),la=/[\n\r\u2028\u2029]/,br=/\r\n|[\n\r\u2028\u2029]/g,ua=N.isIdentifierStart=function(se){return se<65?se===36:se<91?!0:se<97?se===95:se<123?!0:se>=170&&Ih.test(String.fromCharCode(se))},Ah=N.isIdentifierChar=function(se){return se<48?se===36:se<58?!0:se<65?!1:se<91?!0:se<97?se===95:se<123?!0:se>=170&&Xp.test(String.fromCharCode(se))};function rr(){this.line=j,this.column=L-Y}function Lh(){j=1,L=Y=0,Q=!0,Er()}function ni(se,ae){F=L,k.locations&&(G=new rr),V=se,Er(),q=ae,Q=se.beforeExpr}function Yp(){var se=k.onComment&&k.locations&&new rr,ae=L,ve=b.indexOf("*/",L+=2);if(ve===-1&&fe(L-2,"Unterminated comment"),L=ve+2,k.locations){br.lastIndex=ae;for(var ke;(ke=br.exec(b))&&ke.index<L;)++j,Y=ke.index+ke[0].length}k.onComment&&k.onComment(!0,b.slice(ae+2,ve),ae,L,se,k.locations&&new rr)}function Wo(){for(var se=L,ae=k.onComment&&k.locations&&new rr,ve=b.charCodeAt(L+=2);L<S&&ve!==10&&ve!==13&&ve!==8232&&ve!==8233;)++L,ve=b.charCodeAt(L);k.onComment&&k.onComment(!1,b.slice(se+2,L),se,L,ae,k.locations&&new rr)}function Er(){for(;L<S;){var se=b.charCodeAt(L);if(se===32)++L;else if(se===13){++L;var ae=b.charCodeAt(L);ae===10&&++L,k.locations&&(++j,Y=L)}else if(se===10||se===8232||se===8233)++L,k.locations&&(++j,Y=L);else if(se>8&&se<14)++L;else if(se===47){var ae=b.charCodeAt(L+1);if(ae===42)Yp();else if(ae===47)Wo();else break}else if(se===160)++L;else if(se>=5760&&Zp.test(String.fromCharCode(se)))++L;else break}}function $p(){var se=b.charCodeAt(L+1);return se>=48&&se<=57?Mh(!0):(++L,ni($i))}function Jp(){var se=b.charCodeAt(L+1);return Q?(++L,Oh()):se===61?ri(nr,2):ri(Ji,1)}function eg(){var se=b.charCodeAt(L+1);return se===61?ri(nr,2):ri(Wp,1)}function tg(se){var ae=b.charCodeAt(L+1);return ae===se?ri(se===124?Eh:kh,2):ae===61?ri(nr,2):ri(se===124?Dp:Bp,1)}function ig(){var se=b.charCodeAt(L+1);return se===61?ri(nr,2):ri(Fp,1)}function ng(se){var ae=b.charCodeAt(L+1);return ae===se?ae==45&&b.charCodeAt(L+2)==62&&la.test(b.slice(oe,L))?(L+=3,Wo(),Er(),sr()):ri(zp,2):ae===61?ri(nr,2):ri(Gp,1)}function rg(se){var ae=b.charCodeAt(L+1),ve=1;return ae===se?(ve=se===62&&b.charCodeAt(L+2)===62?3:2,b.charCodeAt(L+ve)===61?ri(nr,ve+1):ri(Up,ve)):ae==33&&se==60&&b.charCodeAt(L+2)==45&&b.charCodeAt(L+3)==45?(L+=4,Wo(),Er(),sr()):(ae===61&&(ve=b.charCodeAt(L+2)===61?3:2),ri(Hp,ve))}function sg(se){var ae=b.charCodeAt(L+1);return ae===61?ri(Vp,b.charCodeAt(L+2)===61?3:2):ri(se===61?en:bh,1)}function ag(se){switch(se){case 46:return $p();case 40:return++L,ni(qe);case 41:return++L,ni($e);case 59:return++L,ni(ii);case 44:return++L,ni(At);case 91:return++L,ni(ge);case 93:return++L,ni(_e);case 123:return++L,ni(Ie);case 125:return++L,ni(Re);case 58:return++L,ni(Ri);case 63:return++L,ni(bn);case 48:var ae=b.charCodeAt(L+1);if(ae===120||ae===88)return og();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Mh(!1);case 34:case 39:return lg(se);case 47:return Jp();case 37:case 42:return eg();case 124:case 38:return tg(se);case 94:return ig();case 43:case 45:return ng(se);case 60:case 62:return rg(se);case 61:case 33:return sg(se);case 126:return ri(bh,1)}return!1}function sr(se){if(se?L=R+1:R=L,k.locations&&(H=new rr),se)return Oh();if(L>=S)return ni(Me);var ae=b.charCodeAt(L);if(ua(ae)||ae===92)return zh();var ve=ag(ae);if(ve===!1){var ke=String.fromCharCode(ae);if(ke==="\\"||Ih.test(ke))return zh();fe(L,"Unexpected character '"+ke+"'")}return ve}function ri(se,ae){var ve=b.slice(L,L+ae);L+=ae,ni(se,ve)}function Oh(){for(var Ye="",se,ae,ve=L;;){L>=S&&fe(ve,"Unterminated regular expression");var ke=b.charAt(L);if(la.test(ke)&&fe(ve,"Unterminated regular expression"),se)se=!1;else{if(ke==="[")ae=!0;else if(ke==="]"&&ae)ae=!1;else if(ke==="/"&&!ae)break;se=ke==="\\"}++L}var Ye=b.slice(ve,L);++L;var Je=Rh();Je&&!/^[gmsiy]*$/.test(Je)&&fe(ve,"Invalid regexp flag");try{var tt=new RegExp(Ye,Je)}catch(St){St instanceof SyntaxError&&fe(ve,St.message),fe(St)}return ni(Te,tt)}function us(se,ae){for(var ve=L,ke=0,Ye=0,Je=ae==null?1/0:ae;Ye<Je;++Ye){var tt=b.charCodeAt(L),St;if(tt>=97?St=tt-97+10:tt>=65?St=tt-65+10:tt>=48&&tt<=57?St=tt-48:St=1/0,St>=se)break;++L,ke=ke*se+St}return L===ve||ae!=null&&L-ve!==ae?null:ke}function og(){L+=2;var se=us(16);return se==null&&fe(R+2,"Expected hexadecimal number"),ua(b.charCodeAt(L))&&fe(L,"Identifier directly after number"),ni(Ce,se)}function Mh(se){var ae=L,ve=!1,ke=b.charCodeAt(L)===48;!se&&us(10)===null&&fe(ae,"Invalid number"),b.charCodeAt(L)===46&&(++L,us(10),ve=!0);var Ye=b.charCodeAt(L);(Ye===69||Ye===101)&&(Ye=b.charCodeAt(++L),(Ye===43||Ye===45)&&++L,us(10)===null&&fe(ae,"Invalid number"),ve=!0),ua(b.charCodeAt(L))&&fe(L,"Identifier directly after number");var Je=b.slice(ae,L),tt;return ve?tt=parseFloat(Je):!ke||Je.length===1?tt=parseInt(Je,10):/[89]/.test(Je)||he?fe(ae,"Invalid number"):tt=parseInt(Je,8),ni(Ce,tt)}function lg(se){L++;for(var ae="";;){L>=S&&fe(R,"Unterminated string constant");var ve=b.charCodeAt(L);if(ve===se)return++L,ni(Oe,ae);if(ve===92){ve=b.charCodeAt(++L);var ke=/^[0-7]+/.exec(b.slice(L,L+3));for(ke&&(ke=ke[0]);ke&&parseInt(ke,8)>255;)ke=ke.slice(0,-1);if(ke==="0"&&(ke=null),++L,ke)he&&fe(L-2,"Octal literal in strict mode"),ae+=String.fromCharCode(parseInt(ke,8)),L+=ke.length-1;else switch(ve){case 110:ae+=`
`;break;case 114:ae+="\r";break;case 120:ae+=String.fromCharCode(ha(2));break;case 117:ae+=String.fromCharCode(ha(4));break;case 85:ae+=String.fromCharCode(ha(8));break;case 116:ae+="	";break;case 98:ae+="\b";break;case 118:ae+="\v";break;case 102:ae+="\f";break;case 48:ae+="\0";break;case 13:b.charCodeAt(L)===10&&++L;case 10:k.locations&&(Y=L,++j);break;default:ae+=String.fromCharCode(ve);break}}else(ve===13||ve===10||ve===8232||ve===8233)&&fe(R,"Unterminated string constant"),ae+=String.fromCharCode(ve),++L}}function ha(se){var ae=us(16,se);return ae===null&&fe(R,"Bad character escape sequence"),ae}var kr;function Rh(){kr=!1;for(var se,ae=!0,ve=L;;){var ke=b.charCodeAt(L);if(Ah(ke))kr&&(se+=b.charAt(L)),++L;else if(ke===92){kr||(se=b.slice(ve,L)),kr=!0,b.charCodeAt(++L)!=117&&fe(L,"Expecting Unicode escape sequence \\uXXXX"),++L;var Ye=ha(4),Je=String.fromCharCode(Ye);Je||fe(L-1,"Invalid Unicode escape"),(ae?ua(Ye):Ah(Ye))||fe(L-4,"Invalid Unicode escape"),se+=Je}else break;ae=!1}return kr?se:b.slice(ve,L)}function zh(){var se=Rh(),ae=me;return!kr&&Qp(se)&&(ae=ne[se]),ni(ae,se)}function vt(){re=R,oe=F,de=G,sr()}function qo(se){if(he=se,L=R,k.locations)for(;L<Y;)Y=b.lastIndexOf(`
`,Y-2)+1,--j;Er(),sr()}function Dh(){this.type=null,this.start=R,this.end=null}function Fh(){this.start=H,this.end=null,x!==null&&(this.source=x)}function li(){var se=new Dh;return k.locations&&(se.loc=new Fh),k.directSourceFile&&(se.sourceFile=k.directSourceFile),k.ranges&&(se.range=[R,0]),se}function En(se){var ae=new Dh;return ae.start=se.start,k.locations&&(ae.loc=new Fh,ae.loc.start=se.loc.start),k.ranges&&(ae.range=[se.range[0],0]),ae}function at(se,ae){return se.type=ae,se.end=oe,k.locations&&(se.loc.end=de),k.ranges&&(se.range[1]=oe),se}function Ko(se){return k.ecmaVersion>=5&&se.type==="ExpressionStatement"&&se.expression.type==="Literal"&&se.expression.value==="use strict"}function Ft(se){if(V===se)return vt(),!0}function ca(){return!k.strictSemicolons&&(V===Me||V===Re||la.test(b.slice(oe,R)))}function ar(){!Ft(ii)&&!ca()&&hn()}function Xt(se){V===se?vt():hn()}function hn(){fe(R,"Unexpected token")}function fa(se){se.type!=="Identifier"&&se.type!=="MemberExpression"&&fe(se.start,"Assigning to rvalue"),he&&se.type==="Identifier"&&oa(se.name)&&fe(se.start,"Assigning to "+se.name+" in strict mode")}function ug(se){re=oe=L,k.locations&&(de=new rr),ye=he=null,xe=[],sr();var ae=se||li(),ve=!0;for(se||(ae.body=[]);V!==Me;){var ke=Gi();ae.body.push(ke),ve&&Ko(ke)&&qo(!0),ve=!1}return at(ae,"Program")}var Qo={kind:"loop"},hg={kind:"switch"};function Gi(){(V===Ji||V===nr&&q=="/=")&&sr(!0);var se=V,ae=li();switch(se){case ze:case ft:vt();var ve=se===ze;Ft(ii)||ca()?ae.label=null:V!==me?hn():(ae.label=kn(),ar());for(var ke=0;ke<xe.length;++ke){var Ye=xe[ke];if((ae.label==null||Ye.name===ae.label.name)&&(Ye.kind!=null&&(ve||Ye.kind==="loop")||ae.label&&ve))break}return ke===xe.length&&fe(ae.start,"Unsyntactic "+se.keyword),at(ae,ve?"BreakStatement":"ContinueStatement");case ct:return vt(),ar(),at(ae,"DebuggerStatement");case Ze:return vt(),xe.push(Qo),ae.body=Gi(),xe.pop(),Xt(fi),ae.test=hs(),ar(),at(ae,"DoWhileStatement");case xt:if(vt(),xe.push(Qo),Xt(qe),V===ii)return Zo(ae,null);if(V===Jt){var Je=li();return vt(),Vh(Je,!0),at(Je,"VariableDeclaration"),Je.declarations.length===1&&Ft(Z)?Bh(ae,Je):Zo(ae,Je)}var Je=di(!1,!0);return Ft(Z)?(fa(Je),Bh(ae,Je)):Zo(ae,Je);case Kt:return vt(),Jo(ae,!0);case jt:return vt(),ae.test=hs(),ae.consequent=Gi(),ae.alternate=Ft(_t)?Gi():null,at(ae,"IfStatement");case zt:return!ye&&!k.allowReturnOutsideFunction&&fe(R,"'return' outside of function"),vt(),Ft(ii)||ca()?ae.argument=null:(ae.argument=di(),ar()),at(ae,"ReturnStatement");case Ge:vt(),ae.discriminant=hs(),ae.cases=[],Xt(Ie),xe.push(hg);for(var tt,St;V!=Re;)if(V===He||V===Xe){var Wi=V===He;tt&&at(tt,"SwitchCase"),ae.cases.push(tt=li()),tt.consequent=[],vt(),Wi?tt.test=di():(St&&fe(re,"Multiple default clauses"),St=!0,tt.test=null),Xt(Ri)}else tt||hn(),tt.consequent.push(Gi());return tt&&at(tt,"SwitchCase"),vt(),xe.pop(),at(ae,"SwitchStatement");case Pt:return vt(),la.test(b.slice(oe,R))&&fe(oe,"Illegal newline after throw"),ae.argument=di(),ar(),at(ae,"ThrowStatement");case Qt:if(vt(),ae.block=cs(),ae.handler=null,V===ht){var or=li();vt(),Xt(qe),or.param=kn(),he&&oa(or.param.name)&&fe(or.param.start,"Binding "+or.param.name+" in strict mode"),Xt($e),or.guard=null,or.body=cs(),ae.handler=at(or,"CatchClause")}return ae.guardedHandlers=Se,ae.finalizer=Ft(pt)?cs():null,!ae.handler&&!ae.finalizer&&fe(ae.start,"Missing catch or finally clause"),at(ae,"TryStatement");case Jt:return vt(),Vh(ae),ar(),at(ae,"VariableDeclaration");case fi:return vt(),ae.test=hs(),xe.push(Qo),ae.body=Gi(),xe.pop(),at(ae,"WhileStatement");case Cr:return he&&fe(R,"'with' in strict mode"),vt(),ae.object=hs(),ae.body=Gi(),at(ae,"WithStatement");case Ie:return cs();case ii:return vt(),at(ae,"EmptyStatement");default:var tl=q,da=di();if(se===me&&da.type==="Identifier"&&Ft(Ri)){for(var ke=0;ke<xe.length;++ke)xe[ke].name===tl&&fe(da.start,"Label '"+tl+"' is already declared");var _g=V.isLoop?"loop":V===Ge?"switch":null;return xe.push({name:tl,kind:_g}),ae.body=Gi(),xe.pop(),ae.label=da,at(ae,"LabeledStatement")}else return ae.expression=da,ar(),at(ae,"ExpressionStatement")}}function hs(){Xt(qe);var se=di();return Xt($e),se}function cs(se){var ae=li(),ve=!0,ke=!1,Ye;for(ae.body=[],Xt(Ie);!Ft(Re);){var Je=Gi();ae.body.push(Je),ve&&se&&Ko(Je)&&(Ye=ke,qo(ke=!0)),ve=!1}return ke&&!Ye&&qo(!1),at(ae,"BlockStatement")}function Zo(se,ae){return se.init=ae,Xt(ii),se.test=V===ii?null:di(),Xt(ii),se.update=V===$e?null:di(),Xt($e),se.body=Gi(),xe.pop(),at(se,"ForStatement")}function Bh(se,ae){return se.left=ae,se.right=di(),Xt($e),se.body=Gi(),xe.pop(),at(se,"ForInStatement")}function Vh(se,ae){for(se.declarations=[],se.kind="var";;){var ve=li();if(ve.id=kn(),he&&oa(ve.id.name)&&fe(ve.id.start,"Binding "+ve.id.name+" in strict mode"),ve.init=Ft(en)?di(!0,ae):null,se.declarations.push(at(ve,"VariableDeclarator")),!Ft(At))break}return se}function di(se,ae){var ve=jo(ae);if(!se&&V===At){var ke=En(ve);for(ke.expressions=[ve];Ft(At);)ke.expressions.push(jo(ae));return at(ke,"SequenceExpression")}return ve}function jo(se){var ae=cg(se);if(V.isAssign){var ve=En(ae);return ve.operator=q,ve.left=ae,vt(),ve.right=jo(se),fa(ae),at(ve,"AssignmentExpression")}return ae}function cg(se){var ae=fg(se);if(Ft(bn)){var ve=En(ae);return ve.test=ae,ve.consequent=di(!0),Xt(Ri),ve.alternate=di(!0,se),at(ve,"ConditionalExpression")}return ae}function fg(se){return Xo(Yo(),-1,se)}function Xo(se,ae,ve){var ke=V.binop;if(ke!=null&&(!ve||V!==Z)&&ke>ae){var Ye=En(se);Ye.left=se,Ye.operator=q;var Je=V;vt(),Ye.right=Xo(Yo(),ke,ve);var tt=at(Ye,Je===Eh||Je===kh?"LogicalExpression":"BinaryExpression");return Xo(tt,ae,ve)}return se}function Yo(){if(V.prefix){var se=li(),ae=V.isUpdate;return se.operator=q,se.prefix=!0,Q=!0,vt(),se.argument=Yo(),ae?fa(se.argument):he&&se.operator==="delete"&&se.argument.type==="Identifier"&&fe(se.start,"Deleting local variable in strict mode"),at(se,ae?"UpdateExpression":"UnaryExpression")}for(var ve=dg();V.postfix&&!ca();){var se=En(ve);se.operator=q,se.prefix=!1,se.argument=ve,fa(ve),vt(),ve=at(se,"UpdateExpression")}return ve}function dg(){return fs($o())}function fs(se,ae){if(Ft($i)){var ve=En(se);return ve.object=se,ve.property=kn(!0),ve.computed=!1,fs(at(ve,"MemberExpression"),ae)}else if(Ft(ge)){var ve=En(se);return ve.object=se,ve.property=di(),ve.computed=!0,Xt(_e),fs(at(ve,"MemberExpression"),ae)}else if(!ae&&Ft(qe)){var ve=En(se);return ve.callee=se,ve.arguments=el($e,!1),fs(at(ve,"CallExpression"),ae)}else return se}function $o(){switch(V){case aa:var ke=li();return vt(),at(ke,"ThisExpression");case me:return kn();case Ce:case Oe:case Te:var ke=li();return ke.value=q,ke.raw=b.slice(R,F),vt(),at(ke,"Literal");case p:case A:case U:var ke=li();return ke.value=V.atomValue,ke.raw=V.keyword,vt(),at(ke,"Literal");case qe:var se=H,ae=R;vt();var ve=di();return ve.start=ae,ve.end=F,k.locations&&(ve.loc.start=se,ve.loc.end=G),k.ranges&&(ve.range=[ae,F]),Xt($e),ve;case ge:var ke=li();return vt(),ke.elements=el(_e,!0,!0),at(ke,"ArrayExpression");case Ie:return gg();case Kt:var ke=li();return vt(),Jo(ke,!1);case sa:return pg();default:hn()}}function pg(){var se=li();return vt(),se.callee=fs($o(),!0),Ft(qe)?se.arguments=el($e,!1):se.arguments=Se,at(se,"NewExpression")}function gg(){var se=li(),ae=!0,ve=!1;for(se.properties=[],vt();!Ft(Re);){if(ae)ae=!1;else if(Xt(At),k.allowTrailingCommas&&Ft(Re))break;var ke={key:Hh()},Ye=!1,Je;if(Ft(Ri)?(ke.value=di(!0),Je=ke.kind="init"):k.ecmaVersion>=5&&ke.key.type==="Identifier"&&(ke.key.name==="get"||ke.key.name==="set")?(Ye=ve=!0,Je=ke.kind=ke.key.name,ke.key=Hh(),V!==qe&&hn(),ke.value=Jo(li(),!1)):hn(),ke.key.type==="Identifier"&&(he||ve))for(var tt=0;tt<se.properties.length;++tt){var St=se.properties[tt];if(St.key.name===ke.key.name){var Wi=Je==St.kind||Ye&&St.kind==="init"||Je==="init"&&(St.kind==="get"||St.kind==="set");Wi&&!he&&Je==="init"&&St.kind==="init"&&(Wi=!1),Wi&&fe(ke.key.start,"Redefinition of property")}}se.properties.push(ke)}return at(se,"ObjectExpression")}function Hh(){return V===Ce||V===Oe?$o():kn(!0)}function Jo(se,ae){V===me?se.id=kn():ae?hn():se.id=null,se.params=[];var ve=!0;for(Xt(qe);!Ft($e);)ve?ve=!1:Xt(At),se.params.push(kn());var ke=ye,Ye=xe;if(ye=!0,xe=[],se.body=cs(!0),ye=ke,xe=Ye,he||se.body.body.length&&Ko(se.body.body[0]))for(var Je=se.id?-1:0;Je<se.params.length;++Je){var tt=Je<0?se.id:se.params[Je];if((Th(tt.name)||oa(tt.name))&&fe(tt.start,"Defining '"+tt.name+"' in strict mode"),Je>=0)for(var St=0;St<Je;++St)tt.name===se.params[St].name&&fe(tt.start,"Argument name clash in strict mode")}return at(se,ae?"FunctionDeclaration":"FunctionExpression")}function el(se,ae,ve){for(var ke=[],Ye=!0;!Ft(se);){if(Ye)Ye=!1;else if(Xt(At),ae&&k.allowTrailingCommas&&Ft(se))break;ve&&V===At?ke.push(null):ke.push(di(!0))}return ke}function kn(se){var ae=li();return se&&k.forbidReserved=="everywhere"&&(se=!1),V===me?(!se&&(k.forbidReserved&&(k.ecmaVersion===3?qp:Kp)(q)||he&&Th(q))&&b.slice(R,F).indexOf("\\")==-1&&fe(R,"The keyword '"+q+"' is reserved"),ae.name=q):se&&V.keyword?ae.name=V.keyword:hn(),Q=!1,vt(),at(ae,"Identifier")}}),t.version||(t=null)}function l(N,k){return(e.acorn||t).parse(N,k)}var c={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},f={"-":"__negate","+":"__self"},d=h.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(N){this["__"+N]="#"+N},{__self:function(){return this}});z.inject(d),ee.inject(d),Qe.inject(d);function _(N,k,b){var S=c[k];if(N&&N[S]){var x=N[S](b);return k==="!="?!x:x}switch(k){case"+":return N+b;case"-":return N-b;case"*":return N*b;case"/":return N/b;case"%":return N%b;case"==":return N==b;case"!=":return N!=b}}function m(N,k){var b=f[N];if(k&&k[b])return k[b]();switch(N){case"+":return+k;case"-":return-k}}function w(N,k){if(!N)return"";k=k||{};var b=[];function S(he){for(var fe=0,Se=b.length;fe<Se;fe++){var Ce=b[fe];if(Ce[0]>=he)break;he+=Ce[1]}return he}function x(he){return N.substring(S(he.range[0]),S(he.range[1]))}function E(he,fe){return N.substring(S(he.range[1]),S(fe.range[0]))}function I(he,fe){for(var Se=S(he.range[0]),Ce=S(he.range[1]),Te=0,Oe=b.length-1;Oe>=0;Oe--)if(Se>b[Oe][0]){Te=Oe+1;break}b.splice(Te,0,[Se,fe.length-Ce+Se]),N=N.substring(0,Se)+fe+N.substring(Ce)}function M(he,fe){switch(he.type){case"UnaryExpression":if(he.operator in f&&he.argument.type!=="Literal"){var Se=x(he.argument);I(he,'$__("'+he.operator+'", '+Se+")")}break;case"BinaryExpression":if(he.operator in c&&he.left.type!=="Literal"){var Ce=x(he.left),Te=x(he.right),Oe=E(he.left,he.right),me=he.operator;I(he,"__$__("+Ce+","+Oe.replace(new RegExp("\\"+me),'"'+me+'"')+", "+Te+")")}break;case"UpdateExpression":case"AssignmentExpression":var Me=fe&&fe.type;if(!(Me==="ForStatement"||Me==="BinaryExpression"&&/^[=!<>]/.test(fe.operator)||Me==="MemberExpression"&&fe.computed)){if(he.type==="UpdateExpression"){var Se=x(he.argument),ze="__$__("+Se+', "'+he.operator[0]+'", 1)',He=Se+" = "+ze;he.prefix?He="("+He+")":(Me==="AssignmentExpression"||Me==="VariableDeclarator"||Me==="BinaryExpression")&&(x(fe.left||fe.id)===Se&&(He=ze),He=Se+"; "+He),I(he,He)}else if(/^.=$/.test(he.operator)&&he.left.type!=="Literal"){var Ce=x(he.left),Te=x(he.right),ze=Ce+" = __$__("+Ce+', "'+he.operator[0]+'", '+Te+")";I(he,/^\(.*\)$/.test(x(he))?"("+ze+")":ze)}}break}}function L(he){switch(he.type){case"ExportDefaultDeclaration":I({range:[he.start,he.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var fe=he.declaration,Se=he.specifiers;if(fe){var Ce=fe.declarations;Ce&&(Ce.forEach(function(Oe){I(Oe,"module.exports."+x(Oe))}),I({range:[he.start,fe.start+fe.kind.length]},""))}else if(Se){var Te=Se.map(function(Oe){var me=x(Oe);return"module.exports."+me+" = "+me+"; "}).join("");Te&&I(he,Te)}break}}function R(he,fe,Se){if(he){for(var Ce in he)if(Ce!=="range"&&Ce!=="loc"){var Te=he[Ce];if(Array.isArray(Te))for(var Oe=0,me=Te.length;Oe<me;Oe++)R(Te[Oe],he,Se);else Te&&typeof Te=="object"&&R(Te,he,Se)}Se.operatorOverloading!==!1&&M(he,fe),Se.moduleExports!==!1&&L(he)}}function F(he){var fe="",Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(he=(Math.abs(he)<<1)+(he<0?1:0);he||!fe;){var Ce=he&31;he>>=5,he&&(Ce|=32),fe+=Se[Ce]}return fe}var H=k.url||"",G=k.sourceMaps,V=k.paperFeatures||{},q=k.source||N,Q=k.offset||0,j=s.agent,Y=j.versionNumber,re=!1,oe=/\r\n|\n|\r/mg,de;if(G&&(j.chrome&&Y>=30||j.webkit&&Y>=537.76||j.firefox&&Y>=23||j.node)){if(j.node)Q-=2;else if(u&&H&&!u.location.href.indexOf(H)){var ye=g.getElementsByTagName("html")[0].innerHTML;Q=ye.substr(0,ye.indexOf(N)+1).match(oe).length+1}re=Q>0&&!(j.chrome&&Y>=36||j.safari&&Y>=600||j.firefox&&Y>=40||j.node);var xe=["AA"+F(re?0:Q)+"A"];xe.length=(N.match(oe)||[]).length+1+(re?Q:0),de={version:3,file:H,names:[],mappings:xe.join(";AACA"),sourceRoot:"",sources:[H],sourcesContent:[q]}}return(V.operatorOverloading!==!1||V.moduleExports!==!1)&&R(l(N,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,V),de&&(re&&(N=new Array(Q+1).join(`
`)+N),/^(inline|both)$/.test(G)&&(N+=`
//# sourceMappingURL=data:application/json;base64,`+i.btoa(unescape(encodeURIComponent(JSON.stringify(de))))),N+=`
//# sourceURL=`+(H||"paperscript")),{url:H,source:q,code:N,map:de}}function y(N,k,b){s=k;var S=k.getView(),x=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(N)&&!/\bnew\s+Tool\b/.test(N)?new ir:null,E=x?x._events:[],I=["onFrame","onResize"].concat(E),M=[],L=[],R,F=typeof N=="object"?N:w(N,b);N=F.code;function H(Y,re){for(var oe in Y)(re||!/^_/.test(oe))&&new RegExp("([\\b\\s\\W]|^)"+oe.replace(/\$/g,"\\$")+"\\b").test(N)&&(M.push(oe),L.push(Y[oe]))}H({__$__:_,$__:m,paper:k,tool:x},!0),H(k),N="var module = { exports: {} }; "+N;var Q=h.each(I,function(Y){new RegExp("\\s+"+Y+"\\b").test(N)&&(M.push(Y),this.push("module.exports."+Y+" = "+Y+";"))},[]).join(`
`);Q&&(N+=`
`+Q),N+=`
return module.exports;`;var G=s.agent;if(g&&(G.chrome||G.firefox&&G.versionNumber<40)){var V=g.createElement("script"),q=g.head||g.getElementsByTagName("head")[0];G.firefox&&(N=`
`+N),V.appendChild(g.createTextNode("document.__paperscript__ = function("+M+") {"+N+`
}`)),q.appendChild(V),R=g.__paperscript__,delete g.__paperscript__,q.removeChild(V)}else R=Function(M,N);var Q=R&&R.apply(k,L),j=Q||{};return h.each(E,function(Y){var re=j[Y];re&&(x[Y]=re)}),S&&(j.onResize&&S.setOnResize(j.onResize),S.emit("resize",{size:S.size,delta:new z}),j.onFrame&&S.setOnFrame(j.onFrame),S.requestUpdate()),Q}function v(N){if(/^text\/(?:x-|)paperscript$/.test(N.type)&&O.getAttribute(N,"ignore")!=="true"){var k=O.getAttribute(N,"canvas"),b=g.getElementById(k),S=N.src||N.getAttribute("data-src"),x=O.hasAttribute(N,"async"),E="data-paper-scope";if(!b)throw new Error('Unable to find canvas with id "'+k+'"');var I=O.get(b.getAttribute(E))||new O().setup(b);return b.setAttribute(E,I._id),S?It.request({url:S,async:x,mimeType:"text/plain",onLoad:function(M){y(M,I,S)}}):y(N.innerHTML,I,N.baseURI),N.setAttribute("data-paper-ignore","true"),I}}function C(){h.each(g&&g.getElementsByTagName("script"),v)}function T(N){return N?v(N):C()}return u&&(g.readyState==="complete"?setTimeout(C):nt.add(u,{load:C})),{compile:w,execute:y,load:T,parse:l,calculateBinary:_,calculateUnary:m}}.call(this);var s=new(O.inject(h.exports,{Base:h,Numerical:X,Key:Sn,DomEvent:nt,DomElement:je,document:g,window:u,Symbol:Ke,PlacedSymbol:ot}));return s.agent.node&&ja(s),typeof a=="function"&&a.amd?a("paper",s):n&&(n.exports=s),s}).call(Eu,typeof self=="object"?self:null)})(Ef);const xs=Ef.exports;function wt(){return xs}function C_(n){xs.setup(n);const i=document.getElementById(n),a=new xs.Tool;a.onMouseDown=function(){},a.onMouseDrag=function(u){const g=u.point.subtract(u.downPoint);xs.view.center=xs.view.center.subtract(g)},a.onMouseUp=function(){},i==null||i.addEventListener("mousewheel",function(u){const g=wt();let h=g.view.zoom;const P=g.view.zoom;u.deltaY<0?h=g.view.zoom*1.05:h=g.view.zoom*.95;const O=P/h,D=new g.Point(u.offsetX,u.offsetY),K=g.view.viewToProject(D),X=g.view.center,ie=K.subtract(X),z=K.subtract(ie.multiply(O)).subtract(X);g.view.zoom=h,g.view.center=g.view.center.add(z),u.preventDefault(),g.view.update()})}var Xa={exports:{}};/*!
 * Paper.js v0.12.15 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Mar 17 10:49:48 2021 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(n){(function(i,a){i=i||ja;var u=i.window,g=i.document,h=new function(){var s=/^(statics|enumerable|beans|preserve)$/,e=[],t=e.slice,r=Object.create,o=Object.getOwnPropertyDescriptor,l=Object.defineProperty,c=e.forEach||function(y,v){for(var C=0,T=this.length;C<T;C++)y.call(v,this[C],C,this)},f=function(y,v){for(var C in this)this.hasOwnProperty(C)&&y.call(v,this[C],C,this)},d=Object.assign||function(y){for(var v=1,C=arguments.length;v<C;v++){var T=arguments[v];for(var N in T)T.hasOwnProperty(N)&&(y[N]=T[N])}return y},_=function(y,v,C){if(y){var T=o(y,"length");(T&&typeof T.value=="number"?c:f).call(y,v,C=C||y)}return C};function m(y,v,C,T,N){var k={};function b(M,L){L=L||(L=o(v,M))&&(L.get?L:L.value),typeof L=="string"&&L[0]==="#"&&(L=y[L.substring(1)]||L);var R=typeof L=="function",F=L,H=N||R&&!L.base?L&&L.get?M in y:y[M]:null,G;(!N||!H)&&(R&&H&&(L.base=H),R&&T!==!1&&(G=M.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(k[G[3].toLowerCase()+G[4]]=G[2]),(!F||R||!F.get||typeof F.get!="function"||!w.isPlainObject(F))&&(F={value:F,writable:!0}),(o(y,M)||{configurable:!0}).configurable&&(F.configurable=!0,F.enumerable=C!=null?C:!G),l(y,M,F))}if(v){for(var S in v)v.hasOwnProperty(S)&&!s.test(S)&&b(S);for(var S in k){var x=k[S],E=y["set"+x],I=y["get"+x]||E&&y["is"+x];I&&(T===!0||I.length===0)&&b(S,{get:I,set:E})}}return y}function w(){for(var y=0,v=arguments.length;y<v;y++){var C=arguments[y];C&&d(this,C)}return this}return m(w,{inject:function(y){if(y){var v=y.statics===!0?y:y.statics,C=y.beans,T=y.preserve;v!==y&&m(this.prototype,y,y.enumerable,C,T),m(this,v,null,C,T)}for(var N=1,k=arguments.length;N<k;N++)this.inject(arguments[N]);return this},extend:function(){for(var y=this,v,C,T=0,N,k=arguments.length;T<k&&!(v&&C);T++)N=arguments[T],v=v||N.initialize,C=C||N.prototype;return v=v||function(){y.apply(this,arguments)},C=v.prototype=C||r(this.prototype),l(C,"constructor",{value:v,writable:!0,configurable:!0}),m(v,this),arguments.length&&this.inject.apply(v,arguments),v.base=y,v}}).inject({enumerable:!1,initialize:w,set:w,inject:function(){for(var y=0,v=arguments.length;y<v;y++){var C=arguments[y];C&&m(this,C,C.enumerable,C.beans,C.preserve)}return this},extend:function(){var y=r(this);return y.inject.apply(y,arguments)},each:function(y,v){return _(this,y,v)},clone:function(){return new this.constructor(this)},statics:{set:d,each:_,create:r,define:l,describe:o,clone:function(y){return d(new y.constructor,y)},isPlainObject:function(y){var v=y!=null&&y.constructor;return v&&(v===Object||v===w||v.name==="Object")},pick:function(y,v){return y!==a?y:v},slice:function(y,v,C){return t.call(y,v,C)}}})};n.exports=h,h.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+h.each(this,function(s,e){if(!/^_/.test(e)){var t=typeof s;this.push(e+": "+(t==="number"?K.instance.number(s):t==="string"?"'"+s+"'":s))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(s){return h.importJSON(s,this)},exportJSON:function(s){return h.exportJSON(this,s)},toJSON:function(){return h.serialize(this)},set:function(s,e){return s&&h.filter(this,s,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function s(){var e=s.base.apply(this,arguments),t=e.prototype._class;return t&&!h.exports[t]&&(h.exports[t]=e),e},equals:function(s,e){if(s===e)return!0;if(s&&s.equals)return s.equals(e);if(e&&e.equals)return e.equals(s);if(s&&e&&typeof s=="object"&&typeof e=="object"){if(Array.isArray(s)&&Array.isArray(e)){var t=s.length;if(t!==e.length)return!1;for(;t--;)if(!h.equals(s[t],e[t]))return!1}else{var r=Object.keys(s),t=r.length;if(t!==Object.keys(e).length)return!1;for(;t--;){var o=r[t];if(!(e.hasOwnProperty(o)&&h.equals(s[o],e[o])))return!1}}return!0}return!1},read:function(s,e,t,r){if(this===h){var o=this.peek(s,e);return s.__index++,o}var l=this.prototype,c=l._readIndex,f=e||c&&s.__index||0,d=s.length,_=s[f];if(r=r||d-f,_ instanceof this||t&&t.readNull&&_==null&&r<=1)return c&&(s.__index=f+1),_&&t&&t.clone?_.clone():_;if(_=h.create(l),c&&(_.__read=!0),_=_.initialize.apply(_,f>0||f+r<d?h.slice(s,f,f+r):s)||_,c){s.__index=f+_.__read;var m=_.__filtered;m&&(s.__filtered=m,_.__filtered=a),_.__read=a}return _},peek:function(s,e){return s[s.__index=e||s.__index||0]},remain:function(s){return s.length-(s.__index||0)},readList:function(s,e,t,r){for(var o=[],l,c=e||0,f=r?c+r:s.length,d=c;d<f;d++)o.push(Array.isArray(l=s[d])?this.read(l,0,t):this.read(s,d,t,1));return o},readNamed:function(s,e,t,r,o){var l=this.getNamed(s,e),c=l!==a;if(c){var f=s.__filtered;if(!f){var d=this.getSource(s);f=s.__filtered=h.create(d),f.__unfiltered=d}f[e]=a}return this.read(c?[l]:s,t,r,o)},readSupported:function(s,e){var t=this.getSource(s),r=this,o=!1;return t&&Object.keys(t).forEach(function(l){if(l in e){var c=r.readNamed(s,l);c!==a&&(e[l]=c),o=!0}}),o},getSource:function(s){var e=s.__source;if(e===a){var t=s.length===1&&s[0];e=s.__source=t&&h.isPlainObject(t)?t:null}return e},getNamed:function(s,e){var t=this.getSource(s);if(t)return e?t[e]:s.__filtered||t},hasNamed:function(s,e){return!!this.getNamed(s,e)},filter:function(s,e,t,r){var o;function l(m){if(!(t&&m in t)&&!(o&&m in o)){var w=e[m];w!==a&&(s[m]=w)}}if(r){for(var c={},f=0,d,_=r.length;f<_;f++)(d=r[f])in e&&(l(d),c[d]=!0);o=c}return Object.keys(e.__unfiltered||e).forEach(l),s},isPlainValue:function(s,e){return h.isPlainObject(s)||Array.isArray(s)||e&&typeof s=="string"},serialize:function(s,e,t,r){e=e||{};var o=!r,l;if(o&&(e.formatter=new K(e.precision),r={length:0,definitions:{},references:{},add:function(w,y){var v="#"+w._id,C=this.references[v];if(!C){this.length++;var T=y.call(w),N=w._class;N&&T[0]!==N&&T.unshift(N),this.definitions[v]=T,C=this.references[v]=[v]}return C}}),s&&s._serialize){l=s._serialize(e,r);var c=s._class;c&&!s._compactSerialize&&(o||!t)&&l[0]!==c&&l.unshift(c)}else if(Array.isArray(s)){l=[];for(var f=0,d=s.length;f<d;f++)l[f]=h.serialize(s[f],e,t,r)}else if(h.isPlainObject(s)){l={};for(var _=Object.keys(s),f=0,d=_.length;f<d;f++){var m=_[f];l[m]=h.serialize(s[m],e,t,r)}}else typeof s=="number"?l=e.formatter.number(s,e.precision):l=s;return o&&r.length>0?[["dictionary",r.definitions],l]:l},deserialize:function(s,e,t,r,o){var l=s,c=!t,f=c&&s&&s.length&&s[0][0]==="dictionary";if(t=t||{},Array.isArray(s)){var d=s[0],_=d==="dictionary";if(s.length==1&&/^#/.test(d))return t.dictionary[d];d=h.exports[d],l=[];for(var m=d?1:0,w=s.length;m<w;m++)l.push(h.deserialize(s[m],e,t,_,f));if(d){var y=l;e?l=e(d,y,c||o):l=new d(y)}}else if(h.isPlainObject(s)){l={},r&&(t.dictionary=l);for(var v in s)l[v]=h.deserialize(s[v],e,t)}return f?l[1]:l},exportJSON:function(s,e){var t=h.serialize(s,e);return e&&e.asString==!1?t:JSON.stringify(t)},importJSON:function(s,e){return h.deserialize(typeof s=="string"?JSON.parse(s):s,function(t,r,o){var l=o&&e&&e.constructor===t,c=l?e:h.create(t.prototype);if(r.length===1&&c instanceof B&&(l||!(c instanceof Pe))){var f=r[0];h.isPlainObject(f)&&(f.insert=!1,l&&(r=r.concat([{insert:!0}])))}return(l?c.set:t).apply(c,r),l&&(e=null),c})},push:function(s,e){var t=e.length;if(t<4096)s.push.apply(s,e);else{var r=s.length;s.length+=t;for(var o=0;o<t;o++)s[r+o]=e[o]}return s},splice:function(s,e,t,r){var o=e&&e.length,l=t===a;t=l?s.length:t,t>s.length&&(t=s.length);for(var c=0;c<o;c++)e[c]._index=t+c;if(l)return h.push(s,e),[];var f=[t,r];e&&h.push(f,e);for(var d=s.splice.apply(s,f),c=0,_=d.length;c<_;c++)d[c]._index=a;for(var c=t+o,_=s.length;c<_;c++)s[c]._index=c;return d},capitalize:function(s){return s.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(s){return s.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},hyphenate:function(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var P={on:function(s,e){if(typeof s!="string")h.each(s,function(l,c){this.on(c,l)},this);else{var t=this._eventTypes,r=t&&t[s],o=this._callbacks=this._callbacks||{};o=o[s]=o[s]||[],o.indexOf(e)===-1&&(o.push(e),r&&r.install&&o.length===1&&r.install.call(this,s))}return this},off:function(s,e){if(typeof s!="string"){h.each(s,function(c,f){this.off(f,c)},this);return}var t=this._eventTypes,r=t&&t[s],o=this._callbacks&&this._callbacks[s],l;return o&&(!e||(l=o.indexOf(e))!==-1&&o.length===1?(r&&r.uninstall&&r.uninstall.call(this,s),delete this._callbacks[s]):l!==-1&&o.splice(l,1)),this},once:function(s,e){return this.on(s,function t(){e.apply(this,arguments),this.off(s,t)})},emit:function(s,e){var t=this._callbacks&&this._callbacks[s];if(!t)return!1;var r=h.slice(arguments,1),o=e&&e.target&&!e.currentTarget;t=t.slice(),o&&(e.currentTarget=this);for(var l=0,c=t.length;l<c;l++)if(t[l].apply(this,r)==!1){e&&e.stop&&e.stop();break}return o&&delete e.currentTarget,!0},responds:function(s){return!!(this._callbacks&&this._callbacks[s])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(s){var e=this._eventTypes,t=this._callbacks,r=s?"install":"uninstall";if(e){for(var o in t)if(t[o].length>0){var l=e[o],c=l&&l[r];c&&c.call(this,o)}}},statics:{inject:function s(e){var t=e._events;if(t){var r={};h.each(t,function(o,l){var c=typeof o=="string",f=c?o:l,d=h.capitalize(f),_=f.substring(2).toLowerCase();r[_]=c?{}:o,f="_"+f,e["get"+d]=function(){return this[f]},e["set"+d]=function(m){var w=this[f];w&&this.off(_,w),m&&this.on(_,m),this[f]=m}}),e._eventTypes=r}return s.base.apply(this,arguments)}}},O=h.extend({_class:"PaperScope",initialize:function s(){rt=this,this.settings=new h({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=s._id++,s._scopes[this._id]=this;var e=s.prototype;if(!this.support){var t=It.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in t||"mozDash"in t,nativeBlendModes:mt.nativeModes},It.release(t)}if(!this.agent){var r=i.navigator.userAgent.toLowerCase(),o=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],l=o==="darwin"?"mac":o,c=e.agent=e.browser={platform:l};l&&(c[l]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(f,d,_,m,w){if(!c.chrome){var y=d==="opera"?m:/^(node|trident)$/.test(d)?w:_;c.version=y,c.versionNumber=parseFloat(y),d={trident:"msie",jsdom:"node"}[d]||d,c.name=d,c[d]=!0}}),c.chrome&&delete c.webkit,c.atom&&delete c.chrome}},version:"0.12.15",getView:function(){var s=this.project;return s&&s._view},getPaper:function(){return this},execute:function(s,e){},install:function(s){var e=this;h.each(["project","view","tool"],function(r){h.define(s,r,{configurable:!0,get:function(){return e[r]}})});for(var t in this)!/^_/.test(t)&&this[t]&&(s[t]=this[t])},setup:function(s){return rt=this,this.project=new we(s),this},createCanvas:function(s,e){return It.getCanvas(s,e)},activate:function(){rt=this},clear:function(){for(var s=this.projects,e=this.tools,t=s.length-1;t>=0;t--)s[t].remove();for(var t=e.length-1;t>=0;t--)e[t].remove()},remove:function(){this.clear(),delete O._scopes[this._id]},statics:new function(){function s(e){return e+="Attribute",function(t,r){return t[e](r)||t[e]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:s("get"),hasAttribute:s("has")}}}),D=h.extend(P,{initialize:function(s){this._scope=rt,this._index=this._scope[this._list].push(this)-1,(s||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var s=this._scope[this._reference];return s&&s!==this&&s.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",s),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(h.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),W={findItemBoundsCollisions:function(s,e,t){function r(c){for(var f=new Array(c.length),d=0;d<c.length;d++){var _=c[d].getBounds();f[d]=[_.left,_.top,_.right,_.bottom]}return f}var o=r(s),l=!e||e===s?o:r(e);return this.findBoundsCollisions(o,l,t||0)},findCurveBoundsCollisions:function(s,e,t,r){function o(y){for(var v=Math.min,C=Math.max,T=new Array(y.length),N=0;N<y.length;N++){var k=y[N];T[N]=[v(k[0],k[2],k[4],k[6]),v(k[1],k[3],k[5],k[7]),C(k[0],k[2],k[4],k[6]),C(k[1],k[3],k[5],k[7])]}return T}var l=o(s),c=!e||e===s?l:o(e);if(r){for(var f=this.findBoundsCollisions(l,c,t||0,!1,!0),d=this.findBoundsCollisions(l,c,t||0,!0,!0),_=[],m=0,w=f.length;m<w;m++)_[m]={hor:f[m],ver:d[m]};return _}return this.findBoundsCollisions(l,c,t||0)},findBoundsCollisions:function(s,e,t,r,o){var l=!e||s===e,c=l?s:s.concat(e),f=s.length,d=c.length;function _(oe,de,ye){for(var xe=0,he=oe.length;xe<he;){var fe=he+xe>>>1;c[oe[fe]][de]<ye?xe=fe+1:he=fe}return xe-1}for(var m=r?1:0,w=m+2,y=r?0:1,v=y+2,C=new Array(d),T=0;T<d;T++)C[T]=T;C.sort(function(oe,de){return c[oe][m]-c[de][m]});for(var N=[],k=new Array(f),T=0;T<d;T++){var b=C[T],S=c[b],x=l?b:b-f,E=b<f,I=l||!E,M=E?[]:null;if(N.length){var L=_(N,w,S[m]-t)+1;if(N.splice(0,L),l&&o){M=M.concat(N);for(var R=0;R<N.length;R++){var F=N[R];k[F].push(x)}}else for(var H=S[v],G=S[y],R=0;R<N.length;R++){var F=N[R],V=c[F],q=F<f,Q=l||F>=f;(o||(E&&Q||I&&q)&&H>=V[y]-t&&G<=V[v]+t)&&(E&&Q&&M.push(l?F:F-f),I&&q&&k[F].push(x))}}if(E&&(s===e&&M.push(b),k[b]=M),N.length){var j=S[w],Y=_(N,w,j);N.splice(Y+1,0,b)}else N.push(b)}for(var T=0;T<k.length;T++){var re=k[T];re&&re.sort(function(de,ye){return de-ye})}return k}},K=h.extend({initialize:function(s){this.precision=h.pick(s,5),this.multiplier=Math.pow(10,this.precision)},number:function(s){return this.precision<16?Math.round(s*this.multiplier)/this.multiplier:s},pair:function(s,e,t){return this.number(s)+(t||",")+this.number(e)},point:function(s,e){return this.number(s.x)+(e||",")+this.number(s.y)},size:function(s,e){return this.number(s.width)+(e||",")+this.number(s.height)},rectangle:function(s,e){return this.point(s,e)+(e||",")+this.size(s,e)}});K.instance=new K;var X=new function(){var s=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],t=Math.abs,r=Math.sqrt,o=Math.pow,l=Math.log2||function(w){return Math.log(w)*Math.LOG2E},c=1e-12,f=112e-18;function d(w,y,v){return w<y?y:w>v?v:w}function _(w,y,v){function C(L){var R=L*134217729,F=L-R,H=F+R,G=L-H;return[H,G]}var T=y*y-w*v,N=y*y+w*v;if(t(T)*3<N){var k=C(w),b=C(y),S=C(v),x=y*y,E=b[0]*b[0]-x+2*b[0]*b[1]+b[1]*b[1],I=w*v,M=k[0]*S[0]-I+k[0]*S[1]+k[1]*S[0]+k[1]*S[1];T=x-I+(E-M)}return T}function m(){var w=Math.max.apply(Math,arguments);return w&&(w<1e-8||w>1e8)?o(2,-Math.round(l(w))):0}return{EPSILON:c,MACHINE_EPSILON:f,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(r(2)-1)/3,isZero:function(w){return w>=-c&&w<=c},isMachineZero:function(w){return w>=-f&&w<=f},clamp:d,integrate:function(w,y,v,C){for(var T=s[C-2],N=e[C-2],k=(v-y)*.5,b=k+y,S=0,x=C+1>>1,E=C&1?N[S++]*w(b):0;S<x;){var I=k*T[S];E+=N[S++]*(w(b+I)+w(b-I))}return k*E},findRoot:function(w,y,v,C,T,N,k){for(var b=0;b<N;b++){var S=w(v),x=S/y(v),E=v-x;if(t(x)<k){v=E;break}S>0?(T=v,v=E<=C?(C+T)*.5:E):(C=v,v=E>=T?(C+T)*.5:E)}return d(v,C,T)},solveQuadratic:function(w,y,v,C,T,N){var k,b=1/0;if(t(w)<c){if(t(y)<c)return t(v)<c?-1:0;k=-v/y}else{y*=-.5;var S=_(w,y,v);if(S&&t(S)<f){var x=m(t(w),t(y),t(v));x&&(w*=x,y*=x,v*=x,S=_(w,y,v))}if(S>=-f){var E=S<0?0:r(S),I=y+(y<0?-E:E);I===0?(k=v/w,b=-k):(k=I/w,b=v/I)}}var M=0,L=T==null,R=T-c,F=N+c;return isFinite(k)&&(L||k>R&&k<F)&&(C[M++]=L?k:d(k,T,N)),b!==k&&isFinite(b)&&(L||b>R&&b<F)&&(C[M++]=L?b:d(b,T,N)),M},solveCubic:function(w,y,v,C,T,N,k){var b=m(t(w),t(y),t(v),t(C)),S,x,E,I,M;b&&(w*=b,y*=b,v*=b,C*=b);function L(Y){S=Y;var re=w*S;x=re+y,E=x*S+v,I=(re+x)*S+E,M=E*S+C}if(t(w)<c)w=y,x=v,E=C,S=1/0;else if(t(C)<c)x=y,E=v,S=0;else{L(-(y/w)/3);var R=M/w,F=o(t(R),1/3),H=R<0?-1:1,G=-I/w,V=G>0?1.324717957244746*Math.max(F,r(G)):F,q=S-H*V;if(q!==S){do L(q),q=I===0?S:S-M/I/(1+f);while(H*q>H*S);t(w)*S*S>t(C/S)&&(E=-C/S,x=(E-v)/S)}}var Q=X.solveQuadratic(w,x,E,T,N,k),j=N==null;return isFinite(S)&&(Q===0||Q>0&&S!==T[0]&&S!==T[1])&&(j||S>N-c&&S<k+c)&&(T[Q++]=j?S:d(S,N,k)),Q}}},ie={_id:1,_pools:{},get:function(s){if(s){var e=this._pools[s];return e||(e=this._pools[s]={_id:1}),e._id++}else return this._id++}},z=h.extend({_class:"Point",_readIndex:!0,initialize:function(e,t){var r=typeof e,o=this.__read,l=0;if(r==="number"){var c=typeof t=="number";this._set(e,c?t:e),o&&(l=c?2:1)}else if(r==="undefined"||e===null)this._set(0,0),o&&(l=e===null?1:0);else{var f=r==="string"?e.split(/[\s,]+/)||[]:e;l=1,Array.isArray(f)?this._set(+f[0],+(f.length>1?f[1]:f[0])):"x"in f?this._set(f.x||0,f.y||0):"width"in f?this._set(f.width||0,f.height||0):"angle"in f?(this._set(f.length||0,0),this.setAngle(f.angle||0)):(this._set(0,0),l=0)}return o&&(this.__read=l),this},set:"#initialize",_set:function(s,e){return this.x=s,this.y=e,this},equals:function(s){return this===s||s&&(this.x===s.x&&this.y===s.y||Array.isArray(s)&&this.x===s[0]&&this.y===s[1])||!1},clone:function(){return new z(this.x,this.y)},toString:function(){var s=K.instance;return"{ x: "+s.number(this.x)+", y: "+s.number(this.y)+" }"},_serialize:function(s){var e=s.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(s){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*s,Math.sin(e)*s)}else{var t=s/this.getLength();X.isZero(t)&&this.getAngle(),this._set(this.x*t,this.y*t)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(s){this.setAngleInRadians.call(this,s*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var s=z.read(arguments),e=this.getLength()*s.getLength();if(X.isZero(e))return NaN;var t=this.dot(s)/e;return Math.acos(t<-1?-1:t>1?1:t)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(s){if(this._angle=s,!this.isZero()){var e=this.getLength();this._set(Math.cos(s)*e,Math.sin(s)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var s=z.read(arguments);return Math.atan2(this.cross(s),this.dot(s))*180/Math.PI},getDistance:function(){var s=arguments,e=z.read(s),t=e.x-this.x,r=e.y-this.y,o=t*t+r*r,l=h.read(s);return l?o:Math.sqrt(o)},normalize:function(s){s===a&&(s=1);var e=this.getLength(),t=e!==0?s/e:0,r=new z(this.x*t,this.y*t);return t>=0&&(r._angle=this._angle),r},rotate:function(s,e){if(s===0)return this.clone();s=s*Math.PI/180;var t=e?this.subtract(e):this,r=Math.sin(s),o=Math.cos(s);return t=new z(t.x*o-t.y*r,t.x*r+t.y*o),e?t.add(e):t},transform:function(s){return s?s._transformPoint(this):this},add:function(){var s=z.read(arguments);return new z(this.x+s.x,this.y+s.y)},subtract:function(){var s=z.read(arguments);return new z(this.x-s.x,this.y-s.y)},multiply:function(){var s=z.read(arguments);return new z(this.x*s.x,this.y*s.y)},divide:function(){var s=z.read(arguments);return new z(this.x/s.x,this.y/s.y)},modulo:function(){var s=z.read(arguments);return new z(this.x%s.x,this.y%s.y)},negate:function(){return new z(-this.x,-this.y)},isInside:function(){return $.read(arguments).contains(this)},isClose:function(){var s=arguments,e=z.read(s),t=h.read(s);return this.getDistance(e)<=t},isCollinear:function(){var s=z.read(arguments);return z.isCollinear(this.x,this.y,s.x,s.y)},isColinear:"#isCollinear",isOrthogonal:function(){var s=z.read(arguments);return z.isOrthogonal(this.x,this.y,s.x,s.y)},isZero:function(){var s=X.isZero;return s(this.x)&&s(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(s){return this.x*(s>1&&s<4?-1:1)>=0&&this.y*(s>2?-1:1)>=0},dot:function(){var s=z.read(arguments);return this.x*s.x+this.y*s.y},cross:function(){var s=z.read(arguments);return this.x*s.y-this.y*s.x},project:function(){var s=z.read(arguments),e=s.isZero()?0:this.dot(s)/s.dot(s);return new z(s.x*e,s.y*e)},statics:{min:function(){var s=arguments,e=z.read(s),t=z.read(s);return new z(Math.min(e.x,t.x),Math.min(e.y,t.y))},max:function(){var s=arguments,e=z.read(s),t=z.read(s);return new z(Math.max(e.x,t.x),Math.max(e.y,t.y))},random:function(){return new z(Math.random(),Math.random())},isCollinear:function(s,e,t,r){return Math.abs(s*r-e*t)<=Math.sqrt((s*s+e*e)*(t*t+r*r))*1e-8},isOrthogonal:function(s,e,t,r){return Math.abs(s*t+e*r)<=Math.sqrt((s*s+e*e)*(t*t+r*r))*1e-8}}},h.each(["round","ceil","floor","abs"],function(s){var e=Math[s];this[s]=function(){return new z(e(this.x),e(this.y))}},{})),ue=z.extend({initialize:function(e,t,r,o){this._x=e,this._y=t,this._owner=r,this._setter=o},_set:function(s,e,t){return this._x=s,this._y=e,t||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(s){this._x=s,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(s){this._y=s,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(s){this._owner._changeSelection(this._getSelection(),s)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),ee=h.extend({_class:"Size",_readIndex:!0,initialize:function(e,t){var r=typeof e,o=this.__read,l=0;if(r==="number"){var c=typeof t=="number";this._set(e,c?t:e),o&&(l=c?2:1)}else if(r==="undefined"||e===null)this._set(0,0),o&&(l=e===null?1:0);else{var f=r==="string"?e.split(/[\s,]+/)||[]:e;l=1,Array.isArray(f)?this._set(+f[0],+(f.length>1?f[1]:f[0])):"width"in f?this._set(f.width||0,f.height||0):"x"in f?this._set(f.x||0,f.y||0):(this._set(0,0),l=0)}return o&&(this.__read=l),this},set:"#initialize",_set:function(s,e){return this.width=s,this.height=e,this},equals:function(s){return s===this||s&&(this.width===s.width&&this.height===s.height||Array.isArray(s)&&this.width===s[0]&&this.height===s[1])||!1},clone:function(){return new ee(this.width,this.height)},toString:function(){var s=K.instance;return"{ width: "+s.number(this.width)+", height: "+s.number(this.height)+" }"},_serialize:function(s){var e=s.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var s=ee.read(arguments);return new ee(this.width+s.width,this.height+s.height)},subtract:function(){var s=ee.read(arguments);return new ee(this.width-s.width,this.height-s.height)},multiply:function(){var s=ee.read(arguments);return new ee(this.width*s.width,this.height*s.height)},divide:function(){var s=ee.read(arguments);return new ee(this.width/s.width,this.height/s.height)},modulo:function(){var s=ee.read(arguments);return new ee(this.width%s.width,this.height%s.height)},negate:function(){return new ee(-this.width,-this.height)},isZero:function(){var s=X.isZero;return s(this.width)&&s(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(s,e){return new ee(Math.min(s.width,e.width),Math.min(s.height,e.height))},max:function(s,e){return new ee(Math.max(s.width,e.width),Math.max(s.height,e.height))},random:function(){return new ee(Math.random(),Math.random())}}},h.each(["round","ceil","floor","abs"],function(s){var e=Math[s];this[s]=function(){return new ee(e(this.width),e(this.height))}},{})),ce=ee.extend({initialize:function(e,t,r,o){this._width=e,this._height=t,this._owner=r,this._setter=o},_set:function(s,e,t){return this._width=s,this._height=e,t||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(s){this._width=s,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(s){this._height=s,this._owner[this._setter](this)}}),$=h.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,t,r,o){var l=arguments,c=typeof e,f;if(c==="number"?(this._set(e,t,r,o),f=4):c==="undefined"||e===null?(this._set(0,0,0,0),f=e===null?1:0):l.length===1&&(Array.isArray(e)?(this._set.apply(this,e),f=1):e.x!==a||e.width!==a?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),f=1):e.from===a&&e.to===a&&(this._set(0,0,0,0),h.readSupported(l,this)&&(f=1))),f===a){var d=z.readNamed(l,"from"),_=h.peek(l),m=d.x,w=d.y,y,v;if(_&&_.x!==a||h.hasNamed(l,"to")){var C=z.readNamed(l,"to");y=C.x-m,v=C.y-w,y<0&&(m=C.x,y=-y),v<0&&(w=C.y,v=-v)}else{var T=ee.read(l);y=T.width,v=T.height}this._set(m,w,y,v),f=l.__index}var N=l.__filtered;return N&&(this.__filtered=N),this.__read&&(this.__read=f),this},set:"#initialize",_set:function(s,e,t,r){return this.x=s,this.y=e,this.width=t,this.height=r,this},clone:function(){return new $(this.x,this.y,this.width,this.height)},equals:function(s){var e=h.isPlainValue(s)?$.read(arguments):s;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var s=K.instance;return"{ x: "+s.number(this.x)+", y: "+s.number(this.y)+", width: "+s.number(this.width)+", height: "+s.number(this.height)+" }"},_serialize:function(s){var e=s.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(s){var e=s?z:ue;return new e(this.x,this.y,this,"setPoint")},setPoint:function(){var s=z.read(arguments);this.x=s.x,this.y=s.y},getSize:function(s){var e=s?ee:ce;return new e(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var s=ee.read(arguments),e=this._sx,t=this._sy,r=s.width,o=s.height;e&&(this.x+=(this.width-r)*e),t&&(this.y+=(this.height-o)*t),this.width=r,this.height=o,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(s){if(!this._fw){var e=s-this.x;this.width-=this._sx===.5?e*2:e}this.x=s,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(s){if(!this._fh){var e=s-this.y;this.height-=this._sy===.5?e*2:e}this.y=s,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(s){if(!this._fw){var e=s-this.x;this.width=this._sx===.5?e*2:e}this.x=s-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(s){if(!this._fh){var e=s-this.y;this.height=this._sy===.5?e*2:e}this.y=s-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(s){this._fw||this._sx===.5?this.x=s-this.width/2:(this._sx&&(this.x+=(s-this.x)*2*this._sx),this.width=(s-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(s){this._fh||this._sy===.5?this.y=s-this.height/2:(this._sy&&(this.y+=(s-this.y)*2*this._sy),this.height=(s-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(s){var e=s?z:ue;return new e(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var s=z.read(arguments);return this.setCenterX(s.x),this.setCenterY(s.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(s){return s&&s.width!==a||(Array.isArray(s)?s:arguments).length===4?this._containsRectangle($.read(arguments)):this._containsPoint(z.read(arguments))},_containsPoint:function(s){var e=s.x,t=s.y;return e>=this.x&&t>=this.y&&e<=this.x+this.width&&t<=this.y+this.height},_containsRectangle:function(s){var e=s.x,t=s.y;return e>=this.x&&t>=this.y&&e+s.width<=this.x+this.width&&t+s.height<=this.y+this.height},intersects:function(){var s=$.read(arguments),e=h.read(arguments)||0;return s.x+s.width>this.x-e&&s.y+s.height>this.y-e&&s.x<this.x+this.width+e&&s.y<this.y+this.height+e},intersect:function(){var s=$.read(arguments),e=Math.max(this.x,s.x),t=Math.max(this.y,s.y),r=Math.min(this.x+this.width,s.x+s.width),o=Math.min(this.y+this.height,s.y+s.height);return new $(e,t,r-e,o-t)},unite:function(){var s=$.read(arguments),e=Math.min(this.x,s.x),t=Math.min(this.y,s.y),r=Math.max(this.x+this.width,s.x+s.width),o=Math.max(this.y+this.height,s.y+s.height);return new $(e,t,r-e,o-t)},include:function(){var s=z.read(arguments),e=Math.min(this.x,s.x),t=Math.min(this.y,s.y),r=Math.max(this.x+this.width,s.x),o=Math.max(this.y+this.height,s.y);return new $(e,t,r-e,o-t)},expand:function(){var s=ee.read(arguments),e=s.width,t=s.height;return new $(this.x-e/2,this.y-t/2,this.width+e,this.height+t)},scale:function(s,e){return this.expand(this.width*s-this.width,this.height*(e===a?s:e)-this.height)}},h.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(s,e){var t=s.join(""),r=/^[RL]/.test(t);e>=4&&(s[1]+=r?"Y":"X");var o=s[r?0:1],l=s[r?1:0],c="get"+o,f="get"+l,d="set"+o,_="set"+l,m="get"+t,w="set"+t;this[m]=function(y){var v=y?z:ue;return new v(this[c](),this[f](),this,w)},this[w]=function(){var y=z.read(arguments);this[d](y.x),this[_](y.y)}},{beans:!0})),J=$.extend({initialize:function(e,t,r,o,l,c){this._set(e,t,r,o,!0),this._owner=l,this._setter=c},_set:function(s,e,t,r,o){return this._x=s,this._y=e,this._width=t,this._height=r,o||this._owner[this._setter](this),this}},new function(){var s=$.prototype;return h.each(["x","y","width","height"],function(e){var t=h.capitalize(e),r="_"+e;this["get"+t]=function(){return this[r]},this["set"+t]=function(o){this[r]=o,this._dontNotify||this._owner[this._setter](this)}},h.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var t="set"+e;this[t]=function(){this._dontNotify=!0,s[t].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(e){var t=this._owner;t._changeSelection&&t._changeSelection(2,e)}}))}),te=h.extend({_class:"Matrix",initialize:function s(e,t){var r=arguments,o=r.length,l=!0;if(o>=6?this._set.apply(this,r):o===1||o===2?e instanceof s?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,t):Array.isArray(e)?this._set.apply(this,t?e.concat([t]):e):l=!1:o?l=!1:this.reset(),!l)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(s,e,t,r,o,l,c){return this._a=s,this._b=e,this._c=t,this._d=r,this._tx=o,this._ty=l,c||this._changed(),this},_serialize:function(s,e){return h.serialize(this.getValues(),s,!0,e)},_changed:function(){var s=this._owner;s&&(s._applyMatrix?s.transform(null,!0):s._changed(25))},clone:function(){return new te(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(s){return s===this||s&&this._a===s._a&&this._b===s._b&&this._c===s._c&&this._d===s._d&&this._tx===s._tx&&this._ty===s._ty},toString:function(){var s=K.instance;return"[["+[s.number(this._a),s.number(this._c),s.number(this._tx)].join(", ")+"], ["+[s.number(this._b),s.number(this._d),s.number(this._ty)].join(", ")+"]]"},reset:function(s){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,s||this._changed(),this},apply:function(s,e){var t=this._owner;return t?(t.transform(null,h.pick(s,!0),e),this.isIdentity()):!1},translate:function(){var s=z.read(arguments),e=s.x,t=s.y;return this._tx+=e*this._a+t*this._c,this._ty+=e*this._b+t*this._d,this._changed(),this},scale:function(){var s=arguments,e=z.read(s),t=z.read(s,0,{readNull:!0});return t&&this.translate(t),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,t&&this.translate(t.negate()),this._changed(),this},rotate:function(s){s*=Math.PI/180;var e=z.read(arguments,1),t=e.x,r=e.y,o=Math.cos(s),l=Math.sin(s),c=t-t*o+r*l,f=r-t*l-r*o,d=this._a,_=this._b,m=this._c,w=this._d;return this._a=o*d+l*m,this._b=o*_+l*w,this._c=-l*d+o*m,this._d=-l*_+o*w,this._tx+=c*d+f*m,this._ty+=c*_+f*w,this._changed(),this},shear:function(){var s=arguments,e=z.read(s),t=z.read(s,0,{readNull:!0});t&&this.translate(t);var r=this._a,o=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*r,this._d+=e.x*o,t&&this.translate(t.negate()),this._changed(),this},skew:function(){var s=arguments,e=z.read(s),t=z.read(s,0,{readNull:!0}),r=Math.PI/180,o=new z(Math.tan(e.x*r),Math.tan(e.y*r));return this.shear(o,t)},append:function(s,e){if(s){var t=this._a,r=this._b,o=this._c,l=this._d,c=s._a,f=s._c,d=s._b,_=s._d,m=s._tx,w=s._ty;this._a=c*t+d*o,this._c=f*t+_*o,this._b=c*r+d*l,this._d=f*r+_*l,this._tx+=m*t+w*o,this._ty+=m*r+w*l,e||this._changed()}return this},prepend:function(s,e){if(s){var t=this._a,r=this._b,o=this._c,l=this._d,c=this._tx,f=this._ty,d=s._a,_=s._c,m=s._b,w=s._d,y=s._tx,v=s._ty;this._a=d*t+_*r,this._c=d*o+_*l,this._b=m*t+w*r,this._d=m*o+w*l,this._tx=d*c+_*f+y,this._ty=m*c+w*f+v,e||this._changed()}return this},appended:function(s){return this.clone().append(s)},prepended:function(s){return this.clone().prepend(s)},invert:function(){var s=this._a,e=this._b,t=this._c,r=this._d,o=this._tx,l=this._ty,c=s*r-e*t,f=null;return c&&!isNaN(c)&&isFinite(o)&&isFinite(l)&&(this._a=r/c,this._b=-e/c,this._c=-t/c,this._d=s/c,this._tx=(t*l-r*o)/c,this._ty=(e*o-s*l)/c,f=this),f},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new te(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var s=this._a*this._d-this._c*this._b;return s&&!isNaN(s)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(s,e,t){return arguments.length<3?this._transformPoint(z.read(arguments)):this._transformCoordinates(s,e,t)},_transformPoint:function(s,e,t){var r=s.x,o=s.y;return e||(e=new z),e._set(r*this._a+o*this._c+this._tx,r*this._b+o*this._d+this._ty,t)},_transformCoordinates:function(s,e,t){for(var r=0,o=2*t;r<o;r+=2){var l=s[r],c=s[r+1];e[r]=l*this._a+c*this._c+this._tx,e[r+1]=l*this._b+c*this._d+this._ty}return e},_transformCorners:function(s){var e=s.x,t=s.y,r=e+s.width,o=t+s.height,l=[e,t,r,t,r,o,e,o];return this._transformCoordinates(l,l,4)},_transformBounds:function(s,e,t){for(var r=this._transformCorners(s),o=r.slice(0,2),l=o.slice(),c=2;c<8;c++){var f=r[c],d=c&1;f<o[d]?o[d]=f:f>l[d]&&(l[d]=f)}return e||(e=new $),e._set(o[0],o[1],l[0]-o[0],l[1]-o[1],t)},inverseTransform:function(){return this._inverseTransform(z.read(arguments))},_inverseTransform:function(s,e,t){var r=this._a,o=this._b,l=this._c,c=this._d,f=this._tx,d=this._ty,_=r*c-o*l,m=null;if(_&&!isNaN(_)&&isFinite(f)&&isFinite(d)){var w=s.x-this._tx,y=s.y-this._ty;e||(e=new z),m=e._set((w*c-y*l)/_,(y*r-w*o)/_,t)}return m},decompose:function(){var s=this._a,e=this._b,t=this._c,r=this._d,o=s*r-e*t,l=Math.sqrt,c=Math.atan2,f=180/Math.PI,d,_,m;if(s!==0||e!==0){var w=l(s*s+e*e);d=Math.acos(s/w)*(e>0?1:-1),_=[w,o/w],m=[c(s*t+e*r,w*w),0]}else if(t!==0||r!==0){var y=l(t*t+r*r);d=Math.asin(t/y)*(r>0?1:-1),_=[o/y,y],m=[0,c(s*t+e*r,y*y)]}else d=0,m=_=[0,0];return{translation:this.getTranslation(),rotation:d*f,scaling:new z(_),skewing:new z(m[0]*f,m[1]*f)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new z(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(s){this.isIdentity()||s.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},h.each(["a","b","c","d","tx","ty"],function(s){var e=h.capitalize(s),t="_"+s;this["get"+e]=function(){return this[t]},this["set"+e]=function(r){this[t]=r,this._changed()}},{})),pe=h.extend({_class:"Line",initialize:function(e,t,r,o,l){var c=!1;arguments.length>=4?(this._px=e,this._py=t,this._vx=r,this._vy=o,c=l):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,c=r),c||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new z(this._px,this._py)},getVector:function(){return new z(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(s,e){return pe.intersect(this._px,this._py,this._vx,this._vy,s._px,s._py,s._vx,s._vy,!0,e)},getSide:function(s,e){return pe.getSide(this._px,this._py,this._vx,this._vy,s.x,s.y,!0,e)},getDistance:function(s){return Math.abs(this.getSignedDistance(s))},getSignedDistance:function(s){return pe.getSignedDistance(this._px,this._py,this._vx,this._vy,s.x,s.y,!0)},isCollinear:function(s){return z.isCollinear(this._vx,this._vy,s._vx,s._vy)},isOrthogonal:function(s){return z.isOrthogonal(this._vx,this._vy,s._vx,s._vy)},statics:{intersect:function(s,e,t,r,o,l,c,f,d,_){d||(t-=s,r-=e,c-=o,f-=l);var m=t*f-r*c;if(!X.isMachineZero(m)){var w=s-o,y=e-l,v=(c*y-f*w)/m,C=(t*y-r*w)/m,T=1e-12,N=-T,k=1+T;if(_||N<v&&v<k&&N<C&&C<k)return _||(v=v<=0?0:v>=1?1:v),new z(s+v*t,e+v*r)}},getSide:function(s,e,t,r,o,l,c,f){c||(t-=s,r-=e);var d=o-s,_=l-e,m=d*r-_*t;return!f&&X.isMachineZero(m)&&(m=(d*t+d*t)/(t*t+r*r),m>=0&&m<=1&&(m=0)),m<0?-1:m>0?1:0},getSignedDistance:function(s,e,t,r,o,l,c){return c||(t-=s,r-=e),t===0?r>0?o-s:s-o:r===0?t<0?l-e:e-l:((o-s)*r-(l-e)*t)/(r>t?r*Math.sqrt(1+t*t/(r*r)):t*Math.sqrt(1+r*r/(t*t)))},getDistance:function(s,e,t,r,o,l,c){return Math.abs(pe.getSignedDistance(s,e,t,r,o,l,c))}}}),we=D.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){D.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Ni(null,null,this),this._view=et.create(this,e||It.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(s,e){return h.serialize(this._children,s,!0,e)},_changed:function(s,e){if(s&1){var t=this._view;t&&(t._needsUpdate=!0,!t._requested&&t._autoUpdate&&t.requestUpdate())}var r=this._changes;if(r&&e){var o=this._changesById,l=e._id,c=o[l];c?c.flags|=s:r.push(o[l]={item:e,flags:s})}},clear:function(){for(var s=this._children,e=s.length-1;e>=0;e--)s[e].remove()},isEmpty:function(){return!this._children.length},remove:function s(){return s.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(s){this._currentStyle.set(s)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Pe({project:this,insert:!0})},getSymbolDefinitions:function(){var s=[],e={};return this.getItems({class:ot,match:function(t){var r=t._definition,o=r._id;return e[o]||(e[o]=!0,s.push(r)),!1}}),s},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var s=this._selectionItems,e=[];for(var t in s){var r=s[t],o=r._selection;o&1&&r.isInserted()?e.push(r):o||this._updateSelection(r)}return e},_updateSelection:function(s){var e=s._id,t=this._selectionItems;s._selection?t[e]!==s&&(this._selectionCount++,t[e]=s):t[e]===s&&(this._selectionCount--,delete t[e])},selectAll:function(){for(var s=this._children,e=0,t=s.length;e<t;e++)s[e].setFullySelected(!0)},deselectAll:function(){var s=this._selectionItems;for(var e in s)s[e].setFullySelected(!1)},addLayer:function(s){return this.insertLayer(a,s)},insertLayer:function(s,e){if(e instanceof Pe){e._remove(!1,!0),h.splice(this._children,[e],s,0),e._setProject(this,!0);var t=e._name;t&&e.setName(t),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(s,e,t){return e=this.insertLayer(s,e)||(this._activeLayer||this._insertItem(a,new Pe(B.NO_INSERT),!0)).insertChild(s,e),t&&e.activate&&e.activate(),e},getItems:function(s){return B._getItems(this,s)},getItem:function(s){return B._getItems(this,s,null,null,!0)[0]||null},importJSON:function(s){this.activate();var e=this._activeLayer;return h.importJSON(s,e&&e.isEmpty()&&e)},removeOn:function(s){var e=this._removeSets;if(e){s==="mouseup"&&(e.mousedrag=null);var t=e[s];if(t){for(var r in t){var o=t[r];for(var l in e){var c=e[l];c&&c!=t&&delete c[o._id]}o.remove()}e[s]=null}}},draw:function(s,e,t){this._updateVersion++,s.save(),e.applyToContext(s);for(var r=this._children,o=new h({offset:new z(0,0),pixelRatio:t,viewMatrix:e.isIdentity()?null:e,matrices:[new te],updateMatrix:!0}),l=0,c=r.length;l<c;l++)r[l].draw(s,o);if(s.restore(),this._selectionCount>0){s.save(),s.strokeWidth=1;var f=this._selectionItems,d=this._scope.settings.handleSize,_=this._updateVersion;for(var m in f)f[m]._drawSelection(s,e,d,f,_);s.restore()}}}),B=h.extend(P,{statics:{extend:function s(e){return e._serializeFields&&(e._serializeFields=h.set({},this.prototype._serializeFields,e._serializeFields)),s.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new te,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var s=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return h.each(s,function(e){this._events[e]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:s}})},{initialize:function(){},_initialize:function(s,e){var t=s&&h.isPlainObject(s),r=t&&s.internal===!0,o=this._matrix=new te,l=t&&s.project||rt.project,c=rt.settings;return this._id=r?null:ie.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&c.applyMatrix,e&&o.translate(e),o._owner=this,this._style=new Ni(l._currentStyle,this,l),r||t&&s.insert==!1||!c.insertItems&&!(t&&s.insert===!0)?this._setProject(l):(t&&s.parent||l)._insertItem(a,this,!0),t&&s!==B.NO_INSERT&&this.set(s,{internal:!0,insert:!0,project:!0,parent:!0}),t},_serialize:function(s,e){var t={},r=this;function o(l){for(var c in l){var f=r[c];h.equals(f,c==="leading"?l.fontSize*1.2:l[c])||(t[c]=h.serialize(f,s,c!=="data",e))}}return o(this._serializeFields),this instanceof Ne||o(this._style._defaults),[this._class,t]},_changed:function(s){var e=this._symbol,t=this._parent||e,r=this._project;s&8&&(this._bounds=this._position=this._decomposed=a),s&16&&(this._globalMatrix=a),t&&s&72&&B._clearBoundsCache(t),s&2&&B._clearBoundsCache(this),r&&r._changed(s,this),e&&e._changed(s)},getId:function(){return this._id},getName:function(){return this._name},setName:function(s){if(this._name&&this._removeNamed(),s===+s+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(s&&e){var t=e._children,r=e._namedChildren;(r[s]=r[s]||[]).push(this),s in t||(t[s]=this)}this._name=s||a,this._changed(256)},getStyle:function(){return this._style},setStyle:function(s){this.getStyle().set(s)}},h.each(["locked","visible","blendMode","opacity","guide"],function(s){var e=h.capitalize(s),t="_"+s,r={locked:256,visible:265};this["get"+e]=function(){return this[t]},this["set"+e]=function(o){o!=this[t]&&(this[t]=o,this._changed(r[s]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(s){if(s!==this._selection){this._selection=s;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(s,e){var t=this._selection;this.setSelection(e?t|s:t&~s)},isSelected:function(){if(this._selectChildren){for(var s=this._children,e=0,t=s.length;e<t;e++)if(s[e].isSelected())return!0}return!!(this._selection&1)},setSelected:function(s){if(this._selectChildren)for(var e=this._children,t=0,r=e.length;t<r;t++)e[t].setSelected(s);this._changeSelection(1,s)},isFullySelected:function(){var s=this._children,e=!!(this._selection&1);if(s&&e){for(var t=0,r=s.length;t<r;t++)if(!s[t].isFullySelected())return!1;return!0}return e},setFullySelected:function(s){var e=this._children;if(e)for(var t=0,r=e.length;t<r;t++)e[t].setFullySelected(s);this._changeSelection(1,s)},isClipMask:function(){return this._clipMask},setClipMask:function(s){this._clipMask!=(s=!!s)&&(this._clipMask=s,s&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(s){this._data=s},getPosition:function(s){var e=s?z:ue,t=this._position||(this._position=this._getPositionFromBounds());return new e(t.x,t.y,this,"setPosition")},setPosition:function(){this.translate(z.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(s){return this._pivot?this._matrix._transformPoint(this._pivot):(s||this.getBounds()).getCenter(!0)},getPivot:function(){var s=this._pivot;return s?new ue(s.x,s.y,this,"setPivot"):null},setPivot:function(){this._pivot=z.read(arguments,0,{clone:!0,readNull:!0}),this._position=a}},h.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(s,e){this[e]=function(t){return this.getBounds(t,s)}},{beans:!0,getBounds:function(s,e){var t=e||s instanceof te,r=h.set({},t?e:s,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var o=this._getCachedBounds(t&&s,r).rect;return arguments.length?o:new J(o.x,o.y,o.width,o.height,this,"setBounds")},setBounds:function(){var s=$.read(arguments),e=this.getBounds(),t=this._matrix,r=new te,o=s.getCenter();r.translate(o),(s.width!=e.width||s.height!=e.height)&&(t.isInvertible()||(t.set(t._backup||new te().translate(t.getTranslation())),e=this.getBounds()),r.scale(e.width!==0?s.width/e.width:0,e.height!==0?s.height/e.height:0)),o=e.getCenter(),r.translate(-o.x,-o.y),this.transform(r)},_getBounds:function(s,e){var t=this._children;return!t||!t.length?new $:(B._updateBoundsCache(this,e.cacheItem),B._getBounds(t,s,e))},_getBoundsCacheKey:function(s,e){return[s.stroke?1:0,s.handle?1:0,e?1:0].join("")},_getCachedBounds:function(s,e,t){s=s&&s._orNullIfIdentity();var r=e.internal&&!t,o=e.cacheItem,l=r?null:this._matrix._orNullIfIdentity(),c=o&&(!s||s.equals(l))&&this._getBoundsCacheKey(e,r),f=this._bounds;if(B._updateBoundsCache(this._parent||this._symbol,o),c&&f&&c in f){var d=f[c];return{rect:d.rect.clone(),nonscaling:d.nonscaling}}var _=this._getBounds(s||l,e),m=_.rect||_,w=this._style,y=_.nonscaling||w.hasStroke()&&!w.getStrokeScaling();if(c){f||(this._bounds=f={});var d=f[c]={rect:m.clone(),nonscaling:y,internal:r}}return{rect:m,nonscaling:y}},_getStrokeMatrix:function(s,e){var t=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,r=t?t.getViewMatrix().invert():s;return r&&r._shiftless()},statics:{_updateBoundsCache:function(s,e){if(s&&e){var t=e._id,r=s._boundsCache=s._boundsCache||{ids:{},list:[]};r.ids[t]||(r.list.push(e),r.ids[t]=e)}},_clearBoundsCache:function(s){var e=s._boundsCache;if(e){s._bounds=s._position=s._boundsCache=a;for(var t=0,r=e.list,o=r.length;t<o;t++){var l=r[t];l!==s&&(l._bounds=l._position=a,l._boundsCache&&B._clearBoundsCache(l))}}},_getBounds:function(s,e,t){var r=1/0,o=-r,l=r,c=o,f=!1;t=t||{};for(var d=0,_=s.length;d<_;d++){var m=s[d];if(m._visible&&!m.isEmpty(!0)){var w=m._getCachedBounds(e&&e.appended(m._matrix),t,!0),y=w.rect;r=Math.min(y.x,r),l=Math.min(y.y,l),o=Math.max(y.x+y.width,o),c=Math.max(y.y+y.height,c),w.nonscaling&&(f=!0)}}return{rect:isFinite(r)?new $(r,l,o-r,c-l):new $,nonscaling:f}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var s=this._decompose();return s?s.rotation:0},setRotation:function(s){var e=this.getRotation();if(e!=null&&s!=null){var t=this._decomposed;this.rotate(s-e),t&&(t.rotation=s,this._decomposed=t)}},getScaling:function(){var s=this._decompose(),e=s&&s.scaling;return new ue(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var s=this.getScaling(),e=z.read(arguments,0,{clone:!0,readNull:!0});if(s&&e&&!s.equals(e)){var t=this.getRotation(),r=this._decomposed,o=new te,l=X.isZero;if(l(s.x)||l(s.y))o.translate(r.translation),t&&o.rotate(t),o.scale(e.x,e.y),this._matrix.set(o);else{var c=this.getPosition(!0);o.translate(c),t&&o.rotate(t),o.scale(e.x/s.x,e.y/s.y),t&&o.rotate(-t),o.translate(c.negate()),this.transform(o)}r&&(r.scaling=e,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var s=this._matrix;s.set.apply(s,arguments)},getGlobalMatrix:function(s){var e=this._globalMatrix;if(e)for(var t=this._parent,r=[];t;){if(!t._globalMatrix){e=null;for(var o=0,l=r.length;o<l;o++)r[o]._globalMatrix=null;break}r.push(t),t=t._parent}if(!e){e=this._globalMatrix=this._matrix.clone();var t=this._parent;t&&e.prepend(t.getGlobalMatrix(!0))}return s?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(s){(this._applyMatrix=this._canApplyMatrix&&!!s)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(s,e){if(this._project!==s){this._project&&this._installEvents(!1),this._project=s;for(var t=this._children,r=0,o=t&&t.length;r<o;r++)t[r]._setProject(s);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function s(e){s.base.call(this,e);for(var t=this._children,r=0,o=t&&t.length;r<o;r++)t[r]._installEvents(e)},getLayer:function(){for(var s=this;s=s._parent;)if(s instanceof Pe)return s;return null},getParent:function(){return this._parent},setParent:function(s){return s.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(s){this.removeChildren(),this.addChildren(s)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var s=this._getOwner();return s&&s._children[this._index+1]||null},getPreviousSibling:function(){var s=this._getOwner();return s&&s._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(s){return s===this||s&&this._class===s._class&&this._style.equals(s._style)&&this._matrix.equals(s._matrix)&&this._locked===s._locked&&this._visible===s._visible&&this._blendMode===s._blendMode&&this._opacity===s._opacity&&this._clipMask===s._clipMask&&this._guide===s._guide&&this._equals(s)||!1},_equals:function(s){return h.equals(this._children,s._children)},clone:function(s){var e=new this.constructor(B.NO_INSERT),t=this._children,r=h.pick(s?s.insert:a,s===a||s===!0),o=h.pick(s?s.deep:a,!0);t&&e.copyAttributes(this),(!t||o)&&e.copyContent(this),t||e.copyAttributes(this),r&&e.insertAbove(this);var l=this._name,c=this._parent;if(l&&c){for(var t=c._children,f=l,d=1;t[l];)l=f+" "+d++;l!==f&&e.setName(l)}return e},copyContent:function(s){for(var e=s._children,t=0,r=e&&e.length;t<r;t++)this.addChild(e[t].clone(!1),!0)},copyAttributes:function(s,e){this.setStyle(s._style);for(var t=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,o=t.length;r<o;r++){var l=t[r];s.hasOwnProperty(l)&&(this[l]=s[l])}e||this._matrix.set(s._matrix,!0),this.setApplyMatrix(s._applyMatrix),this.setPivot(s._pivot),this.setSelection(s._selection);var c=s._data,f=s._name;this._data=c?h.clone(c):null,f&&this.setName(f)},rasterize:function(s,e){var t,r,o;h.isPlainObject(s)?(t=s.resolution,r=s.insert,o=s.raster):(t=s,r=e),o?o.matrix.reset(!0):o=new Ve(B.NO_INSERT);var l=this.getStrokeBounds(),c=(t||this.getView().getResolution())/72,f=l.getTopLeft().floor(),d=l.getBottomRight().ceil(),_=new ee(d.subtract(f)),m=_.multiply(c);if(o.setSize(m,!0),!m.isZero()){var w=o.getContext(!0),y=new te().scale(c).translate(f.negate());w.save(),y.applyToContext(w),this.draw(w,new h({matrices:[y]})),w.restore()}return o.transform(new te().translate(f.add(_.divide(2))).scale(1/c)),(r===a||r)&&o.insertAbove(this),o},contains:function(){var s=this._matrix;return s.isInvertible()&&!!this._contains(s._inverseTransform(z.read(arguments)))},_contains:function(s){var e=this._children;if(e){for(var t=e.length-1;t>=0;t--)if(e[t].contains(s))return!0;return!1}return s.isInside(this.getInternalBounds())},isInside:function(){return $.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new be.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(s,e){return s instanceof B?this._asPathItem().getIntersections(s._asPathItem(),null,e,!0).length>0:!1}},new function(){function s(){var r=arguments;return this._hitTest(z.read(r),st.getOptions(r))}function e(){var r=arguments,o=z.read(r),l=st.getOptions(r),c=[];return this._hitTest(o,new h({all:c},l)),c}function t(r,o,l,c){var f=this._children;if(f)for(var d=f.length-1;d>=0;d--){var _=f[d],m=_!==c&&_._hitTest(r,o,l);if(m&&!o.all)return m}return null}return we.inject({hitTest:s,hitTestAll:e,_hitTest:t}),{hitTest:s,hitTestAll:e,_hitTestChildren:t}},{_hitTest:function(s,e,t){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var r=this._matrix,o=t?t.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),l=Math.max(e.tolerance,1e-12),c=e._tolerancePadding=new ee(be._getStrokePadding(l,r._shiftless().invert()));if(s=r._inverseTransform(s),!s||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(c.multiply(2))._containsPoint(s))return null;var f=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==h.hyphenate(this._class)||e.class&&!(this instanceof e.class)),d=e.match,_=this,m,w;function y(S){return S&&d&&!d(S)&&(S=null),S&&e.all&&e.all.push(S),S}function v(S,x){var E=x?m["get"+x]():_.getPosition();if(s.subtract(E).divide(c).length<=1)return new st(S,_,{name:x?h.hyphenate(x):S,point:E})}var C=e.position,T=e.center,N=e.bounds;if(f&&this._parent&&(C||T||N)){if((T||N)&&(m=this.getInternalBounds()),w=C&&v("position")||T&&v("center","Center"),!w&&N)for(var k=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!w;b++)w=v("bounds",k[b]);w=y(w)}return w||(w=this._hitTestChildren(s,e,o)||f&&y(this._hitTestSelf(s,e,o,this.getStrokeScaling()?null:o._shiftless().invert()))||null),w&&w.point&&(w.point=r.transform(w.point)),w},_hitTestSelf:function(s,e){if(e.fill&&this.hasFill()&&this._contains(s))return new st("fill",this)},matches:function(s,e){function t(c,f){for(var d in c)if(c.hasOwnProperty(d)){var _=c[d],m=f[d];if(h.isPlainObject(_)&&h.isPlainObject(m)){if(!t(_,m))return!1}else if(!h.equals(_,m))return!1}return!0}var r=typeof s;if(r==="object"){for(var o in s)if(s.hasOwnProperty(o)&&!this.matches(o,s[o]))return!1;return!0}else{if(r==="function")return s(this);if(s==="match")return e(this);var l=/^(empty|editable)$/.test(s)?this["is"+h.capitalize(s)]():s==="type"?h.hyphenate(this._class):this[s];if(s==="class"){if(typeof e=="function")return this instanceof e;l=this._class}if(typeof e=="function")return!!e(l);if(e){if(e.test)return e.test(l);if(h.isPlainObject(e))return t(e,l)}return h.equals(l,e)}},getItems:function(s){return B._getItems(this,s,this._matrix)},getItem:function(s){return B._getItems(this,s,this._matrix,null,!0)[0]||null},statics:{_getItems:function s(e,t,r,o,l){if(!o){var c=typeof t=="object"&&t,f=c&&c.overlapping,d=c&&c.inside,_=f||d,y=_&&$.read([_]);o={items:[],recursive:c&&c.recursive!==!1,inside:!!d,overlapping:!!f,rect:y,path:f&&new be.Rectangle({rectangle:y,insert:!1})},c&&(t=h.filter({},t,{recursive:!0,inside:!0,overlapping:!0}))}var m=e._children,w=o.items,y=o.rect;r=y&&(r||new te);for(var v=0,C=m&&m.length;v<C;v++){var T=m[v],N=r&&r.appended(T._matrix),k=!0;if(y){var _=T.getBounds(N);if(!y.intersects(_))continue;y.contains(_)||o.overlapping&&(_.contains(y)||o.path.intersects(T,N))||(k=!1)}if(k&&T.matches(t)&&(w.push(T),l)||(o.recursive!==!1&&s(T,t,N,o,l),l&&w.length>0))break}return w}}},{importJSON:function(s){var e=h.importJSON(s,this);return e!==this?this.addChild(e):e},addChild:function(s){return this.insertChild(a,s)},insertChild:function(s,e){var t=e?this.insertChildren(s,[e]):null;return t&&t[0]},addChildren:function(s){return this.insertChildren(this._children.length,s)},insertChildren:function(s,e){var t=this._children;if(t&&e&&e.length>0){e=h.slice(e);for(var r={},o=e.length-1;o>=0;o--){var l=e[o],c=l&&l._id;!l||r[c]?e.splice(o,1):(l._remove(!1,!0),r[c]=!0)}h.splice(t,e,s,0);for(var f=this._project,d=f._changes,o=0,_=e.length;o<_;o++){var l=e[o],m=l._name;l._parent=this,l._setProject(f,!0),m&&l.setName(m),d&&l._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(s,e){var t=s&&s._getOwner(),r=s!==this&&t?this:null;return r&&(r._remove(!1,!0),t._insertItem(s._index+e,r)),r},insertAbove:function(s){return this._insertAt(s,1)},insertBelow:function(s){return this._insertAt(s,0)},sendToBack:function(){var s=this._getOwner();return s?s._insertItem(0,this):null},bringToFront:function(){var s=this._getOwner();return s?s._insertItem(a,this):null},appendTop:"#addChild",appendBottom:function(s){return this.insertChild(0,s)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(s){return s._insertItem(a,this)},copyTo:function(s){return this.clone(!1).addTo(s)},reduce:function(s){var e=this._children;if(e&&e.length===1){var t=e[0].reduce(s);return this._parent?(t.insertAbove(this),this.remove()):t.remove(),t}return this},_removeNamed:function(){var s=this._getOwner();if(s){var e=s._children,t=s._namedChildren,r=this._name,o=t[r],l=o?o.indexOf(this):-1;l!==-1&&(e[r]==this&&delete e[r],o.splice(l,1),o.length?e[r]=o[0]:delete t[r])}},_remove:function(s,e){var t=this._getOwner(),r=this._project,o=this._index;return this._style&&this._style._dispose(),t?(this._name&&this._removeNamed(),o!=null&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),h.splice(t._children,null,o,1)),this._installEvents(!1),s&&r._changes&&this._changed(5),e&&t._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(s){var e=s&&s.insertBelow(this);return e&&this.remove(),e},removeChildren:function(s,e){if(!this._children)return null;s=s||0,e=h.pick(e,this._children.length);for(var t=h.splice(this._children,null,s,e-s),r=t.length-1;r>=0;r--)t[r]._remove(!0,!1);return t.length>0&&this._changed(11),t},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var s=0,e=this._children.length;s<e;s++)this._children[s]._index=s;this._changed(11)}},isEmpty:function(s){var e=this._children,t=e?e.length:0;if(s){for(var r=0;r<t;r++)if(!e[r].isEmpty(s))return!1;return!0}return!t},isEditable:function(){for(var s=this;s;){if(!s._visible||s._locked)return!1;s=s._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(s){function e(c){var f=[];do f.unshift(c);while(c=c._parent);return f}for(var t=e(this),r=e(s),o=0,l=Math.min(t.length,r.length);o<l;o++)if(t[o]!=r[o])return t[o]._index<r[o]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(s){return this._getOrder(s)===-1},isBelow:function(s){return this._getOrder(s)===1},isParent:function(s){return this._parent===s},isChild:function(s){return s&&s._parent===this},isDescendant:function(s){for(var e=this;e=e._parent;)if(e===s)return!0;return!1},isAncestor:function(s){return s?s.isDescendant(this):!1},isSibling:function(s){return this._parent===s._parent},isGroupedWith:function(s){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&s.isDescendant(e))return!0;e=e._parent}return!1}},h.each(["rotate","scale","shear","skew"],function(s){var e=s==="rotate";this[s]=function(){var t=arguments,r=(e?h:z).read(t),o=z.read(t,0,{readNull:!0});return this.transform(new te()[s](r,o||this.getPosition(!0)))}},{translate:function(){var s=new te;return this.transform(s.translate.apply(s,arguments))},transform:function(s,e,t){var r=this._matrix,o=s&&!s.isIdentity(),l=t&&this._canApplyMatrix||this._applyMatrix&&(o||!r.isIdentity()||e&&this._children);if(!o&&!l)return this;if(o){!s.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(s,!0);var c=this._style,f=c.getFillColor(!0),d=c.getStrokeColor(!0);f&&f.transform(s),d&&d.transform(s)}if(l&&(l=this._transformContent(r,e,t))){var _=this._pivot;_&&r._transformPoint(_,_,!0),r.reset(!0),t&&this._canApplyMatrix&&(this._applyMatrix=!0)}var m=this._bounds,w=this._position;(o||l)&&this._changed(25);var y=o&&m&&s.decompose();if(y&&y.skewing.isZero()&&y.rotation%90===0){for(var v in m){var C=m[v];if(C.nonscaling)delete m[v];else if(l||!C.internal){var T=C.rect;s._transformBounds(T,T)}}this._bounds=m;var N=m[this._getBoundsCacheKey(this._boundsOptions||{})];N&&(this._position=this._getPositionFromBounds(N.rect))}else o&&w&&this._pivot&&(this._position=s._transformPoint(w,w));return this},_transformContent:function(s,e,t){var r=this._children;if(r){for(var o=0,l=r.length;o<l;o++)r[o].transform(s,e,t);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(z.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(z.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(z.read(arguments))},localToParent:function(){return this._matrix._transformPoint(z.read(arguments))},fitBounds:function(s,e){s=$.read(arguments);var t=this.getBounds(),r=t.height/t.width,o=s.height/s.width,l=(e?r>o:r<o)?s.width/t.width:s.height/t.height,c=new $(new z,new ee(t.width*l,t.height*l));c.setCenter(s.getCenter()),this.setBounds(c)}}),{_setStyles:function(s,e,t){var r=this._style,o=this._matrix;if(r.hasFill()&&(s.fillStyle=r.getFillColor().toCanvasStyle(s,o)),r.hasStroke()){s.strokeStyle=r.getStrokeColor().toCanvasStyle(s,o),s.lineWidth=r.getStrokeWidth();var l=r.getStrokeJoin(),c=r.getStrokeCap(),f=r.getMiterLimit();if(l&&(s.lineJoin=l),c&&(s.lineCap=c),f&&(s.miterLimit=f),rt.support.nativeDash){var d=r.getDashArray(),_=r.getDashOffset();d&&d.length&&("setLineDash"in s?(s.setLineDash(d),s.lineDashOffset=_):(s.mozDash=d,s.mozDashOffset=_))}}if(r.hasShadow()){var m=e.pixelRatio||1,w=t._shiftless().prepend(new te().scale(m,m)),y=w.transform(new z(r.getShadowBlur(),0)),v=w.transform(this.getShadowOffset());s.shadowColor=r.getShadowColor().toCanvasStyle(s),s.shadowBlur=y.getLength(),s.shadowOffsetX=v.x,s.shadowOffsetY=v.y}},draw:function(s,e,t){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var r=e.matrices,o=e.viewMatrix,l=this._matrix,c=r[r.length-1].appended(l);if(!!c.isInvertible()){o=o?o.appended(c):c,r.push(c),e.updateMatrix&&(this._globalMatrix=c);var f=this._blendMode,d=X.clamp(this._opacity,0,1),_=f==="normal",m=mt.nativeModes[f],w=_&&d===1||e.dontStart||e.clip||(m||_&&d<1)&&this._canComposite(),y=e.pixelRatio||1,v,C,T;if(!w){var N=this.getStrokeBounds(o);if(!N.width||!N.height){r.pop();return}T=e.offset,C=e.offset=N.getTopLeft().floor(),v=s,s=It.getContext(N.getSize().ceil().add(1).multiply(y)),y!==1&&s.scale(y,y)}s.save();var k=t?t.appended(l):this._canScaleStroke&&!this.getStrokeScaling(!0)&&o,b=!w&&e.clipItem,S=!k||b;if(w?(s.globalAlpha=d,m&&(s.globalCompositeOperation=f)):S&&s.translate(-C.x,-C.y),S&&(w?l:o).applyToContext(s),b&&e.clipItem.draw(s,e.extend({clip:!0})),k){s.setTransform(y,0,0,y,0,0);var x=e.offset;x&&s.translate(-x.x,-x.y)}this._draw(s,e,o,k),s.restore(),r.pop(),e.clip&&!e.dontFinish&&s.clip(this.getFillRule()),w||(mt.process(f,s,v,d,C.subtract(T).multiply(y)),It.release(s),e.offset=T)}}},_isUpdated:function(s){var e=this._parent;if(e instanceof Be)return e._isUpdated(s);var t=this._updateVersion===s;return!t&&e&&e._visible&&e._isUpdated(s)&&(this._updateVersion=s,t=!0),t},_drawSelection:function(s,e,t,r,o){var l=this._selection,c=l&1,f=l&2||c&&this._selectBounds,d=l&4;if(this._drawSelected||(c=!1),(c||f||d)&&this._isUpdated(o)){var _,m=this.getSelectedColor(!0)||(_=this.getLayer())&&_.getSelectedColor(!0),w=e.appended(this.getGlobalMatrix(!0)),y=t/2;if(s.strokeStyle=s.fillStyle=m?m.toCanvasStyle(s):"#009dec",c&&this._drawSelected(s,w,r),d){var v=this.getPosition(!0),C=this._parent,T=C?C.localToGlobal(v):v,N=T.x,k=T.y;s.beginPath(),s.arc(N,k,y,0,Math.PI*2,!0),s.stroke();for(var b=[[0,-1],[1,0],[0,1],[-1,0]],S=y,x=t+1,E=0;E<4;E++){var I=b[E],M=I[0],L=I[1];s.moveTo(N+M*S,k+L*S),s.lineTo(N+M*x,k+L*x),s.stroke()}}if(f){var R=w._transformCorners(this.getInternalBounds());s.beginPath();for(var E=0;E<8;E++)s[E?"lineTo":"moveTo"](R[E],R[++E]);s.closePath(),s.stroke();for(var E=0;E<8;E++)s.fillRect(R[E]-y,R[++E]-y,t,t)}}},_canComposite:function(){return!1}},h.each(["down","drag","up","move"],function(s){this["removeOn"+h.capitalize(s)]=function(){var e={};return e[s]=!0,this.removeOn(e)}},{removeOn:function(s){for(var e in s)if(s[e]){var t="mouse"+e,r=this._project,o=r._removeSets=r._removeSets||{};o[t]=o[t]||{},o[t][this._id]=this}return this}}),{tween:function(s,e,t){t||(t=e,e=s,s=null,t||(t=e,e=null));var r=t&&t.easing,o=t&&t.start,l=t!=null&&(typeof t=="number"?t:t.duration),c=new ir(this,s,e,l,r,o);function f(d){c._handleFrame(d.time*1e3),c.running||this.off("frame",f)}return l&&this.on("frame",f),c},tweenTo:function(s,e){return this.tween(null,s,e)},tweenFrom:function(s,e){return this.tween(s,null,e)}}),Ne=B.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function s(e){s.base.call(this,e),e&2050&&(this._clipItem=a)},_getClipItem:function(){var s=this._clipItem;if(s===a){s=null;for(var e=this._children,t=0,r=e.length;t<r;t++)if(e[t]._clipMask){s=e[t];break}this._clipItem=s}return s},isClipped:function(){return!!this._getClipItem()},setClipped:function(s){var e=this.getFirstChild();e&&e.setClipMask(s)},_getBounds:function s(e,t){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(e),h.set({},t,{stroke:!1})):s.base.call(this,e,t)},_hitTestChildren:function s(e,t,r){var o=this._getClipItem();return(!o||o.contains(e))&&s.base.call(this,e,t,r,o)},_draw:function(s,e){var t=e.clip,r=!t&&this._getClipItem();e=e.extend({clipItem:r,clip:!1}),t?(s.beginPath(),e.dontStart=e.dontFinish=!0):r&&r.draw(s,e.extend({clip:!0}));for(var o=this._children,l=0,c=o.length;l<c;l++){var f=o[l];f!==r&&f.draw(s,e)}}}),Pe=Ne.extend({_class:"Layer",initialize:function(){Ne.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function s(){return this._parent?s.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Fe=B.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,t){this._initialize(e,t)},_equals:function(s){return this._type===s._type&&this._size.equals(s._size)&&h.equals(this._radius,s._radius)},copyContent:function(s){this.setType(s._type),this.setSize(s._size),this.setRadius(s._radius)},getType:function(){return this._type},setType:function(s){this._type=s},getShape:"#getType",setShape:"#setType",getSize:function(){var s=this._size;return new ce(s.width,s.height,this,"setSize")},setSize:function(){var s=ee.read(arguments);if(!this._size)this._size=s.clone();else if(!this._size.equals(s)){var e=this._type,t=s.width,r=s.height;e==="rectangle"?this._radius.set(ee.min(this._radius,s.divide(2).abs())):e==="circle"?(t=r=(t+r)/2,this._radius=t/2):e==="ellipse"&&this._radius._set(t/2,r/2),this._size._set(t,r),this._changed(9)}},getRadius:function(){var s=this._radius;return this._type==="circle"?s:new ce(s.width,s.height,this,"setRadius")},setRadius:function(s){var e=this._type;if(e==="circle"){if(s===this._radius)return;var t=s*2;this._radius=s,this._size._set(t,t)}else if(s=ee.read(arguments),!this._radius)this._radius=s.clone();else{if(this._radius.equals(s))return;if(this._radius.set(s),e==="rectangle"){var t=ee.max(this._size,s.multiply(2));this._size.set(t)}else e==="ellipse"&&this._size._set(s.width*2,s.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(s){var e=new be[h.capitalize(this._type)]({center:new z,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),rt.settings.applyMatrix&&e.setApplyMatrix(!0),(s===a||s)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(s,e,t,r){var o=this._style,l=o.hasFill(),c=o.hasStroke(),f=e.dontFinish||e.clip,d=!r;if(l||c||f){var _=this._type,m=this._radius,w=_==="circle";if(e.dontStart||s.beginPath(),d&&w)s.arc(0,0,m,0,Math.PI*2,!0);else{var y=w?m:m.width,v=w?m:m.height,C=this._size,T=C.width,N=C.height;if(d&&_==="rectangle"&&y===0&&v===0)s.rect(-T/2,-N/2,T,N);else{var k=T/2,b=N/2,S=1-.5522847498307936,x=y*S,E=v*S,I=[-k,-b+v,-k,-b+E,-k+x,-b,-k+y,-b,k-y,-b,k-x,-b,k,-b+E,k,-b+v,k,b-v,k,b-E,k-x,b,k-y,b,-k+y,b,-k+x,b,-k,b-E,-k,b-v];r&&r.transform(I,I,32),s.moveTo(I[0],I[1]),s.bezierCurveTo(I[2],I[3],I[4],I[5],I[6],I[7]),k!==y&&s.lineTo(I[8],I[9]),s.bezierCurveTo(I[10],I[11],I[12],I[13],I[14],I[15]),b!==v&&s.lineTo(I[16],I[17]),s.bezierCurveTo(I[18],I[19],I[20],I[21],I[22],I[23]),k!==y&&s.lineTo(I[24],I[25]),s.bezierCurveTo(I[26],I[27],I[28],I[29],I[30],I[31])}}s.closePath()}!f&&(l||c)&&(this._setStyles(s,e,t),l&&(s.fill(o.getFillRule()),s.shadowColor="rgba(0,0,0,0)"),c&&s.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(s,e){var t=new $(this._size).setCenter(0,0),r=this._style,o=e.stroke&&r.hasStroke()&&r.getStrokeWidth();return s&&(t=s._transformBounds(t)),o?t.expand(be._getStrokePadding(o,this._getStrokeMatrix(s,e))):t}},new function(){function s(t,r,o){var l=t._radius;if(!l.isZero())for(var c=t._size.divide(2),f=1;f<=4;f++){var d=new z(f>1&&f<4?-1:1,f>2?-1:1),_=d.multiply(c),m=_.subtract(d.multiply(l)),w=new $(o?_.add(d.multiply(o)):_,m);if(w.contains(r))return{point:m,quadrant:f}}}function e(t,r,o,l){var c=t.divide(r);return(!l||c.isInQuadrant(l))&&c.subtract(c.normalize()).multiply(r).divide(o).length<=1}return{_contains:function t(r){if(this._type==="rectangle"){var o=s(this,r);return o?r.subtract(o.point).divide(this._radius).getLength()<=1:t.base.call(this,r)}else return r.divide(this.size).getLength()<=.5},_hitTestSelf:function t(r,o,l,c){var f=!1,d=this._style,_=o.stroke&&d.hasStroke(),m=o.fill&&d.hasFill();if(_||m){var w=this._type,y=this._radius,v=_?d.getStrokeWidth()/2:0,C=o._tolerancePadding.add(be._getStrokePadding(v,!d.getStrokeScaling()&&c));if(w==="rectangle"){var T=C.multiply(2),N=s(this,r,T);if(N)f=e(r.subtract(N.point),y,C,N.quadrant);else{var k=new $(this._size).setCenter(0,0),b=k.expand(T),S=k.expand(T.negate());f=b._containsPoint(r)&&!S._containsPoint(r)}}else f=e(r,y,C)}return f?new st(_?"stroke":"fill",this):t.base.apply(this,arguments)}}},{statics:new function(){function s(e,t,r,o,l){var c=h.create(Fe.prototype);return c._type=e,c._size=r,c._radius=o,c._initialize(h.getNamed(l),t),c}return{Circle:function(){var e=arguments,t=z.readNamed(e,"center"),r=h.readNamed(e,"radius");return s("circle",t,new ee(r*2),r,e)},Rectangle:function(){var e=arguments,t=$.readNamed(e,"rectangle"),r=ee.min(ee.readNamed(e,"radius"),t.getSize(!0).divide(2));return s("rectangle",t.getCenter(!0),t.getSize(!0),r,e)},Ellipse:function(){var e=arguments,t=Fe._readEllipse(e),r=t.radius;return s("ellipse",t.center,r.multiply(2),r,e)},_readEllipse:function(e){var t,r;if(h.hasNamed(e,"radius"))t=z.readNamed(e,"center"),r=ee.readNamed(e,"radius");else{var o=$.readNamed(e,"rectangle");t=o.getCenter(!0),r=o.getSize(!0).divide(2)}return{center:t,radius:r}}}}}),Ve=B.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(e,t){if(!this._initialize(e,t!==a&&z.read(arguments))){var r,o=typeof e,l=o==="string"?g.getElementById(e):o==="object"?e:null;if(l&&l!==B.NO_INSERT){if(l.getContext||l.naturalHeight!=null)r=l;else if(l){var c=ee.read(arguments);c.isZero()||(r=It.getCanvas(c))}}r?this.setImage(r):this.setSource(e)}this._size||(this._size=new ee,this._loaded=!1)},_equals:function(s){return this.getSource()===s.getSource()},copyContent:function(s){var e=s._image,t=s._canvas;if(e)this._setImage(e);else if(t){var r=It.getCanvas(s._size);r.getContext("2d").drawImage(t,0,0),this._setImage(r)}this._crossOrigin=s._crossOrigin},getSize:function(){var s=this._size;return new ce(s?s.width:0,s?s.height:0,this,"setSize")},setSize:function(s,e){var t=ee.read(arguments);if(t.equals(this._size))e&&this.clear();else if(t.width>0&&t.height>0){var r=!e&&this.getElement();this._setImage(It.getCanvas(t)),r&&this.getContext(!0).drawImage(r,0,0,t.width,t.height)}else this._canvas&&It.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(s){this.setSize(s,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(s){this.setSize(this.getWidth(),s)},getLoaded:function(){return this._loaded},isEmpty:function(){var s=this._size;return!s||s.width===0&&s.height===0},getResolution:function(){var s=this._matrix,e=new z(0,0).transform(s),t=new z(1,0).transform(s).subtract(e),r=new z(0,1).transform(s).subtract(e);return new ee(72/t.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(s){var e=this;function t(r){var o=e.getView(),l=r&&r.type||"load";o&&e.responds(l)&&(rt=o._scope,e.emit(l,new Mi(r)))}this._setImage(s),this._loaded?setTimeout(t,0):s&&nt.add(s,{load:function(r){e._setImage(s),t(r)},error:t})},_setImage:function(s){this._canvas&&It.release(this._canvas),s&&s.getContext?(this._image=null,this._canvas=s,this._loaded=!0):(this._image=s,this._canvas=null,this._loaded=!!(s&&s.src&&s.complete)),this._size=new ee(s?s.naturalWidth||s.width:0,s?s.naturalHeight||s.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var s=It.getContext(this._size);try{this._image&&s.drawImage(this._image,0,0),this._canvas=s.canvas}catch(e){It.release(s)}}return this._canvas},setCanvas:"#setImage",getContext:function(s){return this._context||(this._context=this.getCanvas().getContext("2d")),s&&(this._image=null,this._changed(1025)),this._context},setContext:function(s){this._context=s},getSource:function(){var s=this._image;return s&&s.src||this.toDataURL()},setSource:function(s){var e=new i.Image,t=this._crossOrigin;t&&(e.crossOrigin=t),s&&(e.src=s),this.setImage(e)},getCrossOrigin:function(){var s=this._image;return s&&s.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(s){this._crossOrigin=s;var e=this._image;e&&(e.crossOrigin=s)},getSmoothing:function(){return this._smoothing},setSmoothing:function(s){this._smoothing=typeof s=="string"?s:s?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var s=$.read(arguments),e=It.getContext(s.getSize());return e.drawImage(this.getCanvas(),s.x,s.y,s.width,s.height,0,0,s.width,s.height),e.canvas},getSubRaster:function(){var s=$.read(arguments),e=new Ve(B.NO_INSERT);return e._setImage(this.getSubCanvas(s)),e.translate(s.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var s=this._image,e=s&&s.src;if(/^data:/.test(e))return e;var t=this.getCanvas();return t?t.toDataURL.apply(t,arguments):null},drawImage:function(s){var e=z.read(arguments,1);this.getContext(!0).drawImage(s,e.x,e.y)},getAverageColor:function(s){var e,t;if(s?s instanceof Ae?(t=s,e=s.getBounds()):typeof s=="object"&&("width"in s?e=new $(s):"x"in s&&(e=new $(s.x-.5,s.y-.5,1,1))):e=this.getBounds(),!e)return null;var r=32,o=Math.min(e.width,r),l=Math.min(e.height,r),c=Ve._sampleContext;c?c.clearRect(0,0,r+1,r+1):c=Ve._sampleContext=It.getContext(new ee(r)),c.save();var f=new te().scale(o/e.width,l/e.height).translate(-e.x,-e.y);f.applyToContext(c),t&&t.draw(c,new h({clip:!0,matrices:[f]})),this._matrix.applyToContext(c);var d=this.getElement(),_=this._size;d&&c.drawImage(d,-_.width/2,-_.height/2),c.restore();for(var m=c.getImageData(.5,.5,Math.ceil(o),Math.ceil(l)).data,w=[0,0,0],y=0,v=0,C=m.length;v<C;v+=4){var T=m[v+3];y+=T,T/=255,w[0]+=m[v]*T,w[1]+=m[v+1]*T,w[2]+=m[v+2]*T}for(var v=0;v<3;v++)w[v]/=y;return y?Qe.read(w):null},getPixel:function(){var s=z.read(arguments),e=this.getContext().getImageData(s.x,s.y,1,1).data;return new Qe("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var s=arguments,e=z.read(s),t=Qe.read(s),r=t._convert("rgb"),o=t._alpha,l=this.getContext(!0),c=l.createImageData(1,1),f=c.data;f[0]=r[0]*255,f[1]=r[1]*255,f[2]=r[2]*255,f[3]=o!=null?o*255:255,l.putImageData(c,e.x,e.y)},clear:function(){var s=this._size;this.getContext(!0).clearRect(0,0,s.width+1,s.height+1)},createImageData:function(){var s=ee.read(arguments);return this.getContext().createImageData(s.width,s.height)},getImageData:function(){var s=$.read(arguments);return s.isEmpty()&&(s=new $(this._size)),this.getContext().getImageData(s.x,s.y,s.width,s.height)},setImageData:function(s){var e=z.read(arguments,1);this.getContext(!0).putImageData(s,e.x,e.y)},_getBounds:function(s,e){var t=new $(this._size).setCenter(0,0);return s?s._transformBounds(t):t},_hitTestSelf:function(s){if(this._contains(s)){var e=this;return new st("pixel",e,{offset:s.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(s,e,t){var r=this.getElement();if(r&&r.width>0&&r.height>0){s.globalAlpha=X.clamp(this._opacity,0,1),this._setStyles(s,e,t);var o=this._smoothing,l=o==="off";je.setPrefixed(s,l?"imageSmoothingEnabled":"imageSmoothingQuality",l?!1:o),s.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),ot=B.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,t){this._initialize(e,t!==a&&z.read(arguments,1))||this.setDefinition(e instanceof Ke?e:new Ke(e))},_equals:function(s){return this._definition===s._definition},copyContent:function(s){this.setDefinition(s._definition)},getDefinition:function(){return this._definition},setDefinition:function(s){this._definition=s,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(s,e){var t=this._definition._item;return t._getCachedBounds(t._matrix.prepended(s),e)},_hitTestSelf:function(s,e,t){var r=e.extend({all:!1}),o=this._definition._item._hitTest(s,r,t);return o&&(o.item=this),o},_draw:function(s,e){this._definition._item.draw(s,e)}}),Ke=h.extend({_class:"SymbolDefinition",initialize:function(e,t){this._id=ie.get(),this.project=rt.project,e&&this.setItem(e,t)},_serialize:function(s,e){return e.add(this,function(){return h.serialize([this._class,this._item],s,!1,e)})},_changed:function(s){s&8&&B._clearBoundsCache(this),s&1&&this.project._changed(s)},getItem:function(){return this._item},setItem:function(s,e){s._symbol&&(s=s.clone()),this._item&&(this._item._symbol=null),this._item=s,s.remove(),s.setSelected(!1),e||s.setPosition(new z),s._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(s){return new ot(this,s)},clone:function(){return new Ke(this._item.clone(!1))},equals:function(s){return s===this||s&&this._item.equals(s._item)||!1}}),st=h.extend({_class:"HitResult",initialize:function(e,t,r){this.type=e,this.item=t,r&&this.inject(r)},statics:{getOptions:function(s){var e=s&&h.read(s);return new h({type:null,tolerance:rt.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),Ee=h.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,t,r,o,l,c){var f=arguments.length,d,_,m,w;f>0&&(e==null||typeof e=="object"?f===1&&e&&"point"in e?(d=e.point,_=e.handleIn,m=e.handleOut,w=e.selection):(d=e,_=t,m=r,w=o):(d=[e,t],_=r!==a?[r,o]:null,m=l!==a?[l,c]:null)),new bt(d,this,"_point"),new bt(_,this,"_handleIn"),new bt(m,this,"_handleOut"),w&&this.setSelection(w)},_serialize:function(s,e){var t=this._point,r=this._selection,o=r||this.hasHandles()?[t,this._handleIn,this._handleOut]:t;return r&&o.push(r),h.serialize(o,s,!0,e)},_changed:function(s){var e=this._path;if(!!e){var t=e._curves,r=this._index,o;t&&((!s||s===this._point||s===this._handleIn)&&(o=r>0?t[r-1]:e._closed?t[t.length-1]:null)&&o._changed(),(!s||s===this._point||s===this._handleOut)&&(o=t[r])&&o._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(z.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(z.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(z.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var s=this._handleIn,e=this._handleOut;return!s.isZero()&&!e.isZero()&&s.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(s){var e=this._selection,t=this._path;this._selection=s=s||0,t&&s!==e&&(t._updateSelection(this,e,s),t._changed(257))},_changeSelection:function(s,e){var t=this._selection;this.setSelection(e?t|s:t&~s)},isSelected:function(){return!!(this._selection&7)},setSelected:function(s){this._changeSelection(7,s)},getIndex:function(){return this._index!==a?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var s=this._path,e=this._index;return s?(e>0&&!s._closed&&e===s._segments.length-1&&e--,s.getCurves()[e]||null):null},getLocation:function(){var s=this.getCurve();return s?new lt(s,this===s._segment1?0:1):null},getNext:function(){var s=this._path&&this._path._segments;return s&&(s[this._index+1]||this._path._closed&&s[0])||null},smooth:function(s,e,t){var r=s||{},o=r.type,l=r.factor,c=this.getPrevious(),f=this.getNext(),d=(c||this)._point,_=this._point,m=(f||this)._point,w=d.getDistance(_),y=_.getDistance(m);if(!o||o==="catmull-rom"){var v=l===a?.5:l,C=Math.pow(w,v),T=C*C,N=Math.pow(y,v),k=N*N;if(!e&&c){var b=2*k+3*N*C+T,S=3*N*(N+C);this.setHandleIn(S!==0?new z((k*d._x+b*_._x-T*m._x)/S-_._x,(k*d._y+b*_._y-T*m._y)/S-_._y):new z)}if(!t&&f){var b=2*T+3*C*N+k,S=3*C*(C+N);this.setHandleOut(S!==0?new z((T*m._x+b*_._x-k*d._x)/S-_._x,(T*m._y+b*_._y-k*d._y)/S-_._y):new z)}}else if(o==="geometric"){if(c&&f){var x=d.subtract(m),E=l===a?.4:l,I=E*w/(w+y);e||this.setHandleIn(x.multiply(I)),t||this.setHandleOut(x.multiply(I-E))}}else throw new Error("Smoothing method '"+o+"' not supported.")},getPrevious:function(){var s=this._path&&this._path._segments;return s&&(s[this._index-1]||this._path._closed&&s[s.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var s=this._path;return s&&this._index===s._segments.length-1||!1},reverse:function(){var s=this._handleIn,e=this._handleOut,t=s.clone();s.set(e),e.set(t)},reversed:function(){return new Ee(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Ee(this._point,this._handleIn,this._handleOut)},equals:function(s){return s===this||s&&this._class===s._class&&this._point.equals(s._point)&&this._handleIn.equals(s._handleIn)&&this._handleOut.equals(s._handleOut)||!1},toString:function(){var s=["point: "+this._point];return this._handleIn.isZero()||s.push("handleIn: "+this._handleIn),this._handleOut.isZero()||s.push("handleOut: "+this._handleOut),"{ "+s.join(", ")+" }"},transform:function(s){this._transformCoordinates(s,new Array(6),!0),this._changed()},interpolate:function(s,e,t){var r=1-t,o=t,l=s._point,c=e._point,f=s._handleIn,d=e._handleIn,_=e._handleOut,m=s._handleOut;this._point._set(r*l._x+o*c._x,r*l._y+o*c._y,!0),this._handleIn._set(r*f._x+o*d._x,r*f._y+o*d._y,!0),this._handleOut._set(r*m._x+o*_._x,r*m._y+o*_._y,!0),this._changed()},_transformCoordinates:function(s,e,t){var r=this._point,o=!t||!this._handleIn.isZero()?this._handleIn:null,l=!t||!this._handleOut.isZero()?this._handleOut:null,c=r._x,f=r._y,d=2;return e[0]=c,e[1]=f,o&&(e[d++]=o._x+c,e[d++]=o._y+f),l&&(e[d++]=l._x+c,e[d++]=l._y+f),s&&(s._transformCoordinates(e,e,d/2),c=e[0],f=e[1],t?(r._x=c,r._y=f,d=2,o&&(o._x=e[d++]-c,o._y=e[d++]-f),l&&(l._x=e[d++]-c,l._y=e[d++]-f)):(o||(e[d++]=c,e[d++]=f),l||(e[d++]=c,e[d++]=f))),e}}),bt=z.extend({initialize:function(e,t,r){var o,l,c;if(!e)o=l=0;else if((o=e[0])!==a)l=e[1];else{var f=e;(o=f.x)===a&&(f=z.read(arguments),o=f.x),l=f.y,c=f.selected}this._x=o,this._y=l,this._owner=t,t[r]=this,c&&this.setSelected(!0)},_set:function(s,e){return this._x=s,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(s){this._x=s,this._owner._changed(this)},getY:function(){return this._y},setY:function(s){this._y=s,this._owner._changed(this)},isZero:function(){var s=X.isZero;return s(this._x)&&s(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(s){this._owner._changeSelection(this._getSelection(),s)},_getSelection:function(){var s=this._owner;return this===s._point?1:this===s._handleIn?2:this===s._handleOut?4:0}}),le=h.extend({_class:"Curve",beans:!0,initialize:function(e,t,r,o,l,c,f,d){var _=arguments.length,m,w,y,v,C,T;_===3?(this._path=e,m=t,w=r):_?_===1?"segment1"in e?(m=new Ee(e.segment1),w=new Ee(e.segment2)):"point1"in e?(y=e.point1,C=e.handle1,T=e.handle2,v=e.point2):Array.isArray(e)&&(y=[e[0],e[1]],v=[e[6],e[7]],C=[e[2]-e[0],e[3]-e[1]],T=[e[4]-e[6],e[5]-e[7]]):_===2?(m=new Ee(e),w=new Ee(t)):_===4?(y=e,C=t,T=r,v=o):_===8&&(y=[e,t],v=[f,d],C=[r-e,o-t],T=[l-f,c-d]):(m=new Ee,w=new Ee),this._segment1=m||new Ee(y,null,C),this._segment2=w||new Ee(v,T,null)},_serialize:function(s,e){return h.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],s,!0,e)},_changed:function(){this._length=this._bounds=a},clone:function(){return new le(this._segment1,this._segment2)},toString:function(){var s=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||s.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||s.push("handle2: "+this._segment2._handleIn),s.push("point2: "+this._segment2._point),"{ "+s.join(", ")+" }"},classify:function(){return le.classify(this.getValues())},remove:function(){var s=!1;if(this._path){var e=this._segment2,t=e._handleOut;s=e.remove(),s&&this._segment1._handleOut.set(t)}return s},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(z.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(z.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(z.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(z.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var s=this._path&&this._path._curves;return s&&(s[this._segment1._index+1]||this._path._closed&&s[0])||null},getPrevious:function(){var s=this._path&&this._path._curves;return s&&(s[this._segment1._index-1]||this._path._closed&&s[s.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var s=this._path;return s&&this._segment1._index===s._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(s){this.getPoint1().setSelected(s),this.getHandle1().setSelected(s),this.getHandle2().setSelected(s),this.getPoint2().setSelected(s)},getValues:function(s){return le.getValues(this._segment1,this._segment2,s)},getPoints:function(){for(var s=this.getValues(),e=[],t=0;t<8;t+=2)e.push(new z(s[t],s[t+1]));return e}},{getLength:function(){return this._length==null&&(this._length=le.getLength(this.getValues(),0,1)),this._length},getArea:function(){return le.getArea(this.getValues())},getLine:function(){return new pe(this._segment1._point,this._segment2._point)},getPart:function(s,e){return new le(le.getPart(this.getValues(),s,e))},getPartLength:function(s,e){return le.getLength(this.getValues(),s,e)},divideAt:function(s){return this.divideAtTime(s&&s.curve===this?s.time:this.getTimeAt(s))},divideAtTime:function(s,e){var t=1e-8,r=1-t,o=null;if(s>=t&&s<=r){var l=le.subdivide(this.getValues(),s),c=l[0],f=l[1],d=e||this.hasHandles(),_=this._segment1,m=this._segment2,w=this._path;d&&(_._handleOut._set(c[2]-c[0],c[3]-c[1]),m._handleIn._set(f[4]-f[6],f[5]-f[7]));var y=c[6],v=c[7],C=new Ee(new z(y,v),d&&new z(c[4]-y,c[5]-v),d&&new z(f[2]-y,f[3]-v));w?(w.insert(_._index+1,C),o=this.getNext()):(this._segment2=C,this._changed(),o=new le(C,m))}return o},splitAt:function(s){var e=this._path;return e?e.splitAt(s):null},splitAtTime:function(s){return this.splitAt(this.getLocationAtTime(s))},divide:function(s,e){return this.divideAtTime(s===a?.5:e?s:this.getTimeAt(s))},split:function(s,e){return this.splitAtTime(s===a?.5:e?s:this.getTimeAt(s))},reversed:function(){return new le(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(s,e,t,r){var o=s._point,l=s._handleOut,c=e._handleIn,f=e._point,d=o.x,_=o.y,m=f.x,w=f.y,y=r?[d,_,d,_,m,w,m,w]:[d,_,d+l._x,_+l._y,m+c._x,w+c._y,m,w];return t&&t._transformCoordinates(y,y,4),y},subdivide:function(s,e){var t=s[0],r=s[1],o=s[2],l=s[3],c=s[4],f=s[5],d=s[6],_=s[7];e===a&&(e=.5);var m=1-e,w=m*t+e*o,y=m*r+e*l,v=m*o+e*c,C=m*l+e*f,T=m*c+e*d,N=m*f+e*_,k=m*w+e*v,b=m*y+e*C,S=m*v+e*T,x=m*C+e*N,E=m*k+e*S,I=m*b+e*x;return[[t,r,w,y,k,b,E,I],[E,I,S,x,T,N,d,_]]},getMonoCurves:function(s,e){var t=[],r=e?0:1,o=s[r+0],l=s[r+2],c=s[r+4],f=s[r+6];if(o>=l==l>=c&&l>=c==c>=f||le.isStraight(s))t.push(s);else{var d=3*(l-c)-o+f,_=2*(o+c)-4*l,m=l-o,w=1e-8,y=1-w,v=[],C=X.solveQuadratic(d,_,m,v,w,y);if(!C)t.push(s);else{v.sort();var T=v[0],N=le.subdivide(s,T);t.push(N[0]),C>1&&(T=(v[1]-T)/(1-T),N=le.subdivide(N[1],T),t.push(N[0])),t.push(N[1])}}return t},solveCubic:function(s,e,t,r,o,l){var c=s[e],f=s[e+2],d=s[e+4],_=s[e+6],m=0;if(!(c<t&&_<t&&f<t&&d<t||c>t&&_>t&&f>t&&d>t)){var w=3*(f-c),y=3*(d-f)-w,v=_-c-w-y;m=X.solveCubic(v,y,w,c-t,r,o,l)}return m},getTimeOf:function(s,e){var t=new z(s[0],s[1]),r=new z(s[6],s[7]),o=1e-12,l=1e-7,c=e.isClose(t,o)?0:e.isClose(r,o)?1:null;if(c===null)for(var f=[e.x,e.y],d=[],_=0;_<2;_++)for(var m=le.solveCubic(s,_,f[_],d,0,1),w=0;w<m;w++){var y=d[w];if(e.isClose(le.getPoint(s,y),l))return y}return e.isClose(t,l)?0:e.isClose(r,l)?1:null},getNearestTime:function(s,e){if(le.isStraight(s)){var t=s[0],r=s[1],o=s[6],l=s[7],c=o-t,f=l-r,d=c*c+f*f;if(d===0)return 0;var _=((e.x-t)*c+(e.y-r)*f)/d;return _<1e-12?0:_>.999999999999?1:le.getTimeOf(s,new z(t+_*c,r+_*f))}var m=100,w=1/0,y=0;function v(N){if(N>=0&&N<=1){var k=e.getDistance(le.getPoint(s,N),!0);if(k<w)return w=k,y=N,!0}}for(var C=0;C<=m;C++)v(C/m);for(var T=1/(m*2);T>1e-8;)!v(y-T)&&!v(y+T)&&(T/=2);return y},getPart:function(s,e,t){var r=e>t;if(r){var o=e;e=t,t=o}return e>0&&(s=le.subdivide(s,e)[1]),t<1&&(s=le.subdivide(s,(t-e)/(1-e))[0]),r?[s[6],s[7],s[4],s[5],s[2],s[3],s[0],s[1]]:s},isFlatEnough:function(s,e){var t=s[0],r=s[1],o=s[2],l=s[3],c=s[4],f=s[5],d=s[6],_=s[7],m=3*o-2*t-d,w=3*l-2*r-_,y=3*c-2*d-t,v=3*f-2*_-r;return Math.max(m*m,y*y)+Math.max(w*w,v*v)<=16*e*e},getArea:function(s){var e=s[0],t=s[1],r=s[2],o=s[3],l=s[4],c=s[5],f=s[6],d=s[7];return 3*((d-t)*(r+l)-(f-e)*(o+c)+o*(e-l)-r*(t-c)+d*(l+e/3)-f*(c+t/3))/20},getBounds:function(s){for(var e=s.slice(0,2),t=e.slice(),r=[0,0],o=0;o<2;o++)le._addBounds(s[o],s[o+2],s[o+4],s[o+6],o,0,e,t,r);return new $(e[0],e[1],t[0]-e[0],t[1]-e[1])},_addBounds:function(s,e,t,r,o,l,c,f,d){function _(E,I){var M=E-I,L=E+I;M<c[o]&&(c[o]=M),L>f[o]&&(f[o]=L)}l/=2;var m=c[o]+l,w=f[o]-l;if(s<m||e<m||t<m||r<m||s>w||e>w||t>w||r>w)if(e<s!=e<r&&t<s!=t<r)_(s,0),_(r,0);else{var y=3*(e-t)-s+r,v=2*(s+t)-4*e,C=e-s,T=X.solveQuadratic(y,v,C,d),N=1e-8,k=1-N;_(r,0);for(var b=0;b<T;b++){var S=d[b],x=1-S;N<=S&&S<=k&&_(x*x*x*s+3*x*x*S*e+3*x*S*S*t+S*S*S*r,l)}}}}},h.each(["getBounds","getStrokeBounds","getHandleBounds"],function(s){this[s]=function(){this._bounds||(this._bounds={});var e=this._bounds[s];return e||(e=this._bounds[s]=be[s]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),h.each({isStraight:function(s,e,t,r){if(e.isZero()&&t.isZero())return!0;var o=r.subtract(s);if(o.isZero())return!1;if(o.isCollinear(e)&&o.isCollinear(t)){var l=new pe(s,r),c=1e-7;if(l.getDistance(s.add(e))<c&&l.getDistance(r.add(t))<c){var f=o.dot(o),d=o.dot(e)/f,_=o.dot(t)/f;return d>=0&&d<=1&&_<=0&&_>=-1}}return!1},isLinear:function(s,e,t,r){var o=r.subtract(s).divide(3);return e.equals(o)&&t.negate().equals(o)}},function(s,e){this[e]=function(t){var r=this._segment1,o=this._segment2;return s(r._point,r._handleOut,o._handleIn,o._point,t)},this.statics[e]=function(t,r){var o=t[0],l=t[1],c=t[6],f=t[7];return s(new z(o,l),new z(t[2]-o,t[3]-l),new z(t[4]-c,t[5]-f),new z(c,f),r)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(s){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(s||0)},isCollinear:function(s){return s&&this.isStraight()&&s.isStraight()&&this.getLine().isCollinear(s.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(s,e){return this.getLocationAtTime(e?s:this.getTimeAt(s))},getLocationAtTime:function(s){return s!=null&&s>=0&&s<=1?new lt(this,s):null},getTimeAt:function(s,e){return le.getTimeAt(this.getValues(),s,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var s=z.read(arguments);return s.isZero()?[]:le.getTimesWithTangent(this.getValues(),s)},getOffsetAtTime:function(s){return this.getPartLength(0,s)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(z.read(arguments)))},getOffsetOf:function(){var s=this.getLocationOf.apply(this,arguments);return s?s.getOffset():null},getTimeOf:function(){return le.getTimeOf(this.getValues(),z.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var s=z.read(arguments),e=this.getValues(),t=le.getNearestTime(e,s),r=le.getPoint(e,t);return new lt(this,t,r,null,s.getDistance(r))},getNearestPoint:function(){var s=this.getNearestLocation.apply(this,arguments);return s&&s.getPoint()}},new function(){var s=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return h.each(s,function(e){this[e+"At"]=function(t,r){var o=this.getValues();return le[e](o,r?t:le.getTimeAt(o,t))},this[e+"AtTime"]=function(t){return le[e](this.getValues(),t)}},{statics:{_evaluateMethods:s}})},new function(){function s(r){var o=r[0],l=r[1],c=r[2],f=r[3],d=r[4],_=r[5],m=r[6],w=r[7],y=9*(c-d)+3*(m-o),v=6*(o+d)-12*c,C=3*(c-o),T=9*(f-_)+3*(w-l),N=6*(l+_)-12*f,k=3*(f-l);return function(b){var S=(y*b+v)*b+C,x=(T*b+N)*b+k;return Math.sqrt(S*S+x*x)}}function e(r,o){return Math.max(2,Math.min(16,Math.ceil(Math.abs(o-r)*32)))}function t(r,o,l,c){if(o==null||o<0||o>1)return null;var f=r[0],d=r[1],_=r[2],m=r[3],w=r[4],y=r[5],v=r[6],C=r[7],T=X.isZero;T(_-f)&&T(m-d)&&(_=f,m=d),T(w-v)&&T(y-C)&&(w=v,y=C);var N=3*(_-f),k=3*(w-_)-N,b=v-f-N-k,S=3*(m-d),x=3*(y-m)-S,E=C-d-S-x,I,M;if(l===0)I=o===0?f:o===1?v:((b*o+k)*o+N)*o+f,M=o===0?d:o===1?C:((E*o+x)*o+S)*o+d;else{var L=1e-8,R=1-L;if(o<L?(I=N,M=S):o>R?(I=3*(v-w),M=3*(C-y)):(I=(3*b*o+2*k)*o+N,M=(3*E*o+2*x)*o+S),c){I===0&&M===0&&(o<L||o>R)&&(I=w-_,M=y-m);var F=Math.sqrt(I*I+M*M);F&&(I/=F,M/=F)}if(l===3){var w=6*b*o+2*k,y=6*E*o+2*x,H=Math.pow(I*I+M*M,3/2);I=H!==0?(I*y-M*w)/H:0,M=0}}return l===2?new z(M,-I):new z(I,M)}return{statics:{classify:function(r){var o=r[0],l=r[1],c=r[2],f=r[3],d=r[4],_=r[5],m=r[6],w=r[7],y=o*(w-_)+l*(d-m)+m*_-w*d,v=c*(l-w)+f*(m-o)+o*w-l*m,C=d*(f-l)+_*(o-c)+c*l-f*o,T=3*C,N=T-v,k=N-v+y,b=Math.sqrt(k*k+N*N+T*T),S=b!==0?1/b:0,x=X.isZero,E="serpentine";k*=S,N*=S,T*=S;function I(F,H,G){var V=H!==a,q=V&&H>0&&H<1,Q=V&&G>0&&G<1;return V&&(!(q||Q)||F==="loop"&&!(q&&Q))&&(F="arch",q=Q=!1),{type:F,roots:q||Q?q&&Q?H<G?[H,G]:[G,H]:[q?H:G]:null}}if(x(k))return x(N)?I(x(T)?"line":"quadratic"):I(E,T/(3*N));var M=3*N*N-4*k*T;if(x(M))return I("cusp",N/(2*k));var L=M>0?Math.sqrt(M/3):Math.sqrt(-M),R=2*k;return I(M>0?E:"loop",(N+L)/R,(N-L)/R)},getLength:function(r,o,l,c){if(o===a&&(o=0),l===a&&(l=1),le.isStraight(r)){var f=r;l<1&&(f=le.subdivide(f,l)[0],o/=l),o>0&&(f=le.subdivide(f,o)[1]);var d=f[6]-f[0],_=f[7]-f[1];return Math.sqrt(d*d+_*_)}return X.integrate(c||s(r),o,l,e(o,l))},getTimeAt:function(r,o,l){if(l===a&&(l=o<0?1:0),o===0)return l;var c=Math.abs,f=1e-12,d=o>0,_=d?l:0,m=d?1:l,w=s(r),y=le.getLength(r,_,m,w),v=c(o)-y;if(c(v)<f)return d?m:_;if(v>f)return null;var C=o/y,T=0;function N(k){return T+=X.integrate(w,l,k,e(l,k)),l=k,T-o}return X.findRoot(N,w,l+C,_,m,32,1e-12)},getPoint:function(r,o){return t(r,o,0,!1)},getTangent:function(r,o){return t(r,o,1,!0)},getWeightedTangent:function(r,o){return t(r,o,1,!1)},getNormal:function(r,o){return t(r,o,2,!0)},getWeightedNormal:function(r,o){return t(r,o,2,!1)},getCurvature:function(r,o){return t(r,o,3,!1).x},getPeaks:function(r){var o=r[0],l=r[1],c=r[2],f=r[3],d=r[4],_=r[5],m=r[6],w=r[7],y=-o+3*c-3*d+m,v=3*o-6*c+3*d,C=-3*o+3*c,T=-l+3*f-3*_+w,N=3*l-6*f+3*_,k=-3*l+3*f,b=1e-8,S=1-b,x=[];return X.solveCubic(9*(y*y+T*T),9*(y*v+N*T),2*(v*v+N*N)+3*(C*y+k*T),C*v+N*k,x,b,S),x.sort()}}}},new function(){function s(v,C,T,N,k,b,S){var x=!S&&T.getPrevious()===k,E=!S&&T!==k&&T.getNext()===k,I=1e-8,M=1-I;if(N!==null&&N>=(x?I:0)&&N<=(E?M:1)&&b!==null&&b>=(E?I:0)&&b<=(x?M:1)){var L=new lt(T,N,null,S),R=new lt(k,b,null,S);L._intersection=R,R._intersection=L,(!C||C(L))&&lt.insert(v,L,!0)}}function e(v,C,T,N,k,b,S,x,E,I,M,L,R){if(++E>=4096||++x>=40)return E;var F=1e-9,H=C[0],G=C[1],V=C[6],q=C[7],Q=pe.getSignedDistance,j=Q(H,G,V,q,C[2],C[3]),Y=Q(H,G,V,q,C[4],C[5]),re=j*Y>0?3/4:4/9,oe=re*Math.min(0,j,Y),de=re*Math.max(0,j,Y),ye=Q(H,G,V,q,v[0],v[1]),xe=Q(H,G,V,q,v[2],v[3]),he=Q(H,G,V,q,v[4],v[5]),fe=Q(H,G,V,q,v[6],v[7]),Se=t(ye,xe,he,fe),Ce=Se[0],Te=Se[1],Oe,me;if(j===0&&Y===0&&ye===0&&xe===0&&he===0&&fe===0||(Oe=r(Ce,Te,oe,de))==null||(me=r(Ce.reverse(),Te.reverse(),oe,de))==null)return E;var Me=I+(M-I)*Oe,ze=I+(M-I)*me;if(Math.max(R-L,ze-Me)<F){var He=(Me+ze)/2,ht=(L+R)/2;s(k,b,S?N:T,S?ht:He,S?T:N,S?He:ht)}else{v=le.getPart(v,Oe,me);var ft=R-L;if(me-Oe>.8)if(ze-Me>ft){var ct=le.subdivide(v,.5),He=(Me+ze)/2;E=e(C,ct[0],N,T,k,b,!S,x,E,L,R,Me,He),E=e(C,ct[1],N,T,k,b,!S,x,E,L,R,He,ze)}else{var ct=le.subdivide(C,.5),ht=(L+R)/2;E=e(ct[0],v,N,T,k,b,!S,x,E,L,ht,Me,ze),E=e(ct[1],v,N,T,k,b,!S,x,E,ht,R,Me,ze)}else ft===0||ft>=F?E=e(C,v,N,T,k,b,!S,x,E,L,R,Me,ze):E=e(v,C,T,N,k,b,S,x,E,Me,ze,L,R)}return E}function t(v,C,T,N){var k=[0,v],b=[1/3,C],S=[2/3,T],x=[1,N],E=C-(2*v+N)/3,I=T-(v+2*N)/3,M;if(E*I<0)M=[[k,b,x],[k,S,x]];else{var L=E/I;M=[L>=2?[k,b,x]:L<=.5?[k,S,x]:[k,b,S,x],[k,x]]}return(E||I)<0?M.reverse():M}function r(v,C,T,N){return v[0][1]<T?o(v,!0,T):C[0][1]>N?o(C,!1,N):v[0][0]}function o(v,C,T){for(var N=v[0][0],k=v[0][1],b=1,S=v.length;b<S;b++){var x=v[b][0],E=v[b][1];if(C?E>=T:E<=T)return E===T?x:N+(T-k)*(x-N)/(E-k);N=x,k=E}return null}function l(v,C,T,N,k){var b=X.isZero;if(b(N)&&b(k)){var S=le.getTimeOf(v,new z(C,T));return S===null?[]:[S]}for(var x=Math.atan2(-k,N),E=Math.sin(x),I=Math.cos(x),M=[],L=[],R=0;R<8;R+=2){var F=v[R]-C,H=v[R+1]-T;M.push(F*I-H*E,F*E+H*I)}return le.solveCubic(M,1,0,L,0,1),L}function c(v,C,T,N,k,b,S){for(var x=C[0],E=C[1],I=C[6],M=C[7],L=l(v,x,E,I-x,M-E),R=0,F=L.length;R<F;R++){var H=L[R],G=le.getPoint(v,H),V=le.getTimeOf(C,G);V!==null&&s(k,b,S?N:T,S?V:H,S?T:N,S?H:V)}}function f(v,C,T,N,k,b){var S=pe.intersect(v[0],v[1],v[6],v[7],C[0],C[1],C[6],C[7]);S&&s(k,b,T,le.getTimeOf(v,S),N,le.getTimeOf(C,S))}function d(v,C,T,N,k,b){var S=1e-12,x=Math.min,E=Math.max;if(E(v[0],v[2],v[4],v[6])+S>x(C[0],C[2],C[4],C[6])&&x(v[0],v[2],v[4],v[6])-S<E(C[0],C[2],C[4],C[6])&&E(v[1],v[3],v[5],v[7])+S>x(C[1],C[3],C[5],C[7])&&x(v[1],v[3],v[5],v[7])-S<E(C[1],C[3],C[5],C[7])){var I=w(v,C);if(I)for(var M=0;M<2;M++){var L=I[M];s(k,b,T,L[0],N,L[1],!0)}else{var R=le.isStraight(v),F=le.isStraight(C),H=R&&F,G=R&&!F,V=k.length;if((H?f:R||F?c:e)(G?C:v,G?v:C,G?N:T,G?T:N,k,b,G,0,0,0,1,0,1),!H||k.length===V)for(var M=0;M<4;M++){var q=M>>1,Q=M&1,j=q*6,Y=Q*6,re=new z(v[j],v[j+1]),oe=new z(C[Y],C[Y+1]);re.isClose(oe,S)&&s(k,b,T,q,N,Q)}}}return k}function _(v,C,T,N){var k=le.classify(v);if(k.type==="loop"){var b=k.roots;s(T,N,C,b[0],C,b[1])}return T}function m(v,C,T,N,k,b){var S=1e-7,x=!C;x&&(C=v);for(var E=v.length,I=C.length,M=new Array(E),L=x?M:new Array(I),R=[],F=0;F<E;F++)M[F]=v[F].getValues(N);if(!x)for(var F=0;F<I;F++)L[F]=C[F].getValues(k);for(var H=W.findCurveBoundsCollisions(M,L,S),G=0;G<E;G++){var V=v[G],q=M[G];x&&_(q,V,R,T);var Q=H[G];if(Q)for(var j=0;j<Q.length;j++){if(b&&R.length)return R;var Y=Q[j];if(!x||Y>G){var re=C[Y],oe=L[Y];d(q,oe,V,re,R,T)}}}return R}function w(v,C){function T(fe){var Se=fe[6]-fe[0],Ce=fe[7]-fe[1];return Se*Se+Ce*Ce}var N=Math.abs,k=pe.getDistance,b=1e-8,S=1e-7,x=le.isStraight(v),E=le.isStraight(C),I=x&&E,M=T(v)<T(C),L=M?C:v,R=M?v:C,F=L[0],H=L[1],G=L[6]-F,V=L[7]-H;if(k(F,H,G,V,R[0],R[1],!0)<S&&k(F,H,G,V,R[6],R[7],!0)<S)!I&&k(F,H,G,V,L[2],L[3],!0)<S&&k(F,H,G,V,L[4],L[5],!0)<S&&k(F,H,G,V,R[2],R[3],!0)<S&&k(F,H,G,V,R[4],R[5],!0)<S&&(x=E=I=!0);else if(I)return null;if(x^E)return null;for(var q=[v,C],Q=[],j=0;j<4&&Q.length<2;j++){var Y=j&1,re=Y^1,oe=j>>1,de=le.getTimeOf(q[Y],new z(q[re][oe?6:0],q[re][oe?7:1]));if(de!=null){var ye=Y?[oe,de]:[de,oe];(!Q.length||N(ye[0]-Q[0][0])>b&&N(ye[1]-Q[0][1])>b)&&Q.push(ye)}if(j>2&&!Q.length)break}if(Q.length!==2)Q=null;else if(!I){var xe=le.getPart(v,Q[0][0],Q[1][0]),he=le.getPart(C,Q[0][1],Q[1][1]);(N(he[2]-xe[2])>S||N(he[3]-xe[3])>S||N(he[4]-xe[4])>S||N(he[5]-xe[5])>S)&&(Q=null)}return Q}function y(v,C){var T=v[0],N=v[1],k=v[2],b=v[3],S=v[4],x=v[5],E=v[6],I=v[7],M=C.normalize(),L=M.x,R=M.y,F=3*E-9*S+9*k-3*T,H=3*I-9*x+9*b-3*N,G=6*S-12*k+6*T,V=6*x-12*b+6*N,q=3*k-3*T,Q=3*b-3*N,j=2*F*R-2*H*L,Y=[];if(Math.abs(j)<X.CURVETIME_EPSILON){var re=F*Q-H*q,j=F*V-H*G;if(j!=0){var oe=-re/j;oe>=0&&oe<=1&&Y.push(oe)}}else{var de=(G*G-4*F*q)*R*R+(-2*G*V+4*H*q+4*F*Q)*L*R+(V*V-4*H*Q)*L*L,ye=G*R-V*L;if(de>=0&&j!=0){var xe=Math.sqrt(de),he=-(ye+xe)/j,fe=(-ye+xe)/j;he>=0&&he<=1&&Y.push(he),fe>=0&&fe<=1&&Y.push(fe)}}return Y}return{getIntersections:function(v){var C=this.getValues(),T=v&&v!==this&&v.getValues();return T?d(C,T,this,v,[]):_(C,this,[])},statics:{getOverlaps:w,getIntersections:m,getCurveLineIntersections:l,getTimesWithTangent:y}}}),lt=h.extend({_class:"CurveLocation",initialize:function(e,t,r,o,l){if(t>=.99999999){var c=e.getNext();c&&(t=0,e=c)}this._setCurve(e),this._time=t,this._point=r||e.getPointAtTime(t),this._overlap=o,this._distance=l,this._intersection=this._next=this._previous=null},_setPath:function(s){this._path=s,this._version=s?s._version:0},_setCurve:function(s){this._setPath(s._path),this._curve=s,this._segment=null,this._segment1=s._segment1,this._segment2=s._segment2},_setSegment:function(s){var e=s.getCurve();e?this._setCurve(e):(this._setPath(s._path),this._segment1=s,this._segment2=null),this._segment=s,this._time=s===this._segment1?0:1,this._point=s._point.clone()},getSegment:function(){var s=this._segment;if(!s){var e=this.getCurve(),t=this.getTime();t===0?s=e._segment1:t===1?s=e._segment2:t!=null&&(s=e.getPartLength(0,t)<e.getPartLength(t,1)?e._segment1:e._segment2),this._segment=s}return s},getCurve:function(){var s=this._path,e=this;s&&s._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function t(r){var o=r&&r.getCurve();if(o&&(e._time=o.getTimeOf(e._point))!=null)return e._setCurve(o),o}return this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var s=this.getCurve();return s&&s._path},getIndex:function(){var s=this.getCurve();return s&&s.getIndex()},getTime:function(){var s=this.getCurve(),e=this._time;return s&&e==null?this._time=s.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var s=this._offset;if(s==null){s=0;var e=this.getPath(),t=this.getIndex();if(e&&t!=null)for(var r=e.getCurves(),o=0;o<t;o++)s+=r[o].getLength();this._offset=s+=this.getCurveOffset()}return s},getCurveOffset:function(){var s=this._curveOffset;if(s==null){var e=this.getCurve(),t=this.getTime();this._curveOffset=s=t!=null&&e&&e.getPartLength(0,t)}return s},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var s=this.getCurve(),e=s&&s.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var s=this.getCurve(),e=s._path,t=s&&s.splitAtTime(this.getTime());return t&&this._setSegment(e.getLastSegment()),t},equals:function(s,e){var t=this===s;if(!t&&s instanceof lt){var r=this.getCurve(),o=s.getCurve(),l=r._path,c=o._path;if(l===c){var f=Math.abs,d=1e-7,_=f(this.getOffset()-s.getOffset()),m=!e&&this._intersection,w=!e&&s._intersection;t=(_<d||l&&f(l.getLength()-_)<d)&&(!m&&!w||m&&w&&m.equals(w,!0))}}return t},toString:function(){var s=[],e=this.getPoint(),t=K.instance;e&&s.push("point: "+e);var r=this.getIndex();r!=null&&s.push("index: "+r);var o=this.getTime();return o!=null&&s.push("time: "+t.number(o)),this._distance!=null&&s.push("distance: "+t.number(this._distance)),"{ "+s.join(", ")+" }"},isTouching:function(){var s=this._intersection;if(s&&this.getTangent().isCollinear(s.getTangent())){var e=this.getCurve(),t=s.getCurve();return!(e.isStraight()&&t.isStraight()&&e.getLine().intersect(t.getLine()))}return!1},isCrossing:function(){var s=this._intersection;if(!s)return!1;var e=this.getTime(),t=s.getTime(),r=1e-8,o=1-r,l=e>=r&&e<=o,c=t>=r&&t<=o;if(l&&c)return!this.isTouching();var f=this.getCurve(),d=f&&e<r?f.getPrevious():f,_=s.getCurve(),m=_&&t<r?_.getPrevious():_;if(e>o&&(f=f.getNext()),t>o&&(_=_.getNext()),!d||!f||!m||!_)return!1;var w=[];function y(L,R){var F=L.getValues(),H=le.classify(F).roots||le.getPeaks(F),G=H.length,V=le.getLength(F,R&&G?H[G-1]:0,!R&&G?H[0]:1);w.push(G?V:V/32)}function v(L,R,F){return R<F?L>R&&L<F:L>R||L<F}l||(y(d,!0),y(f,!1)),c||(y(m,!0),y(_,!1));var C=this.getPoint(),T=Math.min.apply(Math,w),N=l?f.getTangentAtTime(e):f.getPointAt(T).subtract(C),k=l?N.negate():d.getPointAt(-T).subtract(C),b=c?_.getTangentAtTime(t):_.getPointAt(T).subtract(C),S=c?b.negate():m.getPointAt(-T).subtract(C),x=k.getAngle(),E=N.getAngle(),I=S.getAngle(),M=b.getAngle();return!!(l?v(x,I,M)^v(E,I,M)&&v(x,M,I)^v(E,M,I):v(I,x,E)^v(M,x,E)&&v(I,E,x)^v(M,E,x))},hasOverlap:function(){return!!this._overlap}},h.each(le._evaluateMethods,function(s){var e=s+"At";this[s]=function(){var t=this.getCurve(),r=this.getTime();return r!=null&&t&&t[e](r,!0)}},{preserve:!0}),new function(){function s(e,t,r){var o=e.length,l=0,c=o-1;function f(C,T){for(var N=C+T;N>=-1&&N<=o;N+=T){var k=e[(N%o+o)%o];if(!t.getPoint().isClose(k.getPoint(),1e-7))break;if(t.equals(k))return k}return null}for(;l<=c;){var d=l+c>>>1,_=e[d],m;if(r&&(m=t.equals(_)?_:f(d,-1)||f(d,1)))return t._overlap&&(m._overlap=m._intersection._overlap=!0),m;var w=t.getPath(),y=_.getPath(),v=w!==y?w._id-y._id:t.getIndex()+t.getTime()-(_.getIndex()+_.getTime());v<0?c=d-1:l=d+1}return e.splice(l,0,t),t}return{statics:{insert:s,expand:function(e){for(var t=e.slice(),r=e.length-1;r>=0;r--)s(t,e[r]._intersection,!1);return t}}}}),Ae=B.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(s){var e,t,r;if(h.isPlainObject(s)?(t=s.segments,e=s.pathData):Array.isArray(s)?t=s:typeof s=="string"&&(e=s),t){var o=t[0];r=o&&Array.isArray(o[0])}else e&&(r=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));var l=r?Be:be;return new l(s)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(s){this.isClockwise()!=(s=!!s)&&this.reverse()},setPathData:function(s){var e=s&&s.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),t,r=!1,o,l,c=new z,f=new z;function d(S,x){var E=+t[S];return r&&(E+=c[x]),E}function _(S){return new z(d(S,"x"),d(S+1,"y"))}this.clear();for(var m=0,w=e&&e.length;m<w;m++){var y=e[m],v=y[0],C=v.toLowerCase();t=y.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var T=t&&t.length;switch(r=v===C,o==="z"&&!/[mz]/.test(C)&&this.moveTo(c),C){case"m":case"l":for(var N=C==="m",k=0;k<T;k+=2)this[N?"moveTo":"lineTo"](c=_(k)),N&&(f=c,N=!1);l=c;break;case"h":case"v":var b=C==="h"?"x":"y";c=c.clone();for(var k=0;k<T;k++)c[b]=d(k,b),this.lineTo(c);l=c;break;case"c":for(var k=0;k<T;k+=6)this.cubicCurveTo(_(k),l=_(k+2),c=_(k+4));break;case"s":for(var k=0;k<T;k+=4)this.cubicCurveTo(/[cs]/.test(o)?c.multiply(2).subtract(l):c,l=_(k),c=_(k+2)),o=C;break;case"q":for(var k=0;k<T;k+=4)this.quadraticCurveTo(l=_(k),c=_(k+2));break;case"t":for(var k=0;k<T;k+=2)this.quadraticCurveTo(l=/[qt]/.test(o)?c.multiply(2).subtract(l):c,c=_(k)),o=C;break;case"a":for(var k=0;k<T;k+=7)this.arcTo(c=_(k+5),new ee(+t[k],+t[k+1]),+t[k+2],+t[k+4],+t[k+3]);break;case"z":this.closePath(1e-12),c=f;break}o=C}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(s){var e=s.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(s):{};return e.onPath||!!(this.getFillRule()==="evenodd"?e.windingL&1||e.windingR&1:e.winding)},getIntersections:function(s,e,t,r){var o=this===s||!s,l=this._matrix._orNullIfIdentity(),c=o?l:(t||s._matrix)._orNullIfIdentity();return o||this.getBounds(l).intersects(s.getBounds(c),1e-12)?le.getIntersections(this.getCurves(),!o&&s.getCurves(),e,l,c,r):[]},getCrossings:function(s){return this.getIntersections(s,function(e){return e.isCrossing()})},getNearestLocation:function(){for(var s=z.read(arguments),e=this.getCurves(),t=1/0,r=null,o=0,l=e.length;o<l;o++){var c=e[o].getNearestLocation(s);c._distance<t&&(t=c._distance,r=c)}return r},getNearestPoint:function(){var s=this.getNearestLocation.apply(this,arguments);return s&&s.getPoint()},interpolate:function(s,e,t){var r=!this._children,o=r?"_segments":"_children",l=s[o],c=e[o],f=this[o];if(!l||!c||l.length!==c.length)throw new Error("Invalid operands in interpolate() call: "+s+", "+e);var d=f.length,_=c.length;if(d<_)for(var m=r?Ee:be,w=d;w<_;w++)this.add(new m);else d>_&&this[r?"removeSegments":"removeChildren"](_,d);for(var w=0;w<_;w++)f[w].interpolate(l[w],c[w],t);r&&(this.setClosed(s._closed),this._changed(9))},compare:function(s){var e=!1;if(s){var t=this._children||[this],r=s._children?s._children.slice():[s],o=t.length,l=r.length,c=[],f=0;e=!0;for(var d=W.findItemBoundsCollisions(t,r,X.GEOMETRIC_EPSILON),_=o-1;_>=0&&e;_--){var m=t[_];e=!1;var w=d[_];if(w)for(var y=w.length-1;y>=0&&!e;y--)m.compare(r[w[y]])&&(c[w[y]]||(c[w[y]]=!0,f++),e=!0)}e=e&&f===l}return e}}),be=Ae.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var t=arguments,r=Array.isArray(e)?typeof e[0]=="object"?e:t:e&&e.size===a&&(e.x!==a||e.point!==a)?t:null;r&&r.length>0?this.setSegments(r):(this._curves=a,this._segmentSelection=0,!r&&typeof e=="string"&&(this.setPathData(e),e=null)),this._initialize(!r&&e)},_equals:function(s){return this._closed===s._closed&&h.equals(this._segments,s._segments)},copyContent:function(s){this.setSegments(s._segments),this._closed=s._closed},_changed:function s(e){if(s.base.call(this,e),e&8){if(this._length=this._area=a,e&32)this._version++;else if(this._curves)for(var t=0,r=this._curves.length;t<r;t++)this._curves[t]._changed()}else e&64&&(this._bounds=a)},getStyle:function(){var s=this._parent;return(s instanceof Be?s:this)._style},getSegments:function(){return this._segments},setSegments:function(s){var e=this.isFullySelected(),t=s&&s.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=a,t){var r=s[t-1];typeof r=="boolean"&&(this.setClosed(r),t--),this._add(Ee.readList(s,0,{},t))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var s=this._curves,e=this._segments;if(!s){var t=this._countCurves();s=this._curves=new Array(t);for(var r=0;r<t;r++)s[r]=new le(this,e[r],e[r+1]||e[0])}return s},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var s=this.getCurves();return s[s.length-1]},isClosed:function(){return this._closed},setClosed:function(s){if(this._closed!=(s=!!s)){if(this._closed=s,this._curves){var e=this._curves.length=this._countCurves();s&&(this._curves[e-1]=new le(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(s,e){var t=this._segments,r=t.length,o=new K(e),l=new Array(6),c=!0,f,d,_,m,w,y,v,C,T=[];function N(b,S){if(b._transformCoordinates(s,l),f=l[0],d=l[1],c)T.push("M"+o.pair(f,d)),c=!1;else if(w=l[2],y=l[3],w===f&&y===d&&v===_&&C===m){if(!S){var x=f-_,E=d-m;T.push(x===0?"v"+o.number(E):E===0?"h"+o.number(x):"l"+o.pair(x,E))}}else T.push("c"+o.pair(v-_,C-m)+" "+o.pair(w-_,y-m)+" "+o.pair(f-_,d-m));_=f,m=d,v=l[4],C=l[5]}if(!r)return"";for(var k=0;k<r;k++)N(t[k]);return this._closed&&r>0&&(N(t[0],!0),T.push("z")),T.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(s){for(var e=this._segments,t=new Array(6),r=0,o=e.length;r<o;r++)e[r]._transformCoordinates(s,t,!0);return!0},_add:function(s,c){for(var t=this._segments,r=this._curves,o=s.length,l=c==null,c=l?t.length:c,f=0;f<o;f++){var d=s[f];d._path&&(d=s[f]=d.clone()),d._path=this,d._index=c+f,d._selection&&this._updateSelection(d,0,d._selection)}if(l)h.push(t,s);else{t.splice.apply(t,[c,0].concat(s));for(var f=c+o,_=t.length;f<_;f++)t[f]._index=f}if(r){var m=this._countCurves(),w=c>0&&c+o-1===m?c-1:c,y=w,v=Math.min(w+o,m);s._curves&&(r.splice.apply(r,[w,0].concat(s._curves)),y+=s._curves.length);for(var f=y;f<v;f++)r.splice(f,0,new le(this,null,null));this._adjustCurves(w,v)}return this._changed(41),s},_adjustCurves:function(s,e){for(var t=this._segments,r=this._curves,o,l=s;l<e;l++)o=r[l],o._path=this,o._segment1=t[l],o._segment2=t[l+1]||t[0],o._changed();(o=r[this._closed&&!s?t.length-1:s-1])&&(o._segment2=t[s]||t[0],o._changed()),(o=r[e])&&(o._segment1=t[e],o._changed())},_countCurves:function(){var s=this._segments.length;return!this._closed&&s>0?s-1:s},add:function(s){var e=arguments;return e.length>1&&typeof s!="number"?this._add(Ee.readList(e)):this._add([Ee.read(e)])[0]},insert:function(s,e){var t=arguments;return t.length>2&&typeof e!="number"?this._add(Ee.readList(t,1),s):this._add([Ee.read(t,1)],s)[0]},addSegment:function(){return this._add([Ee.read(arguments)])[0]},insertSegment:function(s){return this._add([Ee.read(arguments,1)],s)[0]},addSegments:function(s){return this._add(Ee.readList(s))},insertSegments:function(s,e){return this._add(Ee.readList(e),s)},removeSegment:function(s){return this.removeSegments(s,s+1)[0]||null},removeSegments:function(s,e,t){s=s||0,e=h.pick(e,this._segments.length);var r=this._segments,o=this._curves,l=r.length,c=r.splice(s,e-s),f=c.length;if(!f)return c;for(var d=0;d<f;d++){var _=c[d];_._selection&&this._updateSelection(_,_._selection,0),_._index=_._path=null}for(var d=s,m=r.length;d<m;d++)r[d]._index=d;if(o){for(var w=s>0&&e===l+(this._closed?1:0)?s-1:s,o=o.splice(w,f),d=o.length-1;d>=0;d--)o[d]._path=null;t&&(c._curves=o.slice(1)),this._adjustCurves(w,w)}return this._changed(41),c},clear:"#removeSegments",hasHandles:function(){for(var s=this._segments,e=0,t=s.length;e<t;e++)if(s[e].hasHandles())return!0;return!1},clearHandles:function(){for(var s=this._segments,e=0,t=s.length;e<t;e++)s[e].clearHandles()},getLength:function(){if(this._length==null){for(var s=this.getCurves(),e=0,t=0,r=s.length;t<r;t++)e+=s[t].getLength();this._length=e}return this._length},getArea:function(){var s=this._area;if(s==null){var e=this._segments,t=this._closed;s=0;for(var r=0,o=e.length;r<o;r++){var l=r+1===o;s+=le.getArea(le.getValues(e[r],e[l?0:r+1],null,l&&!t))}this._area=s}return s},isFullySelected:function(){var s=this._segments.length;return this.isSelected()&&s>0&&this._segmentSelection===s*7},setFullySelected:function(s){s&&this._selectSegments(!0),this.setSelected(s)},setSelection:function s(e){e&1||this._selectSegments(!1),s.base.call(this,e)},_selectSegments:function(s){var e=this._segments,t=e.length,r=s?7:0;this._segmentSelection=r*t;for(var o=0;o<t;o++)e[o]._selection=r},_updateSelection:function(s,e,t){s._selection=t;var r=this._segmentSelection+=t-e;r>0&&this.setSelected(!0)},divideAt:function(s){var e=this.getLocationAt(s),t;return e&&(t=e.getCurve().divideAt(e.getCurveOffset()))?t._segment1:null},splitAt:function(s){var e=this.getLocationAt(s),t=e&&e.index,r=e&&e.time,o=1e-8,l=1-o;r>l&&(t++,r=0);var c=this.getCurves();if(t>=0&&t<c.length){r>=o&&c[t++].divideAtTime(r);var f=this.removeSegments(t,this._segments.length,!0),d;return this._closed?(this.setClosed(!1),d=this):(d=new be(B.NO_INSERT),d.insertAbove(this),d.copyAttributes(this)),d._add(f,0),this.addSegment(f[0]),d}return null},split:function(s,e){var t,r=e===a?s:(t=this.getCurves()[s])&&t.getLocationAtTime(e);return r!=null?this.splitAt(r):null},join:function(s,e){var t=e||0;if(s&&s!==this){var r=s._segments,o=this.getLastSegment(),l=s.getLastSegment();if(!l)return this;o&&o._point.isClose(l._point,t)&&s.reverse();var c=s.getFirstSegment();if(o&&o._point.isClose(c._point,t))o.setHandleOut(c._handleOut),this._add(r.slice(1));else{var f=this.getFirstSegment();f&&f._point.isClose(c._point,t)&&s.reverse(),l=s.getLastSegment(),f&&f._point.isClose(l._point,t)?(f.setHandleIn(l._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}s._closed&&this._add([r[0]]),s.remove()}var d=this.getFirstSegment(),_=this.getLastSegment();return d!==_&&d._point.isClose(_._point,t)&&(d.setHandleIn(_._handleIn),_.remove(),this.setClosed(!0)),this},reduce:function(s){for(var e=this.getCurves(),t=s&&s.simplify,r=t?1e-7:0,o=e.length-1;o>=0;o--){var l=e[o];!l.hasHandles()&&(!l.hasLength(r)||t&&l.isCollinear(l.getNext()))&&l.remove()}return this},reverse:function(){this._segments.reverse();for(var s=0,e=this._segments.length;s<e;s++){var t=this._segments[s],r=t._handleIn;t._handleIn=t._handleOut,t._handleOut=r,t._index=s}this._curves=null,this._changed(9)},flatten:function(s){for(var e=new it(this,s||.25,256,!0),t=e.parts,r=t.length,o=[],l=0;l<r;l++)o.push(new Ee(t[l].curve.slice(0,2)));!this._closed&&r>0&&o.push(new Ee(t[r-1].curve.slice(6))),this.setSegments(o)},simplify:function(s){var e=new ut(this).fit(s||2.5);return e&&this.setSegments(e),!!e},smooth:function(s){var e=this,t=s||{},r=t.type||"asymmetric",o=this._segments,l=o.length,c=this._closed;function f(Ce,Te){var Oe=Ce&&Ce.index;if(Oe!=null){var me=Ce.path;if(me&&me!==e)throw new Error(Ce._class+" "+Oe+" of "+me+" is not part of "+e);Te&&Ce instanceof le&&Oe++}else Oe=typeof Ce=="number"?Ce:Te;return Math.min(Oe<0&&c?Oe%l:Oe<0?Oe+l:Oe,l-1)}var d=c&&t.from===a&&t.to===a,_=f(t.from,0),m=f(t.to,l-1);if(_>m)if(c)_-=l;else{var w=_;_=m,m=w}if(/^(?:asymmetric|continuous)$/.test(r)){var y=r==="asymmetric",v=Math.min,C=m-_+1,T=C-1,N=d?v(C,4):1,k=N,b=N,S=[];if(c||(k=v(1,_),b=v(1,l-m-1)),T+=k+b,T<=1)return;for(var x=0,E=_-k;x<=T;x++,E++)S[x]=o[(E<0?E+l:E)%l]._point;for(var I=S[0]._x+2*S[1]._x,M=S[0]._y+2*S[1]._y,L=2,R=T-1,F=[I],H=[M],G=[L],V=[],q=[],x=1;x<T;x++){var Q=x<R,j=Q||y?1:2,Y=Q?4:y?2:7,re=Q?4:y?3:8,oe=Q?2:y?0:1,de=j/L;L=G[x]=Y-de,I=F[x]=re*S[x]._x+oe*S[x+1]._x-de*I,M=H[x]=re*S[x]._y+oe*S[x+1]._y-de*M}V[R]=F[R]/G[R],q[R]=H[R]/G[R];for(var x=T-2;x>=0;x--)V[x]=(F[x]-V[x+1])/G[x],q[x]=(H[x]-q[x+1])/G[x];V[T]=(3*S[T]._x-V[R])/2,q[T]=(3*S[T]._y-q[R])/2;for(var x=k,ye=T-b,E=_;x<=ye;x++,E++){var xe=o[E<0?E+l:E],he=xe._point,fe=V[x]-he._x,Se=q[x]-he._y;(d||x<ye)&&xe.setHandleOut(fe,Se),(d||x>k)&&xe.setHandleIn(-fe,-Se)}}else for(var x=_;x<=m;x++)o[x<0?x+l:x].smooth(t,!d&&x===_,!d&&x===m)},toShape:function(s){if(!this._closed)return null;var e=this._segments,t,r,o,l;function c(y,v){var C=e[y],T=C.getNext(),N=e[v],k=N.getNext();return C._handleOut.isZero()&&T._handleIn.isZero()&&N._handleOut.isZero()&&k._handleIn.isZero()&&T._point.subtract(C._point).isCollinear(k._point.subtract(N._point))}function f(y){var v=e[y],C=v.getPrevious(),T=v.getNext();return C._handleOut.isZero()&&v._handleIn.isZero()&&v._handleOut.isZero()&&T._handleIn.isZero()&&v._point.subtract(C._point).isOrthogonal(T._point.subtract(v._point))}function d(y){var v=e[y],C=v.getNext(),T=v._handleOut,N=C._handleIn,k=.5522847498307936;if(T.isOrthogonal(N)){var b=v._point,S=C._point,x=new pe(b,T,!0).intersect(new pe(S,N,!0),!0);return x&&X.isZero(T.getLength()/x.subtract(b).getLength()-k)&&X.isZero(N.getLength()/x.subtract(S).getLength()-k)}return!1}function _(y,v){return e[y]._point.getDistance(e[v]._point)}if(!this.hasHandles()&&e.length===4&&c(0,2)&&c(1,3)&&f(1)?(t=Fe.Rectangle,r=new ee(_(0,3),_(0,1)),l=e[1]._point.add(e[2]._point).divide(2)):e.length===8&&d(0)&&d(2)&&d(4)&&d(6)&&c(1,5)&&c(3,7)?(t=Fe.Rectangle,r=new ee(_(1,6),_(0,3)),o=r.subtract(new ee(_(0,7),_(1,2))).divide(2),l=e[3]._point.add(e[4]._point).divide(2)):e.length===4&&d(0)&&d(1)&&d(2)&&d(3)&&(X.isZero(_(0,2)-_(1,3))?(t=Fe.Circle,o=_(0,2)/2):(t=Fe.Ellipse,o=new ee(_(2,0)/2,_(3,1)/2)),l=e[1]._point),t){var m=this.getPosition(!0),w=new t({center:m,size:r,radius:o,insert:!1});return w.copyAttributes(this,!0),w._matrix.prepend(this._matrix),w.rotate(l.subtract(m).getAngle()+90),(s===a||s)&&w.insertAbove(this),w}return null},toPath:"#clone",compare:function s(e){if(!e||e instanceof Be)return s.base.call(this,e);var t=this.getCurves(),r=e.getCurves(),o=t.length,l=r.length;if(!o||!l)return o==l;for(var c=t[0].getValues(),f=[],d=0,_,m=0,w,y=0;y<l;y++){var N=r[y].getValues();f.push(N);var v=le.getOverlaps(c,N);if(v){_=!y&&v[0][0]>0?l-1:y,w=v[0][1];break}}for(var C=Math.abs,T=1e-8,N=f[_],k;c&&N;){var v=le.getOverlaps(c,N);if(v){var b=v[0][0];if(C(b-m)<T){m=v[1][0],m===1&&(c=++d<o?t[d].getValues():null,m=0);var S=v[0][1];if(C(S-w)<T){if(k||(k=[_,S]),w=v[1][1],w===1&&(++_>=l&&(_=0),N=f[_]||r[_].getValues(),w=0),!c)return k[0]===_&&k[1]===w;continue}}}break}return!1},_hitTestSelf:function(s,e,t,r){var o=this,l=this.getStyle(),c=this._segments,f=c.length,d=this._closed,_=e._tolerancePadding,m=_,w,y,v,C,T,N,k=e.stroke&&l.hasStroke(),b=e.fill&&l.hasFill(),S=e.curves,x=k?l.getStrokeWidth()/2:b&&e.tolerance>0||S?0:null;x!==null&&(x>0?(w=l.getStrokeJoin(),y=l.getStrokeCap(),v=l.getMiterLimit(),m=m.add(be._getStrokePadding(x,r))):w=y="round");function E(V,q){return s.subtract(V).divide(q).length<=1}function I(V,q,Q){if(!e.selected||q.isSelected()){var j=V._point;if(q!==j&&(q=q.add(j)),E(q,m))return new st(Q,o,{segment:V,point:q})}}function M(V,q){return(q||e.segments)&&I(V,V._point,"segment")||!q&&e.handles&&(I(V,V._handleIn,"handle-in")||I(V,V._handleOut,"handle-out"))}function L(V){C.add(V)}function R(V){var q=d||V._index>0&&V._index<f-1;if((q?w:y)==="round")return E(V._point,m);if(C=new be({internal:!0,closed:!0}),q?V.isSmooth()||be._addBevelJoin(V,w,x,v,null,r,L,!0):y==="square"&&be._addSquareCap(V,y,x,null,r,L,!0),!C.isEmpty()){var Q;return C.contains(s)||(Q=C.getNearestLocation(s))&&E(Q.getPoint(),_)}}if(e.ends&&!e.segments&&!d){if(N=M(c[0],!0)||M(c[f-1],!0))return N}else if(e.segments||e.handles){for(var F=0;F<f;F++)if(N=M(c[F]))return N}if(x!==null){if(T=this.getNearestLocation(s),T){var H=T.getTime();H===0||H===1&&f>1?R(T.getSegment())||(T=null):E(T.getPoint(),m)||(T=null)}if(!T&&w==="miter"&&f>1)for(var F=0;F<f;F++){var G=c[F];if(s.getDistance(G._point)<=v*x&&R(G)){T=G.getLocation();break}}}return!T&&b&&this._contains(s)||T&&!k&&!S?new st("fill",this):T?new st(k?"stroke":"curve",this,{location:T,point:T.getPoint()}):null}},h.each(le._evaluateMethods,function(s){this[s+"At"]=function(e){var t=this.getLocationAt(e);return t&&t[s]()}},{beans:!1,getLocationOf:function(){for(var s=z.read(arguments),e=this.getCurves(),t=0,r=e.length;t<r;t++){var o=e[t].getLocationOf(s);if(o)return o}return null},getOffsetOf:function(){var s=this.getLocationOf.apply(this,arguments);return s?s.getOffset():null},getLocationAt:function(s){if(typeof s=="number"){for(var e=this.getCurves(),t=0,r=0,o=e.length;r<o;r++){var l=t,c=e[r];if(t+=c.getLength(),t>s)return c.getLocationAt(s-l)}if(e.length>0&&s<=this.getLength())return new lt(e[e.length-1],1)}else if(s&&s.getPath&&s.getPath()===this)return s;return null},getOffsetsWithTangent:function(){var s=z.read(arguments);if(s.isZero())return[];for(var e=[],t=0,r=this.getCurves(),o=0,l=r.length;o<l;o++){for(var c=r[o],f=c.getTimesWithTangent(s),d=0,_=f.length;d<_;d++){var m=t+c.getOffsetAtTime(f[d]);e.indexOf(m)<0&&e.push(m)}t+=c.length}return e}}),new function(){function s(t,r,o,l){if(l<=0)return;var c=l/2,f=l-2,d=c-1,_=new Array(6),m,w;function y(b){var S=_[b],x=_[b+1];(m!=S||w!=x)&&(t.beginPath(),t.moveTo(m,w),t.lineTo(S,x),t.stroke(),t.beginPath(),t.arc(S,x,c,0,Math.PI*2,!0),t.fill())}for(var v=0,C=r.length;v<C;v++){var T=r[v],N=T._selection;if(T._transformCoordinates(o,_),m=_[0],w=_[1],N&2&&y(2),N&4&&y(4),t.fillRect(m-c,w-c,l,l),f>0&&!(N&1)){var k=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(m-d,w-d,f,f),t.fillStyle=k}}}function e(t,r,o){var l=r._segments,c=l.length,f=new Array(6),d=!0,_,m,w,y,v,C,T,N;function k(S){if(o)S._transformCoordinates(o,f),_=f[0],m=f[1];else{var x=S._point;_=x._x,m=x._y}if(d)t.moveTo(_,m),d=!1;else{if(o)v=f[2],C=f[3];else{var E=S._handleIn;v=_+E._x,C=m+E._y}v===_&&C===m&&T===w&&N===y?t.lineTo(_,m):t.bezierCurveTo(T,N,v,C,_,m)}if(w=_,y=m,o)T=f[4],N=f[5];else{var E=S._handleOut;T=w+E._x,N=y+E._y}}for(var b=0;b<c;b++)k(l[b]);r._closed&&c>0&&k(l[0])}return{_draw:function(t,r,o,l){var c=r.dontStart,f=r.dontFinish||r.clip,d=this.getStyle(),_=d.hasFill(),m=d.hasStroke(),w=d.getDashArray(),y=!rt.support.nativeDash&&m&&w&&w.length;c||t.beginPath(),(_||m&&!y||f)&&(e(t,this,l),this._closed&&t.closePath());function v(S){return w[(S%y+y)%y]}if(!f&&(_||m)&&(this._setStyles(t,r,o),_&&(t.fill(d.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),m)){if(y){c||t.beginPath();for(var C=new it(this,.25,32,!1,l),T=C.length,N=-d.getDashOffset(),k,b=0;N>0;)N-=v(b--)+v(b--);for(;N<T;)k=N+v(b++),(N>0||k>0)&&C.drawPart(t,Math.max(N,0),Math.max(k,0)),N=k+v(b++)}t.stroke()}},_drawSelected:function(t,r){t.beginPath(),e(t,this,r),t.stroke(),s(t,this._segments,r,rt.settings.handleSize)}}},new function(){function s(e){var t=e._segments;if(!t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){var e=this._segments;e.length===1&&this.removeSegment(0),e.length||this._add([new Ee(z.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Ee(z.read(arguments))])},cubicCurveTo:function(){var e=arguments,t=z.read(e),r=z.read(e),o=z.read(e),l=s(this);l.setHandleOut(t.subtract(l._point)),this._add([new Ee(o,r.subtract(o))])},quadraticCurveTo:function(){var e=arguments,t=z.read(e),r=z.read(e),o=s(this)._point;this.cubicCurveTo(t.add(o.subtract(t).multiply(1/3)),t.add(r.subtract(t).multiply(1/3)),r)},curveTo:function(){var e=arguments,t=z.read(e),r=z.read(e),o=h.pick(h.read(e),.5),l=1-o,c=s(this)._point,f=t.subtract(c.multiply(l*l)).subtract(r.multiply(o*o)).divide(2*o*l);if(f.isNaN())throw new Error("Cannot put a curve through points with parameter = "+o);this.quadraticCurveTo(f,r)},arcTo:function(){var e=arguments,t=Math.abs,r=Math.sqrt,o=s(this),l=o._point,c=z.read(e),f,d=h.peek(e),_=h.pick(d,!0),m,w,y,v;if(typeof _=="boolean")var C=l.add(c).divide(2),f=C.add(C.subtract(l).rotate(_?-90:90));else if(h.remain(e)<=2)f=c,c=z.read(e);else if(!l.equals(c)){var T=ee.read(e),N=X.isZero;if(N(T.width)||N(T.height))return this.lineTo(c);var k=h.read(e),_=!!h.read(e),b=!!h.read(e),C=l.add(c).divide(2),S=l.subtract(C).rotate(-k),x=S.x,E=S.y,I=t(T.width),M=t(T.height),L=I*I,R=M*M,F=x*x,H=E*E,G=r(F/L+H/R);if(G>1&&(I*=G,M*=G,L=I*I,R=M*M),G=(L*R-L*H-R*F)/(L*H+R*F),t(G)<1e-12&&(G=0),G<0)throw new Error("Cannot create an arc with the given arguments");m=new z(I*E/M,-M*x/I).multiply((b===_?-1:1)*r(G)).rotate(k).add(C),v=new te().translate(m).rotate(k).scale(I,M),y=v._inverseTransform(l),w=y.getDirectedAngle(v._inverseTransform(c)),!_&&w>0?w-=360:_&&w<0&&(w+=360)}if(f){var V=new pe(l.add(f).divide(2),f.subtract(l).rotate(90),!0),q=new pe(f.add(c).divide(2),c.subtract(f).rotate(90),!0),Q=new pe(l,c),j=Q.getSide(f);if(m=V.intersect(q,!0),!m){if(!j)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments")}y=l.subtract(m),w=y.getDirectedAngle(c.subtract(m));var Y=Q.getSide(m,!0);Y===0?w=j*t(w):j===Y&&(w+=w<0?360:-360)}if(w){for(var re=1e-7,oe=t(w),de=oe>=360?4:Math.ceil((oe-re)/90),ye=w/de,xe=ye*Math.PI/360,he=4/3*Math.sin(xe)/(1+Math.cos(xe)),fe=[],Se=0;Se<=de;Se++){var S=c,Ce=null;if(Se<de&&(Ce=y.rotate(90).multiply(he),v?(S=v._transformPoint(y),Ce=v._transformPoint(y.add(Ce)).subtract(S)):S=m.add(y)),!Se)o.setHandleOut(Ce);else{var Te=y.rotate(-90).multiply(he);v&&(Te=v._transformPoint(y.add(Te)).subtract(S)),fe.push(new Ee(S,Te,Ce))}y=y.rotate(ye)}this._add(fe)}},lineBy:function(){var e=z.read(arguments),t=s(this)._point;this.lineTo(t.add(e))},curveBy:function(){var e=arguments,t=z.read(e),r=z.read(e),o=h.read(e),l=s(this)._point;this.curveTo(l.add(t),l.add(r),o)},cubicCurveBy:function(){var e=arguments,t=z.read(e),r=z.read(e),o=z.read(e),l=s(this)._point;this.cubicCurveTo(l.add(t),l.add(r),l.add(o))},quadraticCurveBy:function(){var e=arguments,t=z.read(e),r=z.read(e),o=s(this)._point;this.quadraticCurveTo(o.add(t),o.add(r))},arcBy:function(){var e=arguments,t=s(this)._point,r=t.add(z.read(e)),o=h.pick(h.peek(e),!0);typeof o=="boolean"?this.arcTo(r,o):this.arcTo(r,t.add(z.read(e)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(s,e){var t=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return be[t](this._segments,this._closed,this,s,e)},statics:{getBounds:function(s,e,t,r,o,l){var c=s[0];if(!c)return new $;var f=new Array(6),d=c._transformCoordinates(r,new Array(6)),_=d.slice(0,2),m=_.slice(),w=new Array(2);function y(T){T._transformCoordinates(r,f);for(var N=0;N<2;N++)le._addBounds(d[N],d[N+4],f[N+2],f[N],N,l?l[N]:0,_,m,w);var k=d;d=f,f=k}for(var v=1,C=s.length;v<C;v++)y(s[v]);return e&&y(c),new $(_[0],_[1],m[0]-_[0],m[1]-_[1])},getStrokeBounds:function(s,e,t,r,o){var l=t.getStyle(),c=l.hasStroke(),f=l.getStrokeWidth(),d=c&&t._getStrokeMatrix(r,o),_=c&&be._getStrokePadding(f,d),m=be.getBounds(s,e,t,r,o,_);if(!c)return m;var w=f/2,y=l.getStrokeJoin(),v=l.getStrokeCap(),C=l.getMiterLimit(),T=new $(new ee(_));function N(I){m=m.include(I)}function k(I){m=m.unite(T.setCenter(I._point.transform(r)))}function b(I,M){M==="round"||I.isSmooth()?k(I):be._addBevelJoin(I,M,w,C,r,d,N)}function S(I,M){M==="round"?k(I):be._addSquareCap(I,M,w,r,d,N)}var x=s.length-(e?0:1);if(x>0){for(var E=1;E<x;E++)b(s[E],y);e?b(s[0],y):(S(s[0],v),S(s[s.length-1],v))}return m},_getStrokePadding:function(s,e){if(!e)return[s,s];var t=new z(s,0).transform(e),r=new z(0,s).transform(e),o=t.getAngleInRadians(),l=t.getLength(),c=r.getLength(),f=Math.sin(o),d=Math.cos(o),_=Math.tan(o),m=Math.atan2(c*_,l),w=Math.atan2(c,_*l);return[Math.abs(l*Math.cos(m)*d+c*Math.sin(m)*f),Math.abs(c*Math.sin(w)*d+l*Math.cos(w)*f)]},_addBevelJoin:function(s,e,t,r,o,l,c,f){var d=s.getCurve(),_=d.getPrevious(),m=d.getPoint1().transform(o),w=_.getNormalAtTime(1).multiply(t).transform(l),y=d.getNormalAtTime(0).multiply(t).transform(l),v=w.getDirectedAngle(y);if((v<0||v>=180)&&(w=w.negate(),y=y.negate()),f&&c(m),c(m.add(w)),e==="miter"){var C=new pe(m.add(w),new z(-w.y,w.x),!0).intersect(new pe(m.add(y),new z(-y.y,y.x),!0),!0);C&&m.getDistance(C)<=r*t&&c(C)}c(m.add(y))},_addSquareCap:function(s,e,t,r,o,l,c){var f=s._point.transform(r),d=s.getLocation(),_=d.getNormal().multiply(d.getTime()===0?t:-t).transform(o);e==="square"&&(c&&(l(f.subtract(_)),l(f.add(_))),f=f.add(_.rotate(-90))),l(f.add(_)),l(f.subtract(_))},getHandleBounds:function(s,e,t,r,o){var l=t.getStyle(),c=o.stroke&&l.hasStroke(),f,d;if(c){var _=t._getStrokeMatrix(r,o),m=l.getStrokeWidth()/2,w=m;l.getStrokeJoin()==="miter"&&(w=m*l.getMiterLimit()),l.getStrokeCap()==="square"&&(w=Math.max(w,m*Math.SQRT2)),f=be._getStrokePadding(m,_),d=be._getStrokePadding(w,_)}for(var y=new Array(6),v=1/0,C=-v,T=v,N=C,k=0,b=s.length;k<b;k++){var S=s[k];S._transformCoordinates(r,y);for(var x=0;x<6;x+=2){var E=x?f:d,I=E?E[0]:0,M=E?E[1]:0,L=y[x],R=y[x+1],F=L-I,H=L+I,G=R-M,V=R+M;F<v&&(v=F),H>C&&(C=H),G<T&&(T=G),V>N&&(N=V)}}return new $(v,T,C-v,N-T)}}});be.inject({statics:new function(){var s=.5522847498307936,e=[new Ee([-1,0],[0,s],[0,-s]),new Ee([0,-1],[-s,0],[s,0]),new Ee([1,0],[0,-s],[0,s]),new Ee([0,1],[s,0],[-s,0])];function t(o,l,c){var f=h.getNamed(c),d=new be(f&&f.insert==!1&&B.NO_INSERT);return d._add(o),d._closed=l,d.set(f,{insert:!0})}function r(o,l,c){for(var f=new Array(4),d=0;d<4;d++){var _=e[d];f[d]=new Ee(_._point.multiply(l).add(o),_._handleIn.multiply(l),_._handleOut.multiply(l))}return t(f,!0,c)}return{Line:function(){var o=arguments;return t([new Ee(z.readNamed(o,"from")),new Ee(z.readNamed(o,"to"))],!1,o)},Circle:function(){var o=arguments,l=z.readNamed(o,"center"),c=h.readNamed(o,"radius");return r(l,new ee(c),o)},Rectangle:function(){var o=arguments,l=$.readNamed(o,"rectangle"),c=ee.readNamed(o,"radius",0,{readNull:!0}),f=l.getBottomLeft(!0),d=l.getTopLeft(!0),_=l.getTopRight(!0),m=l.getBottomRight(!0),w;if(!c||c.isZero())w=[new Ee(f),new Ee(d),new Ee(_),new Ee(m)];else{c=ee.min(c,l.getSize(!0).divide(2));var y=c.width,v=c.height,C=y*s,T=v*s;w=[new Ee(f.add(y,0),null,[-C,0]),new Ee(f.subtract(0,v),[0,T]),new Ee(d.add(0,v),null,[0,-T]),new Ee(d.add(y,0),[-C,0],null),new Ee(_.subtract(y,0),null,[C,0]),new Ee(_.add(0,v),[0,-T],null),new Ee(m.subtract(0,v),null,[0,T]),new Ee(m.subtract(y,0),[C,0])]}return t(w,!0,o)},RoundRectangle:"#Rectangle",Ellipse:function(){var o=arguments,l=Fe._readEllipse(o);return r(l.center,l.radius,o)},Oval:"#Ellipse",Arc:function(){var o=arguments,l=z.readNamed(o,"from"),c=z.readNamed(o,"through"),f=z.readNamed(o,"to"),d=h.getNamed(o),_=new be(d&&d.insert==!1&&B.NO_INSERT);return _.moveTo(l),_.arcTo(c,f),_.set(d)},RegularPolygon:function(){for(var o=arguments,l=z.readNamed(o,"center"),c=h.readNamed(o,"sides"),f=h.readNamed(o,"radius"),d=360/c,_=c%3===0,m=new z(0,_?-f:f),w=_?-1:.5,y=new Array(c),v=0;v<c;v++)y[v]=new Ee(l.add(m.rotate((v+w)*d)));return t(y,!0,o)},Star:function(){for(var o=arguments,l=z.readNamed(o,"center"),c=h.readNamed(o,"points")*2,f=h.readNamed(o,"radius1"),d=h.readNamed(o,"radius2"),_=360/c,m=new z(0,-1),w=new Array(c),y=0;y<c;y++)w[y]=new Ee(l.add(m.rotate(_*y).multiply(y%2?d:f)));return t(w,!0,o)}}}});var Be=Ae.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||(typeof e=="string"?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function s(e,t){var r=t,o=r[0];o&&typeof o[0]=="number"&&(r=[r]);for(var l=t.length-1;l>=0;l--){var c=r[l];r===t&&!(c instanceof be)&&(r=h.slice(r)),Array.isArray(c)?r[l]=new be({segments:c,insert:!1}):c instanceof Be&&(r.splice.apply(r,[l,1].concat(c.removeChildren())),c.remove())}return s.base.call(this,e,r)},reduce:function s(e){for(var t=this._children,r=t.length-1;r>=0;r--){var o=t[r].reduce(e);o.isEmpty()&&o.remove()}if(!t.length){var o=new be(B.NO_INSERT);return o.copyAttributes(this),o.insertAbove(this),this.remove(),o}return s.base.call(this)},isClosed:function(){for(var s=this._children,e=0,t=s.length;e<t;e++)if(!s[e]._closed)return!1;return!0},setClosed:function(s){for(var e=this._children,t=0,r=e.length;t<r;t++)e[t].setClosed(s)},getFirstSegment:function(){var s=this.getFirstChild();return s&&s.getFirstSegment()},getLastSegment:function(){var s=this.getLastChild();return s&&s.getLastSegment()},getCurves:function(){for(var s=this._children,e=[],t=0,r=s.length;t<r;t++)h.push(e,s[t].getCurves());return e},getFirstCurve:function(){var s=this.getFirstChild();return s&&s.getFirstCurve()},getLastCurve:function(){var s=this.getLastChild();return s&&s.getLastCurve()},getArea:function(){for(var s=this._children,e=0,t=0,r=s.length;t<r;t++)e+=s[t].getArea();return e},getLength:function(){for(var s=this._children,e=0,t=0,r=s.length;t<r;t++)e+=s[t].getLength();return e},getPathData:function(s,e){for(var t=this._children,r=[],o=0,l=t.length;o<l;o++){var c=t[o],f=c._matrix;r.push(c.getPathData(s&&!f.isIdentity()?s.appended(f):s,e))}return r.join("")},_hitTestChildren:function s(e,t,r){return s.base.call(this,e,t.class===be||t.type==="path"?t:h.set({},t,{fill:!1}),r)},_draw:function(s,e,t,r){var o=this._children;if(!!o.length){e=e.extend({dontStart:!0,dontFinish:!0}),s.beginPath();for(var l=0,c=o.length;l<c;l++)o[l].draw(s,e,r);if(!e.clip){this._setStyles(s,e,t);var f=this._style;f.hasFill()&&(s.fill(f.getFillRule()),s.shadowColor="rgba(0,0,0,0)"),f.hasStroke()&&s.stroke()}}},_drawSelected:function(s,e,t){for(var r=this._children,o=0,l=r.length;o<l;o++){var c=r[o],f=c._matrix;t[c._id]||c._drawSelected(s,f.isIdentity()?e:e.appended(f))}}},new function(){function s(e,t){var r=e._children;if(t&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return h.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var t=s(this,!0);t[e].apply(t,arguments)}},{moveTo:function(){var e=s(this),t=e&&e.isEmpty()?e:new be(B.NO_INSERT);t!==e&&this.addChild(t),t.moveTo.apply(t,arguments)},moveBy:function(){var e=s(this,!0),t=e&&e.getLastSegment(),r=z.read(arguments);this.moveTo(t?r.add(t._point):r)},closePath:function(e){s(this,!0).closePath(e)}})},h.each(["reverse","flatten","simplify","smooth"],function(s){this[s]=function(e){for(var t=this._children,r,o=0,l=t.length;o<l;o++)r=t[o][s](e)||r;return r}},{}));Ae.inject(new function(){var s=Math.min,e=Math.max,t=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function o(k){return k._children||[k]}function l(k,b){var S=k.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(b){for(var x=o(S),E=0,I=x.length;E<I;E++){var k=x[E];!k._closed&&!k.isEmpty()&&(k.closePath(1e-12),k.getFirstSegment().setHandleIn(0,0),k.getLastSegment().setHandleOut(0,0))}S=S.resolveCrossings().reorient(S.getFillRule()==="nonzero",!0)}return S}function c(k,b,S,x,E){var I=new Be(B.NO_INSERT);return I.addChildren(k,!0),I=I.reduce({simplify:b}),E&&E.insert==!1||I.insertAbove(x&&S.isSibling(x)&&S.getIndex()<x.getIndex()?x:S),I.copyAttributes(S,!0),I}function f(k){return k.hasOverlap()||k.isCrossing()}function d(k,b,S,x){if(x&&(x.trace==!1||x.stroke)&&/^(subtract|intersect)$/.test(S))return _(k,b,S);var E=l(k,!0),I=b&&k!==b&&l(b,!0),M=r[S];M[S]=!0,I&&(M.subtract||M.exclude)^(I.isClockwise()^E.isClockwise())&&I.reverse();var L=v(lt.expand(E.getIntersections(I,f))),R=o(E),F=I&&o(I),H=[],G=[],V;function q(Ce){for(var Te=0,Oe=Ce.length;Te<Oe;Te++){var me=Ce[Te];h.push(H,me._segments),h.push(G,me.getCurves()),me._overlapsOnly=!0}}function Q(Ce){for(var Te=[],Oe=0,me=Ce&&Ce.length;Oe<me;Oe++)Te.push(G[Ce[Oe]]);return Te}if(L.length){q(R),F&&q(F);for(var j=new Array(G.length),Y=0,re=G.length;Y<re;Y++)j[Y]=G[Y].getValues();for(var oe=W.findCurveBoundsCollisions(j,j,0,!0),de={},Y=0;Y<G.length;Y++){var ye=G[Y],xe=ye._path._id,he=de[xe]=de[xe]||{};he[ye.getIndex()]={hor:Q(oe[Y].hor),ver:Q(oe[Y].ver)}}for(var Y=0,re=L.length;Y<re;Y++)T(L[Y]._segment,E,I,de,M);for(var Y=0,re=H.length;Y<re;Y++){var fe=H[Y],Se=fe._intersection;fe._winding||T(fe,E,I,de,M),Se&&Se._overlap||(fe._path._overlapsOnly=!1)}V=N(H,M)}else V=y(F?R.concat(F):R.slice(),function(Ce){return!!M[Ce]});return c(V,!0,k,b,x)}function _(k,b,S){var x=l(k),E=l(b),I=x.getIntersections(E,f),M=S==="subtract",L=S==="divide",R={},F=[];function H(q){if(!R[q._id]&&(L||E.contains(q.getPointAt(q.getLength()/2))^M))return F.unshift(q),R[q._id]=!0}for(var G=I.length-1;G>=0;G--){var V=I[G].split();V&&(H(V)&&V.getFirstSegment().setHandleIn(0,0),x.getLastSegment().setHandleOut(0,0))}return H(x),c(F,!1,k,b)}function m(k,b){for(var S=k;S;){if(S===b)return;S=S._previous}for(;k._next&&k._next!==b;)k=k._next;if(!k._next){for(;b._previous;)b=b._previous;k._next=b,b._previous=k}}function w(k){for(var b=k.length-1;b>=0;b--)k[b].clearHandles()}function y(k,b,S){var x=k&&k.length;if(x){var E=h.each(k,function(oe,de){this[oe._id]={container:null,winding:oe.isClockwise()?1:-1,index:de}},{}),I=k.slice().sort(function(oe,de){return t(de.getArea())-t(oe.getArea())}),M=I[0],L=W.findItemBoundsCollisions(I,null,X.GEOMETRIC_EPSILON);S==null&&(S=M.isClockwise());for(var R=0;R<x;R++){var F=I[R],H=E[F._id],G=0,V=L[R];if(V){for(var q=null,Q=V.length-1;Q>=0;Q--)if(V[Q]<R){q=q||F.getInteriorPoint();var j=I[V[Q]];if(j.contains(q)){var Y=E[j._id];G=Y.winding,H.winding+=G,H.container=Y.exclude?Y.container:j;break}}}if(b(H.winding)===b(G))H.exclude=!0,k[H.index]=null;else{var re=H.container;F.setClockwise(re?!re.isClockwise():S)}}}return k}function v(k,b,S){var x=b&&[],E=1e-8,I=1-E,M=!1,L=S||[],R=S&&{},F,H,G;function V(Te){return Te._path._id+"."+Te._segment1._index}for(var q=(S&&S.length)-1;q>=0;q--){var Q=S[q];Q._path&&(R[V(Q)]=!0)}for(var q=k.length-1;q>=0;q--){var j=k[q],Y=j._time,re=Y,oe=b&&!b(j),Q=j._curve,de;if(Q&&(Q!==H?(M=!Q.hasHandles()||R&&R[V(Q)],F=[],G=null,H=Q):G>=E&&(Y/=G)),oe){F&&F.push(j);continue}else b&&x.unshift(j);if(G=re,Y<E)de=Q._segment1;else if(Y>I)de=Q._segment2;else{var ye=Q.divideAtTime(Y,!0);M&&L.push(Q,ye),de=ye._segment1;for(var xe=F.length-1;xe>=0;xe--){var he=F[xe];he._time=(he._time-Y)/(1-Y)}}j._setSegment(de);var fe=de._intersection,Se=j._intersection;if(fe){m(fe,Se);for(var Ce=fe;Ce;)m(Ce._intersection,fe),Ce=Ce._next}else de._intersection=Se}return S||w(L),x||k}function C(k,b,S,x,E){var I=Array.isArray(b)?b:b[S?"hor":"ver"],M=S?1:0,L=M^1,R=[k.x,k.y],F=R[M],H=R[L],G=1e-9,V=1e-6,q=F-G,Q=F+G,j=0,Y=0,re=0,oe=0,de=!1,ye=!1,xe=1,he=[],fe,Se;function Ce(Xe){var Ze=Xe[L+0],_t=Xe[L+6];if(!(H<s(Ze,_t)||H>e(Ze,_t))){var pt=Xe[M+0],xt=Xe[M+2],Kt=Xe[M+4],jt=Xe[M+6];if(Ze===_t){(pt<Q&&jt>q||jt<Q&&pt>q)&&(de=!0);return}var zt=H===Ze?0:H===_t||q>e(pt,xt,Kt,jt)||Q<s(pt,xt,Kt,jt)?1:le.solveCubic(Xe,L,H,he,0,1)>0?he[0]:1,Ge=zt===0?pt:zt===1?jt:le.getPoint(Xe,zt)[S?"y":"x"],Pt=Ze>_t?1:-1,Qt=fe[L]>fe[L+6]?1:-1,Jt=fe[M+6];return H!==Ze?(Ge<q?re+=Pt:Ge>Q?oe+=Pt:de=!0,Ge>F-V&&Ge<F+V&&(xe/=2)):(Pt!==Qt?pt<q?re+=Pt:pt>Q&&(oe+=Pt):pt!=Jt&&(Jt<Q&&Ge>Q?(oe+=Pt,de=!0):Jt>q&&Ge<q&&(re+=Pt,de=!0)),xe/=4),fe=Xe,!E&&Ge>q&&Ge<Q&&le.getTangent(Xe,zt)[S?"x":"y"]===0&&C(k,b,!S,x,!0)}}function Te(Xe){var Ze=Xe[L+0],_t=Xe[L+2],pt=Xe[L+4],xt=Xe[L+6];if(H<=e(Ze,_t,pt,xt)&&H>=s(Ze,_t,pt,xt)){for(var Kt=Xe[M+0],jt=Xe[M+2],zt=Xe[M+4],Ge=Xe[M+6],Pt=q>e(Kt,jt,zt,Ge)||Q<s(Kt,jt,zt,Ge)?[Xe]:le.getMonoCurves(Xe,S),Qt,Jt=0,fi=Pt.length;Jt<fi;Jt++)if(Qt=Ce(Pt[Jt]))return Qt}}for(var Oe=0,me=I.length;Oe<me;Oe++){var Me=I[Oe],ze=Me._path,He=Me.getValues(),ht;if((!Oe||I[Oe-1]._path!==ze)&&(fe=null,ze._closed||(Se=le.getValues(ze.getLastCurve().getSegment2(),Me.getSegment1(),null,!x),Se[L]!==Se[L+6]&&(fe=Se)),!fe)){fe=He;for(var ft=ze.getLastCurve();ft&&ft!==Me;){var ct=ft.getValues();if(ct[L]!==ct[L+6]){fe=ct;break}ft=ft.getPrevious()}}if(ht=Te(He))return ht;if(Oe+1===me||I[Oe+1]._path!==ze){if(Se&&(ht=Te(Se)))return ht;de&&!re&&!oe&&(re=oe=ze.isClockwise(x)^S?1:-1),j+=re,Y+=oe,re=oe=0,de&&(ye=!0,de=!1),Se=null}}return j=t(j),Y=t(Y),{winding:e(j,Y),windingL:j,windingR:Y,quality:xe,onPath:ye}}function T(k,b,S,x,E){var I=[],M=k,L=0,G;do{var R=k.getCurve();if(R){var F=R.getLength();I.push({segment:k,curve:R,length:F}),L+=F}k=k.getNext()}while(k&&!k._intersection&&k!==M);for(var H=[.5,.25,.75],G={winding:0,quality:-1},V=.001,q=1-V,Q=0;Q<H.length&&G.quality<.5;Q++)for(var F=L*H[Q],j=0,Y=I.length;j<Y;j++){var re=I[j],oe=re.length;if(F<=oe){var R=re.curve,de=R._path,ye=de._parent,xe=ye instanceof Be?ye:de,he=X.clamp(R.getTimeAt(F),V,q),fe=R.getPointAtTime(he),Se=t(R.getTangentAtTime(he).y)<Math.SQRT1_2,Ce=null;if(E.subtract&&S){var Te=xe===b?S:b,Oe=Te._getWinding(fe,Se,!0);if(xe===b&&Oe.winding||xe===S&&!Oe.winding){if(Oe.quality<1)continue;Ce={winding:0,quality:1}}}Ce=Ce||C(fe,x[de._id][R.getIndex()],Se,!0),Ce.quality>G.quality&&(G=Ce);break}F-=oe}for(var j=I.length-1;j>=0;j--)I[j].segment._winding=G}function N(k,b){var S=[],x;function E(me){var Me;return!!(me&&!me._visited&&(!b||b[(Me=me._winding||{}).winding]&&!(b.unite&&Me.winding===2&&Me.windingL&&Me.windingR)))}function I(me){if(me){for(var Me=0,ze=x.length;Me<ze;Me++)if(me===x[Me])return!0}return!1}function M(me){for(var Me=me._segments,ze=0,He=Me.length;ze<He;ze++)Me[ze]._visited=!0}function L(me,Me){var ze=me._intersection,He=ze,ht=[];Me&&(x=[me]);function ft(ct,Xe){for(;ct&&ct!==Xe;){var Ze=ct._segment,_t=Ze&&Ze._path;if(_t){var pt=Ze.getNext()||_t.getFirstSegment(),xt=pt._intersection;Ze!==me&&(I(Ze)||I(pt)||pt&&E(Ze)&&(E(pt)||xt&&E(xt._segment)))&&ht.push(Ze),Me&&x.push(Ze)}ct=ct._next}}if(ze){for(ft(ze);ze&&ze._previous;)ze=ze._previous;ft(ze,He)}return ht}k.sort(function(me,Me){var ze=me._intersection,He=Me._intersection,ht=!!(ze&&ze._overlap),ft=!!(He&&He._overlap),ct=me._path,Xe=Me._path;return ht^ft?ht?1:-1:!ze^!He?ze?1:-1:ct!==Xe?ct._id-Xe._id:me._index-Me._index});for(var R=0,F=k.length;R<F;R++){var H=k[R],G=E(H),V=null,q=!1,Q=!0,j=[],Y,re,oe;if(G&&H._path._overlapsOnly){var de=H._path,ye=H._intersection._segment._path;de.compare(ye)&&(de.getArea()&&S.push(de.clone(!1)),M(de),M(ye),G=!1)}for(;G;){var xe=!V,he=L(H,xe),fe=he.shift(),q=!xe&&(I(H)||I(fe)),Se=!q&&fe;if(xe&&(V=new be(B.NO_INSERT),Y=null),q){(H.isFirst()||H.isLast())&&(Q=H._path._closed),H._visited=!0;break}if(Se&&Y&&(j.push(Y),Y=null),Y||(Se&&he.push(H),Y={start:V._segments.length,crossings:he,visited:re=[],handleIn:oe}),Se&&(H=fe),!E(H)){V.removeSegments(Y.start);for(var Ce=0,Te=re.length;Ce<Te;Ce++)re[Ce]._visited=!1;re.length=0;do H=Y&&Y.crossings.shift(),(!H||!H._path)&&(H=null,Y=j.pop(),Y&&(re=Y.visited,oe=Y.handleIn));while(Y&&!E(H));if(!H)break}var Oe=H.getNext();V.add(new Ee(H._point,oe,Oe&&H._handleOut)),H._visited=!0,re.push(H),H=Oe||H._path.getFirstSegment(),oe=Oe&&Oe._handleIn}q&&(Q&&(V.getFirstSegment().setHandleIn(oe),V.setClosed(Q)),V.getArea()!==0&&S.push(V))}return S}return{_getWinding:function(k,b,S){return C(k,this.getCurves(),b,S)},unite:function(k,b){return d(this,k,"unite",b)},intersect:function(k,b){return d(this,k,"intersect",b)},subtract:function(k,b){return d(this,k,"subtract",b)},exclude:function(k,b){return d(this,k,"exclude",b)},divide:function(k,b){return b&&(b.trace==!1||b.stroke)?_(this,k,"divide"):c([this.subtract(k,b),this.intersect(k,b)],!0,this,k,b)},resolveCrossings:function(){var k=this._children,b=k||[this];function S(Y,re){var oe=Y&&Y._intersection;return oe&&oe._overlap&&oe._path===re}var x=!1,E=!1,I=this.getIntersections(null,function(Y){return Y.hasOverlap()&&(x=!0)||Y.isCrossing()&&(E=!0)}),M=x&&E&&[];if(I=lt.expand(I),x)for(var L=v(I,function(Y){return Y.hasOverlap()},M),R=L.length-1;R>=0;R--){var F=L[R],H=F._path,G=F._segment,V=G.getPrevious(),q=G.getNext();S(V,H)&&S(q,H)&&(G.remove(),V._handleOut._set(0,0),q._handleIn._set(0,0),V!==G&&!V.getCurve().hasLength()&&(q._handleIn.set(V._handleIn),V.remove()))}E&&(v(I,x&&function(Y){var re=Y.getCurve(),oe=Y.getSegment(),de=Y._intersection,ye=de._curve,xe=de._segment;if(re&&ye&&re._path&&ye._path)return!0;oe&&(oe._intersection=null),xe&&(xe._intersection=null)},M),M&&w(M),b=N(h.each(b,function(Y){h.push(this,Y._segments)},[])));var Q=b.length,j;return Q>1&&k?(b!==k&&this.setChildren(b),j=this):Q===1&&!k&&(b[0]!==this&&this.setSegments(b[0].removeSegments()),j=this),j||(j=new Be(B.NO_INSERT),j.addChildren(b),j=j.reduce(),j.copyAttributes(this),this.replaceWith(j)),j},reorient:function(k,b){var S=this._children;return S&&S.length?this.setChildren(y(this.removeChildren(),function(x){return!!(k?x:x&1)},b)):b!==a&&this.setClockwise(b),this},getInteriorPoint:function(){var k=this.getBounds(),b=k.getCenter(!0);if(!this.contains(b)){for(var S=this.getCurves(),x=b.y,E=[],I=[],M=0,L=S.length;M<L;M++){var R=S[M].getValues(),F=R[1],H=R[3],G=R[5],V=R[7];if(x>=s(F,H,G,V)&&x<=e(F,H,G,V))for(var q=le.getMonoCurves(R),Q=0,j=q.length;Q<j;Q++){var Y=q[Q],re=Y[1],oe=Y[7];if(re!==oe&&(x>=re&&x<=oe||x>=oe&&x<=re)){var de=x===re?Y[0]:x===oe?Y[6]:le.solveCubic(Y,1,x,I,0,1)===1?le.getPoint(Y,I[0]).x:(Y[0]+Y[6])/2;E.push(de)}}}E.length>1&&(E.sort(function(ye,xe){return ye-xe}),b.x=(E[0]+E[1])/2)}return b}}});var it=h.extend({_class:"PathFlattener",initialize:function(s,e,t,r,o){var l=[],c=[],f=0,d=1/(t||32),_=s._segments,m=_[0],w;function y(N,k){var b=le.getValues(N,k,o);l.push(b),v(b,N._index,0,1)}function v(N,k,b,S){if(S-b>d&&!(r&&le.isStraight(N))&&!le.isFlatEnough(N,e||.25)){var x=le.subdivide(N,.5),E=(b+S)/2;v(x[0],k,b,E),v(x[1],k,E,S)}else{var I=N[6]-N[0],M=N[7]-N[1],L=Math.sqrt(I*I+M*M);L>0&&(f+=L,c.push({offset:f,curve:N,index:k,time:S}))}}for(var C=1,T=_.length;C<T;C++)w=_[C],y(m,w),m=w;s._closed&&y(w||m,_[0]),this.curves=l,this.parts=c,this.length=f,this.index=0},_get:function(s){for(var e=this.parts,t=e.length,r,o=this.index;r=o,!(!o||e[--o].offset<s););for(;r<t;r++){var l=e[r];if(l.offset>=s){this.index=r;var c=e[r-1],f=c&&c.index===l.index?c.time:0,d=c?c.offset:0;return{index:l.index,time:f+(l.time-f)*(s-d)/(l.offset-d)}}}return{index:e[t-1].index,time:1}},drawPart:function(s,e,t){for(var r=this._get(e),o=this._get(t),l=r.index,c=o.index;l<=c;l++){var f=le.getPart(this.curves[l],l===r.index?r.time:0,l===o.index?o.time:1);l===r.index&&s.moveTo(f[0],f[1]),s.bezierCurveTo.apply(s,f.slice(2))}}},h.each(le._evaluateMethods,function(s){this[s+"At"]=function(e){var t=this._get(e);return le[s](this.curves[t.index],t.time)}},{})),ut=h.extend({initialize:function(s){for(var e=this.points=[],t=s._segments,r=s._closed,o=0,l,c=t.length;o<c;o++){var f=t[o].point;(!l||!l.equals(f))&&e.push(l=f.clone())}r&&(e.unshift(e[e.length-1]),e.push(e[1])),this.closed=r},fit:function(s){var e=this.points,t=e.length,r=null;return t>0&&(r=[new Ee(e[0])],t>1&&(this.fitCubic(r,s,0,t-1,e[1].subtract(e[0]),e[t-2].subtract(e[t-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(s,e,t,r,o,l){var c=this.points;if(r-t===1){var f=c[t],d=c[r],_=f.getDistance(d)/3;this.addCurve(s,[f,f.add(o.normalize(_)),d.add(l.normalize(_)),d]);return}for(var m=this.chordLengthParameterize(t,r),w=Math.max(e,e*e),y,v=!0,C=0;C<=4;C++){var T=this.generateBezier(t,r,m,o,l),N=this.findMaxError(t,r,T,m);if(N.error<e&&v){this.addCurve(s,T);return}if(y=N.index,N.error>=w)break;v=this.reparameterize(t,r,m,T),w=N.error}var k=c[y-1].subtract(c[y+1]);this.fitCubic(s,e,t,y,o,k),this.fitCubic(s,e,y,r,k.negate(),l)},addCurve:function(s,e){var t=s[s.length-1];t.setHandleOut(e[1].subtract(e[0])),s.push(new Ee(e[3],e[2].subtract(e[3])))},generateBezier:function(s,e,t,r,o){for(var l=1e-12,c=Math.abs,f=this.points,d=f[s],_=f[e],m=[[0,0],[0,0]],w=[0,0],y=0,v=e-s+1;y<v;y++){var C=t[y],T=1-C,N=3*C*T,k=T*T*T,b=N*T,S=N*C,x=C*C*C,E=r.normalize(b),I=o.normalize(S),M=f[s+y].subtract(d.multiply(k+b)).subtract(_.multiply(S+x));m[0][0]+=E.dot(E),m[0][1]+=E.dot(I),m[1][0]=m[0][1],m[1][1]+=I.dot(I),w[0]+=E.dot(M),w[1]+=I.dot(M)}var L=m[0][0]*m[1][1]-m[1][0]*m[0][1],R,F;if(c(L)>l){var H=m[0][0]*w[1]-m[1][0]*w[0],G=w[0]*m[1][1]-w[1]*m[0][1];R=G/L,F=H/L}else{var V=m[0][0]+m[0][1],q=m[1][0]+m[1][1];R=F=c(V)>l?w[0]/V:c(q)>l?w[1]/q:0}var Q=_.getDistance(d),j=l*Q,Y,re;if(R<j||F<j)R=F=Q/3;else{var oe=_.subtract(d);Y=r.normalize(R),re=o.normalize(F),Y.dot(oe)-re.dot(oe)>Q*Q&&(R=F=Q/3,Y=re=null)}return[d,d.add(Y||r.normalize(R)),_.add(re||o.normalize(F)),_]},reparameterize:function(s,e,t,r){for(var o=s;o<=e;o++)t[o-s]=this.findRoot(r,this.points[o],t[o-s]);for(var o=1,l=t.length;o<l;o++)if(t[o]<=t[o-1])return!1;return!0},findRoot:function(s,e,t){for(var r=[],o=[],l=0;l<=2;l++)r[l]=s[l+1].subtract(s[l]).multiply(3);for(var l=0;l<=1;l++)o[l]=r[l+1].subtract(r[l]).multiply(2);var c=this.evaluate(3,s,t),f=this.evaluate(2,r,t),d=this.evaluate(1,o,t),_=c.subtract(e),m=f.dot(f)+_.dot(d);return X.isMachineZero(m)?t:t-_.dot(f)/m},evaluate:function(s,e,t){for(var r=e.slice(),o=1;o<=s;o++)for(var l=0;l<=s-o;l++)r[l]=r[l].multiply(1-t).add(r[l+1].multiply(t));return r[0]},chordLengthParameterize:function(s,e){for(var t=[0],r=s+1;r<=e;r++)t[r-s]=t[r-s-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,o=e-s;r<=o;r++)t[r]/=t[o];return t},findMaxError:function(s,e,t,r){for(var o=Math.floor((e-s+1)/2),l=0,c=s+1;c<e;c++){var f=this.evaluate(3,t,r[c-s]),d=f.subtract(this.points[c]),_=d.x*d.x+d.y*d.y;_>=l&&(l=_,o=c)}return{error:l,index:o}}}),Ut=B.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var t=e&&h.isPlainObject(e)&&e.x===a&&e.y===a;this._initialize(t&&e,!t&&z.read(arguments))},_equals:function(s){return this._content===s._content},copyContent:function(s){this.setContent(s._content)},getContent:function(){return this._content},setContent:function(s){this._content=""+s,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Gt=Ut.extend({_class:"PointText",initialize:function(){Ut.apply(this,arguments)},getPoint:function(){var s=this._matrix.getTranslation();return new ue(s.x,s.y,this,"setPoint")},setPoint:function(){var s=z.read(arguments);this.translate(s.subtract(this._matrix.getTranslation()))},_draw:function(s,e,t){if(!!this._content){this._setStyles(s,e,t);var r=this._lines,o=this._style,l=o.hasFill(),c=o.hasStroke(),f=o.getLeading(),d=s.shadowColor;s.font=o.getFontStyle(),s.textAlign=o.getJustification();for(var _=0,m=r.length;_<m;_++){s.shadowColor=d;var w=r[_];l&&(s.fillText(w,0,0),s.shadowColor="rgba(0,0,0,0)"),c&&s.strokeText(w,0,0),s.translate(0,f)}}},_getBounds:function(s,e){var t=this._style,r=this._lines,o=r.length,l=t.getJustification(),c=t.getLeading(),f=this.getView().getTextWidth(t.getFontStyle(),r),d=0;l!=="left"&&(d-=f/(l==="center"?2:1));var _=new $(d,o?-.75*c:0,f,o*c);return s?s._transformBounds(_,_):_}}),Qe=h.extend(new function(){var s={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},e={},t={transparent:[0,0,0,0]},r;function o(f){var d=f.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||f.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),_="rgb",m;if(d){var w=d[4]?4:3;m=new Array(w);for(var y=0;y<w;y++){var v=d[y+1];m[y]=parseInt(v.length==1?v+v:v,16)/255}}else if(d=f.match(/^(rgb|hsl)a?\((.*)\)$/)){_=d[1],m=d[2].trim().split(/[,\s]+/g);for(var C=_==="hsl",y=0,T=Math.min(m.length,4);y<T;y++){var N=m[y],v=parseFloat(N);if(C)if(y===0){var k=N.match(/([a-z]*)$/)[1];v*={turn:360,rad:180/Math.PI,grad:.9}[k]||1}else y<3&&(v/=100);else y<3&&(v/=/%$/.test(N)?100:255);m[y]=v}}else{var b=t[f];if(!b)if(u){r||(r=It.getContext(1,1),r.globalCompositeOperation="copy"),r.fillStyle="rgba(0,0,0,0)",r.fillStyle=f,r.fillRect(0,0,1,1);var S=r.getImageData(0,0,1,1).data;b=t[f]=[S[0]/255,S[1]/255,S[2]/255]}else b=[0,0,0];m=b.slice()}return[_,m]}var l=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],c={"rgb-hsb":function(f,d,_){var m=Math.max(f,d,_),w=Math.min(f,d,_),y=m-w,v=y===0?0:(m==f?(d-_)/y+(d<_?6:0):m==d?(_-f)/y+2:(f-d)/y+4)*60;return[v,m===0?0:y/m,m]},"hsb-rgb":function(f,d,_){f=(f/60%6+6)%6;var w=Math.floor(f),m=f-w,w=l[w],y=[_,_*(1-d),_*(1-d*m),_*(1-d*(1-m))];return[y[w[0]],y[w[1]],y[w[2]]]},"rgb-hsl":function(f,d,_){var m=Math.max(f,d,_),w=Math.min(f,d,_),y=m-w,v=y===0,C=v?0:(m==f?(d-_)/y+(d<_?6:0):m==d?(_-f)/y+2:(f-d)/y+4)*60,T=(m+w)/2,N=v?0:T<.5?y/(m+w):y/(2-m-w);return[C,N,T]},"hsl-rgb":function(f,d,_){if(f=(f/360%1+1)%1,d===0)return[_,_,_];for(var m=[f+1/3,f,f-1/3],w=_<.5?_*(1+d):_+d-_*d,y=2*_-w,v=[],C=0;C<3;C++){var T=m[C];T<0&&(T+=1),T>1&&(T-=1),v[C]=6*T<1?y+(w-y)*6*T:2*T<1?w:3*T<2?y+(w-y)*(2/3-T)*6:y}return v},"rgb-gray":function(f,d,_){return[f*.2989+d*.587+_*.114]},"gray-rgb":function(f){return[f,f,f]},"gray-hsb":function(f){return[0,0,f]},"gray-hsl":function(f){return[0,0,f]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return h.each(s,function(f,d){e[d]=[],h.each(f,function(_,m){var w=h.capitalize(_),y=/^(hue|saturation)$/.test(_),v=e[d][m]=d==="gradient"?_==="gradient"?function(C){var T=this._components[0];return C=qt.read(Array.isArray(C)?C:arguments,0,{readNull:!0}),T!==C&&(T&&T._removeOwner(this),C&&C._addOwner(this)),C}:function(){return z.read(arguments,0,{readNull:_==="highlight",clone:!0})}:function(C){return C==null||isNaN(C)?0:+C};this["get"+w]=function(){return this._type===d||y&&/^hs[bl]$/.test(this._type)?this._components[m]:this._convert(d)[m]},this["set"+w]=function(C){this._type!==d&&!(y&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(d),this._properties=s[d],this._type=d),this._components[m]=v.call(this,C),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function f(d){var _=arguments,m=this.__read,w=0,y,v,C,T;Array.isArray(d)&&(_=d,d=_[0]);var N=d!=null&&typeof d;if(N==="string"&&d in s&&(y=d,d=_[1],Array.isArray(d)?(v=d,C=_[2]):(m&&(w=1),_=h.slice(_,1),N=typeof d)),!v){if(T=N==="number"?_:N==="object"&&d.length!=null?d:null,T){y||(y=T.length>=3?"rgb":"gray");var k=s[y].length;C=T[k],m&&(w+=T===arguments?k+(C!=null?1:0):1),T.length>k&&(T=h.slice(T,0,k))}else if(N==="string"){var b=o(d);y=b[0],v=b[1],v.length===4&&(C=v[3],v.length--)}else if(N==="object")if(d.constructor===f){if(y=d._type,v=d._components.slice(),C=d._alpha,y==="gradient")for(var S=1,x=v.length;S<x;S++){var E=v[S];E&&(v[S]=E.clone())}}else if(d.constructor===qt)y="gradient",T=_;else{y="hue"in d?"lightness"in d?"hsl":"hsb":"gradient"in d||"stops"in d||"radial"in d?"gradient":"gray"in d?"gray":"rgb";var I=s[y],M=e[y];this._components=v=[];for(var S=0,x=I.length;S<x;S++){var L=d[I[S]];L==null&&!S&&y==="gradient"&&"stops"in d&&(L={stops:d.stops,radial:d.radial}),L=M[S].call(this,L),L!=null&&(v[S]=L)}C=d.alpha}m&&y&&(w=1)}if(this._type=y||"rgb",!v){this._components=v=[];for(var M=e[this._type],S=0,x=M.length;S<x;S++){var L=M[S].call(this,T&&T[S]);L!=null&&(v[S]=L)}}return this._components=v,this._properties=s[this._type],this._alpha=C,m&&(this.__read=w),this},set:"#initialize",_serialize:function(f,d){var _=this.getComponents();return h.serialize(/^(gray|rgb)$/.test(this._type)?_:[this._type].concat(_),f,!0,d)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(f){var d;return this._type===f?this._components.slice():(d=c[this._type+"-"+f])?d.apply(this,this._components):c["rgb-"+f].apply(this,c[this._type+"-rgb"].apply(this,this._components))},convert:function(f){return new Qe(f,this._convert(f),this._alpha)},getType:function(){return this._type},setType:function(f){this._components=this._convert(f),this._properties=s[f],this._type=f},getComponents:function(){var f=this._components.slice();return this._alpha!=null&&f.push(this._alpha),f},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(f){this._alpha=f==null?null:Math.min(Math.max(f,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(f){var d=h.isPlainValue(f,!0)?Qe.read(arguments):f;return d===this||d&&this._class===d._class&&this._type===d._type&&this.getAlpha()===d.getAlpha()&&h.equals(this._components,d._components)||!1},toString:function(){for(var f=this._properties,d=[],_=this._type==="gradient",m=K.instance,w=0,y=f.length;w<y;w++){var v=this._components[w];v!=null&&d.push(f[w]+": "+(_?v:m.number(v)))}return this._alpha!=null&&d.push("alpha: "+m.number(this._alpha)),"{ "+d.join(", ")+" }"},toCSS:function(f){var d=this._convert("rgb"),_=f||this._alpha==null?1:this._alpha;function m(w){return Math.round((w<0?0:w>1?1:w)*255)}return d=[m(d[0]),m(d[1]),m(d[2])],_<1&&d.push(_<0?0:_),f?"#"+((1<<24)+(d[0]<<16)+(d[1]<<8)+d[2]).toString(16).slice(1):(d.length==4?"rgba(":"rgb(")+d.join(",")+")"},toCanvasStyle:function(f,d){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var _=this._components,m=_[0],w=m._stops,y=_[1],v=_[2],C=_[3],T=d&&d.inverted(),N;if(T&&(y=T._transformPoint(y),v=T._transformPoint(v),C&&(C=T._transformPoint(C))),m._radial){var k=v.getDistance(y);if(C){var b=C.subtract(y);b.getLength()>k&&(C=y.add(b.normalize(k-.1)))}var S=C||y;N=f.createRadialGradient(S.x,S.y,0,y.x,y.y,k)}else N=f.createLinearGradient(y.x,y.y,v.x,v.y);for(var x=0,E=w.length;x<E;x++){var I=w[x],M=I._offset;N.addColorStop(M==null?x/(E-1):M,I._color.toCanvasStyle())}return this._canvasStyle=N},transform:function(f){if(this._type==="gradient"){for(var d=this._components,_=1,m=d.length;_<m;_++){var w=d[_];f._transformPoint(w,w,!0)}this._changed()}},statics:{_types:s,random:function(){var f=Math.random;return new Qe(f(),f(),f())},_setOwner:function(f,d,_){return f&&(f._owner&&d&&f._owner!==d&&(f=f.clone()),!f._owner^!d&&(f._owner=d||null,f._setter=_||null)),f}}})},new function(){var s={add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t}};return h.each(s,function(e,t){this[t]=function(r){r=Qe.read(arguments);for(var o=this._type,l=this._components,c=r._convert(o),f=0,d=l.length;f<d;f++)c[f]=e(l[f],c[f]);return new Qe(o,c,this._alpha!=null?e(this._alpha,r.getAlpha()):null)}},{})}),qt=h.extend({_class:"Gradient",initialize:function(e,t){this._id=ie.get(),e&&h.isPlainObject(e)&&(this.set(e),e=t=null),this._stops==null&&this.setStops(e||["white","black"]),this._radial==null&&this.setRadial(typeof t=="string"&&t==="radial"||t||!1)},_serialize:function(s,e){return e.add(this,function(){return h.serialize([this._stops,this._radial],s,!0,e)})},_changed:function(){for(var s=0,e=this._owners&&this._owners.length;s<e;s++)this._owners[s]._changed()},_addOwner:function(s){this._owners||(this._owners=[]),this._owners.push(s)},_removeOwner:function(s){var e=this._owners?this._owners.indexOf(s):-1;e!=-1&&(this._owners.splice(e,1),this._owners.length||(this._owners=a))},clone:function(){for(var s=[],e=0,t=this._stops.length;e<t;e++)s[e]=this._stops[e].clone();return new qt(s,this._radial)},getStops:function(){return this._stops},setStops:function(s){if(s.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var t=0,r=e.length;t<r;t++)e[t]._owner=a;e=this._stops=oi.readList(s,0,{clone:!0});for(var t=0,r=e.length;t<r;t++)e[t]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(s){this._radial=s,this._changed()},equals:function(s){if(s===this)return!0;if(s&&this._class===s._class){var e=this._stops,t=s._stops,r=e.length;if(r===t.length){for(var o=0;o<r;o++)if(!e[o].equals(t[o]))return!1;return!0}}return!1}}),oi=h.extend({_class:"GradientStop",initialize:function(e,t){var r=e,o=t;typeof e=="object"&&t===a&&(Array.isArray(e)&&typeof e[0]!="number"?(r=e[0],o=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(r=e.color,o=e.offset||e.rampPoint||0)),this.setColor(r),this.setOffset(o)},clone:function(){return new oi(this._color.clone(),this._offset)},_serialize:function(s,e){var t=this._color,r=this._offset;return h.serialize(r==null?[t]:[t,r],s,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(s){this._offset=s,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Qe._setOwner(this._color,null),this._color=Qe._setOwner(Qe.read(arguments,0),this,"setColor"),this._changed()},equals:function(s){return s===this||s&&this._class===s._class&&this._color.equals(s._color)&&this._offset==s._offset||!1}}),Ni=h.extend(new function(){var s={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new z,selectedColor:null},e=h.set({},s,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),t=h.set({},e,{fillColor:new Qe}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},o={beans:!0},l={_class:"Style",beans:!0,initialize:function(f,d,_){this._values={},this._owner=d,this._project=d&&d._project||_||rt.project,this._defaults=!d||d instanceof Ne?e:d instanceof Ut?t:s,f&&this.set(f)}};return h.each(e,function(c,f){var d=/Color$/.test(f),_=f==="shadowOffset",m=h.capitalize(f),w=r[f],y="set"+m,v="get"+m;l[y]=function(C){var T=this._owner,N=T&&T._children,k=N&&N.length>0&&!(T instanceof Be);if(k)for(var b=0,S=N.length;b<S;b++)N[b]._style[y](C);if((f==="selectedColor"||!k)&&f in this._defaults){var x=this._values[f];x!==C&&(d&&(x&&(Qe._setOwner(x,null),x._canvasStyle=null),C&&C.constructor===Qe&&(C=Qe._setOwner(C,T,k&&y))),this._values[f]=C,T&&T._changed(w||129))}},l[v]=function(C){var T=this._owner,N=T&&T._children,k=N&&N.length>0&&!(T instanceof Be),b;if(k&&!C)for(var S=0,x=N.length;S<x;S++){var E=N[S]._style[v]();if(!S)b=E;else if(!h.equals(b,E))return a}else if(f in this._defaults){var b=this._values[f];if(b===a)b=this._defaults[f],b&&b.clone&&(b=b.clone());else{var I=d?Qe:_?z:null;I&&!(b&&b.constructor===I)&&(this._values[f]=b=I.read([b],0,{readNull:!0,clone:!0}))}}return b&&d&&(b=Qe._setOwner(b,T,k&&y)),b},o[v]=function(C){return this._style[v](C)},o[y]=function(C){this._style[y](C)}}),h.each({Font:"FontFamily",WindingRule:"FillRule"},function(c,f){var d="get"+f,_="set"+f;l[d]=o[d]="#get"+c,l[_]=o[_]="#set"+c}),B.inject(o),l},{set:function(s){var e=s instanceof Ni,t=e?s._values:s;if(t){for(var r in t)if(r in this._defaults){var o=t[r];this[r]=o&&e&&o.clone?o.clone():o}}},equals:function(s){function e(t,r,o){var l=t._values,c=r._values,f=r._defaults;for(var d in l){var _=l[d],m=c[d];if(!(o&&d in c)&&!h.equals(_,m===a?f[d]:m))return!1}return!0}return s===this||s&&this._class===s._class&&e(this,s)&&e(s,this,!0)||!1},_dispose:function(){var s;s=this.getFillColor(),s&&(s._canvasStyle=null),s=this.getStrokeColor(),s&&(s._canvasStyle=null),s=this.getShadowColor(),s&&(s._canvasStyle=null)},hasFill:function(){var s=this.getFillColor();return!!s&&s.alpha>0},hasStroke:function(){var s=this.getStrokeColor();return!!s&&s.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var s=this.getShadowColor();return!!s&&s.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var s=this.getFontSize();return this.getFontWeight()+" "+s+(/[a-z]/i.test(s+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function s(){var e=s.base.call(this),t=this.getFontSize();return/pt|em|%|px/.test(t)&&(t=this.getView().getPixelSize(t)),e!=null?e:t*1.2}}),je=new function(){function s(e,t,r,o){for(var l=["","webkit","moz","Moz","ms","o"],c=t[0].toUpperCase()+t.substring(1),f=0;f<6;f++){var d=l[f],_=d?d+c:t;if(_ in e){if(r)e[_]=o;else return e[_];break}}}return{getStyles:function(e){var t=e&&e.nodeType!==9?e.ownerDocument:e,r=t&&t.defaultView;return r&&r.getComputedStyle(e,"")},getBounds:function(e,t){var r=e.ownerDocument,o=r.body,l=r.documentElement,c;try{c=e.getBoundingClientRect()}catch(m){c={left:0,top:0,width:0,height:0}}var f=c.left-(l.clientLeft||o.clientLeft||0),d=c.top-(l.clientTop||o.clientTop||0);if(!t){var _=r.defaultView;f+=_.pageXOffset||l.scrollLeft||o.scrollLeft,d+=_.pageYOffset||l.scrollTop||o.scrollTop}return new $(f,d,c.width,c.height)},getViewportBounds:function(e){var t=e.ownerDocument,r=t.defaultView,o=t.documentElement;return new $(0,0,r.innerWidth||o.clientWidth,r.innerHeight||o.clientHeight)},getOffset:function(e,t){return je.getBounds(e,t).getPoint()},getSize:function(e){return je.getBounds(e,!0).getSize()},isInvisible:function(e){return je.getSize(e).equals(new ee(0,0))},isInView:function(e){return!je.isInvisible(e)&&je.getViewportBounds(e).intersects(je.getBounds(e,!0))},isInserted:function(e){return g.body.contains(e)},getPrefixed:function(e,t){return e&&s(e,t)},setPrefixed:function(e,t,r){if(typeof t=="object")for(var o in t)s(e,o,!0,t[o]);else s(e,t,!0,r)}}},nt={add:function(s,e){if(s)for(var t in e)for(var r=e[t],o=t.split(/[\s,]+/g),l=0,c=o.length;l<c;l++){var f=o[l],d=s===g&&(f==="touchstart"||f==="touchmove")?{passive:!1}:!1;s.addEventListener(f,r,d)}},remove:function(s,e){if(s)for(var t in e)for(var r=e[t],o=t.split(/[\s,]+/g),l=0,c=o.length;l<c;l++)s.removeEventListener(o[l],r,!1)},getPoint:function(s){var e=s.targetTouches?s.targetTouches.length?s.targetTouches[0]:s.changedTouches[0]:s;return new z(e.pageX||e.clientX+g.documentElement.scrollLeft,e.pageY||e.clientY+g.documentElement.scrollTop)},getTarget:function(s){return s.target||s.srcElement},getRelatedTarget:function(s){return s.relatedTarget||s.toElement},getOffset:function(s,e){return nt.getPoint(s).subtract(je.getOffset(e||nt.getTarget(s)))}};nt.requestAnimationFrame=new function(){var s=je.getPrefixed(u,"requestAnimationFrame"),e=!1,t=[],r;function o(){var l=t;t=[];for(var c=0,f=l.length;c<f;c++)l[c]();e=s&&t.length,e&&s(o)}return function(l){t.push(l),s?e||(s(o),e=!0):r||(r=setInterval(o,1e3/60))}};var et=h.extend(P,{_class:"View",initialize:function s(e,t){function r(w){return t[w]||parseInt(t.getAttribute(w),10)}function o(){var w=je.getSize(t);return w.isNaN()||w.isZero()?new ee(r("width"),r("height")):w}var l;if(u&&t){this._id=t.getAttribute("id"),this._id==null&&t.setAttribute("id",this._id="paper-view-"+s._id++),nt.add(t,this._viewEvents);var c="none";if(je.setPrefixed(t.style,{userDrag:c,userSelect:c,touchCallout:c,contentZooming:c,tapHighlightColor:"rgba(0,0,0,0)"}),O.hasAttribute(t,"resize")){var f=this;nt.add(u,this._windowEvents={resize:function(){f.setViewSize(o())}})}if(l=o(),O.hasAttribute(t,"stats")&&typeof Stats!="undefined"){this._stats=new Stats;var d=this._stats.domElement,_=d.style,m=je.getOffset(t);_.position="absolute",_.left=m.x+"px",_.top=m.y+"px",g.body.appendChild(d)}}else l=new ee(t),t=null;this._project=e,this._scope=e._scope,this._element=t,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(l.width,l.height),this._viewSize=l,s._views.push(this),s._viewsById[this._id]=this,(this._matrix=new te)._owner=this,s._focused||(s._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!rt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;et._focused===this&&(et._focused=null),et._views.splice(et._views.indexOf(this),1),delete et._viewsById[this._id];var s=this._project;return s._view===this&&(s._view=null),nt.remove(this._element,this._viewEvents),nt.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:h.each(B._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(s){this[s]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(s){this._autoUpdate=s,s&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var s=this;nt.requestAnimationFrame(function(){if(s._requested=!1,s._animate){s.requestUpdate();var e=s._element;(!je.getPrefixed(g,"hidden")||O.getAttribute(e,"keepalive")==="true")&&je.isInView(e)&&s._handleFrame()}s._autoUpdate&&s.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){rt=this._scope;var s=Date.now()/1e3,e=this._last?s-this._last:0;this._last=s,this.emit("frame",new h({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(s,e){var t=this._frameItems;e?(t[s._id]={item:s,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete t[s._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(s){for(var e in this._frameItems){var t=this._frameItems[e];t.item.emit("frame",new h(s,{time:t.time+=s.delta,count:t.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=a},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var s=this._viewSize;return new ce(s.width,s.height,this,"setViewSize")},setViewSize:function(){var s=ee.read(arguments),e=s.subtract(this._viewSize);e.isZero()||(this._setElementSize(s.width,s.height),this._viewSize.set(s),this._changed(),this.emit("resize",{size:s,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(s,e){var t=this._element;t&&(t.width!==s&&(t.width=s),t.height!==e&&(t.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new $(new z,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return je.isInView(this._element)},isInserted:function(){return je.isInserted(this._element)},getPixelSize:function(s){var e=this._element,t;if(e){var r=e.parentNode,o=g.createElement("div");o.style.fontSize=s,r.appendChild(o),t=parseFloat(je.getStyles(o).fontSize),r.removeChild(o)}else t=parseFloat(t);return t},getTextWidth:function(s,e){return 0}},h.each(["rotate","scale","shear","skew"],function(s){var e=s==="rotate";this[s]=function(){var t=arguments,r=(e?h:z).read(t),o=z.read(t,0,{readNull:!0});return this.transform(new te()[s](r,o||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var s=new te;return this.transform(s.translate.apply(s,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var s=z.read(arguments);this.translate(this.getCenter().subtract(s))},getZoom:function(){var s=this._decompose().scaling;return(s.x+s.y)/2},setZoom:function(s){this.transform(new te().scale(s/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(s){var e=this.getRotation();e!=null&&s!=null&&this.rotate(s-e)},getScaling:function(){var s=this._decompose().scaling;return new ue(s.x,s.y,this,"setScaling")},setScaling:function(){var s=this.getScaling(),e=z.read(arguments,0,{clone:!0,readNull:!0});s&&e&&this.scale(e.x/s.x,e.y/s.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var s=this._matrix;s.set.apply(s,arguments)},transform:function(s){this._matrix.append(s)},scrollBy:function(){this.translate(z.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(z.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(z.read(arguments))},getEventPoint:function(s){return this.viewToProject(nt.getOffset(s,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(s,e){g&&typeof e=="string"&&(e=g.getElementById(e));var t=u?Sr:et;return new t(s,e)}}},new function(){if(!u)return;var s,e,t=!1,r=!1;function o(G){var V=nt.getTarget(G);return V.getAttribute&&et._viewsById[V.getAttribute("id")]}function l(){var G=et._focused;if(!G||!G.isVisible()){for(var V=0,q=et._views.length;V<q;V++)if((G=et._views[V]).isVisible()){et._focused=e=G;break}}}function c(G,V,q){G._handleMouseEvent("mousemove",V,q)}var f=u.navigator,d,_,m;f.pointerEnabled||f.msPointerEnabled?(d="pointerdown MSPointerDown",_="pointermove MSPointerMove",m="pointerup pointercancel MSPointerUp MSPointerCancel"):(d="touchstart",_="touchmove",m="touchend touchcancel","ontouchstart"in u&&f.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(d+=" mousedown",_+=" mousemove",m+=" mouseup"));var w={},y={mouseout:function(G){var V=et._focused,q=nt.getRelatedTarget(G);if(V&&(!q||q.nodeName==="HTML")){var Q=nt.getOffset(G,V._element),j=Q.x,Y=Math.abs,re=Y(j),oe=1<<25,de=re-oe;Q.x=Y(de)<re?de*(j<0?-1:1):j,c(V,G,V.viewToProject(Q))}},scroll:l};w[d]=function(G){var V=et._focused=o(G);t||(t=!0,V._handleMouseEvent("mousedown",G))},y[_]=function(G){var V=et._focused;if(!r){var q=o(G);q?V!==q&&(V&&c(V,G),s||(s=V),V=et._focused=e=q):e&&e===V&&(s&&!s.isInserted()&&(s=null),V=et._focused=s,s=null,l())}V&&c(V,G)},y[d]=function(){r=!0},y[m]=function(G){var V=et._focused;V&&t&&V._handleMouseEvent("mouseup",G),r=t=!1},nt.add(g,y),nt.add(u,{load:l});var v=!1,C=!1,T={doubleclick:"click",mousedrag:"mousemove"},N=!1,k,b,S,x,E,I,M,L;function R(G,V,q,Q,j,Y,re){var oe=!1,de;function ye(xe,he){if(xe.responds(he)){if(de||(de=new un(he,Q,j,V||xe,Y?j.subtract(Y):null)),xe.emit(he,de)&&(v=!0,de.prevented&&(C=!0),de.stopped))return oe=!0}else{var fe=T[he];if(fe)return ye(xe,fe)}}for(;G&&G!==re&&!ye(G,q);)G=G._parent;return oe}function F(G,V,q,Q,j,Y){return G._project.removeOn(q),C=v=!1,E&&R(E,null,q,Q,j,Y)||V&&V!==E&&!V.isDescendant(E)&&R(V,null,q==="mousedrag"?"mousemove":q,Q,j,Y,E)||R(G,E||V||G,q,Q,j,Y)}var H={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:w,_handleMouseEvent:function(G,V,q){var Q=this._itemEvents,j=Q.native[G],Y=G==="mousemove",re=this._scope.tool,oe=this;function de(Te){return Q.virtual[Te]||oe.responds(Te)||re&&re.responds(Te)}Y&&t&&de("mousedrag")&&(G="mousedrag"),q||(q=this.getEventPoint(V));var ye=this.getBounds().contains(q),xe=j&&ye&&oe._project.hitTest(q,{tolerance:0,fill:!0,stroke:!0}),he=xe&&xe.item||null,fe=!1,Se={};if(Se[G.substr(5)]=!0,j&&he!==x&&(x&&R(x,null,"mouseleave",V,q),he&&R(he,null,"mouseenter",V,q),x=he),N^ye&&(R(this,null,ye?"mouseenter":"mouseleave",V,q),fe=!0),(ye||Se.drag)&&!q.equals(b)&&(F(this,he,Y?G:"mousemove",V,q,b),fe=!0),N=ye,Se.down&&ye||Se.up&&k){if(F(this,he,G,V,q,k),Se.down){if(L=he===I&&Date.now()-M<300,S=I=he,!C&&he){for(var Ce=he;Ce&&!Ce.responds("mousedrag");)Ce=Ce._parent;Ce&&(E=he)}k=q}else Se.up&&(!C&&he===S&&(M=Date.now(),F(this,he,L?"doubleclick":"click",V,q,k),L=!1),S=E=null);N=!1,fe=!0}b=q,fe&&re&&(v=re._handleMouseEvent(G,V,q,Se)||v),V.cancelable!==!1&&(v&&!Se.move||Se.down&&de("mouseup"))&&V.preventDefault()},_handleKeyEvent:function(G,V,q,Q){var j=this._scope,Y=j.tool,re;function oe(de){de.responds(G)&&(rt=j,de.emit(G,re=re||new er(G,V,q,Q)))}this.isVisible()&&(oe(this),Y&&Y.responds(G)&&oe(Y))},_countItemEvent:function(G,V){var q=this._itemEvents,Q=q.native,j=q.virtual;for(var Y in H)Q[Y]=(Q[Y]||0)+(H[Y][G]||0)*V;j[G]=(j[G]||0)+V},statics:{updateFocus:l,_resetState:function(){t=r=v=N=!1,s=e=k=b=S=x=E=I=M=L=null}}}}),Sr=et.extend({_class:"CanvasView",initialize:function(e,t){if(!(t instanceof u.HTMLCanvasElement)){var r=ee.read(arguments,1);if(r.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+h.slice(arguments,1));t=It.getCanvas(r)}var o=this._context=t.getContext("2d");if(o.save(),this._pixelRatio=1,!/^off|false$/.test(O.getAttribute(t,"hidpi"))){var l=u.devicePixelRatio||1,c=je.getPrefixed(o,"backingStorePixelRatio")||1;this._pixelRatio=l/c}et.call(this,e,t),this._needsUpdate=!0},remove:function s(){return this._context.restore(),s.base.call(this)},_setElementSize:function s(e,t){var r=this._pixelRatio;if(s.base.call(this,e*r,t*r),r!==1){var o=this._element,l=this._context;if(!O.hasAttribute(o,"resize")){var c=o.style;c.width=e+"px",c.height=t+"px"}l.restore(),l.save(),l.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function s(e){var t=rt.agent,r;if(t&&t.firefox)r=s.base.call(this,e);else{var o=this._context,l=o.font;o.font=e+" serif",r=parseFloat(o.font),o.font=l}return r},getTextWidth:function(s,e){var t=this._context,r=t.font,o=0;t.font=s;for(var l=0,c=e.length;l<c;l++)o=Math.max(o,t.measureText(e[l]).width);return t.font=r,o},update:function(){if(!this._needsUpdate)return!1;var s=this._project,e=this._context,t=this._viewSize;return e.clearRect(0,0,t.width+1,t.height+1),s&&s.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Mi=h.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Sn.modifiers}}),er=Mi.extend({_class:"KeyEvent",initialize:function(e,t,r,o){this.type=e,this.event=t,this.key=r,this.character=o},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Sn=new function(){var s={"	":"tab"," ":"space","\b":"backspace","\x7F":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},e={tab:"	",space:" ",enter:"\r"},t={},r={},o,l,c=new h({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var _=rt&&rt.agent;return _&&_.mac?this.meta:this.control}}});function f(_){var m=_.key||_.keyIdentifier;return m=/^U\+/.test(m)?String.fromCharCode(parseInt(m.substr(2),16)):/^Arrow[A-Z]/.test(m)?m.substr(5):m==="Unidentified"||m===a?String.fromCharCode(_.keyCode):m,s[m]||(m.length>1?h.hyphenate(m):m.toLowerCase())}function d(_,m,w,y){var v=et._focused,C;if(t[m]=_,_?r[m]=w:delete r[m],m.length>1&&(C=h.camelize(m))in c){c[C]=_;var T=rt&&rt.agent;if(C==="meta"&&T&&T.mac)if(_)o={};else{for(var N in o)N in r&&d(!1,N,o[N],y);o=null}}else _&&o&&(o[m]=w);v&&v._handleKeyEvent(_?"keydown":"keyup",y,m,w)}return nt.add(g,{keydown:function(_){var m=f(_),w=rt&&rt.agent;m.length>1||w&&w.chrome&&(_.altKey||w.mac&&_.metaKey||!w.mac&&_.ctrlKey)?d(!0,m,e[m]||(m.length>1?"":m),_):l=m},keypress:function(_){if(l){var m=f(_),w=_.charCode,y=w>=32?String.fromCharCode(w):m.length>1?"":m;m!==l&&(m=y.toLowerCase()),d(!0,m,y,_),l=null}},keyup:function(_){var m=f(_);m in r&&d(!1,m,r[m],_)}}),nt.add(u,{blur:function(_){for(var m in r)d(!1,m,r[m],_)}}),{modifiers:c,isDown:function(_){return!!t[_]}}},un=Mi.extend({_class:"MouseEvent",initialize:function(e,t,r,o,l){this.type=e,this.event=t,this.point=r,this.target=o,this.delta=l},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),tr=Mi.extend({_class:"ToolEvent",_item:null,initialize:function(e,t,r){this.tool=e,this.type=t,this.event=r},_choosePoint:function(s,e){return s||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(s){this._point=s},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(s){this._lastPoint=s},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(s){this._downPoint=s},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(s){this._middlePoint=s},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(s){this._delta=s},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(s){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=s},getItem:function(){if(!this._item){var s=this.tool._scope.project.hitTest(this.getPoint());if(s){for(var e=s.item,t=e._parent;/^(Group|CompoundPath)$/.test(t._class);)e=t,t=t._parent;this._item=e}}return this._item},setItem:function(s){this._item=s},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}});D.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){D.call(this),this._moveCount=-1,this._downCount=-1,this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(s){this._minDistance=s,s!=null&&this._maxDistance!=null&&s>this._maxDistance&&(this._maxDistance=s)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(s){this._maxDistance=s,this._minDistance!=null&&s!=null&&s<this._minDistance&&(this._minDistance=s)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(s){this._minDistance=this._maxDistance=s},_handleMouseEvent:function(s,e,t,r){rt=this._scope,r.drag&&!this.responds(s)&&(s="mousemove");var o=r.move||r.drag,l=this.responds(s),c=this.minDistance,f=this.maxDistance,d=!1,_=this;function m(y,v){var C=t,T=o?_._point:_._downPoint||C;if(o){if(_._moveCount>=0&&C.equals(T))return!1;if(T&&(y!=null||v!=null)){var N=C.subtract(T),k=N.getLength();if(k<(y||0))return!1;v&&(C=T.add(N.normalize(Math.min(k,v))))}_._moveCount++}return _._point=C,_._lastPoint=T||C,r.down&&(_._moveCount=-1,_._downPoint=C,_._downCount++),!0}function w(){l&&(d=_.emit(s,new tr(_,s,e))||d)}if(r.down)m(),w();else if(r.up)m(null,f),w();else if(l)for(;m(c,f);)w();return d}});var ir=h.extend(P,{_class:"Tween",statics:{easings:new h({linear:function(s){return s},easeInQuad:function(s){return s*s},easeOutQuad:function(s){return s*(2-s)},easeInOutQuad:function(s){return s<.5?2*s*s:-1+2*(2-s)*s},easeInCubic:function(s){return s*s*s},easeOutCubic:function(s){return--s*s*s+1},easeInOutCubic:function(s){return s<.5?4*s*s*s:(s-1)*(2*s-2)*(2*s-2)+1},easeInQuart:function(s){return s*s*s*s},easeOutQuart:function(s){return 1- --s*s*s*s},easeInOutQuart:function(s){return s<.5?8*s*s*s*s:1-8*--s*s*s*s},easeInQuint:function(s){return s*s*s*s*s},easeOutQuint:function(s){return 1+--s*s*s*s*s},easeInOutQuint:function(s){return s<.5?16*s*s*s*s*s:1+16*--s*s*s*s*s}})},initialize:function s(e,t,r,o,l,c){this.object=e;var f=typeof l,d=f==="function";this.type=d?f:f==="string"?l:"linear",this.easing=d?l:s.easings[this.type],this.duration=o,this.running=!1,this._then=null,this._startTime=null;var _=t||r;this._keys=_?Object.keys(_):[],this._parsedKeys=this._parseKeys(this._keys),this._from=_&&this._getState(t),this._to=_&&this._getState(r),c!==!1&&this.start()},then:function(s){return this._then=s,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(s){if(this.running){s>=1&&(s=1,this.running=!1);for(var e=this.easing(s),t=this._keys,r=function(m){return typeof m=="function"?m(e,s):m},o=0,l=t&&t.length;o<l;o++){var c=t[o],f=r(this._from[c]),d=r(this._to[c]),_=f&&d&&f.__add&&d.__add?d.__subtract(f).__multiply(e).__add(f):(d-f)*e+f;this._setProperty(this._parsedKeys[c],_)}this.responds("update")&&this.emit("update",new h({progress:s,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(s){var e=this._startTime,t=e?(s-e)/this.duration:0;e||(this._startTime=s),this.update(t)},_getState:function(s){for(var e=this._keys,t={},r=0,o=e.length;r<o;r++){var l=e[r],c=this._parsedKeys[l],f=this._getProperty(c),d;if(s){var _=this._resolveValue(f,s[l]);this._setProperty(c,_),d=this._getProperty(c),d=d&&d.clone?d.clone():d,this._setProperty(c,f)}else d=f&&f.clone?f.clone():f;t[l]=d}return t},_resolveValue:function(s,e){if(e){if(Array.isArray(e)&&e.length===2){var t=e[0];return t&&t.match&&t.match(/^[+\-\*\/]=/)?this._calculate(s,t[0],e[1]):e}else if(typeof e=="string"){var r=e.match(/^[+\-*/]=(.*)/);if(r){var o=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(s,e[0],o)}}}return e},_calculate:function(s,e,t){return rt.PaperScript.calculateBinary(s,e,t)},_parseKeys:function(s){for(var e={},t=0,r=s.length;t<r;t++){var o=s[t],l=o.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[o]=l.split("/")}return e},_getProperty:function(s,e){for(var t=this.object,r=0,o=s.length-(e||0);r<o&&t;r++)t=t[s[r]];return t},_setProperty:function(s,e){var t=this._getProperty(s,1);t&&(t[s[s.length-1]]=e)}}),Cn={request:function(s){var e=new i.XMLHttpRequest;return e.open((s.method||"get").toUpperCase(),s.url,h.pick(s.async,!0)),s.mimeType&&e.overrideMimeType(s.mimeType),e.onload=function(){var t=e.status;t===0||t===200?s.onLoad&&s.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var t=e.status,r='Could not load "'+s.url+'" (Status: '+t+")";if(s.onError)s.onError(r,t);else throw new Error(r)},e.send(null)}},It=h.exports.CanvasProvider={canvases:[],getCanvas:function(s,e){if(!u)return null;var t,r=!0;typeof s=="object"&&(e=s.height,s=s.width),this.canvases.length?t=this.canvases.pop():(t=g.createElement("canvas"),r=!1);var o=t.getContext("2d");if(!o)throw new Error("Canvas "+t+" is unable to provide a 2D context.");return t.width===s&&t.height===e?r&&o.clearRect(0,0,s+1,e+1):(t.width=s,t.height=e),o.save(),t},getContext:function(s,e){var t=this.getCanvas(s,e);return t?t.getContext("2d"):null},release:function(s){var e=s&&s.canvas?s.canvas:s;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},mt=new function(){var s=Math.min,e=Math.max,t=Math.abs,r,o,l,c,f,d,_,m,w,y,v;function C(E,I,M){return .2989*E+.587*I+.114*M}function T(E,I,M,F){var R=F-C(E,I,M);w=E+R,y=I+R,v=M+R;var F=C(w,y,v),H=s(w,y,v),G=e(w,y,v);if(H<0){var V=F-H;w=F+(w-F)*F/V,y=F+(y-F)*F/V,v=F+(v-F)*F/V}if(G>255){var q=255-F,Q=G-F;w=F+(w-F)*q/Q,y=F+(y-F)*q/Q,v=F+(v-F)*q/Q}}function N(E,I,M){return e(E,I,M)-s(E,I,M)}function k(E,I,M,L){var R=[E,I,M],F=e(E,I,M),H=s(E,I,M),G;H=H===E?0:H===I?1:2,F=F===E?0:F===I?1:2,G=s(H,F)===0?e(H,F)===1?2:1:0,R[F]>R[H]?(R[G]=(R[G]-R[H])*L/(R[F]-R[H]),R[F]=L):R[G]=R[F]=0,R[H]=0,w=R[0],y=R[1],v=R[2]}var b={multiply:function(){w=f*r/255,y=d*o/255,v=_*l/255},screen:function(){w=f+r-f*r/255,y=d+o-d*o/255,v=_+l-_*l/255},overlay:function(){w=f<128?2*f*r/255:255-2*(255-f)*(255-r)/255,y=d<128?2*d*o/255:255-2*(255-d)*(255-o)/255,v=_<128?2*_*l/255:255-2*(255-_)*(255-l)/255},"soft-light":function(){var E=r*f/255;w=E+f*(255-(255-f)*(255-r)/255-E)/255,E=o*d/255,y=E+d*(255-(255-d)*(255-o)/255-E)/255,E=l*_/255,v=E+_*(255-(255-_)*(255-l)/255-E)/255},"hard-light":function(){w=r<128?2*r*f/255:255-2*(255-r)*(255-f)/255,y=o<128?2*o*d/255:255-2*(255-o)*(255-d)/255,v=l<128?2*l*_/255:255-2*(255-l)*(255-_)/255},"color-dodge":function(){w=f===0?0:r===255?255:s(255,255*f/(255-r)),y=d===0?0:o===255?255:s(255,255*d/(255-o)),v=_===0?0:l===255?255:s(255,255*_/(255-l))},"color-burn":function(){w=f===255?255:r===0?0:e(0,255-(255-f)*255/r),y=d===255?255:o===0?0:e(0,255-(255-d)*255/o),v=_===255?255:l===0?0:e(0,255-(255-_)*255/l)},darken:function(){w=f<r?f:r,y=d<o?d:o,v=_<l?_:l},lighten:function(){w=f>r?f:r,y=d>o?d:o,v=_>l?_:l},difference:function(){w=f-r,w<0&&(w=-w),y=d-o,y<0&&(y=-y),v=_-l,v<0&&(v=-v)},exclusion:function(){w=f+r*(255-f-f)/255,y=d+o*(255-d-d)/255,v=_+l*(255-_-_)/255},hue:function(){k(r,o,l,N(f,d,_)),T(w,y,v,C(f,d,_))},saturation:function(){k(f,d,_,N(r,o,l)),T(w,y,v,C(f,d,_))},luminosity:function(){T(f,d,_,C(r,o,l))},color:function(){T(r,o,l,C(f,d,_))},add:function(){w=s(f+r,255),y=s(d+o,255),v=s(_+l,255)},subtract:function(){w=e(f-r,0),y=e(d-o,0),v=e(_-l,0)},average:function(){w=(f+r)/2,y=(d+o)/2,v=(_+l)/2},negation:function(){w=255-t(255-r-f),y=255-t(255-o-d),v=255-t(255-l-_)}},S=this.nativeModes=h.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(E){this[E]=!0},{}),x=It.getContext(1,1);x&&(h.each(b,function(E,I){var M=I==="darken",L=!1;x.save();try{x.fillStyle=M?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=I,x.globalCompositeOperation===I&&(x.fillStyle=M?"#a00":"#300",x.fillRect(0,0,1,1),L=x.getImageData(0,0,1,1).data[0]!==M?170:51)}catch(R){}x.restore(),S[I]=L}),It.release(x)),this.process=function(E,I,M,L,R){var F=I.canvas,H=E==="normal";if(H||S[E])M.save(),M.setTransform(1,0,0,1,0,0),M.globalAlpha=L,H||(M.globalCompositeOperation=E),M.drawImage(F,R.x,R.y),M.restore();else{var G=b[E];if(!G)return;for(var V=M.getImageData(R.x,R.y,F.width,F.height),q=V.data,Q=I.getImageData(0,0,F.width,F.height).data,j=0,Y=q.length;j<Y;j+=4){r=Q[j],f=q[j],o=Q[j+1],d=q[j+1],l=Q[j+2],_=q[j+2],c=Q[j+3],m=q[j+3],G();var re=c*L/255,oe=1-re;q[j]=re*w+oe*f,q[j+1]=re*y+oe*d,q[j+2]=re*v+oe*_,q[j+3]=c*L+oe*m}M.putImageData(V,R.x,R.y)}}},Nt=new function(){var s="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",t="http://www.w3.org/1999/xlink",r={href:t,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function o(f,d,_){return c(g.createElementNS(s,f),d,_)}function l(f,d){var _=r[d],m=_?f.getAttributeNS(_,d):f.getAttribute(d);return m==="null"?null:m}function c(f,d,_){for(var m in d){var w=d[m],y=r[m];typeof w=="number"&&_&&(w=_.number(w)),y?f.setAttributeNS(y,m,w):f.setAttribute(m,w)}return f}return{svg:s,xmlns:e,xlink:t,create:o,get:l,set:c}},Tt=h.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(s,e){return!e&&(s instanceof Ae||s instanceof Fe||s instanceof Ut)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(s,e){var t=h.capitalize(e),r=s[2];this[e]={type:s[1],property:e,attribute:s[0],toSVG:r,fromSVG:r&&h.each(r,function(o,l){this[o]=l},{}),exportFilter:s[3],get:"get"+t,set:"set"+t}},{});new function(){var s;function e(b,S,x){var E=new h,I=b.getTranslation();if(S){var M;b.isInvertible()?(b=b._shiftless(),M=b._inverseTransform(I),I=null):M=new z,E[x?"cx":"x"]=M.x,E[x?"cy":"y"]=M.y}if(!b.isIdentity()){var L=b.decompose();if(L){var R=[],F=L.rotation,H=L.scaling,G=L.skewing;I&&!I.isZero()&&R.push("translate("+s.point(I)+")"),F&&R.push("rotate("+s.number(F)+")"),(!X.isZero(H.x-1)||!X.isZero(H.y-1))&&R.push("scale("+s.point(H)+")"),G.x&&R.push("skewX("+s.number(G.x)+")"),G.y&&R.push("skewY("+s.number(G.y)+")"),E.transform=R.join(" ")}else E.transform="matrix("+b.getValues().join(",")+")"}return E}function t(b,S){for(var x=e(b._matrix),E=b._children,I=Nt.create("g",x,s),M=0,L=E.length;M<L;M++){var R=E[M],F=N(R,S);if(F)if(R.isClipMask()){var H=Nt.create("clipPath");H.appendChild(F),C(R,H,"clip"),Nt.set(I,{"clip-path":"url(#"+H.id+")"})}else I.appendChild(F)}return I}function r(b,S){var x=e(b._matrix,!0),E=b.getSize(),I=b.getImage();return x.x-=E.width/2,x.y-=E.height/2,x.width=E.width,x.height=E.height,x.href=S.embedImages==!1&&I&&I.src||b.toDataURL(),Nt.create("image",x,s)}function o(b,S){var x=S.matchShapes;if(x){var E=b.toShape(!1);if(E)return l(E)}var I=b._segments,M=I.length,L,R=e(b._matrix);if(x&&M>=2&&!b.hasHandles())if(M>2){L=b._closed?"polygon":"polyline";for(var F=[],H=0;H<M;H++)F.push(s.point(I[H]._point));R.points=F.join(" ")}else{L="line";var G=I[0]._point,V=I[1]._point;R.set({x1:G.x,y1:G.y,x2:V.x,y2:V.y})}else L="path",R.d=b.getPathData(null,S.precision);return Nt.create(L,R,s)}function l(b){var S=b._type,x=b._radius,E=e(b._matrix,!0,S!=="rectangle");if(S==="rectangle"){S="rect";var I=b._size,M=I.width,L=I.height;E.x-=M/2,E.y-=L/2,E.width=M,E.height=L,x.isZero()&&(x=null)}return x&&(S==="circle"?E.r=x:(E.rx=x.width,E.ry=x.height)),Nt.create(S,E,s)}function c(b,S){var x=e(b._matrix),E=b.getPathData(null,S.precision);return E&&(x.d=E),Nt.create("path",x,s)}function f(b,S){var x=e(b._matrix,!0),E=b._definition,I=v(E,"symbol"),M=E._item,L=M.getStrokeBounds();return I||(I=Nt.create("symbol",{viewBox:s.rectangle(L)}),I.appendChild(N(M,S)),C(E,I,"symbol")),x.href="#"+I.id,x.x+=L.x,x.y+=L.y,x.width=L.width,x.height=L.height,x.overflow="visible",Nt.create("use",x,s)}function d(b){var S=v(b,"color");if(!S){var x=b.getGradient(),E=x._radial,I=b.getOrigin(),M=b.getDestination(),L;if(E){L={cx:I.x,cy:I.y,r:I.getDistance(M)};var R=b.getHighlight();R&&(L.fx=R.x,L.fy=R.y)}else L={x1:I.x,y1:I.y,x2:M.x,y2:M.y};L.gradientUnits="userSpaceOnUse",S=Nt.create((E?"radial":"linear")+"Gradient",L,s);for(var F=x._stops,H=0,G=F.length;H<G;H++){var V=F[H],q=V._color,Q=q.getAlpha(),j=V._offset;L={offset:j==null?H/(G-1):j},q&&(L["stop-color"]=q.toCSS(!0)),Q<1&&(L["stop-opacity"]=Q),S.appendChild(Nt.create("stop",L,s))}C(b,S,"color")}return"url(#"+S.id+")"}function _(b){var S=Nt.create("text",e(b._matrix,!0),s);return S.textContent=b._content,S}var m={Group:t,Layer:t,Raster:r,Path:o,Shape:l,CompoundPath:c,SymbolItem:f,PointText:_};function w(b,S,x){var E={},I=!x&&b.getParent(),M=[];return b._name!=null&&(E.id=b._name),h.each(Tt,function(L){var R=L.get,F=L.type,H=b[R]();if(L.exportFilter?L.exportFilter(b,H):!I||!h.equals(I[R](),H)){if(F==="color"&&H!=null){var G=H.getAlpha();G<1&&(E[L.attribute+"-opacity"]=G)}F==="style"?M.push(L.attribute+": "+H):E[L.attribute]=H==null?"none":F==="color"?H.gradient?d(H):H.toCSS(!0):F==="array"?H.join(","):F==="lookup"?L.toSVG[H]:H}}),M.length&&(E.style=M.join(";")),E.opacity===1&&delete E.opacity,b._visible||(E.visibility="hidden"),Nt.set(S,E,s)}var y;function v(b,S){return y||(y={ids:{},svgs:{}}),b&&y.svgs[S+"-"+(b._id||b.__id||(b.__id=ie.get("svg")))]}function C(b,S,x){y||v();var E=y.ids[x]=(y.ids[x]||0)+1;S.id=x+"-"+E,y.svgs[x+"-"+(b._id||b.__id)]=S}function T(b,S){var x=b,E=null;if(y){x=b.nodeName.toLowerCase()==="svg"&&b;for(var I in y.svgs)E||(x||(x=Nt.create("svg"),x.appendChild(b)),E=x.insertBefore(Nt.create("defs"),x.firstChild)),E.appendChild(y.svgs[I]);y=null}return S.asString?new i.XMLSerializer().serializeToString(x):x}function N(b,S,x){var E=m[b._class],I=E&&E(b,S);if(I){var M=S.onExport;M&&(I=M(b,I,S)||I);var L=JSON.stringify(b._data);L&&L!=="{}"&&L!=="null"&&I.setAttribute("data-paper-data",L)}return I&&w(b,I,x)}function k(b){return b||(b={}),s=new K(b.precision),b}B.inject({exportSVG:function(b){return b=k(b),T(N(this,b,!0),b)}}),we.inject({exportSVG:function(b){b=k(b);var S=this._children,x=this.getView(),E=h.pick(b.bounds,"view"),I=b.matrix||E==="view"&&x._matrix,M=I&&te.read([I]),L=E==="view"?new $([0,0],x.getViewSize()):E==="content"?B._getBounds(S,M,{stroke:!0}).rect:$.read([E],0,{readNull:!0}),R={version:"1.1",xmlns:Nt.svg,"xmlns:xlink":Nt.xlink};L&&(R.width=L.width,R.height=L.height,(L.x||L.x===0||L.y||L.y===0)&&(R.viewBox=s.rectangle(L)));var F=Nt.create("svg",R,s),H=F;M&&!M.isIdentity()&&(H=F.appendChild(Nt.create("g",e(M),s)));for(var G=0,V=S.length;G<V;G++)H.appendChild(N(S[G],b,!0));return T(F,b)}})},new function(){var s={},e;function t(S,x,E,I,M,L){var R=Nt.get(S,x)||L,F=R==null?I?null:E?"":0:E?R:parseFloat(R);return/%\s*$/.test(R)?F/100*(M?1:e[/x|^width/.test(x)?"width":"height"]):F}function r(S,x,E,I,M,L,R){return x=t(S,x||"x",!1,I,M,L),E=t(S,E||"y",!1,I,M,R),I&&(x==null||E==null)?null:new z(x,E)}function o(S,x,E,I,M){return x=t(S,x||"width",!1,I,M),E=t(S,E||"height",!1,I,M),I&&(x==null||E==null)?null:new ee(x,E)}function l(S,x,E){return S==="none"?null:x==="number"?parseFloat(S):x==="array"?S?S.split(/[\s,]+/g).map(parseFloat):[]:x==="color"?N(S)||S:x==="lookup"?E[S]:S}function c(S,x,E,I){var M=S.childNodes,L=x==="clippath",R=x==="defs",F=new Ne,H=F._project,G=H._currentStyle,V=[];if(!L&&!R&&(F=T(F,S,I),H._currentStyle=F._style.clone()),I)for(var q=S.querySelectorAll("defs"),Q=0,j=q.length;Q<j;Q++)k(q[Q],E,!1);for(var Q=0,j=M.length;Q<j;Q++){var Y=M[Q],re;Y.nodeType===1&&!/^defs$/i.test(Y.nodeName)&&(re=k(Y,E,!1))&&!(re instanceof Ke)&&V.push(re)}return F.addChildren(V),L&&(F=T(F.reduce(),S,I)),H._currentStyle=G,(L||R)&&(F.remove(),F=null),F}function f(S,x){for(var E=S.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),I=[],M=0,L=E.length;M<L;M+=2)I.push(new z(parseFloat(E[M]),parseFloat(E[M+1])));var R=new be(I);return x==="polygon"&&R.closePath(),R}function d(S){return Ae.create(S.getAttribute("d"))}function _(S,x){var E=(t(S,"href",!0)||"").substring(1),I=x==="radialgradient",M;if(E)M=s[E].getGradient(),M._radial^I&&(M=M.clone(),M._radial=I);else{for(var L=S.childNodes,R=[],F=0,H=L.length;F<H;F++){var G=L[F];G.nodeType===1&&R.push(T(new oi,G))}M=new qt(R,I)}var V,q,Q,j=t(S,"gradientUnits",!0)!=="userSpaceOnUse";I?(V=r(S,"cx","cy",!1,j,"50%","50%"),q=V.add(t(S,"r",!1,!1,j,"50%"),0),Q=r(S,"fx","fy",!0,j)):(V=r(S,"x1","y1",!1,j,"0%","0%"),q=r(S,"x2","y2",!1,j,"100%","0%"));var Y=T(new Qe(M,V,q,Q),S);return Y._scaleToBounds=j,null}var m={"#document":function(S,x,E,I){for(var M=S.childNodes,L=0,R=M.length;L<R;L++){var F=M[L];if(F.nodeType===1)return k(F,E,I)}},g:c,svg:c,clippath:c,polygon:f,polyline:f,path:d,lineargradient:_,radialgradient:_,image:function(S){var x=new Ve(t(S,"href",!0));return x.on("load",function(){var E=o(S);this.setSize(E);var I=r(S).add(E.divide(2));this._matrix.append(new te().translate(I))}),x},symbol:function(S,x,E,I){return new Ke(c(S,x,E,I),!0)},defs:c,use:function(S){var x=(t(S,"href",!0)||"").substring(1),E=s[x],I=r(S);return E?E instanceof Ke?E.place(I):E.clone().translate(I):null},circle:function(S){return new Fe.Circle(r(S,"cx","cy"),t(S,"r"))},ellipse:function(S){return new Fe.Ellipse({center:r(S,"cx","cy"),radius:o(S,"rx","ry")})},rect:function(S){return new Fe.Rectangle(new $(r(S),o(S)),o(S,"rx","ry"))},line:function(S){return new be.Line(r(S,"x1","y1"),r(S,"x2","y2"))},text:function(S){var x=new Gt(r(S).add(r(S,"dx","dy")));return x.setContent(S.textContent.trim()||""),x},switch:c};function w(S,x,E,I){if(S.transform){for(var M=(I.getAttribute(E)||"").split(/\)\s*/g),L=new te,R=0,F=M.length;R<F;R++){var H=M[R];if(!H)break;for(var G=H.split(/\(\s*/),V=G[0],q=G[1].split(/[\s,]+/g),Q=0,j=q.length;Q<j;Q++)q[Q]=parseFloat(q[Q]);switch(V){case"matrix":L.append(new te(q[0],q[1],q[2],q[3],q[4],q[5]));break;case"rotate":L.rotate(q[0],q[1]||0,q[2]||0);break;case"translate":L.translate(q[0],q[1]||0);break;case"scale":L.scale(q);break;case"skewX":L.skew(q[0],0);break;case"skewY":L.skew(0,q[0]);break}}S.transform(L)}}function y(S,x,E){var I=E==="fill-opacity"?"getFillColor":"getStrokeColor",M=S[I]&&S[I]();M&&M.setAlpha(parseFloat(x))}var v=h.set(h.each(Tt,function(S){this[S.attribute]=function(x,E){if(x[S.set]&&(x[S.set](l(E,S.type,S.fromSVG)),S.type==="color")){var I=x[S.get]();if(I&&I._scaleToBounds){var M=x.getBounds();I.transform(new te().translate(M.getPoint()).scale(M.getSize()))}}}},{}),{id:function(S,x){s[x]=S,S.setName&&S.setName(x)},"clip-path":function(S,x){var E=N(x);if(E)if(E=E.clone(),E.setClipMask(!0),S instanceof Ne)S.insertChild(0,E);else return new Ne(E,S)},gradientTransform:w,transform:w,"fill-opacity":y,"stroke-opacity":y,visibility:function(S,x){S.setVisible&&S.setVisible(x==="visible")},display:function(S,x){S.setVisible&&S.setVisible(x!==null)},"stop-color":function(S,x){S.setColor&&S.setColor(x)},"stop-opacity":function(S,x){S._color&&S._color.setAlpha(parseFloat(x))},offset:function(S,x){if(S.setOffset){var E=x.match(/(.*)%$/);S.setOffset(E?E[1]/100:parseFloat(x))}},viewBox:function(S,x,E,I,M){var L=new $(l(x,"array")),R=o(I,null,null,!0),F,H;if(S instanceof Ne){var G=R?R.divide(L.getSize()):1,H=new te().scale(G).translate(L.getPoint().negate());F=S}else S instanceof Ke&&(R&&L.setSize(R),F=S._item);if(F){if(C(I,"overflow",M)!=="visible"){var V=new Fe.Rectangle(L);V.setClipMask(!0),F.addChild(V)}H&&F.transform(H)}}});function C(S,x,E){var I=S.attributes[x],M=I&&I.value;if(!M&&S.style){var L=h.camelize(x);M=S.style[L],!M&&E.node[L]!==E.parent[L]&&(M=E.node[L])}return M?M==="none"?null:M:a}function T(S,x,E){var I=x.parentNode,M={node:je.getStyles(x)||{},parent:!E&&!/^defs$/i.test(I.tagName)&&je.getStyles(I)||{}};return h.each(v,function(L,R){var F=C(x,R,M);S=F!==a&&L(S,F,R,x,M)||S}),S}function N(S){var x=S&&S.match(/\((?:["'#]*)([^"')]+)/),E=x&&x[1],I=E&&s[u?E.replace(u.location.href.split("#")[0]+"#",""):E];return I&&I._scaleToBounds&&(I=I.clone(),I._scaleToBounds=!0),I}function k(S,x,E){var I=S.nodeName.toLowerCase(),M=I!=="#document",L=g.body,R,F,H;E&&M&&(e=rt.getView().getSize(),e=o(S,null,null,!0)||e,R=Nt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),F=S.parentNode,H=S.nextSibling,R.appendChild(S),L.appendChild(R));var G=rt.settings,V=G.applyMatrix,q=G.insertItems;G.applyMatrix=!1,G.insertItems=!1;var Q=m[I],j=Q&&Q(S,I,x,E)||null;if(G.insertItems=q,G.applyMatrix=V,j){M&&!(j instanceof Ne)&&(j=T(j,S,E));var Y=x.onImport,re=M&&S.getAttribute("data-paper-data");Y&&(j=Y(S,j,x)||j),x.expandShapes&&j instanceof Fe&&(j.remove(),j=j.toPath()),re&&(j._data=JSON.parse(re))}return R&&(L.removeChild(R),F&&(H?F.insertBefore(S,H):F.appendChild(S))),E&&(s={},j&&h.pick(x.applyMatrix,V)&&j.matrix.apply(!0,!0)),j}function b(S,x,E){if(!S)return null;x=typeof x=="function"?{onLoad:x}:x||{};var I=rt,M=null;function L(G){try{var V=typeof G=="object"?G:new i.DOMParser().parseFromString(G.trim(),"image/svg+xml");if(!V.nodeName)throw V=null,new Error("Unsupported SVG source: "+S);rt=I,M=k(V,x,!0),(!x||x.insert!==!1)&&E._insertItem(a,M);var q=x.onLoad;q&&q(M,G)}catch(Q){R(Q)}}function R(G,V){var q=x.onError;if(q)q(G,V);else throw new Error(G)}if(typeof S=="string"&&!/^[\s\S]*</.test(S)){var F=g.getElementById(S);F?L(F):Cn.request({url:S,async:!0,onLoad:L,onError:R})}else if(typeof File!="undefined"&&S instanceof File){var H=new FileReader;return H.onload=function(){L(H.result)},H.onerror=function(){R(H.error)},H.readAsText(S)}else L(S);return M}B.inject({importSVG:function(S,x){return b(S,x,this)}}),we.inject({importSVG:function(S,x){return this.activate(),b(S,x,this)}})};var rt=new(O.inject(h.exports,{Base:h,Numerical:X,Key:Sn,DomEvent:nt,DomElement:je,document:g,window:u,Symbol:Ke,PlacedSymbol:ot}));return rt.agent.node&&ja(rt),typeof a=="function"&&a.amd?a("paper",rt):n&&(n.exports=rt),rt}).call(Eu,typeof self=="object"?self:null)})(Xa);const b_={text:!1,trimmedCurve:!1,circle:!1,circleArc:!1,ellipse:!1,ellipseArc:!1,shape:!1,component:!1,line:!1,printIdMap:!1,highlightIds:!1};function Wn(){return b_}const E_={text:{red:0,green:0,blue:1,alpha:.5},trimmedCurve:{red:0,green:1,blue:0,alpha:.5},circle:{red:1,green:1,blue:0,alpha:.5},circleArc:{red:1,green:1,blue:0,alpha:.5},ellipse:{red:1,green:1,blue:0,alpha:.5},ellipseArc:{red:1,green:1,blue:0,alpha:.5},component:{red:.5,green:1,blue:1,alpha:.5},shape:{red:1,green:.5,blue:1,alpha:.5},line:{red:1,green:0,blue:0,alpha:.5}};function qn(){return E_}function Kn(n,i,a,u,g=0,h=0,P,O,D){var W;if((W=n==null?void 0:n.Extent)!=null&&W.length){const K=n.Extent[0].Max[0].x.valueAsNumber,X=n.Extent[0].Min[0].x.valueAsNumber,ie=(K-X)*i<1?1:(K-X)*i,z=n.Extent[0].Max[0].y.valueAsNumber,ue=n.Extent[0].Min[0].y.valueAsNumber,ee=(z-ue)*i<1?1:(z-ue)*i,ce=g*i+X*i,$=u*i-(z+h)*i;if(P){const J=wt().Shape,te=wt().Size,pe=wt().Color,we=new te(ie,ee),B=new J.Rectangle(new Xa.exports.Point(ce,$),we);B.fillColor=new pe(O),B.onClick=()=>{D.publicEvent("onClick",n)},B.bringToFront()}return[ce,$,ie,ee]}else return[0,0,0,0]}function k_(n,i,a,u,g=0,h=0,P,O,D){var ue,ee,ce;const W=wt().Point,K=wt().Path,X=wt().Color,ie=[];if(!Array.isArray(n.Coordinate)||n.Coordinate.length===0){((ue=n.numPoints)==null?void 0:ue.valueAsNumber)!==0&&console.warn("line element without coordinate");return}n.Coordinate.forEach($=>{const J=$.x.valueAsNumber+g,te=$.y.valueAsNumber+h,pe=new W(J*i,u*i-te*i);ie.push(pe)});const z=new K(ie);switch(z.strokeColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value}),(ee=n.Presentation[0].lineType)==null?void 0:ee.valueAsString){case"0":break;case"Solid":break;case"1":z.dashArray=[.3,.3];case"Dotted":z.dashArray=[.3,.3];break;case"2":z.dashArray=[2,.5];case"Dashed":z.dashArray=[2,.5];break;case"3":z.dashArray=[4,.5];case"Long Dash":z.dashArray=[4,.5];break;case"4":z.dashArray=[4,.5,1,.5];break;case"Long Dash + Short Dash, CenterLine":z.dashArray=[15,1,.5,1,.5,1];break;case"5":z.dashArray=[1,.5];break;case"Short Dash":z.dashArray=[1,.5];break;case"6":z.dashArray=[4,.5,1,.5,1,.5];break;case"Long Dash + Short Dash + Short Dash":z.dashArray=[4,1,1,1,1,1];break;case"7":z.dashArray=[2,.5,1,.5];break;case"Dash + Short Dash":z.dashArray=[2,.5,1,.5];break;default:((ce=n.Presentation[0].lineType)==null?void 0:ce.valueAsString)!==void 0&&console.error("unknown linetype",n)}z.strokeWidth=n.Presentation[0].lineWeight.valueAsNumber*i,P?P.addChild(z):z.onClick=function(){D.publicEvent("onClick",n)},Kn(n,i,a,u,g,h,Wn().line,qn().line,D)}function N_(n,i,a,u,g=0,h=0,P,O,D){const W=wt().Point,K=wt().Path,X=wt().Color,ie=[];n.Coordinate.forEach(ue=>{const ee=ue.x.valueAsNumber+g,ce=ue.y.valueAsNumber+h,$=new W(ee*i,u*i-ce*i);ie.push($)});const z=new K(ie);P?P.addChild(z):z.onClick=function(){D.publicEvent("onClick",n)},z.strokeColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value}),z.strokeWidth=n.Presentation[0].lineWeight.valueAsNumber*i,n.filled&&(z.fillColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value})),Kn(n,i,a,u,g,h,Wn().shape,qn().shape,D)}function T_(n,i,a,u,g=0,h=0,P,O,D){var ce;const W=wt().Point,K=wt().Path,X=wt().Color,ie=n.Position[0].Location[0].x.valueAsNumber+g,z=n.Position[0].Location[0].y.valueAsNumber+h,ue=new W(ie*i,u*i-z*i),ee=new K.Circle(ue,n.radius.valueAsNumber*i);P?P.addChild(ee):ee.onClick=function(){D.publicEvent("onClick",n)},ee.strokeColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value}),ee.strokeWidth=n.Presentation[0].lineWeight.valueAsNumber*i,(ce=n.filled)!=null&&ce.value&&(ee.fillColor=new X("black")),Kn(n,i,a,u,g,h,Wn().circle,qn().circleArc,D)}function P_(n,i,a,u,g=0,h=0,P,O,D){var ot,Ke,st,Ee,bt,le,lt,Ae,be,Be,it,ut,Ut,Gt;const W=wt().PointText,K=wt().Point,X=wt().Color,ie=wt().Shape,z=wt().Size;let ue=!0;if(!((ot=n.Position[0])!=null&&ot.Location)){console.warn("unexpected missing location element on text, skipping text",(Ke=n==null?void 0:n.string)==null?void 0:Ke.valueAsString,n);return}if((st=n.Extent[0])!=null&&st.Max||(ue=!1),!n.Presentation[0]){console.warn("unexpected missing Presentation element on text, skipping text",(Ee=n==null?void 0:n.string)==null?void 0:Ee.valueAsString,n);return}if((bt=n.Presentation[0].layer)!=null&&bt.valueAsString.toUpperCase().includes("HIDDEN"))return;const[ee,ce,$,J]=Kn(n,i,a,u,g,h,Wn().text,qn().text,D),te=(n.Position[0].Location[0].x.valueAsNumber+g)*i,pe=u*i-(n.Position[0].Location[0].y.valueAsNumber+h)*i,we=new K(te,pe),B=new z($,J),Ne=new ie.Rectangle(new K(ee,ce),B),Pe=new W(new K(te,pe));if(Pe.content=(le=n.string)==null?void 0:le.valueAsString,Pe.content==="undefined"&&n.attributes.DependantAttribute&&n.attributes.ItemID){const Qe=g_(n.attributes.ItemID);Qe&&Qe.GenericAttributes.forEach(qt=>{qt.GenericAttribute.forEach(oi=>{`[${oi.attributes.Name}]`===n.attributes.DependantAttribute&&(Pe.content=oi.attributes.Value)})}),Pe.content==="undefined"&&console.warn("dependable attribute:",n.attributes.DependantAttribute,"not found in ",n)}Pe.fontSize=n.height.valueAsNumber*i,Pe.fontFamily=n.font.valueAsString,((lt=n.textAngle)==null?void 0:lt.valueAsNumber)>0&&Pe.rotate(-n.textAngle.valueAsNumber,new K(te,pe)),((Ae=n.slantAngle)==null?void 0:Ae.valueAsNumber)>0&&console.warn("Text slantAngle not implemented",n);const Fe=(it=(Be=(be=n.Position[0])==null?void 0:be.Reference[0])==null?void 0:Be.x)==null?void 0:it.valueAsNumber;Fe&&Fe!==1&&Pe.rotate(-(Fe/(Math.PI/180))*Math.PI,we);const Ve=(Gt=(Ut=(ut=n.Position[0])==null?void 0:ut.Reference[0])==null?void 0:Ut.y)==null?void 0:Gt.valueAsNumber;Ve&&Ve!==0&&Pe.rotate(-(Ve/(Math.PI/90))*Math.PI,we),ue?(Pe.bounds.y=Ne.bounds.y,Pe.bounds.x=Ne.bounds.x,Pe.fitBounds(Ne.bounds)):n.height.valueAsNumber&&n.height.valueAsNumber!==n.width.valueAsNumber&&(Pe.bounds.height=n.height.valueAsNumber),Pe.fillColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value}),P?P.addChild(Pe):Pe.onClick=function(){D.publicEvent("onClick",n)}}function I_(n,i,a,u,g=0,h=0,P,O,D){Cf(n).forEach(K=>{var X,ie,z,ue;if(K.element.tagName==="Circle"){const ee=wt().Point,ce=wt().Path,$=wt().Color,J=K,te=J.Position[0].Location[0].x.valueAsNumber+g,pe=J.Position[0].Location[0].y.valueAsNumber+h,we=J.Position[0].Reference[0].x.valueAsNumber,B=J.Position[0].Reference[0].y.valueAsNumber,Ne=J.Position[0].Axis[0].y.valueAsNumber===-1,Pe=new ee(te*i,u*i-pe*i),Fe=J.radius.valueAsNumber*i,Ve=-((X=n.startAngle)==null?void 0:X.valueAsNumber)||0,ot=-((ie=n.endAngle)==null?void 0:ie.valueAsNumber)||0,Ke=new ee(Fe,0);Ke.angle=Ve;const st=new ee(Fe,0);st.angle=ot;const Ee=new ee(Fe,0),bt=ot-Ve;Ee.angle=Ve+bt/2;const le=new ce.Arc(Ke,Ee,st);le.strokeColor=new $({red:J.Presentation[0].r.value,green:J.Presentation[0].g.value,blue:J.Presentation[0].b.value}),le.strokeWidth=J.Presentation[0].lineWeight.valueAsNumber*i,le.translate(Pe),we<0&&le.rotate(we/(Math.PI/180)*Math.PI,Pe),B&&B!==0&&le.rotate(-(B/(Math.PI/90))*Math.PI,Pe),Ne&&console.log("not implented flipY",n,we,B,Ne),P?P.addChild(le):le.onClick=function(){console.log(n)},Kn(J,i,a,u,g,h,Wn().circleArc,qn().circleArc,D)}if(K.element.tagName==="Ellipse"){const ee=wt().Point,ce=wt().Path,$=wt().Color,J=K,te=J.Position[0].Location[0].x.valueAsNumber+g,pe=J.Position[0].Location[0].y.valueAsNumber+h,we=J.Position[0].Reference[0].x.valueAsNumber,B=J.Position[0].Reference[0].y.valueAsNumber,Ne=new ee(te*i,u*i-pe*i),Pe=J.primaryAxis.valueAsNumber*i,Fe=-((z=n.startAngle)==null?void 0:z.valueAsNumber)||0,Ve=-((ue=n.endAngle)==null?void 0:ue.valueAsNumber)||0,ot=new ee(Pe,0);ot.angle=Fe;const Ke=new ee(Pe,0);Ke.angle=Ve;const st=new ee(Pe,0),Ee=Ve-Fe;st.angle=Fe+Ee/2;const bt=new ce.Arc(ot,st,Ke);bt.strokeColor=new $({red:J.Presentation[0].r.value,green:J.Presentation[0].g.value,blue:J.Presentation[0].b.value}),bt.strokeWidth=J.Presentation[0].lineWeight.valueAsNumber*i,bt.translate(Ne),bt.scale(1,J.secondaryAxis.valueAsNumber*i/Pe,Ne),we<0&&bt.rotate(we/(Math.PI/180)*Math.PI,Ne),B&&B!==0&&bt.rotate(-(B/(Math.PI/90))*Math.PI,Ne);const le=J.Position[0].Axis[0].z.valueAsNumber===-1;le&&console.log("not implented flipY",n,we,B,le),P?P.addChild(bt):bt.onClick=function(){D.publicEvent("onClick",n)},Kn(J,i,a,u,g,h,Wn().ellipseArc,qn().ellipseArc,D)}})}function A_(n,i,a,u,g=0,h=0,P,O,D){var B,Ne,Pe,Fe,Ve,ot,Ke;const W=wt().Point,K=wt().Path,X=wt().Color,ie=wt().Size,z=wt().Rectangle,ue=n.Position[0].Location[0].x.valueAsNumber+g,ee=n.Position[0].Location[0].y.valueAsNumber+h,ce=new W(ue*i,u*i-ee*i),$=new z(ce,new ie(n.primaryAxis.valueAsNumber*i,n.secondaryAxis.valueAsNumber*i)),J=new K.Ellipse($),te=(Pe=(Ne=(B=n.Position[0])==null?void 0:B.Reference[0])==null?void 0:Ne.x)==null?void 0:Pe.valueAsNumber;te&&te!==1&&J.rotate(-(te/(Math.PI/180))*Math.PI,ce);const pe=(ot=(Ve=(Fe=n.Position[0])==null?void 0:Fe.Reference[0])==null?void 0:Ve.y)==null?void 0:ot.valueAsNumber;pe&&pe!==0&&J.rotate(-(pe/(Math.PI/90))*Math.PI,ce);const we=n.Position[0].Axis[0].z.valueAsNumber===-1;we&&console.log("not implented flipY",n,te,pe,we),P?P.addChild(J):J.onClick=function(){D.publicEvent("onClick",n)},J.strokeColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value}),J.strokeWidth=n.Presentation[0].lineWeight.valueAsNumber*i,(Ke=n.filled)!=null&&Ke.value&&(J.fillColor=new X("black")),Kn(n,i,a,u,g,h,Wn().circle,qn().circleArc,D)}class Iu{constructor(i,a,u){var h,P,O;this.element=i,this.isShapeCatalogChild=a,this.parent=u,this.isChild=!0,this.attributes={},this.GenericAttributes=[],this.GenericAttribute=[],this.genericAttributes={},this.Position=[],this.Extent=[],this.Presentation=[],this.Scale=[],this.elementTagName=this.element.tagName,this.elementTagName==="ShapeCatalogue"&&(this.isShapeCatalogChild=!0);for(let D=0;D<this.element.children.length;D++){const W=this.element.children[D],K=W.tagName,X=this;X[K]||(X[K]=[]);const ie=new Iu(W,this.isShapeCatalogChild,this);X[K].push(ie)}i.getAttributeNames().forEach(D=>{const W=this,K=D[0].toLowerCase()+D.substring(1,D.length);W[K]=new __(i,D,this)}),this.GenericAttribute.length&&this.GenericAttribute.forEach(D=>{this.genericAttributes[D.attributes.Name]=D.attributes.Value}),this.GenericAttributes.length&&this.GenericAttributes.forEach((D,W)=>{this.genericAttributes[`${W+1}: ${D.attributes.Set||""}`]=D.genericAttributes}),this.elementTagName!=="ShapeCatalogue"&&this.isShapeCatalogChild&&(h=this.componentName)!=null&&h.value&&m_((P=this.componentName)==null?void 0:P.value,this),(O=this.iD)!=null&&O.valueAsString&&p_(this.iD.valueAsString,this)}draw(i,a,u,g=0,h=0,P,O,D){var K,X,ie,z,ue,ee,ce,$,J,te,pe,we,B,Ne,Pe,Fe,Ve,ot,Ke,st;if(this.elementTagName==="ShapeCatalogue")return;if(this.elementTagName==="TrimmedCurve"){I_(this,i,a,u,g,h,P,O,D);return}if(Cf(this).forEach(Ee=>{Ee.draw(i,a,u,g,h,P,this,D)}),((K=this.componentName)==null?void 0:K.value)&&((X=this.Position)==null?void 0:X.length)){const Ee=v_(this.componentName.value);if(Ee&&Ee!==this){const bt=wt().Group,le=new bt;this.shapeCatalogItem=Ee;const lt=this;le.onClick=function(){D.publicEvent("onClick",lt)};const Ae=this.Position[0].Location[0].x.valueAsNumber+g,be=this.Position[0].Location[0].y.valueAsNumber+h,Be=new Xa.exports.Point(Ae*i,u*i-be*i);if(typeof Ee.draw=="function"&&Ee.draw(i,a,u,Ae+g,be+h,le,this,D),this.Scale.length){const Gt=parseFloat(this.Scale[0].attributes.X),Qe=parseFloat(this.Scale[0].attributes.Y);(Gt!==1||Qe!==1)&&le.scale(Gt,Qe,Be)}const it=(ue=(z=(ie=this.Position[0])==null?void 0:ie.Reference[0])==null?void 0:z.x)==null?void 0:ue.valueAsNumber;it&&it!==1&&le.rotate(-(it/(Math.PI/180))*Math.PI,Be);const ut=($=(ce=(ee=this.Position[0])==null?void 0:ee.Reference[0])==null?void 0:ce.y)==null?void 0:$.valueAsNumber;ut&&ut!==0&&le.rotate(-(ut/(Math.PI/90))*Math.PI,Be),((pe=(te=(J=this.Position[0])==null?void 0:J.Axis[0])==null?void 0:te.z)==null?void 0:pe.valueAsNumber)===-1&&le.scale(1,-1,Be),Kn(this,i,a,u,g,h,Wn().component,qn().component,D)}else if(P){const bt=this.Position[0].Location[0].x.valueAsNumber+g,le=this.Position[0].Location[0].y.valueAsNumber+h,lt=new Xa.exports.Point(bt*i,u*i-le*i);if(this.Scale.length){const it=parseFloat(this.Scale[0].attributes.X),ut=parseFloat(this.Scale[0].attributes.Y);(it!==1||ut!==1)&&P.scale(it,ut,lt)}const Ae=(Ne=(B=(we=this.Position[0])==null?void 0:we.Reference[0])==null?void 0:B.x)==null?void 0:Ne.valueAsNumber;Ae&&Ae!==1&&P.rotate(-(Ae/(Math.PI/180))*Math.PI,lt);const be=(Ve=(Fe=(Pe=this.Position[0])==null?void 0:Pe.Reference[0])==null?void 0:Fe.y)==null?void 0:Ve.valueAsNumber;be&&be!==0&&P.rotate(-(be/(Math.PI/90))*Math.PI,lt),((st=(Ke=(ot=this.Position[0])==null?void 0:ot.Axis[0])==null?void 0:Ke.z)==null?void 0:st.valueAsNumber)===-1&&P.scale(1,-1,lt)}}(this.elementTagName==="Line"||this.elementTagName==="PolyLine"||this.elementTagName==="CenterLine")&&k_(this,i,a,u,g,h,P,O,D),this.elementTagName==="BsplineCurve"&&console.warn("BsplineCurve not implemented",this),this.elementTagName==="CompositeCurve"&&console.warn("CompositeCurve not implemented",this),this.elementTagName==="Circle"&&T_(this,i,a,u,g,h,P,O,D),this.elementTagName==="Ellipse"&&A_(this,i,a,u,g,h,P,O,D),this.elementTagName==="Shape"&&N_(this,i,a,u,g,h,P,O,D),this.elementTagName==="Text"&&P_(this,i,a,u,g,h,P,O,D)}}class L_{constructor(i,a){this.subscribers=new Set,this.root=!0,this.xml=new window.DOMParser().parseFromString(i,"text/xml"),this.canvas=document.getElementById(a),f_(),C_(a);const u=this.xml.getElementsByTagName("PlantModel")[0];if(!u){alert("missing plantmodel");return}this.PlantModel=new Iu(u,!1)}getSchemaLocation(){const i=this.xml.getElementsByTagName("PlantModel")[0];if(i){const a=i.getAttribute("xsi:schemaLocation");if(a)return a;const u=i.getAttribute("xsi:noNamespaceSchemaLocation");if(u)return u}return null}getSchemaVersion(){const i=this.xml.getElementsByTagName("PlantInformation")[0];if(i){const a=i.getAttribute("SchemaVersion");if(a)return a}return null}addEventListener(i){this.subscribers.add(i)}removeEventListener(i){this.subscribers.delete(i)}publicEvent(i,a){this.subscribers.forEach(u=>{u.handleEvent({type:i,data:a})})}draw(){var O,D,W,K,X,ie,z;wt().project.activeLayer.removeChildren(),wt().view.requestUpdate();const i=["Metre","mm","Millimetre"],a=this.PlantModel.PlantInformation[0].units.value;i.includes(a)||console.warn("I need to add more here",this.PlantModel.PlantInformation[0].units.value);let u=1.5;switch(!0){case a==="Metre":u=1500;break}if(!Array.isArray(this.PlantModel.Drawing)||this.PlantModel.Drawing[0].length===0){const ue=(D=(O=this.PlantModel.Extent[0])==null?void 0:O.Max[0])==null?void 0:D.x.valueAsNumber,ee=(K=(W=this.PlantModel.Extent[0])==null?void 0:W.Max[0])==null?void 0:K.y.valueAsNumber;u===1.5?(console.warn(`No drawing element, using x:${ue|1261.5}, y:${ee|891}`,this.PlantModel),this.PlantModel.draw(u,ue||1261.5,ee||891,0,0)):(console.warn(`No drawing element, using x:${ue|.12615}, y:${ee|.891}`,this.PlantModel),this.PlantModel.draw(u,ue||.12615,ee||.891,0,0));return}const g=(X=this.PlantModel.Drawing[0])==null?void 0:X.Presentation[0];(ie=g==null?void 0:g.attributes)!=null&&ie.Color?this.canvas.style.backgroundColor=(z=g==null?void 0:g.attributes)==null?void 0:z.Color:this.canvas.style.backgroundColor="white";const h=this.PlantModel.Drawing[0].Extent[0].Max[0].x.valueAsNumber,P=this.PlantModel.Drawing[0].Extent[0].Max[0].y.valueAsNumber;this.PlantModel.draw(u,h,P,0,0,null,this,this)}}const Ss={EQUAL:"equal_to",LESS_THAN_OR_EQUAL_TO:"less_or_equal",GREATER_THAN_OR_EQUAL_TO:"greater_than_or_equal",LESS_THAN:"less_than",GREATER_THAN:"greater_than",CONTAINS:"contains",NOT_EQUAL_TO:"not_equal_to",DOES_NOT_CONTAIN:"does_not_contain",BEGIN_WITH:"start_with",END_WITH:"end_with",IN:"IN",NOT_IN:"NOT_IN",IS_BLANK:"IS_BLANK",IS_NOT_BLANK:"IS_NOT_BLANK"};class O_{constructor(i,a=!1){this.__editedProps={},this.__originalValues={},this.__currentValues={},this.__newprops={},this.__isNew=!1,this.__edited=!1,this.__KEYSTRING=i,this.__isNew=a}get(i,a){return a==="__controller"?this:["__KEY","__group","__groupID","__groupName","__groupLvl","__groupTotal","__groupChildren","__groupExpanded"].indexOf(a)>-1?a==="__KEY"&&this.__KEYSTRING?i[this.__KEYSTRING]:this[a]:i[a]}set(i,a,u){let g=!0;if(a[0]==="_"&&a[1]==="_"&&(g=!1,["__KEY","__group","__groupID","__groupName","__groupLvl","__groupTotal","__groupChildren","__groupExpanded"].indexOf(a)>-1))if(a==="__KEY"){if(this.__KEYSTRING)return i[this.__KEYSTRING]=u;this[a]=u}else this[a]=u;if(g){this.__newprops.hasOwnProperty(a)||(this.__originalValues[a]=i[a],this.__newprops[a]=!0),!this.__editedProps.hasOwnProperty(a)&&!this.__isNew?(this.__originalValues[a]=i[a],this.__editedProps[a]=!0):this.__editedProps[a]=!0;let h=this.__originalValues[a],P=u;if(h instanceof Date)try{h=new Date(new Date(h).getFullYear(),new Date(h).getMonth(),new Date(h).getDate(),0,0,0,0)}catch(O){h=null}P instanceof Date&&(P=new Date(new Date(P).getFullYear(),new Date(P).getMonth(),new Date(P).getDate(),0,0,0,0)),(h===P||h==null&&P==="")&&(this.__editedProps[a]=!1),this.__currentValues[a]=u,i[a]=u,this.__edited=Object.values(this.__editedProps).includes(!0),this.__currentValues[a]=u,i[a]=u}return!0}}function jh(n,i){let a=!0,u,g,h=i.operator,P,O=i.type||"text";if(i.value instanceof Date&&(O="date"),Number(i.value)===i.value&&(O="number"),u=n[i.attribute],h==="IS_BLANK")return!!(O==="date"&&u&&typeof u=="object"&&u.toString&&u.toString()==="Invalid Date"||u===""||u===0||u===null||u===void 0);if(h==="IS_NOT_BLANK")return!(O==="date"&&u&&typeof u=="object"&&u.toString&&u.toString()==="Invalid Date"||u===""||u===0||u===null||u===void 0);const D={true:!0,false:!1};switch(O){case"date":try{u=new Date(new Date(u).getFullYear(),new Date(u).getMonth(),new Date(u).getDate(),0,0,0,0),u=u.getTime()}catch(W){u=u}try{g=new Date(new Date(i.value).getFullYear(),new Date(i.value).getMonth(),new Date(i.value).getDate(),0,0,0,0),g=g.getTime()}catch(W){g=i.value}h==="END_WITH"&&(h="LESS_THAN_OR_EQUAL_TO"),h==="DOES_NOT_CONTAIN"&&(h="LESS_THAN"),h!=="EQUAL"&&h!=="NOT_EQUAL_TO"&&h!=="GREATER_THAN"&&h!=="GREATER_THAN_OR_EQUAL_TO"&&h!=="LESS_THAN"&&h!=="LESS_THAN_OR_EQUAL_TO"&&(h="GREATER_THAN_OR_EQUAL_TO");break;case"number":g=Number(i.value),g||(g=0);try{u=isNaN(Number(u))?0:Number(u)}catch(W){u=u}h==="END_WITH"&&(h="LESS_THAN_OR_EQUAL_TO"),h==="DOES_NOT_CONTAIN"&&(h="LESS_THAN"),h!=="EQUAL"&&h!=="NOT_EQUAL_TO"&&h!=="GREATER_THAN"&&h!=="GREATER_THAN_OR_EQUAL_TO"&&h!=="LESS_THAN"&&h!=="LESS_THAN_OR_EQUAL_TO"&&(h="GREATER_THAN_OR_EQUAL_TO");break;case"text":switch(u==null?u="":(u=u+"",u=u.toLowerCase()),g=i.value.toLowerCase(),h=h||"BEGIN_WITH",P=h,h){case"BEGIN_WITH":P="REGEX",g=new RegExp(`^${g.replace(/\*/g,".*").replace(/\%/g,".*")}.*`,"gim");break;case"CONTAINS":P="REGEX",g=new RegExp(`.*${g.replace(/\*/g,".*").replace(/\%/g,".*")}.*`,"gim");break;case"END_WITH":P="REGEX",g=new RegExp(`.*${g.replace(/\*/g,".*").replace(/\%/g,".*")}$`,"gim");break;case"DOES_NOT_CONTAIN":P="REGEX-NOT",g=new RegExp(`.*${g.replace(/\*/g,".*").replace(/\%/g,".*")}`,"gim");break;case"NOT_EQUAL_TO":P="REGEX-NOT";let W="";(g[0]!=="*"||g[0]!=="%")&&(W="^");let K="";(g[g.length]!=="*"||g[g.length]!=="%")&&(K="$"),g=new RegExp(`${W}${g.replace(/\*/g,".*").replace(/\%/g,".*")}${K}`,"gim");break;default:if(g.split("*").length>1||g.split("%").length>1){P="REGEX";let X="";(g[0]!=="*"||g[0]!=="%")&&(X="^");let ie="";(g[g.length]!=="*"||g[g.length]!=="%")&&(ie="$"),g=new RegExp(`${X}${g.replace(/\*/g,".*").replace(/\%/g,".*")}${ie}`,"gim")}}h!==P&&(h=P);break;case"boolean":g=D[i.value],h="EQUAL";break;default:try{u=u.toLowerCase()}catch(W){u=u}try{g=i.value.toLowerCase()}catch(W){g=i.value}h=h||"EQUAL";break}switch(h){case"REGEX":g.test(u)||(a=!1);break;case"REGEX-NOT":g.test(u)&&(a=!1);break;case"EQUAL":u!==g&&(a=!1);break;case"LESS_THAN_OR_EQUAL_TO":u<=g||(a=!1);break;case"GREATER_THAN_OR_EQUAL_TO":u>=g||(a=!1);break;case"LESS_THAN":u<g||(a=!1);break;case"GREATER_THAN":u>g||(a=!1);break;case"CONTAINS":u.indexOf(g)===-1&&(a=!1);break;case"NOT_EQUAL_TO":u===g&&(a=!1);break;case"DOES_NOT_CONTAIN":u.indexOf(g)!==-1&&(a=!1);break;case"BEGIN_WITH":u.substring(0,g.length)!==g&&(a=!1);break;case"END_WITH":u.substring(u.length-g.length,u.length)!==g&&(a=!1);break;default:u!==g&&(a=!1)}return a}class M_{constructor(){this.currentFilter=null}getFilter(){return this.currentFilter}setFilter(i){this.currentFilter=i}getFilterFromType(i){switch(i){case"date":case"number":return"GREATER_THAN";case"bool":return"EQUAL";default:return"BEGIN_WITH"}}filter(i,a,u){var g;this.currentFilter=a;const h=Array.isArray(a)&&a.length===0;return!a||h||(a==null?void 0:a.type)==="GROUP"&&Array.isArray(a==null?void 0:a.filterArguments)&&((g=a==null?void 0:a.filterArguments)===null||g===void 0?void 0:g.length)===0?i.slice():i.filter(O=>a.logicalOperator==="AND"?this.andStatement(O,a,u):this.orStatement(O,a,u))}orStatement(i,a,u){if(Array.isArray(a.filterArguments))for(let g=0;g<a.filterArguments.length;g++){const h=a.filterArguments[g];if(h.logicalOperator==="AND"&&this.andStatement(i,h,u)||h.logicalOperator==="OR"&&this.orStatement(i,h,u))return!0;if(h.logicalOperator==="NONE"||h.logicalOperator===null||h.logicalOperator==null){let P=h.value;h.valueType==="ATTRIBUTE"&&(typeof h.value=="string"?P=i[h.value]:console.error("filtervalue needs to be string if you are comparing attributes"));let O=!1;if(h.operator==="IN"||h.operator==="NOT_IN"){let D=h.value;if(!Array.isArray(h.value)){if(typeof h.value!="string")return!1;D=h.value.toUpperCase().split(`
`),h.value=D}let W;h.attributeType==="date"&&i?W=u.getDateFormater().fromDate(i[h.attribute]):h.attributeType==="number"&&i?W=u.getNumberFormater().fromNumber(i[h.attribute]):i&&i[h.attribute]!==null&&i[h.attribute]!==void 0&&(W=i&&i[h.attribute],W&&W.toUpperCase&&(W=W.toUpperCase()));let K;W==null||W===""||W===0?K=D.indexOf("NULL"):K=D.indexOf(W),K!==-1&&h.operator==="IN"&&(O=!0),K===-1&&h.operator==="NOT_IN"&&(O=!0)}else O=jh(i,{value:P,operator:h.operator,attribute:h.attribute,type:h.attributeType});if(O)return!0}}return!1}andStatement(i,a,u){if(Array.isArray(a.filterArguments))for(let g=0;g<a.filterArguments.length;g++){const h=a.filterArguments[g];if(h.logicalOperator==="AND"&&!this.andStatement(i,h,u)||h.logicalOperator==="OR"&&!this.orStatement(i,h,u))return!1;if(h.logicalOperator==="NONE"||h.logicalOperator===null||h.logicalOperator==null){let P=h.value;h.valueType==="ATTRIBUTE"&&(typeof h.value=="string"?P=i[h.value]:console.error("filtervalue needs to be string if you are comparing attributes"));let O=!1;if(h.operator==="IN"||h.operator==="NOT_IN"){let D=h.value;if(!Array.isArray(h.value)){if(typeof h.value!="string")return!1;D=h.value.toUpperCase().split(`
`),h.value=D}let W;h.attributeType==="date"&&i?W=u.getDateFormater().fromDate(i[h.attribute]):h.attributeType==="number"&&i?W=u.getNumberFormater().fromNumber(i[h.attribute]):i&&i[h.attribute]!==null&&i[h.attribute]!==void 0&&(W=i&&i[h.attribute],W&&W.toUpperCase&&(W=W.toUpperCase()));let K;W==null||W===""||W===0?K=D.indexOf("NULL"):K=D.indexOf(W),K!==-1&&h.operator==="IN"&&(O=!0),K===-1&&h.operator==="NOT_IN"&&(O=!0)}else O=jh(i,{value:P,operator:h.operator,attribute:h.attribute,type:h.attributeType});if(!O)return!1}}return!0}}class R_{constructor(){this.dates=[],this.lastSorting=[],this.currentSorting=[],this.localeCompareCode=null}setDateAttribute(i=[]){this.dates=i}setLocaleCompare(i,a){this.localeCompareCode=new Intl.Collator(i,a)}reset(i){i?(this.lastSorting=[{attribute:i,ascending:!0}],this.currentSorting=[{attribute:i,ascending:!0}]):(this.lastSorting=[],this.currentSorting=[])}overrideSort(i){this.lastSorting=i,this.currentSorting=i}getLastSort(){return this.lastSorting}setOrderBy(i,a){if(Array.isArray(i))this.lastSorting=i,this.currentSorting=i;else if(a&&this.lastSorting.length>0){this.currentSorting=this.lastSorting;let u=!1;this.currentSorting.forEach(g=>{g.attribute===i.attribute&&(u=!0,g.ascending=i.ascending)}),u||this.currentSorting.push(i),this.lastSorting=this.currentSorting}else this.currentSorting=[i],this.lastSorting=this.currentSorting}getOrderBy(){return this.currentSorting}runOrderBy(i){const a=this.getOrderBy();i.sort((u,g)=>{let h=0;for(let P=0;P<a.length&&h===0;++P){const O=a[P],D=this.dates.indexOf(O.attribute)!==-1,W=u[O.attribute]||"",K=g[O.attribute]||"",X=(ie,z)=>{let ue=null;return this.localeCompareCode?ue=this.localeCompareCode.compare(ie,z):ue=ie.localeCompare(z),ue};if(h=0,W!==K)if(O.ascending===!0)if(D){let ie=-1;W&&W.getTime&&(ie=new Date(new Date(W).getFullYear(),new Date(W).getMonth(),new Date(W).getDate(),0,0,0,0).getTime()||0);let z=0;K&&K.getTime&&(z=new Date(new Date(K).getFullYear(),new Date(K).getMonth(),new Date(K).getDate(),0,0,0,0).getTime()||0),ie<z&&(h=-1),ie>z&&(h=1)}else typeof W=="string"&&typeof W=="string"?X(W,K)<0&&X(W,K)!==0?h=-1:h=1:(W<K&&(h=-1),W>K&&(h=1));else if(D){let ie=-1;W&&W.getTime&&(ie=new Date(new Date(W).getFullYear(),new Date(W).getMonth(),new Date(W).getDate(),0,0,0,0).getTime()||0);let z=0;K&&K.getTime&&(z=new Date(new Date(K).getFullYear(),new Date(K).getMonth(),new Date(K).getDate(),0,0,0,0).getTime()||0),ie<z&&(h=1),ie>z&&(h=-1)}else typeof W=="string"&&typeof W=="string"?X(W,K)<0&&X(W,K)!==0?h=1:h=-1:(W<K&&(h=1),W>K&&(h=-1))}return h}),this.lastSorting=this.getOrderBy().slice(0)}}class z_{constructor(){this.groupingConfig=[],this.expandedGroupIDs=new Set([])}reset(){this.currentGroups=[],this.groupingConfig=[],this.expandedGroupIDs=new Set([])}group(i,a,u,g){if(a.length>0){u||(this.expandedGroupIDs=new Set([]));const h=[];return a.forEach((P,O)=>{if(O===0){const D=this.createMainGrouping(i,P.attribute,O,P.title,g);h.push(D)}else{const D=h[h.length-1],W=this.groupChildren(D,P.attribute,O,P.title,g);h.push(W)}}),this.currentGroups=h,this.groupingConfig=a,u?this.expandOneOrAll(null,this.expandedGroupIDs):h[0]}else return i.forEach(h=>{h.__groupLvl=0}),this.groupingConfig=[],i}getExpanded(){return Array.from(this.expandedGroupIDs)}setExpanded(i){this.expandedGroupIDs=new Set(i)}getGrouping(){return this.groupingConfig}setGrouping(i){this.groupingConfig=i}toUppercase(i){return i&&i[0].toUpperCase()+i.substring(1,i.length)}expandOneOrAll(i,a){let u=!i;i||a&&(u=!1),a||(a=new Set([]));const g=[],h=this.currentGroups[0],P=O=>{O.__groupChildren.forEach(D=>{switch(g.push(D),!0){case u:case D.__groupID===i:case a.has(D.__groupID):case(D.__groupID!==i&&D.__groupExpanded):D.__groupChildren&&(D.__groupExpanded=!0,this.expandedGroupIDs.add(D.__groupID),P(D));break}})};return h.forEach(O=>{switch(g.push(O),!0){case u:case O.__groupID===i:case a.has(O.__groupID):case(O.__groupID!==i&&O.__groupExpanded):O.__groupExpanded=!0,this.expandedGroupIDs.add(O.__groupID),O.__groupChildren&&P(O);break}}),g}collapseOneOrAll(i){const a=!i;i=i===void 0?null:i;const u=[],g=this.currentGroups[0],h=P=>{P.__groupChildren.forEach(O=>{switch(!0){case a:O.__groupChildren&&(O.__groupExpanded=!1,this.expandedGroupIDs.delete(O.__groupID),h(O));break;case O.__groupID===i:u.push(O),this.expandedGroupIDs.delete(O.__groupID),O.__groupExpanded=!1;break;default:u.push(O),O.__groupChildren&&O.__groupExpanded&&h(O);break}})};return g.forEach(P=>{switch(u.push(P),!0){case a:P.__groupExpanded=!1,this.expandedGroupIDs.delete(P.__groupID),P.__groupChildren&&h(P);break;case P.__groupID===i:P.__groupExpanded=!1,this.expandedGroupIDs.delete(P.__groupID);break;default:P.__groupChildren&&P.__groupExpanded&&h(P);break}}),u}createMainGrouping(i,a,u,g,h){const P=[];let O={},D=null;return i.forEach(W=>{let K=W[a];K=typeof K=="boolean"?K.toString():K,K=typeof(K==null?void 0:K.toLocaleDateString)=="function"?h.getDateFormater().fromDate(K):typeof(K==null?void 0:K.toFixed)=="function"?h.getNumberFormater().fromNumber(K):K,K=K||" blank",K!==D?(O={__groupName:this.toUppercase(g)+": "+K,__group:!0,__groupID:K,__groupLvl:u,__groupChildren:[W],__groupTotal:1,__groupExpanded:!1},W.__groupLvl=u+1,D=K,P.push(O)):(O.__groupChildren.push(W),O.__groupTotal++)}),P}groupChildren(i,a,u,g,h){const P=[];let O={};return i.forEach(D=>{let W=null;const K=[];D.__groupChildren.forEach(X=>{let ie=X[a];if(ie=typeof(ie==null?void 0:ie.toLocaleDateString)=="function"?h.getDateFormater().fromDate(ie):typeof(ie==null?void 0:ie.toFixed)=="function"?h.getNumberFormater().fromNumber(ie):ie,ie=ie||" blank",ie!==W){const z=D.__groupID;O={__groupName:this.toUppercase(g)+": "+ie,__groupID:z+"-"+ie,__group:!0,__groupLvl:u,__groupChildren:[X],__groupTotal:1,__groupExpanded:!1},X.__groupLvl=u+1,W=ie,K.push(O),P.push(O)}else O.__groupChildren.push(X),O.__groupTotal++}),D.__groupChildren=K}),P}}class D_{constructor(i){this.dataSource=i,this.selectedRows=0,this.selection=new Set([])}isSelected(i){let a=!1;return this.selectedRows>0&&(a=this.selection.has(this.getRowKey(i))),a}selectAll(){this.selectRange(0,this.dataSource.length()-1)}addSelectedKeys(i){i.forEach(a=>{this.selection.add(a)}),this.selectedRows=this.selection.size}deSelectAll(){this.selection.clear(),this.selectedRows=this.selection.size}highlightRow(i,a,u){if(u==="none")return;const g=u||this.dataSource.getSelectionMode();let h,P=this.getSelectedRows(),O="";if(this.dataSource.__select(a),a!==this.lastRowSelected||P[0]!==a){if(a<=this.dataSource.length()-1){if(g==="multiple")switch(i.shiftKey&&(O="shift",P=this.getSelectedRows(),P.length>0&&this.lastKeyKodeUsed==="none"&&(this.lastRowSelected=P[0],this.lastKeyKodeUsed="shift")),i.ctrlKey&&(O="ctrl"),!i.ctrlKey&&!i.shiftKey&&(O="none"),!0){case O==="none":this.select(a,!1);break;case(this.lastKeyKodeUsed==="shift"&&O==="ctrl"):h=this.isSelected(a),h===!0?this.deSelect(a):this.select(a,!0),this.lastRowSelected=a;break;case(this.lastKeyKodeUsed==="ctrl"&&O==="shift"):const D=this.getSelectedRows();this.selectRange(this.lastRowSelected,a);const W=this.getSelectedRows();this.setSelectedRows(D.concat(W));break;case(this.lastKeyKodeUsed==="ctrl"&&O==="ctrl"):h=this.isSelected(a),h===!0?this.deSelect(a):this.select(a,!0),this.lastRowSelected=a;break;case(this.lastKeyKodeUsed==="none"&&O==="ctrl"):h=this.isSelected(a),h===!0?this.deSelect(a):this.select(a,!0),this.lastRowSelected=a;break;case(this.lastKeyKodeUsed==="shift"&&O==="shift"):this.lastRowSelected>a?this.selectRange(a,this.lastRowSelected):this.selectRange(this.lastRowSelected,a);break;case(this.lastKeyKodeUsed==="none"&&O==="shift"):this.lastRowSelected!==-1?this.lastRowSelected>a?this.selectRange(a,this.lastRowSelected):this.selectRange(this.lastRowSelected,a):(this.lastRowSelected=a,this.select(a,!1));break;default:console.error("error, this should not happen, debug selection")}else this.select(a,!1);this.lastKeyKodeUsed=O,this.dataSource.__callSubscribers("selectionChange")}}else i.ctrlKey&&(O="ctrl"),O==="ctrl"?(this.lastKeyKodeUsed=O,h=this.isSelected(a),h===!0&&this.deSelect(a),this.lastRowSelected=a):this.select(a,!1),this.dataSource.__callSubscribers("selectionChange")}getRowKey(i){return this.dataSource.getRow(i)&&this.dataSource.getRow(i).__KEY}getRowKeys(){const i=[];return this.dataSource.getRows().forEach(a=>{i.push(a.__KEY)}),i}deSelect(i){this.selection.delete(this.getRowKey(i)),this.selectedRows=this.selection.size}select(i,a){switch(this.dataSource.getSelectionMode()){case"none":case null:case void 0:break;case"single":this.selection.clear(),this.selection.add(this.getRowKey(i)),this.selectedRows=this.selection.size;break;case"multiple":a?(this.selection.add(this.getRowKey(i)),this.selectedRows=this.selection.size):(this.selection.clear(),this.selection.add(this.getRowKey(i)),this.selectedRows=this.selection.size);break}}selectRange(i,a){if(this.dataSource.getSelectionMode()==="multiple"){this.selection.clear();for(let u=i;u<a+1;u++)this.selection.add(this.getRowKey(u));this.selectedRows=this.selection.size}this.selectedRows=this.selection.size}getSelectedRows(){const i=[],a=this.getRowKeys();return this.selectedRows>0&&a.forEach((u,g)=>{this.selection.has(u)===!0&&i.push(g)}),i}getSelectedKeys(){return Array.from(this.selection)}setSelectedKeys(i){this.selection.clear(),i.forEach(a=>{this.selection.add(a)}),this.selectedRows=this.selection.size}triggerSelectionChange(){this.dataSource.__callSubscribers("selectionChange")}setSelectedRows(i){this.selectedRows>0&&this.selection.clear();for(let a=0;a<i.length;a++)this.selection.add(this.getRowKey(i[a]));this.selectedRows=this.selection.size}}let Xh=0;const F_=function(){return Xh--,Xh};class B_{constructor(i){this.__collection=[],this.__markedForDeletion=[],this.__keyAttribute="",this.EntityHandler=O_,this.__keyAttribute=i}overrideEntityHandler(i){this.EntityHandler=i}get type(){return"DataContainer"}getKey(){return F_()}getDataSet(){return this.__collection.slice()}lenght(){return this.__collection.length}getMarkedForDeletion(){return this.__markedForDeletion}resetData(){const i=[];this.setData(this.__markedForDeletion,!0),this.__collection.forEach(a=>{if(a.__controller.__isNew&&i.push(a),a.__controller.__edited){for(const u in a.__controller.__originalValues)a[u]=a.__controller.__originalValues[u];a.__controller.__editedProps={},a.__controller.__edited=!1}}),this.removeData(i),this.__markedForDeletion=[]}markForDeletion(i,a=!1){if(a){const u=this.__collection.slice();this.__collection=[],this.__markedForDeletion=u}if(i)if(Array.isArray(i)){const u=[];i.forEach(g=>{const h=this.__collection.indexOf(g);h!==-1&&u.push(this.__collection.splice(h,1)[0])}),this.__markedForDeletion=this.__markedForDeletion.concat(u)}else{const u=this.__collection.indexOf(i);u!==-1&&this.__markedForDeletion.push(this.__collection.splice(u,1)[0])}}clearMarkedForDeletion(){this.__markedForDeletion=[]}removeData(i,a=!1){if(a){const u=this.__collection.slice();return this.__collection=[],u}if(i)if(Array.isArray(i)){const u=[];return i.forEach(g=>{const h=this.__collection.indexOf(g);h!==-1&&u.push(this.__collection.splice(h,1)[0])}),u}else{const u=this.__collection.indexOf(i);if(u!==-1)return this.__collection.splice(u,1)}return[]}setData(i,a=!1,u=!1){if(a){const g=Array.from(i,h=>h&&h.__controller?h:new Proxy(h,new this.EntityHandler(this.__keyAttribute,u)));return this.__collection.push(...g),this.__collection.forEach((h,P)=>{h&&!h.__KEY?h.__KEY=this.getKey():this.__collection[P]||(this.__collection[P]={__KEY:this.getKey()})}),g}else this.__markedForDeletion=[],this.__collection=Array.from(i,g=>g&&g.__controller?g:new Proxy(g,new this.EntityHandler(this.__keyAttribute,u))),this.__collection.forEach((g,h)=>{g&&!g.__KEY?g.__KEY=this.getKey():this.__collection[h]||(this.__collection[h]={__KEY:this.getKey()})})}replace(i,a,u){const g=Array.from(i,h=>h&&h.__controller?h:new Proxy(h,new this.EntityHandler(this.__keyAttribute,!1)));this.__collection.splice(a,u,...g)}}class V_{static fromDate(i){let a=i;if(a==null||a==="")return a;if(a=new Date(a).toDateString(),a==="Invalid Date"&&(a=""),a){const u=new Date(i).getFullYear();let g=(new Date(i).getMonth()+1).toString();g.length===1&&(g="0"+g);let h=new Date(i).getDate().toString();h.length===1&&(h="0"+h),a=`${u}-${g}-${h}`}return a}static toDate(i){let a=i;if(a==null)return a;if(a<1||typeof a!="string")return null;const u=a.split("-");return u[1]||(u[1]=new Date().getMonth()+1),u[2]||(u[2]=new Date().getDate()),a=new Date(u[0],parseInt(u[1])-1,parseInt(u[2]),new Date().getHours(),new Date().getMinutes(),new Date().getSeconds(),new Date().getMilliseconds()),a&&typeof a=="object"&&a.toString()==="Invalid Date"&&(a=""),a}static getPlaceHolderDate(){return"YYYY-MM-DD"}}class nn{static toNumber(i){let a=i;return a.includes(",")&&!a.includes(".")&&(a=a.replace(",",".")),isNaN(parseFloat(a))||a==="0"?0:parseFloat(a)}static fromNumber(i){let a=i;return isNaN(parseFloat(a))&&(a=""),a==null?a:(a.toString().includes(",")&&(a=a.toString().replace(",",".")),a.toString())}}class zs{constructor(i,a){this.__collectionFiltered=[],this.__collectionDisplayed=[],this.__selectionMode="multiple",this.__listeners=new Set,this.__dateFormater=V_,this.__numberFormater=nn,this.currentEntity=null,this.__dataContainer=i||new B_,this.__selectionMode=(a==null?void 0:a.selectionMode)||"multiple",this.__selection=new D_(this),this.__filter=new M_,this.__sorting=new R_,this.__grouping=new z_}setNumberFormater(i){this.__numberFormater=i}setDateFormater(i){this.__dateFormater=i}getNumberFormater(){return this.__numberFormater}getDateFormater(){return this.__dateFormater}get type(){return"Datasource"}setDates(i){this.__sorting.setDateAttribute(i)}getMarkedForDeletion(){return this.__dataContainer.getMarkedForDeletion()}clearMarkedForDeletion(){this.__dataContainer.clearMarkedForDeletion()}resetData(){this.__dataContainer.resetData(),this.__internalUpdate(!0)||this.__callSubscribers("collection-filtered",{info:"resetData"})}markForDeletion(i,a=!1){this.__dataContainer.markForDeletion(i,a),this.__internalUpdate(!0)||this.__callSubscribers("collection-filtered",{info:"markForDeletion"})}removeData(i,a=!1){const u=this.__dataContainer.removeData(i,a);return this.__callSubscribers("collection-changed",{removed:!0,info:"removeData",data:i}),u}getAllData(){return this.__dataContainer.getDataSet()}__select(i){this.currentEntity=this.__collectionDisplayed[i],this.currentEntity===void 0&&(this.currentEntity=null),this.__callSubscribers("currentEntity")}setRowAsCurrentEntity(i){this.__select(i)}setData(i,a=!1,u=!1){if(a){const g=this.__dataContainer.setData(i,a);g&&this.__collectionFiltered.push(...g)}else this.__dataContainer.setData(i,a),this.__collectionFiltered=this.getAllData().slice();this.__internalUpdate(u),this.__callSubscribers("collection-changed",{added:!!a})}addNewEmpty(i={},a=!0){this.__dataContainer.setData([i],!0,!0),this.__internalUpdate(!1);const u=this.__dataContainer.getDataSet(),g=u[u.length-1];this.__collectionFiltered.push(g),this.__collectionDisplayed.push(g),this.__callSubscribers("collection-changed",{added:!0}),a&&this.selectLast()}__internalUpdate(i){let a=!1;return!i&&!this.__filter.getFilter()&&!this.__sorting.getLastSort().length&&!this.__grouping.getGrouping().length&&(a=!0),i&&(this.__filter.getFilter()?this.__collectionFiltered=this.__filter.filter(this.getAllData(),this.__filter.getFilter(),this):this.__collectionFiltered=this.__dataContainer.getDataSet()),this.__sorting.getLastSort().length&&this.__sorting.runOrderBy(this.__collectionFiltered),this.__grouping.getGrouping().length?this.__collectionDisplayed=this.__grouping.group(this.__collectionFiltered,this.__grouping.getGrouping(),!0,this):this.__collectionDisplayed=this.__collectionFiltered.slice(),a&&this.__callSubscribers("collection-filtered",{info:"__internalUpdate, forced"}),a}sort(i,a){if(this.__grouping.getGrouping().length||(i?(this.__sorting.setOrderBy(i,a),this.__sorting.runOrderBy(this.__collectionFiltered)):this.__sorting.getLastSort().length&&this.__sorting.runOrderBy(this.__collectionFiltered)),this.__grouping.getGrouping().length){i&&this.__sorting.setOrderBy(i,a);const u=this.__sorting.getOrderBy().map(P=>P.attribute),g=this.__sorting.getOrderBy().map(P=>P.ascending);this.__sorting.reset(),this.__grouping.getGrouping().forEach(P=>{const O=u.indexOf(P.attribute);u.indexOf(P.attribute)===-1?this.__sorting.setOrderBy({attribute:P.attribute,ascending:!0},!0):this.__sorting.setOrderBy({attribute:P.attribute,ascending:g[O]},!0)});const h=this.__grouping.getGrouping().map(P=>P.attribute);u.forEach((P,O)=>{h.indexOf(P)===-1&&this.__sorting.setOrderBy({attribute:u[O],ascending:g[O]},!0)}),this.__sorting.runOrderBy(this.__collectionFiltered),this.__collectionDisplayed=this.__grouping.group(this.__collectionFiltered,this.__grouping.getGrouping(),!0,this)}else this.__collectionDisplayed=this.__collectionFiltered.slice();this.__callSubscribers("collection-sorted")}filter(i){var a,u;i&&(Array.isArray(i)?this.__filter.setFilter({type:"GROUP",logicalOperator:"AND",filterArguments:i}):!i.filterArguments||((a=i==null?void 0:i.filterArguments)===null||a===void 0?void 0:a.length)===0?(this.__filter.setFilter({type:"GROUP",logicalOperator:"AND",filterArguments:[i]}),(i==null?void 0:i.logicalOperator)&&((u=i==null?void 0:i.filterArguments)===null||u===void 0?void 0:u.length)===0&&this.__filter.setFilter(null)):this.__filter.setFilter(i)),this.__internalUpdate(!0)||this.__callSubscribers("collection-filtered",{info:"filter"})}group(i,a){let u;if(a?(u=this.__grouping.getGrouping(),u=u.concat(i)):u=i,this.__sorting.reset(),u.forEach(g=>{this.__sorting.setOrderBy({attribute:g.attribute,ascending:!0},!0)}),this.__sorting.runOrderBy(this.__collectionFiltered),u.length){const g=this.__grouping.group(this.__collectionFiltered,u,!0,this);this.__collectionDisplayed=g}else this.__collectionDisplayed=this.__collectionFiltered;this.__callSubscribers("collection-grouped",{info:"group",groupings:u})}removeGroup(i){if(i){const a=this.__grouping.getGrouping(),u=a.indexOf(i);u!==-1&&a.splice(u,1),this.group(a)}else this.group([]);this.__callSubscribers("collection-grouped",{info:"removeGroup"})}expandGroup(i){this.__collectionDisplayed=this.__grouping.expandOneOrAll(i),this.__callSubscribers("collection-expand")}collapseGroup(i){this.__collectionDisplayed=this.__grouping.collapseOneOrAll(i),this.__callSubscribers("collection-collapse")}__callSubscribers(i,a={}){const u=[];this.__listeners.forEach(g=>{let h;typeof g=="function"?h=g({type:i,data:a}):typeof(g==null?void 0:g.handleEvent)=="function"&&(h=g.handleEvent({type:i,data:a})),h&&u.push(g)}),this.__listeners=new Set(u)}addEventListener(i){if(typeof i!="function"&&typeof(i==null?void 0:i.handleEvent)!="function")throw new Error("callable sent to datasource event listner is wrong type");this.__listeners.has(i)||this.__listeners.add(i)}removeEventListener(i){this.__listeners.has(i)&&this.__listeners.delete(i)}length(i){return i?this.__collectionFiltered.length:this.__collectionDisplayed.length}getSelectionMode(){return this.__selectionMode}selectAll(){this.__selection.selectAll()}setSelectionMode(i){this.__selectionMode=i||"none"}getRow(i){return this.__collectionDisplayed[i]}getRows(i){return i?this.__collectionFiltered:this.__collectionDisplayed}select(i,a){this.__selection.highlightRow({},i?i-1:0),a&&this.__callSubscribers("select")}selectFirst(){this.__selection.highlightRow({},0),this.__callSubscribers("select",{info:"select-first"})}selectPrev(){let i=this.__collectionDisplayed.indexOf(this.currentEntity)-1;i<0&&(i=this.__collectionDisplayed.length-1,this.__selection.highlightRow({},i)),this.__selection.highlightRow({},i),this.__callSubscribers("select",{info:"select-prev"})}selectNext(){let i=this.__collectionDisplayed.indexOf(this.currentEntity)+1;this.__collectionDisplayed.length-1<i&&(i=0),this.__selection.highlightRow({},i),this.__callSubscribers("select",{info:"select-next"})}selectLast(){this.__selection.highlightRow({},this.__collectionDisplayed.length-1),this.__callSubscribers("select",{info:"select-last"})}setLocalCompare(i,a){this.__sorting.setLocaleCompare(i,a)}resetSort(i){this.__sorting.reset(i)}setOrderBy(i,a){this.__sorting.setOrderBy(i,a)}getOrderBy(){return this.__sorting.getOrderBy()}getGrouping(){return this.__grouping.getGrouping()}setGrouping(i){this.__grouping.setGrouping(i)}setExpanded(i){this.__grouping.setExpanded(i)}getExpanded(){return this.__grouping.getExpanded()}getFilter(){return this.__filter.getFilter()}getSelection(){return this.__selection}sortReset(){return this.__sorting.reset()}getFilterFromType(i){return this.__filter.getFilterFromType(i)}setFilter(i){return this.__filter.setFilter(i)}reloadDatasource(){this.__collectionFiltered=this.getAllData(),this.__internalUpdate(!0)}getFilterString(){var i;const a=this.__filter.getFilter();if(!(!((i=a==null?void 0:a.filterArguments)===null||i===void 0)&&i.length))return"";const u=this.getDateFormater(),g=this.getNumberFormater();function h(O,D){return O==="date"?u.fromDate(D):O==="number"?g.fromNumber(D):D}const P=function(O,D=""){return O&&(!O.filterArguments||O.filterArguments&&O.filterArguments.length===0?O.operator==="IS_BLANK"||O.operator==="IS_NOT_BLANK"?D=D+`[${O.attribute}] <<${Ss[O.operator]}>>`:O.operator!=="IN"&&O.operator!=="NOT_IN"?D=D+`[${O.attribute}] <<${Ss[O.operator]}>> ${O.valueType==="ATTRIBUTE"?`[${O.value}]`:"'"+h(O.attributeType,O.value)+"'"}`:Array.isArray(O.value)?D=D+`[${O.attribute}] <<${Ss[O.operator]}>> [${O.value.map(W=>`'${W}'`)}]`:D=D+`[${O.attribute}] <<${Ss[O.operator]}>> [${O.value.split(`
`).map(W=>`'${W}'`)}]`:O.filterArguments.forEach((W,K)=>{K>0?D=D+` ${O.logicalOperator} `:D=D+"(",D=P(W,D),O.filterArguments.length-1===K&&(D=D+")")})),D};return P(this.__filter.getFilter()).toUpperCase()}}function Xn(n,i,a,u,g,h,P){const O=document.createElement(n);O.style.top=i.clientY+document.documentElement.scrollTop+"px",O.style.left=i.clientX+document.documentElement.scrollLeft+"px",O.connector=a,O.ref=u,O.cell=g&&g(),O.rowNo=h&&h(),O.rowData=P&&P(),document.body.appendChild(O)}class Au{constructor(i,a){this.__subscribers=new Set,this.__handleEvent=null,a?(a.type==="Datasource"&&(this.__ds=a),a.type==="DataContainer"&&(this.__ds=new zs(a))):this.__ds=new zs,this.__configDefault=JSON.parse(JSON.stringify(i)),this.__CONFIG=i,this.parseConfig()}get dateFormater(){return this.__ds.getDateFormater()}get numberFormater(){return this.__ds.getNumberFormater()}get completeDataset(){return this.__ds.getAllData()}get filteredDataset(){return this.__ds.getRows(!0)}get displayedDataset(){return this.__ds.getRows()}showFilterDialog(){Xn("simple-html-grid-filter-dialog",this.__SimpleHtmlGrid,this,this.__SimpleHtmlGrid,null,null,null)}clearAllFilters(){this.setCurrentFilter(null),this.config.groups.flatMap(a=>a.rows).forEach(a=>{const u=a.filterable;u&&(u.currentValue=null)}),this.reRender(),this.reRunFilter()}getDatasource(){return this.__ds}handleEvent(i){if(i.type==="select"){this.dataSourceUpdated();const a=this.__SimpleHtmlGrid.getElementsByTagName("simple-html-grid-body")[0],u=a==null?void 0:a.clientHeight,g=a==null?void 0:a.scrollTop,h=this.getSelectedRows()[0],P=this.__SCROLL_TOPS[h];let O=!1,D=0;return g>P&&(O=!0,D=P-u/2),g+u<=P&&(O=!0,D=P),O&&setTimeout(()=>{this.setScroll(D)}),!0}return i.type==="currentEntity"?!0:i.type==="selectionChange"?(this.__SimpleHtmlGrid.triggerEvent("selection"),!0):(this.config.groupingSet=this.__ds.getGrouping(),this.config.groupingExpanded=this.__ds.getExpanded(),this.config.sortingSet=this.__ds.getOrderBy(),this.__handleEvent===null&&(this.parseConfigWidth(),this.__SimpleHtmlGrid&&this.__SimpleHtmlGrid.resetRowCache(),this.__handleEvent=1,Promise.resolve().then(()=>{this.dataSourceUpdated(),this.__SimpleHtmlGrid&&this.reRender(),this.__handleEvent=null})),!0)}getMainElement(){return this.__SimpleHtmlGrid}parseConfig(){var i;let a=1;if(this.__CONFIG.groups=this.__CONFIG.groups.filter(u=>u),this.__CONFIG.groups.forEach(u=>{u.rows&&u.rows.forEach((g,h)=>{a<h+1&&(a=h+1)})}),this.__CONFIG.__cellRows=a,this.__CONFIG.__rowHeight=this.__CONFIG.cellHeight*a,this.parseConfigWidth(),this.__CONFIG){this.__CONFIG.sortingSet&&this.__ds.setOrderBy(this.__CONFIG.sortingSet),this.__CONFIG.groupingSet&&this.__ds.setGrouping(this.__CONFIG.groupingSet),this.__CONFIG.groupingExpanded&&this.__ds.setExpanded(this.__CONFIG.groupingExpanded),this.__CONFIG.filterSet&&(this.__ds.setFilter(this.__CONFIG.filterSet),this.__CONFIG.filterSet=null);const u=[];(i=this.__CONFIG.groups)===null||i===void 0||i.forEach(g=>{var h;(h=g.rows)===null||h===void 0||h.forEach(P=>{P.type==="date"&&u.push(P.attribute)})}),this.__ds.setDates(u)}}parseConfigWidth(){var i;let a=0;this.config.groups.reduce((g,h)=>(h.__left=g,a=a+h.width,h.__left+h.width),0),this.__CONFIG.__rowWidth=a;const u=(i=this.__SimpleHtmlGrid)===null||i===void 0?void 0:i.getElementsByTagName("simple-html-grid-body")[0];this.__CONFIG.__rowWidth<(u==null?void 0:u.clientWidth)&&this.__CONFIG.scrollLeft>0&&(this.__CONFIG.scrollLeft=u.scrollLeft)}saveSettings(){this.__CONFIG.filterSet=this.__ds.getFilter()||[],this.__CONFIG.groupingSet=this.__ds.getGrouping()||[],this.__CONFIG.groupingExpanded=this.__ds.getExpanded()||[],this.__CONFIG.sortingSet=this.__ds.getOrderBy()||[];const i=JSON.parse(JSON.stringify(this.config));return this.__CONFIG.filterSet=null,i}loadSettings(i,a=!1){a&&(this.__configDefault=JSON.parse(JSON.stringify(i))),this.manualConfigChange(JSON.parse(JSON.stringify(i)))}useInitSettings(){this.manualConfigChange(JSON.parse(JSON.stringify(this.__configDefault)))}manualConfigChange(i){i&&(this.__CONFIG=i),this.parseConfig(),this.__SimpleHtmlGrid&&this.__SimpleHtmlGrid.manualConfigChange(),this.reRunFilter()}setData(i,a=!1,u=!1){this.__ds.setData(i,a,u),this.dataSourceUpdated()}reloadDatasource(){this.__ds.reloadDatasource(),this.dataSourceUpdated()}dataSourceUpdated(){this.__SCROLL_TOPS=[],this.__SCROLL_HEIGHTS=[],this.__SCROLL_HEIGHT=0;const i=this.config.cellHeight,a=this.config.__rowHeight;let u=0;this.displayedDataset.forEach(g=>{const h=g.__group?i:a;this.__SCROLL_TOPS.push(u),this.__SCROLL_HEIGHTS.push(h),u=u+h}),this.__SCROLL_HEIGHT=u}get config(){return this.__CONFIG}set config(i){this.__CONFIG=i}get getScrollVars(){return{__SCROLL_HEIGHT:this.__SCROLL_HEIGHT,__SCROLL_HEIGHTS:this.__SCROLL_HEIGHTS,__SCROLL_TOPS:this.__SCROLL_TOPS}}select(i){this.__ds.select(i)}selectAll(){this.__ds.selectAll()}edited(){return this.__ds.getAllData().filter(i=>!!i.__controller.__edited)}publishEvent(i,a){const u=[];this.__subscribers.forEach(g=>{let h;typeof g=="function"?h=g({type:i,data:a}):typeof(g==null?void 0:g.handleEvent)=="function"&&(h=g.handleEvent({type:i,data:a})),h&&u.push(g)}),this.__subscribers=new Set(u)}addEventListener(i){if(typeof i!="function"&&typeof(i==null?void 0:i.handleEvent)!="function")throw new Error("callable sent to datasource event listner is wrong type");this.__subscribers.has(i)||this.__subscribers.add(i)}removeEventListener(i){this.__subscribers.has(i)&&this.__subscribers.delete(i)}reRender(){this.__SimpleHtmlGrid&&this.__SimpleHtmlGrid.reRender()}render(){this.__SimpleHtmlGrid&&this.__SimpleHtmlGrid.reRender()}groupingCallback(i,a,u){let g=!!a;const h=this.__ds.getGrouping();let P=null;if(a&&h.forEach((O,D)=>{O.attribute===a.attribute&&(g=!1),u&&O.attribute===u&&(P=D)}),g&&(u?h.splice(P,0,{title:a.header,attribute:a.attribute}):h.push({title:a.header,attribute:a.attribute})),!g&&u&&a){let O=null;h.forEach((W,K)=>{W.attribute===u&&(P=K)}),h.forEach((W,K)=>{a.attribute===W.attribute&&(O=K)});const D=h.splice(O,1);D.length&&h.splice(P,0,D[0])}if(!g&&!u&&a){let O=null;h.forEach((W,K)=>{a.attribute===W.attribute&&(O=K)});const D=h.splice(O,1);h.push(D[0])}this.clearConfigSort(this.config.groups.flatMap(O=>O.rows)),this.__ds.sortReset(),h.forEach(O=>{this.__ds.setOrderBy({attribute:O.attribute,ascending:!0},!0)}),this.__updateSortConfig(),this.__ds.group(h)}filterCallback(i,a,u,g,h){switch(a.type){case"date":a.filterable.currentValue=this.dateFormater.toDate(i);break;case"number":a.filterable.currentValue=this.numberFormater.toNumber(i);break;case"boolean":i===""&&(a.filterable.currentValue=null),i==="false"&&(a.filterable.currentValue=!1),i==="true"&&(a.filterable.currentValue=!0);break;default:a.filterable.currentValue=g||i}const P=this.__ds.getFilter();let O={type:"GROUP",logicalOperator:"AND",filterArguments:[]};(P==null?void 0:P.logicalOperator)==="AND"&&(O=P,O.filterArguments=O.filterArguments.filter(K=>K.attribute!==a.attribute)),this.config.groups.flatMap(K=>K.rows).forEach(K=>{const X=K.filterable;X&&X.currentValue!==null&&X.currentValue!==void 0&&X.currentValue!==""&&O.filterArguments.push({type:"CONDITION",logicalOperator:"NONE",valueType:"VALUE",attribute:K.attribute,attributeType:K.type||"text",operator:X.operator||this.__ds.getFilterFromType(K.type),value:X.currentValue})}),u&&O.filterArguments.push({type:"CONDITION",logicalOperator:"NONE",valueType:"VALUE",attribute:a.attribute,attributeType:a.type||"text",operator:h?"NOT_IN":"IN",value:u}),g&&O.filterArguments.unshift({type:"CONDITION",logicalOperator:"NONE",valueType:"VALUE",attribute:a.attribute,attributeType:a.type||"text",operator:"CONTAINS",value:g});const W=[];O.filterArguments=O.filterArguments.filter(K=>W.indexOf(K.attribute)!==-1&&K.operator!=="IN"&&K.operator!=="NOT_IN"?!1:(W.push(K.attribute),!0)),u&&!g&&(a.filterable.currentValue=""),this.__ds.filter(O)}clearConfigSort(i){i.forEach(a=>{a.sortable&&(a.sortable.sortAscending=null,a.sortable.sortNo=null)})}__updateSortConfig(){const i=this.config.groups.flatMap(g=>g.rows),a=this.__ds.getOrderBy().flatMap(g=>g.attribute),u=this.__ds.getOrderBy();i.forEach(g=>{const h=a.indexOf(g.attribute);h!==-1?(g.sortable||(g.sortable={}),g.sortable.sortAscending=u[h].ascending,g.sortable.sortNo=h+1):g.sortable&&(g.sortable.sortAscending,g.sortable.sortNo=null)})}sortCallback(i,a){var u;let g=this.__ds.getOrderBy();const h=a.attribute,P=(u=a==null?void 0:a.sortable)===null||u===void 0?void 0:u.sortAscending,O=i.shiftKey;if(this.clearConfigSort(this.config.groups.flatMap(D=>D.rows)),O){let D=!1;g.forEach(W=>{W.attribute===h&&(D=!0,W.ascending=!W.ascending)}),D?(a.sortable.sortAscending=!0,a.sortable.sortNo=g.length):g.push({attribute:h,ascending:P!==!1})}else g=[{attribute:h,ascending:!P}];this.__ds.setOrderBy(g),this.__ds.sort(),this.__updateSortConfig()}removeGroup(i){this.__ds.removeGroup(i)}groupExpand(i){this.__ds.expandGroup(i)}updateRowCells(i=!1){i?this.__SimpleHtmlGrid.triggerEvent("update-cell-data-currentEnity"):this.__SimpleHtmlGrid.triggerEvent("update-cell-data")}groupCollapse(i){this.__ds.collapseGroup(i)}connectGrid(i){this.__SimpleHtmlGrid!==i&&(this.__SimpleHtmlGrid=i,this.__ds.addEventListener(this),this.dataSourceUpdated())}disconnectGrid(i){this.__SimpleHtmlGrid!==i&&(this.__SimpleHtmlGrid=null,this.__ds.removeEventListener(this))}getCurrentFilter(){return this.__ds.getFilter()}setCurrentFilter(i){this.__ds.setFilter(i)}reRunFilter(){this.__ds.filter()}isSelected(i){return this.__ds.getSelection().isSelected(i)}highlightRow(i,a){this.__ds.getSelection().highlightRow(i,a,this.config.selectionMode)}getSelectedRows(){return this.__ds.getSelection().getSelectedRows()}setReadOnlyState(i=!0){return this.__CONFIG.readonly=i}setScroll(i=0){if(this.__SimpleHtmlGrid){const a=this.__SimpleHtmlGrid.getElementsByTagName("simple-html-grid-body")[0];a&&(a.scrollTop=i)}}getFilterString(){return this.getDatasource().getFilterString()}getTextWidth(i){const u=document.createElement("canvas").getContext("2d");return u.font=this.getFont(),u.measureText(i).width}getFont(){const i=this===null||this===void 0?void 0:this.__SimpleHtmlGrid;return i?window.getComputedStyle(i).getPropertyValue("font-size")+" "+window.getComputedStyle(i).getPropertyValue("font-family"):"12px Arial"}autoResizeColumns(i){const a=i?[i]:this.config.groups.flatMap(O=>O==null?void 0:O.rows);let u=a.map(O=>{var D;return((D=O==null?void 0:O.header)===null||D===void 0?void 0:D.length)+4});const g=a.map(O=>{var D;return O.type==="date"&&((D=O==null?void 0:O.header)===null||D===void 0?void 0:D.length)<5?"19.19.2000 A":(O==null?void 0:O.header)+"sorter"});this.__ds.getAllData().forEach(O=>{a.forEach((D,W)=>{O&&typeof O[D.attribute]=="string"&&u[W]<O[D.attribute].length&&(u[W]=O[D.attribute].length,g[W]=O[D.attribute]),O&&typeof O[D.attribute]=="number"&&u[W]<(O[D.attribute]+"").length&&(u[W]=(O[D.attribute]+"").length,g[W]=O[D.attribute])})});const P=a.map(O=>O.attribute);u=u.map(O=>O?O*8:100),this.config.groups.forEach(O=>{let D=0;O==null||O.rows.forEach(W=>{D<750&&P.indexOf(W.attribute)!==-1&&u[P.indexOf(W.attribute)]>D&&(D=this.getTextWidth(g[P.indexOf(W.attribute)])+15)}),D&&(O.width=D>750?750:D)}),this.manualConfigChange(this.config)}}function $t(n,i){customElements.get(i)?globalThis.hmrCache&&customElements.define(i,n):customElements.define(i,n)}function Ya(n,i,a,u,g){let h=u;n.displayedDataset.length<=i.length&&(h=0);const P=n.getScrollVars.__SCROLL_TOPS;let O=0,D=0;if(h!==0)for(;D<P.length;){if(Math.floor(h-P[D])<0){O=D-1;break}D++}let W=O;const K=[];for(let X=0;X<i.length;X++){const ie=O+X;ie>n.displayedDataset.length-1?(W--,K.push(W)):K.push(ie),i[X].update=!0}for(let X=0;X<i.length;X++){const ie=K.indexOf(i[X].i);ie!==-1&&(K.splice(ie,1),i[X].update=!1)}for(let X=0;X<i.length;X++)if(i[X].update){const ie=K.splice(0,1)[0];i[X].i=ie}else i[X].update=!1;g||a.getElementsByTagName("simple-html-grid-body")[0].rows.forEach(ie=>{ie.verticalScrollEvent()})}class H_ extends HTMLElement{constructor(){super(...arguments),this.firstLoad=!0}connectedCallback(){this.classList.add("simple-html-grid-body");const i=this.connector.config;this.style.top=i.panelHeight+i.__rowHeight*2+2+"px",this.style.bottom=i.footerHeight+"px",this.ref.addEventListener("reRender",this),this.ref.addEventListener("column-resize",this),this.body=document.createElement("simple-html-grid-body-content"),this.body.style.height=`${this.connector.getScrollVars.__SCROLL_HEIGHT||.1}px`,this.body.style.width=`${i.__rowWidth}px`,this.body.classList.add("simple-html-grid-content"),this.append(this.body),this.ref.interface.config.lastScrollTop&&(this.skipFirstRerender=!0,this.scrollTop=this.ref.interface.config.lastScrollTop,Ya(this.ref.interface,this.ref.rowCache,this.ref,this.scrollTop,!0)),this.rows=this.rowPositionCache.map(a=>{const u=document.createElement("simple-html-grid-row");return u.connector=this.connector,u.row=a,u.ref=this.ref,this.body.append(u),u}),this.reRender()}handleEvent(i){if(i.type==="reRender"&&this.reRender(),i.type==="column-resize"){const a=this.connector.config;this.body.style.width=`${a.__rowWidth}px`}}disconnectedCallback(){this.ref.removeEventListener("reRender",this),this.ref.removeEventListener("column-resize",this)}reRender(){const i=this.connector.config;if(this.style.top=i.panelHeight+i.__rowHeight*2+2+"px",this.style.bottom=i.footerHeight+"px",this.body.style.height=`${this.connector.getScrollVars.__SCROLL_HEIGHT||.1}px`,this.body.style.width=`${i.__rowWidth}px`,this.skipFirstRerender?this.skipFirstRerender=!1:(this.ref.resetColCache(),this.ref.resetRowCache()),this.rowPositionCache.length!==this.rows.length)if(this.rowPositionCache.length<this.rows.length){const a=[];this.rows.forEach((u,g)=>{this.rowPositionCache[g]?a.push(u):this.body.removeChild(u)}),this.rows=a}else this.rowPositionCache.forEach((a,u)=>{if(this.rows[u]){const g=this.rows[u];g.row=a}else{const g=document.createElement("simple-html-grid-row");g.connector=this.connector,g.row=a,g.ref=this.ref,this.body.append(g),this.rows.push(g)}});this.rows.forEach((a,u)=>{const g=a;g.connector=this.connector,g.row=this.rowPositionCache[u],g.ref=this.ref,g.updateRowColumns()})}}$t(H_,"simple-html-grid-body");class U_ extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-cell-row");const i=this.connector.config;this.style.display="block",this.style.height=i.cellHeight+"px",this.style.width=i.groups[this.group].width+"px",this.style.top=this.cellPosition*i.cellHeight+"px",this.cell=i.groups[this.group].rows[this.cellPosition],this.innerEle=document.createElement("input"),this.innerEle.classList.add("simple-html-grid-row-input"),this.innerEle.setAttribute("data-type",this.cell.type||"text"),this.innerEle.setAttribute("data-value-cell",""),this.appendChild(this.innerEle),this.ref.addEventListener("update-cell-data-currentEnity",this),this.ref.addEventListener("update-cell-data",this)}disconnectedCallback(){this.ref.removeEventListener("update-cell-data-currentEnity",this),this.ref.removeEventListener("update-cell-data",this)}handleEvent(i){if(i.type==="column-resize"&&(this.style.width=this.connector.config.groups[this.group].width+"px"),i.type==="update-cell-data"&&this.updateInput(),i.type==="update-cell-data-currentEnity"){const a=this.connector.displayedDataset[this.rowNo],u=this.connector.getDatasource().currentEntity;a===u&&this.updateInput()}}updateCallback(i){const a=this.connector.displayedDataset[this.rowNo],u=this.cell;if(this.style.width=this.connector.config.groups[this.group].width+"px",u.readonly||this.connector.config.readonly){if(this.cell.type==="date"){i.target.value=this.connector.dateFormater.fromDate(a[u.attribute]||null);return}if(this.cell.type==="number"){i.target.value=this.connector.numberFormater.fromNumber(a[u.attribute]||null);return}if(this.cell.type==="boolean"){i.target.checked=a[u.attribute];return}i.target.value=a[u.attribute]}if(u.autoUpdateData!==!1){switch(this.cell.type){case"boolean":a[u.attribute]=i.target.checked;break;case"image":break;case"date":a[u.attribute]=this.connector.dateFormater.toDate(i.target.value);break;case"number":a[u.attribute]=this.connector.numberFormater.toNumber(i.target.value);break;default:a[u.attribute]=i.target.value}this.connector.publishEvent("attribute-change",this)}}updateWidth(){this.style.width=this.connector.config.groups[this.group].width+"px"}updateInput(){const i=this.connector.displayedDataset[this.rowNo],a=this.ref,u=this.connector;this.innerEle.setAttribute("data-attribute",this.cell.attribute||""),this.innerEle.setAttribute("data-type",this.cell.type||"text");const g=K=>{K.button!==0&&Xn("simple-html-grid-menu-row",K,u,a,()=>this.cell,()=>this.rowNo,()=>this.connector.displayedDataset[this.rowNo])},h=this.cell.editEventType!=="input"?K=>{this.lastVal=void 0,this.updateCallback(K),this.updateInput()}:null,P=this.cell.editEventType==="input"?K=>{this.lastVal=void 0,this.updateCallback(K)}:null;if(this.innerEle.readOnly=this.cell.readonly||u.config.readonly,this.innerEle.disabled=this.cell.disabled,this.innerEle.onchange=h,this.cell.type==="date"?this.innerEle.oninput=null:(this.innerEle.oninput=this.cell.stopManualEdit?null:P,this.cell.stopManualEdit&&(this.innerEle.onkeydown=function(K){return K.preventDefault(),!1})),this.innerEle.oncontextmenu=K=>(K.preventDefault(),g(K),!1),!i||i.__group){this.parentNode.style.display="none";return}else this.parentNode.style.display="block";let O=this.cell.type==="boolean"?"checkbox":this.cell.type||"text";if(O!=="text"&&O!=="checkbox"&&(O="text"),this.innerEle.type!==O&&(this.innerEle.type=O),this.innerEle.onfocus=()=>{this.innerBtn&&this.innerBtn.classList.remove("simple-html-grid-iconhidden")},this.innerEle.onblur=()=>{this.innerBtn&&setTimeout(()=>{this.innerBtn&&this.innerBtn.classList.add("simple-html-grid-iconhidden")},200)},O==="checkbox"?(this.innerEle.classList.contains("simple-html-grid-row-input")&&this.innerEle.classList.remove("simple-html-grid-row-input"),this.innerEle.classList.contains("simple-html-grid-row-checkbox")||this.innerEle.classList.add("simple-html-grid-row-checkbox")):(this.innerEle.classList.contains("simple-html-grid-row-checkbox")&&this.innerEle.classList.remove("simple-html-grid-row-checkbox"),this.innerEle.classList.contains("simple-html-grid-row-input")||this.innerEle.classList.add("simple-html-grid-row-input")),O!=="checkbox"&&this.cell.focusButton){this.innerBtn&&this.innerBtn.parentNode===null&&(this.innerBtn=null);let K=!0;const X=this.connector.config.readonly,ie=this.cell.readonly;X&&this.cell.focusButtonIfGridReadonly===!1&&(K=!1),ie&&this.cell.focusButtonIfCellReadonly===!1&&(K=!1),K?(this.innerBtn||(this.innerBtn=document.createElement("button"),this.innerBtn.classList.add("simple-html-grid-row-input-button","simple-html-grid-iconhidden"),this.innerBtn.appendChild(document.createTextNode("...")),this.appendChild(this.innerBtn)),this.innerBtn.onclick=()=>{this.connector.publishEvent("focus-button",this)}):this.innerBtn&&this.innerBtn.parentNode&&this.innerBtn.parentNode.removeChild(this.innerBtn)}else this.innerBtn&&this.innerBtn.parentNode&&this.innerBtn.parentNode.removeChild(this.innerBtn);if(this.style.width=this.connector.config.groups[this.group].width+"px",this.innerEle.placeholder=this.cell.placeholder||"",i){const K=this.cell;K.type==="date"&&(this.innerEle.placeholder=this.cell.placeholder?this.cell.placeholder:this.connector.dateFormater.getPlaceHolderDate());const X=i[K.attribute]||null;if(X!==this.lastVal)switch(K.type){case"boolean":this.innerEle.checked=X;break;case"image":console.log("no-image");break;case"empty":console.log("no-.empty");break;case"date":this.innerEle.value=this.connector.dateFormater.fromDate(X);break;case"number":this.innerEle.value=this.connector.numberFormater.fromNumber(X);break;default:this.innerEle.value=X}this.lastVal=X}else this.innerEle.value&&(this.innerEle.value="");const D=this.connector.displayedDataset[this.rowNo-1],W=this.innerEle.classList;if(D){let K=D[this.cell.attribute]||"",X=i[this.cell.attribute]||"";this.cell.type==="number"&&(K=K+"",X=X+""),this.cell.type==="date"&&(K=this.connector.dateFormater.fromDate(K),X=this.connector.dateFormater.fromDate(X)),K===X?W.contains("simple-html-grid-duplicate-value")||W.add("simple-html-grid-duplicate-value"):W.contains("simple-html-grid-duplicate-value")&&W.remove("simple-html-grid-duplicate-value")}else W.contains("simple-html-grid-duplicate-value")&&W.remove("simple-html-grid-duplicate-value")}}$t(U_,"simple-html-grid-cell-row");class G_ extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-cell-filter");const i=this.connector.config;this.style.height=i.cellHeight+"px",this.style.width=this.group.width+"px",this.style.top=this.cellPosition*i.cellHeight+"px",this.attribute=this.group.rows[this.cellPosition].attribute,this.ref.addEventListener("column-resize",this),this.updateGui()}handleEvent(i){i.type==="column-resize"&&(this.style.width=this.group.width+"px")}disconnectedCallback(){this.ref.removeEventListener("column-resize",this)}updateGui(){const i=this.group.rows[this.cellPosition],a=this.connector,u=this.ref,g=i.type==="boolean"?"checkbox":i.type,h=i.filterable.currentValue||null,P=i.filterable.placeholder||"",O=this.connector.config,D=te=>{if(i.type==="boolean"){const pe=te.target;switch(pe.state){case 0:pe.state=2,pe.style.opacity="1",pe.checked=!0,pe.indeterminate=!1;break;case 2:pe.state=3,pe.style.opacity="1",pe.indeterminate=!1;break;default:pe.checked=!1,pe.state=0,pe.style.opacity="0.3",pe.indeterminate=!0}te.target.value=pe.indeterminate?null:pe.checked}i.filterable.auto!==!1&&this.connector.filterCallback(te.target.value,i)},W=te=>{(te.keyCode?te.keyCode:te.which)===13&&D(te)},K=i.editEventType!=="input"?D:null,X=i.editEventType==="input"?D:null,ie=te=>{te.button!==0&&Xn("simple-html-grid-menu-filter",te,a,u,()=>this.group.rows[this.cellPosition]||null)};let z=null,ue=!1,ee=0;i.type==="boolean"&&i.filterable&&(i.filterable.currentValue!==!1&&i.filterable.currentValue!==!0?(z=!0,ue=!0,ee=0):ee=i.filterable.currentValue?2:3);let ce;this.children.length?ce=this.children[0]:ce=document.createElement("input");let $="simple-html-grid-row-input";const J="simple-html-grid-row-checkbox";if(i.type==="boolean"?(ce.classList.contains($)&&ce.classList.remove($),$=J):ce.classList.contains(J)&&ce.classList.remove(J),this.style.height=O.cellHeight+"px",this.style.width=this.group.width+"px",this.style.top=this.cellPosition*O.cellHeight+"px",this.attribute=this.group.rows[this.cellPosition].attribute,ce.type=g,g!=="text"&&g!=="checkbox"&&(ce.type="text"),ce.placeholder=P,g==="date"&&(ce.placeholder=this.connector.dateFormater.getPlaceHolderDate()),ce.classList.add($),ce.state=ee,ce.indeterminate=ue,z&&(ce.style.opacity="0.3"),ce.onchange=K,ce.oncontextmenu=te=>(te.preventDefault(),ie(te),!1),ce.oninput=X,ce.onkeydown=W,ce.value!==(h||""))switch(g){case"checkbox":ce.checked!==h&&(ce.checked=h);break;case"number":i.filterable.currentValue===0?ce.value="0":ce.value=this.connector.numberFormater.fromNumber(h);break;case"date":ce.value=this.connector.dateFormater.fromDate(h);break;default:ce.value=h}this.children.length||this.appendChild(ce)}}$t(G_,"simple-html-grid-cell-filter");function W_(n,i){let a=null,u=i().width;const g=D=>{if(D.preventDefault(),a&&Math.abs(a-D.screenX)%2===0){const K=a-D.screenX,X=u-K;i().width=X>10?X:10;let ie=0;n.interface.config.groups.reduce((z,ue)=>(ue.__left=z,ie=ie+ue.width,ue.__left+ue.width),0),n.interface.config.__rowWidth=ie,requestAnimationFrame(()=>{n.triggerEvent("column-resize")})}},h=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h)},P=D=>{a=D.screenX,u=i().width,document.addEventListener("mousemove",g),document.addEventListener("mouseup",h)},O=document.createElement("div");return O.classList.add("simple-html-grid-draggable-handler"),O.onmousedown=P,O}let Et=null,In=null,Ct=null,sn=null,On=null,Pr=null,Ir=null;function kf(n){return n&&n[0].toUpperCase()+n.substring(1,n.length)}const Yh=(n,i)=>{const a=u=>{Et!=null&&Et.allowGrouping&&i.groupingCallback(u,Et,Ir),u.target.removeEventListener("mouseup",a),u.target.classList.remove("simple-html-grid-candrop"),On&&On.classList.remove("simple-html-grid-candrop"),Pr&&Pr.classList.remove("simple-html-grid-candrop-panel-col"),Ir=null,sn=null};return u=>{n==="enter"&&Et&&(On=u.target,u.target.classList.add("simple-html-grid-candrop"),u.target.addEventListener("mouseup",a)),n==="leave"&&Et&&(On=null,u.target.removeEventListener("mouseup",a),u.target.classList.remove("simple-html-grid-candrop"))}},$h=(n,i)=>{const a=u=>{sn&&(i.groupingCallback(u,sn,Ir),u.target.removeEventListener("mouseup",a),u.target.classList.remove("simple-html-grid-candrop"),On&&On.classList.remove("simple-html-grid-candrop"),Pr&&Pr.classList.remove("simple-html-grid-candrop-panel-col"),Ir=null,sn=null)};return(u,g)=>{(n==="enter"&&Et||n==="enter"&&sn)&&(Pr=u.target,Ir=g,u.target.classList.add("simple-html-grid-candrop-panel-col"),On&&On.classList.remove("simple-html-grid-candrop"),sn&&u.target.addEventListener("mouseup",a)),(n==="leave"&&Et||n==="leave"&&sn)&&(Pr=null,Ir=null,u.target.classList.remove("simple-html-grid-candrop-panel-col"),sn&&u.target.removeEventListener("mouseup",a))}},q_=(n,i)=>{const a=function(){document.removeEventListener("mouseup",a),document.removeEventListener("mousemove",u),sn=null,In=null,Ct&&document.body.removeChild(Ct),Ct=null},u=function(g){requestAnimationFrame(()=>{Ct&&(Ct.style.top=g.clientY+document.documentElement.scrollTop+"px",Ct.style.left=g.clientX+document.documentElement.scrollLeft+"px")})};return(g,h)=>{n==="dragstart"&&g.button===0&&g.target.tagName==="P"&&(sn={header:h.title,attribute:h.attribute},document.addEventListener("mouseup",a),Ct=document.createElement("div"),Ct.style.top=-1200+"px",Ct.style.left=-1200+"px",Ct.style.height=i.config.cellHeight+"px",Ct.classList.add("simple-html-grid"),Ct.classList.add("simple-html-grid-drag"),Ct.classList.add("simple-html-grid-cell-label"),Ct.textContent=kf(h.title),document.body.appendChild(Ct),document.addEventListener("mousemove",u))}};let rl=null,sl=null;const za=(n,i,a,u)=>{var g;const h=function(){document.removeEventListener("mouseup",h),document.removeEventListener("mousemove",O),Et=null,In=null,Ct&&document.body.removeChild(Ct),Ct=null};let P=(g=a.getMainElement())===null||g===void 0?void 0:g.getElementsByTagName("simple-html-grid-body")[0];const O=function(D){var W;(Math.abs(sl-D.clientY)>10||Math.abs(rl-D.clientX)>10)&&(sl=99200,rl=99200,P=(W=a.getMainElement())===null||W===void 0?void 0:W.getElementsByTagName("simple-html-grid-body")[0],requestAnimationFrame(()=>{if(Ct){Ct.style.top=D.clientY+document.documentElement.scrollTop+"px",Ct.style.left=D.clientX+document.documentElement.scrollLeft+"px";const K=a.getMainElement().getClientRects()[0];P.scrollLeft>0&&K.x>D.clientX&&(P.scrollLeft=P.scrollLeft+(D.clientX-K.x)),K.x+K.width<D.clientX&&(P.scrollLeft=P.scrollLeft-(K.x+K.width-D.clientX))}}))};return D=>{if(n==="dragstart"&&D.button===0&&D.target.tagName==="SPAN"&&(Et=i(),In=u&&u(),sl=D.clientY,rl=D.clientX,document.addEventListener("mouseup",h),Ct=document.createElement("div"),Ct.style.top=-1200+"px",Ct.style.left=-1200+"px",Ct.style.height=a.config.cellHeight+"px",Ct.classList.add("simple-html-grid"),Ct.classList.add("simple-html-grid-drag"),Ct.classList.add("simple-html-grid-cell-label"),Ct.textContent=kf(i().header),document.body.appendChild(Ct),document.addEventListener("mousemove",O)),Et!==null){const W=K=>{if(Et!==null){const X=Object.assign({},Et),ie=Object.assign({},i()),z=Object.assign(Et,i());for(const ue in z)Et[ue]=ie[ue],i()[ue]=X[ue];a.reRender(),K.target.removeEventListener("mouseup",W),K.target.classList.remove("simple-html-grid-candrop")}};n==="enter"&&Et&&Et!==i()&&(i().type==="empty"&&D.target.classList.toggle("hideme"),D.target.classList.add("simple-html-grid-candrop"),D.target.addEventListener("mouseup",W)),n==="leave"&&Et&&(i().type==="empty"&&D.target.classList.toggle("hideme"),D.target.removeEventListener("mouseup",W),D.target.classList.remove("simple-html-grid-candrop"))}}};function _a(n,i,a,u){const g=function(D){let W=null,K=null,X=null,ie=null;const z=i(),ue=a();if(In)n.config.groups.forEach((ce,$)=>{ce===In&&(ce.rows.forEach((J,te)=>{J===Et&&(W=$,K=te)}),ce===z&&(X=$),K!==null&&ce.rows.splice(K,1))});else{let ce=null;n.config.optionalCells&&(n.config.optionalCells.forEach(($,J)=>{$===Et&&(ce=J)}),ce!==null&&n.config.optionalCells.splice(ce,1))}n.config.groups.forEach((ce,$)=>{ce===z&&ce.rows.forEach((J,te)=>{J===ue&&(X=$,ie=te)})}),ie!==null&&(u==="left"&&n.config.groups.splice(X,0,{width:In?n.config.groups[W].width:100,rows:[Et]}),u==="right"&&n.config.groups.splice(X+1,0,{width:In?n.config.groups[W].width:100,rows:[Et]}),u==="top"&&n.config.groups[X].rows.splice(ie,0,Et),u==="bottom"&&n.config.groups[X].rows.splice(ie+1,0,Et)),D.target.classList.remove("simple-html-grid-candrop"),Et=null,In=null;let ee=null;n.config.groups.forEach((ce,$)=>{ce.rows.length===0&&(ee=$)}),ee!==null&&n.config.groups.splice(ee,1),setTimeout(()=>{n.manualConfigChange(n.config)},0)},h=D=>{const W=a();Et&&Et!==W&&(D.preventDefault(),D.target.classList.add("simple-html-grid-candrop"),D.target.addEventListener("mouseup",g))},P=D=>{const W=a();Et&&Et!==W&&(D.preventDefault(),D.target.classList.remove("simple-html-grid-candrop"),D.target.removeEventListener("mouseup",g))},O=document.createElement("div");switch(O.onmouseenter=h,O.onmouseleave=P,u){case"bottom":O.classList.add("simple-html-grid-drop-zone-bottom");break;case"top":O.classList.add("simple-html-grid-drop-zone-top");break;case"left":O.classList.add("simple-html-grid-drop-zone-left");break;case"right":O.classList.add("simple-html-grid-drop-zone-right");break}return O}class K_ extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-cell-label");const i=this.connector.config;this.style.display="block",this.style.height=i.cellHeight+"px",this.style.width=this.group.width+"px",this.style.top=this.cellPosition*i.cellHeight+"px",this.ref.addEventListener("column-resize",this),this.generateGui()}handleEvent(i){i.type==="column-resize"&&(this.style.width=this.group.width+"px")}disconnectedCallback(){this.ref.removeEventListener("column-resize",this)}capalize(i){return i&&i[0].toUpperCase()+i.substring(1,i.length)}update(){const i=this.group.rows[this.cellPosition];this.labelEl.cell=i,this.style.display="block";const a=this.connector.config;this.style.height=a.cellHeight+"px",this.style.width=this.group.width+"px",this.style.top=this.cellPosition*a.cellHeight+"px",this.labelEl.innerText=this.capalize(this.group.rows[this.cellPosition].header||""),this.setSortIcon()}setSortIcon(){var i;const a="http://www.w3.org/2000/svg",u=document.createElementNS(a,"svg");u.setAttributeNS(null,"viewBox","0 0 16 16"),u.setAttributeNS(null,"class","simple-html-grid-icon");const g=document.createElementNS(a,"path");g.setAttributeNS(null,"d","M7.4 6L3 10h1.5L8 7l3.4 3H13L8.5 6h-1z"),u.appendChild(g);const h=document.createElementNS(a,"svg");h.setAttributeNS(null,"viewBox","0 0 16 16"),h.setAttributeNS(null,"class","simple-html-grid-icon");const P=document.createElementNS(a,"path");P.setAttributeNS(null,"d","M7.4 10L3 6h1.5L8 9.2 11.3 6H13l-4.5 4h-1z"),h.appendChild(P),this.sortIcon&&((i=this.sortIcon.parentNode)===null||i===void 0||i.removeChild(this.sortIcon),this.sortIcon=null);const O=this.group.rows[this.cellPosition];O.sortable&&O.sortable.sortNo&&(this.sortIcon=document.createElement("i"),this.sortIcon.appendChild(O.sortable.sortAscending?u:h),this.labelEl.appendChild(this.sortIcon),this.sortIcon.classList.add("simple-html-grid-fa-sort-number"),this.sortIcon.setAttribute("data-vgridsort",O.sortable.sortNo))}generateGui(){const i=K=>{const X=ie=>{const z=this.group.rows[this.cellPosition],ue=this.connector;z.sortable.auto!==!1&&ue.sortCallback(ie,z)};K.button===0&&(K.target.addEventListener("mouseup",X),setTimeout(()=>{K.target.removeEventListener("mouseup",X)},500))},a=za("dragstart",()=>this.group.rows[this.cellPosition],this.connector,()=>this.group),u=za("enter",()=>this.group.rows[this.cellPosition],this.connector,()=>this.group),g=za("leave",()=>this.group.rows[this.cellPosition],this.connector,()=>this.group),h=K=>{K.button!==0&&Xn("simple-html-grid-menu-label",K,O,D,()=>this.group.rows[this.cellPosition])},P=this.group.rows[this.cellPosition],O=this.connector,D=this.ref,W=O.config;this.style.display="block",this.style.height=W.cellHeight+"px",this.style.width=this.group.width+"px",this.style.top=this.cellPosition*W.cellHeight+"px",this.labelEl=document.createElement("span"),this.labelEl.classList.add("simple-html-grid-label"),this.labelEl.onmouseenter=!P.disableDragDrop&&u,this.labelEl.onmouseleave=!P.disableDragDrop&&g,this.labelEl.onmousedown=K=>{const X=this.group.rows[this.cellPosition];X.sortable&&i(K),!X.disableDragDrop&&a(K)},this.oncontextmenu=K=>(K.preventDefault(),h(K),!1),this.appendChild(this.labelEl),this.appendChild(W_(this.ref,()=>this.group)),this.appendChild(_a(O,()=>this.group,()=>this.group.rows[this.cellPosition],"left")),this.appendChild(_a(O,()=>this.group,()=>this.group.rows[this.cellPosition],"right")),this.appendChild(_a(O,()=>this.group,()=>this.group.rows[this.cellPosition],"top")),this.appendChild(_a(O,()=>this.group,()=>this.group.rows[this.cellPosition],"bottom")),this.labelEl.innerText=this.capalize(this.group.rows[this.cellPosition].header||""),this.setSortIcon()}}$t(K_,"simple-html-grid-cell-label");class Q_ extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-group-label"),this.styling(),this.ref.addEventListener("column-resize",this),this.rows=this.group.rows.map((i,a)=>{const u=document.createElement("simple-html-grid-cell-filter");return u.connector=this.connector,u.group=this.group,u.ref=this.ref,u.cellPosition=a,this.appendChild(u),u})}handleEvent(i){i.type==="column-resize"&&this.xrender()}disconnectedCallback(){this.ref.removeEventListener("column-resize",this)}styling(){const i=this.connector.config;this.style.display="block";const a=this.connector.config.groupingSet&&this.connector.config.groupingSet.length,u=a?a*15:0;this.style.height=i.__rowHeight+"px",this.style.width=this.group.width+"px",this.style.left=this.group.__left+u+"px",this.style.top=i.__rowHeight+"px"}xrender(){this.styling();const i=this.group.rows;if(i.length!==this.rows.length)if(i.length<this.rows.length){const a=[];this.rows.forEach((u,g)=>{i[g]?a.push(u):this.removeChild(u)}),this.rows=a}else i.forEach((a,u)=>{if(this.rows[u]){const g=this.rows[u];g.connector=this.connector,g.group=this.group,g.ref=this.ref,g.cellPosition=u}else{const g=document.createElement("simple-html-grid-cell-filter");g.connector=this.connector,g.group=this.group,g.ref=this.ref,g.cellPosition=u,this.appendChild(g),this.rows.push(g)}});this.rows.forEach((a,u)=>{a.cellPosition=u,a.group=this.group}),this.rows.forEach(a=>a.updateGui())}}$t(Q_,"simple-html-grid-group-filter");class Z_ extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-group-label"),this.styling(),this.ref.addEventListener("column-resize",this),this.rows=this.group.rows.map((i,a)=>{const u=document.createElement("simple-html-grid-cell-label");return u.connector=this.connector,u.group=this.group,u.ref=this.ref,u.cellPosition=a,this.appendChild(u),u})}handleEvent(i){i.type==="column-resize"&&this.styling()}disconnectedCallback(){this.ref.removeEventListener("column-resize",this)}styling(){const i=this.connector.config;this.style.display="block";const a=this.connector.config.groupingSet&&this.connector.config.groupingSet.length,u=a?a*15:0;this.style.height=i.__rowHeight+"px",this.style.width=this.group.width+"px",this.style.left=this.group.__left+u+"px"}xrender(){this.styling();const i=this.group.rows;if(i.length!==this.rows.length)if(i.length<this.rows.length){const a=[];this.rows.forEach((u,g)=>{i[g]?a.push(u):this.removeChild(u)}),this.rows=a}else i.forEach((a,u)=>{if(this.rows[u]){const g=this.rows[u];g.connector=this.connector,g.group=this.group,g.ref=this.ref,g.cellPosition=u}else{const g=document.createElement("simple-html-grid-cell-label");g.connector=this.connector,g.group=this.group,g.ref=this.ref,g.cellPosition=u,this.appendChild(g),this.rows.push(g)}});this.rows.forEach((a,u)=>{a.cellPosition=u,a.group=this.group}),this.rows.forEach(a=>a.update())}}$t(Z_,"simple-html-grid-group-label");class j_ extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-group-row");const i=this.connector.config;this.updateStyling(),this.rows=i.groups[this.group.i].rows.map((a,u)=>{const g=document.createElement("simple-html-grid-cell-row");return g.connector=this.connector,g.rowNo=this.rowNo,g.cell=a,g.group=this.group.i,g.ref=this.ref,g.cellPosition=u,this.appendChild(g),g})}updateCells(){const i=this.connector.config.groups[this.group.i].rows;if(this.rows.length!==i.length)if(i.length<this.rows.length){const a=[];this.rows.forEach((u,g)=>{i[g]?a.push(u):this.removeChild(u)}),this.rows=a,this.rows.forEach((u,g)=>{u.rowNo=this.rowNo,u.group=g})}else i.forEach((a,u)=>{if(this.rows[u]){const g=this.rows[u];g.rowNo=this.rowNo,g.cell=i[u],g.group=this.group.i,g.cellPosition=u}else{const g=document.createElement("simple-html-grid-cell-row");g.connector=this.connector,g.rowNo=this.rowNo,g.cell=i[u],g.group=this.group.i,g.ref=this.ref,g.cellPosition=u,this.appendChild(g),this.rows.push(g)}});this.rows.forEach((a,u)=>{a.rowNo=this.rowNo,a.group=this.group.i,a.cell=this.connector.config.groups[this.group.i].rows[u],a.cellPosition=u,a.updateInput()}),this.updateStyling()}updateStyling(){const i=this.connector.config,a=i.groupingSet&&i.groupingSet.length,u=a?a*15:0;this.style.height=i.__rowHeight+"px",this.style.width=i.groups[this.group.i].width+"px",this.style.transform=`translate3d(${i.groups[this.group.i].__left+u}px, 0px,  0px)`}handleEvent(i){i.type==="column-resize"&&(this.updateStyling(),this.rows.forEach(a=>{a.updateWidth()}))}disconnectedCallback(){this.ref.removeEventListener("column-resize",this)}}$t(j_,"simple-html-grid-group-row");class X_ extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-header");const i=this.connector.config;this.style.top=i.panelHeight+"px",this.style.height=i.__rowHeight*2+2+"px",this.ref.addEventListener("horizontal-scroll",this),this.ref.addEventListener("reRender",this);const a=this.connector.config.groupingSet&&this.connector.config.groupingSet.length;this.groupMarginEl=document.createElement("simple-html-grid-col"),this.groupMarginEl.classList.add("simple-html-grid-grouping-row"),this.groupMarginEl.style.width=`${a?a*15:0}px`,this.groupMarginEl.style.left="0",this.groupMarginEl.style.display=a?"block":"none",this.appendChild(this.groupMarginEl),this.colLabels=this.connector.config.groups.map(u=>{const g=document.createElement("simple-html-grid-group-label");return g.connector=this.connector,g.ref=this.ref,g.group=u,this.appendChild(g),g}),this.colFilters=this.connector.config.groups.map(u=>{const g=document.createElement("simple-html-grid-group-filter");return g.connector=this.connector,g.ref=this.ref,g.group=u,this.appendChild(g),g})}handleEvent(i){if(i.type==="horizontal-scroll"){const a=this.connector.config;this.style.left=-a.scrollLeft+"px",this.style.width=a.__rowWidth+"px"}if(i.type==="reRender"){const a=this.connector.config,u=this.connector.config.groupingSet&&this.connector.config.groupingSet.length;this.groupMarginEl.style.width=`${u?u*15:0}px`,this.groupMarginEl.style.left="0",this.groupMarginEl.style.display=u?"block":"none",this.style.left=-a.scrollLeft+"px",this.style.width=a.__rowWidth+"px",this.style.top=a.panelHeight+"px",this.style.height=a.__rowHeight*2+2+"px";const g=this.connector.config.groups;if(g.length<this.colLabels.length){const h=[];this.colLabels.forEach((P,O)=>{g[O]?h.push(P):this.removeChild(P)}),this.colLabels=h}else g.forEach((h,P)=>{if(this.colLabels[P]){const O=this.colLabels[P];O.group=g[P]}else{const O=document.createElement("simple-html-grid-group-label");O.connector=this.connector,O.ref=this.ref,O.group=g[P],this.colLabels.push(O),this.appendChild(O)}});if(this.colLabels.forEach((h,P)=>{h.group=g[P],h.xrender()}),g.length<this.colFilters.length){const h=[];this.colFilters.forEach((P,O)=>{g[O]?h.push(P):this.removeChild(P)}),this.colFilters=h}else g.forEach((h,P)=>{if(this.colFilters[P]){const O=this.colFilters[P];O.group=g[P]}else{const O=document.createElement("simple-html-grid-group-filter");O.connector=this.connector,O.ref=this.ref,O.group=g[P],this.colFilters.push(O),this.appendChild(O)}});this.colFilters.forEach((h,P)=>{h.group=g[P],h.xrender()})}}disconnectedCallback(){this.ref.removeEventListener("horizontal-scroll",this),this.ref.removeEventListener("reRender",this)}}$t(X_,"simple-html-grid-header");class Y_ extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-footer");const i=this.connector.config;this.style.height=i.footerHeight+"px",this.ref.addEventListener("reRender",this),this.renderx()}disconnectedCallback(){this.ref.removeEventListener("reRender",this)}handleEvent(i){i.type==="reRender"&&(this.innerHTML="",this.renderx())}showEdit(){const i=document.createElement("div");i.classList.add("grid-edit-button");const a=document.createElement("button");return a.style.padding="2px",a.onclick=u=>{Xn("simple-html-grid-filter-dialog",u,this.connector,this.ref,null,null,null)},a.appendChild(document.createTextNode("Edit filter")),i.append(a),i}renderx(){const i=this.connector.completeDataset.length,a=this.connector.filteredDataset.length;this.connector.config.showDialogInFooter&&this.appendChild(this.showEdit());{const u=document.createElement("div");u.style.textAlign="center",u.appendChild(document.createTextNode(`${a}/${i}`)),this.appendChild(u)}{const u=document.createElement("div");u.style.display="flex",u.style.justifyContent="center";const g=document.createElement("span");g.style.marginRight="5px",g.style.maxWidth="90%;",g.style.whiteSpace="nowrap",g.style.textOverflow="ellipsis",g.appendChild(document.createTextNode(`${this.connector.getFilterString().replace(/\,/g,", ")}`)),u.appendChild(g),this.appendChild(u)}}}$t(Y_,"simple-html-grid-footer");function $_(n){return n&&n[0].toUpperCase()+n.substring(1,n.length)}class J_ extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-panel");const i=this.connector.config;this.style.height=i.panelHeight+"px",this.ref.addEventListener("reRender",this),this.addEventListener("contextmenu",this),this.updateGui()}handleEvent(i){i.type==="reRender"&&this.updateGui(),i.type==="contextmenu"&&(i.preventDefault(),Xn("simple-html-grid-menu-panel",i,this.connector,this.ref))}disconnectedCallback(){this.removeEventListener("contextmenu",this),this.ref.removeEventListener("reRender",this)}updateGui(){this.innerHTML="";const i=this.connector.config.groupingSet||[],a=D=>{D.target.getElementsByClassName("simple-html-grid-icon")[0].classList.remove("simple-html-grid-iconhidden")},u=D=>{D.target.getElementsByClassName("simple-html-grid-icon")[0].classList.add("simple-html-grid-iconhidden")},g=$h("enter",this.connector),h=$h("leave",this.connector),P=q_("dragstart",this.connector);i.map(D=>{const W=()=>{this.connector.removeGroup(D)},K=document.createElement("div");K.classList.add("simple-html-grid-grouping-panel-container"),K.onmouseenter=ce=>{a(ce),g(ce,D.attribute)},K.onmouseleave=ce=>{u(ce),h(ce)},K.onmousedown=ce=>{P(ce,D)};const X=document.createElement("p");X.classList.add("simple-html-grid-grouping-panel-p"),X.appendChild(document.createTextNode(`${$_(D.title||D.attribute)}`));const ie=document.createElement("i"),z="http://www.w3.org/2000/svg",ue=document.createElementNS(z,"svg");ue.classList.add("simple-html-grid-icon","simple-html-grid-iconhidden"),ue.onclick=W,ue.setAttributeNS(null,"viewBox","0 0 16 16");const ee=document.createElementNS(z,"path");return ee.setAttributeNS(null,"d","M3 4l4.3 4L3 12h1.4L8 8.7l3.5 3.3H13L8.6 8 13 4h-1.5L8 7.3 4.4 4H3z"),ue.appendChild(ee),ie.appendChild(ue),X.appendChild(ie),K.appendChild(X),K}).forEach(D=>{this.appendChild(D)})}}$t(J_,"simple-html-grid-panel");class e0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-row"),this.ref.addEventListener("vertical-scroll",this),this.ref.addEventListener("selection",this),this.ref.addEventListener("column-resize",this);const i=this.connector.config.groupingSet&&this.connector.config.groupingSet.length;this.groupMarginEl=document.createElement("simple-html-grid-col"),this.groupMarginEl.classList.add("simple-html-grid-grouping-row"),this.groupMarginEl.style.width=`${i?i*15:0}px`,this.groupMarginEl.style.left="0",this.groupMarginEl.style.display=i?"block":"none",this.groupMarginEl.connector=this.connector,this.groupMarginEl.row=this.row,this.groupDataEl=document.createElement("simple-html-grid-col"),this.groupDataEl.classList.add("simple-html-grid-grouping-row"),this.groupDataEl.style.width=`${i?i*15:0}px`,this.groupDataEl.style.left="0",this.groupDataEl.style.display=i?"block":"none",this.groupDataEl.connector=this.connector,this.groupDataEl.row=this.row,this.appendChild(this.groupMarginEl),this.appendChild(this.groupDataEl),this.colEls=this.ref.colCache.map(a=>{const u=document.createElement("simple-html-grid-group-row");return u.onclick=g=>{this.connector.highlightRow(g,this.row.i)},u.connector=this.connector,u.rowNo=this.row.i,u.ref=this.ref,u.group=a,this.appendChild(u),u}),this.updateView()}verticalScrollEvent(){this.groupMarginEl.row=this.row,this.groupMarginEl.updateGui(),this.groupDataEl.connector=this.connector,this.groupDataEl.row=this.row,this.groupDataEl.ref=this.ref,this.groupDataEl.updateGui(),this.row.update&&(this.colEls.forEach((i,a)=>{i.rowNo=this.row.i,i.group=this.ref.colCache[a],i.updateCells()}),this.row.update=!1,this.updateView())}syncColumnsWithColCache(){if(this.ref.colCache.length<this.colEls.length){const i=[];this.colEls.forEach((a,u)=>{this.ref.colCache[u]?i.push(a):this.removeChild(a)}),this.colEls=i}else this.ref.colCache.forEach((i,a)=>{if(this.colEls[a]){const u=this.colEls[a];u.rowNo=this.row.i,u.group=this.ref.colCache[a]}else{const u=document.createElement("simple-html-grid-group-row");u.onclick=g=>{this.connector.highlightRow(g,this.row.i)},u.connector=this.connector,u.rowNo=this.row.i,u.ref=this.ref,u.group=i,u.group.update=!0,this.colEls.push(u),this.appendChild(u)}});this.colEls.forEach((i,a)=>{i.rowNo=this.row.i,i.group=this.ref.colCache[a],i.updateCells()})}updateRowColumns(){this.groupMarginEl.row=this.row,this.groupMarginEl.updateGui(),this.groupDataEl.connector=this.connector,this.groupDataEl.row=this.row,this.groupDataEl.ref=this.ref,this.groupDataEl.updateGui(),this.colEls.length!==this.ref.colCache.length?this.syncColumnsWithColCache():this.colEls.forEach((i,a)=>{i.rowNo=this.row.i,i.group=this.ref.colCache[a],i.updateCells()}),this.updateView()}horizontalScollEvent(){this.colEls.length!==this.ref.colCache.length?this.syncColumnsWithColCache():this.colEls.forEach((i,a)=>{i.group=this.ref.colCache[a],i.rowNo=this.row.i,i.updateCells()}),this.updateView()}handleEvent(i){if(i.type==="column-resize"){const a=this.connector.displayedDataset[this.row.i];a&&!a.__group&&this.colEls.forEach(u=>{u.updateCells()}),this.updateView()}i.type==="selection"&&this.updateView()}disconnectedCallback(){this.ref.removeEventListener("vertical-scroll",this),this.ref.removeEventListener("selection",this),this.ref.removeEventListener("column-resize",this)}updateView(){var i;const a=this.connector.displayedDataset[this.row.i];this.connector.config.__rowHeight>this.connector.config.cellHeight&&a&&!a.__group?this.classList.add("grouping-row-border"):this.classList.remove("grouping-row-border"),this.style.height=this.connector.getScrollVars.__SCROLL_HEIGHTS[this.row.i]+"px",this.style.transform=`translate3d(0px, ${this.connector.getScrollVars.__SCROLL_TOPS[this.row.i]}px, 0px)`,this.style.display="block",((i=this.row)===null||i===void 0?void 0:i.i)%2===0?this.classList.add("simple-html-grid-row-even"):this.classList.remove("simple-html-grid-row-even"),this.connector.isSelected(this.row.i)?this.classList.add("simple-html-grid-selected-row"):this.classList.remove("simple-html-grid-selected-row")}}$t(e0,"simple-html-grid-row");class t0 extends HTMLElement{connectedCallback(){this.updateGui()}updateGui(){if(this.innerHTML="",this.ref){this.style.width="100%",this.style.height=this.connector.getScrollVars.__SCROLL_HEIGHTS[this.row.i]+"px";const i=this.connector.displayedDataset[this.row.i];if(i&&i.__group){this.style.display="block",this.style.left=(i.__groupLvl?i.__groupLvl*15:0)+"px";const a=()=>{i.__groupExpanded?this.connector.groupCollapse(i.__groupID):this.connector.groupExpand(i.__groupID)},u=document.createElement("i");u.onclick=a,this.appendChild(u);const g="http://www.w3.org/2000/svg",h=document.createElementNS(g,"svg");h.classList.add("simple-html-grid-icon"),h.setAttributeNS(null,"viewBox","0 0 16 16");const P=document.createElementNS(g,"path");P.setAttributeNS(null,"d",i.__groupExpanded?"M4.8 7.5h6.5v1H4.8z":"M7.4 4.8v2.7H4.7v1h2.7v3h1v-3h2.8v-1H8.5V4.8h-1z"),h.appendChild(P),u.appendChild(h);const O=document.createElement("span");O.appendChild(document.createTextNode(`${i.__groupName} (${i.__groupTotal})`)),this.appendChild(O)}else this.style.display="none"}else if(this.connector){const i=this.connector.config.groupingSet&&this.connector.config.groupingSet.length,a=this.row?this.connector.displayedDataset[this.row.i]:null;a&&a.__group?this.style.width=a.__groupLvl*15+"px":this.style.width=(i?i*15:0)+"px",this.style.height=(this.row?this.connector.getScrollVars.__SCROLL_HEIGHTS[this.row.i]:this.connector.config.cellHeight)+"px",this.style.display=i?"block":"none"}}}$t(t0,"simple-html-grid-col");let We=null;class i0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid","simple-html-grid-menu"),document.addEventListener("click",this),setTimeout(()=>{document.addEventListener("contextmenu",this)},50),this.buildHtml();const i=this.getBoundingClientRect(),a=window.innerHeight,u=window.innerWidth;i.bottom>a?this.style.top=`${this.offsetTop-(i.bottom-a)}px`:i.right>u&&(this.style.left=`${this.offsetLeft-(i.right-u)}px`)}disconnectedCallback(){document.removeEventListener("click",this),document.removeEventListener("contextmenu",this)}handleEvent(i){i.target!==this&&this.removeSelf()}capalize(i){return i&&(i=i.toLowerCase(),i[0].toUpperCase()+i.substring(1,i.length))}action(i){return cn(this,null,function*(){if(this.connector.publishEvent(i,this),i==="copy-cell"&&this.rowData)try{let h=function(P){P.clipboardData.setData("text/html",We),P.clipboardData.setData("text/plain",We),P.preventDefault()};var a=h;const u=this.connector.numberFormater,g=this.connector.dateFormater;We=this.rowData[this.cell.attribute],this.cell.type==="date"?We=g.fromDate(We):this.cell.type==="number"&&(We=u.fromNumber(We)),document.addEventListener("copy",h),document.execCommand("copy"),document.removeEventListener("copy",h)}catch(u){console.error(u)}if((i==="copy-column"||i==="copy-column-with-header")&&this.rowData)try{let h=function(O){O.clipboardData.setData("text/html",g()),O.clipboardData.setData("text/plain",u()),O.preventDefault()};var a=h;const u=()=>{We="",i==="copy-column-with-header"&&(We=this.capalize(this.cell.attribute)+`
`);const O=this.connector.numberFormater,D=this.connector.dateFormater;return this.connector.getSelectedRows().forEach(W=>{if(!this.connector.displayedDataset[W].__group){const K=this.connector.displayedDataset[W][this.cell.attribute];this.cell.type==="date"?We=We+D.fromDate(K)+`
`:this.cell.type==="number"?We=We+O.fromNumber(K)+`
`:We=We+(K||"")+`
`}}),We},g=()=>{We=`<html>
                                <body>
                                <style>
                                    table {
                                        border-collapse: collapse;
                                        border:.5pt solid windowtext;
                                    }
                                    td,
                                    th {
                                        border-collapse: collapse;
                                        padding:3px;
                                        border:.5pt solid windowtext;
                                    }
                                </style>
                                <table>`,i==="copy-column-with-header"&&(We=We+"<tr><th>"+this.capalize(this.cell.attribute)+"</th></tr>");const O=this.connector.numberFormater,D=this.connector.dateFormater;return this.connector.getSelectedRows().forEach(W=>{if(!this.connector.displayedDataset[W].__group){const K=this.connector.displayedDataset[W][this.cell.attribute];this.cell.type==="date"?We=We+"<tr><td>"+D.fromDate(K)+"</td></tr>":this.cell.type==="number"?We=We+"<tr><td>"+O.fromNumber(K)+"</td ></tr>":We=We+"<tr><td>"+(K||"")+"</td></tr>"}}),We=We+"</table></body></html>",We};document.addEventListener("copy",h),document.execCommand("copy"),document.removeEventListener("copy",h)}catch(u){console.error(u)}if(i==="copy-row-with-header"&&this.rowData)try{let O=function(W){W.clipboardData.setData("text/html",P()),W.clipboardData.setData("text/plain",h()),W.preventDefault()};var a=O;const u=this.connector.config.groups.flatMap(W=>W.rows.map(K=>K.attribute)),g=this.connector.config.groups.flatMap(W=>W.rows.map(K=>K.type)),h=()=>{We="",u.forEach(X=>{We=We+this.capalize(X)+"	"}),We=We+`
`;const W=this.connector.numberFormater,K=this.connector.dateFormater;return this.connector.getSelectedRows().forEach(X=>{this.connector.displayedDataset[X].__group||(u.forEach((ie,z)=>{const ue=this.connector.displayedDataset[X][ie];g[z]==="date"?We=We+K.fromDate(ue)+"	":g[z]==="number"?We=We+W.fromNumber(ue)+"	":We=We+(ue||"")+"	"}),We=We+`
`)}),We},P=()=>{We=`<html>
                                <body>
                                <style>
                                    table {
                                        border-collapse: collapse;
                                        border:.5pt solid windowtext;
                                    }
                                    td,
                                    th {
                                        border-collapse: collapse;
                                        padding:3px;
                                        border:.5pt solid windowtext;
                                    }
                                </style>
                                <table>`,We=We+"<tr>",u.forEach(X=>{We=We+"<th>"+this.capalize(X)+"</th>"}),We=We+"</tr>";const W=this.connector.numberFormater,K=this.connector.dateFormater;return this.connector.getSelectedRows().forEach(X=>{if(!this.connector.displayedDataset[X].__group){let ie="<tr>";u.forEach((z,ue)=>{const ee=this.connector.displayedDataset[X][z];g[ue]==="date"?ie=ie+"<td>"+K.fromDate(ee)+"</td>":g[ue]==="number"?ie=ie+"<td>"+W.fromNumber(ee)+"</td>":ie=ie+"<td>"+(ee||"")+"</td>"}),We=We+ie+"</tr>"}}),We=We+"</table></body></html>",We};document.addEventListener("copy",O),document.execCommand("copy"),document.removeEventListener("copy",O)}catch(u){console.error(u)}if(i==="paste-into-selected-rows-in-selected-column")try{let u;navigator.clipboard.readText?u=yield navigator.clipboard.readText():u=We,(u==="undefined"||u==="null")&&(u=null),this.pasteIntoCells(u)}catch(u){console.error(u)}i==="clear-cells-selected-rows-in-selected-columns"&&this.pasteIntoCells(null)})}pasteIntoCells(i){const a=this.connector.numberFormater,u=this.connector.dateFormater;this.connector.getSelectedRows().forEach(g=>{this.cell.type==="number"?this.connector.displayedDataset[g][this.cell.attribute]=a.toNumber(i):this.cell.type==="date"?this.connector.displayedDataset[g][this.cell.attribute]=u.toDate(i):this.connector.displayedDataset[g][this.cell.attribute]=i}),this.connector.reRender()}removeSelf(){document.body.removeChild(this)}buildHtml(){{const h=document.createElement("p");h.onclick=()=>this.action("copy-cell"),h.appendChild(document.createTextNode("Copy")),h.classList.add("simple-html-grid-menu-item"),this.appendChild(h)}{const h=document.createElement("p");h.onclick=()=>this.action("copy-column-with-header"),h.appendChild(document.createTextNode("Copy column")),h.classList.add("simple-html-grid-menu-item"),this.appendChild(h)}{const h=document.createElement("p");h.onclick=()=>this.action("copy-row-with-header"),h.appendChild(document.createTextNode("Copy rows")),h.classList.add("simple-html-grid-menu-item"),this.appendChild(h)}if(!this.connector.config.readonly&&!this.cell.readonly){{const h=document.createElement("p");h.onclick=()=>this.action("paste-into-selected-rows-in-selected-column"),h.appendChild(document.createTextNode("Paste into rows")),h.classList.add("simple-html-grid-menu-item"),this.appendChild(h)}{const h=document.createElement("p");h.onclick=()=>this.action("clear-cells-selected-rows-in-selected-columns"),h.appendChild(document.createTextNode("Clear rows")),h.classList.add("simple-html-grid-menu-item"),this.appendChild(h)}}if(this.cell.type==="number"){let h=function(ee,ce){return parseFloat((ee+ce).toFixed(5))},P=function(ee,ce){return ce>ee?ce:ee},O=function(ee,ce){return ee===null||ce<ee?ce:ee},D=function(ee,ce){return Math.round(ce/ee)};var a=h,g=P,u=O,i=D;const W=this.connector.getDatasource(),K=W.getSelection().getSelectedRows(),X=W.getRows();let ie=0,z=0,ue=null;K.forEach(ee=>{const ce=X[ee];ce&&ce[this.cell.attribute]&&(ie=h(ie,ce[this.cell.attribute]),z=P(z,ce[this.cell.attribute]),ue=O(ue,ce[this.cell.attribute]))});{const ee=document.createElement("hr");this.appendChild(ee)}{const ee=document.createElement("p");ee.onclick=()=>cn(this,null,function*(){const $=Math.round(ie*100)/100;yield navigator.clipboard.writeText(nn.fromNumber($))});const ce=Math.round(ie*100)/100;ee.appendChild(document.createTextNode(`Sum: ${nn.fromNumber(ce)}`)),ee.classList.add("simple-html-grid-menu-item"),this.appendChild(ee)}{const ee=document.createElement("p");ee.onclick=()=>cn(this,null,function*(){const $=Math.round(z*100)/100;yield navigator.clipboard.writeText(nn.fromNumber($))});const ce=Math.round(z*100)/100;ee.appendChild(document.createTextNode(`Max: ${nn.fromNumber(ce)}`)),ee.classList.add("simple-html-grid-menu-item"),this.appendChild(ee)}{const ee=document.createElement("p");ee.onclick=()=>cn(this,null,function*(){const $=Math.round(ue*100)/100;yield navigator.clipboard.writeText(nn.fromNumber($))});const ce=Math.round(ue*100)/100;ee.appendChild(document.createTextNode(`Min: ${nn.fromNumber(ce)}`)),ee.classList.add("simple-html-grid-menu-item"),this.appendChild(ee)}{const ee=document.createElement("p");ee.onclick=()=>cn(this,null,function*(){const $=Math.round(D(K.length,ie)*100)/100;yield navigator.clipboard.writeText(nn.fromNumber($))});const ce=Math.round(D(K.length,ie)*100)/100;ee.appendChild(document.createTextNode(`Avg: ${nn.fromNumber(ce)}`)),ee.classList.add("simple-html-grid-menu-item"),this.appendChild(ee)}{const ee=document.createElement("p");ee.onclick=()=>cn(this,null,function*(){yield navigator.clipboard.writeText(nn.fromNumber(K.length))}),ee.appendChild(document.createTextNode(`Rows: ${K.length}`)),ee.classList.add("simple-html-grid-menu-item"),this.appendChild(ee)}}}}$t(i0,"simple-html-grid-menu-row");class n0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid","simple-html-grid-menu"),document.addEventListener("click",this),setTimeout(()=>{document.addEventListener("contextmenu",this)},50),this.buildHtml();const i=this.getBoundingClientRect(),a=window.innerHeight,u=window.innerWidth;i.bottom>a&&(this.style.top=`${this.offsetTop-(i.bottom-a)}px`),i.right>u&&(this.style.left=`${this.offsetLeft-(i.right-u)}px`)}disconnectedCallback(){document.removeEventListener("click",this),document.removeEventListener("contextmenu",this)}handleEvent(i){i.target!==this&&this.removeSelf()}select(i,a,u){i==="sort"&&(this.cell.sortable?(this.cell.sortable.sortAscending=a,this.cell.sortable.noToggle=!0):this.cell.sortable={sortAscending:a,noToggle:!0},this.connector.sortCallback({shiftKey:u},this.cell)),i==="groupBy"&&this.cell.allowGrouping&&this.connector.groupingCallback(null,this.cell,null),this.removeSelf()}removeSelf(){this===null||this===void 0||this.parentNode.removeChild(this)}buildHtml(){const i=[1,1,1,1,1,1,1,1,1].map(()=>document.createElement("p"));i.forEach(a=>a.classList.add("simple-html-grid-menu-item")),i[0].onclick=()=>this.select("sort",!1,!1),i[0].appendChild(document.createTextNode("Sort asc")),i[1].onclick=()=>this.select("sort",!0,!1),i[1].appendChild(document.createTextNode("Sort desc")),i[2].onclick=()=>this.select("sort",!0,!0),i[2].appendChild(document.createTextNode("Sort asc (add)")),i[3].onclick=()=>this.select("sort",!1,!0),i[3].appendChild(document.createTextNode("Sort desc (add)")),i[4].onclick=()=>this.connector.autoResizeColumns(),i[4].appendChild(document.createTextNode("Auto resize columns")),i[5].onclick=()=>this.connector.autoResizeColumns(this.cell),i[5].appendChild(document.createTextNode("Auto resize this column")),i[6].onclick=()=>this.select("groupBy"),i[6].appendChild(document.createTextNode("Group by")),i[7].onclick=()=>{const a=this.cell;this.connector.config.optionalCells||(this.connector.config.optionalCells=[]),this.connector.config.optionalCells.push(a);let u=null;this.connector.config.groups.forEach((g,h)=>{const P=g.rows.indexOf(a);P!==-1&&g.rows.splice(P,1),g.rows.length===0&&(u=h)}),u!==null&&this.connector.config.groups.splice(u,1),this.connector.manualConfigChange(this.connector.config)},i[7].appendChild(document.createTextNode("Hide column")),i[8].onclick=a=>Xn("simple-html-grid-column-chooser",a,this.connector,this.ref,null,null,null),i[8].appendChild(document.createTextNode("Column Chooser")),i.forEach(a=>this.appendChild(a))}}$t(n0,"simple-html-grid-menu-label");class r0 extends HTMLElement{constructor(){super(...arguments),this.defaultMenu=!0,this.selectAll=!0,this.availableOnly=!1,this.enableAvailableOnlyOption=!1}connectedCallback(){var i;this.classList.add("simple-html-grid","simple-html-grid-menu"),document.addEventListener("click",this),this.ref.addEventListener("vertical-scroll",this),setTimeout(()=>{document.addEventListener("contextmenu",this)},50),this.search=((i=this.cell.filterable)===null||i===void 0?void 0:i.currentValue)||null,this.search&&(this.serachRegex=new RegExp(`${this.search.replace(/\*/g,".*").replace(/\%/g,".*")}.*`,"gim")),this.getDropdownData(),this.generateMainMenu();const a=this.getBoundingClientRect(),u=window.innerHeight,g=window.innerWidth;a.bottom>u&&(this.style.top=`${this.offsetTop-(a.bottom-u)}px`),a.right>g&&(this.style.left=`${this.offsetLeft-(a.right-g)}px`)}getDropdownData(){var i;if(!this.cell.type||this.cell.type==="text"){const a=this.availableOnly?this.connector.getDatasource().getRows(!0):this.connector.getDatasource().getAllData(),u=this.cell.attribute,g=new Set,h=a.length;let P=!1;this.search&&(this.serachRegex=new RegExp(`${this.search.replace(/\*/g,".*").replace(/\%/g,".*")}.*`,"gim"));for(let W=0;W<h;W++)a[W]&&a[W][u]&&g.size<50?(typeof a[W][u]=="string"&&(this.search?this.serachRegex.test(a[W][u])&&g.add(a[W][u].toLocaleUpperCase()):g.add(a[W][u].toLocaleUpperCase())),typeof a[W][u]=="number"&&(this.search?this.serachRegex.test(a[W][u])&&g.add(a[W][u]):g.add(a[W][u]))):P=!0;this.dataFilterSet=g,P&&this.dataFilterSet.add("NULL");const O=Array.from(g).sort();P&&O.unshift("NULL"),this.dataFilterSetFull=new Set(O);const D=this.connector.getDatasource().getFilter();!((i=D==null?void 0:D.filterArguments)===null||i===void 0)&&i.length&&(D==null||D.filterArguments.forEach(W=>{if(W.attribute===this.cell.attribute&&Array.isArray(W.value)&&(W.operator==="IN"&&(this.dataFilterSet=new Set(W.value),this.selectAll=!1),W.operator==="NOT_IN")){const K=new Set(W.value);this.dataFilterSet=new Set(Array.from(this.dataFilterSetFull).filter(X=>!K.has(X))),this.selectAll=!1}})),this.enableAvailableOnlyOption=this.connector.getDatasource().getRows(!0).length!==this.connector.getDatasource().getAllData().length||this.dataFilterSet.size===this.dataFilterSetFull.size}}disconnectedCallback(){document.removeEventListener("click",this),document.removeEventListener("contextmenu",this),this.ref.removeEventListener("vertical-scroll",this)}handleEvent(i){if(this.wait){this.wait=!1;return}i.target!==this&&this.removeSelf()}select(i){this.cell.filterable&&(this.cell.filterable.operator=i),this.removeSelf()}removeSelf(){document.body.removeChild(this)}clearAll(){this.connector.setCurrentFilter(null),this.connector.config.groups.flatMap(a=>a.rows).forEach(a=>{const u=a.filterable;u&&(u.currentValue=null)}),this.connector.reRender(),this.connector.reRunFilter()}clearThis(){const i=this.connector.getDatasource().getFilter(),a=g=>{g&&Array.isArray(g.filterArguments)&&(g.filterArguments=g.filterArguments.filter(h=>h.attribute!==this.cell.attribute),g.filterArguments.forEach(h=>{h.type==="GROUP"&&a(h)}))};a(i),this.connector.config.groups.flatMap(g=>g.rows).forEach(g=>{const h=g.filterable;h&&this.cell.attribute===g.attribute&&(h.currentValue=null)}),this.connector.reRender(),this.connector.reRunFilter()}setFilter(i){const a=this.connector.getDatasource().getFilter(),u=h=>{h&&Array.isArray(h.filterArguments)&&(h.filterArguments=h.filterArguments.filter(P=>P.attribute!==this.cell.attribute),h.filterArguments.forEach(P=>{P.type==="GROUP"&&u(P)}))};u(a),this.connector.config.groups.flatMap(h=>h.rows).forEach(h=>{const P=h.filterable;P&&this.cell.attribute===h.attribute&&(P.currentValue=null)}),a&&Array.isArray(a.filterArguments)?(a.filterArguments.push({type:"CONDITION",attribute:this.cell.attribute,operator:i,attributeType:this.cell.type}),this.connector.getDatasource().setFilter(a)):this.connector.getDatasource().setFilter({type:"GROUP",logicalOperator:"AND",filterArguments:[{type:"CONDITION",attribute:this.cell.attribute,operator:i,attributeType:this.cell.type}]}),this.connector.reRender(),this.connector.reRunFilter()}generateOperatorMenu(){var i,a;this.innerHTML="";const u=((a=(i=this.cell)===null||i===void 0?void 0:i.filterable)===null||a===void 0?void 0:a.operator)||"BEGIN_WITH";{const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.onclick=()=>this.select("EQUAL"),P.style.fontWeight=u==="EQUAL"?"bold":"",P.appendChild(document.createTextNode("Equal to")),this.appendChild(P)}{const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.onclick=()=>this.select("NOT_EQUAL_TO"),P.style.fontWeight=u==="NOT_EQUAL_TO"?"bold":"",P.appendChild(document.createTextNode("Not equal to")),this.appendChild(P)}{const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.onclick=()=>this.select("BEGIN_WITH"),P.style.fontWeight=u==="BEGIN_WITH"?"bold":"",P.appendChild(document.createTextNode("Begin with")),this.appendChild(P)}{const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.onclick=()=>this.select("GREATER_THAN"),P.style.fontWeight=u==="GREATER_THAN"?"bold":"",P.appendChild(document.createTextNode("Greater than")),this.appendChild(P)}{const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.onclick=()=>this.select("GREATER_THAN_OR_EQUAL_TO"),P.style.fontWeight=u==="GREATER_THAN_OR_EQUAL_TO"?"bold":"",P.appendChild(document.createTextNode("Greater than or equal")),this.appendChild(P)}{const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.onclick=()=>this.select("LESS_THAN"),P.style.fontWeight=u==="LESS_THAN"?"bold":"",P.appendChild(document.createTextNode("Less than")),this.appendChild(P)}{const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.onclick=()=>this.select("LESS_THAN_OR_EQUAL_TO"),P.style.fontWeight=u==="LESS_THAN_OR_EQUAL_TO"?"bold":"",P.appendChild(document.createTextNode("Less than or equal")),this.appendChild(P)}{const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.onclick=()=>this.select("END_WITH"),P.style.fontWeight=u==="END_WITH"?"bold":"",P.appendChild(document.createTextNode("End with")),this.appendChild(P)}{const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.onclick=()=>this.select("CONTAINS"),P.style.fontWeight=u==="CONTAINS"?"bold":"",P.appendChild(document.createTextNode("Contains")),this.appendChild(P)}{const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.onclick=()=>this.select("DOES_NOT_CONTAIN"),P.style.fontWeight=u==="DOES_NOT_CONTAIN"?"bold":"",P.appendChild(document.createTextNode("Does not contain")),this.appendChild(P)}{const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.onclick=()=>this.select("END_WITH"),P.style.fontWeight=u==="END_WITH"?"bold":"",P.appendChild(document.createTextNode("End with")),this.appendChild(P)}const g=document.createElement("hr");this.appendChild(g);const h=document.createElement("p");h.classList.add("simple-html-grid-menu-item"),h.appendChild(document.createTextNode("Back")),h.onclick=()=>{this.defaultMenu=!0,this.wait=!0,this.generateMainMenu()},this.appendChild(h)}filterValueClick(i){this.wait=!0,this.selectAll=!1,this.dataFilterSet.has(i)?this.dataFilterSet.delete(i):this.dataFilterSet.add(i),this.selectAll=this.dataFilterSetFull.size===this.dataFilterSet.size&&!this.availableOnly;const a=this.scrollAreaRef.scrollTop;this.generateMainMenu(),this.scrollAreaRef.scrollTop=a}selectAllClick(){this.wait=!0,this.selectAll=!this.selectAll,this.selectAll?this.dataFilterSet=new Set(this.dataFilterSetFull):this.dataFilterSet=new Set,this.generateMainMenu()}generateMainMenu(){this.innerHTML="";const i=()=>{this.wait=!0,this.availableOnly=!this.availableOnly,this.selectAll=this.dataFilterSetFull.size===this.dataFilterSet.size&&!this.availableOnly,this.getDropdownData(),this.generateMainMenu()},a=()=>{const g=Array.from(this.dataFilterSetFull).filter(h=>!this.dataFilterSet.has(h));g.length<this.dataFilterSet.size?this.connector.filterCallback(null,this.cell,g.length?g:null,this.search?this.search:null,!!g.length):this.connector.filterCallback(null,this.cell,this.dataFilterSet.size?Array.from(this.dataFilterSet):null,this.search?this.search:null,!1)};let u=document.createElement("p");if(u.classList.add("simple-html-grid-menu-item"),u.onclick=()=>{this.defaultMenu=!1,this.wait=!0,this.generateOperatorMenu()},u.appendChild(document.createTextNode("Filters")),this.appendChild(u),u=document.createElement("hr"),this.appendChild(u),u=document.createElement("p"),u.classList.add("simple-html-grid-menu-item"),u.onclick=g=>Xn("simple-html-grid-filter-dialog",g,this.connector,this.ref,null,null,null),u.appendChild(document.createTextNode("Advanced")),this.appendChild(u),u=document.createElement("hr"),this.appendChild(u),u=document.createElement("p"),u.classList.add("simple-html-grid-menu-item"),u.onclick=()=>this.clearAll(),u.appendChild(document.createTextNode("Remove all filters")),this.appendChild(u),u=document.createElement("p"),u.classList.add("simple-html-grid-menu-item"),u.onclick=()=>this.clearThis(),u.appendChild(document.createTextNode("Reset column filter")),this.appendChild(u),u=document.createElement("p"),u.classList.add("simple-html-grid-menu-item"),u.onclick=()=>this.setFilter("IS_BLANK"),u.appendChild(document.createTextNode("Set blank filter")),this.appendChild(u),u=document.createElement("p"),u.classList.add("simple-html-grid-menu-item"),u.onclick=()=>this.setFilter("IS_NOT_BLANK"),u.appendChild(document.createTextNode("Set not blank filter")),this.appendChild(u),u=document.createElement("hr"),this.appendChild(u),this.enableAvailableOnlyOption){u=document.createElement("div"),u.style.padding="2px";const g=document.createElement("input");g.style.padding="2px",g.type="checkbox",g.checked=this.availableOnly,g.onclick=()=>i(),u.appendChild(g);const h=document.createElement("label");h.style.padding="2px",h.onclick=()=>i(),h.appendChild(document.createTextNode("Filter Available")),u.appendChild(h),u.classList.add("simple-html-defaults"),this.appendChild(u)}if(this.cell.type==="text"||this.cell.type===void 0){const g=document.createElement("input");g.classList.add("simple-html-grid-menu-item-input"),g.style.outline="none",g.style.width="100%",g.type="text",g.placeholder="search",g.value=this.search,g.checked=this.availableOnly,g.onclick=()=>{this.wait=!0},g.oninput=O=>{this.search=O.target.value||null,this.getDropdownData(),this.scrollAreaRef.innerText="",this.generateScrollListItems(this.scrollAreaRef)},this.appendChild(g);const h=document.createElement("div");h.style.overflowY="auto",h.style.maxHeight="250px",this.generateScrollListItems(h),this.appendChild(h),this.scrollAreaRef=h;const P=document.createElement("p");P.classList.add("simple-html-grid-menu-item"),P.classList.add("simple-html-grid-menu-item-center"),P.onclick=()=>a(),P.appendChild(document.createTextNode("Run filter")),this.appendChild(P)}}generateScrollListItems(i){const a=document.createElement("div");a.style.padding="2px";const u=document.createElement("input");u.style.padding="2px",u.type="checkbox",u.checked=this.selectAll,u.onclick=()=>this.selectAllClick(),a.appendChild(u);const g=document.createElement("label");g.style.padding="2px",g.onclick=()=>this.selectAllClick(),g.appendChild(document.createTextNode("Select all")),a.appendChild(g),a.classList.add("simple-html-defaults"),i.appendChild(a),Array.from(this.dataFilterSetFull).forEach(h=>{const P=document.createElement("div");P.style.padding="2px",P.style.display="flex",P.className="simple-html-grid-hover";const O=document.createElement("input");O.style.padding="2px",O.type="checkbox",O.checked=this.dataFilterSet.has(h),O.onclick=()=>this.filterValueClick(h),P.appendChild(O);const D=document.createElement("label");D.style.padding="2px",D.style.width="100%",D.onclick=()=>this.filterValueClick(h),D.appendChild(document.createTextNode(h==="NULL"?"Blank":h)),P.appendChild(D),i.appendChild(P),i.classList.add("simple-html-defaults")})}}$t(r0,"simple-html-grid-menu-filter");class s0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid","simple-html-grid-menu"),document.addEventListener("click",this),setTimeout(()=>{document.addEventListener("contextmenu",this)},50),this.buildHtml();const i=this.getBoundingClientRect(),a=window.innerHeight,u=window.innerWidth;i.bottom>a&&(this.style.top=`${this.offsetTop-(i.bottom-a)}px`),i.right>u&&(this.style.left=`${this.offsetLeft-(i.right-u)}px`)}disconnectedCallback(){document.removeEventListener("click",this),document.removeEventListener("contextmenu",this)}handleEvent(i){i.target!==this&&this.removeSelf()}select(i){i==="clear"&&(this.connector.config.groupingExpanded=[],this.connector.config.groupingSet=[],this.connector.manualConfigChange()),i==="collapse"&&this.connector.groupCollapse(null),i==="expand"&&this.connector.groupExpand(null),this.removeSelf()}removeSelf(){document.body.removeChild(this)}buildHtml(){const i=[1,1,1].map(()=>document.createElement("p"));i.forEach(a=>a.classList.add("simple-html-grid-menu-item")),i[0].onclick=()=>this.select("clear"),i[0].appendChild(document.createTextNode("Clear grouping")),i[1].onclick=()=>this.select("collapse"),i[1].appendChild(document.createTextNode("Collapse all")),i[2].onclick=()=>this.select("expand"),i[2].appendChild(document.createTextNode("Expand all")),i.forEach(a=>this.appendChild(a))}}$t(s0,"simple-html-grid-menu-panel");function a0(n,i,a){const u="http://www.w3.org/2000/svg",g=document.createElementNS(u,"svg");g.setAttributeNS(null,"viewBox","0 0 24 24"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"stroke-linecap","round"),g.setAttributeNS(null,"stroke-linejoin","round"),g.setAttributeNS(null,"stroke-width","2"),g.setAttributeNS(null,"stroke","currentColor");const h=document.createElementNS(u,"path");h.setAttributeNS(null,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),g.appendChild(h);const P=document.createElement("button");return P.classList.add("dialog-item-x","dialog-condition-trash"),P.onclick=()=>{i&&i.splice(a,1),n.generate()},P.appendChild(g),P}function o0(n,i){const a="http://www.w3.org/2000/svg",u=document.createElementNS(a,"svg");u.setAttributeNS(null,"viewBox","0 0 24 24"),u.setAttributeNS(null,"fill","none"),u.setAttributeNS(null,"stroke-linecap","round"),u.setAttributeNS(null,"stroke-linejoin","round"),u.setAttributeNS(null,"stroke-width","2"),u.setAttributeNS(null,"stroke","currentColor");const g=document.createElementNS(a,"path");g.setAttributeNS(null,"d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"),u.appendChild(g);const h=document.createElement("button");return h.classList.add("dialog-item-x","dialog-condition-type"),h.onclick=()=>{n.valueType=n.valueType==="VALUE"?"ATTRIBUTE":"VALUE",i.generate()},h.appendChild(u),h}function l0(n,i){if(n.operator==="IN"||n.operator==="NOT_IN"){const u=document.createElement("textarea");return u.classList.add("dialog-item-y"),u.style.textAlign="center",u.oninput=g=>{const h=g.target.value.toUpperCase().split(`
`);h[h.length-1]===""&&h.pop(),n.value=h},u.textContent=Array.isArray(n.value)?n.value.join(`
`):n.value.toString(),u}const a=document.createElement("input");switch(a.classList.add("dialog-item-y"),a.style.textAlign="center",n.attributeType){case"boolean":return a.type="checkbox",a.checked=n.value,a.onchange=u=>{n.value=u.target.checked},a.oninput=u=>{n.value=u.target.checked},a;case"image":case"empty":case"date":return a.type="text",a.placeholder=i.connector.dateFormater.getPlaceHolderDate(),a.value=i.connector.dateFormater.fromDate(n.value),a.onchange=u=>{n.value=i.connector.dateFormater.toDate(u.target.value)},a.oninput=u=>{n.value=u.target.value},a;case"number":return a.type="text",a.value=i.connector.numberFormater.fromNumber(n.value),a.oninput=u=>{n.value=i.connector.numberFormater.toNumber(u.target.value)},a;default:return a.type="text",a.value=n.value,a.oninput=u=>{n.value=u.target.value},a}}function Lu(n,i){const a=document.createElement("simple-html-grid-menu-custom");a.style.top=n.clientY+document.documentElement.scrollTop+"px",a.style.left=n.clientX+document.documentElement.scrollLeft+"px",a.style.maxHeight="300px",a.style["overflow-y"]="auto",a.rows=i,document.body.appendChild(a)}function u0(n,i){const a=document.createElement("button");a.style.margin="1px",a.classList.add("dialog-item-y"),a.onclick=g=>{Lu(g,[{operator:"BEGIN_WITH",title:"Begin with",callback:()=>{n.operator="BEGIN_WITH",i.generate()}},{operator:"EQUAL",title:"Equal to",callback:()=>{n.operator="EQUAL",i.generate()}},{operator:"CONTAINS",title:"Contains",callback:()=>{n.operator="CONTAINS",i.generate()}},{operator:"DOES_NOT_CONTAIN",title:"Does not contain",callback:()=>{n.operator="DOES_NOT_CONTAIN",i.generate()}},{operator:"END_WITH",title:"End with",callback:()=>{n.operator="END_WITH",i.generate()}},{operator:"GREATER_THAN",title:"Greater than",callback:()=>{n.operator="GREATER_THAN",i.generate()}},{operator:"GREATER_THAN_OR_EQUAL_TO",title:"Greater than or equal to",callback:()=>{n.operator="GREATER_THAN_OR_EQUAL_TO",i.generate()}},{operator:"LESS_THAN",title:"Less than",callback:()=>{n.operator="LESS_THAN",i.generate()}},{operator:"LESS_THAN_OR_EQUAL_TO",title:"Less then or equal to",callback:()=>{n.operator="LESS_THAN_OR_EQUAL_TO",i.generate()}},{operator:"NOT_EQUAL_TO",title:"Not Equal to",callback:()=>{n.operator="NOT_EQUAL_TO",i.generate()}},{operator:"IN",title:"IN",callback:()=>{n.operator="IN",i.generate()}},{operator:"NOT_IN",title:"NOT IN",callback:()=>{n.operator="NOT_IN",i.generate()}},{operator:"IS_BLANK",title:"IS BLANK",callback:()=>{n.operator="IS_BLANK",i.generate()}},{operator:"IS_NOT_BLANK",title:"IS NOT BLANK",callback:()=>{n.operator="IS_NOT_BLANK",i.generate()}}])};const u=document.createElement("b");return u.appendChild(document.createTextNode(Ss[n.operator])),a.appendChild(u),a}function Jh(n,i,a){const u=document.createElement("button");u.classList.add("dialog-item-y"),u.onclick=h=>{Lu(h,i.filterAttributes.map(P=>({title:P.attribute,callback:()=>{a?n.value=P.attribute:n.attribute=P.attribute,n.attributeType=P.type,i.generate()}})))};let g=n.value||"click to select column";return a!==!0&&(g=n.attribute),u.appendChild(document.createTextNode(g)),u}function h0(n,i,a){return i.width=a+i.width,Array.isArray(n)?n.map((u,g)=>{if(u.type==="GROUP")return Nf(u,i,a,n);{const h=document.createElement("li");return h.classList.add("dialog-row"),h.appendChild(Jh(u,i)),h.appendChild(u0(u,i)),u.operator!=="IS_BLANK"&&u.operator!=="IS_NOT_BLANK"&&h.appendChild(u.valueType==="VALUE"?l0(u,i):Jh(u,i,!0)),h.appendChild(o0(u,i)),h.appendChild(a0(i,n,g)),h}}):null}function Nf(n,i,a,u){const g=document.createElement("ul");g.classList.add("dialog-row","main-group",a?"skipme":"first-dialog-row"),g.style.flexFlow="column";const h=document.createElement("div");h.classList.add("dialog-row"),h.style.flexFlow="row";const P=document.createElement("button");P.classList.add("dialog-item-x","group-operator"),P.onclick=()=>{n.logicalOperator=n.logicalOperator==="AND"?"OR":"AND",i.generate()};const O=document.createElement("b");O.appendChild(document.createTextNode(n.logicalOperator)),P.appendChild(O),h.appendChild(P);const D=document.createElement("button");D.classList.add("dialog-item-x"),D.onclick=ce=>{Lu(ce,[{title:"Insert Group",callback:()=>{const $=n;n.type="GROUP",n.logicalOperator="AND",n.filterArguments=[JSON.parse(JSON.stringify($))],i.generate()}},{title:"Add Group",callback:()=>{n.filterArguments.push({type:"GROUP",logicalOperator:"AND",filterArguments:[]}),i.generate()}},{title:"Add condition",callback:()=>{n.filterArguments.splice(0,0,{type:"CONDITION",logicalOperator:"NONE",attribute:"click to select column",operator:"EQUAL",valueType:"VALUE",attributeType:"text",filterArguments:[],value:""}),i.generate()}}])};const W="http://www.w3.org/2000/svg",K=document.createElementNS(W,"svg");K.setAttributeNS(null,"viewBox","0 0 24 24"),K.setAttributeNS(null,"fill","none"),K.setAttributeNS(null,"stroke-linecap","round"),K.setAttributeNS(null,"stroke-linejoin","round"),K.setAttributeNS(null,"stroke-width","2"),K.setAttributeNS(null,"stroke","currentColor");const X=document.createElementNS(W,"path");X.setAttributeNS(null,"d","M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"),K.appendChild(X),D.appendChild(K),h.appendChild(D);const ie=document.createElement("button");ie.classList.add("dialog-item-x"),ie.onclick=()=>{u&&u.splice(u.indexOf(n),1),u||(n.filterArguments=[]),i.generate()};const z=document.createElementNS(W,"svg");z.setAttributeNS(null,"viewBox","0 0 24 24"),z.setAttributeNS(null,"fill","none"),z.setAttributeNS(null,"stroke-linecap","round"),z.setAttributeNS(null,"stroke-linejoin","round"),z.setAttributeNS(null,"stroke-width","2"),z.setAttributeNS(null,"stroke","currentColor");const ue=document.createElementNS(W,"path");ue.setAttributeNS(null,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),z.appendChild(ue),ie.appendChild(z),h.appendChild(ie),g.appendChild(h);const ee=h0(n.filterArguments,i,a+1);return ee&&ee.length&&ee.forEach(ce=>{g.appendChild(ce)}),g}class c0 extends HTMLElement{connectedCallback(){this.style.top="0",this.style.left="0";const i={type:"GROUP",logicalOperator:"AND",filterArguments:[]};this.filter=this.connector.getCurrentFilter()||i,Array.isArray(this.filter)&&(this.filter=i),this.classList.add("simple-html-grid-menu-full"),this.filterAttributes=this.connector.config.groups.flatMap(a=>a.rows),Array.isArray(this.connector.config.optionalCells)&&(this.filterAttributes=this.filterAttributes.concat(this.connector.config.optionalCells)),this.generate()}handleEvent(i){i.target!==this&&this.removeSelf()}removeSelf(){document.body.removeChild(this)}generate(){this.innerHTML="";const i=document.createElement("div");i.style.width="650px",i.classList.add("simple-html-grid","simple-html-filter-dialog");const a=document.createElement("div");a.classList.add("dialog-row","main-group","filter-dialog-top-row");const u=document.createElement("span");u.appendChild(document.createTextNode("Filter Editor")),a.appendChild(u),i.appendChild(a),i.appendChild(Nf(this.filter,this,0)),this.appendChild(i);const g=document.createElement("div");g.classList.add("dialog-row","main-group","filter-dialog-bottom-row"),i.appendChild(g);const h=document.createElement("button");h.classList.add("dialog-item-buttombuttons"),h.onclick=()=>{this.removeSelf()},h.appendChild(document.createTextNode("Cancel")),g.appendChild(h),i.appendChild(g);const P=document.createElement("button");P.classList.add("dialog-item-buttombuttons"),P.onclick=()=>{this.connector.config.groups.flatMap(W=>W.rows).forEach(W=>{const K=W.filterable;K&&(K.currentValue=null)}),this.connector.setCurrentFilter(this.filter),this.connector.reRunFilter()},P.appendChild(document.createTextNode("Apply")),g.appendChild(P);const O=document.createElement("button");O.classList.add("dialog-item-buttombuttons"),O.onclick=()=>{this.connector.config.groups.flatMap(W=>W.rows).forEach(W=>{const K=W.filterable;K&&(K.currentValue=null)}),this.connector.setCurrentFilter(this.filter),this.connector.reRunFilter(),this.removeSelf()},O.appendChild(document.createTextNode("OK")),g.appendChild(O)}}$t(c0,"simple-html-grid-filter-dialog");class f0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid","simple-html-grid-menu"),this.ref.addEventListener("reRender",this),this.show()}handleEvent(i){if(i.type==="reRender"){this.innerHTML="",this.show();return}i.target!==this&&this.removeSelf()}removeSelf(){document.body.removeChild(this),this.ref.removeEventListener("reRender",this)}show(){var i;const a=document.createElement("div");a.classList.add("simple-html-grid");const u=document.createElement("span");u.classList.add("block","simple-html-grid-menu-item"),u.onclick=()=>{this.removeSelf()};const g=document.createElement("b");g.appendChild(document.createTextNode("Close")),u.appendChild(g),a.appendChild(u),this.appendChild(a);const h=(i=this.connector.config.optionalCells)===null||i===void 0?void 0:i.map(P=>{const O=za("dragstart",()=>P,this.connector,null),D=document.createElement("span");return D.classList.add("block","simple-html-grid-menu-item"),D.onmousedown=W=>{O(W)},D.appendChild(document.createTextNode(P.header)),D});h&&h.length&&h.forEach(P=>{this.appendChild(P)})}}$t(f0,"simple-html-grid-column-chooser");class d0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid","simple-html-grid-menu"),setTimeout(()=>{document.addEventListener("click",this),document.addEventListener("contextmenu",this)},50),this.renderx()}disconnectedCallback(){document.removeEventListener("click",this),document.removeEventListener("contextmenu",this)}handleEvent(i){i.target!==this&&this.removeSelf()}removeSelf(){document.body.removeChild(this)}renderx(){this.rows.forEach(i=>{const a=document.createElement("p");a.classList.add("simple-html-grid-menu-item"),a.onclick=()=>i.callback(i),a.appendChild(document.createTextNode(i.title)),this.appendChild(a)})}}$t(d0,"simple-html-grid-menu-custom");let zi;function p0(n,i,a){return u=>{function g(){var P,O;const D=u.target.scrollLeft,W=n.config.scrollLeft;let K=!1;if(Math.abs(D-W)>2e3&&(K=!0),K||zi)zi&&clearTimeout(zi),zi=setTimeout(()=>{a.resetColCache(),zi=null,a.getElementsByTagName("simple-html-grid-body")[0].rows.forEach(ie=>{ie.horizontalScollEvent()}),a.colCache.forEach(ie=>ie.update=!1)},70);else{const X=a.getElementsByTagName("simple-html-grid-body")[0],ie=X==null?void 0:X.clientWidth,z=X==null?void 0:X.scrollLeft,ue=[];let ee=Math.floor(ie/50)||22;if(ee>n.config.groups.length&&(ee=n.config.groups.length),n.config.groups.forEach((J,te)=>{const pe=J.__left+J.width,we=J.__left,B=ie+z;if(pe>=z&&we<=B){ue.push({i:te,update:!0,found:!1});return}}),ue.length<ee)for(;ue.length<ee;){let J=ue[ue.length-1].i+1;J>=n.config.groups.length?(J=ue[0].i-1,ue.unshift({i:J,update:!0,found:!1})):ue.push({i:J,update:!0,found:!1})}a.colCache=((O=(P=X.rows[0])===null||P===void 0?void 0:P.colEls)===null||O===void 0?void 0:O.map(J=>J.group))||[],a.colCache.forEach(J=>J.found=!1);const ce=ue.map(J=>J.i);a.colCache.forEach(J=>{ce.indexOf(J.i)!==-1?(J.found=!0,J.update=!1,ce.splice(ce.indexOf(J.i),1)):(J.found=!1,J.update=!0)}),ce.length&&a.colCache.forEach(J=>{J.update&&ce.length&&(J.i=ce.pop(),J.found=!0)});let $=a.colCache.length;for(let J=0;J<$;J++)a.colCache[J].found===!1&&(X.rows.forEach(te=>{te.colEls[J].parentNode.removeChild(te.colEls[J]),te.colEls.splice(J,1)}),a.colCache.splice(J,1),J--,$--);zi=null,X.rows.forEach(J=>{J.horizontalScollEvent()}),a.colCache.forEach(J=>{J.update=!1})}n.config.scrollLeft=u.target.scrollLeft,a.triggerEvent("horizontal-scroll")}function h(){document.activeElement&&document.activeElement.blur();const P=u.target.scrollTop,O=n.config.lastScrollTop;n.config.lastScrollTop=P;let D=!1;Math.abs(P-O)>700&&(D=!0),D||zi?(zi&&clearTimeout(zi),zi=setTimeout(()=>{zi=null,Ya(n,i,a,P)},90)):(zi=null,Ya(n,i,a,P))}n.config.scrollLeft!==u.target.scrollLeft&&g(),n.config.lastScrollTop!==u.target.scrollTop&&h()}}function ec(n,i,a){const u=p0(n,i,a),g=Yh("enter",n),h=Yh("leave",n);if(n.config.delayRowRenderToNextTick)setTimeout(()=>{const W=document.createElement("simple-html-grid-body");W.connector=n,W.ref=a,W.rowPositionCache=i,W.onscroll=u,a.appendChild(W)},n.config.delayMs||0);else{const W=document.createElement("simple-html-grid-body");W.connector=n,W.ref=a,W.rowPositionCache=i,W.onscroll=u,a.appendChild(W)}const P=document.createElement("simple-html-grid-panel");P.connector=n,P.ref=a,P.onmouseleave=h,P.onmouseenter=g,a.appendChild(P);const O=document.createElement("simple-html-grid-header");O.connector=n,O.ref=a,a.appendChild(O);const D=document.createElement("simple-html-grid-footer");D.connector=n,D.ref=a,a.appendChild(D)}class g0 extends HTMLElement{constructor(){super(...arguments),this.rowCache=[],this.colCache=[]}set interface(i){this.__DATASOURCE_INTERFACE!==i&&(this.__DATASOURCE_INTERFACE=i,this.__DATASOURCE_INTERFACE.connectGrid(this)),this.resizeInit||this.initResizerEvent()}get interface(){return this.__DATASOURCE_INTERFACE}connectedCallback(){this.resizeInit=!1,this.interface&&this.isConnected&&(this.oldHeight=this.clientHeight,this.oldWidth=this.clientWidth,this.resizeTimer,this.resetRowCache(),this.interface.connectGrid(this),this.children.length||ec(this.interface,this.rowCache,this),this.initResizerEvent()),this.onkeydown=i=>{i.ctrlKey===!0&&(i.key==="A"||i.key==="a")&&(i.preventDefault(),this.interface.selectAll(),this.reRender())}}initResizerEvent(){new ResizeObserver(()=>{this.isConnected&&((this.oldHeight!==this.clientHeight||this.oldWidth!==this.clientWidth&&this.resizeInit)&&(this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.resetRowCache(),this.reRender()},100)),this.resizeInit=!0)}).observe(this)}disconnectedCallback(){this.__DATASOURCE_INTERFACE&&this.__DATASOURCE_INTERFACE.disconnectGrid(this)}reRender(){const i=this.getElementsByTagName("simple-html-grid-body")[0];i&&i.scrollTop!==void 0&&this.interface&&Ya(this.interface,this.rowCache,this,i.scrollTop,!0),this.triggerEvent("reRender")}manualConfigChange(){this.children.length||ec(this.interface,this.rowCache,this),this.reRender()}triggerEvent(i,a){const u=new CustomEvent(i,{bubbles:!0,detail:{data:a}});this.dispatchEvent(u)}resetColCache(){const i=this.getElementsByTagName("simple-html-grid-body")[0],a=(i==null?void 0:i.clientWidth)||1980,u=(i==null?void 0:i.scrollLeft)||0;let g=Math.floor(a/50)||22;if(g>this.interface.config.groups.length&&(g=this.interface.config.groups.length),this.colCache=[],this.interface.config.groups.forEach((h,P)=>{const O=h.__left+h.width,D=h.__left,W=a+u,K=u;if(K<=D&&D<=W||K<=O&&O<=W){this.colCache.push({i:P,update:!0,found:!1});return}}),this.colCache.length<g){const h=this.colCache.map(D=>D.i),O=Array.from(new Array(g)).map((D,W)=>W).filter(D=>!h.includes(D));for(;this.colCache.length<g;)this.colCache.push({i:O.pop(),update:!0,found:!1})}}resetRowCache(){if(this.interface){const i=this.getElementsByTagName("simple-html-grid-body")[0],a=(i==null?void 0:i.clientHeight)||this.interface.config.cellHeight*50;this.resetColCache();let u=Math.round(Math.floor(a/this.interface.config.cellHeight))+2;u>80&&(u=80);const g=this.interface.displayedDataset.length>u?u:this.interface.displayedDataset.length;if(g!==this.rowCache.length)if(this.rowCache.length>g){let h=this.rowCache.length;for(let O=0;O<h;O++)(this.rowCache&&this.rowCache[O].i>g-1||this.rowCache[O].i<0)&&(this.rowCache.splice(O,1),O--,h--);const P=g-this.rowCache.length;for(let O=0;O<P;O++)this.rowCache.push({i:O,update:!0})}else{const h=g-this.rowCache.length;for(let P=0;P<h;P++)this.rowCache.push({i:this.rowCache.length,update:!0})}}else this.rowCache=[]}}$t(g0,"simple-html-grid");const Tf={cellHeight:20,panelHeight:25,footerHeight:40,readonly:!0,selectionMode:"single",sortingSet:[{attribute:"elementName",ascending:!0}],groupingSet:[{title:"Element",attribute:"elementName"}],groups:[{width:200,rows:[{header:"Element",attribute:"elementName",filterable:{},allowGrouping:!0,sortable:{}}]},{width:200,rows:[{header:"ID",attribute:"id",filterable:{},allowGrouping:!0,sortable:{}}]},{width:200,rows:[{header:"TagName",attribute:"tagName",filterable:{},allowGrouping:!0,sortable:{}}]},{width:300,rows:[{header:"XPath",attribute:"xpath",filterable:{},allowGrouping:!0,sortable:{}}]}]},$a=new zs,_0=new Au(Tf,$a);$a.addEventListener({handleEvent:n=>{var i;if(n.type==="currentEntity"){const a=(i=$a.currentEntity)==null?void 0:i.component;Mt.getState().setSelected(a)}return!0}});const Da={gridInterFace:_0,dataSource:$a},Ja=new zs,m0=new Au(Tf,Ja);Ja.addEventListener({handleEvent:n=>{var i;if(n.type==="currentEntity"){const a=(i=Ja.currentEntity)==null?void 0:i.component;Mt.getState().setSelected(a)}return!0}});const Fa={gridInterFace:m0,dataSource:Ja};function v0(n){if(n==="//PlantModel/ActuatingSystem"||n==="//PlantModel/InstrumentationLoopFunction"||n==="//PlantModel/MetaData"||n==="//PlantModel/PipingNetworkSystem"||n==="//PlantModel/PlantStructureItem"||n==="//PlantModel/ProcessInstrumentationFunction"||n==="//PlantModel/ProcessSignalGeneratingSystem"||n==="//PlantModel/Equipment")return!0}let Pf="";function y0(n){Pf=n}function Al(){return Pf}let If="";function Ll(n){If=n}function Af(){return If}const w0={cellHeight:20,panelHeight:25,footerHeight:40,readonly:!0,selectionMode:"single",sortingSet:[{attribute:"node",ascending:!0}],groups:[{width:200,rows:[{header:"Node",attribute:"node",filterable:{},allowGrouping:!0,sortable:{}}]},{width:110,rows:[{header:"Line",attribute:"line",filterable:{},allowGrouping:!0,sortable:{}}]},{width:1450,rows:[{header:"Error message",attribute:"message",filterable:{},allowGrouping:!0,sortable:{}}]}]},eo=new zs,x0=new Au(w0,eo);eo.addEventListener({handleEvent:n=>{var i;if(n.type==="currentEntity"){const a=(i=eo.currentEntity)==null?void 0:i.component;Mt.getState().setSelected(a)}return!0}});const Wr={gridInterFace:x0,dataSource:eo};function Lf(n,i,a,u){return new Promise(g=>{const h=new Worker("xmlvalidateWorker.js"),P=[];h.postMessage({content:u,name:a}),h.onmessage=O=>{var W,K;let D=!0;O.data.file===a&&O.data.loaded?(D=!1,h.postMessage({content:i,name:n})):O.data.file===n&&(O.data.message&&(D=!1,P.push({line:O.data.line,node:O.data.node,message:O.data.message})),O.data.valid!==void 0&&(D=!1,h.terminate(),g(P))),((W=O.data)==null?void 0:W.includes)&&((K=O.data)==null?void 0:K.includes("failed to compile"))?(console.log(O),h.terminate(),g([{message:"xsd failed to compile"}])):D&&console.log(O)}})}function S0(){const n=Mt();return dt("label",{className:"inline-block p-2 bg-gray-700/50 -10 relative text-center text-indigo-400 font-semibold hover:bg-gray-700",children:["Open XML File",De("input",{className:" hidden",type:"file",accept:".xml",onChange:i=>{const a=new FileReader;a.onload=()=>cn(this,null,function*(){y0(a.result),Ll("");const u=new L_(a.result,"pidCanvas");u.draw(),u.addEventListener({handleEvent(W){n.setSelected(W.data)}});const g=d_(),h=[],P=[];g.forEach(W=>{var ie,z,ue,ee,ce;let K=((ie=W.element)==null?void 0:ie.tagName)||"",X=W.parent||null;for(;X!==null;)K=`${X.element.tagName}/${K}`,X=X.parent||null;K=`//${K}`,v0(K)&&P.push({id:(z=W.iD)==null?void 0:z.valueAsString,elementName:W.element.tagName,tagName:(ue=W.tagName)==null?void 0:ue.valueAsString,xpath:K,component:W}),h.push({id:(ee=W.iD)==null?void 0:ee.valueAsString,elementName:W.element.tagName,tagName:(ce=W.tagName)==null?void 0:ce.valueAsString,xpath:K,component:W})}),Wr.dataSource.setData([]),Da.dataSource.setData([]),Da.dataSource.setData(h),Da.gridInterFace.autoResizeColumns(),Fa.dataSource.setData([]),Fa.dataSource.setData(P),Fa.gridInterFace.autoResizeColumns();const O=u.getSchemaVersion()||"unknown";Mt.setState({selectedXmlFileName:`${Mt.getState().selectedXmlFileName} - (Schema Version: ${O})`});const D=u.getSchemaLocation();if(!D)Mt.setState({selectedXsdFileName:"No schema location found, you need to select file manually"});else try{const W=yield fetch(D);if(W.ok){const K=yield W.text();Ll(K);const X=yield Lf("test.xml",Al(),"test.xsd",Af());Wr.dataSource.setData([]),Wr.dataSource.setData(X),Mt.setState({selectedXsdFileName:D})}else Mt.setState({selectedXsdFileName:"Unable to download: "+D})}catch(W){Mt.setState({selectedXsdFileName:"Unable to download: "+D})}i.target.value=""}),a.onloadend=()=>{n.setLoading(!1)},a.onerror=()=>{},i!=null&&i.target.files&&(Mt.setState({currentTab:"viewer",isLoading:!0,loadingHeader:"Reading XML",loadingMessage:"Please wait while we parse and generate graphics"}),Mt.setState({selectedXmlFileName:i.target.files[0].name,selectedXsdFileName:""}),a.readAsText(i.target.files[0]))}})]})}function C0(){var g;const n=Mt(),i=[];function a(h){let P=h,O=!0;for(;O;)["Text","Line","CenterLine","Shape","Ellipse","Circle"].includes(P.elementTagName)||(P.elementTagName&&i.push({type:"element",name:"element",value:P.elementTagName}),P.genericAttributes&&(i.push({type:"attribute-header",name:"Attributes",value:""}),Object.keys(P.attributes).forEach(W=>{i.push({type:"attribute",name:W,value:P.attributes[W]})})),P.genericAttributes&&Object.keys(P.genericAttributes).forEach(W=>{i.push({type:"genericAttributes",name:"GenericAttribute Set",value:W}),Object.keys(P.genericAttributes[W]).forEach(X=>{i.push({type:"genericAttribute",name:X,value:P.genericAttributes[W][X]})})})),P.parent?P=P.parent:O=!1}if(!((g=n.selected)!=null&&g.elementTagName))return dt("div",{className:"border-gray-600 detailView flex flex-col text-xs w-full ",children:[De("span",{className:"pl-1 border-b bg-gray-700 border-b-gray-600 text-lg font-bold",children:"Selected"}),"Nothing selected"]});console.log(n.selected),a(n.selected);let u=-1;return dt("div",{className:"border-gray-600 detailView flex flex-col text-xs w-full ",children:[De("span",{className:"pl-1 border-b  border-b-gray-600 text-lg font-bold ",children:"Selected Element"}),De("div",{className:"flex flex-col overflow-auto scrollbar",style:{minHeight:0},children:i.map((h,P)=>{const O=P+":"+h.type+"-"+h.name+"-"+h.value;return h.type==="element"?(u++,De("span",{className:"border-b bg-gray-800 border-b-gray-700 flex pt-2 pb-1 sticky top-0",children:dt("span",{className:"pl-1 font-semibold flex-1 text-sm flex",children:[De("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 ml-2 mr-1 text-yellow-400",children:De("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l7.5-7.5 7.5 7.5m-15 6l7.5-7.5 7.5 7.5"})}),"(",u,") ",h.value]})},O)):h.type==="attribute-header"?dt("span",{className:"border-b bg-gray-700 border-b-gray-400 flex pt-2 pb-1 sticky top-7 text-sm",children:[De("span",{className:"pl-3 font-semibold flex-1 overflow-x-auto scrollbar",children:h.name}),De("span",{className:"ml-2  ",children:h.value})]},O):h.type==="genericAttributes"?De("span",{className:"border-b bg-gray-700 border-b-gray-400 flex pt-2 pb-1 sticky top-7 text-sm",children:dt("span",{className:"pl-3 font-semibold flex-1 overflow-x-auto scrollbar",children:[h.name," - ",h.value]})},O):dt("span",{className:"pl-2 border-b border-b-gray-600 flex pr-2",children:[dt("span",{className:"pl-4 font-semibold flex-1 overflow-x-auto scrollbar",children:[h.name,":"]}),De("span",{className:"ml-2 flex-1 overflow-x-auto scrollbar",children:h.value})]},O)})})]})}function ma(n){const i=Mt();return jn.exports.useEffect(()=>{const a=document.getElementById("pidCanvas");a&&a.setAttribute("resize","true")}),!i.selectedXmlFileName&&!n.stayHidden?dt("div",{className:"m-auto flex flex-col items-center text-green-300",children:[dt("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-photo   h-28 w-28",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[De("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),De("line",{x1:15,y1:8,x2:"15.01",y2:8}),De("rect",{x:4,y:4,width:16,height:16,rx:3}),De("path",{d:"M4 15l4 -4a3 5 0 0 1 3 0l5 5"}),De("path",{d:"M14 14l1 -1a3 5 0 0 1 3 0l2 2"})]}),De("span",{children:"Open XML file to get started."})]}):n.stayHidden?De("canvas",{id:"pidCanvas",className:"border w-full h-full border-gray-800 hidden  "}):De("canvas",{id:"pidCanvas",className:"border w-full h-full border-gray-800  "})}class Ou extends qh.Component{constructor(i){super(i),this.myRef=qh.createRef()}shouldComponentUpdate(){return!0}componentDidMount(){this.myRef.current.resizeInit=!0,this.myRef.current.interface=this.props.interface,this.myRef.current.connectedCallback(),this.myRef.current.addEventListener("dblclick",function(i){if(i.type==="dblclick"&&i.target.className==="simple-html-grid-row-input"){const a=i.target.parentNode;if(a&&a.cell){const u=a.connector.displayedDataset[a.rowNo][a.cell.attribute];typeof u=="string"&&u.indexOf("http")===0&&window.open(u,u)}}})}render(){var i,a;return De("simple-html-grid",{ref:this.myRef,style:{width:(i=this.props.style)==null?void 0:i.width,height:(a=this.props.style)==null?void 0:a.height},class:this.props.className})}}function b0(){return De("div",{className:"flex-grow",children:De("div",{className:"flex flex-row h-full w-full",children:De(Ou,{className:"simple-html-grid flex-grow",interface:Fa.gridInterFace})})})}function E0(){return De("div",{className:"flex-grow",children:De("div",{className:"flex flex-row h-full w-full",children:De(Ou,{className:"simple-html-grid flex-grow",interface:Da.gridInterFace})})})}function k0(){const n=Mt();return dt("label",{className:"inline-block p-2 bg-gray-700/50 -10 relative text-center text-indigo-400 font-semibold hover:bg-gray-700",children:["Use XSD File",De("input",{className:" hidden",type:"file",accept:".xsd",onChange:i=>{Al()||alert("open xml first");const a=new FileReader;a.onload=()=>cn(this,null,function*(){Ll(a.result);const u=yield Lf("test.xml",Al(),"test.xsd",Af());Wr.dataSource.setData([]),Wr.dataSource.setData(u),i.target.value=""}),a.onloadend=()=>{n.setLoading(!1)},a.onerror=()=>{},i!=null&&i.target.files&&(Mt.setState({currentTab:"xsdValidation",isLoading:!0,loadingHeader:"Reading XSD",loadingMessage:"Please wait while we parse and validate xml"}),Mt.setState({selectedXsdFileName:i.target.files[0].name}),a.readAsText(i.target.files[0]))}})]})}function N0(){return dt("div",{className:"flex flex-col h-full w-full flex-grow",children:[dt("div",{className:"pr-2 pl-2 pb-2 ",children:[dt("span",{className:"text-gray-400 italic text-xs",children:["XML Schema Definition or XSD is a recommendation by the World Wide Web Consortium (W3C) to describe and validate the structure and content of an XML document. An XSD is similar to earlier XML schema languages, such as Document Type Definition (DTD), but it is a more powerful alternative as it provides greater control over the XML structure."," ",De("a",{className:"text-indigo-400",href:"https://www.w3.org/XML/Schema",target:"_blank",rel:"noreferrer",children:"Read more"})]}),dt("div",{className:"flex ",children:[De(k0,{}),De("div",{className:"w-96 flex ml-3",children:De("a",{className:"text-indigo-400 m-auto",href:"https://github.com/ProteusXML/proteusxml",target:"_blank",rel:"noreferrer",children:"Click here to find Proteus XSD files (github)."})})]})]}),De(Ou,{className:"simple-html-grid flex-grow ",interface:Wr.gridInterFace})]})}function tc(){const n=Mt();return n.currentTab==="idList"?dt(Tr,{children:[De(ma,{stayHidden:!0}),De(E0,{})]}):n.currentTab==="conceptualModelList"?dt(Tr,{children:[De(ma,{stayHidden:!0}),De(b0,{})]}):n.currentTab==="xsdValidation"?dt(Tr,{children:[De(ma,{stayHidden:!0}),De(N0,{})]}):De(Tr,{children:De(ma,{stayHidden:!1})})}function T0(){const n=Mt(),i=" p-1 min-w-[14rem] font-semibold ",a=i+" text-gray-300 font-semibold ",u=i+" text-indigo-400 font-semibold hover:bg-gray-700 ",g=" border-b-4 w-full border-indigo-600 ",h=" border-b-4 w-full border-gray-700 ";let P=u,O=u,D=u,W=u,K=h,X=h,ie=h,z=h;return n.currentTab==="viewer"&&(P=a,K=g),n.currentTab==="idList"&&(O=a,X=g),n.currentTab==="conceptualModelList"&&(D=a,ie=g),n.currentTab==="xsdValidation"&&(W=a,z=g),dt("div",{className:" border-b border-b-gray-700 flex border-gray-800",children:[dt("div",{className:"border-l border-t border-gray-800",children:[De("button",{className:P,onClick:()=>{Mt.setState({currentTab:"viewer"})},children:"Viewer"}),De("div",{className:K})]}),dt("div",{className:"border-l  border-t border-gray-800",children:[De("button",{className:D,onClick:()=>{Mt.setState({currentTab:"conceptualModelList"})},children:"Conceptual Model"}),De("div",{className:ie})]}),dt("div",{className:"border-l border-t border-gray-800",children:[De("button",{className:O,onClick:()=>{Mt.setState({currentTab:"idList"})},children:"ID List"}),De("div",{className:X})]}),dt("div",{className:"border-l border-r border-t border-gray-800",children:[De("button",{className:W,onClick:()=>{Mt.setState({currentTab:"xsdValidation"})},children:"XSD validation"}),De("div",{className:z})]})]})}function P0(){const n=Mt();return dt("div",{className:"flex flex-col h-full bg-gray-900 text-gray-200 min-w-[]",children:[De(c_,{}),De(Bg,{}),dt("div",{className:"fixed bottom-0 left-0 right-0 text-gray-500 flex flex-col text-sm",children:[De("span",{className:"m-auto ",children:"No files is uploaded to any third party - all work is done in the browser."}),De("div",{className:"m-auto italic",children:"LibXml2 - v2.10.2+ latest commit (20 sept - 2022)"})]}),De("div",{className:"fixed top-2 right-2  p-2",children:dt("div",{className:"flex gap-x-2 text-indigo-600",children:[De(Hg,{}),De(Vg,{})]})}),dt("div",{className:"p-2 flex",children:[De("div",{className:"mr-2",children:De(S0,{})}),dt("div",{className:"flex flex-col p-1",children:[dt("div",{className:"text-xs ",children:[De("span",{className:"mr-1 font-bold",children:"XML File:"}),De("span",{children:n.selectedXmlFileName})]}),dt("div",{className:"text-xs",children:[De("span",{className:"mr-1 font-bold",children:"XSD File:"}),De("span",{children:n.selectedXsdFileName})]})]})]}),De("div",{className:"text-gray-500 pl-2 pr-2 pt-4",children:De(T0,{})}),n.currentTab==="xsdValidation"?dt(Tr,{children:[De("div",{className:"flex h-full",style:{minHeight:"0px"},children:De("div",{className:"flex flex-1 p-1 pb-10",children:De(tc,{})})}),dt("div",{className:"fixed bottom-0 right-0 pr-2 text-gray-500",children:["Version: ","1.6.1"]})]}):dt(Tr,{children:[dt("div",{className:"flex h-full",style:{minHeight:"0px"},children:[De("div",{className:"flex basis-1/2 xl:basis-2/3  p-1 pb-10 ",children:De(tc,{})}),De("div",{className:"flex basis-1/2 xl:basis-1/3 pb-10 pl-1 pr-1",children:De(C0,{})})]}),dt("div",{className:"fixed bottom-0 right-0 pr-2 text-gray-500",children:["Version: ","1.6.1"]})]})]})}var Of={exports:{}},Li={},Mf={exports:{}},Rf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function i(Ae,be){var Be=Ae.length;Ae.push(be);e:for(;0<Be;){var it=Be-1>>>1,ut=Ae[it];if(0<g(ut,be))Ae[it]=be,Ae[Be]=ut,Be=it;else break e}}function a(Ae){return Ae.length===0?null:Ae[0]}function u(Ae){if(Ae.length===0)return null;var be=Ae[0],Be=Ae.pop();if(Be!==be){Ae[0]=Be;e:for(var it=0,ut=Ae.length,Ut=ut>>>1;it<Ut;){var Gt=2*(it+1)-1,Qe=Ae[Gt],qt=Gt+1,oi=Ae[qt];if(0>g(Qe,Be))qt<ut&&0>g(oi,Qe)?(Ae[it]=oi,Ae[qt]=Be,it=qt):(Ae[it]=Qe,Ae[Gt]=Be,it=Gt);else if(qt<ut&&0>g(oi,Be))Ae[it]=oi,Ae[qt]=Be,it=qt;else break e}}return be}function g(Ae,be){var Be=Ae.sortIndex-be.sortIndex;return Be!==0?Be:Ae.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var P=Date,O=P.now();n.unstable_now=function(){return P.now()-O}}var D=[],W=[],K=1,X=null,ie=3,z=!1,ue=!1,ee=!1,ce=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(Ae){for(var be=a(W);be!==null;){if(be.callback===null)u(W);else if(be.startTime<=Ae)u(W),be.sortIndex=be.expirationTime,i(D,be);else break;be=a(W)}}function pe(Ae){if(ee=!1,te(Ae),!ue)if(a(D)!==null)ue=!0,le(we);else{var be=a(W);be!==null&&lt(pe,be.startTime-Ae)}}function we(Ae,be){ue=!1,ee&&(ee=!1,$(Pe),Pe=-1),z=!0;var Be=ie;try{for(te(be),X=a(D);X!==null&&(!(X.expirationTime>be)||Ae&&!ot());){var it=X.callback;if(typeof it=="function"){X.callback=null,ie=X.priorityLevel;var ut=it(X.expirationTime<=be);be=n.unstable_now(),typeof ut=="function"?X.callback=ut:X===a(D)&&u(D),te(be)}else u(D);X=a(D)}if(X!==null)var Ut=!0;else{var Gt=a(W);Gt!==null&&lt(pe,Gt.startTime-be),Ut=!1}return Ut}finally{X=null,ie=Be,z=!1}}var B=!1,Ne=null,Pe=-1,Fe=5,Ve=-1;function ot(){return!(n.unstable_now()-Ve<Fe)}function Ke(){if(Ne!==null){var Ae=n.unstable_now();Ve=Ae;var be=!0;try{be=Ne(!0,Ae)}finally{be?st():(B=!1,Ne=null)}}else B=!1}var st;if(typeof J=="function")st=function(){J(Ke)};else if(typeof MessageChannel!="undefined"){var Ee=new MessageChannel,bt=Ee.port2;Ee.port1.onmessage=Ke,st=function(){bt.postMessage(null)}}else st=function(){ce(Ke,0)};function le(Ae){Ne=Ae,B||(B=!0,st())}function lt(Ae,be){Pe=ce(function(){Ae(n.unstable_now())},be)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Ae){Ae.callback=null},n.unstable_continueExecution=function(){ue||z||(ue=!0,le(we))},n.unstable_forceFrameRate=function(Ae){0>Ae||125<Ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Fe=0<Ae?Math.floor(1e3/Ae):5},n.unstable_getCurrentPriorityLevel=function(){return ie},n.unstable_getFirstCallbackNode=function(){return a(D)},n.unstable_next=function(Ae){switch(ie){case 1:case 2:case 3:var be=3;break;default:be=ie}var Be=ie;ie=be;try{return Ae()}finally{ie=Be}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Ae,be){switch(Ae){case 1:case 2:case 3:case 4:case 5:break;default:Ae=3}var Be=ie;ie=Ae;try{return be()}finally{ie=Be}},n.unstable_scheduleCallback=function(Ae,be,Be){var it=n.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?it+Be:it):Be=it,Ae){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=Be+ut,Ae={id:K++,callback:be,priorityLevel:Ae,startTime:Be,expirationTime:ut,sortIndex:-1},Be>it?(Ae.sortIndex=Be,i(W,Ae),a(D)===null&&Ae===a(W)&&(ee?($(Pe),Pe=-1):ee=!0,lt(pe,Be-it))):(Ae.sortIndex=ut,i(D,Ae),ue||z||(ue=!0,le(we))),Ae},n.unstable_shouldYield=ot,n.unstable_wrapCallback=function(Ae){var be=ie;return function(){var Be=ie;ie=be;try{return Ae.apply(this,arguments)}finally{ie=Be}}}})(Rf);(function(n){n.exports=Rf})(Mf);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zf=jn.exports,Ai=Mf.exports;function Le(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Df=new Set,Ds={};function wr(n,i){$r(n,i),$r(n+"Capture",i)}function $r(n,i){for(Ds[n]=i,n=0;n<i.length;n++)Df.add(i[n])}var mn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Ol=Object.prototype.hasOwnProperty,I0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ic={},nc={};function A0(n){return Ol.call(nc,n)?!0:Ol.call(ic,n)?!1:I0.test(n)?nc[n]=!0:(ic[n]=!0,!1)}function L0(n,i,a,u){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function O0(n,i,a,u){if(i===null||typeof i=="undefined"||L0(n,i,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function xi(n,i,a,u,g,h,P){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=g,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=h,this.removeEmptyString=P}var ci={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ci[n]=new xi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];ci[i]=new xi(i,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ci[n]=new xi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ci[n]=new xi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ci[n]=new xi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ci[n]=new xi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ci[n]=new xi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ci[n]=new xi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ci[n]=new xi(n,5,!1,n.toLowerCase(),null,!1,!1)});var Mu=/[\-:]([a-z])/g;function Ru(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(Mu,Ru);ci[i]=new xi(i,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(Mu,Ru);ci[i]=new xi(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(Mu,Ru);ci[i]=new xi(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ci[n]=new xi(n,1,!1,n.toLowerCase(),null,!1,!1)});ci.xlinkHref=new xi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ci[n]=new xi(n,1,!1,n.toLowerCase(),null,!0,!0)});function zu(n,i,a,u){var g=ci.hasOwnProperty(i)?ci[i]:null;(g!==null?g.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(O0(i,a,g,u)&&(a=null),u||g===null?A0(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):g.mustUseProperty?n[g.propertyName]=a===null?g.type===3?!1:"":a:(i=g.attributeName,u=g.attributeNamespace,a===null?n.removeAttribute(i):(g=g.type,a=g===3||g===4&&a===!0?"":""+a,u?n.setAttributeNS(u,i,a):n.setAttribute(i,a))))}var xn=zf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),Ar=Symbol.for("react.portal"),Lr=Symbol.for("react.fragment"),Du=Symbol.for("react.strict_mode"),Ml=Symbol.for("react.profiler"),Ff=Symbol.for("react.provider"),Bf=Symbol.for("react.context"),Fu=Symbol.for("react.forward_ref"),Rl=Symbol.for("react.suspense"),zl=Symbol.for("react.suspense_list"),Bu=Symbol.for("react.memo"),Tn=Symbol.for("react.lazy"),Vf=Symbol.for("react.offscreen"),rc=Symbol.iterator;function ds(n){return n===null||typeof n!="object"?null:(n=rc&&n[rc]||n["@@iterator"],typeof n=="function"?n:null)}var Ht=Object.assign,al;function Cs(n){if(al===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);al=i&&i[1]||""}return`
`+al+n}var ol=!1;function ll(n,i){if(!n||ol)return"";ol=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(W){var u=W}Reflect.construct(n,[],i)}else{try{i.call()}catch(W){u=W}n.call(i.prototype)}else{try{throw Error()}catch(W){u=W}n()}}catch(W){if(W&&u&&typeof W.stack=="string"){for(var g=W.stack.split(`
`),h=u.stack.split(`
`),P=g.length-1,O=h.length-1;1<=P&&0<=O&&g[P]!==h[O];)O--;for(;1<=P&&0<=O;P--,O--)if(g[P]!==h[O]){if(P!==1||O!==1)do if(P--,O--,0>O||g[P]!==h[O]){var D=`
`+g[P].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=P&&0<=O);break}}}finally{ol=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Cs(n):""}function M0(n){switch(n.tag){case 5:return Cs(n.type);case 16:return Cs("Lazy");case 13:return Cs("Suspense");case 19:return Cs("SuspenseList");case 0:case 2:case 15:return n=ll(n.type,!1),n;case 11:return n=ll(n.type.render,!1),n;case 1:return n=ll(n.type,!0),n;default:return""}}function Dl(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Lr:return"Fragment";case Ar:return"Portal";case Ml:return"Profiler";case Du:return"StrictMode";case Rl:return"Suspense";case zl:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Bf:return(n.displayName||"Context")+".Consumer";case Ff:return(n._context.displayName||"Context")+".Provider";case Fu:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Bu:return i=n.displayName||null,i!==null?i:Dl(n.type)||"Memo";case Tn:i=n._payload,n=n._init;try{return Dl(n(i))}catch(a){}}return null}function R0(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dl(i);case 8:return i===Du?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Qn(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Hf(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function z0(n){var i=Hf(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof a!="undefined"&&typeof a.get=="function"&&typeof a.set=="function"){var g=a.get,h=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return g.call(this)},set:function(P){u=""+P,h.call(this,P)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(P){u=""+P},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ya(n){n._valueTracker||(n._valueTracker=z0(n))}function Uf(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return n&&(u=Hf(n)?n.checked?"true":"false":n.value),n=u,n!==a?(i.setValue(n),!0):!1}function to(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch(i){return n.body}}function Fl(n,i){var a=i.checked;return Ht({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a!=null?a:n._wrapperState.initialChecked})}function sc(n,i){var a=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;a=Qn(i.value!=null?i.value:a),n._wrapperState={initialChecked:u,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Gf(n,i){i=i.checked,i!=null&&zu(n,"checked",i,!1)}function Bl(n,i){Gf(n,i);var a=Qn(i.value),u=i.type;if(a!=null)u==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(u==="submit"||u==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Vl(n,i.type,a):i.hasOwnProperty("defaultValue")&&Vl(n,i.type,Qn(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function ac(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Vl(n,i,a){(i!=="number"||to(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var bs=Array.isArray;function qr(n,i,a,u){if(n=n.options,i){i={};for(var g=0;g<a.length;g++)i["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=i.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&u&&(n[a].defaultSelected=!0)}else{for(a=""+Qn(a),i=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}i!==null||n[g].disabled||(i=n[g])}i!==null&&(i.selected=!0)}}function Hl(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(Le(91));return Ht({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function oc(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(Le(92));if(bs(a)){if(1<a.length)throw Error(Le(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Qn(a)}}function Wf(n,i){var a=Qn(i.value),u=Qn(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),u!=null&&(n.defaultValue=""+u)}function lc(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function qf(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ul(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?qf(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var wa,Kf=function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(i,a,u,g){MSApp.execUnsafeLocalFunction(function(){return n(i,a,u,g)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=wa.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Fs(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D0=["Webkit","ms","Moz","O"];Object.keys(Ns).forEach(function(n){D0.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Ns[i]=Ns[n]})});function Qf(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Ns.hasOwnProperty(n)&&Ns[n]?(""+i).trim():i+"px"}function Zf(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var u=a.indexOf("--")===0,g=Qf(a,i[a],u);a==="float"&&(a="cssFloat"),u?n.setProperty(a,g):n[a]=g}}var F0=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gl(n,i){if(i){if(F0[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(Le(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(Le(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(Le(61))}if(i.style!=null&&typeof i.style!="object")throw Error(Le(62))}}function Wl(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ql=null;function Vu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Kl=null,Kr=null,Qr=null;function uc(n){if(n=na(n)){if(typeof Kl!="function")throw Error(Le(280));var i=n.stateNode;i&&(i=Oo(i),Kl(n.stateNode,n.type,i))}}function jf(n){Kr?Qr?Qr.push(n):Qr=[n]:Kr=n}function Xf(){if(Kr){var n=Kr,i=Qr;if(Qr=Kr=null,uc(n),i)for(n=0;n<i.length;n++)uc(i[n])}}function Yf(n,i){return n(i)}function $f(){}var ul=!1;function Jf(n,i,a){if(ul)return n(i,a);ul=!0;try{return Yf(n,i,a)}finally{ul=!1,(Kr!==null||Qr!==null)&&($f(),Xf())}}function Bs(n,i){var a=n.stateNode;if(a===null)return null;var u=Oo(a);if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(Le(231,i,typeof a));return a}var Ql=!1;if(mn)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){Ql=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch(n){Ql=!1}function B0(n,i,a,u,g,h,P,O,D){var W=Array.prototype.slice.call(arguments,3);try{i.apply(a,W)}catch(K){this.onError(K)}}var Ts=!1,io=null,no=!1,Zl=null,V0={onError:function(n){Ts=!0,io=n}};function H0(n,i,a,u,g,h,P,O,D){Ts=!1,io=null,B0.apply(V0,arguments)}function U0(n,i,a,u,g,h,P,O,D){if(H0.apply(this,arguments),Ts){if(Ts){var W=io;Ts=!1,io=null}else throw Error(Le(198));no||(no=!0,Zl=W)}}function xr(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function ed(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function hc(n){if(xr(n)!==n)throw Error(Le(188))}function G0(n){var i=n.alternate;if(!i){if(i=xr(n),i===null)throw Error(Le(188));return i!==n?null:n}for(var a=n,u=i;;){var g=a.return;if(g===null)break;var h=g.alternate;if(h===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===h.child){for(h=g.child;h;){if(h===a)return hc(g),n;if(h===u)return hc(g),i;h=h.sibling}throw Error(Le(188))}if(a.return!==u.return)a=g,u=h;else{for(var P=!1,O=g.child;O;){if(O===a){P=!0,a=g,u=h;break}if(O===u){P=!0,u=g,a=h;break}O=O.sibling}if(!P){for(O=h.child;O;){if(O===a){P=!0,a=h,u=g;break}if(O===u){P=!0,u=h,a=g;break}O=O.sibling}if(!P)throw Error(Le(189))}}if(a.alternate!==u)throw Error(Le(190))}if(a.tag!==3)throw Error(Le(188));return a.stateNode.current===a?n:i}function td(n){return n=G0(n),n!==null?id(n):null}function id(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=id(n);if(i!==null)return i;n=n.sibling}return null}var nd=Ai.unstable_scheduleCallback,cc=Ai.unstable_cancelCallback,W0=Ai.unstable_shouldYield,q0=Ai.unstable_requestPaint,Zt=Ai.unstable_now,K0=Ai.unstable_getCurrentPriorityLevel,Hu=Ai.unstable_ImmediatePriority,rd=Ai.unstable_UserBlockingPriority,ro=Ai.unstable_NormalPriority,Q0=Ai.unstable_LowPriority,sd=Ai.unstable_IdlePriority,Po=null,on=null;function Z0(n){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Po,n,void 0,(n.current.flags&128)===128)}catch(i){}}var ji=Math.clz32?Math.clz32:Y0,j0=Math.log,X0=Math.LN2;function Y0(n){return n>>>=0,n===0?32:31-(j0(n)/X0|0)|0}var xa=64,Sa=4194304;function Es(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function so(n,i){var a=n.pendingLanes;if(a===0)return 0;var u=0,g=n.suspendedLanes,h=n.pingedLanes,P=a&268435455;if(P!==0){var O=P&~g;O!==0?u=Es(O):(h&=P,h!==0&&(u=Es(h)))}else P=a&~g,P!==0?u=Es(P):h!==0&&(u=Es(h));if(u===0)return 0;if(i!==0&&i!==u&&(i&g)===0&&(g=u&-u,h=i&-i,g>=h||g===16&&(h&4194240)!==0))return i;if((u&4)!==0&&(u|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=u;0<i;)a=31-ji(i),g=1<<a,u|=n[a],i&=~g;return u}function $0(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J0(n,i){for(var a=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,h=n.pendingLanes;0<h;){var P=31-ji(h),O=1<<P,D=g[P];D===-1?((O&a)===0||(O&u)!==0)&&(g[P]=$0(O,i)):D<=i&&(n.expiredLanes|=O),h&=~O}}function jl(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ad(){var n=xa;return xa<<=1,(xa&4194240)===0&&(xa=64),n}function hl(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function ta(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-ji(i),n[i]=a}function em(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var u=n.eventTimes;for(n=n.expirationTimes;0<a;){var g=31-ji(a),h=1<<g;i[g]=0,u[g]=-1,n[g]=-1,a&=~h}}function Uu(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var u=31-ji(a),g=1<<u;g&i|n[u]&i&&(n[u]|=i),a&=~g}}var kt=0;function od(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ld,Gu,ud,hd,cd,Xl=!1,Ca=[],zn=null,Dn=null,Fn=null,Vs=new Map,Hs=new Map,An=[],tm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fc(n,i){switch(n){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":Vs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hs.delete(i.pointerId)}}function gs(n,i,a,u,g,h){return n===null||n.nativeEvent!==h?(n={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:h,targetContainers:[g]},i!==null&&(i=na(i),i!==null&&Gu(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),n)}function im(n,i,a,u,g){switch(i){case"focusin":return zn=gs(zn,n,i,a,u,g),!0;case"dragenter":return Dn=gs(Dn,n,i,a,u,g),!0;case"mouseover":return Fn=gs(Fn,n,i,a,u,g),!0;case"pointerover":var h=g.pointerId;return Vs.set(h,gs(Vs.get(h)||null,n,i,a,u,g)),!0;case"gotpointercapture":return h=g.pointerId,Hs.set(h,gs(Hs.get(h)||null,n,i,a,u,g)),!0}return!1}function fd(n){var i=hr(n.target);if(i!==null){var a=xr(i);if(a!==null){if(i=a.tag,i===13){if(i=ed(a),i!==null){n.blockedOn=i,cd(n.priority,function(){ud(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ba(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Yl(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);ql=u,a.target.dispatchEvent(u),ql=null}else return i=na(a),i!==null&&Gu(i),n.blockedOn=a,!1;i.shift()}return!0}function dc(n,i,a){Ba(n)&&a.delete(i)}function nm(){Xl=!1,zn!==null&&Ba(zn)&&(zn=null),Dn!==null&&Ba(Dn)&&(Dn=null),Fn!==null&&Ba(Fn)&&(Fn=null),Vs.forEach(dc),Hs.forEach(dc)}function _s(n,i){n.blockedOn===i&&(n.blockedOn=null,Xl||(Xl=!0,Ai.unstable_scheduleCallback(Ai.unstable_NormalPriority,nm)))}function Us(n){function i(g){return _s(g,n)}if(0<Ca.length){_s(Ca[0],n);for(var a=1;a<Ca.length;a++){var u=Ca[a];u.blockedOn===n&&(u.blockedOn=null)}}for(zn!==null&&_s(zn,n),Dn!==null&&_s(Dn,n),Fn!==null&&_s(Fn,n),Vs.forEach(i),Hs.forEach(i),a=0;a<An.length;a++)u=An[a],u.blockedOn===n&&(u.blockedOn=null);for(;0<An.length&&(a=An[0],a.blockedOn===null);)fd(a),a.blockedOn===null&&An.shift()}var Zr=xn.ReactCurrentBatchConfig,ao=!0;function rm(n,i,a,u){var g=kt,h=Zr.transition;Zr.transition=null;try{kt=1,Wu(n,i,a,u)}finally{kt=g,Zr.transition=h}}function sm(n,i,a,u){var g=kt,h=Zr.transition;Zr.transition=null;try{kt=4,Wu(n,i,a,u)}finally{kt=g,Zr.transition=h}}function Wu(n,i,a,u){if(ao){var g=Yl(n,i,a,u);if(g===null)wl(n,i,u,oo,a),fc(n,u);else if(im(g,n,i,a,u))u.stopPropagation();else if(fc(n,u),i&4&&-1<tm.indexOf(n)){for(;g!==null;){var h=na(g);if(h!==null&&ld(h),h=Yl(n,i,a,u),h===null&&wl(n,i,u,oo,a),h===g)break;g=h}g!==null&&u.stopPropagation()}else wl(n,i,u,null,a)}}var oo=null;function Yl(n,i,a,u){if(oo=null,n=Vu(u),n=hr(n),n!==null)if(i=xr(n),i===null)n=null;else if(a=i.tag,a===13){if(n=ed(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return oo=n,null}function dd(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K0()){case Hu:return 1;case rd:return 4;case ro:case Q0:return 16;case sd:return 536870912;default:return 16}default:return 16}}var Mn=null,qu=null,Va=null;function pd(){if(Va)return Va;var n,i=qu,a=i.length,u,g="value"in Mn?Mn.value:Mn.textContent,h=g.length;for(n=0;n<a&&i[n]===g[n];n++);var P=a-n;for(u=1;u<=P&&i[a-u]===g[h-u];u++);return Va=g.slice(n,1<u?1-u:void 0)}function Ha(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ba(){return!0}function pc(){return!1}function Oi(n){function i(a,u,g,h,P){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=h,this.target=P,this.currentTarget=null;for(var O in n)n.hasOwnProperty(O)&&(a=n[O],this[O]=a?a(h):h[O]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ba:pc,this.isPropagationStopped=pc,this}return Ht(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba}),i}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ku=Oi(as),ia=Ht({},as,{view:0,detail:0}),am=Oi(ia),cl,fl,ms,Io=Ht({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ms&&(ms&&n.type==="mousemove"?(cl=n.screenX-ms.screenX,fl=n.screenY-ms.screenY):fl=cl=0,ms=n),cl)},movementY:function(n){return"movementY"in n?n.movementY:fl}}),gc=Oi(Io),om=Ht({},Io,{dataTransfer:0}),lm=Oi(om),um=Ht({},ia,{relatedTarget:0}),dl=Oi(um),hm=Ht({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),cm=Oi(hm),fm=Ht({},as,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),dm=Oi(fm),pm=Ht({},as,{data:0}),_c=Oi(pm),gm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vm(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=mm[n])?!!i[n]:!1}function Qu(){return vm}var ym=Ht({},ia,{key:function(n){if(n.key){var i=gm[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ha(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?_m[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qu,charCode:function(n){return n.type==="keypress"?Ha(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ha(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),wm=Oi(ym),xm=Ht({},Io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=Oi(xm),Sm=Ht({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qu}),Cm=Oi(Sm),bm=Ht({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),Em=Oi(bm),km=Ht({},Io,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Nm=Oi(km),Tm=[9,13,27,32],Zu=mn&&"CompositionEvent"in window,Ps=null;mn&&"documentMode"in document&&(Ps=document.documentMode);var Pm=mn&&"TextEvent"in window&&!Ps,gd=mn&&(!Zu||Ps&&8<Ps&&11>=Ps),vc=String.fromCharCode(32),yc=!1;function _d(n,i){switch(n){case"keyup":return Tm.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function md(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Or=!1;function Im(n,i){switch(n){case"compositionend":return md(i);case"keypress":return i.which!==32?null:(yc=!0,vc);case"textInput":return n=i.data,n===vc&&yc?null:n;default:return null}}function Am(n,i){if(Or)return n==="compositionend"||!Zu&&_d(n,i)?(n=pd(),Va=qu=Mn=null,Or=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return gd&&i.locale!=="ko"?null:i.data;default:return null}}var Lm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Lm[n.type]:i==="textarea"}function vd(n,i,a,u){jf(u),i=lo(i,"onChange"),0<i.length&&(a=new Ku("onChange","change",null,a,u),n.push({event:a,listeners:i}))}var Is=null,Gs=null;function Om(n){Pd(n,0)}function Ao(n){var i=zr(n);if(Uf(i))return n}function Mm(n,i){if(n==="change")return i}var yd=!1;if(mn){var pl;if(mn){var gl="oninput"in document;if(!gl){var xc=document.createElement("div");xc.setAttribute("oninput","return;"),gl=typeof xc.oninput=="function"}pl=gl}else pl=!1;yd=pl&&(!document.documentMode||9<document.documentMode)}function Sc(){Is&&(Is.detachEvent("onpropertychange",wd),Gs=Is=null)}function wd(n){if(n.propertyName==="value"&&Ao(Gs)){var i=[];vd(i,Gs,n,Vu(n)),Jf(Om,i)}}function Rm(n,i,a){n==="focusin"?(Sc(),Is=i,Gs=a,Is.attachEvent("onpropertychange",wd)):n==="focusout"&&Sc()}function zm(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ao(Gs)}function Dm(n,i){if(n==="click")return Ao(i)}function Fm(n,i){if(n==="input"||n==="change")return Ao(i)}function Bm(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Yi=typeof Object.is=="function"?Object.is:Bm;function Ws(n,i){if(Yi(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!Ol.call(i,g)||!Yi(n[g],i[g]))return!1}return!0}function Cc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bc(n,i){var a=Cc(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=i&&u>=i)return{node:a,offset:i-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Cc(a)}}function xd(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?xd(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Sd(){for(var n=window,i=to();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch(u){a=!1}if(a)n=i.contentWindow;else break;i=to(n.document)}return i}function ju(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Vm(n){var i=Sd(),a=n.focusedElem,u=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&xd(a.ownerDocument.documentElement,a)){if(u!==null&&ju(a)){if(i=u.start,n=u.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var g=a.textContent.length,h=Math.min(u.start,g);u=u.end===void 0?h:Math.min(u.end,g),!n.extend&&h>u&&(g=u,u=h,h=g),g=bc(a,h);var P=bc(a,u);g&&P&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==P.node||n.focusOffset!==P.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),n.removeAllRanges(),h>u?(n.addRange(i),n.extend(P.node,P.offset)):(i.setEnd(P.node,P.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Hm=mn&&"documentMode"in document&&11>=document.documentMode,Mr=null,$l=null,As=null,Jl=!1;function Ec(n,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Jl||Mr==null||Mr!==to(u)||(u=Mr,"selectionStart"in u&&ju(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),As&&Ws(As,u)||(As=u,u=lo($l,"onSelect"),0<u.length&&(i=new Ku("onSelect","select",null,i,a),n.push({event:i,listeners:u}),i.target=Mr)))}function Ea(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Rr={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionend:Ea("Transition","TransitionEnd")},_l={},Cd={};mn&&(Cd=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);function Lo(n){if(_l[n])return _l[n];if(!Rr[n])return n;var i=Rr[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Cd)return _l[n]=i[a];return n}var bd=Lo("animationend"),Ed=Lo("animationiteration"),kd=Lo("animationstart"),Nd=Lo("transitionend"),Td=new Map,kc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(n,i){Td.set(n,i),wr(i,[n])}for(var ml=0;ml<kc.length;ml++){var vl=kc[ml],Um=vl.toLowerCase(),Gm=vl[0].toUpperCase()+vl.slice(1);Yn(Um,"on"+Gm)}Yn(bd,"onAnimationEnd");Yn(Ed,"onAnimationIteration");Yn(kd,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(Nd,"onTransitionEnd");$r("onMouseEnter",["mouseout","mouseover"]);$r("onMouseLeave",["mouseout","mouseover"]);$r("onPointerEnter",["pointerout","pointerover"]);$r("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wm=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function Nc(n,i,a){var u=n.type||"unknown-event";n.currentTarget=a,U0(u,i,void 0,n),n.currentTarget=null}function Pd(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],g=u.event;u=u.listeners;e:{var h=void 0;if(i)for(var P=u.length-1;0<=P;P--){var O=u[P],D=O.instance,W=O.currentTarget;if(O=O.listener,D!==h&&g.isPropagationStopped())break e;Nc(g,O,W),h=D}else for(P=0;P<u.length;P++){if(O=u[P],D=O.instance,W=O.currentTarget,O=O.listener,D!==h&&g.isPropagationStopped())break e;Nc(g,O,W),h=D}}}if(no)throw n=Zl,no=!1,Zl=null,n}function Ot(n,i){var a=i[ru];a===void 0&&(a=i[ru]=new Set);var u=n+"__bubble";a.has(u)||(Id(i,n,2,!1),a.add(u))}function yl(n,i,a){var u=0;i&&(u|=4),Id(a,n,u,i)}var ka="_reactListening"+Math.random().toString(36).slice(2);function qs(n){if(!n[ka]){n[ka]=!0,Df.forEach(function(a){a!=="selectionchange"&&(Wm.has(a)||yl(a,!1,n),yl(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[ka]||(i[ka]=!0,yl("selectionchange",!1,i))}}function Id(n,i,a,u){switch(dd(i)){case 1:var g=rm;break;case 4:g=sm;break;default:g=Wu}a=g.bind(null,i,a,n),g=void 0,!Ql||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(i,a,{capture:!0,passive:g}):n.addEventListener(i,a,!0):g!==void 0?n.addEventListener(i,a,{passive:g}):n.addEventListener(i,a,!1)}function wl(n,i,a,u,g){var h=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var P=u.tag;if(P===3||P===4){var O=u.stateNode.containerInfo;if(O===g||O.nodeType===8&&O.parentNode===g)break;if(P===4)for(P=u.return;P!==null;){var D=P.tag;if((D===3||D===4)&&(D=P.stateNode.containerInfo,D===g||D.nodeType===8&&D.parentNode===g))return;P=P.return}for(;O!==null;){if(P=hr(O),P===null)return;if(D=P.tag,D===5||D===6){u=h=P;continue e}O=O.parentNode}}u=u.return}Jf(function(){var W=h,K=Vu(a),X=[];e:{var ie=Td.get(n);if(ie!==void 0){var z=Ku,ue=n;switch(n){case"keypress":if(Ha(a)===0)break e;case"keydown":case"keyup":z=wm;break;case"focusin":ue="focus",z=dl;break;case"focusout":ue="blur",z=dl;break;case"beforeblur":case"afterblur":z=dl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=gc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=Cm;break;case bd:case Ed:case kd:z=cm;break;case Nd:z=Em;break;case"scroll":z=am;break;case"wheel":z=Nm;break;case"copy":case"cut":case"paste":z=dm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=mc}var ee=(i&4)!==0,ce=!ee&&n==="scroll",$=ee?ie!==null?ie+"Capture":null:ie;ee=[];for(var J=W,te;J!==null;){te=J;var pe=te.stateNode;if(te.tag===5&&pe!==null&&(te=pe,$!==null&&(pe=Bs(J,$),pe!=null&&ee.push(Ks(J,pe,te)))),ce)break;J=J.return}0<ee.length&&(ie=new z(ie,ue,null,a,K),X.push({event:ie,listeners:ee}))}}if((i&7)===0){e:{if(ie=n==="mouseover"||n==="pointerover",z=n==="mouseout"||n==="pointerout",ie&&a!==ql&&(ue=a.relatedTarget||a.fromElement)&&(hr(ue)||ue[vn]))break e;if((z||ie)&&(ie=K.window===K?K:(ie=K.ownerDocument)?ie.defaultView||ie.parentWindow:window,z?(ue=a.relatedTarget||a.toElement,z=W,ue=ue?hr(ue):null,ue!==null&&(ce=xr(ue),ue!==ce||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(z=null,ue=W),z!==ue)){if(ee=gc,pe="onMouseLeave",$="onMouseEnter",J="mouse",(n==="pointerout"||n==="pointerover")&&(ee=mc,pe="onPointerLeave",$="onPointerEnter",J="pointer"),ce=z==null?ie:zr(z),te=ue==null?ie:zr(ue),ie=new ee(pe,J+"leave",z,a,K),ie.target=ce,ie.relatedTarget=te,pe=null,hr(K)===W&&(ee=new ee($,J+"enter",ue,a,K),ee.target=te,ee.relatedTarget=ce,pe=ee),ce=pe,z&&ue)t:{for(ee=z,$=ue,J=0,te=ee;te;te=Nr(te))J++;for(te=0,pe=$;pe;pe=Nr(pe))te++;for(;0<J-te;)ee=Nr(ee),J--;for(;0<te-J;)$=Nr($),te--;for(;J--;){if(ee===$||$!==null&&ee===$.alternate)break t;ee=Nr(ee),$=Nr($)}ee=null}else ee=null;z!==null&&Tc(X,ie,z,ee,!1),ue!==null&&ce!==null&&Tc(X,ce,ue,ee,!0)}}e:{if(ie=W?zr(W):window,z=ie.nodeName&&ie.nodeName.toLowerCase(),z==="select"||z==="input"&&ie.type==="file")var we=Mm;else if(wc(ie))if(yd)we=Fm;else{we=zm;var B=Rm}else(z=ie.nodeName)&&z.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(we=Dm);if(we&&(we=we(n,W))){vd(X,we,a,K);break e}B&&B(n,ie,W),n==="focusout"&&(B=ie._wrapperState)&&B.controlled&&ie.type==="number"&&Vl(ie,"number",ie.value)}switch(B=W?zr(W):window,n){case"focusin":(wc(B)||B.contentEditable==="true")&&(Mr=B,$l=W,As=null);break;case"focusout":As=$l=Mr=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,Ec(X,a,K);break;case"selectionchange":if(Hm)break;case"keydown":case"keyup":Ec(X,a,K)}var Ne;if(Zu)e:{switch(n){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Or?_d(n,a)&&(Pe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(gd&&a.locale!=="ko"&&(Or||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Or&&(Ne=pd()):(Mn=K,qu="value"in Mn?Mn.value:Mn.textContent,Or=!0)),B=lo(W,Pe),0<B.length&&(Pe=new _c(Pe,n,null,a,K),X.push({event:Pe,listeners:B}),Ne?Pe.data=Ne:(Ne=md(a),Ne!==null&&(Pe.data=Ne)))),(Ne=Pm?Im(n,a):Am(n,a))&&(W=lo(W,"onBeforeInput"),0<W.length&&(K=new _c("onBeforeInput","beforeinput",null,a,K),X.push({event:K,listeners:W}),K.data=Ne))}Pd(X,i)})}function Ks(n,i,a){return{instance:n,listener:i,currentTarget:a}}function lo(n,i){for(var a=i+"Capture",u=[];n!==null;){var g=n,h=g.stateNode;g.tag===5&&h!==null&&(g=h,h=Bs(n,a),h!=null&&u.unshift(Ks(n,h,g)),h=Bs(n,i),h!=null&&u.push(Ks(n,h,g))),n=n.return}return u}function Nr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Tc(n,i,a,u,g){for(var h=i._reactName,P=[];a!==null&&a!==u;){var O=a,D=O.alternate,W=O.stateNode;if(D!==null&&D===u)break;O.tag===5&&W!==null&&(O=W,g?(D=Bs(a,h),D!=null&&P.unshift(Ks(a,D,O))):g||(D=Bs(a,h),D!=null&&P.push(Ks(a,D,O)))),a=a.return}P.length!==0&&n.push({event:i,listeners:P})}var qm=/\r\n?/g,Km=/\u0000|\uFFFD/g;function Pc(n){return(typeof n=="string"?n:""+n).replace(qm,`
`).replace(Km,"")}function Na(n,i,a){if(i=Pc(i),Pc(n)!==i&&a)throw Error(Le(425))}function uo(){}var eu=null,tu=null;function iu(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var nu=typeof setTimeout=="function"?setTimeout:void 0,Qm=typeof clearTimeout=="function"?clearTimeout:void 0,Ic=typeof Promise=="function"?Promise:void 0,Zm=typeof queueMicrotask=="function"?queueMicrotask:typeof Ic!="undefined"?function(n){return Ic.resolve(null).then(n).catch(jm)}:nu;function jm(n){setTimeout(function(){throw n})}function xl(n,i){var a=i,u=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(u===0){n.removeChild(g),Us(i);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=g}while(a);Us(i)}function Bn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Ac(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var os=Math.random().toString(36).slice(2),an="__reactFiber$"+os,Qs="__reactProps$"+os,vn="__reactContainer$"+os,ru="__reactEvents$"+os,Xm="__reactListeners$"+os,Ym="__reactHandles$"+os;function hr(n){var i=n[an];if(i)return i;for(var a=n.parentNode;a;){if(i=a[vn]||a[an]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Ac(n);n!==null;){if(a=n[an])return a;n=Ac(n)}return i}n=a,a=n.parentNode}return null}function na(n){return n=n[an]||n[vn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function zr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Le(33))}function Oo(n){return n[Qs]||null}var su=[],Dr=-1;function $n(n){return{current:n}}function Rt(n){0>Dr||(n.current=su[Dr],su[Dr]=null,Dr--)}function Lt(n,i){Dr++,su[Dr]=n.current,n.current=i}var Zn={},mi=$n(Zn),bi=$n(!1),gr=Zn;function Jr(n,i){var a=n.type.contextTypes;if(!a)return Zn;var u=n.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var g={},h;for(h in a)g[h]=i[h];return u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=g),g}function Ei(n){return n=n.childContextTypes,n!=null}function ho(){Rt(bi),Rt(mi)}function Lc(n,i,a){if(mi.current!==Zn)throw Error(Le(168));Lt(mi,i),Lt(bi,a)}function Ad(n,i,a){var u=n.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var g in u)if(!(g in i))throw Error(Le(108,R0(n)||"Unknown",g));return Ht({},a,u)}function co(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Zn,gr=mi.current,Lt(mi,n),Lt(bi,bi.current),!0}function Oc(n,i,a){var u=n.stateNode;if(!u)throw Error(Le(169));a?(n=Ad(n,i,gr),u.__reactInternalMemoizedMergedChildContext=n,Rt(bi),Rt(mi),Lt(mi,n)):Rt(bi),Lt(bi,a)}var dn=null,Mo=!1,Sl=!1;function Ld(n){dn===null?dn=[n]:dn.push(n)}function $m(n){Mo=!0,Ld(n)}function Jn(){if(!Sl&&dn!==null){Sl=!0;var n=0,i=kt;try{var a=dn;for(kt=1;n<a.length;n++){var u=a[n];do u=u(!0);while(u!==null)}dn=null,Mo=!1}catch(g){throw dn!==null&&(dn=dn.slice(n+1)),nd(Hu,Jn),g}finally{kt=i,Sl=!1}}return null}var Fr=[],Br=0,fo=null,po=0,Di=[],Fi=0,_r=null,pn=1,gn="";function lr(n,i){Fr[Br++]=po,Fr[Br++]=fo,fo=n,po=i}function Od(n,i,a){Di[Fi++]=pn,Di[Fi++]=gn,Di[Fi++]=_r,_r=n;var u=pn;n=gn;var g=32-ji(u)-1;u&=~(1<<g),a+=1;var h=32-ji(i)+g;if(30<h){var P=g-g%5;h=(u&(1<<P)-1).toString(32),u>>=P,g-=P,pn=1<<32-ji(i)+g|a<<g|u,gn=h+n}else pn=1<<h|a<<g|u,gn=n}function Xu(n){n.return!==null&&(lr(n,1),Od(n,1,0))}function Yu(n){for(;n===fo;)fo=Fr[--Br],Fr[Br]=null,po=Fr[--Br],Fr[Br]=null;for(;n===_r;)_r=Di[--Fi],Di[Fi]=null,gn=Di[--Fi],Di[Fi]=null,pn=Di[--Fi],Di[Fi]=null}var Ii=null,Pi=null,Dt=!1,Zi=null;function Md(n,i){var a=Bi(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Mc(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Ii=n,Pi=Bn(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Ii=n,Pi=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=_r!==null?{id:pn,overflow:gn}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Bi(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,Ii=n,Pi=null,!0):!1;default:return!1}}function au(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ou(n){if(Dt){var i=Pi;if(i){var a=i;if(!Mc(n,i)){if(au(n))throw Error(Le(418));i=Bn(a.nextSibling);var u=Ii;i&&Mc(n,i)?Md(u,a):(n.flags=n.flags&-4097|2,Dt=!1,Ii=n)}}else{if(au(n))throw Error(Le(418));n.flags=n.flags&-4097|2,Dt=!1,Ii=n}}}function Rc(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ii=n}function Ta(n){if(n!==Ii)return!1;if(!Dt)return Rc(n),Dt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!iu(n.type,n.memoizedProps)),i&&(i=Pi)){if(au(n))throw Rd(),Error(Le(418));for(;i;)Md(n,i),i=Bn(i.nextSibling)}if(Rc(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Le(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Pi=Bn(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Pi=null}}else Pi=Ii?Bn(n.stateNode.nextSibling):null;return!0}function Rd(){for(var n=Pi;n;)n=Bn(n.nextSibling)}function es(){Pi=Ii=null,Dt=!1}function $u(n){Zi===null?Zi=[n]:Zi.push(n)}var Jm=xn.ReactCurrentBatchConfig;function Ki(n,i){if(n&&n.defaultProps){i=Ht({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}var go=$n(null),_o=null,Vr=null,Ju=null;function eh(){Ju=Vr=_o=null}function th(n){var i=go.current;Rt(go),n._currentValue=i}function lu(n,i,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===a)break;n=n.return}}function jr(n,i){_o=n,Ju=Vr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Ci=!0),n.firstContext=null)}function Hi(n){var i=n._currentValue;if(Ju!==n)if(n={context:n,memoizedValue:i,next:null},Vr===null){if(_o===null)throw Error(Le(308));Vr=n,_o.dependencies={lanes:0,firstContext:n}}else Vr=Vr.next=n;return i}var cr=null;function ih(n){cr===null?cr=[n]:cr.push(n)}function zd(n,i,a,u){var g=i.interleaved;return g===null?(a.next=a,ih(i)):(a.next=g.next,g.next=a),i.interleaved=a,yn(n,u)}function yn(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Pn=!1;function nh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function _n(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Vn(n,i,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(yt&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,yn(n,a)}return g=u.interleaved,g===null?(i.next=i,ih(u)):(i.next=g.next,g.next=i),u.interleaved=i,yn(n,a)}function Ua(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,Uu(n,a)}}function zc(n,i){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var P={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};h===null?g=h=P:h=h.next=P,a=a.next}while(a!==null);h===null?g=h=i:h=h.next=i}else g=h=i;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:h,shared:u.shared,effects:u.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function mo(n,i,a,u){var g=n.updateQueue;Pn=!1;var h=g.firstBaseUpdate,P=g.lastBaseUpdate,O=g.shared.pending;if(O!==null){g.shared.pending=null;var D=O,W=D.next;D.next=null,P===null?h=W:P.next=W,P=D;var K=n.alternate;K!==null&&(K=K.updateQueue,O=K.lastBaseUpdate,O!==P&&(O===null?K.firstBaseUpdate=W:O.next=W,K.lastBaseUpdate=D))}if(h!==null){var X=g.baseState;P=0,K=W=D=null,O=h;do{var ie=O.lane,z=O.eventTime;if((u&ie)===ie){K!==null&&(K=K.next={eventTime:z,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var ue=n,ee=O;switch(ie=i,z=a,ee.tag){case 1:if(ue=ee.payload,typeof ue=="function"){X=ue.call(z,X,ie);break e}X=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ee.payload,ie=typeof ue=="function"?ue.call(z,X,ie):ue,ie==null)break e;X=Ht({},X,ie);break e;case 2:Pn=!0}}O.callback!==null&&O.lane!==0&&(n.flags|=64,ie=g.effects,ie===null?g.effects=[O]:ie.push(O))}else z={eventTime:z,lane:ie,tag:O.tag,payload:O.payload,callback:O.callback,next:null},K===null?(W=K=z,D=X):K=K.next=z,P|=ie;if(O=O.next,O===null){if(O=g.shared.pending,O===null)break;ie=O,O=ie.next,ie.next=null,g.lastBaseUpdate=ie,g.shared.pending=null}}while(1);if(K===null&&(D=X),g.baseState=D,g.firstBaseUpdate=W,g.lastBaseUpdate=K,i=g.shared.interleaved,i!==null){g=i;do P|=g.lane,g=g.next;while(g!==i)}else h===null&&(g.shared.lanes=0);vr|=P,n.lanes=P,n.memoizedState=X}}function Dc(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var u=n[i],g=u.callback;if(g!==null){if(u.callback=null,u=a,typeof g!="function")throw Error(Le(191,g));g.call(u)}}}var Fd=new zf.Component().refs;function uu(n,i,a,u){i=n.memoizedState,a=a(u,i),a=a==null?i:Ht({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ro={isMounted:function(n){return(n=n._reactInternals)?xr(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var u=yi(),g=Un(n),h=_n(u,g);h.payload=i,a!=null&&(h.callback=a),i=Vn(n,h,g),i!==null&&(Xi(i,n,g,u),Ua(i,n,g))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var u=yi(),g=Un(n),h=_n(u,g);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Vn(n,h,g),i!==null&&(Xi(i,n,g,u),Ua(i,n,g))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=yi(),u=Un(n),g=_n(a,u);g.tag=2,i!=null&&(g.callback=i),i=Vn(n,g,u),i!==null&&(Xi(i,n,u,a),Ua(i,n,u))}};function Fc(n,i,a,u,g,h,P){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,h,P):i.prototype&&i.prototype.isPureReactComponent?!Ws(a,u)||!Ws(g,h):!0}function Bd(n,i,a){var u=!1,g=Zn,h=i.contextType;return typeof h=="object"&&h!==null?h=Hi(h):(g=Ei(i)?gr:mi.current,u=i.contextTypes,h=(u=u!=null)?Jr(n,g):Zn),i=new i(a,h),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ro,n.stateNode=i,i._reactInternals=n,u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=h),i}function Bc(n,i,a,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==n&&Ro.enqueueReplaceState(i,i.state,null)}function hu(n,i,a,u){var g=n.stateNode;g.props=a,g.state=n.memoizedState,g.refs=Fd,nh(n);var h=i.contextType;typeof h=="object"&&h!==null?g.context=Hi(h):(h=Ei(i)?gr:mi.current,g.context=Jr(n,h)),g.state=n.memoizedState,h=i.getDerivedStateFromProps,typeof h=="function"&&(uu(n,i,h,a),g.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&Ro.enqueueReplaceState(g,g.state,null),mo(n,a,g,u),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function vs(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(Le(309));var u=a.stateNode}if(!u)throw Error(Le(147,n));var g=u,h=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===h?i.ref:(i=function(P){var O=g.refs;O===Fd&&(O=g.refs={}),P===null?delete O[h]:O[h]=P},i._stringRef=h,i)}if(typeof n!="string")throw Error(Le(284));if(!a._owner)throw Error(Le(290,n))}return n}function Pa(n,i){throw n=Object.prototype.toString.call(i),Error(Le(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Vc(n){var i=n._init;return i(n._payload)}function Vd(n){function i($,J){if(n){var te=$.deletions;te===null?($.deletions=[J],$.flags|=16):te.push(J)}}function a($,J){if(!n)return null;for(;J!==null;)i($,J),J=J.sibling;return null}function u($,J){for($=new Map;J!==null;)J.key!==null?$.set(J.key,J):$.set(J.index,J),J=J.sibling;return $}function g($,J){return $=Gn($,J),$.index=0,$.sibling=null,$}function h($,J,te){return $.index=te,n?(te=$.alternate,te!==null?(te=te.index,te<J?($.flags|=2,J):te):($.flags|=2,J)):($.flags|=1048576,J)}function P($){return n&&$.alternate===null&&($.flags|=2),$}function O($,J,te,pe){return J===null||J.tag!==6?(J=Pl(te,$.mode,pe),J.return=$,J):(J=g(J,te),J.return=$,J)}function D($,J,te,pe){var we=te.type;return we===Lr?K($,J,te.props.children,pe,te.key):J!==null&&(J.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Tn&&Vc(we)===J.type)?(pe=g(J,te.props),pe.ref=vs($,J,te),pe.return=$,pe):(pe=Za(te.type,te.key,te.props,null,$.mode,pe),pe.ref=vs($,J,te),pe.return=$,pe)}function W($,J,te,pe){return J===null||J.tag!==4||J.stateNode.containerInfo!==te.containerInfo||J.stateNode.implementation!==te.implementation?(J=Il(te,$.mode,pe),J.return=$,J):(J=g(J,te.children||[]),J.return=$,J)}function K($,J,te,pe,we){return J===null||J.tag!==7?(J=pr(te,$.mode,pe,we),J.return=$,J):(J=g(J,te),J.return=$,J)}function X($,J,te){if(typeof J=="string"&&J!==""||typeof J=="number")return J=Pl(""+J,$.mode,te),J.return=$,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case va:return te=Za(J.type,J.key,J.props,null,$.mode,te),te.ref=vs($,null,J),te.return=$,te;case Ar:return J=Il(J,$.mode,te),J.return=$,J;case Tn:var pe=J._init;return X($,pe(J._payload),te)}if(bs(J)||ds(J))return J=pr(J,$.mode,te,null),J.return=$,J;Pa($,J)}return null}function ie($,J,te,pe){var we=J!==null?J.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return we!==null?null:O($,J,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case va:return te.key===we?D($,J,te,pe):null;case Ar:return te.key===we?W($,J,te,pe):null;case Tn:return we=te._init,ie($,J,we(te._payload),pe)}if(bs(te)||ds(te))return we!==null?null:K($,J,te,pe,null);Pa($,te)}return null}function z($,J,te,pe,we){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return $=$.get(te)||null,O(J,$,""+pe,we);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case va:return $=$.get(pe.key===null?te:pe.key)||null,D(J,$,pe,we);case Ar:return $=$.get(pe.key===null?te:pe.key)||null,W(J,$,pe,we);case Tn:var B=pe._init;return z($,J,te,B(pe._payload),we)}if(bs(pe)||ds(pe))return $=$.get(te)||null,K(J,$,pe,we,null);Pa(J,pe)}return null}function ue($,J,te,pe){for(var we=null,B=null,Ne=J,Pe=J=0,Fe=null;Ne!==null&&Pe<te.length;Pe++){Ne.index>Pe?(Fe=Ne,Ne=null):Fe=Ne.sibling;var Ve=ie($,Ne,te[Pe],pe);if(Ve===null){Ne===null&&(Ne=Fe);break}n&&Ne&&Ve.alternate===null&&i($,Ne),J=h(Ve,J,Pe),B===null?we=Ve:B.sibling=Ve,B=Ve,Ne=Fe}if(Pe===te.length)return a($,Ne),Dt&&lr($,Pe),we;if(Ne===null){for(;Pe<te.length;Pe++)Ne=X($,te[Pe],pe),Ne!==null&&(J=h(Ne,J,Pe),B===null?we=Ne:B.sibling=Ne,B=Ne);return Dt&&lr($,Pe),we}for(Ne=u($,Ne);Pe<te.length;Pe++)Fe=z(Ne,$,Pe,te[Pe],pe),Fe!==null&&(n&&Fe.alternate!==null&&Ne.delete(Fe.key===null?Pe:Fe.key),J=h(Fe,J,Pe),B===null?we=Fe:B.sibling=Fe,B=Fe);return n&&Ne.forEach(function(ot){return i($,ot)}),Dt&&lr($,Pe),we}function ee($,J,te,pe){var we=ds(te);if(typeof we!="function")throw Error(Le(150));if(te=we.call(te),te==null)throw Error(Le(151));for(var B=we=null,Ne=J,Pe=J=0,Fe=null,Ve=te.next();Ne!==null&&!Ve.done;Pe++,Ve=te.next()){Ne.index>Pe?(Fe=Ne,Ne=null):Fe=Ne.sibling;var ot=ie($,Ne,Ve.value,pe);if(ot===null){Ne===null&&(Ne=Fe);break}n&&Ne&&ot.alternate===null&&i($,Ne),J=h(ot,J,Pe),B===null?we=ot:B.sibling=ot,B=ot,Ne=Fe}if(Ve.done)return a($,Ne),Dt&&lr($,Pe),we;if(Ne===null){for(;!Ve.done;Pe++,Ve=te.next())Ve=X($,Ve.value,pe),Ve!==null&&(J=h(Ve,J,Pe),B===null?we=Ve:B.sibling=Ve,B=Ve);return Dt&&lr($,Pe),we}for(Ne=u($,Ne);!Ve.done;Pe++,Ve=te.next())Ve=z(Ne,$,Pe,Ve.value,pe),Ve!==null&&(n&&Ve.alternate!==null&&Ne.delete(Ve.key===null?Pe:Ve.key),J=h(Ve,J,Pe),B===null?we=Ve:B.sibling=Ve,B=Ve);return n&&Ne.forEach(function(Ke){return i($,Ke)}),Dt&&lr($,Pe),we}function ce($,J,te,pe){if(typeof te=="object"&&te!==null&&te.type===Lr&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case va:e:{for(var we=te.key,B=J;B!==null;){if(B.key===we){if(we=te.type,we===Lr){if(B.tag===7){a($,B.sibling),J=g(B,te.props.children),J.return=$,$=J;break e}}else if(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Tn&&Vc(we)===B.type){a($,B.sibling),J=g(B,te.props),J.ref=vs($,B,te),J.return=$,$=J;break e}a($,B);break}else i($,B);B=B.sibling}te.type===Lr?(J=pr(te.props.children,$.mode,pe,te.key),J.return=$,$=J):(pe=Za(te.type,te.key,te.props,null,$.mode,pe),pe.ref=vs($,J,te),pe.return=$,$=pe)}return P($);case Ar:e:{for(B=te.key;J!==null;){if(J.key===B)if(J.tag===4&&J.stateNode.containerInfo===te.containerInfo&&J.stateNode.implementation===te.implementation){a($,J.sibling),J=g(J,te.children||[]),J.return=$,$=J;break e}else{a($,J);break}else i($,J);J=J.sibling}J=Il(te,$.mode,pe),J.return=$,$=J}return P($);case Tn:return B=te._init,ce($,J,B(te._payload),pe)}if(bs(te))return ue($,J,te,pe);if(ds(te))return ee($,J,te,pe);Pa($,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,J!==null&&J.tag===6?(a($,J.sibling),J=g(J,te),J.return=$,$=J):(a($,J),J=Pl(te,$.mode,pe),J.return=$,$=J),P($)):a($,J)}return ce}var ts=Vd(!0),Hd=Vd(!1),ra={},ln=$n(ra),Zs=$n(ra),js=$n(ra);function fr(n){if(n===ra)throw Error(Le(174));return n}function rh(n,i){switch(Lt(js,i),Lt(Zs,n),Lt(ln,ra),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ul(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Ul(i,n)}Rt(ln),Lt(ln,i)}function is(){Rt(ln),Rt(Zs),Rt(js)}function Ud(n){fr(js.current);var i=fr(ln.current),a=Ul(i,n.type);i!==a&&(Lt(Zs,n),Lt(ln,a))}function sh(n){Zs.current===n&&(Rt(ln),Rt(Zs))}var Bt=$n(0);function vo(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Cl=[];function ah(){for(var n=0;n<Cl.length;n++)Cl[n]._workInProgressVersionPrimary=null;Cl.length=0}var Ga=xn.ReactCurrentDispatcher,bl=xn.ReactCurrentBatchConfig,mr=0,Vt=null,ei=null,si=null,yo=!1,Ls=!1,Xs=0,ev=0;function pi(){throw Error(Le(321))}function oh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Yi(n[a],i[a]))return!1;return!0}function lh(n,i,a,u,g,h){if(mr=h,Vt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ga.current=n===null||n.memoizedState===null?rv:sv,n=a(u,g),Ls){h=0;do{if(Ls=!1,Xs=0,25<=h)throw Error(Le(301));h+=1,si=ei=null,i.updateQueue=null,Ga.current=av,n=a(u,g)}while(Ls)}if(Ga.current=wo,i=ei!==null&&ei.next!==null,mr=0,si=ei=Vt=null,yo=!1,i)throw Error(Le(300));return n}function uh(){var n=Xs!==0;return Xs=0,n}function rn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?Vt.memoizedState=si=n:si=si.next=n,si}function Ui(){if(ei===null){var n=Vt.alternate;n=n!==null?n.memoizedState:null}else n=ei.next;var i=si===null?Vt.memoizedState:si.next;if(i!==null)si=i,ei=n;else{if(n===null)throw Error(Le(310));ei=n,n={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},si===null?Vt.memoizedState=si=n:si=si.next=n}return si}function Ys(n,i){return typeof i=="function"?i(n):i}function El(n){var i=Ui(),a=i.queue;if(a===null)throw Error(Le(311));a.lastRenderedReducer=n;var u=ei,g=u.baseQueue,h=a.pending;if(h!==null){if(g!==null){var P=g.next;g.next=h.next,h.next=P}u.baseQueue=g=h,a.pending=null}if(g!==null){h=g.next,u=u.baseState;var O=P=null,D=null,W=h;do{var K=W.lane;if((mr&K)===K)D!==null&&(D=D.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),u=W.hasEagerState?W.eagerState:n(u,W.action);else{var X={lane:K,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};D===null?(O=D=X,P=u):D=D.next=X,Vt.lanes|=K,vr|=K}W=W.next}while(W!==null&&W!==h);D===null?P=u:D.next=O,Yi(u,i.memoizedState)||(Ci=!0),i.memoizedState=u,i.baseState=P,i.baseQueue=D,a.lastRenderedState=u}if(n=a.interleaved,n!==null){g=n;do h=g.lane,Vt.lanes|=h,vr|=h,g=g.next;while(g!==n)}else g===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function kl(n){var i=Ui(),a=i.queue;if(a===null)throw Error(Le(311));a.lastRenderedReducer=n;var u=a.dispatch,g=a.pending,h=i.memoizedState;if(g!==null){a.pending=null;var P=g=g.next;do h=n(h,P.action),P=P.next;while(P!==g);Yi(h,i.memoizedState)||(Ci=!0),i.memoizedState=h,i.baseQueue===null&&(i.baseState=h),a.lastRenderedState=h}return[h,u]}function Gd(){}function Wd(n,i){var a=Vt,u=Ui(),g=i(),h=!Yi(u.memoizedState,g);if(h&&(u.memoizedState=g,Ci=!0),u=u.queue,hh(Qd.bind(null,a,u,n),[n]),u.getSnapshot!==i||h||si!==null&&si.memoizedState.tag&1){if(a.flags|=2048,$s(9,Kd.bind(null,a,u,g,i),void 0,null),ai===null)throw Error(Le(349));(mr&30)!==0||qd(a,i,g)}return g}function qd(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Vt.updateQueue,i===null?(i={lastEffect:null,stores:null},Vt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Kd(n,i,a,u){i.value=a,i.getSnapshot=u,Zd(i)&&jd(n)}function Qd(n,i,a){return a(function(){Zd(i)&&jd(n)})}function Zd(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Yi(n,a)}catch(u){return!0}}function jd(n){var i=yn(n,1);i!==null&&Xi(i,n,1,-1)}function Hc(n){var i=rn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:n},i.queue=n,n=n.dispatch=nv.bind(null,Vt,n),[i.memoizedState,n]}function $s(n,i,a,u){return n={tag:n,create:i,destroy:a,deps:u,next:null},i=Vt.updateQueue,i===null?(i={lastEffect:null,stores:null},Vt.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,i.lastEffect=n)),n}function Xd(){return Ui().memoizedState}function Wa(n,i,a,u){var g=rn();Vt.flags|=n,g.memoizedState=$s(1|i,a,void 0,u===void 0?null:u)}function zo(n,i,a,u){var g=Ui();u=u===void 0?null:u;var h=void 0;if(ei!==null){var P=ei.memoizedState;if(h=P.destroy,u!==null&&oh(u,P.deps)){g.memoizedState=$s(i,a,h,u);return}}Vt.flags|=n,g.memoizedState=$s(1|i,a,h,u)}function Uc(n,i){return Wa(8390656,8,n,i)}function hh(n,i){return zo(2048,8,n,i)}function Yd(n,i){return zo(4,2,n,i)}function $d(n,i){return zo(4,4,n,i)}function Jd(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function ep(n,i,a){return a=a!=null?a.concat([n]):null,zo(4,4,Jd.bind(null,i,n),a)}function ch(){}function tp(n,i){var a=Ui();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&oh(i,u[1])?u[0]:(a.memoizedState=[n,i],n)}function ip(n,i){var a=Ui();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&oh(i,u[1])?u[0]:(n=n(),a.memoizedState=[n,i],n)}function np(n,i,a){return(mr&21)===0?(n.baseState&&(n.baseState=!1,Ci=!0),n.memoizedState=a):(Yi(a,i)||(a=ad(),Vt.lanes|=a,vr|=a,n.baseState=!0),i)}function tv(n,i){var a=kt;kt=a!==0&&4>a?a:4,n(!0);var u=bl.transition;bl.transition={};try{n(!1),i()}finally{kt=a,bl.transition=u}}function rp(){return Ui().memoizedState}function iv(n,i,a){var u=Un(n);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},sp(n))ap(i,a);else if(a=zd(n,i,a,u),a!==null){var g=yi();Xi(a,n,u,g),op(a,i,u)}}function nv(n,i,a){var u=Un(n),g={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(sp(n))ap(i,g);else{var h=n.alternate;if(n.lanes===0&&(h===null||h.lanes===0)&&(h=i.lastRenderedReducer,h!==null))try{var P=i.lastRenderedState,O=h(P,a);if(g.hasEagerState=!0,g.eagerState=O,Yi(O,P)){var D=i.interleaved;D===null?(g.next=g,ih(i)):(g.next=D.next,D.next=g),i.interleaved=g;return}}catch(W){}finally{}a=zd(n,i,g,u),a!==null&&(g=yi(),Xi(a,n,u,g),op(a,i,u))}}function sp(n){var i=n.alternate;return n===Vt||i!==null&&i===Vt}function ap(n,i){Ls=yo=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function op(n,i,a){if((a&4194240)!==0){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,Uu(n,a)}}var wo={readContext:Hi,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},rv={readContext:Hi,useCallback:function(n,i){return rn().memoizedState=[n,i===void 0?null:i],n},useContext:Hi,useEffect:Uc,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Wa(4194308,4,Jd.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Wa(4194308,4,n,i)},useInsertionEffect:function(n,i){return Wa(4,2,n,i)},useMemo:function(n,i){var a=rn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var u=rn();return i=a!==void 0?a(i):i,u.memoizedState=u.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},u.queue=n,n=n.dispatch=iv.bind(null,Vt,n),[u.memoizedState,n]},useRef:function(n){var i=rn();return n={current:n},i.memoizedState=n},useState:Hc,useDebugValue:ch,useDeferredValue:function(n){return rn().memoizedState=n},useTransition:function(){var n=Hc(!1),i=n[0];return n=tv.bind(null,n[1]),rn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var u=Vt,g=rn();if(Dt){if(a===void 0)throw Error(Le(407));a=a()}else{if(a=i(),ai===null)throw Error(Le(349));(mr&30)!==0||qd(u,i,a)}g.memoizedState=a;var h={value:a,getSnapshot:i};return g.queue=h,Uc(Qd.bind(null,u,h,n),[n]),u.flags|=2048,$s(9,Kd.bind(null,u,h,a,i),void 0,null),a},useId:function(){var n=rn(),i=ai.identifierPrefix;if(Dt){var a=gn,u=pn;a=(u&~(1<<32-ji(u)-1)).toString(32)+a,i=":"+i+"R"+a,a=Xs++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=ev++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},sv={readContext:Hi,useCallback:tp,useContext:Hi,useEffect:hh,useImperativeHandle:ep,useInsertionEffect:Yd,useLayoutEffect:$d,useMemo:ip,useReducer:El,useRef:Xd,useState:function(){return El(Ys)},useDebugValue:ch,useDeferredValue:function(n){var i=Ui();return np(i,ei.memoizedState,n)},useTransition:function(){var n=El(Ys)[0],i=Ui().memoizedState;return[n,i]},useMutableSource:Gd,useSyncExternalStore:Wd,useId:rp,unstable_isNewReconciler:!1},av={readContext:Hi,useCallback:tp,useContext:Hi,useEffect:hh,useImperativeHandle:ep,useInsertionEffect:Yd,useLayoutEffect:$d,useMemo:ip,useReducer:kl,useRef:Xd,useState:function(){return kl(Ys)},useDebugValue:ch,useDeferredValue:function(n){var i=Ui();return ei===null?i.memoizedState=n:np(i,ei.memoizedState,n)},useTransition:function(){var n=kl(Ys)[0],i=Ui().memoizedState;return[n,i]},useMutableSource:Gd,useSyncExternalStore:Wd,useId:rp,unstable_isNewReconciler:!1};function ns(n,i){try{var a="",u=i;do a+=M0(u),u=u.return;while(u);var g=a}catch(h){g=`
Error generating stack: `+h.message+`
`+h.stack}return{value:n,source:i,stack:g,digest:null}}function Nl(n,i,a){return{value:n,source:null,stack:a!=null?a:null,digest:i!=null?i:null}}function cu(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var ov=typeof WeakMap=="function"?WeakMap:Map;function lp(n,i,a){a=_n(-1,a),a.tag=3,a.payload={element:null};var u=i.value;return a.callback=function(){So||(So=!0,xu=u),cu(n,i)},a}function up(n,i,a){a=_n(-1,a),a.tag=3;var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var g=i.value;a.payload=function(){return u(g)},a.callback=function(){cu(n,i)}}var h=n.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(a.callback=function(){cu(n,i),typeof u!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var P=i.stack;this.componentDidCatch(i.value,{componentStack:P!==null?P:""})}),a}function Gc(n,i,a){var u=n.pingCache;if(u===null){u=n.pingCache=new ov;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(a)||(g.add(a),n=xv.bind(null,n,i,a),i.then(n,n))}function Wc(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function qc(n,i,a,u,g){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=_n(-1,1),i.tag=2,Vn(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var lv=xn.ReactCurrentOwner,Ci=!1;function vi(n,i,a,u){i.child=n===null?Hd(i,null,a,u):ts(i,n.child,a,u)}function Kc(n,i,a,u,g){a=a.render;var h=i.ref;return jr(i,g),u=lh(n,i,a,u,h,g),a=uh(),n!==null&&!Ci?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~g,wn(n,i,g)):(Dt&&a&&Xu(i),i.flags|=1,vi(n,i,u,g),i.child)}function Qc(n,i,a,u,g){if(n===null){var h=a.type;return typeof h=="function"&&!yh(h)&&h.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=h,hp(n,i,h,u,g)):(n=Za(a.type,null,u,i,i.mode,g),n.ref=i.ref,n.return=i,i.child=n)}if(h=n.child,(n.lanes&g)===0){var P=h.memoizedProps;if(a=a.compare,a=a!==null?a:Ws,a(P,u)&&n.ref===i.ref)return wn(n,i,g)}return i.flags|=1,n=Gn(h,u),n.ref=i.ref,n.return=i,i.child=n}function hp(n,i,a,u,g){if(n!==null){var h=n.memoizedProps;if(Ws(h,u)&&n.ref===i.ref)if(Ci=!1,i.pendingProps=u=h,(n.lanes&g)!==0)(n.flags&131072)!==0&&(Ci=!0);else return i.lanes=n.lanes,wn(n,i,g)}return fu(n,i,a,u,g)}function cp(n,i,a){var u=i.pendingProps,g=u.children,h=n!==null?n.memoizedState:null;if(u.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Ur,Ti),Ti|=a;else{if((a&1073741824)===0)return n=h!==null?h.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Lt(Ur,Ti),Ti|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=h!==null?h.baseLanes:a,Lt(Ur,Ti),Ti|=u}else h!==null?(u=h.baseLanes|a,i.memoizedState=null):u=a,Lt(Ur,Ti),Ti|=u;return vi(n,i,g,a),i.child}function fp(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function fu(n,i,a,u,g){var h=Ei(a)?gr:mi.current;return h=Jr(i,h),jr(i,g),a=lh(n,i,a,u,h,g),u=uh(),n!==null&&!Ci?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~g,wn(n,i,g)):(Dt&&u&&Xu(i),i.flags|=1,vi(n,i,a,g),i.child)}function Zc(n,i,a,u,g){if(Ei(a)){var h=!0;co(i)}else h=!1;if(jr(i,g),i.stateNode===null)qa(n,i),Bd(i,a,u),hu(i,a,u,g),u=!0;else if(n===null){var P=i.stateNode,O=i.memoizedProps;P.props=O;var D=P.context,W=a.contextType;typeof W=="object"&&W!==null?W=Hi(W):(W=Ei(a)?gr:mi.current,W=Jr(i,W));var K=a.getDerivedStateFromProps,X=typeof K=="function"||typeof P.getSnapshotBeforeUpdate=="function";X||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(O!==u||D!==W)&&Bc(i,P,u,W),Pn=!1;var ie=i.memoizedState;P.state=ie,mo(i,u,P,g),D=i.memoizedState,O!==u||ie!==D||bi.current||Pn?(typeof K=="function"&&(uu(i,a,K,u),D=i.memoizedState),(O=Pn||Fc(i,a,O,u,ie,D,W))?(X||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(i.flags|=4194308)):(typeof P.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=D),P.props=u,P.state=D,P.context=W,u=O):(typeof P.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{P=i.stateNode,Dd(n,i),O=i.memoizedProps,W=i.type===i.elementType?O:Ki(i.type,O),P.props=W,X=i.pendingProps,ie=P.context,D=a.contextType,typeof D=="object"&&D!==null?D=Hi(D):(D=Ei(a)?gr:mi.current,D=Jr(i,D));var z=a.getDerivedStateFromProps;(K=typeof z=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(O!==X||ie!==D)&&Bc(i,P,u,D),Pn=!1,ie=i.memoizedState,P.state=ie,mo(i,u,P,g);var ue=i.memoizedState;O!==X||ie!==ue||bi.current||Pn?(typeof z=="function"&&(uu(i,a,z,u),ue=i.memoizedState),(W=Pn||Fc(i,a,W,u,ie,ue,D)||!1)?(K||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(u,ue,D),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(u,ue,D)),typeof P.componentDidUpdate=="function"&&(i.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof P.componentDidUpdate!="function"||O===n.memoizedProps&&ie===n.memoizedState||(i.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&ie===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ue),P.props=u,P.state=ue,P.context=D,u=W):(typeof P.componentDidUpdate!="function"||O===n.memoizedProps&&ie===n.memoizedState||(i.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&ie===n.memoizedState||(i.flags|=1024),u=!1)}return du(n,i,a,u,h,g)}function du(n,i,a,u,g,h){fp(n,i);var P=(i.flags&128)!==0;if(!u&&!P)return g&&Oc(i,a,!1),wn(n,i,h);u=i.stateNode,lv.current=i;var O=P&&typeof a.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,n!==null&&P?(i.child=ts(i,n.child,null,h),i.child=ts(i,null,O,h)):vi(n,i,O,h),i.memoizedState=u.state,g&&Oc(i,a,!0),i.child}function dp(n){var i=n.stateNode;i.pendingContext?Lc(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Lc(n,i.context,!1),rh(n,i.containerInfo)}function jc(n,i,a,u,g){return es(),$u(g),i.flags|=256,vi(n,i,a,u),i.child}var pu={dehydrated:null,treeContext:null,retryLane:0};function gu(n){return{baseLanes:n,cachePool:null,transitions:null}}function pp(n,i,a){var u=i.pendingProps,g=Bt.current,h=!1,P=(i.flags&128)!==0,O;if((O=P)||(O=n!==null&&n.memoizedState===null?!1:(g&2)!==0),O?(h=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Lt(Bt,g&1),n===null)return ou(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(P=u.children,n=u.fallback,h?(u=i.mode,h=i.child,P={mode:"hidden",children:P},(u&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=P):h=Bo(P,u,0,null),n=pr(n,u,a,null),h.return=i,n.return=i,h.sibling=n,i.child=h,i.child.memoizedState=gu(a),i.memoizedState=pu,n):fh(i,P));if(g=n.memoizedState,g!==null&&(O=g.dehydrated,O!==null))return uv(n,i,P,u,O,g,a);if(h){h=u.fallback,P=i.mode,g=n.child,O=g.sibling;var D={mode:"hidden",children:u.children};return(P&1)===0&&i.child!==g?(u=i.child,u.childLanes=0,u.pendingProps=D,i.deletions=null):(u=Gn(g,D),u.subtreeFlags=g.subtreeFlags&14680064),O!==null?h=Gn(O,h):(h=pr(h,P,a,null),h.flags|=2),h.return=i,u.return=i,u.sibling=h,i.child=u,u=h,h=i.child,P=n.child.memoizedState,P=P===null?gu(a):{baseLanes:P.baseLanes|a,cachePool:null,transitions:P.transitions},h.memoizedState=P,h.childLanes=n.childLanes&~a,i.memoizedState=pu,u}return h=n.child,n=h.sibling,u=Gn(h,{mode:"visible",children:u.children}),(i.mode&1)===0&&(u.lanes=a),u.return=i,u.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=u,i.memoizedState=null,u}function fh(n,i){return i=Bo({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Ia(n,i,a,u){return u!==null&&$u(u),ts(i,n.child,null,a),n=fh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function uv(n,i,a,u,g,h,P){if(a)return i.flags&256?(i.flags&=-257,u=Nl(Error(Le(422))),Ia(n,i,P,u)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(h=u.fallback,g=i.mode,u=Bo({mode:"visible",children:u.children},g,0,null),h=pr(h,g,P,null),h.flags|=2,u.return=i,h.return=i,u.sibling=h,i.child=u,(i.mode&1)!==0&&ts(i,n.child,null,P),i.child.memoizedState=gu(P),i.memoizedState=pu,h);if((i.mode&1)===0)return Ia(n,i,P,null);if(g.data==="$!"){if(u=g.nextSibling&&g.nextSibling.dataset,u)var O=u.dgst;return u=O,h=Error(Le(419)),u=Nl(h,u,void 0),Ia(n,i,P,u)}if(O=(P&n.childLanes)!==0,Ci||O){if(u=ai,u!==null){switch(P&-P){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(u.suspendedLanes|P))!==0?0:g,g!==0&&g!==h.retryLane&&(h.retryLane=g,yn(n,g),Xi(u,n,g,-1))}return vh(),u=Nl(Error(Le(421))),Ia(n,i,P,u)}return g.data==="$?"?(i.flags|=128,i.child=n.child,i=Sv.bind(null,n),g._reactRetry=i,null):(n=h.treeContext,Pi=Bn(g.nextSibling),Ii=i,Dt=!0,Zi=null,n!==null&&(Di[Fi++]=pn,Di[Fi++]=gn,Di[Fi++]=_r,pn=n.id,gn=n.overflow,_r=i),i=fh(i,u.children),i.flags|=4096,i)}function Xc(n,i,a){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),lu(n.return,i,a)}function Tl(n,i,a,u,g){var h=n.memoizedState;h===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g}:(h.isBackwards=i,h.rendering=null,h.renderingStartTime=0,h.last=u,h.tail=a,h.tailMode=g)}function gp(n,i,a){var u=i.pendingProps,g=u.revealOrder,h=u.tail;if(vi(n,i,u.children,a),u=Bt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xc(n,a,i);else if(n.tag===19)Xc(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}if(Lt(Bt,u),(i.mode&1)===0)i.memoizedState=null;else switch(g){case"forwards":for(a=i.child,g=null;a!==null;)n=a.alternate,n!==null&&vo(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=i.child,i.child=null):(g=a.sibling,a.sibling=null),Tl(i,!1,g,a,h);break;case"backwards":for(a=null,g=i.child,i.child=null;g!==null;){if(n=g.alternate,n!==null&&vo(n)===null){i.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}Tl(i,!0,a,null,h);break;case"together":Tl(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function qa(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function wn(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),vr|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(Le(153));if(i.child!==null){for(n=i.child,a=Gn(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Gn(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function hv(n,i,a){switch(i.tag){case 3:dp(i),es();break;case 5:Ud(i);break;case 1:Ei(i.type)&&co(i);break;case 4:rh(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,g=i.memoizedProps.value;Lt(go,u._currentValue),u._currentValue=g;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(Lt(Bt,Bt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?pp(n,i,a):(Lt(Bt,Bt.current&1),n=wn(n,i,a),n!==null?n.sibling:null);Lt(Bt,Bt.current&1);break;case 19:if(u=(a&i.childLanes)!==0,(n.flags&128)!==0){if(u)return gp(n,i,a);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Lt(Bt,Bt.current),u)break;return null;case 22:case 23:return i.lanes=0,cp(n,i,a)}return wn(n,i,a)}var _p,_u,mp,vp;_p=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};_u=function(){};mp=function(n,i,a,u){var g=n.memoizedProps;if(g!==u){n=i.stateNode,fr(ln.current);var h=null;switch(a){case"input":g=Fl(n,g),u=Fl(n,u),h=[];break;case"select":g=Ht({},g,{value:void 0}),u=Ht({},u,{value:void 0}),h=[];break;case"textarea":g=Hl(n,g),u=Hl(n,u),h=[];break;default:typeof g.onClick!="function"&&typeof u.onClick=="function"&&(n.onclick=uo)}Gl(a,u);var P;a=null;for(W in g)if(!u.hasOwnProperty(W)&&g.hasOwnProperty(W)&&g[W]!=null)if(W==="style"){var O=g[W];for(P in O)O.hasOwnProperty(P)&&(a||(a={}),a[P]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(Ds.hasOwnProperty(W)?h||(h=[]):(h=h||[]).push(W,null));for(W in u){var D=u[W];if(O=g!=null?g[W]:void 0,u.hasOwnProperty(W)&&D!==O&&(D!=null||O!=null))if(W==="style")if(O){for(P in O)!O.hasOwnProperty(P)||D&&D.hasOwnProperty(P)||(a||(a={}),a[P]="");for(P in D)D.hasOwnProperty(P)&&O[P]!==D[P]&&(a||(a={}),a[P]=D[P])}else a||(h||(h=[]),h.push(W,a)),a=D;else W==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,O=O?O.__html:void 0,D!=null&&O!==D&&(h=h||[]).push(W,D)):W==="children"?typeof D!="string"&&typeof D!="number"||(h=h||[]).push(W,""+D):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(Ds.hasOwnProperty(W)?(D!=null&&W==="onScroll"&&Ot("scroll",n),h||O===D||(h=[])):(h=h||[]).push(W,D))}a&&(h=h||[]).push("style",a);var W=h;(i.updateQueue=W)&&(i.flags|=4)}};vp=function(n,i,a,u){a!==u&&(i.flags|=4)};function ys(n,i){if(!Dt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function gi(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(i)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&14680064,u|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=a,i}function cv(n,i,a){var u=i.pendingProps;switch(Yu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(i),null;case 1:return Ei(i.type)&&ho(),gi(i),null;case 3:return u=i.stateNode,is(),Rt(bi),Rt(mi),ah(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(Ta(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zi!==null&&(bu(Zi),Zi=null))),_u(n,i),gi(i),null;case 5:sh(i);var g=fr(js.current);if(a=i.type,n!==null&&i.stateNode!=null)mp(n,i,a,u,g),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(Le(166));return gi(i),null}if(n=fr(ln.current),Ta(i)){u=i.stateNode,a=i.type;var h=i.memoizedProps;switch(u[an]=i,u[Qs]=h,n=(i.mode&1)!==0,a){case"dialog":Ot("cancel",u),Ot("close",u);break;case"iframe":case"object":case"embed":Ot("load",u);break;case"video":case"audio":for(g=0;g<ks.length;g++)Ot(ks[g],u);break;case"source":Ot("error",u);break;case"img":case"image":case"link":Ot("error",u),Ot("load",u);break;case"details":Ot("toggle",u);break;case"input":sc(u,h),Ot("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!h.multiple},Ot("invalid",u);break;case"textarea":oc(u,h),Ot("invalid",u)}Gl(a,h),g=null;for(var P in h)if(h.hasOwnProperty(P)){var O=h[P];P==="children"?typeof O=="string"?u.textContent!==O&&(h.suppressHydrationWarning!==!0&&Na(u.textContent,O,n),g=["children",O]):typeof O=="number"&&u.textContent!==""+O&&(h.suppressHydrationWarning!==!0&&Na(u.textContent,O,n),g=["children",""+O]):Ds.hasOwnProperty(P)&&O!=null&&P==="onScroll"&&Ot("scroll",u)}switch(a){case"input":ya(u),ac(u,h,!0);break;case"textarea":ya(u),lc(u);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(u.onclick=uo)}u=g,i.updateQueue=u,u!==null&&(i.flags|=4)}else{P=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=qf(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=P.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof u.is=="string"?n=P.createElement(a,{is:u.is}):(n=P.createElement(a),a==="select"&&(P=n,u.multiple?P.multiple=!0:u.size&&(P.size=u.size))):n=P.createElementNS(n,a),n[an]=i,n[Qs]=u,_p(n,i,!1,!1),i.stateNode=n;e:{switch(P=Wl(a,u),a){case"dialog":Ot("cancel",n),Ot("close",n),g=u;break;case"iframe":case"object":case"embed":Ot("load",n),g=u;break;case"video":case"audio":for(g=0;g<ks.length;g++)Ot(ks[g],n);g=u;break;case"source":Ot("error",n),g=u;break;case"img":case"image":case"link":Ot("error",n),Ot("load",n),g=u;break;case"details":Ot("toggle",n),g=u;break;case"input":sc(n,u),g=Fl(n,u),Ot("invalid",n);break;case"option":g=u;break;case"select":n._wrapperState={wasMultiple:!!u.multiple},g=Ht({},u,{value:void 0}),Ot("invalid",n);break;case"textarea":oc(n,u),g=Hl(n,u),Ot("invalid",n);break;default:g=u}Gl(a,g),O=g;for(h in O)if(O.hasOwnProperty(h)){var D=O[h];h==="style"?Zf(n,D):h==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Kf(n,D)):h==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&Fs(n,D):typeof D=="number"&&Fs(n,""+D):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ds.hasOwnProperty(h)?D!=null&&h==="onScroll"&&Ot("scroll",n):D!=null&&zu(n,h,D,P))}switch(a){case"input":ya(n),ac(n,u,!1);break;case"textarea":ya(n),lc(n);break;case"option":u.value!=null&&n.setAttribute("value",""+Qn(u.value));break;case"select":n.multiple=!!u.multiple,h=u.value,h!=null?qr(n,!!u.multiple,h,!1):u.defaultValue!=null&&qr(n,!!u.multiple,u.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=uo)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return gi(i),null;case 6:if(n&&i.stateNode!=null)vp(n,i,n.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(Le(166));if(a=fr(js.current),fr(ln.current),Ta(i)){if(u=i.stateNode,a=i.memoizedProps,u[an]=i,(h=u.nodeValue!==a)&&(n=Ii,n!==null))switch(n.tag){case 3:Na(u.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Na(u.nodeValue,a,(n.mode&1)!==0)}h&&(i.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[an]=i,i.stateNode=u}return gi(i),null;case 13:if(Rt(Bt),u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Dt&&Pi!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Rd(),es(),i.flags|=98560,h=!1;else if(h=Ta(i),u!==null&&u.dehydrated!==null){if(n===null){if(!h)throw Error(Le(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(Le(317));h[an]=i}else es(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;gi(i),h=!1}else Zi!==null&&(bu(Zi),Zi=null),h=!0;if(!h)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(u=u!==null,u!==(n!==null&&n.memoizedState!==null)&&u&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(Bt.current&1)!==0?ti===0&&(ti=3):vh())),i.updateQueue!==null&&(i.flags|=4),gi(i),null);case 4:return is(),_u(n,i),n===null&&qs(i.stateNode.containerInfo),gi(i),null;case 10:return th(i.type._context),gi(i),null;case 17:return Ei(i.type)&&ho(),gi(i),null;case 19:if(Rt(Bt),h=i.memoizedState,h===null)return gi(i),null;if(u=(i.flags&128)!==0,P=h.rendering,P===null)if(u)ys(h,!1);else{if(ti!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(P=vo(n),P!==null){for(i.flags|=128,ys(h,!1),u=P.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=a,a=i.child;a!==null;)h=a,n=u,h.flags&=14680066,P=h.alternate,P===null?(h.childLanes=0,h.lanes=n,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=P.childLanes,h.lanes=P.lanes,h.child=P.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=P.memoizedProps,h.memoizedState=P.memoizedState,h.updateQueue=P.updateQueue,h.type=P.type,n=P.dependencies,h.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Lt(Bt,Bt.current&1|2),i.child}n=n.sibling}h.tail!==null&&Zt()>rs&&(i.flags|=128,u=!0,ys(h,!1),i.lanes=4194304)}else{if(!u)if(n=vo(P),n!==null){if(i.flags|=128,u=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),ys(h,!0),h.tail===null&&h.tailMode==="hidden"&&!P.alternate&&!Dt)return gi(i),null}else 2*Zt()-h.renderingStartTime>rs&&a!==1073741824&&(i.flags|=128,u=!0,ys(h,!1),i.lanes=4194304);h.isBackwards?(P.sibling=i.child,i.child=P):(a=h.last,a!==null?a.sibling=P:i.child=P,h.last=P)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Zt(),i.sibling=null,a=Bt.current,Lt(Bt,u?a&1|2:a&1),i):(gi(i),null);case 22:case 23:return mh(),u=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==u&&(i.flags|=8192),u&&(i.mode&1)!==0?(Ti&1073741824)!==0&&(gi(i),i.subtreeFlags&6&&(i.flags|=8192)):gi(i),null;case 24:return null;case 25:return null}throw Error(Le(156,i.tag))}function fv(n,i){switch(Yu(i),i.tag){case 1:return Ei(i.type)&&ho(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return is(),Rt(bi),Rt(mi),ah(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return sh(i),null;case 13:if(Rt(Bt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(Le(340));es()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Rt(Bt),null;case 4:return is(),null;case 10:return th(i.type._context),null;case 22:case 23:return mh(),null;case 24:return null;default:return null}}var Aa=!1,_i=!1,dv=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Hr(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){Wt(n,i,u)}else a.current=null}function mu(n,i,a){try{a()}catch(u){Wt(n,i,u)}}var Yc=!1;function pv(n,i){if(eu=ao,n=Sd(),ju(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{a.nodeType,h.nodeType}catch(pe){a=null;break e}var P=0,O=-1,D=-1,W=0,K=0,X=n,ie=null;t:for(;;){for(var z;X!==a||g!==0&&X.nodeType!==3||(O=P+g),X!==h||u!==0&&X.nodeType!==3||(D=P+u),X.nodeType===3&&(P+=X.nodeValue.length),(z=X.firstChild)!==null;)ie=X,X=z;for(;;){if(X===n)break t;if(ie===a&&++W===g&&(O=P),ie===h&&++K===u&&(D=P),(z=X.nextSibling)!==null)break;X=ie,ie=X.parentNode}X=z}a=O===-1||D===-1?null:{start:O,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(tu={focusedElem:n,selectionRange:a},ao=!1,Ue=i;Ue!==null;)if(i=Ue,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ue=n;else for(;Ue!==null;){i=Ue;try{var ue=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ee=ue.memoizedProps,ce=ue.memoizedState,$=i.stateNode,J=$.getSnapshotBeforeUpdate(i.elementType===i.type?ee:Ki(i.type,ee),ce);$.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var te=i.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(pe){Wt(i,i.return,pe)}if(n=i.sibling,n!==null){n.return=i.return,Ue=n;break}Ue=i.return}return ue=Yc,Yc=!1,ue}function Os(n,i,a){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var g=u=u.next;do{if((g.tag&n)===n){var h=g.destroy;g.destroy=void 0,h!==void 0&&mu(i,a,h)}g=g.next}while(g!==u)}}function Do(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var u=a.create;a.destroy=u()}a=a.next}while(a!==i)}}function vu(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function yp(n){var i=n.alternate;i!==null&&(n.alternate=null,yp(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[an],delete i[Qs],delete i[ru],delete i[Xm],delete i[Ym])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function wp(n){return n.tag===5||n.tag===3||n.tag===4}function $c(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||wp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function yu(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=uo));else if(u!==4&&(n=n.child,n!==null))for(yu(n,i,a),n=n.sibling;n!==null;)yu(n,i,a),n=n.sibling}function wu(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(u!==4&&(n=n.child,n!==null))for(wu(n,i,a),n=n.sibling;n!==null;)wu(n,i,a),n=n.sibling}var ui=null,Qi=!1;function Nn(n,i,a){for(a=a.child;a!==null;)xp(n,i,a),a=a.sibling}function xp(n,i,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Po,a)}catch(O){}switch(a.tag){case 5:_i||Hr(a,i);case 6:var u=ui,g=Qi;ui=null,Nn(n,i,a),ui=u,Qi=g,ui!==null&&(Qi?(n=ui,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):ui.removeChild(a.stateNode));break;case 18:ui!==null&&(Qi?(n=ui,a=a.stateNode,n.nodeType===8?xl(n.parentNode,a):n.nodeType===1&&xl(n,a),Us(n)):xl(ui,a.stateNode));break;case 4:u=ui,g=Qi,ui=a.stateNode.containerInfo,Qi=!0,Nn(n,i,a),ui=u,Qi=g;break;case 0:case 11:case 14:case 15:if(!_i&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){g=u=u.next;do{var h=g,P=h.destroy;h=h.tag,P!==void 0&&((h&2)!==0||(h&4)!==0)&&mu(a,i,P),g=g.next}while(g!==u)}Nn(n,i,a);break;case 1:if(!_i&&(Hr(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(O){Wt(a,i,O)}Nn(n,i,a);break;case 21:Nn(n,i,a);break;case 22:a.mode&1?(_i=(u=_i)||a.memoizedState!==null,Nn(n,i,a),_i=u):Nn(n,i,a);break;default:Nn(n,i,a)}}function Jc(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new dv),i.forEach(function(u){var g=Cv.bind(null,n,u);a.has(u)||(a.add(u),u.then(g,g))})}}function qi(n,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];try{var h=n,P=i,O=P;e:for(;O!==null;){switch(O.tag){case 5:ui=O.stateNode,Qi=!1;break e;case 3:ui=O.stateNode.containerInfo,Qi=!0;break e;case 4:ui=O.stateNode.containerInfo,Qi=!0;break e}O=O.return}if(ui===null)throw Error(Le(160));xp(h,P,g),ui=null,Qi=!1;var D=g.alternate;D!==null&&(D.return=null),g.return=null}catch(W){Wt(g,i,W)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Sp(i,n),i=i.sibling}function Sp(n,i){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(qi(i,n),tn(n),u&4){try{Os(3,n,n.return),Do(3,n)}catch(ee){Wt(n,n.return,ee)}try{Os(5,n,n.return)}catch(ee){Wt(n,n.return,ee)}}break;case 1:qi(i,n),tn(n),u&512&&a!==null&&Hr(a,a.return);break;case 5:if(qi(i,n),tn(n),u&512&&a!==null&&Hr(a,a.return),n.flags&32){var g=n.stateNode;try{Fs(g,"")}catch(ee){Wt(n,n.return,ee)}}if(u&4&&(g=n.stateNode,g!=null)){var h=n.memoizedProps,P=a!==null?a.memoizedProps:h,O=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{O==="input"&&h.type==="radio"&&h.name!=null&&Gf(g,h),Wl(O,P);var W=Wl(O,h);for(P=0;P<D.length;P+=2){var K=D[P],X=D[P+1];K==="style"?Zf(g,X):K==="dangerouslySetInnerHTML"?Kf(g,X):K==="children"?Fs(g,X):zu(g,K,X,W)}switch(O){case"input":Bl(g,h);break;case"textarea":Wf(g,h);break;case"select":var ie=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!h.multiple;var z=h.value;z!=null?qr(g,!!h.multiple,z,!1):ie!==!!h.multiple&&(h.defaultValue!=null?qr(g,!!h.multiple,h.defaultValue,!0):qr(g,!!h.multiple,h.multiple?[]:"",!1))}g[Qs]=h}catch(ee){Wt(n,n.return,ee)}}break;case 6:if(qi(i,n),tn(n),u&4){if(n.stateNode===null)throw Error(Le(162));g=n.stateNode,h=n.memoizedProps;try{g.nodeValue=h}catch(ee){Wt(n,n.return,ee)}}break;case 3:if(qi(i,n),tn(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Us(i.containerInfo)}catch(ee){Wt(n,n.return,ee)}break;case 4:qi(i,n),tn(n);break;case 13:qi(i,n),tn(n),g=n.child,g.flags&8192&&(h=g.memoizedState!==null,g.stateNode.isHidden=h,!h||g.alternate!==null&&g.alternate.memoizedState!==null||(gh=Zt())),u&4&&Jc(n);break;case 22:if(K=a!==null&&a.memoizedState!==null,n.mode&1?(_i=(W=_i)||K,qi(i,n),_i=W):qi(i,n),tn(n),u&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!K&&(n.mode&1)!==0)for(Ue=n,K=n.child;K!==null;){for(X=Ue=K;Ue!==null;){switch(ie=Ue,z=ie.child,ie.tag){case 0:case 11:case 14:case 15:Os(4,ie,ie.return);break;case 1:Hr(ie,ie.return);var ue=ie.stateNode;if(typeof ue.componentWillUnmount=="function"){u=ie,a=ie.return;try{i=u,ue.props=i.memoizedProps,ue.state=i.memoizedState,ue.componentWillUnmount()}catch(ee){Wt(u,a,ee)}}break;case 5:Hr(ie,ie.return);break;case 22:if(ie.memoizedState!==null){tf(X);continue}}z!==null?(z.return=ie,Ue=z):tf(X)}K=K.sibling}e:for(K=null,X=n;;){if(X.tag===5){if(K===null){K=X;try{g=X.stateNode,W?(h=g.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(O=X.stateNode,D=X.memoizedProps.style,P=D!=null&&D.hasOwnProperty("display")?D.display:null,O.style.display=Qf("display",P))}catch(ee){Wt(n,n.return,ee)}}}else if(X.tag===6){if(K===null)try{X.stateNode.nodeValue=W?"":X.memoizedProps}catch(ee){Wt(n,n.return,ee)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break e;for(;X.sibling===null;){if(X.return===null||X.return===n)break e;K===X&&(K=null),X=X.return}K===X&&(K=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:qi(i,n),tn(n),u&4&&Jc(n);break;case 21:break;default:qi(i,n),tn(n)}}function tn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(wp(a)){var u=a;break e}a=a.return}throw Error(Le(160))}switch(u.tag){case 5:var g=u.stateNode;u.flags&32&&(Fs(g,""),u.flags&=-33);var h=$c(n);wu(n,h,g);break;case 3:case 4:var P=u.stateNode.containerInfo,O=$c(n);yu(n,O,P);break;default:throw Error(Le(161))}}catch(D){Wt(n,n.return,D)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function gv(n,i,a){Ue=n,Cp(n)}function Cp(n,i,a){for(var u=(n.mode&1)!==0;Ue!==null;){var g=Ue,h=g.child;if(g.tag===22&&u){var P=g.memoizedState!==null||Aa;if(!P){var O=g.alternate,D=O!==null&&O.memoizedState!==null||_i;O=Aa;var W=_i;if(Aa=P,(_i=D)&&!W)for(Ue=g;Ue!==null;)P=Ue,D=P.child,P.tag===22&&P.memoizedState!==null?nf(g):D!==null?(D.return=P,Ue=D):nf(g);for(;h!==null;)Ue=h,Cp(h),h=h.sibling;Ue=g,Aa=O,_i=W}ef(n)}else(g.subtreeFlags&8772)!==0&&h!==null?(h.return=g,Ue=h):ef(n)}}function ef(n){for(;Ue!==null;){var i=Ue;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:_i||Do(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!_i)if(a===null)u.componentDidMount();else{var g=i.elementType===i.type?a.memoizedProps:Ki(i.type,a.memoizedProps);u.componentDidUpdate(g,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var h=i.updateQueue;h!==null&&Dc(i,h,u);break;case 3:var P=i.updateQueue;if(P!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Dc(i,P,a)}break;case 5:var O=i.stateNode;if(a===null&&i.flags&4){a=O;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var W=i.alternate;if(W!==null){var K=W.memoizedState;if(K!==null){var X=K.dehydrated;X!==null&&Us(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}_i||i.flags&512&&vu(i)}catch(ie){Wt(i,i.return,ie)}}if(i===n){Ue=null;break}if(a=i.sibling,a!==null){a.return=i.return,Ue=a;break}Ue=i.return}}function tf(n){for(;Ue!==null;){var i=Ue;if(i===n){Ue=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Ue=a;break}Ue=i.return}}function nf(n){for(;Ue!==null;){var i=Ue;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Do(4,i)}catch(D){Wt(i,a,D)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var g=i.return;try{u.componentDidMount()}catch(D){Wt(i,g,D)}}var h=i.return;try{vu(i)}catch(D){Wt(i,h,D)}break;case 5:var P=i.return;try{vu(i)}catch(D){Wt(i,P,D)}}}catch(D){Wt(i,i.return,D)}if(i===n){Ue=null;break}var O=i.sibling;if(O!==null){O.return=i.return,Ue=O;break}Ue=i.return}}var _v=Math.ceil,xo=xn.ReactCurrentDispatcher,dh=xn.ReactCurrentOwner,Vi=xn.ReactCurrentBatchConfig,yt=0,ai=null,Yt=null,hi=0,Ti=0,Ur=$n(0),ti=0,Js=null,vr=0,Fo=0,ph=0,Ms=null,Si=null,gh=0,rs=1/0,fn=null,So=!1,xu=null,Hn=null,La=!1,Rn=null,Co=0,Rs=0,Su=null,Ka=-1,Qa=0;function yi(){return(yt&6)!==0?Zt():Ka!==-1?Ka:Ka=Zt()}function Un(n){return(n.mode&1)===0?1:(yt&2)!==0&&hi!==0?hi&-hi:Jm.transition!==null?(Qa===0&&(Qa=ad()),Qa):(n=kt,n!==0||(n=window.event,n=n===void 0?16:dd(n.type)),n)}function Xi(n,i,a,u){if(50<Rs)throw Rs=0,Su=null,Error(Le(185));ta(n,a,u),((yt&2)===0||n!==ai)&&(n===ai&&((yt&2)===0&&(Fo|=a),ti===4&&Ln(n,hi)),ki(n,u),a===1&&yt===0&&(i.mode&1)===0&&(rs=Zt()+500,Mo&&Jn()))}function ki(n,i){var a=n.callbackNode;J0(n,i);var u=so(n,n===ai?hi:0);if(u===0)a!==null&&cc(a),n.callbackNode=null,n.callbackPriority=0;else if(i=u&-u,n.callbackPriority!==i){if(a!=null&&cc(a),i===1)n.tag===0?$m(rf.bind(null,n)):Ld(rf.bind(null,n)),Zm(function(){(yt&6)===0&&Jn()}),a=null;else{switch(od(u)){case 1:a=Hu;break;case 4:a=rd;break;case 16:a=ro;break;case 536870912:a=sd;break;default:a=ro}a=Ap(a,bp.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function bp(n,i){if(Ka=-1,Qa=0,(yt&6)!==0)throw Error(Le(327));var a=n.callbackNode;if(Xr()&&n.callbackNode!==a)return null;var u=so(n,n===ai?hi:0);if(u===0)return null;if((u&30)!==0||(u&n.expiredLanes)!==0||i)i=bo(n,u);else{i=u;var g=yt;yt|=2;var h=kp();(ai!==n||hi!==i)&&(fn=null,rs=Zt()+500,dr(n,i));do try{yv();break}catch(O){Ep(n,O)}while(1);eh(),xo.current=h,yt=g,Yt!==null?i=0:(ai=null,hi=0,i=ti)}if(i!==0){if(i===2&&(g=jl(n),g!==0&&(u=g,i=Cu(n,g))),i===1)throw a=Js,dr(n,0),Ln(n,u),ki(n,Zt()),a;if(i===6)Ln(n,u);else{if(g=n.current.alternate,(u&30)===0&&!mv(g)&&(i=bo(n,u),i===2&&(h=jl(n),h!==0&&(u=h,i=Cu(n,h))),i===1))throw a=Js,dr(n,0),Ln(n,u),ki(n,Zt()),a;switch(n.finishedWork=g,n.finishedLanes=u,i){case 0:case 1:throw Error(Le(345));case 2:ur(n,Si,fn);break;case 3:if(Ln(n,u),(u&130023424)===u&&(i=gh+500-Zt(),10<i)){if(so(n,0)!==0)break;if(g=n.suspendedLanes,(g&u)!==u){yi(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=nu(ur.bind(null,n,Si,fn),i);break}ur(n,Si,fn);break;case 4:if(Ln(n,u),(u&4194240)===u)break;for(i=n.eventTimes,g=-1;0<u;){var P=31-ji(u);h=1<<P,P=i[P],P>g&&(g=P),u&=~h}if(u=g,u=Zt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*_v(u/1960))-u,10<u){n.timeoutHandle=nu(ur.bind(null,n,Si,fn),u);break}ur(n,Si,fn);break;case 5:ur(n,Si,fn);break;default:throw Error(Le(329))}}}return ki(n,Zt()),n.callbackNode===a?bp.bind(null,n):null}function Cu(n,i){var a=Ms;return n.current.memoizedState.isDehydrated&&(dr(n,i).flags|=256),n=bo(n,i),n!==2&&(i=Si,Si=a,i!==null&&bu(i)),n}function bu(n){Si===null?Si=n:Si.push.apply(Si,n)}function mv(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var g=a[u],h=g.getSnapshot;g=g.value;try{if(!Yi(h(),g))return!1}catch(P){return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ln(n,i){for(i&=~ph,i&=~Fo,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-ji(i),u=1<<a;n[a]=-1,i&=~u}}function rf(n){if((yt&6)!==0)throw Error(Le(327));Xr();var i=so(n,0);if((i&1)===0)return ki(n,Zt()),null;var a=bo(n,i);if(n.tag!==0&&a===2){var u=jl(n);u!==0&&(i=u,a=Cu(n,u))}if(a===1)throw a=Js,dr(n,0),Ln(n,i),ki(n,Zt()),a;if(a===6)throw Error(Le(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ur(n,Si,fn),ki(n,Zt()),null}function _h(n,i){var a=yt;yt|=1;try{return n(i)}finally{yt=a,yt===0&&(rs=Zt()+500,Mo&&Jn())}}function yr(n){Rn!==null&&Rn.tag===0&&(yt&6)===0&&Xr();var i=yt;yt|=1;var a=Vi.transition,u=kt;try{if(Vi.transition=null,kt=1,n)return n()}finally{kt=u,Vi.transition=a,yt=i,(yt&6)===0&&Jn()}}function mh(){Ti=Ur.current,Rt(Ur)}function dr(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Qm(a)),Yt!==null)for(a=Yt.return;a!==null;){var u=a;switch(Yu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ho();break;case 3:is(),Rt(bi),Rt(mi),ah();break;case 5:sh(u);break;case 4:is();break;case 13:Rt(Bt);break;case 19:Rt(Bt);break;case 10:th(u.type._context);break;case 22:case 23:mh()}a=a.return}if(ai=n,Yt=n=Gn(n.current,null),hi=Ti=i,ti=0,Js=null,ph=Fo=vr=0,Si=Ms=null,cr!==null){for(i=0;i<cr.length;i++)if(a=cr[i],u=a.interleaved,u!==null){a.interleaved=null;var g=u.next,h=a.pending;if(h!==null){var P=h.next;h.next=g,u.next=P}a.pending=u}cr=null}return n}function Ep(n,i){do{var a=Yt;try{if(eh(),Ga.current=wo,yo){for(var u=Vt.memoizedState;u!==null;){var g=u.queue;g!==null&&(g.pending=null),u=u.next}yo=!1}if(mr=0,si=ei=Vt=null,Ls=!1,Xs=0,dh.current=null,a===null||a.return===null){ti=1,Js=i,Yt=null;break}e:{var h=n,P=a.return,O=a,D=i;if(i=hi,O.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=D,K=O,X=K.tag;if((K.mode&1)===0&&(X===0||X===11||X===15)){var ie=K.alternate;ie?(K.updateQueue=ie.updateQueue,K.memoizedState=ie.memoizedState,K.lanes=ie.lanes):(K.updateQueue=null,K.memoizedState=null)}var z=Wc(P);if(z!==null){z.flags&=-257,qc(z,P,O,h,i),z.mode&1&&Gc(h,W,i),i=z,D=W;var ue=i.updateQueue;if(ue===null){var ee=new Set;ee.add(D),i.updateQueue=ee}else ue.add(D);break e}else{if((i&1)===0){Gc(h,W,i),vh();break e}D=Error(Le(426))}}else if(Dt&&O.mode&1){var ce=Wc(P);if(ce!==null){(ce.flags&65536)===0&&(ce.flags|=256),qc(ce,P,O,h,i),$u(ns(D,O));break e}}h=D=ns(D,O),ti!==4&&(ti=2),Ms===null?Ms=[h]:Ms.push(h),h=P;do{switch(h.tag){case 3:h.flags|=65536,i&=-i,h.lanes|=i;var $=lp(h,D,i);zc(h,$);break e;case 1:O=D;var J=h.type,te=h.stateNode;if((h.flags&128)===0&&(typeof J.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Hn===null||!Hn.has(te)))){h.flags|=65536,i&=-i,h.lanes|=i;var pe=up(h,O,i);zc(h,pe);break e}}h=h.return}while(h!==null)}Tp(a)}catch(we){i=we,Yt===a&&a!==null&&(Yt=a=a.return);continue}break}while(1)}function kp(){var n=xo.current;return xo.current=wo,n===null?wo:n}function vh(){(ti===0||ti===3||ti===2)&&(ti=4),ai===null||(vr&268435455)===0&&(Fo&268435455)===0||Ln(ai,hi)}function bo(n,i){var a=yt;yt|=2;var u=kp();(ai!==n||hi!==i)&&(fn=null,dr(n,i));do try{vv();break}catch(g){Ep(n,g)}while(1);if(eh(),yt=a,xo.current=u,Yt!==null)throw Error(Le(261));return ai=null,hi=0,ti}function vv(){for(;Yt!==null;)Np(Yt)}function yv(){for(;Yt!==null&&!W0();)Np(Yt)}function Np(n){var i=Ip(n.alternate,n,Ti);n.memoizedProps=n.pendingProps,i===null?Tp(n):Yt=i,dh.current=null}function Tp(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=cv(a,i,Ti),a!==null){Yt=a;return}}else{if(a=fv(a,i),a!==null){a.flags&=32767,Yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ti=6,Yt=null;return}}if(i=i.sibling,i!==null){Yt=i;return}Yt=i=n}while(i!==null);ti===0&&(ti=5)}function ur(n,i,a){var u=kt,g=Vi.transition;try{Vi.transition=null,kt=1,wv(n,i,a,u)}finally{Vi.transition=g,kt=u}return null}function wv(n,i,a,u){do Xr();while(Rn!==null);if((yt&6)!==0)throw Error(Le(327));a=n.finishedWork;var g=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(Le(177));n.callbackNode=null,n.callbackPriority=0;var h=a.lanes|a.childLanes;if(em(n,h),n===ai&&(Yt=ai=null,hi=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||La||(La=!0,Ap(ro,function(){return Xr(),null})),h=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||h){h=Vi.transition,Vi.transition=null;var P=kt;kt=1;var O=yt;yt|=4,dh.current=null,pv(n,a),Sp(a,n),Vm(tu),ao=!!eu,tu=eu=null,n.current=a,gv(a),q0(),yt=O,kt=P,Vi.transition=h}else n.current=a;if(La&&(La=!1,Rn=n,Co=g),h=n.pendingLanes,h===0&&(Hn=null),Z0(a.stateNode),ki(n,Zt()),i!==null)for(u=n.onRecoverableError,a=0;a<i.length;a++)g=i[a],u(g.value,{componentStack:g.stack,digest:g.digest});if(So)throw So=!1,n=xu,xu=null,n;return(Co&1)!==0&&n.tag!==0&&Xr(),h=n.pendingLanes,(h&1)!==0?n===Su?Rs++:(Rs=0,Su=n):Rs=0,Jn(),null}function Xr(){if(Rn!==null){var n=od(Co),i=Vi.transition,a=kt;try{if(Vi.transition=null,kt=16>n?16:n,Rn===null)var u=!1;else{if(n=Rn,Rn=null,Co=0,(yt&6)!==0)throw Error(Le(331));var g=yt;for(yt|=4,Ue=n.current;Ue!==null;){var h=Ue,P=h.child;if((Ue.flags&16)!==0){var O=h.deletions;if(O!==null){for(var D=0;D<O.length;D++){var W=O[D];for(Ue=W;Ue!==null;){var K=Ue;switch(K.tag){case 0:case 11:case 15:Os(8,K,h)}var X=K.child;if(X!==null)X.return=K,Ue=X;else for(;Ue!==null;){K=Ue;var ie=K.sibling,z=K.return;if(yp(K),K===W){Ue=null;break}if(ie!==null){ie.return=z,Ue=ie;break}Ue=z}}}var ue=h.alternate;if(ue!==null){var ee=ue.child;if(ee!==null){ue.child=null;do{var ce=ee.sibling;ee.sibling=null,ee=ce}while(ee!==null)}}Ue=h}}if((h.subtreeFlags&2064)!==0&&P!==null)P.return=h,Ue=P;else e:for(;Ue!==null;){if(h=Ue,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:Os(9,h,h.return)}var $=h.sibling;if($!==null){$.return=h.return,Ue=$;break e}Ue=h.return}}var J=n.current;for(Ue=J;Ue!==null;){P=Ue;var te=P.child;if((P.subtreeFlags&2064)!==0&&te!==null)te.return=P,Ue=te;else e:for(P=J;Ue!==null;){if(O=Ue,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Do(9,O)}}catch(we){Wt(O,O.return,we)}if(O===P){Ue=null;break e}var pe=O.sibling;if(pe!==null){pe.return=O.return,Ue=pe;break e}Ue=O.return}}if(yt=g,Jn(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Po,n)}catch(we){}u=!0}return u}finally{kt=a,Vi.transition=i}}return!1}function sf(n,i,a){i=ns(a,i),i=lp(n,i,1),n=Vn(n,i,1),i=yi(),n!==null&&(ta(n,1,i),ki(n,i))}function Wt(n,i,a){if(n.tag===3)sf(n,n,a);else for(;i!==null;){if(i.tag===3){sf(i,n,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Hn===null||!Hn.has(u))){n=ns(a,n),n=up(i,n,1),i=Vn(i,n,1),n=yi(),i!==null&&(ta(i,1,n),ki(i,n));break}}i=i.return}}function xv(n,i,a){var u=n.pingCache;u!==null&&u.delete(i),i=yi(),n.pingedLanes|=n.suspendedLanes&a,ai===n&&(hi&a)===a&&(ti===4||ti===3&&(hi&130023424)===hi&&500>Zt()-gh?dr(n,0):ph|=a),ki(n,i)}function Pp(n,i){i===0&&((n.mode&1)===0?i=1:(i=Sa,Sa<<=1,(Sa&130023424)===0&&(Sa=4194304)));var a=yi();n=yn(n,i),n!==null&&(ta(n,i,a),ki(n,a))}function Sv(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Pp(n,a)}function Cv(n,i){var a=0;switch(n.tag){case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=n.stateNode;break;default:throw Error(Le(314))}u!==null&&u.delete(i),Pp(n,a)}var Ip;Ip=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||bi.current)Ci=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Ci=!1,hv(n,i,a);Ci=(n.flags&131072)!==0}else Ci=!1,Dt&&(i.flags&1048576)!==0&&Od(i,po,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;qa(n,i),n=i.pendingProps;var g=Jr(i,mi.current);jr(i,a),g=lh(null,i,u,n,g,a);var h=uh();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ei(u)?(h=!0,co(i)):h=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,nh(i),g.updater=Ro,i.stateNode=g,g._reactInternals=i,hu(i,u,n,a),i=du(null,i,u,!0,h,a)):(i.tag=0,Dt&&h&&Xu(i),vi(null,i,g,a),i=i.child),i;case 16:u=i.elementType;e:{switch(qa(n,i),n=i.pendingProps,g=u._init,u=g(u._payload),i.type=u,g=i.tag=Ev(u),n=Ki(u,n),g){case 0:i=fu(null,i,u,n,a);break e;case 1:i=Zc(null,i,u,n,a);break e;case 11:i=Kc(null,i,u,n,a);break e;case 14:i=Qc(null,i,u,Ki(u.type,n),a);break e}throw Error(Le(306,u,""))}return i;case 0:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:Ki(u,g),fu(n,i,u,g,a);case 1:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:Ki(u,g),Zc(n,i,u,g,a);case 3:e:{if(dp(i),n===null)throw Error(Le(387));u=i.pendingProps,h=i.memoizedState,g=h.element,Dd(n,i),mo(i,u,null,a);var P=i.memoizedState;if(u=P.element,h.isDehydrated)if(h={element:u,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){g=ns(Error(Le(423)),i),i=jc(n,i,u,a,g);break e}else if(u!==g){g=ns(Error(Le(424)),i),i=jc(n,i,u,a,g);break e}else for(Pi=Bn(i.stateNode.containerInfo.firstChild),Ii=i,Dt=!0,Zi=null,a=Hd(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(es(),u===g){i=wn(n,i,a);break e}vi(n,i,u,a)}i=i.child}return i;case 5:return Ud(i),n===null&&ou(i),u=i.type,g=i.pendingProps,h=n!==null?n.memoizedProps:null,P=g.children,iu(u,g)?P=null:h!==null&&iu(u,h)&&(i.flags|=32),fp(n,i),vi(n,i,P,a),i.child;case 6:return n===null&&ou(i),null;case 13:return pp(n,i,a);case 4:return rh(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=ts(i,null,u,a):vi(n,i,u,a),i.child;case 11:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:Ki(u,g),Kc(n,i,u,g,a);case 7:return vi(n,i,i.pendingProps,a),i.child;case 8:return vi(n,i,i.pendingProps.children,a),i.child;case 12:return vi(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(u=i.type._context,g=i.pendingProps,h=i.memoizedProps,P=g.value,Lt(go,u._currentValue),u._currentValue=P,h!==null)if(Yi(h.value,P)){if(h.children===g.children&&!bi.current){i=wn(n,i,a);break e}}else for(h=i.child,h!==null&&(h.return=i);h!==null;){var O=h.dependencies;if(O!==null){P=h.child;for(var D=O.firstContext;D!==null;){if(D.context===u){if(h.tag===1){D=_n(-1,a&-a),D.tag=2;var W=h.updateQueue;if(W!==null){W=W.shared;var K=W.pending;K===null?D.next=D:(D.next=K.next,K.next=D),W.pending=D}}h.lanes|=a,D=h.alternate,D!==null&&(D.lanes|=a),lu(h.return,a,i),O.lanes|=a;break}D=D.next}}else if(h.tag===10)P=h.type===i.type?null:h.child;else if(h.tag===18){if(P=h.return,P===null)throw Error(Le(341));P.lanes|=a,O=P.alternate,O!==null&&(O.lanes|=a),lu(P,a,i),P=h.sibling}else P=h.child;if(P!==null)P.return=h;else for(P=h;P!==null;){if(P===i){P=null;break}if(h=P.sibling,h!==null){h.return=P.return,P=h;break}P=P.return}h=P}vi(n,i,g.children,a),i=i.child}return i;case 9:return g=i.type,u=i.pendingProps.children,jr(i,a),g=Hi(g),u=u(g),i.flags|=1,vi(n,i,u,a),i.child;case 14:return u=i.type,g=Ki(u,i.pendingProps),g=Ki(u.type,g),Qc(n,i,u,g,a);case 15:return hp(n,i,i.type,i.pendingProps,a);case 17:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:Ki(u,g),qa(n,i),i.tag=1,Ei(u)?(n=!0,co(i)):n=!1,jr(i,a),Bd(i,u,g),hu(i,u,g,a),du(null,i,u,!0,n,a);case 19:return gp(n,i,a);case 22:return cp(n,i,a)}throw Error(Le(156,i.tag))};function Ap(n,i){return nd(n,i)}function bv(n,i,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(n,i,a,u){return new bv(n,i,a,u)}function yh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ev(n){if(typeof n=="function")return yh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Fu)return 11;if(n===Bu)return 14}return 2}function Gn(n,i){var a=n.alternate;return a===null?(a=Bi(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Za(n,i,a,u,g,h){var P=2;if(u=n,typeof n=="function")yh(n)&&(P=1);else if(typeof n=="string")P=5;else e:switch(n){case Lr:return pr(a.children,g,h,i);case Du:P=8,g|=8;break;case Ml:return n=Bi(12,a,i,g|2),n.elementType=Ml,n.lanes=h,n;case Rl:return n=Bi(13,a,i,g),n.elementType=Rl,n.lanes=h,n;case zl:return n=Bi(19,a,i,g),n.elementType=zl,n.lanes=h,n;case Vf:return Bo(a,g,h,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Ff:P=10;break e;case Bf:P=9;break e;case Fu:P=11;break e;case Bu:P=14;break e;case Tn:P=16,u=null;break e}throw Error(Le(130,n==null?n:typeof n,""))}return i=Bi(P,a,i,g),i.elementType=n,i.type=u,i.lanes=h,i}function pr(n,i,a,u){return n=Bi(7,n,u,i),n.lanes=a,n}function Bo(n,i,a,u){return n=Bi(22,n,u,i),n.elementType=Vf,n.lanes=a,n.stateNode={isHidden:!1},n}function Pl(n,i,a){return n=Bi(6,n,null,i),n.lanes=a,n}function Il(n,i,a){return i=Bi(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function kv(n,i,a,u,g){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=u,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function wh(n,i,a,u,g,h,P,O,D){return n=new kv(n,i,a,O,D),i===1?(i=1,h===!0&&(i|=8)):i=0,h=Bi(3,null,null,i),n.current=h,h.stateNode=n,h.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},nh(h),n}function Nv(n,i,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ar,key:u==null?null:""+u,children:n,containerInfo:i,implementation:a}}function Lp(n){if(!n)return Zn;n=n._reactInternals;e:{if(xr(n)!==n||n.tag!==1)throw Error(Le(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ei(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(Le(171))}if(n.tag===1){var a=n.type;if(Ei(a))return Ad(n,a,i)}return i}function Op(n,i,a,u,g,h,P,O,D){return n=wh(a,u,!0,n,g,h,P,O,D),n.context=Lp(null),a=n.current,u=yi(),g=Un(a),h=_n(u,g),h.callback=i!=null?i:null,Vn(a,h,g),n.current.lanes=g,ta(n,g,u),ki(n,u),n}function Vo(n,i,a,u){var g=i.current,h=yi(),P=Un(g);return a=Lp(a),i.context===null?i.context=a:i.pendingContext=a,i=_n(h,P),i.payload={element:n},u=u===void 0?null:u,u!==null&&(i.callback=u),n=Vn(g,i,P),n!==null&&(Xi(n,g,P,h),Ua(n,g,P)),P}function Eo(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function af(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function xh(n,i){af(n,i),(n=n.alternate)&&af(n,i)}function Tv(){return null}var Mp=typeof reportError=="function"?reportError:function(n){console.error(n)};function Sh(n){this._internalRoot=n}Ho.prototype.render=Sh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(Le(409));Vo(n,i,null,null)};Ho.prototype.unmount=Sh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;yr(function(){Vo(null,n,null,null)}),i[vn]=null}};function Ho(n){this._internalRoot=n}Ho.prototype.unstable_scheduleHydration=function(n){if(n){var i=hd();n={blockedOn:null,target:n,priority:i};for(var a=0;a<An.length&&i!==0&&i<An[a].priority;a++);An.splice(a,0,n),a===0&&fd(n)}};function Ch(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uo(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function of(){}function Pv(n,i,a,u,g){if(g){if(typeof u=="function"){var h=u;u=function(){var W=Eo(P);h.call(W)}}var P=Op(i,u,n,0,null,!1,!1,"",of);return n._reactRootContainer=P,n[vn]=P.current,qs(n.nodeType===8?n.parentNode:n),yr(),P}for(;g=n.lastChild;)n.removeChild(g);if(typeof u=="function"){var O=u;u=function(){var W=Eo(D);O.call(W)}}var D=wh(n,0,!1,null,null,!1,!1,"",of);return n._reactRootContainer=D,n[vn]=D.current,qs(n.nodeType===8?n.parentNode:n),yr(function(){Vo(i,D,a,u)}),D}function Go(n,i,a,u,g){var h=a._reactRootContainer;if(h){var P=h;if(typeof g=="function"){var O=g;g=function(){var D=Eo(P);O.call(D)}}Vo(i,P,n,g)}else P=Pv(a,i,n,g,u);return Eo(P)}ld=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Es(i.pendingLanes);a!==0&&(Uu(i,a|1),ki(i,Zt()),(yt&6)===0&&(rs=Zt()+500,Jn()))}break;case 13:yr(function(){var u=yn(n,1);if(u!==null){var g=yi();Xi(u,n,1,g)}}),xh(n,1)}};Gu=function(n){if(n.tag===13){var i=yn(n,134217728);if(i!==null){var a=yi();Xi(i,n,134217728,a)}xh(n,134217728)}};ud=function(n){if(n.tag===13){var i=Un(n),a=yn(n,i);if(a!==null){var u=yi();Xi(a,n,i,u)}xh(n,i)}};hd=function(){return kt};cd=function(n,i){var a=kt;try{return kt=n,i()}finally{kt=a}};Kl=function(n,i,a){switch(i){case"input":if(Bl(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==n&&u.form===n.form){var g=Oo(u);if(!g)throw Error(Le(90));Uf(u),Bl(u,g)}}}break;case"textarea":Wf(n,a);break;case"select":i=a.value,i!=null&&qr(n,!!a.multiple,i,!1)}};Yf=_h;$f=yr;var Iv={usingClientEntryPoint:!1,Events:[na,zr,Oo,jf,Xf,_h]},ws={findFiberByHostInstance:hr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Av={bundleType:ws.bundleType,version:ws.version,rendererPackageName:ws.rendererPackageName,rendererConfig:ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=td(n),n===null?null:n.stateNode},findFiberByHostInstance:ws.findFiberByHostInstance||Tv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Oa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oa.isDisabled&&Oa.supportsFiber)try{Po=Oa.inject(Av),on=Oa}catch(n){}}Li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iv;Li.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ch(i))throw Error(Le(200));return Nv(n,i,null,a)};Li.createRoot=function(n,i){if(!Ch(n))throw Error(Le(299));var a=!1,u="",g=Mp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=wh(n,1,!1,null,null,a,!1,u,g),n[vn]=i.current,qs(n.nodeType===8?n.parentNode:n),new Sh(i)};Li.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(Le(188)):(n=Object.keys(n).join(","),Error(Le(268,n)));return n=td(i),n=n===null?null:n.stateNode,n};Li.flushSync=function(n){return yr(n)};Li.hydrate=function(n,i,a){if(!Uo(i))throw Error(Le(200));return Go(null,n,i,!0,a)};Li.hydrateRoot=function(n,i,a){if(!Ch(n))throw Error(Le(405));var u=a!=null&&a.hydratedSources||null,g=!1,h="",P=Mp;if(a!=null&&(a.unstable_strictMode===!0&&(g=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onRecoverableError!==void 0&&(P=a.onRecoverableError)),i=Op(i,null,n,1,a!=null?a:null,g,!1,h,P),n[vn]=i.current,qs(n),u)for(n=0;n<u.length;n++)a=u[n],g=a._getVersion,g=g(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,g]:i.mutableSourceEagerHydrationData.push(a,g);return new Ho(i)};Li.render=function(n,i,a){if(!Uo(i))throw Error(Le(200));return Go(null,n,i,!1,a)};Li.unmountComponentAtNode=function(n){if(!Uo(n))throw Error(Le(40));return n._reactRootContainer?(yr(function(){Go(null,null,n,!1,function(){n._reactRootContainer=null,n[vn]=null})}),!0):!1};Li.unstable_batchedUpdates=_h;Li.unstable_renderSubtreeIntoContainer=function(n,i,a,u){if(!Uo(a))throw Error(Le(200));if(n==null||n._reactInternals===void 0)throw Error(Le(38));return Go(n,i,a,!1,u)};Li.version="18.2.0-next-9e3b772b8-20220608";(function(n){function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(a){console.error(a)}}i(),n.exports=Li})(Of);var Rp,lf=Of.exports;Rp=lf.createRoot,lf.hydrateRoot;const uf=document.getElementById("root");uf?Rp(uf).render(De(P0,{})):console.error("unable to find root");
