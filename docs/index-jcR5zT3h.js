var xg=Object.defineProperty;var Sg=(n,i,a)=>i in n?xg(n,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[i]=a;var Ft=(n,i,a)=>(Sg(n,typeof i!="symbol"?i+"":i,a),a);var dn=(n,i,a)=>new Promise((u,g)=>{var h=z=>{try{M(a.next(z))}catch(W){g(W)}},T=z=>{try{M(a.throw(z))}catch(W){g(W)}},M=z=>z.done?u(z.value):Promise.resolve(z.value).then(h,T);M((a=a.apply(n,i)).next())});(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))u(g);new MutationObserver(g=>{for(const h of g)if(h.type==="childList")for(const T of h.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&u(T)}).observe(document,{childList:!0,subtree:!0});function a(g){const h={};return g.integrity&&(h.integrity=g.integrity),g.referrerPolicy&&(h.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?h.credentials="include":g.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function u(g){if(g.ep)return;g.ep=!0;const h=a(g);fetch(g.href,h)}})();var Mu=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ru(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Cg(n){if(n.__esModule)return n;var i=n.default;if(typeof i=="function"){var a=function u(){return this instanceof u?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};a.prototype=i.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(u){var g=Object.getOwnPropertyDescriptor(n,u);Object.defineProperty(a,u,g.get?g:{enumerable:!0,get:function(){return n[u]}})}),a}var mf={exports:{}},Mo={},vf={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ca=Symbol.for("react.element"),bg=Symbol.for("react.portal"),Eg=Symbol.for("react.fragment"),kg=Symbol.for("react.strict_mode"),Ng=Symbol.for("react.profiler"),Tg=Symbol.for("react.provider"),Pg=Symbol.for("react.context"),Ig=Symbol.for("react.forward_ref"),Ag=Symbol.for("react.suspense"),Lg=Symbol.for("react.memo"),Og=Symbol.for("react.lazy"),Zh=Symbol.iterator;function Mg(n){return n===null||typeof n!="object"?null:(n=Zh&&n[Zh]||n["@@iterator"],typeof n=="function"?n:null)}var yf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wf=Object.assign,xf={};function cs(n,i,a){this.props=n,this.context=i,this.refs=xf,this.updater=a||yf}cs.prototype.isReactComponent={};cs.prototype.setState=function(n,i){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,i,"setState")};cs.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Sf(){}Sf.prototype=cs.prototype;function Du(n,i,a){this.props=n,this.context=i,this.refs=xf,this.updater=a||yf}var zu=Du.prototype=new Sf;zu.constructor=Du;wf(zu,cs.prototype);zu.isPureReactComponent=!0;var Xh=Array.isArray,Cf=Object.prototype.hasOwnProperty,Fu={current:null},bf={key:!0,ref:!0,__self:!0,__source:!0};function Ef(n,i,a){var u,g={},h=null,T=null;if(i!=null)for(u in i.ref!==void 0&&(T=i.ref),i.key!==void 0&&(h=""+i.key),i)Cf.call(i,u)&&!bf.hasOwnProperty(u)&&(g[u]=i[u]);var M=arguments.length-2;if(M===1)g.children=a;else if(1<M){for(var z=Array(M),W=0;W<M;W++)z[W]=arguments[W+2];g.children=z}if(n&&n.defaultProps)for(u in M=n.defaultProps,M)g[u]===void 0&&(g[u]=M[u]);return{$$typeof:ca,type:n,key:h,ref:T,props:g,_owner:Fu.current}}function Rg(n,i){return{$$typeof:ca,type:n.type,key:i,ref:n.ref,props:n.props,_owner:n._owner}}function Bu(n){return typeof n=="object"&&n!==null&&n.$$typeof===ca}function Dg(n){var i={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(a){return i[a]})}var Yh=/\/+/g;function ul(n,i){return typeof n=="object"&&n!==null&&n.key!=null?Dg(""+n.key):i.toString(36)}function Ga(n,i,a,u,g){var h=typeof n;(h==="undefined"||h==="boolean")&&(n=null);var T=!1;if(n===null)T=!0;else switch(h){case"string":case"number":T=!0;break;case"object":switch(n.$$typeof){case ca:case bg:T=!0}}if(T)return T=n,g=g(T),n=u===""?"."+ul(T,0):u,Xh(g)?(a="",n!=null&&(a=n.replace(Yh,"$&/")+"/"),Ga(g,i,a,"",function(W){return W})):g!=null&&(Bu(g)&&(g=Rg(g,a+(!g.key||T&&T.key===g.key?"":(""+g.key).replace(Yh,"$&/")+"/")+n)),i.push(g)),1;if(T=0,u=u===""?".":u+":",Xh(n))for(var M=0;M<n.length;M++){h=n[M];var z=u+ul(h,M);T+=Ga(h,i,a,z,g)}else if(z=Mg(n),typeof z=="function")for(n=z.call(n),M=0;!(h=n.next()).done;)h=h.value,z=u+ul(h,M++),T+=Ga(h,i,a,z,g);else if(h==="object")throw i=String(n),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return T}function Ca(n,i,a){if(n==null)return n;var u=[],g=0;return Ga(n,u,"","",function(h){return i.call(a,h,g++)}),u}function zg(n){if(n._status===-1){var i=n._result;i=i(),i.then(function(a){(n._status===0||n._status===-1)&&(n._status=1,n._result=a)},function(a){(n._status===0||n._status===-1)&&(n._status=2,n._result=a)}),n._status===-1&&(n._status=0,n._result=i)}if(n._status===1)return n._result.default;throw n._result}var wi={current:null},Wa={transition:null},Fg={ReactCurrentDispatcher:wi,ReactCurrentBatchConfig:Wa,ReactCurrentOwner:Fu};dt.Children={map:Ca,forEach:function(n,i,a){Ca(n,function(){i.apply(this,arguments)},a)},count:function(n){var i=0;return Ca(n,function(){i++}),i},toArray:function(n){return Ca(n,function(i){return i})||[]},only:function(n){if(!Bu(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};dt.Component=cs;dt.Fragment=Eg;dt.Profiler=Ng;dt.PureComponent=Du;dt.StrictMode=kg;dt.Suspense=Ag;dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fg;dt.cloneElement=function(n,i,a){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var u=wf({},n.props),g=n.key,h=n.ref,T=n._owner;if(i!=null){if(i.ref!==void 0&&(h=i.ref,T=Fu.current),i.key!==void 0&&(g=""+i.key),n.type&&n.type.defaultProps)var M=n.type.defaultProps;for(z in i)Cf.call(i,z)&&!bf.hasOwnProperty(z)&&(u[z]=i[z]===void 0&&M!==void 0?M[z]:i[z])}var z=arguments.length-2;if(z===1)u.children=a;else if(1<z){M=Array(z);for(var W=0;W<z;W++)M[W]=arguments[W+2];u.children=M}return{$$typeof:ca,type:n.type,key:g,ref:h,props:u,_owner:T}};dt.createContext=function(n){return n={$$typeof:Pg,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Tg,_context:n},n.Consumer=n};dt.createElement=Ef;dt.createFactory=function(n){var i=Ef.bind(null,n);return i.type=n,i};dt.createRef=function(){return{current:null}};dt.forwardRef=function(n){return{$$typeof:Ig,render:n}};dt.isValidElement=Bu;dt.lazy=function(n){return{$$typeof:Og,_payload:{_status:-1,_result:n},_init:zg}};dt.memo=function(n,i){return{$$typeof:Lg,type:n,compare:i===void 0?null:i}};dt.startTransition=function(n){var i=Wa.transition;Wa.transition={};try{n()}finally{Wa.transition=i}};dt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};dt.useCallback=function(n,i){return wi.current.useCallback(n,i)};dt.useContext=function(n){return wi.current.useContext(n)};dt.useDebugValue=function(){};dt.useDeferredValue=function(n){return wi.current.useDeferredValue(n)};dt.useEffect=function(n,i){return wi.current.useEffect(n,i)};dt.useId=function(){return wi.current.useId()};dt.useImperativeHandle=function(n,i,a){return wi.current.useImperativeHandle(n,i,a)};dt.useInsertionEffect=function(n,i){return wi.current.useInsertionEffect(n,i)};dt.useLayoutEffect=function(n,i){return wi.current.useLayoutEffect(n,i)};dt.useMemo=function(n,i){return wi.current.useMemo(n,i)};dt.useReducer=function(n,i,a){return wi.current.useReducer(n,i,a)};dt.useRef=function(n){return wi.current.useRef(n)};dt.useState=function(n){return wi.current.useState(n)};dt.useSyncExternalStore=function(n,i,a){return wi.current.useSyncExternalStore(n,i,a)};dt.useTransition=function(){return wi.current.useTransition()};dt.version="18.2.0";vf.exports=dt;var fs=vf.exports;const Fl=Ru(fs);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg=fs,Vg=Symbol.for("react.element"),Hg=Symbol.for("react.fragment"),Ug=Object.prototype.hasOwnProperty,Gg=Bg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wg={key:!0,ref:!0,__self:!0,__source:!0};function kf(n,i,a){var u,g={},h=null,T=null;a!==void 0&&(h=""+a),i.key!==void 0&&(h=""+i.key),i.ref!==void 0&&(T=i.ref);for(u in i)Ug.call(i,u)&&!Wg.hasOwnProperty(u)&&(g[u]=i[u]);if(n&&n.defaultProps)for(u in i=n.defaultProps,i)g[u]===void 0&&(g[u]=i[u]);return{$$typeof:Vg,type:n,key:h,ref:T,props:g,_owner:Gg.current}}Mo.Fragment=Hg;Mo.jsx=kf;Mo.jsxs=kf;mf.exports=Mo;var be=mf.exports;function jg(){return be.jsx("style",{children:`
        body,
        .simple-html-grid-menu,
        .simple-html-grid {
            --simple-html-grid-main-bg-color: #374151;
            --simple-html-grid-sec-bg-color: #4b5563;
            --simple-html-grid-alt-bg-color: #4b5563;
            --simple-html-grid-main-bg-border: #1f2937;
            --simple-html-grid-sec-bg-border: #1f2937;
            --simple-html-grid-main-bg-selected: #234882;
            --simple-html-grid-main-font-color: #f9f7f7;
            --simple-html-grid-sec-font-color: #979494;
            --simple-html-grid-dropzone-color: #979494;
            --simple-html-grid-grouping-border: #1f2937;
            --simple-html-grid-boxshadow: #4b5563;
            --simple-html-grid-main-hr-border: #4b5563;
        }
        .simple-html-grid ul.dialog-row {
            box-shadow: none;
        
        }
        .simple-html-grid li.dialog-row {
            border-left: 1px dotted rgb(100, 100, 100);
        } 
        .simple-html-grid .grid-edit-button {
            border-color: #374151;
        }
        .simple-html-grid .filter-dialog-bottom-row{
            border-top: 0px;
        }
        .simple-html-grid .filter-dialog-bottom-row button{
            border: 1px solid #515458;
        }
        simple-html-grid-filter-dialog ul input{
            color: var(--simple-html-grid-main-font-color);
            background-color: var(--simple-html-grid-alt-bg-color);
        }
        simple-html-grid-filter-dialog ul textarea{
            color: var(--simple-html-grid-main-font-color);
            background-color: var(--simple-html-grid-alt-bg-color);
        }
    `})}function qg(){return be.jsx("a",{href:"https://github.com/vegarringdal/ProteusXMLDrawing",children:be.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",width:24,height:24,viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[be.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),be.jsx("path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"})]})})}function Kg(){return be.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-10 h-10",onClick:()=>{alert("Check consosle.log for errors/info (F12) in Chrome/Edge if you do not get expected result. Use mousebuttons to pan and mousewheel to zoom, click to select (you need to click on text or lines...work in progress")},children:be.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})})}var Qg={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const $h=n=>{let i;const a=new Set,u=(z,W)=>{const K=typeof z=="function"?z(i):z;if(!Object.is(K,i)){const X=i;i=(W!=null?W:typeof K!="object"||K===null)?K:Object.assign({},i,K),a.forEach(ne=>ne(i,X))}},g=()=>i,M={setState:u,getState:g,subscribe:z=>(a.add(z),()=>a.delete(z)),destroy:()=>{(Qg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}};return i=n(u,g,M),M},Zg=n=>n?$h(n):$h;var Nf={exports:{}},Tf={},Pf={exports:{}},If={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ns=fs;function Xg(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Yg=typeof Object.is=="function"?Object.is:Xg,$g=ns.useState,Jg=ns.useEffect,e_=ns.useLayoutEffect,t_=ns.useDebugValue;function i_(n,i){var a=i(),u=$g({inst:{value:a,getSnapshot:i}}),g=u[0].inst,h=u[1];return e_(function(){g.value=a,g.getSnapshot=i,hl(g)&&h({inst:g})},[n,a,i]),Jg(function(){return hl(g)&&h({inst:g}),n(function(){hl(g)&&h({inst:g})})},[n]),t_(a),a}function hl(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Yg(n,a)}catch(u){return!0}}function n_(n,i){return i()}var r_=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?n_:i_;If.useSyncExternalStore=ns.useSyncExternalStore!==void 0?ns.useSyncExternalStore:r_;Pf.exports=If;var s_=Pf.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ro=fs,a_=s_;function o_(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var l_=typeof Object.is=="function"?Object.is:o_,u_=a_.useSyncExternalStore,h_=Ro.useRef,c_=Ro.useEffect,f_=Ro.useMemo,d_=Ro.useDebugValue;Tf.useSyncExternalStoreWithSelector=function(n,i,a,u,g){var h=h_(null);if(h.current===null){var T={hasValue:!1,value:null};h.current=T}else T=h.current;h=f_(function(){function z(D){if(!W){if(W=!0,K=D,D=u(D),g!==void 0&&T.hasValue){var ue=T.value;if(g(ue,D))return X=ue}return X=D}if(ue=X,l_(K,D))return ue;var ee=u(D);return g!==void 0&&g(ue,ee)?ue:(K=D,X=ee)}var W=!1,K,X,ne=a===void 0?null:a;return[function(){return z(i())},ne===null?void 0:function(){return z(ne())}]},[i,a,u,g]);var M=u_(n,h[0],h[1]);return c_(function(){T.hasValue=!0,T.value=M},[M]),d_(M),M};Nf.exports=Tf;var p_=Nf.exports;const g_=Ru(p_);var Af={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:__}=Fl,{useSyncExternalStoreWithSelector:m_}=g_;let Jh=!1;function v_(n,i=n.getState,a){(Af?"production":void 0)!=="production"&&a&&!Jh&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Jh=!0);const u=m_(n.subscribe,n.getState,n.getServerState||n.getState,i,a);return __(u),u}const ec=n=>{(Af?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const i=typeof n=="function"?Zg(n):n,a=(u,g)=>v_(i,u,g);return Object.assign(a,i),a},y_=n=>n?ec(n):ec,Rt=y_(n=>({currentTab:"viewer",isLoading:!1,selectedXmlFileName:"",selectedXsdFileName:"",loadingMessage:"",loadingHeader:"",selected:null,setLoading:i=>{n(()=>({isLoading:i}))},setSelected:i=>{n(()=>({selected:i}))}}));function w_(){const n=Rt();return n.isLoading?be.jsx("div",{className:"fixed grid w-full h-full items-center justify-center fadeIn z-[7010] bg-gray-800/70 ",children:be.jsxs("div",{className:"block w-96 h-80 bg-gray-800",children:[be.jsx("span",{className:"m-auto block text-center text-2xl  p-2 bg-gray-700 ",children:"Please wait"}),be.jsx("div",{className:"block m-2 mt-10",children:be.jsx("span",{className:"m-auto block text-center loader "})}),be.jsx("span",{className:"m-auto block text-center underline font-semibold ",children:n.loadingHeader}),be.jsx("span",{className:"m-auto block text-center mt-4 whitespace-pre-line ",children:n.loadingMessage||""})]})}):null}const Zr=new Map;function x_(){Zr.clear()}function S_(){return Zr}function C_(n,i){Zr.has(n)&&(console.warn("duplicate ID's in file",n),console.warn("prev",Zr.get(n)),console.warn("new",i)),Zr.set(n,i)}function b_(n){return Zr.get(n)||null}class E_{constructor(i,a,u){Ft(this,"value");Ft(this,"valueAsString");Ft(this,"valueAsNumber");this.element=i,this.attributeName=a,this.parent=u,this.value=i.getAttribute(a),this.valueAsString=this.value||"",this.valueAsNumber=parseFloat(this.value||""),u.attributes[a]=this.valueAsString,isNaN(this.valueAsNumber)&&(this.valueAsNumber=0)}}function Lf(n){const i=[];return Object.keys(n).forEach(u=>{Array.isArray(n[u])&&n[u].forEach(g=>{g&&typeof g.draw=="function"&&i.push(g)})}),i}const Of=new Map;function k_(n,i){Of.set(n,i)}function N_(n){return Of.get(n)||null}function T_(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mf={exports:{}};const P_={},I_=Object.freeze(Object.defineProperty({__proto__:null,default:P_},Symbol.toStringTag,{value:"Module"})),ro=Cg(I_);var ba={exports:{}},tc;function A_(){return tc||(tc=1,function(n,i){(function(a,u){u(i)})(Mu,function(a){var u=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],g=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],h="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",T="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",M={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},z="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",W={5:z,"5module":z+" export import",6:z+" const class extends export import super"},K=/^in(stanceof)?$/,X=new RegExp("["+T+"]"),ne=new RegExp("["+T+h+"]");function D(f,N){for(var H=65536,q=0;q<N.length;q+=2){if(H+=N[q],H>f)return!1;if(H+=N[q+1],H>=f)return!0}return!1}function ue(f,N){return f<65?f===36:f<91?!0:f<97?f===95:f<123?!0:f<=65535?f>=170&&X.test(String.fromCharCode(f)):N===!1?!1:D(f,g)}function ee(f,N){return f<48?f===36:f<58?!0:f<65?!1:f<91?!0:f<97?f===95:f<123?!0:f<=65535?f>=170&&ne.test(String.fromCharCode(f)):N===!1?!1:D(f,g)||D(f,u)}var ce=function(N,H){H===void 0&&(H={}),this.label=N,this.keyword=H.keyword,this.beforeExpr=!!H.beforeExpr,this.startsExpr=!!H.startsExpr,this.isLoop=!!H.isLoop,this.isAssign=!!H.isAssign,this.prefix=!!H.prefix,this.postfix=!!H.postfix,this.binop=H.binop||null,this.updateContext=null};function $(f,N){return new ce(f,{beforeExpr:!0,binop:N})}var J={beforeExpr:!0},te={startsExpr:!0},pe={};function ye(f,N){return N===void 0&&(N={}),N.keyword=f,pe[f]=new ce(f,N)}var B={num:new ce("num",te),regexp:new ce("regexp",te),string:new ce("string",te),name:new ce("name",te),privateId:new ce("privateId",te),eof:new ce("eof"),bracketL:new ce("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ce("]"),braceL:new ce("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ce("}"),parenL:new ce("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ce(")"),comma:new ce(",",J),semi:new ce(";",J),colon:new ce(":",J),dot:new ce("."),question:new ce("?",J),questionDot:new ce("?."),arrow:new ce("=>",J),template:new ce("template"),invalidTemplate:new ce("invalidTemplate"),ellipsis:new ce("...",J),backQuote:new ce("`",te),dollarBraceL:new ce("${",{beforeExpr:!0,startsExpr:!0}),eq:new ce("=",{beforeExpr:!0,isAssign:!0}),assign:new ce("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ce("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ce("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:$("||",1),logicalAND:$("&&",2),bitwiseOR:$("|",3),bitwiseXOR:$("^",4),bitwiseAND:$("&",5),equality:$("==/!=/===/!==",6),relational:$("</>/<=/>=",7),bitShift:$("<</>>/>>>",8),plusMin:new ce("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:$("%",10),star:$("*",10),slash:$("/",10),starstar:new ce("**",{beforeExpr:!0}),coalesce:$("??",1),_break:ye("break"),_case:ye("case",J),_catch:ye("catch"),_continue:ye("continue"),_debugger:ye("debugger"),_default:ye("default",J),_do:ye("do",{isLoop:!0,beforeExpr:!0}),_else:ye("else",J),_finally:ye("finally"),_for:ye("for",{isLoop:!0}),_function:ye("function",te),_if:ye("if"),_return:ye("return",J),_switch:ye("switch"),_throw:ye("throw",J),_try:ye("try"),_var:ye("var"),_const:ye("const"),_while:ye("while",{isLoop:!0}),_with:ye("with"),_new:ye("new",{beforeExpr:!0,startsExpr:!0}),_this:ye("this",te),_super:ye("super",te),_class:ye("class",te),_extends:ye("extends",J),_export:ye("export"),_import:ye("import",te),_null:ye("null",te),_true:ye("true",te),_false:ye("false",te),_in:ye("in",{beforeExpr:!0,binop:7}),_instanceof:ye("instanceof",{beforeExpr:!0,binop:7}),_typeof:ye("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:ye("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:ye("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Te=/\r\n?|\n|\u2028|\u2029/,ke=new RegExp(Te.source,"g");function Ve(f){return f===10||f===13||f===8232||f===8233}function He(f,N,H){H===void 0&&(H=f.length);for(var q=N;q<H;q++){var ie=f.charCodeAt(q);if(Ve(ie))return q<H-1&&ie===13&&f.charCodeAt(q+1)===10?q+2:q+1}return-1}var ht=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,qe=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,st=Object.prototype,Ee=st.hasOwnProperty,bt=st.toString,oe=Object.hasOwn||function(f,N){return Ee.call(f,N)},ct=Array.isArray||function(f){return bt.call(f)==="[object Array]"},Oe=Object.create(null);function Se(f){return Oe[f]||(Oe[f]=new RegExp("^(?:"+f.replace(/ /g,"|")+")$"))}function Be(f){return f<=65535?String.fromCharCode(f):(f-=65536,String.fromCharCode((f>>10)+55296,(f&1023)+56320))}var lt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,ut=function(N,H){this.line=N,this.column=H};ut.prototype.offset=function(N){return new ut(this.line,this.column+N)};var zt=function(N,H,q){this.start=H,this.end=q,N.sourceFile!==null&&(this.source=N.sourceFile)};function Kt(f,N){for(var H=1,q=0;;){var ie=He(f,q,N);if(ie<0)return new ut(H,N-q);++H,q=ie}}var We={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Wt=!1;function oi(f){var N={};for(var H in We)N[H]=f&&oe(f,H)?f[H]:We[H];if(N.ecmaVersion==="latest"?N.ecmaVersion=1e8:N.ecmaVersion==null?(!Wt&&typeof console=="object"&&console.warn&&(Wt=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),N.ecmaVersion=11):N.ecmaVersion>=2015&&(N.ecmaVersion-=2009),N.allowReserved==null&&(N.allowReserved=N.ecmaVersion<5),(!f||f.allowHashBang==null)&&(N.allowHashBang=N.ecmaVersion>=14),ct(N.onToken)){var q=N.onToken;N.onToken=function(ie){return q.push(ie)}}return ct(N.onComment)&&(N.onComment=an(N,N.onComment)),N}function an(f,N){return function(H,q,ie,ge,_e,Ae){var Fe={type:H?"Block":"Line",value:q,start:ie,end:ge};f.locations&&(Fe.loc=new zt(this,_e,Ae)),f.ranges&&(Fe.range=[ie,ge]),N.push(Fe)}}var Xe=1,tt=2,Ye=4,kr=8,Mi=16,Nr=32,on=64,Tr=128,ln=256,tr=Xe|tt|ln;function ir(f,N){return tt|(f?Ye:0)|(N?kr:0)}var Tt=0,Pt=1,pt=2,It=3,nt=4,s=5,e=function(N,H,q){this.options=N=oi(N),this.sourceFile=N.sourceFile,this.keywords=Se(W[N.ecmaVersion>=6?6:N.sourceType==="module"?"5module":5]);var ie="";N.allowReserved!==!0&&(ie=M[N.ecmaVersion>=6?6:N.ecmaVersion===5?5:3],N.sourceType==="module"&&(ie+=" await")),this.reservedWords=Se(ie);var ge=(ie?ie+" ":"")+M.strict;this.reservedWordsStrict=Se(ge),this.reservedWordsStrictBind=Se(ge+" "+M.strictBind),this.input=String(H),this.containsEsc=!1,q?(this.pos=q,this.lineStart=this.input.lastIndexOf(`
`,q-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Te).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=B.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=N.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&N.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Xe),this.regexpState=null,this.privateNameStack=[]},t={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};e.prototype.parse=function(){var N=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(N)},t.inFunction.get=function(){return(this.currentVarScope().flags&tt)>0},t.inGenerator.get=function(){return(this.currentVarScope().flags&kr)>0&&!this.currentVarScope().inClassFieldInit},t.inAsync.get=function(){return(this.currentVarScope().flags&Ye)>0&&!this.currentVarScope().inClassFieldInit},t.canAwait.get=function(){for(var f=this.scopeStack.length-1;f>=0;f--){var N=this.scopeStack[f];if(N.inClassFieldInit||N.flags&ln)return!1;if(N.flags&tt)return(N.flags&Ye)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},t.allowSuper.get=function(){var f=this.currentThisScope(),N=f.flags,H=f.inClassFieldInit;return(N&on)>0||H||this.options.allowSuperOutsideMethod},t.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Tr)>0},t.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},t.allowNewDotTarget.get=function(){var f=this.currentThisScope(),N=f.flags,H=f.inClassFieldInit;return(N&(tt|ln))>0||H},t.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&ln)>0},e.extend=function(){for(var N=[],H=arguments.length;H--;)N[H]=arguments[H];for(var q=this,ie=0;ie<N.length;ie++)q=N[ie](q);return q},e.parse=function(N,H){return new this(H,N).parse()},e.parseExpressionAt=function(N,H,q){var ie=new this(q,N,H);return ie.nextToken(),ie.parseExpression()},e.tokenizer=function(N,H){return new this(H,N)},Object.defineProperties(e.prototype,t);var r=e.prototype,o=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;r.strictDirective=function(f){if(this.options.ecmaVersion<5)return!1;for(;;){qe.lastIndex=f,f+=qe.exec(this.input)[0].length;var N=o.exec(this.input.slice(f));if(!N)return!1;if((N[1]||N[2])==="use strict"){qe.lastIndex=f+N[0].length;var H=qe.exec(this.input),q=H.index+H[0].length,ie=this.input.charAt(q);return ie===";"||ie==="}"||Te.test(H[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(ie)||ie==="!"&&this.input.charAt(q+1)==="=")}f+=N[0].length,qe.lastIndex=f,f+=qe.exec(this.input)[0].length,this.input[f]===";"&&f++}},r.eat=function(f){return this.type===f?(this.next(),!0):!1},r.isContextual=function(f){return this.type===B.name&&this.value===f&&!this.containsEsc},r.eatContextual=function(f){return this.isContextual(f)?(this.next(),!0):!1},r.expectContextual=function(f){this.eatContextual(f)||this.unexpected()},r.canInsertSemicolon=function(){return this.type===B.eof||this.type===B.braceR||Te.test(this.input.slice(this.lastTokEnd,this.start))},r.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},r.semicolon=function(){!this.eat(B.semi)&&!this.insertSemicolon()&&this.unexpected()},r.afterTrailingComma=function(f,N){if(this.type===f)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),N||this.next(),!0},r.expect=function(f){this.eat(f)||this.unexpected()},r.unexpected=function(f){this.raise(f!=null?f:this.start,"Unexpected token")};var l=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};r.checkPatternErrors=function(f,N){if(f){f.trailingComma>-1&&this.raiseRecoverable(f.trailingComma,"Comma is not permitted after the rest element");var H=N?f.parenthesizedAssign:f.parenthesizedBind;H>-1&&this.raiseRecoverable(H,N?"Assigning to rvalue":"Parenthesized pattern")}},r.checkExpressionErrors=function(f,N){if(!f)return!1;var H=f.shorthandAssign,q=f.doubleProto;if(!N)return H>=0||q>=0;H>=0&&this.raise(H,"Shorthand property assignments are valid only in destructuring patterns"),q>=0&&this.raiseRecoverable(q,"Redefinition of __proto__ property")},r.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},r.isSimpleAssignTarget=function(f){return f.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(f.expression):f.type==="Identifier"||f.type==="MemberExpression"};var c=e.prototype;c.parseTopLevel=function(f){var N=Object.create(null);for(f.body||(f.body=[]);this.type!==B.eof;){var H=this.parseStatement(null,!0,N);f.body.push(H)}if(this.inModule)for(var q=0,ie=Object.keys(this.undefinedExports);q<ie.length;q+=1){var ge=ie[q];this.raiseRecoverable(this.undefinedExports[ge].start,"Export '"+ge+"' is not defined")}return this.adaptDirectivePrologue(f.body),this.next(),f.sourceType=this.options.sourceType,this.finishNode(f,"Program")};var d={kind:"loop"},p={kind:"switch"};c.isLet=function(f){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;qe.lastIndex=this.pos;var N=qe.exec(this.input),H=this.pos+N[0].length,q=this.input.charCodeAt(H);if(q===91||q===92)return!0;if(f)return!1;if(q===123||q>55295&&q<56320)return!0;if(ue(q,!0)){for(var ie=H+1;ee(q=this.input.charCodeAt(ie),!0);)++ie;if(q===92||q>55295&&q<56320)return!0;var ge=this.input.slice(H,ie);if(!K.test(ge))return!0}return!1},c.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;qe.lastIndex=this.pos;var f=qe.exec(this.input),N=this.pos+f[0].length,H;return!Te.test(this.input.slice(this.pos,N))&&this.input.slice(N,N+8)==="function"&&(N+8===this.input.length||!(ee(H=this.input.charCodeAt(N+8))||H>55295&&H<56320))},c.parseStatement=function(f,N,H){var q=this.type,ie=this.startNode(),ge;switch(this.isLet(f)&&(q=B._var,ge="let"),q){case B._break:case B._continue:return this.parseBreakContinueStatement(ie,q.keyword);case B._debugger:return this.parseDebuggerStatement(ie);case B._do:return this.parseDoStatement(ie);case B._for:return this.parseForStatement(ie);case B._function:return f&&(this.strict||f!=="if"&&f!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(ie,!1,!f);case B._class:return f&&this.unexpected(),this.parseClass(ie,!0);case B._if:return this.parseIfStatement(ie);case B._return:return this.parseReturnStatement(ie);case B._switch:return this.parseSwitchStatement(ie);case B._throw:return this.parseThrowStatement(ie);case B._try:return this.parseTryStatement(ie);case B._const:case B._var:return ge=ge||this.value,f&&ge!=="var"&&this.unexpected(),this.parseVarStatement(ie,ge);case B._while:return this.parseWhileStatement(ie);case B._with:return this.parseWithStatement(ie);case B.braceL:return this.parseBlock(!0,ie);case B.semi:return this.parseEmptyStatement(ie);case B._export:case B._import:if(this.options.ecmaVersion>10&&q===B._import){qe.lastIndex=this.pos;var _e=qe.exec(this.input),Ae=this.pos+_e[0].length,Fe=this.input.charCodeAt(Ae);if(Fe===40||Fe===46)return this.parseExpressionStatement(ie,this.parseExpression())}return this.options.allowImportExportEverywhere||(N||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),q===B._import?this.parseImport(ie):this.parseExport(ie,H);default:if(this.isAsyncFunction())return f&&this.unexpected(),this.next(),this.parseFunctionStatement(ie,!0,!f);var it=this.value,at=this.parseExpression();return q===B.name&&at.type==="Identifier"&&this.eat(B.colon)?this.parseLabeledStatement(ie,it,at,f):this.parseExpressionStatement(ie,at)}},c.parseBreakContinueStatement=function(f,N){var H=N==="break";this.next(),this.eat(B.semi)||this.insertSemicolon()?f.label=null:this.type!==B.name?this.unexpected():(f.label=this.parseIdent(),this.semicolon());for(var q=0;q<this.labels.length;++q){var ie=this.labels[q];if((f.label==null||ie.name===f.label.name)&&(ie.kind!=null&&(H||ie.kind==="loop")||f.label&&H))break}return q===this.labels.length&&this.raise(f.start,"Unsyntactic "+N),this.finishNode(f,H?"BreakStatement":"ContinueStatement")},c.parseDebuggerStatement=function(f){return this.next(),this.semicolon(),this.finishNode(f,"DebuggerStatement")},c.parseDoStatement=function(f){return this.next(),this.labels.push(d),f.body=this.parseStatement("do"),this.labels.pop(),this.expect(B._while),f.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(B.semi):this.semicolon(),this.finishNode(f,"DoWhileStatement")},c.parseForStatement=function(f){this.next();var N=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(d),this.enterScope(0),this.expect(B.parenL),this.type===B.semi)return N>-1&&this.unexpected(N),this.parseFor(f,null);var H=this.isLet();if(this.type===B._var||this.type===B._const||H){var q=this.startNode(),ie=H?"let":this.value;return this.next(),this.parseVar(q,!0,ie),this.finishNode(q,"VariableDeclaration"),(this.type===B._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&q.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===B._in?N>-1&&this.unexpected(N):f.await=N>-1),this.parseForIn(f,q)):(N>-1&&this.unexpected(N),this.parseFor(f,q))}var ge=this.isContextual("let"),_e=!1,Ae=new l,Fe=this.parseExpression(N>-1?"await":!0,Ae);return this.type===B._in||(_e=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===B._in?N>-1&&this.unexpected(N):f.await=N>-1),ge&&_e&&this.raise(Fe.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Fe,!1,Ae),this.checkLValPattern(Fe),this.parseForIn(f,Fe)):(this.checkExpressionErrors(Ae,!0),N>-1&&this.unexpected(N),this.parseFor(f,Fe))},c.parseFunctionStatement=function(f,N,H){return this.next(),this.parseFunction(f,m|(H?0:w),!1,N)},c.parseIfStatement=function(f){return this.next(),f.test=this.parseParenExpression(),f.consequent=this.parseStatement("if"),f.alternate=this.eat(B._else)?this.parseStatement("if"):null,this.finishNode(f,"IfStatement")},c.parseReturnStatement=function(f){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(B.semi)||this.insertSemicolon()?f.argument=null:(f.argument=this.parseExpression(),this.semicolon()),this.finishNode(f,"ReturnStatement")},c.parseSwitchStatement=function(f){this.next(),f.discriminant=this.parseParenExpression(),f.cases=[],this.expect(B.braceL),this.labels.push(p),this.enterScope(0);for(var N,H=!1;this.type!==B.braceR;)if(this.type===B._case||this.type===B._default){var q=this.type===B._case;N&&this.finishNode(N,"SwitchCase"),f.cases.push(N=this.startNode()),N.consequent=[],this.next(),q?N.test=this.parseExpression():(H&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),H=!0,N.test=null),this.expect(B.colon)}else N||this.unexpected(),N.consequent.push(this.parseStatement(null));return this.exitScope(),N&&this.finishNode(N,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(f,"SwitchStatement")},c.parseThrowStatement=function(f){return this.next(),Te.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),f.argument=this.parseExpression(),this.semicolon(),this.finishNode(f,"ThrowStatement")};var _=[];c.parseCatchClauseParam=function(){var f=this.parseBindingAtom(),N=f.type==="Identifier";return this.enterScope(N?Nr:0),this.checkLValPattern(f,N?nt:pt),this.expect(B.parenR),f},c.parseTryStatement=function(f){if(this.next(),f.block=this.parseBlock(),f.handler=null,this.type===B._catch){var N=this.startNode();this.next(),this.eat(B.parenL)?N.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),N.param=null,this.enterScope(0)),N.body=this.parseBlock(!1),this.exitScope(),f.handler=this.finishNode(N,"CatchClause")}return f.finalizer=this.eat(B._finally)?this.parseBlock():null,!f.handler&&!f.finalizer&&this.raise(f.start,"Missing catch or finally clause"),this.finishNode(f,"TryStatement")},c.parseVarStatement=function(f,N,H){return this.next(),this.parseVar(f,!1,N,H),this.semicolon(),this.finishNode(f,"VariableDeclaration")},c.parseWhileStatement=function(f){return this.next(),f.test=this.parseParenExpression(),this.labels.push(d),f.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(f,"WhileStatement")},c.parseWithStatement=function(f){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),f.object=this.parseParenExpression(),f.body=this.parseStatement("with"),this.finishNode(f,"WithStatement")},c.parseEmptyStatement=function(f){return this.next(),this.finishNode(f,"EmptyStatement")},c.parseLabeledStatement=function(f,N,H,q){for(var ie=0,ge=this.labels;ie<ge.length;ie+=1){var _e=ge[ie];_e.name===N&&this.raise(H.start,"Label '"+N+"' is already declared")}for(var Ae=this.type.isLoop?"loop":this.type===B._switch?"switch":null,Fe=this.labels.length-1;Fe>=0;Fe--){var it=this.labels[Fe];if(it.statementStart===f.start)it.statementStart=this.start,it.kind=Ae;else break}return this.labels.push({name:N,kind:Ae,statementStart:this.start}),f.body=this.parseStatement(q?q.indexOf("label")===-1?q+"label":q:"label"),this.labels.pop(),f.label=H,this.finishNode(f,"LabeledStatement")},c.parseExpressionStatement=function(f,N){return f.expression=N,this.semicolon(),this.finishNode(f,"ExpressionStatement")},c.parseBlock=function(f,N,H){for(f===void 0&&(f=!0),N===void 0&&(N=this.startNode()),N.body=[],this.expect(B.braceL),f&&this.enterScope(0);this.type!==B.braceR;){var q=this.parseStatement(null);N.body.push(q)}return H&&(this.strict=!1),this.next(),f&&this.exitScope(),this.finishNode(N,"BlockStatement")},c.parseFor=function(f,N){return f.init=N,this.expect(B.semi),f.test=this.type===B.semi?null:this.parseExpression(),this.expect(B.semi),f.update=this.type===B.parenR?null:this.parseExpression(),this.expect(B.parenR),f.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(f,"ForStatement")},c.parseForIn=function(f,N){var H=this.type===B._in;return this.next(),N.type==="VariableDeclaration"&&N.declarations[0].init!=null&&(!H||this.options.ecmaVersion<8||this.strict||N.kind!=="var"||N.declarations[0].id.type!=="Identifier")&&this.raise(N.start,(H?"for-in":"for-of")+" loop variable declaration may not have an initializer"),f.left=N,f.right=H?this.parseExpression():this.parseMaybeAssign(),this.expect(B.parenR),f.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(f,H?"ForInStatement":"ForOfStatement")},c.parseVar=function(f,N,H,q){for(f.declarations=[],f.kind=H;;){var ie=this.startNode();if(this.parseVarId(ie,H),this.eat(B.eq)?ie.init=this.parseMaybeAssign(N):!q&&H==="const"&&!(this.type===B._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!q&&ie.id.type!=="Identifier"&&!(N&&(this.type===B._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):ie.init=null,f.declarations.push(this.finishNode(ie,"VariableDeclarator")),!this.eat(B.comma))break}return f},c.parseVarId=function(f,N){f.id=this.parseBindingAtom(),this.checkLValPattern(f.id,N==="var"?Pt:pt,!1)};var m=1,w=2,y=4;c.parseFunction=function(f,N,H,q,ie){this.initFunction(f),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!q)&&(this.type===B.star&&N&w&&this.unexpected(),f.generator=this.eat(B.star)),this.options.ecmaVersion>=8&&(f.async=!!q),N&m&&(f.id=N&y&&this.type!==B.name?null:this.parseIdent(),f.id&&!(N&w)&&this.checkLValSimple(f.id,this.strict||f.generator||f.async?this.treatFunctionsAsVar?Pt:pt:It));var ge=this.yieldPos,_e=this.awaitPos,Ae=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ir(f.async,f.generator)),N&m||(f.id=this.type===B.name?this.parseIdent():null),this.parseFunctionParams(f),this.parseFunctionBody(f,H,!1,ie),this.yieldPos=ge,this.awaitPos=_e,this.awaitIdentPos=Ae,this.finishNode(f,N&m?"FunctionDeclaration":"FunctionExpression")},c.parseFunctionParams=function(f){this.expect(B.parenL),f.params=this.parseBindingList(B.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},c.parseClass=function(f,N){this.next();var H=this.strict;this.strict=!0,this.parseClassId(f,N),this.parseClassSuper(f);var q=this.enterClassBody(),ie=this.startNode(),ge=!1;for(ie.body=[],this.expect(B.braceL);this.type!==B.braceR;){var _e=this.parseClassElement(f.superClass!==null);_e&&(ie.body.push(_e),_e.type==="MethodDefinition"&&_e.kind==="constructor"?(ge&&this.raiseRecoverable(_e.start,"Duplicate constructor in the same class"),ge=!0):_e.key&&_e.key.type==="PrivateIdentifier"&&v(q,_e)&&this.raiseRecoverable(_e.key.start,"Identifier '#"+_e.key.name+"' has already been declared"))}return this.strict=H,this.next(),f.body=this.finishNode(ie,"ClassBody"),this.exitClassBody(),this.finishNode(f,N?"ClassDeclaration":"ClassExpression")},c.parseClassElement=function(f){if(this.eat(B.semi))return null;var N=this.options.ecmaVersion,H=this.startNode(),q="",ie=!1,ge=!1,_e="method",Ae=!1;if(this.eatContextual("static")){if(N>=13&&this.eat(B.braceL))return this.parseClassStaticBlock(H),H;this.isClassElementNameStart()||this.type===B.star?Ae=!0:q="static"}if(H.static=Ae,!q&&N>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===B.star)&&!this.canInsertSemicolon()?ge=!0:q="async"),!q&&(N>=9||!ge)&&this.eat(B.star)&&(ie=!0),!q&&!ge&&!ie){var Fe=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?_e=Fe:q=Fe)}if(q?(H.computed=!1,H.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),H.key.name=q,this.finishNode(H.key,"Identifier")):this.parseClassElementName(H),N<13||this.type===B.parenL||_e!=="method"||ie||ge){var it=!H.static&&C(H,"constructor"),at=it&&f;it&&_e!=="method"&&this.raise(H.key.start,"Constructor can't have get/set modifier"),H.kind=it?"constructor":_e,this.parseClassMethod(H,ie,ge,at)}else this.parseClassField(H);return H},c.isClassElementNameStart=function(){return this.type===B.name||this.type===B.privateId||this.type===B.num||this.type===B.string||this.type===B.bracketL||this.type.keyword},c.parseClassElementName=function(f){this.type===B.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),f.computed=!1,f.key=this.parsePrivateIdent()):this.parsePropertyName(f)},c.parseClassMethod=function(f,N,H,q){var ie=f.key;f.kind==="constructor"?(N&&this.raise(ie.start,"Constructor can't be a generator"),H&&this.raise(ie.start,"Constructor can't be an async method")):f.static&&C(f,"prototype")&&this.raise(ie.start,"Classes may not have a static property named prototype");var ge=f.value=this.parseMethod(N,H,q);return f.kind==="get"&&ge.params.length!==0&&this.raiseRecoverable(ge.start,"getter should have no params"),f.kind==="set"&&ge.params.length!==1&&this.raiseRecoverable(ge.start,"setter should have exactly one param"),f.kind==="set"&&ge.params[0].type==="RestElement"&&this.raiseRecoverable(ge.params[0].start,"Setter cannot use rest params"),this.finishNode(f,"MethodDefinition")},c.parseClassField=function(f){if(C(f,"constructor")?this.raise(f.key.start,"Classes can't have a field named 'constructor'"):f.static&&C(f,"prototype")&&this.raise(f.key.start,"Classes can't have a static field named 'prototype'"),this.eat(B.eq)){var N=this.currentThisScope(),H=N.inClassFieldInit;N.inClassFieldInit=!0,f.value=this.parseMaybeAssign(),N.inClassFieldInit=H}else f.value=null;return this.semicolon(),this.finishNode(f,"PropertyDefinition")},c.parseClassStaticBlock=function(f){f.body=[];var N=this.labels;for(this.labels=[],this.enterScope(ln|on);this.type!==B.braceR;){var H=this.parseStatement(null);f.body.push(H)}return this.next(),this.exitScope(),this.labels=N,this.finishNode(f,"StaticBlock")},c.parseClassId=function(f,N){this.type===B.name?(f.id=this.parseIdent(),N&&this.checkLValSimple(f.id,pt,!1)):(N===!0&&this.unexpected(),f.id=null)},c.parseClassSuper=function(f){f.superClass=this.eat(B._extends)?this.parseExprSubscripts(null,!1):null},c.enterClassBody=function(){var f={declared:Object.create(null),used:[]};return this.privateNameStack.push(f),f.declared},c.exitClassBody=function(){var f=this.privateNameStack.pop(),N=f.declared,H=f.used;if(this.options.checkPrivateFields)for(var q=this.privateNameStack.length,ie=q===0?null:this.privateNameStack[q-1],ge=0;ge<H.length;++ge){var _e=H[ge];oe(N,_e.name)||(ie?ie.used.push(_e):this.raiseRecoverable(_e.start,"Private field '#"+_e.name+"' must be declared in an enclosing class"))}};function v(f,N){var H=N.key.name,q=f[H],ie="true";return N.type==="MethodDefinition"&&(N.kind==="get"||N.kind==="set")&&(ie=(N.static?"s":"i")+N.kind),q==="iget"&&ie==="iset"||q==="iset"&&ie==="iget"||q==="sget"&&ie==="sset"||q==="sset"&&ie==="sget"?(f[H]="true",!1):q?!0:(f[H]=ie,!1)}function C(f,N){var H=f.computed,q=f.key;return!H&&(q.type==="Identifier"&&q.name===N||q.type==="Literal"&&q.value===N)}c.parseExportAllDeclaration=function(f,N){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(f.exported=this.parseModuleExportName(),this.checkExport(N,f.exported,this.lastTokStart)):f.exported=null),this.expectContextual("from"),this.type!==B.string&&this.unexpected(),f.source=this.parseExprAtom(),this.semicolon(),this.finishNode(f,"ExportAllDeclaration")},c.parseExport=function(f,N){if(this.next(),this.eat(B.star))return this.parseExportAllDeclaration(f,N);if(this.eat(B._default))return this.checkExport(N,"default",this.lastTokStart),f.declaration=this.parseExportDefaultDeclaration(),this.finishNode(f,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())f.declaration=this.parseExportDeclaration(f),f.declaration.type==="VariableDeclaration"?this.checkVariableExport(N,f.declaration.declarations):this.checkExport(N,f.declaration.id,f.declaration.id.start),f.specifiers=[],f.source=null;else{if(f.declaration=null,f.specifiers=this.parseExportSpecifiers(N),this.eatContextual("from"))this.type!==B.string&&this.unexpected(),f.source=this.parseExprAtom();else{for(var H=0,q=f.specifiers;H<q.length;H+=1){var ie=q[H];this.checkUnreserved(ie.local),this.checkLocalExport(ie.local),ie.local.type==="Literal"&&this.raise(ie.local.start,"A string literal cannot be used as an exported binding without `from`.")}f.source=null}this.semicolon()}return this.finishNode(f,"ExportNamedDeclaration")},c.parseExportDeclaration=function(f){return this.parseStatement(null)},c.parseExportDefaultDeclaration=function(){var f;if(this.type===B._function||(f=this.isAsyncFunction())){var N=this.startNode();return this.next(),f&&this.next(),this.parseFunction(N,m|y,!1,f)}else if(this.type===B._class){var H=this.startNode();return this.parseClass(H,"nullableID")}else{var q=this.parseMaybeAssign();return this.semicolon(),q}},c.checkExport=function(f,N,H){f&&(typeof N!="string"&&(N=N.type==="Identifier"?N.name:N.value),oe(f,N)&&this.raiseRecoverable(H,"Duplicate export '"+N+"'"),f[N]=!0)},c.checkPatternExport=function(f,N){var H=N.type;if(H==="Identifier")this.checkExport(f,N,N.start);else if(H==="ObjectPattern")for(var q=0,ie=N.properties;q<ie.length;q+=1){var ge=ie[q];this.checkPatternExport(f,ge)}else if(H==="ArrayPattern")for(var _e=0,Ae=N.elements;_e<Ae.length;_e+=1){var Fe=Ae[_e];Fe&&this.checkPatternExport(f,Fe)}else H==="Property"?this.checkPatternExport(f,N.value):H==="AssignmentPattern"?this.checkPatternExport(f,N.left):H==="RestElement"&&this.checkPatternExport(f,N.argument)},c.checkVariableExport=function(f,N){if(f)for(var H=0,q=N;H<q.length;H+=1){var ie=q[H];this.checkPatternExport(f,ie.id)}},c.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},c.parseExportSpecifier=function(f){var N=this.startNode();return N.local=this.parseModuleExportName(),N.exported=this.eatContextual("as")?this.parseModuleExportName():N.local,this.checkExport(f,N.exported,N.exported.start),this.finishNode(N,"ExportSpecifier")},c.parseExportSpecifiers=function(f){var N=[],H=!0;for(this.expect(B.braceL);!this.eat(B.braceR);){if(H)H=!1;else if(this.expect(B.comma),this.afterTrailingComma(B.braceR))break;N.push(this.parseExportSpecifier(f))}return N},c.parseImport=function(f){return this.next(),this.type===B.string?(f.specifiers=_,f.source=this.parseExprAtom()):(f.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),f.source=this.type===B.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(f,"ImportDeclaration")},c.parseImportSpecifier=function(){var f=this.startNode();return f.imported=this.parseModuleExportName(),this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported),this.checkLValSimple(f.local,pt),this.finishNode(f,"ImportSpecifier")},c.parseImportDefaultSpecifier=function(){var f=this.startNode();return f.local=this.parseIdent(),this.checkLValSimple(f.local,pt),this.finishNode(f,"ImportDefaultSpecifier")},c.parseImportNamespaceSpecifier=function(){var f=this.startNode();return this.next(),this.expectContextual("as"),f.local=this.parseIdent(),this.checkLValSimple(f.local,pt),this.finishNode(f,"ImportNamespaceSpecifier")},c.parseImportSpecifiers=function(){var f=[],N=!0;if(this.type===B.name&&(f.push(this.parseImportDefaultSpecifier()),!this.eat(B.comma)))return f;if(this.type===B.star)return f.push(this.parseImportNamespaceSpecifier()),f;for(this.expect(B.braceL);!this.eat(B.braceR);){if(N)N=!1;else if(this.expect(B.comma),this.afterTrailingComma(B.braceR))break;f.push(this.parseImportSpecifier())}return f},c.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===B.string){var f=this.parseLiteral(this.value);return lt.test(f.value)&&this.raise(f.start,"An export name cannot include a lone surrogate."),f}return this.parseIdent(!0)},c.adaptDirectivePrologue=function(f){for(var N=0;N<f.length&&this.isDirectiveCandidate(f[N]);++N)f[N].directive=f[N].expression.raw.slice(1,-1)},c.isDirectiveCandidate=function(f){return this.options.ecmaVersion>=5&&f.type==="ExpressionStatement"&&f.expression.type==="Literal"&&typeof f.expression.value=="string"&&(this.input[f.start]==='"'||this.input[f.start]==="'")};var P=e.prototype;P.toAssignable=function(f,N,H){if(this.options.ecmaVersion>=6&&f)switch(f.type){case"Identifier":this.inAsync&&f.name==="await"&&this.raise(f.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":f.type="ObjectPattern",H&&this.checkPatternErrors(H,!0);for(var q=0,ie=f.properties;q<ie.length;q+=1){var ge=ie[q];this.toAssignable(ge,N),ge.type==="RestElement"&&(ge.argument.type==="ArrayPattern"||ge.argument.type==="ObjectPattern")&&this.raise(ge.argument.start,"Unexpected token")}break;case"Property":f.kind!=="init"&&this.raise(f.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(f.value,N);break;case"ArrayExpression":f.type="ArrayPattern",H&&this.checkPatternErrors(H,!0),this.toAssignableList(f.elements,N);break;case"SpreadElement":f.type="RestElement",this.toAssignable(f.argument,N),f.argument.type==="AssignmentPattern"&&this.raise(f.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":f.operator!=="="&&this.raise(f.left.end,"Only '=' operator can be used for specifying default value."),f.type="AssignmentPattern",delete f.operator,this.toAssignable(f.left,N);break;case"ParenthesizedExpression":this.toAssignable(f.expression,N,H);break;case"ChainExpression":this.raiseRecoverable(f.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!N)break;default:this.raise(f.start,"Assigning to rvalue")}else H&&this.checkPatternErrors(H,!0);return f},P.toAssignableList=function(f,N){for(var H=f.length,q=0;q<H;q++){var ie=f[q];ie&&this.toAssignable(ie,N)}if(H){var ge=f[H-1];this.options.ecmaVersion===6&&N&&ge&&ge.type==="RestElement"&&ge.argument.type!=="Identifier"&&this.unexpected(ge.argument.start)}return f},P.parseSpread=function(f){var N=this.startNode();return this.next(),N.argument=this.parseMaybeAssign(!1,f),this.finishNode(N,"SpreadElement")},P.parseRestBinding=function(){var f=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==B.name&&this.unexpected(),f.argument=this.parseBindingAtom(),this.finishNode(f,"RestElement")},P.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case B.bracketL:var f=this.startNode();return this.next(),f.elements=this.parseBindingList(B.bracketR,!0,!0),this.finishNode(f,"ArrayPattern");case B.braceL:return this.parseObj(!0)}return this.parseIdent()},P.parseBindingList=function(f,N,H,q){for(var ie=[],ge=!0;!this.eat(f);)if(ge?ge=!1:this.expect(B.comma),N&&this.type===B.comma)ie.push(null);else{if(H&&this.afterTrailingComma(f))break;if(this.type===B.ellipsis){var _e=this.parseRestBinding();this.parseBindingListItem(_e),ie.push(_e),this.type===B.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(f);break}else ie.push(this.parseAssignableListItem(q))}return ie},P.parseAssignableListItem=function(f){var N=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(N),N},P.parseBindingListItem=function(f){return f},P.parseMaybeDefault=function(f,N,H){if(H=H||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(B.eq))return H;var q=this.startNodeAt(f,N);return q.left=H,q.right=this.parseMaybeAssign(),this.finishNode(q,"AssignmentPattern")},P.checkLValSimple=function(f,N,H){N===void 0&&(N=Tt);var q=N!==Tt;switch(f.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(f.name)&&this.raiseRecoverable(f.start,(q?"Binding ":"Assigning to ")+f.name+" in strict mode"),q&&(N===pt&&f.name==="let"&&this.raiseRecoverable(f.start,"let is disallowed as a lexically bound name"),H&&(oe(H,f.name)&&this.raiseRecoverable(f.start,"Argument name clash"),H[f.name]=!0),N!==s&&this.declareName(f.name,N,f.start));break;case"ChainExpression":this.raiseRecoverable(f.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":q&&this.raiseRecoverable(f.start,"Binding member expression");break;case"ParenthesizedExpression":return q&&this.raiseRecoverable(f.start,"Binding parenthesized expression"),this.checkLValSimple(f.expression,N,H);default:this.raise(f.start,(q?"Binding":"Assigning to")+" rvalue")}},P.checkLValPattern=function(f,N,H){switch(N===void 0&&(N=Tt),f.type){case"ObjectPattern":for(var q=0,ie=f.properties;q<ie.length;q+=1){var ge=ie[q];this.checkLValInnerPattern(ge,N,H)}break;case"ArrayPattern":for(var _e=0,Ae=f.elements;_e<Ae.length;_e+=1){var Fe=Ae[_e];Fe&&this.checkLValInnerPattern(Fe,N,H)}break;default:this.checkLValSimple(f,N,H)}},P.checkLValInnerPattern=function(f,N,H){switch(N===void 0&&(N=Tt),f.type){case"Property":this.checkLValInnerPattern(f.value,N,H);break;case"AssignmentPattern":this.checkLValPattern(f.left,N,H);break;case"RestElement":this.checkLValPattern(f.argument,N,H);break;default:this.checkLValPattern(f,N,H)}};var I=function(N,H,q,ie,ge){this.token=N,this.isExpr=!!H,this.preserveSpace=!!q,this.override=ie,this.generator=!!ge},k={b_stat:new I("{",!1),b_expr:new I("{",!0),b_tmpl:new I("${",!1),p_stat:new I("(",!1),p_expr:new I("(",!0),q_tmpl:new I("`",!0,!0,function(f){return f.tryReadTemplateToken()}),f_stat:new I("function",!1),f_expr:new I("function",!0),f_expr_gen:new I("function",!0,!1,null,!0),f_gen:new I("function",!1,!1,null,!0)},b=e.prototype;b.initialContext=function(){return[k.b_stat]},b.curContext=function(){return this.context[this.context.length-1]},b.braceIsBlock=function(f){var N=this.curContext();return N===k.f_expr||N===k.f_stat?!0:f===B.colon&&(N===k.b_stat||N===k.b_expr)?!N.isExpr:f===B._return||f===B.name&&this.exprAllowed?Te.test(this.input.slice(this.lastTokEnd,this.start)):f===B._else||f===B.semi||f===B.eof||f===B.parenR||f===B.arrow?!0:f===B.braceL?N===k.b_stat:f===B._var||f===B._const||f===B.name?!1:!this.exprAllowed},b.inGeneratorContext=function(){for(var f=this.context.length-1;f>=1;f--){var N=this.context[f];if(N.token==="function")return N.generator}return!1},b.updateContext=function(f){var N,H=this.type;H.keyword&&f===B.dot?this.exprAllowed=!1:(N=H.updateContext)?N.call(this,f):this.exprAllowed=H.beforeExpr},b.overrideContext=function(f){this.curContext()!==f&&(this.context[this.context.length-1]=f)},B.parenR.updateContext=B.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var f=this.context.pop();f===k.b_stat&&this.curContext().token==="function"&&(f=this.context.pop()),this.exprAllowed=!f.isExpr},B.braceL.updateContext=function(f){this.context.push(this.braceIsBlock(f)?k.b_stat:k.b_expr),this.exprAllowed=!0},B.dollarBraceL.updateContext=function(){this.context.push(k.b_tmpl),this.exprAllowed=!0},B.parenL.updateContext=function(f){var N=f===B._if||f===B._for||f===B._with||f===B._while;this.context.push(N?k.p_stat:k.p_expr),this.exprAllowed=!0},B.incDec.updateContext=function(){},B._function.updateContext=B._class.updateContext=function(f){f.beforeExpr&&f!==B._else&&!(f===B.semi&&this.curContext()!==k.p_stat)&&!(f===B._return&&Te.test(this.input.slice(this.lastTokEnd,this.start)))&&!((f===B.colon||f===B.braceL)&&this.curContext()===k.b_stat)?this.context.push(k.f_expr):this.context.push(k.f_stat),this.exprAllowed=!1},B.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},B.backQuote.updateContext=function(){this.curContext()===k.q_tmpl?this.context.pop():this.context.push(k.q_tmpl),this.exprAllowed=!1},B.star.updateContext=function(f){if(f===B._function){var N=this.context.length-1;this.context[N]===k.f_expr?this.context[N]=k.f_expr_gen:this.context[N]=k.f_gen}this.exprAllowed=!0},B.name.updateContext=function(f){var N=!1;this.options.ecmaVersion>=6&&f!==B.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(N=!0),this.exprAllowed=N};var x=e.prototype;x.checkPropClash=function(f,N,H){if(!(this.options.ecmaVersion>=9&&f.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(f.computed||f.method||f.shorthand))){var q=f.key,ie;switch(q.type){case"Identifier":ie=q.name;break;case"Literal":ie=String(q.value);break;default:return}var ge=f.kind;if(this.options.ecmaVersion>=6){ie==="__proto__"&&ge==="init"&&(N.proto&&(H?H.doubleProto<0&&(H.doubleProto=q.start):this.raiseRecoverable(q.start,"Redefinition of __proto__ property")),N.proto=!0);return}ie="$"+ie;var _e=N[ie];if(_e){var Ae;ge==="init"?Ae=this.strict&&_e.init||_e.get||_e.set:Ae=_e.init||_e[ge],Ae&&this.raiseRecoverable(q.start,"Redefinition of property")}else _e=N[ie]={init:!1,get:!1,set:!1};_e[ge]=!0}},x.parseExpression=function(f,N){var H=this.start,q=this.startLoc,ie=this.parseMaybeAssign(f,N);if(this.type===B.comma){var ge=this.startNodeAt(H,q);for(ge.expressions=[ie];this.eat(B.comma);)ge.expressions.push(this.parseMaybeAssign(f,N));return this.finishNode(ge,"SequenceExpression")}return ie},x.parseMaybeAssign=function(f,N,H){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(f);this.exprAllowed=!1}var q=!1,ie=-1,ge=-1,_e=-1;N?(ie=N.parenthesizedAssign,ge=N.trailingComma,_e=N.doubleProto,N.parenthesizedAssign=N.trailingComma=-1):(N=new l,q=!0);var Ae=this.start,Fe=this.startLoc;(this.type===B.parenL||this.type===B.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=f==="await");var it=this.parseMaybeConditional(f,N);if(H&&(it=H.call(this,it,Ae,Fe)),this.type.isAssign){var at=this.startNodeAt(Ae,Fe);return at.operator=this.value,this.type===B.eq&&(it=this.toAssignable(it,!1,N)),q||(N.parenthesizedAssign=N.trailingComma=N.doubleProto=-1),N.shorthandAssign>=it.start&&(N.shorthandAssign=-1),this.type===B.eq?this.checkLValPattern(it):this.checkLValSimple(it),at.left=it,this.next(),at.right=this.parseMaybeAssign(f),_e>-1&&(N.doubleProto=_e),this.finishNode(at,"AssignmentExpression")}else q&&this.checkExpressionErrors(N,!0);return ie>-1&&(N.parenthesizedAssign=ie),ge>-1&&(N.trailingComma=ge),it},x.parseMaybeConditional=function(f,N){var H=this.start,q=this.startLoc,ie=this.parseExprOps(f,N);if(this.checkExpressionErrors(N))return ie;if(this.eat(B.question)){var ge=this.startNodeAt(H,q);return ge.test=ie,ge.consequent=this.parseMaybeAssign(),this.expect(B.colon),ge.alternate=this.parseMaybeAssign(f),this.finishNode(ge,"ConditionalExpression")}return ie},x.parseExprOps=function(f,N){var H=this.start,q=this.startLoc,ie=this.parseMaybeUnary(N,!1,!1,f);return this.checkExpressionErrors(N)||ie.start===H&&ie.type==="ArrowFunctionExpression"?ie:this.parseExprOp(ie,H,q,-1,f)},x.parseExprOp=function(f,N,H,q,ie){var ge=this.type.binop;if(ge!=null&&(!ie||this.type!==B._in)&&ge>q){var _e=this.type===B.logicalOR||this.type===B.logicalAND,Ae=this.type===B.coalesce;Ae&&(ge=B.logicalAND.binop);var Fe=this.value;this.next();var it=this.start,at=this.startLoc,jt=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,ie),it,at,ge,ie),cn=this.buildBinary(N,H,f,jt,Fe,_e||Ae);return(_e&&this.type===B.coalesce||Ae&&(this.type===B.logicalOR||this.type===B.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(cn,N,H,q,ie)}return f},x.buildBinary=function(f,N,H,q,ie,ge){q.type==="PrivateIdentifier"&&this.raise(q.start,"Private identifier can only be left side of binary expression");var _e=this.startNodeAt(f,N);return _e.left=H,_e.operator=ie,_e.right=q,this.finishNode(_e,ge?"LogicalExpression":"BinaryExpression")},x.parseMaybeUnary=function(f,N,H,q){var ie=this.start,ge=this.startLoc,_e;if(this.isContextual("await")&&this.canAwait)_e=this.parseAwait(q),N=!0;else if(this.type.prefix){var Ae=this.startNode(),Fe=this.type===B.incDec;Ae.operator=this.value,Ae.prefix=!0,this.next(),Ae.argument=this.parseMaybeUnary(null,!0,Fe,q),this.checkExpressionErrors(f,!0),Fe?this.checkLValSimple(Ae.argument):this.strict&&Ae.operator==="delete"&&Ae.argument.type==="Identifier"?this.raiseRecoverable(Ae.start,"Deleting local variable in strict mode"):Ae.operator==="delete"&&S(Ae.argument)?this.raiseRecoverable(Ae.start,"Private fields can not be deleted"):N=!0,_e=this.finishNode(Ae,Fe?"UpdateExpression":"UnaryExpression")}else if(!N&&this.type===B.privateId)(q||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),_e=this.parsePrivateIdent(),this.type!==B._in&&this.unexpected();else{if(_e=this.parseExprSubscripts(f,q),this.checkExpressionErrors(f))return _e;for(;this.type.postfix&&!this.canInsertSemicolon();){var it=this.startNodeAt(ie,ge);it.operator=this.value,it.prefix=!1,it.argument=_e,this.checkLValSimple(_e),this.next(),_e=this.finishNode(it,"UpdateExpression")}}if(!H&&this.eat(B.starstar))if(N)this.unexpected(this.lastTokStart);else return this.buildBinary(ie,ge,_e,this.parseMaybeUnary(null,!1,!1,q),"**",!1);else return _e};function S(f){return f.type==="MemberExpression"&&f.property.type==="PrivateIdentifier"||f.type==="ChainExpression"&&S(f.expression)}x.parseExprSubscripts=function(f,N){var H=this.start,q=this.startLoc,ie=this.parseExprAtom(f,N);if(ie.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return ie;var ge=this.parseSubscripts(ie,H,q,!1,N);return f&&ge.type==="MemberExpression"&&(f.parenthesizedAssign>=ge.start&&(f.parenthesizedAssign=-1),f.parenthesizedBind>=ge.start&&(f.parenthesizedBind=-1),f.trailingComma>=ge.start&&(f.trailingComma=-1)),ge},x.parseSubscripts=function(f,N,H,q,ie){for(var ge=this.options.ecmaVersion>=8&&f.type==="Identifier"&&f.name==="async"&&this.lastTokEnd===f.end&&!this.canInsertSemicolon()&&f.end-f.start===5&&this.potentialArrowAt===f.start,_e=!1;;){var Ae=this.parseSubscript(f,N,H,q,ge,_e,ie);if(Ae.optional&&(_e=!0),Ae===f||Ae.type==="ArrowFunctionExpression"){if(_e){var Fe=this.startNodeAt(N,H);Fe.expression=Ae,Ae=this.finishNode(Fe,"ChainExpression")}return Ae}f=Ae}},x.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(B.arrow)},x.parseSubscriptAsyncArrow=function(f,N,H,q){return this.parseArrowExpression(this.startNodeAt(f,N),H,!0,q)},x.parseSubscript=function(f,N,H,q,ie,ge,_e){var Ae=this.options.ecmaVersion>=11,Fe=Ae&&this.eat(B.questionDot);q&&Fe&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var it=this.eat(B.bracketL);if(it||Fe&&this.type!==B.parenL&&this.type!==B.backQuote||this.eat(B.dot)){var at=this.startNodeAt(N,H);at.object=f,it?(at.property=this.parseExpression(),this.expect(B.bracketR)):this.type===B.privateId&&f.type!=="Super"?at.property=this.parsePrivateIdent():at.property=this.parseIdent(this.options.allowReserved!=="never"),at.computed=!!it,Ae&&(at.optional=Fe),f=this.finishNode(at,"MemberExpression")}else if(!q&&this.eat(B.parenL)){var jt=new l,cn=this.yieldPos,or=this.awaitPos,bn=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Ir=this.parseExprList(B.parenR,this.options.ecmaVersion>=8,!1,jt);if(ie&&!Fe&&this.shouldParseAsyncArrow())return this.checkPatternErrors(jt,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=cn,this.awaitPos=or,this.awaitIdentPos=bn,this.parseSubscriptAsyncArrow(N,H,Ir,_e);this.checkExpressionErrors(jt,!0),this.yieldPos=cn||this.yieldPos,this.awaitPos=or||this.awaitPos,this.awaitIdentPos=bn||this.awaitIdentPos;var En=this.startNodeAt(N,H);En.callee=f,En.arguments=Ir,Ae&&(En.optional=Fe),f=this.finishNode(En,"CallExpression")}else if(this.type===B.backQuote){(Fe||ge)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var kn=this.startNodeAt(N,H);kn.tag=f,kn.quasi=this.parseTemplate({isTagged:!0}),f=this.finishNode(kn,"TaggedTemplateExpression")}return f},x.parseExprAtom=function(f,N,H){this.type===B.slash&&this.readRegexp();var q,ie=this.potentialArrowAt===this.start;switch(this.type){case B._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),q=this.startNode(),this.next(),this.type===B.parenL&&!this.allowDirectSuper&&this.raise(q.start,"super() call outside constructor of a subclass"),this.type!==B.dot&&this.type!==B.bracketL&&this.type!==B.parenL&&this.unexpected(),this.finishNode(q,"Super");case B._this:return q=this.startNode(),this.next(),this.finishNode(q,"ThisExpression");case B.name:var ge=this.start,_e=this.startLoc,Ae=this.containsEsc,Fe=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Ae&&Fe.name==="async"&&!this.canInsertSemicolon()&&this.eat(B._function))return this.overrideContext(k.f_expr),this.parseFunction(this.startNodeAt(ge,_e),0,!1,!0,N);if(ie&&!this.canInsertSemicolon()){if(this.eat(B.arrow))return this.parseArrowExpression(this.startNodeAt(ge,_e),[Fe],!1,N);if(this.options.ecmaVersion>=8&&Fe.name==="async"&&this.type===B.name&&!Ae&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Fe=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(B.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(ge,_e),[Fe],!0,N)}return Fe;case B.regexp:var it=this.value;return q=this.parseLiteral(it.value),q.regex={pattern:it.pattern,flags:it.flags},q;case B.num:case B.string:return this.parseLiteral(this.value);case B._null:case B._true:case B._false:return q=this.startNode(),q.value=this.type===B._null?null:this.type===B._true,q.raw=this.type.keyword,this.next(),this.finishNode(q,"Literal");case B.parenL:var at=this.start,jt=this.parseParenAndDistinguishExpression(ie,N);return f&&(f.parenthesizedAssign<0&&!this.isSimpleAssignTarget(jt)&&(f.parenthesizedAssign=at),f.parenthesizedBind<0&&(f.parenthesizedBind=at)),jt;case B.bracketL:return q=this.startNode(),this.next(),q.elements=this.parseExprList(B.bracketR,!0,!0,f),this.finishNode(q,"ArrayExpression");case B.braceL:return this.overrideContext(k.b_expr),this.parseObj(!1,f);case B._function:return q=this.startNode(),this.next(),this.parseFunction(q,0);case B._class:return this.parseClass(this.startNode(),!1);case B._new:return this.parseNew();case B.backQuote:return this.parseTemplate();case B._import:return this.options.ecmaVersion>=11?this.parseExprImport(H):this.unexpected();default:return this.parseExprAtomDefault()}},x.parseExprAtomDefault=function(){this.unexpected()},x.parseExprImport=function(f){var N=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===B.parenL&&!f)return this.parseDynamicImport(N);if(this.type===B.dot){var H=this.startNodeAt(N.start,N.loc&&N.loc.start);return H.name="import",N.meta=this.finishNode(H,"Identifier"),this.parseImportMeta(N)}else this.unexpected()},x.parseDynamicImport=function(f){if(this.next(),f.source=this.parseMaybeAssign(),!this.eat(B.parenR)){var N=this.start;this.eat(B.comma)&&this.eat(B.parenR)?this.raiseRecoverable(N,"Trailing comma is not allowed in import()"):this.unexpected(N)}return this.finishNode(f,"ImportExpression")},x.parseImportMeta=function(f){this.next();var N=this.containsEsc;return f.property=this.parseIdent(!0),f.property.name!=="meta"&&this.raiseRecoverable(f.property.start,"The only valid meta property for import is 'import.meta'"),N&&this.raiseRecoverable(f.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(f.start,"Cannot use 'import.meta' outside a module"),this.finishNode(f,"MetaProperty")},x.parseLiteral=function(f){var N=this.startNode();return N.value=f,N.raw=this.input.slice(this.start,this.end),N.raw.charCodeAt(N.raw.length-1)===110&&(N.bigint=N.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(N,"Literal")},x.parseParenExpression=function(){this.expect(B.parenL);var f=this.parseExpression();return this.expect(B.parenR),f},x.shouldParseArrow=function(f){return!this.canInsertSemicolon()},x.parseParenAndDistinguishExpression=function(f,N){var H=this.start,q=this.startLoc,ie,ge=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var _e=this.start,Ae=this.startLoc,Fe=[],it=!0,at=!1,jt=new l,cn=this.yieldPos,or=this.awaitPos,bn;for(this.yieldPos=0,this.awaitPos=0;this.type!==B.parenR;)if(it?it=!1:this.expect(B.comma),ge&&this.afterTrailingComma(B.parenR,!0)){at=!0;break}else if(this.type===B.ellipsis){bn=this.start,Fe.push(this.parseParenItem(this.parseRestBinding())),this.type===B.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Fe.push(this.parseMaybeAssign(!1,jt,this.parseParenItem));var Ir=this.lastTokEnd,En=this.lastTokEndLoc;if(this.expect(B.parenR),f&&this.shouldParseArrow(Fe)&&this.eat(B.arrow))return this.checkPatternErrors(jt,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=cn,this.awaitPos=or,this.parseParenArrowList(H,q,Fe,N);(!Fe.length||at)&&this.unexpected(this.lastTokStart),bn&&this.unexpected(bn),this.checkExpressionErrors(jt,!0),this.yieldPos=cn||this.yieldPos,this.awaitPos=or||this.awaitPos,Fe.length>1?(ie=this.startNodeAt(_e,Ae),ie.expressions=Fe,this.finishNodeAt(ie,"SequenceExpression",Ir,En)):ie=Fe[0]}else ie=this.parseParenExpression();if(this.options.preserveParens){var kn=this.startNodeAt(H,q);return kn.expression=ie,this.finishNode(kn,"ParenthesizedExpression")}else return ie},x.parseParenItem=function(f){return f},x.parseParenArrowList=function(f,N,H,q){return this.parseArrowExpression(this.startNodeAt(f,N),H,!1,q)};var E=[];x.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var f=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===B.dot){var N=this.startNodeAt(f.start,f.loc&&f.loc.start);N.name="new",f.meta=this.finishNode(N,"Identifier"),this.next();var H=this.containsEsc;return f.property=this.parseIdent(!0),f.property.name!=="target"&&this.raiseRecoverable(f.property.start,"The only valid meta property for new is 'new.target'"),H&&this.raiseRecoverable(f.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(f.start,"'new.target' can only be used in functions and class static block"),this.finishNode(f,"MetaProperty")}var q=this.start,ie=this.startLoc;return f.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),q,ie,!0,!1),this.eat(B.parenL)?f.arguments=this.parseExprList(B.parenR,this.options.ecmaVersion>=8,!1):f.arguments=E,this.finishNode(f,"NewExpression")},x.parseTemplateElement=function(f){var N=f.isTagged,H=this.startNode();return this.type===B.invalidTemplate?(N||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),H.value={raw:this.value,cooked:null}):H.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),H.tail=this.type===B.backQuote,this.finishNode(H,"TemplateElement")},x.parseTemplate=function(f){f===void 0&&(f={});var N=f.isTagged;N===void 0&&(N=!1);var H=this.startNode();this.next(),H.expressions=[];var q=this.parseTemplateElement({isTagged:N});for(H.quasis=[q];!q.tail;)this.type===B.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(B.dollarBraceL),H.expressions.push(this.parseExpression()),this.expect(B.braceR),H.quasis.push(q=this.parseTemplateElement({isTagged:N}));return this.next(),this.finishNode(H,"TemplateLiteral")},x.isAsyncProp=function(f){return!f.computed&&f.key.type==="Identifier"&&f.key.name==="async"&&(this.type===B.name||this.type===B.num||this.type===B.string||this.type===B.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===B.star)&&!Te.test(this.input.slice(this.lastTokEnd,this.start))},x.parseObj=function(f,N){var H=this.startNode(),q=!0,ie={};for(H.properties=[],this.next();!this.eat(B.braceR);){if(q)q=!1;else if(this.expect(B.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(B.braceR))break;var ge=this.parseProperty(f,N);f||this.checkPropClash(ge,ie,N),H.properties.push(ge)}return this.finishNode(H,f?"ObjectPattern":"ObjectExpression")},x.parseProperty=function(f,N){var H=this.startNode(),q,ie,ge,_e;if(this.options.ecmaVersion>=9&&this.eat(B.ellipsis))return f?(H.argument=this.parseIdent(!1),this.type===B.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(H,"RestElement")):(H.argument=this.parseMaybeAssign(!1,N),this.type===B.comma&&N&&N.trailingComma<0&&(N.trailingComma=this.start),this.finishNode(H,"SpreadElement"));this.options.ecmaVersion>=6&&(H.method=!1,H.shorthand=!1,(f||N)&&(ge=this.start,_e=this.startLoc),f||(q=this.eat(B.star)));var Ae=this.containsEsc;return this.parsePropertyName(H),!f&&!Ae&&this.options.ecmaVersion>=8&&!q&&this.isAsyncProp(H)?(ie=!0,q=this.options.ecmaVersion>=9&&this.eat(B.star),this.parsePropertyName(H)):ie=!1,this.parsePropertyValue(H,f,q,ie,ge,_e,N,Ae),this.finishNode(H,"Property")},x.parseGetterSetter=function(f){f.kind=f.key.name,this.parsePropertyName(f),f.value=this.parseMethod(!1);var N=f.kind==="get"?0:1;if(f.value.params.length!==N){var H=f.value.start;f.kind==="get"?this.raiseRecoverable(H,"getter should have no params"):this.raiseRecoverable(H,"setter should have exactly one param")}else f.kind==="set"&&f.value.params[0].type==="RestElement"&&this.raiseRecoverable(f.value.params[0].start,"Setter cannot use rest params")},x.parsePropertyValue=function(f,N,H,q,ie,ge,_e,Ae){(H||q)&&this.type===B.colon&&this.unexpected(),this.eat(B.colon)?(f.value=N?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,_e),f.kind="init"):this.options.ecmaVersion>=6&&this.type===B.parenL?(N&&this.unexpected(),f.kind="init",f.method=!0,f.value=this.parseMethod(H,q)):!N&&!Ae&&this.options.ecmaVersion>=5&&!f.computed&&f.key.type==="Identifier"&&(f.key.name==="get"||f.key.name==="set")&&this.type!==B.comma&&this.type!==B.braceR&&this.type!==B.eq?((H||q)&&this.unexpected(),this.parseGetterSetter(f)):this.options.ecmaVersion>=6&&!f.computed&&f.key.type==="Identifier"?((H||q)&&this.unexpected(),this.checkUnreserved(f.key),f.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=ie),f.kind="init",N?f.value=this.parseMaybeDefault(ie,ge,this.copyNode(f.key)):this.type===B.eq&&_e?(_e.shorthandAssign<0&&(_e.shorthandAssign=this.start),f.value=this.parseMaybeDefault(ie,ge,this.copyNode(f.key))):f.value=this.copyNode(f.key),f.shorthand=!0):this.unexpected()},x.parsePropertyName=function(f){if(this.options.ecmaVersion>=6){if(this.eat(B.bracketL))return f.computed=!0,f.key=this.parseMaybeAssign(),this.expect(B.bracketR),f.key;f.computed=!1}return f.key=this.type===B.num||this.type===B.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},x.initFunction=function(f){f.id=null,this.options.ecmaVersion>=6&&(f.generator=f.expression=!1),this.options.ecmaVersion>=8&&(f.async=!1)},x.parseMethod=function(f,N,H){var q=this.startNode(),ie=this.yieldPos,ge=this.awaitPos,_e=this.awaitIdentPos;return this.initFunction(q),this.options.ecmaVersion>=6&&(q.generator=f),this.options.ecmaVersion>=8&&(q.async=!!N),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ir(N,q.generator)|on|(H?Tr:0)),this.expect(B.parenL),q.params=this.parseBindingList(B.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(q,!1,!0,!1),this.yieldPos=ie,this.awaitPos=ge,this.awaitIdentPos=_e,this.finishNode(q,"FunctionExpression")},x.parseArrowExpression=function(f,N,H,q){var ie=this.yieldPos,ge=this.awaitPos,_e=this.awaitIdentPos;return this.enterScope(ir(H,!1)|Mi),this.initFunction(f),this.options.ecmaVersion>=8&&(f.async=!!H),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,f.params=this.toAssignableList(N,!0),this.parseFunctionBody(f,!0,!1,q),this.yieldPos=ie,this.awaitPos=ge,this.awaitIdentPos=_e,this.finishNode(f,"ArrowFunctionExpression")},x.parseFunctionBody=function(f,N,H,q){var ie=N&&this.type!==B.braceL,ge=this.strict,_e=!1;if(ie)f.body=this.parseMaybeAssign(q),f.expression=!0,this.checkParams(f,!1);else{var Ae=this.options.ecmaVersion>=7&&!this.isSimpleParamList(f.params);(!ge||Ae)&&(_e=this.strictDirective(this.end),_e&&Ae&&this.raiseRecoverable(f.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Fe=this.labels;this.labels=[],_e&&(this.strict=!0),this.checkParams(f,!ge&&!_e&&!N&&!H&&this.isSimpleParamList(f.params)),this.strict&&f.id&&this.checkLValSimple(f.id,s),f.body=this.parseBlock(!1,void 0,_e&&!ge),f.expression=!1,this.adaptDirectivePrologue(f.body.body),this.labels=Fe}this.exitScope()},x.isSimpleParamList=function(f){for(var N=0,H=f;N<H.length;N+=1){var q=H[N];if(q.type!=="Identifier")return!1}return!0},x.checkParams=function(f,N){for(var H=Object.create(null),q=0,ie=f.params;q<ie.length;q+=1){var ge=ie[q];this.checkLValInnerPattern(ge,Pt,N?null:H)}},x.parseExprList=function(f,N,H,q){for(var ie=[],ge=!0;!this.eat(f);){if(ge)ge=!1;else if(this.expect(B.comma),N&&this.afterTrailingComma(f))break;var _e=void 0;H&&this.type===B.comma?_e=null:this.type===B.ellipsis?(_e=this.parseSpread(q),q&&this.type===B.comma&&q.trailingComma<0&&(q.trailingComma=this.start)):_e=this.parseMaybeAssign(!1,q),ie.push(_e)}return ie},x.checkUnreserved=function(f){var N=f.start,H=f.end,q=f.name;if(this.inGenerator&&q==="yield"&&this.raiseRecoverable(N,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&q==="await"&&this.raiseRecoverable(N,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&q==="arguments"&&this.raiseRecoverable(N,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(q==="arguments"||q==="await")&&this.raise(N,"Cannot use "+q+" in class static initialization block"),this.keywords.test(q)&&this.raise(N,"Unexpected keyword '"+q+"'"),!(this.options.ecmaVersion<6&&this.input.slice(N,H).indexOf("\\")!==-1)){var ie=this.strict?this.reservedWordsStrict:this.reservedWords;ie.test(q)&&(!this.inAsync&&q==="await"&&this.raiseRecoverable(N,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(N,"The keyword '"+q+"' is reserved"))}},x.parseIdent=function(f){var N=this.parseIdentNode();return this.next(!!f),this.finishNode(N,"Identifier"),f||(this.checkUnreserved(N),N.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=N.start)),N},x.parseIdentNode=function(){var f=this.startNode();return this.type===B.name?f.name=this.value:this.type.keyword?(f.name=this.type.keyword,(f.name==="class"||f.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=B.name):this.unexpected(),f},x.parsePrivateIdent=function(){var f=this.startNode();return this.type===B.privateId?f.name=this.value:this.unexpected(),this.next(),this.finishNode(f,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(f.start,"Private field '#"+f.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(f)),f},x.parseYield=function(f){this.yieldPos||(this.yieldPos=this.start);var N=this.startNode();return this.next(),this.type===B.semi||this.canInsertSemicolon()||this.type!==B.star&&!this.type.startsExpr?(N.delegate=!1,N.argument=null):(N.delegate=this.eat(B.star),N.argument=this.parseMaybeAssign(f)),this.finishNode(N,"YieldExpression")},x.parseAwait=function(f){this.awaitPos||(this.awaitPos=this.start);var N=this.startNode();return this.next(),N.argument=this.parseMaybeUnary(null,!0,!1,f),this.finishNode(N,"AwaitExpression")};var A=e.prototype;A.raise=function(f,N){var H=Kt(this.input,f);N+=" ("+H.line+":"+H.column+")";var q=new SyntaxError(N);throw q.pos=f,q.loc=H,q.raisedAt=this.pos,q},A.raiseRecoverable=A.raise,A.curPosition=function(){if(this.options.locations)return new ut(this.curLine,this.pos-this.lineStart)};var O=e.prototype,L=function(N){this.flags=N,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};O.enterScope=function(f){this.scopeStack.push(new L(f))},O.exitScope=function(){this.scopeStack.pop()},O.treatFunctionsAsVarInScope=function(f){return f.flags&tt||!this.inModule&&f.flags&Xe},O.declareName=function(f,N,H){var q=!1;if(N===pt){var ie=this.currentScope();q=ie.lexical.indexOf(f)>-1||ie.functions.indexOf(f)>-1||ie.var.indexOf(f)>-1,ie.lexical.push(f),this.inModule&&ie.flags&Xe&&delete this.undefinedExports[f]}else if(N===nt){var ge=this.currentScope();ge.lexical.push(f)}else if(N===It){var _e=this.currentScope();this.treatFunctionsAsVar?q=_e.lexical.indexOf(f)>-1:q=_e.lexical.indexOf(f)>-1||_e.var.indexOf(f)>-1,_e.functions.push(f)}else for(var Ae=this.scopeStack.length-1;Ae>=0;--Ae){var Fe=this.scopeStack[Ae];if(Fe.lexical.indexOf(f)>-1&&!(Fe.flags&Nr&&Fe.lexical[0]===f)||!this.treatFunctionsAsVarInScope(Fe)&&Fe.functions.indexOf(f)>-1){q=!0;break}if(Fe.var.push(f),this.inModule&&Fe.flags&Xe&&delete this.undefinedExports[f],Fe.flags&tr)break}q&&this.raiseRecoverable(H,"Identifier '"+f+"' has already been declared")},O.checkLocalExport=function(f){this.scopeStack[0].lexical.indexOf(f.name)===-1&&this.scopeStack[0].var.indexOf(f.name)===-1&&(this.undefinedExports[f.name]=f)},O.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},O.currentVarScope=function(){for(var f=this.scopeStack.length-1;;f--){var N=this.scopeStack[f];if(N.flags&tr)return N}},O.currentThisScope=function(){for(var f=this.scopeStack.length-1;;f--){var N=this.scopeStack[f];if(N.flags&tr&&!(N.flags&Mi))return N}};var R=function(N,H,q){this.type="",this.start=H,this.end=0,N.options.locations&&(this.loc=new zt(N,q)),N.options.directSourceFile&&(this.sourceFile=N.options.directSourceFile),N.options.ranges&&(this.range=[H,0])},F=e.prototype;F.startNode=function(){return new R(this,this.start,this.startLoc)},F.startNodeAt=function(f,N){return new R(this,f,N)};function U(f,N,H,q){return f.type=N,f.end=H,this.options.locations&&(f.loc.end=q),this.options.ranges&&(f.range[1]=H),f}F.finishNode=function(f,N){return U.call(this,f,N,this.lastTokEnd,this.lastTokEndLoc)},F.finishNodeAt=function(f,N,H,q){return U.call(this,f,N,H,q)},F.copyNode=function(f){var N=new R(this,f.start,this.startLoc);for(var H in f)N[H]=f[H];return N};var G="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",V=G+" Extended_Pictographic",j=V,Q=j+" EBase EComp EMod EPres ExtPict",Z=Q,Y=Z,re={9:G,10:V,11:j,12:Q,13:Z,14:Y},le="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",de={9:"",10:"",11:"",12:"",13:"",14:le},ve="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",we="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",he=we+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",fe=he+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",xe=fe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Ce=xe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Pe=Ce+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",Me={9:we,10:he,11:fe,12:xe,13:Ce,14:Pe},Re={};function ze(f){var N=Re[f]={binary:Se(re[f]+" "+ve),binaryOfStrings:Se(de[f]),nonBinary:{General_Category:Se(ve),Script:Se(Me[f])}};N.nonBinary.Script_Extensions=N.nonBinary.Script,N.nonBinary.gc=N.nonBinary.General_Category,N.nonBinary.sc=N.nonBinary.Script,N.nonBinary.scx=N.nonBinary.Script_Extensions}for(var De=0,Ue=[9,10,11,12,13,14];De<Ue.length;De+=1){var ft=Ue[De];ze(ft)}var Ie=e.prototype,Je=function(N){this.parser=N,this.validFlags="gim"+(N.options.ecmaVersion>=6?"uy":"")+(N.options.ecmaVersion>=9?"s":"")+(N.options.ecmaVersion>=13?"d":"")+(N.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Re[N.options.ecmaVersion>=14?14:N.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Je.prototype.reset=function(N,H,q){var ie=q.indexOf("v")!==-1,ge=q.indexOf("u")!==-1;this.start=N|0,this.source=H+"",this.flags=q,ie&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=ge&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=ge&&this.parser.options.ecmaVersion>=9)},Je.prototype.raise=function(N){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+N)},Je.prototype.at=function(N,H){H===void 0&&(H=!1);var q=this.source,ie=q.length;if(N>=ie)return-1;var ge=q.charCodeAt(N);if(!(H||this.switchU)||ge<=55295||ge>=57344||N+1>=ie)return ge;var _e=q.charCodeAt(N+1);return _e>=56320&&_e<=57343?(ge<<10)+_e-56613888:ge},Je.prototype.nextIndex=function(N,H){H===void 0&&(H=!1);var q=this.source,ie=q.length;if(N>=ie)return ie;var ge=q.charCodeAt(N),_e;return!(H||this.switchU)||ge<=55295||ge>=57344||N+1>=ie||(_e=q.charCodeAt(N+1))<56320||_e>57343?N+1:N+2},Je.prototype.current=function(N){return N===void 0&&(N=!1),this.at(this.pos,N)},Je.prototype.lookahead=function(N){return N===void 0&&(N=!1),this.at(this.nextIndex(this.pos,N),N)},Je.prototype.advance=function(N){N===void 0&&(N=!1),this.pos=this.nextIndex(this.pos,N)},Je.prototype.eat=function(N,H){return H===void 0&&(H=!1),this.current(H)===N?(this.advance(H),!0):!1},Je.prototype.eatChars=function(N,H){H===void 0&&(H=!1);for(var q=this.pos,ie=0,ge=N;ie<ge.length;ie+=1){var _e=ge[ie],Ae=this.at(q,H);if(Ae===-1||Ae!==_e)return!1;q=this.nextIndex(q,H)}return this.pos=q,!0},Ie.validateRegExpFlags=function(f){for(var N=f.validFlags,H=f.flags,q=!1,ie=!1,ge=0;ge<H.length;ge++){var _e=H.charAt(ge);N.indexOf(_e)===-1&&this.raise(f.start,"Invalid regular expression flag"),H.indexOf(_e,ge+1)>-1&&this.raise(f.start,"Duplicate regular expression flag"),_e==="u"&&(q=!0),_e==="v"&&(ie=!0)}this.options.ecmaVersion>=15&&q&&ie&&this.raise(f.start,"Invalid regular expression flag")},Ie.validateRegExpPattern=function(f){this.regexp_pattern(f),!f.switchN&&this.options.ecmaVersion>=9&&f.groupNames.length>0&&(f.switchN=!0,this.regexp_pattern(f))},Ie.regexp_pattern=function(f){f.pos=0,f.lastIntValue=0,f.lastStringValue="",f.lastAssertionIsQuantifiable=!1,f.numCapturingParens=0,f.maxBackReference=0,f.groupNames.length=0,f.backReferenceNames.length=0,this.regexp_disjunction(f),f.pos!==f.source.length&&(f.eat(41)&&f.raise("Unmatched ')'"),(f.eat(93)||f.eat(125))&&f.raise("Lone quantifier brackets")),f.maxBackReference>f.numCapturingParens&&f.raise("Invalid escape");for(var N=0,H=f.backReferenceNames;N<H.length;N+=1){var q=H[N];f.groupNames.indexOf(q)===-1&&f.raise("Invalid named capture referenced")}},Ie.regexp_disjunction=function(f){for(this.regexp_alternative(f);f.eat(124);)this.regexp_alternative(f);this.regexp_eatQuantifier(f,!0)&&f.raise("Nothing to repeat"),f.eat(123)&&f.raise("Lone quantifier brackets")},Ie.regexp_alternative=function(f){for(;f.pos<f.source.length&&this.regexp_eatTerm(f););},Ie.regexp_eatTerm=function(f){return this.regexp_eatAssertion(f)?(f.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(f)&&f.switchU&&f.raise("Invalid quantifier"),!0):(f.switchU?this.regexp_eatAtom(f):this.regexp_eatExtendedAtom(f))?(this.regexp_eatQuantifier(f),!0):!1},Ie.regexp_eatAssertion=function(f){var N=f.pos;if(f.lastAssertionIsQuantifiable=!1,f.eat(94)||f.eat(36))return!0;if(f.eat(92)){if(f.eat(66)||f.eat(98))return!0;f.pos=N}if(f.eat(40)&&f.eat(63)){var H=!1;if(this.options.ecmaVersion>=9&&(H=f.eat(60)),f.eat(61)||f.eat(33))return this.regexp_disjunction(f),f.eat(41)||f.raise("Unterminated group"),f.lastAssertionIsQuantifiable=!H,!0}return f.pos=N,!1},Ie.regexp_eatQuantifier=function(f,N){return N===void 0&&(N=!1),this.regexp_eatQuantifierPrefix(f,N)?(f.eat(63),!0):!1},Ie.regexp_eatQuantifierPrefix=function(f,N){return f.eat(42)||f.eat(43)||f.eat(63)||this.regexp_eatBracedQuantifier(f,N)},Ie.regexp_eatBracedQuantifier=function(f,N){var H=f.pos;if(f.eat(123)){var q=0,ie=-1;if(this.regexp_eatDecimalDigits(f)&&(q=f.lastIntValue,f.eat(44)&&this.regexp_eatDecimalDigits(f)&&(ie=f.lastIntValue),f.eat(125)))return ie!==-1&&ie<q&&!N&&f.raise("numbers out of order in {} quantifier"),!0;f.switchU&&!N&&f.raise("Incomplete quantifier"),f.pos=H}return!1},Ie.regexp_eatAtom=function(f){return this.regexp_eatPatternCharacters(f)||f.eat(46)||this.regexp_eatReverseSolidusAtomEscape(f)||this.regexp_eatCharacterClass(f)||this.regexp_eatUncapturingGroup(f)||this.regexp_eatCapturingGroup(f)},Ie.regexp_eatReverseSolidusAtomEscape=function(f){var N=f.pos;if(f.eat(92)){if(this.regexp_eatAtomEscape(f))return!0;f.pos=N}return!1},Ie.regexp_eatUncapturingGroup=function(f){var N=f.pos;if(f.eat(40)){if(f.eat(63)&&f.eat(58)){if(this.regexp_disjunction(f),f.eat(41))return!0;f.raise("Unterminated group")}f.pos=N}return!1},Ie.regexp_eatCapturingGroup=function(f){if(f.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(f):f.current()===63&&f.raise("Invalid group"),this.regexp_disjunction(f),f.eat(41))return f.numCapturingParens+=1,!0;f.raise("Unterminated group")}return!1},Ie.regexp_eatExtendedAtom=function(f){return f.eat(46)||this.regexp_eatReverseSolidusAtomEscape(f)||this.regexp_eatCharacterClass(f)||this.regexp_eatUncapturingGroup(f)||this.regexp_eatCapturingGroup(f)||this.regexp_eatInvalidBracedQuantifier(f)||this.regexp_eatExtendedPatternCharacter(f)},Ie.regexp_eatInvalidBracedQuantifier=function(f){return this.regexp_eatBracedQuantifier(f,!0)&&f.raise("Nothing to repeat"),!1},Ie.regexp_eatSyntaxCharacter=function(f){var N=f.current();return Ke(N)?(f.lastIntValue=N,f.advance(),!0):!1};function Ke(f){return f===36||f>=40&&f<=43||f===46||f===63||f>=91&&f<=94||f>=123&&f<=125}Ie.regexp_eatPatternCharacters=function(f){for(var N=f.pos,H=0;(H=f.current())!==-1&&!Ke(H);)f.advance();return f.pos!==N},Ie.regexp_eatExtendedPatternCharacter=function(f){var N=f.current();return N!==-1&&N!==36&&!(N>=40&&N<=43)&&N!==46&&N!==63&&N!==91&&N!==94&&N!==124?(f.advance(),!0):!1},Ie.regexp_groupSpecifier=function(f){if(f.eat(63)){if(this.regexp_eatGroupName(f)){f.groupNames.indexOf(f.lastStringValue)!==-1&&f.raise("Duplicate capture group name"),f.groupNames.push(f.lastStringValue);return}f.raise("Invalid group")}},Ie.regexp_eatGroupName=function(f){if(f.lastStringValue="",f.eat(60)){if(this.regexp_eatRegExpIdentifierName(f)&&f.eat(62))return!0;f.raise("Invalid capture group name")}return!1},Ie.regexp_eatRegExpIdentifierName=function(f){if(f.lastStringValue="",this.regexp_eatRegExpIdentifierStart(f)){for(f.lastStringValue+=Be(f.lastIntValue);this.regexp_eatRegExpIdentifierPart(f);)f.lastStringValue+=Be(f.lastIntValue);return!0}return!1},Ie.regexp_eatRegExpIdentifierStart=function(f){var N=f.pos,H=this.options.ecmaVersion>=11,q=f.current(H);return f.advance(H),q===92&&this.regexp_eatRegExpUnicodeEscapeSequence(f,H)&&(q=f.lastIntValue),Qe(q)?(f.lastIntValue=q,!0):(f.pos=N,!1)};function Qe(f){return ue(f,!0)||f===36||f===95}Ie.regexp_eatRegExpIdentifierPart=function(f){var N=f.pos,H=this.options.ecmaVersion>=11,q=f.current(H);return f.advance(H),q===92&&this.regexp_eatRegExpUnicodeEscapeSequence(f,H)&&(q=f.lastIntValue),gt(q)?(f.lastIntValue=q,!0):(f.pos=N,!1)};function gt(f){return ee(f,!0)||f===36||f===95||f===8204||f===8205}Ie.regexp_eatAtomEscape=function(f){return this.regexp_eatBackReference(f)||this.regexp_eatCharacterClassEscape(f)||this.regexp_eatCharacterEscape(f)||f.switchN&&this.regexp_eatKGroupName(f)?!0:(f.switchU&&(f.current()===99&&f.raise("Invalid unicode escape"),f.raise("Invalid escape")),!1)},Ie.regexp_eatBackReference=function(f){var N=f.pos;if(this.regexp_eatDecimalEscape(f)){var H=f.lastIntValue;if(f.switchU)return H>f.maxBackReference&&(f.maxBackReference=H),!0;if(H<=f.numCapturingParens)return!0;f.pos=N}return!1},Ie.regexp_eatKGroupName=function(f){if(f.eat(107)){if(this.regexp_eatGroupName(f))return f.backReferenceNames.push(f.lastStringValue),!0;f.raise("Invalid named reference")}return!1},Ie.regexp_eatCharacterEscape=function(f){return this.regexp_eatControlEscape(f)||this.regexp_eatCControlLetter(f)||this.regexp_eatZero(f)||this.regexp_eatHexEscapeSequence(f)||this.regexp_eatRegExpUnicodeEscapeSequence(f,!1)||!f.switchU&&this.regexp_eatLegacyOctalEscapeSequence(f)||this.regexp_eatIdentityEscape(f)},Ie.regexp_eatCControlLetter=function(f){var N=f.pos;if(f.eat(99)){if(this.regexp_eatControlLetter(f))return!0;f.pos=N}return!1},Ie.regexp_eatZero=function(f){return f.current()===48&&!nr(f.lookahead())?(f.lastIntValue=0,f.advance(),!0):!1},Ie.regexp_eatControlEscape=function(f){var N=f.current();return N===116?(f.lastIntValue=9,f.advance(),!0):N===110?(f.lastIntValue=10,f.advance(),!0):N===118?(f.lastIntValue=11,f.advance(),!0):N===102?(f.lastIntValue=12,f.advance(),!0):N===114?(f.lastIntValue=13,f.advance(),!0):!1},Ie.regexp_eatControlLetter=function(f){var N=f.current();return _t(N)?(f.lastIntValue=N%32,f.advance(),!0):!1};function _t(f){return f>=65&&f<=90||f>=97&&f<=122}Ie.regexp_eatRegExpUnicodeEscapeSequence=function(f,N){N===void 0&&(N=!1);var H=f.pos,q=N||f.switchU;if(f.eat(117)){if(this.regexp_eatFixedHexDigits(f,4)){var ie=f.lastIntValue;if(q&&ie>=55296&&ie<=56319){var ge=f.pos;if(f.eat(92)&&f.eat(117)&&this.regexp_eatFixedHexDigits(f,4)){var _e=f.lastIntValue;if(_e>=56320&&_e<=57343)return f.lastIntValue=(ie-55296)*1024+(_e-56320)+65536,!0}f.pos=ge,f.lastIntValue=ie}return!0}if(q&&f.eat(123)&&this.regexp_eatHexDigits(f)&&f.eat(125)&&St(f.lastIntValue))return!0;q&&f.raise("Invalid unicode escape"),f.pos=H}return!1};function St(f){return f>=0&&f<=1114111}Ie.regexp_eatIdentityEscape=function(f){if(f.switchU)return this.regexp_eatSyntaxCharacter(f)?!0:f.eat(47)?(f.lastIntValue=47,!0):!1;var N=f.current();return N!==99&&(!f.switchN||N!==107)?(f.lastIntValue=N,f.advance(),!0):!1},Ie.regexp_eatDecimalEscape=function(f){f.lastIntValue=0;var N=f.current();if(N>=49&&N<=57){do f.lastIntValue=10*f.lastIntValue+(N-48),f.advance();while((N=f.current())>=48&&N<=57);return!0}return!1};var Qt=0,At=1,yt=2;Ie.regexp_eatCharacterClassEscape=function(f){var N=f.current();if(Ot(N))return f.lastIntValue=-1,f.advance(),At;var H=!1;if(f.switchU&&this.options.ecmaVersion>=9&&((H=N===80)||N===112)){f.lastIntValue=-1,f.advance();var q;if(f.eat(123)&&(q=this.regexp_eatUnicodePropertyValueExpression(f))&&f.eat(125))return H&&q===yt&&f.raise("Invalid property name"),q;f.raise("Invalid property name")}return Qt};function Ot(f){return f===100||f===68||f===115||f===83||f===119||f===87}Ie.regexp_eatUnicodePropertyValueExpression=function(f){var N=f.pos;if(this.regexp_eatUnicodePropertyName(f)&&f.eat(61)){var H=f.lastStringValue;if(this.regexp_eatUnicodePropertyValue(f)){var q=f.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(f,H,q),At}}if(f.pos=N,this.regexp_eatLoneUnicodePropertyNameOrValue(f)){var ie=f.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(f,ie)}return Qt},Ie.regexp_validateUnicodePropertyNameAndValue=function(f,N,H){oe(f.unicodeProperties.nonBinary,N)||f.raise("Invalid property name"),f.unicodeProperties.nonBinary[N].test(H)||f.raise("Invalid property value")},Ie.regexp_validateUnicodePropertyNameOrValue=function(f,N){if(f.unicodeProperties.binary.test(N))return At;if(f.switchV&&f.unicodeProperties.binaryOfStrings.test(N))return yt;f.raise("Invalid property name")},Ie.regexp_eatUnicodePropertyName=function(f){var N=0;for(f.lastStringValue="";Nt(N=f.current());)f.lastStringValue+=Be(N),f.advance();return f.lastStringValue!==""};function Nt(f){return _t(f)||f===95}Ie.regexp_eatUnicodePropertyValue=function(f){var N=0;for(f.lastStringValue="";Xt(N=f.current());)f.lastStringValue+=Be(N),f.advance();return f.lastStringValue!==""};function Xt(f){return Nt(f)||nr(f)}Ie.regexp_eatLoneUnicodePropertyNameOrValue=function(f){return this.regexp_eatUnicodePropertyValue(f)},Ie.regexp_eatCharacterClass=function(f){if(f.eat(91)){var N=f.eat(94),H=this.regexp_classContents(f);return f.eat(93)||f.raise("Unterminated character class"),N&&H===yt&&f.raise("Negated character class may contain strings"),!0}return!1},Ie.regexp_classContents=function(f){return f.current()===93?At:f.switchV?this.regexp_classSetExpression(f):(this.regexp_nonEmptyClassRanges(f),At)},Ie.regexp_nonEmptyClassRanges=function(f){for(;this.regexp_eatClassAtom(f);){var N=f.lastIntValue;if(f.eat(45)&&this.regexp_eatClassAtom(f)){var H=f.lastIntValue;f.switchU&&(N===-1||H===-1)&&f.raise("Invalid character class"),N!==-1&&H!==-1&&N>H&&f.raise("Range out of order in character class")}}},Ie.regexp_eatClassAtom=function(f){var N=f.pos;if(f.eat(92)){if(this.regexp_eatClassEscape(f))return!0;if(f.switchU){var H=f.current();(H===99||ms(H))&&f.raise("Invalid class escape"),f.raise("Invalid escape")}f.pos=N}var q=f.current();return q!==93?(f.lastIntValue=q,f.advance(),!0):!1},Ie.regexp_eatClassEscape=function(f){var N=f.pos;if(f.eat(98))return f.lastIntValue=8,!0;if(f.switchU&&f.eat(45))return f.lastIntValue=45,!0;if(!f.switchU&&f.eat(99)){if(this.regexp_eatClassControlLetter(f))return!0;f.pos=N}return this.regexp_eatCharacterClassEscape(f)||this.regexp_eatCharacterEscape(f)},Ie.regexp_classSetExpression=function(f){var N=At,H;if(!this.regexp_eatClassSetRange(f))if(H=this.regexp_eatClassSetOperand(f)){H===yt&&(N=yt);for(var q=f.pos;f.eatChars([38,38]);){if(f.current()!==38&&(H=this.regexp_eatClassSetOperand(f))){H!==yt&&(N=At);continue}f.raise("Invalid character in character class")}if(q!==f.pos)return N;for(;f.eatChars([45,45]);)this.regexp_eatClassSetOperand(f)||f.raise("Invalid character in character class");if(q!==f.pos)return N}else f.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(f)){if(H=this.regexp_eatClassSetOperand(f),!H)return N;H===yt&&(N=yt)}},Ie.regexp_eatClassSetRange=function(f){var N=f.pos;if(this.regexp_eatClassSetCharacter(f)){var H=f.lastIntValue;if(f.eat(45)&&this.regexp_eatClassSetCharacter(f)){var q=f.lastIntValue;return H!==-1&&q!==-1&&H>q&&f.raise("Range out of order in character class"),!0}f.pos=N}return!1},Ie.regexp_eatClassSetOperand=function(f){return this.regexp_eatClassSetCharacter(f)?At:this.regexp_eatClassStringDisjunction(f)||this.regexp_eatNestedClass(f)},Ie.regexp_eatNestedClass=function(f){var N=f.pos;if(f.eat(91)){var H=f.eat(94),q=this.regexp_classContents(f);if(f.eat(93))return H&&q===yt&&f.raise("Negated character class may contain strings"),q;f.pos=N}if(f.eat(92)){var ie=this.regexp_eatCharacterClassEscape(f);if(ie)return ie;f.pos=N}return null},Ie.regexp_eatClassStringDisjunction=function(f){var N=f.pos;if(f.eatChars([92,113])){if(f.eat(123)){var H=this.regexp_classStringDisjunctionContents(f);if(f.eat(125))return H}else f.raise("Invalid escape");f.pos=N}return null},Ie.regexp_classStringDisjunctionContents=function(f){for(var N=this.regexp_classString(f);f.eat(124);)this.regexp_classString(f)===yt&&(N=yt);return N},Ie.regexp_classString=function(f){for(var N=0;this.regexp_eatClassSetCharacter(f);)N++;return N===1?At:yt},Ie.regexp_eatClassSetCharacter=function(f){var N=f.pos;if(f.eat(92))return this.regexp_eatCharacterEscape(f)||this.regexp_eatClassSetReservedPunctuator(f)?!0:f.eat(98)?(f.lastIntValue=8,!0):(f.pos=N,!1);var H=f.current();return H<0||H===f.lookahead()&&ii(H)||mi(H)?!1:(f.advance(),f.lastIntValue=H,!0)};function ii(f){return f===33||f>=35&&f<=38||f>=42&&f<=44||f===46||f>=58&&f<=64||f===94||f===96||f===126}function mi(f){return f===40||f===41||f===45||f===47||f>=91&&f<=93||f>=123&&f<=125}Ie.regexp_eatClassSetReservedPunctuator=function(f){var N=f.current();return Pr(N)?(f.lastIntValue=N,f.advance(),!0):!1};function Pr(f){return f===33||f===35||f===37||f===38||f===44||f===45||f>=58&&f<=62||f===64||f===96||f===126}Ie.regexp_eatClassControlLetter=function(f){var N=f.current();return nr(N)||N===95?(f.lastIntValue=N%32,f.advance(),!0):!1},Ie.regexp_eatHexEscapeSequence=function(f){var N=f.pos;if(f.eat(120)){if(this.regexp_eatFixedHexDigits(f,2))return!0;f.switchU&&f.raise("Invalid escape"),f.pos=N}return!1},Ie.regexp_eatDecimalDigits=function(f){var N=f.pos,H=0;for(f.lastIntValue=0;nr(H=f.current());)f.lastIntValue=10*f.lastIntValue+(H-48),f.advance();return f.pos!==N};function nr(f){return f>=48&&f<=57}Ie.regexp_eatHexDigits=function(f){var N=f.pos,H=0;for(f.lastIntValue=0;gs(H=f.current());)f.lastIntValue=16*f.lastIntValue+_s(H),f.advance();return f.pos!==N};function gs(f){return f>=48&&f<=57||f>=65&&f<=70||f>=97&&f<=102}function _s(f){return f>=65&&f<=70?10+(f-65):f>=97&&f<=102?10+(f-97):f-48}Ie.regexp_eatLegacyOctalEscapeSequence=function(f){if(this.regexp_eatOctalDigit(f)){var N=f.lastIntValue;if(this.regexp_eatOctalDigit(f)){var H=f.lastIntValue;N<=3&&this.regexp_eatOctalDigit(f)?f.lastIntValue=N*64+H*8+f.lastIntValue:f.lastIntValue=N*8+H}else f.lastIntValue=N;return!0}return!1},Ie.regexp_eatOctalDigit=function(f){var N=f.current();return ms(N)?(f.lastIntValue=N-48,f.advance(),!0):(f.lastIntValue=0,!1)};function ms(f){return f>=48&&f<=55}Ie.regexp_eatFixedHexDigits=function(f,N){var H=f.pos;f.lastIntValue=0;for(var q=0;q<N;++q){var ie=f.current();if(!gs(ie))return f.pos=H,!1;f.lastIntValue=16*f.lastIntValue+_s(ie),f.advance()}return!0};var rr=function(N){this.type=N.type,this.value=N.value,this.start=N.start,this.end=N.end,N.options.locations&&(this.loc=new zt(N,N.startLoc,N.endLoc)),N.options.ranges&&(this.range=[N.start,N.end])},rt=e.prototype;rt.next=function(f){!f&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new rr(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},rt.getToken=function(){return this.next(),new rr(this)},typeof Symbol!="undefined"&&(rt[Symbol.iterator]=function(){var f=this;return{next:function(){var N=f.getToken();return{done:N.type===B.eof,value:N}}}}),rt.nextToken=function(){var f=this.curContext();if((!f||!f.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(B.eof);if(f.override)return f.override(this);this.readToken(this.fullCharCodeAtPos())},rt.readToken=function(f){return ue(f,this.options.ecmaVersion>=6)||f===92?this.readWord():this.getTokenFromCode(f)},rt.fullCharCodeAtPos=function(){var f=this.input.charCodeAt(this.pos);if(f<=55295||f>=56320)return f;var N=this.input.charCodeAt(this.pos+1);return N<=56319||N>=57344?f:(f<<10)+N-56613888},rt.skipBlockComment=function(){var f=this.options.onComment&&this.curPosition(),N=this.pos,H=this.input.indexOf("*/",this.pos+=2);if(H===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=H+2,this.options.locations)for(var q=void 0,ie=N;(q=He(this.input,ie,this.pos))>-1;)++this.curLine,ie=this.lineStart=q;this.options.onComment&&this.options.onComment(!0,this.input.slice(N+2,H),N,this.pos,f,this.curPosition())},rt.skipLineComment=function(f){for(var N=this.pos,H=this.options.onComment&&this.curPosition(),q=this.input.charCodeAt(this.pos+=f);this.pos<this.input.length&&!Ve(q);)q=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(N+f,this.pos),N,this.pos,H,this.curPosition())},rt.skipSpace=function(){e:for(;this.pos<this.input.length;){var f=this.input.charCodeAt(this.pos);switch(f){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(f>8&&f<14||f>=5760&&ht.test(String.fromCharCode(f)))++this.pos;else break e}}},rt.finishToken=function(f,N){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var H=this.type;this.type=f,this.value=N,this.updateContext(H)},rt.readToken_dot=function(){var f=this.input.charCodeAt(this.pos+1);if(f>=48&&f<=57)return this.readNumber(!0);var N=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&f===46&&N===46?(this.pos+=3,this.finishToken(B.ellipsis)):(++this.pos,this.finishToken(B.dot))},rt.readToken_slash=function(){var f=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):f===61?this.finishOp(B.assign,2):this.finishOp(B.slash,1)},rt.readToken_mult_modulo_exp=function(f){var N=this.input.charCodeAt(this.pos+1),H=1,q=f===42?B.star:B.modulo;return this.options.ecmaVersion>=7&&f===42&&N===42&&(++H,q=B.starstar,N=this.input.charCodeAt(this.pos+2)),N===61?this.finishOp(B.assign,H+1):this.finishOp(q,H)},rt.readToken_pipe_amp=function(f){var N=this.input.charCodeAt(this.pos+1);if(N===f){if(this.options.ecmaVersion>=12){var H=this.input.charCodeAt(this.pos+2);if(H===61)return this.finishOp(B.assign,3)}return this.finishOp(f===124?B.logicalOR:B.logicalAND,2)}return N===61?this.finishOp(B.assign,2):this.finishOp(f===124?B.bitwiseOR:B.bitwiseAND,1)},rt.readToken_caret=function(){var f=this.input.charCodeAt(this.pos+1);return f===61?this.finishOp(B.assign,2):this.finishOp(B.bitwiseXOR,1)},rt.readToken_plus_min=function(f){var N=this.input.charCodeAt(this.pos+1);return N===f?N===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Te.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(B.incDec,2):N===61?this.finishOp(B.assign,2):this.finishOp(B.plusMin,1)},rt.readToken_lt_gt=function(f){var N=this.input.charCodeAt(this.pos+1),H=1;return N===f?(H=f===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+H)===61?this.finishOp(B.assign,H+1):this.finishOp(B.bitShift,H)):N===33&&f===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(N===61&&(H=2),this.finishOp(B.relational,H))},rt.readToken_eq_excl=function(f){var N=this.input.charCodeAt(this.pos+1);return N===61?this.finishOp(B.equality,this.input.charCodeAt(this.pos+2)===61?3:2):f===61&&N===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(B.arrow)):this.finishOp(f===61?B.eq:B.prefix,1)},rt.readToken_question=function(){var f=this.options.ecmaVersion;if(f>=11){var N=this.input.charCodeAt(this.pos+1);if(N===46){var H=this.input.charCodeAt(this.pos+2);if(H<48||H>57)return this.finishOp(B.questionDot,2)}if(N===63){if(f>=12){var q=this.input.charCodeAt(this.pos+2);if(q===61)return this.finishOp(B.assign,3)}return this.finishOp(B.coalesce,2)}}return this.finishOp(B.question,1)},rt.readToken_numberSign=function(){var f=this.options.ecmaVersion,N=35;if(f>=13&&(++this.pos,N=this.fullCharCodeAtPos(),ue(N,!0)||N===92))return this.finishToken(B.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Be(N)+"'")},rt.getTokenFromCode=function(f){switch(f){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(B.parenL);case 41:return++this.pos,this.finishToken(B.parenR);case 59:return++this.pos,this.finishToken(B.semi);case 44:return++this.pos,this.finishToken(B.comma);case 91:return++this.pos,this.finishToken(B.bracketL);case 93:return++this.pos,this.finishToken(B.bracketR);case 123:return++this.pos,this.finishToken(B.braceL);case 125:return++this.pos,this.finishToken(B.braceR);case 58:return++this.pos,this.finishToken(B.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(B.backQuote);case 48:var N=this.input.charCodeAt(this.pos+1);if(N===120||N===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(N===111||N===79)return this.readRadixNumber(8);if(N===98||N===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(f);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(f);case 124:case 38:return this.readToken_pipe_amp(f);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(f);case 60:case 62:return this.readToken_lt_gt(f);case 61:case 33:return this.readToken_eq_excl(f);case 63:return this.readToken_question();case 126:return this.finishOp(B.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Be(f)+"'")},rt.finishOp=function(f,N){var H=this.input.slice(this.pos,this.pos+N);return this.pos+=N,this.finishToken(f,H)},rt.readRegexp=function(){for(var f,N,H=this.pos;;){this.pos>=this.input.length&&this.raise(H,"Unterminated regular expression");var q=this.input.charAt(this.pos);if(Te.test(q)&&this.raise(H,"Unterminated regular expression"),f)f=!1;else{if(q==="[")N=!0;else if(q==="]"&&N)N=!1;else if(q==="/"&&!N)break;f=q==="\\"}++this.pos}var ie=this.input.slice(H,this.pos);++this.pos;var ge=this.pos,_e=this.readWord1();this.containsEsc&&this.unexpected(ge);var Ae=this.regexpState||(this.regexpState=new Je(this));Ae.reset(H,ie,_e),this.validateRegExpFlags(Ae),this.validateRegExpPattern(Ae);var Fe=null;try{Fe=new RegExp(ie,_e)}catch(it){}return this.finishToken(B.regexp,{pattern:ie,flags:_e,value:Fe})},rt.readInt=function(f,N,H){for(var q=this.options.ecmaVersion>=12&&N===void 0,ie=H&&this.input.charCodeAt(this.pos)===48,ge=this.pos,_e=0,Ae=0,Fe=0,it=N==null?1/0:N;Fe<it;++Fe,++this.pos){var at=this.input.charCodeAt(this.pos),jt=void 0;if(q&&at===95){ie&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Ae===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Fe===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Ae=at;continue}if(at>=97?jt=at-97+10:at>=65?jt=at-65+10:at>=48&&at<=57?jt=at-48:jt=1/0,jt>=f)break;Ae=at,_e=_e*f+jt}return q&&Ae===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===ge||N!=null&&this.pos-ge!==N?null:_e};function vs(f,N){return N?parseInt(f,8):parseFloat(f.replace(/_/g,""))}function sr(f){return typeof BigInt!="function"?null:BigInt(f.replace(/_/g,""))}rt.readRadixNumber=function(f){var N=this.pos;this.pos+=2;var H=this.readInt(f);return H==null&&this.raise(this.start+2,"Expected number in radix "+f),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(H=sr(this.input.slice(N,this.pos)),++this.pos):ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(B.num,H)},rt.readNumber=function(f){var N=this.pos;!f&&this.readInt(10,void 0,!0)===null&&this.raise(N,"Invalid number");var H=this.pos-N>=2&&this.input.charCodeAt(N)===48;H&&this.strict&&this.raise(N,"Invalid number");var q=this.input.charCodeAt(this.pos);if(!H&&!f&&this.options.ecmaVersion>=11&&q===110){var ie=sr(this.input.slice(N,this.pos));return++this.pos,ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(B.num,ie)}H&&/[89]/.test(this.input.slice(N,this.pos))&&(H=!1),q===46&&!H&&(++this.pos,this.readInt(10),q=this.input.charCodeAt(this.pos)),(q===69||q===101)&&!H&&(q=this.input.charCodeAt(++this.pos),(q===43||q===45)&&++this.pos,this.readInt(10)===null&&this.raise(N,"Invalid number")),ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var ge=vs(this.input.slice(N,this.pos),H);return this.finishToken(B.num,ge)},rt.readCodePoint=function(){var f=this.input.charCodeAt(this.pos),N;if(f===123){this.options.ecmaVersion<6&&this.unexpected();var H=++this.pos;N=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,N>1114111&&this.invalidStringToken(H,"Code point out of bounds")}else N=this.readHexChar(4);return N},rt.readString=function(f){for(var N="",H=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var q=this.input.charCodeAt(this.pos);if(q===f)break;q===92?(N+=this.input.slice(H,this.pos),N+=this.readEscapedChar(!1),H=this.pos):q===8232||q===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ve(q)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return N+=this.input.slice(H,this.pos++),this.finishToken(B.string,N)};var ar={};rt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(f){if(f===ar)this.readInvalidTemplateToken();else throw f}this.inTemplateElement=!1},rt.invalidStringToken=function(f,N){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw ar;this.raise(f,N)},rt.readTmplToken=function(){for(var f="",N=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var H=this.input.charCodeAt(this.pos);if(H===96||H===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===B.template||this.type===B.invalidTemplate)?H===36?(this.pos+=2,this.finishToken(B.dollarBraceL)):(++this.pos,this.finishToken(B.backQuote)):(f+=this.input.slice(N,this.pos),this.finishToken(B.template,f));if(H===92)f+=this.input.slice(N,this.pos),f+=this.readEscapedChar(!0),N=this.pos;else if(Ve(H)){switch(f+=this.input.slice(N,this.pos),++this.pos,H){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:f+=`
`;break;default:f+=String.fromCharCode(H);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),N=this.pos}else++this.pos}},rt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(B.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},rt.readEscapedChar=function(f){var N=this.input.charCodeAt(++this.pos);switch(++this.pos,N){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Be(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),f){var H=this.pos-1;this.invalidStringToken(H,"Invalid escape sequence in template string")}default:if(N>=48&&N<=55){var q=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],ie=parseInt(q,8);return ie>255&&(q=q.slice(0,-1),ie=parseInt(q,8)),this.pos+=q.length-1,N=this.input.charCodeAt(this.pos),(q!=="0"||N===56||N===57)&&(this.strict||f)&&this.invalidStringToken(this.pos-1-q.length,f?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(ie)}return Ve(N)?"":String.fromCharCode(N)}},rt.readHexChar=function(f){var N=this.pos,H=this.readInt(16,f);return H===null&&this.invalidStringToken(N,"Bad character escape sequence"),H},rt.readWord1=function(){this.containsEsc=!1;for(var f="",N=!0,H=this.pos,q=this.options.ecmaVersion>=6;this.pos<this.input.length;){var ie=this.fullCharCodeAtPos();if(ee(ie,q))this.pos+=ie<=65535?1:2;else if(ie===92){this.containsEsc=!0,f+=this.input.slice(H,this.pos);var ge=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var _e=this.readCodePoint();(N?ue:ee)(_e,q)||this.invalidStringToken(ge,"Invalid Unicode escape"),f+=Be(_e),H=this.pos}else break;N=!1}return f+this.input.slice(H,this.pos)},rt.readWord=function(){var f=this.readWord1(),N=B.name;return this.keywords.test(f)&&(N=pe[f]),this.finishToken(N,f)};var un="8.11.3";e.acorn={Parser:e,version:un,defaultOptions:We,Position:ut,SourceLocation:zt,getLineInfo:Kt,Node:R,TokenType:ce,tokTypes:B,keywordTypes:pe,TokContext:I,tokContexts:k,isIdentifierChar:ee,isIdentifierStart:ue,Token:rr,isNewLine:Ve,lineBreak:Te,lineBreakG:ke,nonASCIIwhitespace:ht};function hn(f,N){return e.parse(f,N)}function Ri(f,N,H){return e.parseExpressionAt(f,N,H)}function Ni(f,N){return e.tokenizer(f,N)}a.Node=R,a.Parser=e,a.Position=ut,a.SourceLocation=zt,a.TokContext=I,a.Token=rr,a.TokenType=ce,a.defaultOptions=We,a.getLineInfo=Kt,a.isIdentifierChar=ee,a.isIdentifierStart=ue,a.isNewLine=Ve,a.keywordTypes=pe,a.lineBreak=Te,a.lineBreakG=ke,a.nonASCIIwhitespace=ht,a.parse=hn,a.parseExpressionAt=Ri,a.tokContexts=k,a.tokTypes=B,a.tokenizer=Ni,a.version=un})}(ba,ba.exports)),ba.exports}/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(n){(function(i,a){i=i||ro;var u=i.window,g=i.document,h=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],r=t.slice,o=Object.create,l=Object.getOwnPropertyDescriptor,c=Object.defineProperty,d=t.forEach||function(v,C){for(var P=0,I=this.length;P<I;P++)v.call(C,this[P],P,this)},p=function(v,C){for(var P in this)this.hasOwnProperty(P)&&v.call(C,this[P],P,this)},_=Object.assign||function(v){for(var C=1,P=arguments.length;C<P;C++){var I=arguments[C];for(var k in I)I.hasOwnProperty(k)&&(v[k]=I[k])}return v},m=function(v,C,P){if(v){var I=l(v,"length");(I&&typeof I.value=="number"?d:p).call(v,C,P=P||v)}return P};function w(v,C,P,I,k){var b={};function x(L,R){R=R||(R=l(C,L))&&(R.get?R:R.value),typeof R=="string"&&R[0]==="#"&&(R=v[R.substring(1)]||R);var F=typeof R=="function",U=R,G=k||F&&!R.base?R&&R.get?L in v:v[L]:null,V;(!k||!G)&&(F&&G&&(R.base=G),F&&I!==!1&&(V=L.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(b[V[3].toLowerCase()+V[4]]=V[2]),(!U||F||!U.get||typeof U.get!="function"||!y.isPlainObject(U))&&(U={value:U,writable:!0}),(l(v,L)||{configurable:!0}).configurable&&(U.configurable=!0,U.enumerable=P!=null?P:!V),c(v,L,U))}if(C){for(var S in C)C.hasOwnProperty(S)&&!e.test(S)&&x(S);for(var S in b){var E=b[S],A=v["set"+E],O=v["get"+E]||A&&v["is"+E];O&&(I===!0||O.length===0)&&x(S,{get:O,set:A})}}return v}function y(){for(var v=0,C=arguments.length;v<C;v++){var P=arguments[v];P&&_(this,P)}return this}return w(y,{inject:function(v){if(v){var C=v.statics===!0?v:v.statics,P=v.beans,I=v.preserve;C!==v&&w(this.prototype,v,v.enumerable,P,I),w(this,C,null,P,I)}for(var k=1,b=arguments.length;k<b;k++)this.inject(arguments[k]);return this},extend:function(){for(var v=this,C,P,I=0,k,b=arguments.length;I<b&&!(C&&P);I++)k=arguments[I],C=C||k.initialize,P=P||k.prototype;return C=C||function(){v.apply(this,arguments)},P=C.prototype=P||o(this.prototype),c(P,"constructor",{value:C,writable:!0,configurable:!0}),w(C,this),arguments.length&&this.inject.apply(C,arguments),C.base=v,C}}).inject({enumerable:!1,initialize:y,set:y,inject:function(){for(var v=0,C=arguments.length;v<C;v++){var P=arguments[v];P&&w(this,P,P.enumerable,P.beans,P.preserve)}return this},extend:function(){var v=o(this);return v.inject.apply(v,arguments)},each:function(v,C){return m(this,v,C)},clone:function(){return new this.constructor(this)},statics:{set:_,each:m,create:o,define:c,describe:l,clone:function(v){return _(new v.constructor,v)},isPlainObject:function(v){var C=v!=null&&v.constructor;return C&&(C===Object||C===y||C.name==="Object")},pick:function(v,C){return v!==a?v:C},slice:function(v,C,P){return r.call(v,C,P)}}})};n.exports=h,h.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+h.each(this,function(e,t){if(!/^_/.test(t)){var r=typeof e;this.push(t+": "+(r==="number"?K.instance.number(e):r==="string"?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return h.importJSON(e,this)},exportJSON:function(e){return h.exportJSON(this,e)},toJSON:function(){return h.serialize(this)},set:function(e,t){return e&&h.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),r=t.prototype._class;return r&&!h.exports[r]&&(h.exports[r]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&typeof e=="object"&&typeof t=="object"){if(Array.isArray(e)&&Array.isArray(t)){var r=e.length;if(r!==t.length)return!1;for(;r--;)if(!h.equals(e[r],t[r]))return!1}else{var o=Object.keys(e),r=o.length;if(r!==Object.keys(t).length)return!1;for(;r--;){var l=o[r];if(!(t.hasOwnProperty(l)&&h.equals(e[l],t[l])))return!1}}return!0}return!1},read:function(e,t,r,o){if(this===h){var l=this.peek(e,t);return e.__index++,l}var c=this.prototype,d=c._readIndex,p=t||d&&e.__index||0,_=e.length,m=e[p];if(o=o||_-p,m instanceof this||r&&r.readNull&&m==null&&o<=1)return d&&(e.__index=p+1),m&&r&&r.clone?m.clone():m;if(m=h.create(c),d&&(m.__read=!0),m=m.initialize.apply(m,p>0||p+o<_?h.slice(e,p,p+o):e)||m,d){e.__index=p+m.__read;var w=m.__filtered;w&&(e.__filtered=w,m.__filtered=a),m.__read=a}return m},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,r,o){for(var l=[],c,d=t||0,p=o?d+o:e.length,_=d;_<p;_++)l.push(Array.isArray(c=e[_])?this.read(c,0,r):this.read(e,_,r,1));return l},readNamed:function(e,t,r,o,l){var c=this.getNamed(e,t),d=c!==a;if(d){var p=e.__filtered;if(!p){var _=this.getSource(e);p=e.__filtered=h.create(_),p.__unfiltered=_}p[t]=a}return this.read(d?[c]:e,r,o,l)},readSupported:function(e,t){var r=this.getSource(e),o=this,l=!1;return r&&Object.keys(r).forEach(function(c){if(c in t){var d=o.readNamed(e,c);d!==a&&(t[c]=d),l=!0}}),l},getSource:function(e){var t=e.__source;if(t===a){var r=e.length===1&&e[0];t=e.__source=r&&h.isPlainObject(r)?r:null}return t},getNamed:function(e,t){var r=this.getSource(e);if(r)return t?r[t]:e.__filtered||r},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,r,o){var l;function c(w){if(!(r&&w in r)&&!(l&&w in l)){var y=t[w];y!==a&&(e[w]=y)}}if(o){for(var d={},p=0,_,m=o.length;p<m;p++)(_=o[p])in t&&(c(_),d[_]=!0);l=d}return Object.keys(t.__unfiltered||t).forEach(c),e},isPlainValue:function(e,t){return h.isPlainObject(e)||Array.isArray(e)||t&&typeof e=="string"},serialize:function(e,t,r,o){t=t||{};var l=!o,c;if(l&&(t.formatter=new K(t.precision),o={length:0,definitions:{},references:{},add:function(y,v){var C="#"+y._id,P=this.references[C];if(!P){this.length++;var I=v.call(y),k=y._class;k&&I[0]!==k&&I.unshift(k),this.definitions[C]=I,P=this.references[C]=[C]}return P}}),e&&e._serialize){c=e._serialize(t,o);var d=e._class;d&&!e._compactSerialize&&(l||!r)&&c[0]!==d&&c.unshift(d)}else if(Array.isArray(e)){c=[];for(var p=0,_=e.length;p<_;p++)c[p]=h.serialize(e[p],t,r,o)}else if(h.isPlainObject(e)){c={};for(var m=Object.keys(e),p=0,_=m.length;p<_;p++){var w=m[p];c[w]=h.serialize(e[w],t,r,o)}}else typeof e=="number"?c=t.formatter.number(e,t.precision):c=e;return l&&o.length>0?[["dictionary",o.definitions],c]:c},deserialize:function(e,t,r,o,l){var c=e,d=!r,p=d&&e&&e.length&&e[0][0]==="dictionary";if(r=r||{},Array.isArray(e)){var _=e[0],m=_==="dictionary";if(e.length==1&&/^#/.test(_))return r.dictionary[_];_=h.exports[_],c=[];for(var w=_?1:0,y=e.length;w<y;w++)c.push(h.deserialize(e[w],t,r,m,p));if(_){var v=c;t?c=t(_,v,d||l):c=new _(v)}}else if(h.isPlainObject(e)){c={},o&&(r.dictionary=c);for(var C in e)c[C]=h.deserialize(e[C],t,r)}return p?c[1]:c},exportJSON:function(e,t){var r=h.serialize(e,t);return t&&t.asString==!1?r:JSON.stringify(r)},importJSON:function(e,t){return h.deserialize(typeof e=="string"?JSON.parse(e):e,function(r,o,l){var c=l&&t&&t.constructor===r,d=c?t:h.create(r.prototype);if(o.length===1&&d instanceof B&&(c||!(d instanceof ke))){var p=o[0];h.isPlainObject(p)&&(p.insert=!1,c&&(o=o.concat([B.INSERT])))}return(c?d.set:r).apply(d,o),c&&(t=null),d})},push:function(e,t){var r=t.length;if(r<4096)e.push.apply(e,t);else{var o=e.length;e.length+=r;for(var l=0;l<r;l++)e[o+l]=t[l]}return e},splice:function(e,t,r,o){var l=t&&t.length,c=r===a;r=c?e.length:r,r>e.length&&(r=e.length);for(var d=0;d<l;d++)t[d]._index=r+d;if(c)return h.push(e,t),[];var p=[r,o];t&&h.push(p,t);for(var _=e.splice.apply(e,p),d=0,m=_.length;d<m;d++)_[d]._index=a;for(var d=r+l,m=e.length;d<m;d++)e[d]._index=d;return _},capitalize:function(e){return e.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(t,r){return r.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var T={on:function(e,t){if(typeof e!="string")h.each(e,function(c,d){this.on(d,c)},this);else{var r=this._eventTypes,o=r&&r[e],l=this._callbacks=this._callbacks||{};l=l[e]=l[e]||[],l.indexOf(t)===-1&&(l.push(t),o&&o.install&&l.length===1&&o.install.call(this,e))}return this},off:function(e,t){if(typeof e!="string"){h.each(e,function(d,p){this.off(p,d)},this);return}var r=this._eventTypes,o=r&&r[e],l=this._callbacks&&this._callbacks[e],c;return l&&(!t||(c=l.indexOf(t))!==-1&&l.length===1?(o&&o.uninstall&&o.uninstall.call(this,e),delete this._callbacks[e]):c!==-1&&l.splice(c,1)),this},once:function(e,t){return this.on(e,function r(){t.apply(this,arguments),this.off(e,r)})},emit:function(e,t){var r=this._callbacks&&this._callbacks[e];if(!r)return!1;var o=h.slice(arguments,1),l=t&&t.target&&!t.currentTarget;r=r.slice(),l&&(t.currentTarget=this);for(var c=0,d=r.length;c<d;c++)if(r[c].apply(this,o)==!1){t&&t.stop&&t.stop();break}return l&&delete t.currentTarget,!0},responds:function(e){return!!(this._callbacks&&this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,r=this._callbacks,o=e?"install":"uninstall";if(t){for(var l in r)if(r[l].length>0){var c=t[l],d=c&&c[o];d&&d.call(this,l)}}},statics:{inject:function e(t){var r=t._events;if(r){var o={};h.each(r,function(l,c){var d=typeof l=="string",p=d?l:c,_=h.capitalize(p),m=p.substring(2).toLowerCase();o[m]=d?{}:l,p="_"+p,t["get"+_]=function(){return this[p]},t["set"+_]=function(w){var y=this[p];y&&this.off(m,y),w&&this.on(m,w),this[p]=w}}),t._eventTypes=o}return e.base.apply(this,arguments)}}},M=h.extend({_class:"PaperScope",initialize:function e(){s=this,this.settings=new h({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var r=Pt.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in r||"mozDash"in r,nativeBlendModes:pt.nativeModes},Pt.release(r)}if(!this.agent){var o=i.navigator.userAgent.toLowerCase(),l=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(o)||[])[0],c=l==="darwin"?"mac":l,d=t.agent=t.browser={platform:c};c&&(d[c]=!0),o.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(p,_,m,w,y){if(!d.chrome){var v=_==="opera"?w:/^(node|trident)$/.test(_)?y:m;d.version=v,d.versionNumber=parseFloat(v),_={trident:"msie",jsdom:"node"}[_]||_,d.name=_,d[_]=!0}}),d.chrome&&delete d.webkit,d.atom&&delete d.chrome}},version:"0.12.17",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var r=s.PaperScript.execute(e,this,t);return Ye.updateFocus(),r},install:function(e){var t=this;h.each(["project","view","tool"],function(o){h.define(e,o,{configurable:!0,get:function(){return t[o]}})});for(var r in this)!/^_/.test(r)&&this[r]&&(e[r]=this[r])},setup:function(e){return s=this,this.project=new ye(e),this},createCanvas:function(e,t){return Pt.getCanvas(e,t)},activate:function(){s=this},clear:function(){for(var e=this.projects,t=this.tools,r=e.length-1;r>=0;r--)e[r].remove();for(var r=t.length-1;r>=0;r--)t[r].remove()},remove:function(){this.clear(),delete M._scopes[this._id]},statics:new function(){function e(t){return t+="Attribute",function(r,o){return r[t](o)||r[t]("data-paper-"+o)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),z=h.extend(T,{initialize:function(e){this._scope=s,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(h.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),W={findItemBoundsCollisions:function(e,t,r){function o(d){for(var p=new Array(d.length),_=0;_<d.length;_++){var m=d[_].getBounds();p[_]=[m.left,m.top,m.right,m.bottom]}return p}var l=o(e),c=!t||t===e?l:o(t);return this.findBoundsCollisions(l,c,r||0)},findCurveBoundsCollisions:function(e,t,r,o){function l(v){for(var C=Math.min,P=Math.max,I=new Array(v.length),k=0;k<v.length;k++){var b=v[k];I[k]=[C(b[0],b[2],b[4],b[6]),C(b[1],b[3],b[5],b[7]),P(b[0],b[2],b[4],b[6]),P(b[1],b[3],b[5],b[7])]}return I}var c=l(e),d=!t||t===e?c:l(t);if(o){for(var p=this.findBoundsCollisions(c,d,r||0,!1,!0),_=this.findBoundsCollisions(c,d,r||0,!0,!0),m=[],w=0,y=p.length;w<y;w++)m[w]={hor:p[w],ver:_[w]};return m}return this.findBoundsCollisions(c,d,r||0)},findBoundsCollisions:function(e,t,r,o,l){var c=!t||e===t,d=c?e:e.concat(t),p=e.length,_=d.length;function m(de,ve,we){for(var he=0,fe=de.length;he<fe;){var xe=fe+he>>>1;d[de[xe]][ve]<we?he=xe+1:fe=xe}return he-1}for(var w=o?1:0,y=w+2,v=o?0:1,C=v+2,P=new Array(_),I=0;I<_;I++)P[I]=I;P.sort(function(de,ve){return d[de][w]-d[ve][w]});for(var k=[],b=new Array(p),I=0;I<_;I++){var x=P[I],S=d[x],E=c?x:x-p,A=x<p,O=c||!A,L=A?[]:null;if(k.length){var R=m(k,y,S[w]-r)+1;if(k.splice(0,R),c&&l){L=L.concat(k);for(var F=0;F<k.length;F++){var U=k[F];b[U].push(E)}}else for(var G=S[C],V=S[v],F=0;F<k.length;F++){var U=k[F],j=d[U],Q=U<p,Z=c||U>=p;(l||(A&&Z||O&&Q)&&G>=j[v]-r&&V<=j[C]+r)&&(A&&Z&&L.push(c?U:U-p),O&&Q&&b[U].push(E))}}if(A&&(e===t&&L.push(x),b[x]=L),k.length){var Y=S[y],re=m(k,y,Y);k.splice(re+1,0,x)}else k.push(x)}for(var I=0;I<b.length;I++){var le=b[I];le&&le.sort(function(ve,we){return ve-we})}return b}},K=h.extend({initialize:function(e){this.precision=h.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,r){return this.number(e)+(r||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});K.instance=new K;var X=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],r=Math.abs,o=Math.sqrt,l=Math.pow,c=Math.log2||function(y){return Math.log(y)*Math.LOG2E},d=1e-12,p=112e-18;function _(y,v,C){return y<v?v:y>C?C:y}function m(y,v,C){function P(R){var F=R*134217729,U=R-F,G=U+F,V=R-G;return[G,V]}var I=v*v-y*C,k=v*v+y*C;if(r(I)*3<k){var b=P(y),x=P(v),S=P(C),E=v*v,A=x[0]*x[0]-E+2*x[0]*x[1]+x[1]*x[1],O=y*C,L=b[0]*S[0]-O+b[0]*S[1]+b[1]*S[0]+b[1]*S[1];I=E-O+(A-L)}return I}function w(){var y=Math.max.apply(Math,arguments);return y&&(y<1e-8||y>1e8)?l(2,-Math.round(c(y))):0}return{EPSILON:d,MACHINE_EPSILON:p,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(o(2)-1)/3,isZero:function(y){return y>=-d&&y<=d},isMachineZero:function(y){return y>=-p&&y<=p},clamp:_,integrate:function(y,v,C,P){for(var I=e[P-2],k=t[P-2],b=(C-v)*.5,x=b+v,S=0,E=P+1>>1,A=P&1?k[S++]*y(x):0;S<E;){var O=b*I[S];A+=k[S++]*(y(x+O)+y(x-O))}return b*A},findRoot:function(y,v,C,P,I,k,b){for(var x=0;x<k;x++){var S=y(C),E=S/v(C),A=C-E;if(r(E)<b){C=A;break}S>0?(I=C,C=A<=P?(P+I)*.5:A):(P=C,C=A>=I?(P+I)*.5:A)}return _(C,P,I)},solveQuadratic:function(y,v,C,P,I,k){var b,x=1/0;if(r(y)<d){if(r(v)<d)return r(C)<d?-1:0;b=-C/v}else{v*=-.5;var S=m(y,v,C);if(S&&r(S)<p){var E=w(r(y),r(v),r(C));E&&(y*=E,v*=E,C*=E,S=m(y,v,C))}if(S>=-p){var A=S<0?0:o(S),O=v+(v<0?-A:A);O===0?(b=C/y,x=-b):(b=O/y,x=C/O)}}var L=0,R=I==null,F=I-d,U=k+d;return isFinite(b)&&(R||b>F&&b<U)&&(P[L++]=R?b:_(b,I,k)),x!==b&&isFinite(x)&&(R||x>F&&x<U)&&(P[L++]=R?x:_(x,I,k)),L},solveCubic:function(y,v,C,P,I,k,b){var x=w(r(y),r(v),r(C),r(P)),S,E,A,O,L;x&&(y*=x,v*=x,C*=x,P*=x);function R(re){S=re;var le=y*S;E=le+v,A=E*S+C,O=(le+E)*S+A,L=A*S+P}if(r(y)<d)y=v,E=C,A=P,S=1/0;else if(r(P)<d)E=v,A=C,S=0;else{R(-(v/y)/3);var F=L/y,U=l(r(F),1/3),G=F<0?-1:1,V=-O/y,j=V>0?1.324717957244746*Math.max(U,o(V)):U,Q=S-G*j;if(Q!==S){do R(Q),Q=O===0?S:S-L/O/(1+p);while(G*Q>G*S);r(y)*S*S>r(P/S)&&(A=-P/S,E=(A-C)/S)}}var Z=X.solveQuadratic(y,E,A,I,k,b),Y=k==null;return isFinite(S)&&(Z===0||Z>0&&S!==I[0]&&S!==I[1])&&(Y||S>k-d&&S<b+d)&&(I[Z++]=Y?S:_(S,k,b)),Z}}},ne={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}else return this._id++}},D=h.extend({_class:"Point",_readIndex:!0,initialize:function(t,r){var o=typeof t,l=this.__read,c=0;if(o==="number"){var d=typeof r=="number";this._set(t,d?r:t),l&&(c=d?2:1)}else if(o==="undefined"||t===null)this._set(0,0),l&&(c=t===null?1:0);else{var p=o==="string"?t.split(/[\s,]+/)||[]:t;c=1,Array.isArray(p)?this._set(+p[0],+(p.length>1?p[1]:p[0])):"x"in p?this._set(p.x||0,p.y||0):"width"in p?this._set(p.width||0,p.height||0):"angle"in p?(this._set(p.length||0,0),this.setAngle(p.angle||0)):(this._set(0,0),c=0)}return l&&(this.__read=c),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new D(this.x,this.y)},toString:function(){var e=K.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var r=e/this.getLength();X.isZero(r)&&this.getAngle(),this._set(this.x*r,this.y*r)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=D.read(arguments),t=this.getLength()*e.getLength();if(X.isZero(t))return NaN;var r=this.dot(e)/t;return Math.acos(r<-1?-1:r>1?1:r)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=D.read(arguments);return Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},getDistance:function(){var e=arguments,t=D.read(e),r=t.x-this.x,o=t.y-this.y,l=r*r+o*o,c=h.read(e);return c?l:Math.sqrt(l)},normalize:function(e){e===a&&(e=1);var t=this.getLength(),r=t!==0?e/t:0,o=new D(this.x*r,this.y*r);return r>=0&&(o._angle=this._angle),o},rotate:function(e,t){if(e===0)return this.clone();e=e*Math.PI/180;var r=t?this.subtract(t):this,o=Math.sin(e),l=Math.cos(e);return r=new D(r.x*l-r.y*o,r.x*o+r.y*l),t?r.add(t):r},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=D.read(arguments);return new D(this.x+e.x,this.y+e.y)},subtract:function(){var e=D.read(arguments);return new D(this.x-e.x,this.y-e.y)},multiply:function(){var e=D.read(arguments);return new D(this.x*e.x,this.y*e.y)},divide:function(){var e=D.read(arguments);return new D(this.x/e.x,this.y/e.y)},modulo:function(){var e=D.read(arguments);return new D(this.x%e.x,this.y%e.y)},negate:function(){return new D(-this.x,-this.y)},isInside:function(){return $.read(arguments).contains(this)},isClose:function(){var e=arguments,t=D.read(e),r=h.read(e);return this.getDistance(t)<=r},isCollinear:function(){var e=D.read(arguments);return D.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=D.read(arguments);return D.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=X.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=D.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=D.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=D.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new D(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=D.read(e),r=D.read(e);return new D(Math.min(t.x,r.x),Math.min(t.y,r.y))},max:function(){var e=arguments,t=D.read(e),r=D.read(e);return new D(Math.max(t.x,r.x),Math.max(t.y,r.y))},random:function(){return new D(Math.random(),Math.random())},isCollinear:function(e,t,r,o){return Math.abs(e*o-t*r)<=Math.sqrt((e*e+t*t)*(r*r+o*o))*1e-8},isOrthogonal:function(e,t,r,o){return Math.abs(e*r+t*o)<=Math.sqrt((e*e+t*t)*(r*r+o*o))*1e-8}}},h.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new D(t(this.x),t(this.y))}},{})),ue=D.extend({initialize:function(t,r,o,l){this._x=t,this._y=r,this._owner=o,this._setter=l},_set:function(e,t,r){return this._x=e,this._y=t,r||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),ee=h.extend({_class:"Size",_readIndex:!0,initialize:function(t,r){var o=typeof t,l=this.__read,c=0;if(o==="number"){var d=typeof r=="number";this._set(t,d?r:t),l&&(c=d?2:1)}else if(o==="undefined"||t===null)this._set(0,0),l&&(c=t===null?1:0);else{var p=o==="string"?t.split(/[\s,]+/)||[]:t;c=1,Array.isArray(p)?this._set(+p[0],+(p.length>1?p[1]:p[0])):"width"in p?this._set(p.width||0,p.height||0):"x"in p?this._set(p.x||0,p.y||0):(this._set(0,0),c=0)}return l&&(this.__read=c),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new ee(this.width,this.height)},toString:function(){var e=K.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=ee.read(arguments);return new ee(this.width+e.width,this.height+e.height)},subtract:function(){var e=ee.read(arguments);return new ee(this.width-e.width,this.height-e.height)},multiply:function(){var e=ee.read(arguments);return new ee(this.width*e.width,this.height*e.height)},divide:function(){var e=ee.read(arguments);return new ee(this.width/e.width,this.height/e.height)},modulo:function(){var e=ee.read(arguments);return new ee(this.width%e.width,this.height%e.height)},negate:function(){return new ee(-this.width,-this.height)},isZero:function(){var e=X.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new ee(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new ee(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new ee(Math.random(),Math.random())}}},h.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new ee(t(this.width),t(this.height))}},{})),ce=ee.extend({initialize:function(t,r,o,l){this._width=t,this._height=r,this._owner=o,this._setter=l},_set:function(e,t,r){return this._width=e,this._height=t,r||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),$=h.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,r,o,l){var c=arguments,d=typeof t,p;if(d==="number"?(this._set(t,r,o,l),p=4):d==="undefined"||t===null?(this._set(0,0,0,0),p=t===null?1:0):c.length===1&&(Array.isArray(t)?(this._set.apply(this,t),p=1):t.x!==a||t.width!==a?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),p=1):t.from===a&&t.to===a&&(this._set(0,0,0,0),h.readSupported(c,this)&&(p=1))),p===a){var _=D.readNamed(c,"from"),m=h.peek(c),w=_.x,y=_.y,v,C;if(m&&m.x!==a||h.hasNamed(c,"to")){var P=D.readNamed(c,"to");v=P.x-w,C=P.y-y,v<0&&(w=P.x,v=-v),C<0&&(y=P.y,C=-C)}else{var I=ee.read(c);v=I.width,C=I.height}this._set(w,y,v,C),p=c.__index}var k=c.__filtered;return k&&(this.__filtered=k),this.__read&&(this.__read=p),this},set:"#initialize",_set:function(e,t,r,o){return this.x=e,this.y=t,this.width=r,this.height=o,this},clone:function(){return new $(this.x,this.y,this.width,this.height)},equals:function(e){var t=h.isPlainValue(e)?$.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=K.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?D:ue;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var e=D.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?ee:ce;return new t(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=ee.read(arguments),t=this._sx,r=this._sy,o=e.width,l=e.height;t&&(this.x+=(this.width-o)*t),r&&(this.y+=(this.height-l)*r),this.width=o,this.height=l,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=this._sx===.5?t*2:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=this._sy===.5?t*2:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=this._sx===.5?t*2:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=this._sy===.5?t*2:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||this._sx===.5?this.x=e-this.width/2:(this._sx&&(this.x+=(e-this.x)*2*this._sx),this.width=(e-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||this._sy===.5?this.y=e-this.height/2:(this._sy&&(this.y+=(e-this.y)*2*this._sy),this.height=(e-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(e){var t=e?D:ue;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=D.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(e){return e&&e.width!==a||(Array.isArray(e)?e:arguments).length===4?this._containsRectangle($.read(arguments)):this._containsPoint(D.read(arguments))},_containsPoint:function(e){var t=e.x,r=e.y;return t>=this.x&&r>=this.y&&t<=this.x+this.width&&r<=this.y+this.height},_containsRectangle:function(e){var t=e.x,r=e.y;return t>=this.x&&r>=this.y&&t+e.width<=this.x+this.width&&r+e.height<=this.y+this.height},intersects:function(){var e=$.read(arguments),t=h.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=$.read(arguments),t=Math.max(this.x,e.x),r=Math.max(this.y,e.y),o=Math.min(this.x+this.width,e.x+e.width),l=Math.min(this.y+this.height,e.y+e.height);return new $(t,r,o-t,l-r)},unite:function(){var e=$.read(arguments),t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),o=Math.max(this.x+this.width,e.x+e.width),l=Math.max(this.y+this.height,e.y+e.height);return new $(t,r,o-t,l-r)},include:function(){var e=D.read(arguments),t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),o=Math.max(this.x+this.width,e.x),l=Math.max(this.y+this.height,e.y);return new $(t,r,o-t,l-r)},expand:function(){var e=ee.read(arguments),t=e.width,r=e.height;return new $(this.x-t/2,this.y-r/2,this.width+t,this.height+r)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===a?e:t)-this.height)}},h.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var r=e.join(""),o=/^[RL]/.test(r);t>=4&&(e[1]+=o?"Y":"X");var l=e[o?0:1],c=e[o?1:0],d="get"+l,p="get"+c,_="set"+l,m="set"+c,w="get"+r,y="set"+r;this[w]=function(v){var C=v?D:ue;return new C(this[d](),this[p](),this,y)},this[y]=function(){var v=D.read(arguments);this[_](v.x),this[m](v.y)}},{beans:!0})),J=$.extend({initialize:function(t,r,o,l,c,d){this._set(t,r,o,l,!0),this._owner=c,this._setter=d},_set:function(e,t,r,o,l){return this._x=e,this._y=t,this._width=r,this._height=o,l||this._owner[this._setter](this),this}},new function(){var e=$.prototype;return h.each(["x","y","width","height"],function(t){var r=h.capitalize(t),o="_"+t;this["get"+r]=function(){return this[o]},this["set"+r]=function(l){this[o]=l,this._dontNotify||this._owner[this._setter](this)}},h.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var r="set"+t;this[r]=function(){this._dontNotify=!0,e[r].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(t){var r=this._owner;r._changeSelection&&r._changeSelection(2,t)}}))}),te=h.extend({_class:"Matrix",initialize:function e(t,r){var o=arguments,l=o.length,c=!0;if(l>=6?this._set.apply(this,o):l===1||l===2?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,r):Array.isArray(t)?this._set.apply(this,r?t.concat([r]):t):c=!1:l?c=!1:this.reset(),!c)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,r,o,l,c,d){return this._a=e,this._b=t,this._c=r,this._d=o,this._tx=l,this._ty=c,d||this._changed(),this},_serialize:function(e,t){return h.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new te(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=K.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var r=this._owner;return r?(r.transform(null,h.pick(e,!0),t),this.isIdentity()):!1},translate:function(){var e=D.read(arguments),t=e.x,r=e.y;return this._tx+=t*this._a+r*this._c,this._ty+=t*this._b+r*this._d,this._changed(),this},scale:function(){var e=arguments,t=D.read(e),r=D.read(e,0,{readNull:!0});return r&&this.translate(r),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,r&&this.translate(r.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=D.read(arguments,1),r=t.x,o=t.y,l=Math.cos(e),c=Math.sin(e),d=r-r*l+o*c,p=o-r*c-o*l,_=this._a,m=this._b,w=this._c,y=this._d;return this._a=l*_+c*w,this._b=l*m+c*y,this._c=-c*_+l*w,this._d=-c*m+l*y,this._tx+=d*_+p*w,this._ty+=d*m+p*y,this._changed(),this},shear:function(){var e=arguments,t=D.read(e),r=D.read(e,0,{readNull:!0});r&&this.translate(r);var o=this._a,l=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*o,this._d+=t.x*l,r&&this.translate(r.negate()),this._changed(),this},skew:function(){var e=arguments,t=D.read(e),r=D.read(e,0,{readNull:!0}),o=Math.PI/180,l=new D(Math.tan(t.x*o),Math.tan(t.y*o));return this.shear(l,r)},append:function(e,t){if(e){var r=this._a,o=this._b,l=this._c,c=this._d,d=e._a,p=e._c,_=e._b,m=e._d,w=e._tx,y=e._ty;this._a=d*r+_*l,this._c=p*r+m*l,this._b=d*o+_*c,this._d=p*o+m*c,this._tx+=w*r+y*l,this._ty+=w*o+y*c,t||this._changed()}return this},prepend:function(e,t){if(e){var r=this._a,o=this._b,l=this._c,c=this._d,d=this._tx,p=this._ty,_=e._a,m=e._c,w=e._b,y=e._d,v=e._tx,C=e._ty;this._a=_*r+m*o,this._c=_*l+m*c,this._b=w*r+y*o,this._d=w*l+y*c,this._tx=_*d+m*p+v,this._ty=w*d+y*p+C,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,r=this._c,o=this._d,l=this._tx,c=this._ty,d=e*o-t*r,p=null;return d&&!isNaN(d)&&isFinite(l)&&isFinite(c)&&(this._a=o/d,this._b=-t/d,this._c=-r/d,this._d=e/d,this._tx=(r*c-o*l)/d,this._ty=(t*l-e*c)/d,p=this),p},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new te(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,r){return arguments.length<3?this._transformPoint(D.read(arguments)):this._transformCoordinates(e,t,r)},_transformPoint:function(e,t,r){var o=e.x,l=e.y;return t||(t=new D),t._set(o*this._a+l*this._c+this._tx,o*this._b+l*this._d+this._ty,r)},_transformCoordinates:function(e,t,r){for(var o=0,l=2*r;o<l;o+=2){var c=e[o],d=e[o+1];t[o]=c*this._a+d*this._c+this._tx,t[o+1]=c*this._b+d*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,r=e.y,o=t+e.width,l=r+e.height,c=[t,r,o,r,o,l,t,l];return this._transformCoordinates(c,c,4)},_transformBounds:function(e,t,r){for(var o=this._transformCorners(e),l=o.slice(0,2),c=l.slice(),d=2;d<8;d++){var p=o[d],_=d&1;p<l[_]?l[_]=p:p>c[_]&&(c[_]=p)}return t||(t=new $),t._set(l[0],l[1],c[0]-l[0],c[1]-l[1],r)},inverseTransform:function(){return this._inverseTransform(D.read(arguments))},_inverseTransform:function(e,t,r){var o=this._a,l=this._b,c=this._c,d=this._d,p=this._tx,_=this._ty,m=o*d-l*c,w=null;if(m&&!isNaN(m)&&isFinite(p)&&isFinite(_)){var y=e.x-this._tx,v=e.y-this._ty;t||(t=new D),w=t._set((y*d-v*c)/m,(v*o-y*l)/m,r)}return w},decompose:function(){var e=this._a,t=this._b,r=this._c,o=this._d,l=e*o-t*r,c=Math.sqrt,d=Math.atan2,p=180/Math.PI,_,m,w;if(e!==0||t!==0){var y=c(e*e+t*t);_=Math.acos(e/y)*(t>0?1:-1),m=[y,l/y],w=[d(e*r+t*o,y*y),0]}else if(r!==0||o!==0){var v=c(r*r+o*o);_=Math.asin(r/v)*(o>0?1:-1),m=[l/v,v],w=[0,d(e*r+t*o,v*v)]}else _=0,w=m=[0,0];return{translation:this.getTranslation(),rotation:_*p,scaling:new D(m),skewing:new D(w[0]*p,w[1]*p)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new D(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},h.each(["a","b","c","d","tx","ty"],function(e){var t=h.capitalize(e),r="_"+e;this["get"+t]=function(){return this[r]},this["set"+t]=function(o){this[r]=o,this._changed()}},{})),pe=h.extend({_class:"Line",initialize:function(t,r,o,l,c){var d=!1;arguments.length>=4?(this._px=t,this._py=r,this._vx=o,this._vy=l,d=c):(this._px=t.x,this._py=t.y,this._vx=r.x,this._vy=r.y,d=o),d||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new D(this._px,this._py)},getVector:function(){return new D(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return pe.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return pe.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return pe.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return D.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return D.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,r,o,l,c,d,p,_,m){_||(r-=e,o-=t,d-=l,p-=c);var w=r*p-o*d;if(!X.isMachineZero(w)){var y=e-l,v=t-c,C=(d*v-p*y)/w,P=(r*v-o*y)/w,I=1e-12,k=-I,b=1+I;if(m||k<C&&C<b&&k<P&&P<b)return m||(C=C<=0?0:C>=1?1:C),new D(e+C*r,t+C*o)}},getSide:function(e,t,r,o,l,c,d,p){d||(r-=e,o-=t);var _=l-e,m=c-t,w=_*o-m*r;return!p&&X.isMachineZero(w)&&(w=(_*r+_*r)/(r*r+o*o),w>=0&&w<=1&&(w=0)),w<0?-1:w>0?1:0},getSignedDistance:function(e,t,r,o,l,c,d){return d||(r-=e,o-=t),r===0?o>0?l-e:e-l:o===0?r<0?c-t:t-c:((l-e)*o-(c-t)*r)/(o>r?o*Math.sqrt(1+r*r/(o*o)):r*Math.sqrt(1+o*o/(r*r)))},getDistance:function(e,t,r,o,l,c,d){return Math.abs(pe.getSignedDistance(e,t,r,o,l,c,d))}}}),ye=z.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){z.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new an(null,null,this),this._view=Ye.create(this,t||Pt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return h.serialize(this._children,e,!0,t)},_changed:function(e,t){if(e&1){var r=this._view;r&&(r._needsUpdate=!0,!r._requested&&r._autoUpdate&&r.requestUpdate())}var o=this._changes;if(o&&t){var l=this._changesById,c=t._id,d=l[c];d?d.flags|=e:o.push(l[c]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return e.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ke({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:ht,match:function(r){var o=r._definition,l=o._id;return t[l]||(t[l]=!0,e.push(o)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var r in e){var o=e[r],l=o._selection;l&1&&o.isInserted()?t.push(o):l||this._updateSelection(o)}return t},_updateSelection:function(e){var t=e._id,r=this._selectionItems;e._selection?r[t]!==e&&(this._selectionCount++,r[t]=e):r[t]===e&&(this._selectionCount--,delete r[t])},selectAll:function(){for(var e=this._children,t=0,r=e.length;t<r;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(a,e)},insertLayer:function(e,t){if(t instanceof ke){t._remove(!1,!0),h.splice(this._children,[t],e,0),t._setProject(this,!0);var r=t._name;r&&t.setName(r),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,r){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(a,new ke(B.NO_INSERT),!0)).insertChild(e,t),r&&t.activate&&t.activate(),t},getItems:function(e){return B._getItems(this,e)},getItem:function(e){return B._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return h.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){e==="mouseup"&&(t.mousedrag=null);var r=t[e];if(r){for(var o in r){var l=r[o];for(var c in t){var d=t[c];d&&d!=r&&delete d[l._id]}l.remove()}t[e]=null}}},draw:function(e,t,r){this._updateVersion++,e.save(),t.applyToContext(e);for(var o=this._children,l=new h({offset:new D(0,0),pixelRatio:r,viewMatrix:t.isIdentity()?null:t,matrices:[new te],updateMatrix:!0}),c=0,d=o.length;c<d;c++)o[c].draw(e,l);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var p=this._selectionItems,_=this._scope.settings.handleSize,m=this._updateVersion;for(var w in p)p[w]._drawSelection(e,t,_,p,m);e.restore()}}}),B=h.extend(T,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=h.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new te,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return h.each(e,function(t){this._events[t]={install:function(r){this.getView()._countItemEvent(r,1)},uninstall:function(r){this.getView()._countItemEvent(r,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var r=e&&h.isPlainObject(e),o=r&&e.internal===!0,l=this._matrix=new te,c=r&&e.project||s.project,d=s.settings;return this._id=o?null:ne.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&d.applyMatrix,t&&l.translate(t),l._owner=this,this._style=new an(c._currentStyle,this,c),o||r&&e.insert==!1||!d.insertItems&&!(r&&e.insert==!0)?this._setProject(c):(r&&e.parent||c)._insertItem(a,this,!0),r&&e!==B.NO_INSERT&&e!==B.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),r},_serialize:function(e,t){var r={},o=this;function l(c){for(var d in c){var p=o[d];h.equals(p,d==="leading"?c.fontSize*1.2:c[d])||(r[d]=h.serialize(p,e,d!=="data",t))}}return l(this._serializeFields),this instanceof Te||l(this._style._defaults),[this._class,r]},_changed:function(e){var t=this._symbol,r=this._parent||t,o=this._project;e&8&&(this._bounds=this._position=this._decomposed=a),e&16&&(this._globalMatrix=a),r&&e&72&&B._clearBoundsCache(r),e&2&&B._clearBoundsCache(this),o&&o._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var r=t._children,o=t._namedChildren;(o[e]=o[e]||[]).push(this),e in r||(r[e]=this)}this._name=e||a,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},h.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=h.capitalize(e),r="_"+e,o={locked:256,visible:265};this["get"+t]=function(){return this[r]},this["set"+t]=function(l){l!=this[r]&&(this[r]=l,this._changed(o[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var r=this._selection;this.setSelection(t?r|e:r&~e)},isSelected:function(){if(this._selectChildren){for(var e=this._children,t=0,r=e.length;t<r;t++)if(e[t].isSelected())return!0}return!!(this._selection&1)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,r=0,o=t.length;r<o;r++)t[r].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(this._selection&1);if(e&&t){for(var r=0,o=e.length;r<o;r++)if(!e[r].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var r=0,o=t.length;r<o;r++)t[r].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?D:ue,r=this._position||(this._position=this._getPositionFromBounds());return new t(r.x,r.y,this,"setPosition")},setPosition:function(){this.translate(D.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new ue(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=D.read(arguments,0,{clone:!0,readNull:!0}),this._position=a}},h.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(r){return this.getBounds(r,e)}},{beans:!0,getBounds:function(e,t){var r=t||e instanceof te,o=h.set({},r?t:e,this._boundsOptions);(!o.stroke||this.getStrokeScaling())&&(o.cacheItem=this);var l=this._getCachedBounds(r&&e,o).rect;return arguments.length?l:new J(l.x,l.y,l.width,l.height,this,"setBounds")},setBounds:function(){var e=$.read(arguments),t=this.getBounds(),r=this._matrix,o=new te,l=e.getCenter();o.translate(l),(e.width!=t.width||e.height!=t.height)&&(r.isInvertible()||(r.set(r._backup||new te().translate(r.getTranslation())),t=this.getBounds()),o.scale(t.width!==0?e.width/t.width:0,t.height!==0?e.height/t.height:0)),l=t.getCenter(),o.translate(-l.x,-l.y),this.transform(o)},_getBounds:function(e,t){var r=this._children;return!r||!r.length?new $:(B._updateBoundsCache(this,t.cacheItem),B._getBounds(r,e,t))},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,r){e=e&&e._orNullIfIdentity();var o=t.internal&&!r,l=t.cacheItem,c=o?null:this._matrix._orNullIfIdentity(),d=l&&(!e||e.equals(c))&&this._getBoundsCacheKey(t,o),p=this._bounds;if(B._updateBoundsCache(this._parent||this._symbol,l),d&&p&&d in p){var _=p[d];return{rect:_.rect.clone(),nonscaling:_.nonscaling}}var m=this._getBounds(e||c,t),w=m.rect||m,y=this._style,v=m.nonscaling||y.hasStroke()&&!y.getStrokeScaling();if(d){p||(this._bounds=p={});var _=p[d]={rect:w.clone(),nonscaling:v,internal:o}}return{rect:w,nonscaling:v}},_getStrokeMatrix:function(e,t){var r=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,o=r?r.getViewMatrix().invert():e;return o&&o._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var r=t._id,o=e._boundsCache=e._boundsCache||{ids:{},list:[]};o.ids[r]||(o.list.push(t),o.ids[r]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=a;for(var r=0,o=t.list,l=o.length;r<l;r++){var c=o[r];c!==e&&(c._bounds=c._position=a,c._boundsCache&&B._clearBoundsCache(c))}}},_getBounds:function(e,t,r){var o=1/0,l=-o,c=o,d=l,p=!1;r=r||{};for(var _=0,m=e.length;_<m;_++){var w=e[_];if(w._visible&&!w.isEmpty(!0)){var y=w._getCachedBounds(t&&t.appended(w._matrix),r,!0),v=y.rect;o=Math.min(v.x,o),c=Math.min(v.y,c),l=Math.max(v.x+v.width,l),d=Math.max(v.y+v.height,d),y.nonscaling&&(p=!0)}}return{rect:isFinite(o)?new $(o,c,l-o,d-c):new $,nonscaling:p}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(t!=null&&e!=null){var r=this._decomposed;this.rotate(e-t),r&&(r.rotation=e,this._decomposed=r)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new ue(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=D.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var r=this.getRotation(),o=this._decomposed,l=new te,c=X.isZero;if(c(e.x)||c(e.y))l.translate(o.translation),r&&l.rotate(r),l.scale(t.x,t.y),this._matrix.set(l);else{var d=this.getPosition(!0);l.translate(d),r&&l.rotate(r),l.scale(t.x/e.x,t.y/e.y),r&&l.rotate(-r),l.translate(d.negate()),this.transform(l)}o&&(o.scaling=t,this._decomposed=o)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var r=this._parent,o=[];r;){if(!r._globalMatrix){t=null;for(var l=0,c=o.length;l<c;l++)o[l]._globalMatrix=null;break}o.push(r),r=r._parent}if(!t){t=this._globalMatrix=this._matrix.clone();var r=this._parent;r&&t.prepend(r.getGlobalMatrix(!0))}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var r=this._children,o=0,l=r&&r.length;o<l;o++)r[o]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var r=this._children,o=0,l=r&&r.length;o<l;o++)r[o]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof ke)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return h.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(B.NO_INSERT),r=this._children,o=h.pick(e?e.insert:a,e===a||e===!0),l=h.pick(e?e.deep:a,!0);r&&t.copyAttributes(this),(!r||l)&&t.copyContent(this),r||t.copyAttributes(this),o&&t.insertAbove(this);var c=this._name,d=this._parent;if(c&&d){for(var r=d._children,p=c,_=1;r[c];)c=p+" "+_++;c!==p&&t.setName(c)}return t},copyContent:function(e){for(var t=e._children,r=0,o=t&&t.length;r<o;r++)this.addChild(t[r].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var r=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],o=0,l=r.length;o<l;o++){var c=r[o];e.hasOwnProperty(c)&&(this[c]=e[c])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var d=e._data,p=e._name;this._data=d?h.clone(d):null,p&&this.setName(p)},rasterize:function(e,t){var r,o,l;h.isPlainObject(e)?(r=e.resolution,o=e.insert,l=e.raster):(r=e,o=t),l||(l=new He(B.NO_INSERT));var c=this.getStrokeBounds(),d=(r||this.getView().getResolution())/72,p=c.getTopLeft().floor(),_=c.getBottomRight().ceil(),m=new ee(_.subtract(p)),w=m.multiply(d);if(l.setSize(w,!0),!w.isZero()){var y=l.getContext(!0),v=new te().scale(d).translate(p.negate());y.save(),v.applyToContext(y),this.draw(y,new h({matrices:[v]})),y.restore()}return l._matrix.set(new te().translate(p.add(m.divide(2))).scale(1/d)),(o===a||o)&&l.insertAbove(this),l},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(D.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var r=t.length-1;r>=0;r--)if(t[r].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return $.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Se.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof B?this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0:!1}},new function(){function e(){var o=arguments;return this._hitTest(D.read(o),st.getOptions(o))}function t(){var o=arguments,l=D.read(o),c=st.getOptions(o),d=[];return this._hitTest(l,new h({all:d},c)),d}function r(o,l,c,d){var p=this._children;if(p)for(var _=p.length-1;_>=0;_--){var m=p[_],w=m!==d&&m._hitTest(o,l,c);if(w&&!l.all)return w}return null}return ye.inject({hitTest:e,hitTestAll:t,_hitTest:r}),{hitTest:e,hitTestAll:t,_hitTestChildren:r}},{_hitTest:function(e,t,r){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var o=this._matrix,l=r?r.appended(o):this.getGlobalMatrix().prepend(this.getView()._matrix),c=Math.max(t.tolerance,1e-12),d=t._tolerancePadding=new ee(Se._getStrokePadding(c,o._shiftless().invert()));if(e=o._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(d.multiply(2))._containsPoint(e))return null;var p=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==h.hyphenate(this._class)||t.class&&!(this instanceof t.class)),_=t.match,m=this,w,y;function v(S){return S&&_&&!_(S)&&(S=null),S&&t.all&&t.all.push(S),S}function C(S,E){var A=E?w["get"+E]():m.getPosition();if(e.subtract(A).divide(d).length<=1)return new st(S,m,{name:E?h.hyphenate(E):S,point:A})}var P=t.position,I=t.center,k=t.bounds;if(p&&this._parent&&(P||I||k)){if((I||k)&&(w=this.getInternalBounds()),y=P&&C("position")||I&&C("center","Center"),!y&&k)for(var b=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],x=0;x<8&&!y;x++)y=C("bounds",b[x]);y=v(y)}return y||(y=this._hitTestChildren(e,t,l)||p&&v(this._hitTestSelf(e,t,l,this.getStrokeScaling()?null:l._shiftless().invert()))||null),y&&y.point&&(y.point=o.transform(y.point)),y},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new st("fill",this)},matches:function(e,t){function r(d,p){for(var _ in d)if(d.hasOwnProperty(_)){var m=d[_],w=p[_];if(h.isPlainObject(m)&&h.isPlainObject(w)){if(!r(m,w))return!1}else if(!h.equals(m,w))return!1}return!0}var o=typeof e;if(o==="object"){for(var l in e)if(e.hasOwnProperty(l)&&!this.matches(l,e[l]))return!1;return!0}else{if(o==="function")return e(this);if(e==="match")return t(this);var c=/^(empty|editable)$/.test(e)?this["is"+h.capitalize(e)]():e==="type"?h.hyphenate(this._class):this[e];if(e==="class"){if(typeof t=="function")return this instanceof t;c=this._class}if(typeof t=="function")return!!t(c);if(t){if(t.test)return t.test(c);if(h.isPlainObject(t))return r(t,c)}return h.equals(c,t)}},getItems:function(e){return B._getItems(this,e,this._matrix)},getItem:function(e){return B._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,r,o,l,c){if(!l){var d=typeof r=="object"&&r,p=d&&d.overlapping,_=d&&d.inside,m=p||_,v=m&&$.read([m]);l={items:[],recursive:d&&d.recursive!==!1,inside:!!_,overlapping:!!p,rect:v,path:p&&new Se.Rectangle({rectangle:v,insert:!1})},d&&(r=h.filter({},r,{recursive:!0,inside:!0,overlapping:!0}))}var w=t._children,y=l.items,v=l.rect;o=v&&(o||new te);for(var C=0,P=w&&w.length;C<P;C++){var I=w[C],k=o&&o.appended(I._matrix),b=!0;if(v){var m=I.getBounds(k);if(!v.intersects(m))continue;v.contains(m)||l.overlapping&&(m.contains(v)||l.path.intersects(I,k))||(b=!1)}if(b&&I.matches(r)&&(y.push(I),c)||(l.recursive!==!1&&e(I,r,k,l,c),c&&y.length>0))break}return y}}},{importJSON:function(e){var t=h.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(a,e)},insertChild:function(e,t){var r=t?this.insertChildren(e,[t]):null;return r&&r[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var r=this._children;if(r&&t&&t.length>0){t=h.slice(t);for(var o={},l=t.length-1;l>=0;l--){var c=t[l],d=c&&c._id;!c||o[d]?t.splice(l,1):(c._remove(!1,!0),o[d]=!0)}h.splice(r,t,e,0);for(var p=this._project,_=p._changes,l=0,m=t.length;l<m;l++){var c=t[l],w=c._name;c._parent=this,c._setProject(p,!0),w&&c.setName(w),_&&c._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var r=e&&e._getOwner(),o=e!==this&&r?this:null;return o&&(o._remove(!1,!0),r._insertItem(e._index+t,o)),o},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(a,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(a,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&t.length===1){var r=t[0].reduce(e);return this._parent?(r.insertAbove(this),this.remove()):r.remove(),r}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,r=e._namedChildren,o=this._name,l=r[o],c=l?l.indexOf(this):-1;c!==-1&&(t[o]==this&&delete t[o],l.splice(c,1),l.length?t[o]=l[0]:delete r[o])}},_remove:function(e,t){var r=this._getOwner(),o=this._project,l=this._index;return this._style&&this._style._dispose(),r?(this._name&&this._removeNamed(),l!=null&&(o._activeLayer===this&&(o._activeLayer=this.getNextSibling()||this.getPreviousSibling()),h.splice(r._children,null,l,1)),this._installEvents(!1),e&&o._changes&&this._changed(5),t&&r._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=h.pick(t,this._children.length);for(var r=h.splice(this._children,null,e,t-e),o=r.length-1;o>=0;o--)r[o]._remove(!0,!1);return r.length>0&&this._changed(11),r},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,r=t?t.length:0;if(e){for(var o=0;o<r;o++)if(!t[o].isEmpty(e))return!1;return!0}return!r},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(d){var p=[];do p.unshift(d);while(d=d._parent);return p}for(var r=t(this),o=t(e),l=0,c=Math.min(r.length,o.length);l<c;l++)if(r[l]!=o[l])return r[l]._index<o[l]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return this._getOrder(e)===1},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},h.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var r=arguments,o=(t?h:D).read(r),l=D.read(r,0,{readNull:!0});return this.transform(new te()[e](o,l||this.getPosition(!0)))}},{translate:function(){var e=new te;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,r){var o=this._matrix,l=e&&!e.isIdentity(),c=r&&this._canApplyMatrix||this._applyMatrix&&(l||!o.isIdentity()||t&&this._children);if(!l&&!c)return this;if(l){!e.isInvertible()&&o.isInvertible()&&(o._backup=o.getValues()),o.prepend(e,!0);var d=this._style,p=d.getFillColor(!0),_=d.getStrokeColor(!0);p&&p.transform(e),_&&_.transform(e)}if(c&&(c=this._transformContent(o,t,r))){var m=this._pivot;m&&o._transformPoint(m,m,!0),o.reset(!0),r&&this._canApplyMatrix&&(this._applyMatrix=!0)}var w=this._bounds,y=this._position;(l||c)&&this._changed(25);var v=l&&w&&e.decompose();if(v&&v.skewing.isZero()&&v.rotation%90===0){for(var C in w){var P=w[C];if(P.nonscaling)delete w[C];else if(c||!P.internal){var I=P.rect;e._transformBounds(I,I)}}this._bounds=w;var k=w[this._getBoundsCacheKey(this._boundsOptions||{})];k&&(this._position=this._getPositionFromBounds(k.rect))}else l&&y&&this._pivot&&(this._position=e._transformPoint(y,y));return this},_transformContent:function(e,t,r){var o=this._children;if(o){for(var l=0,c=o.length;l<c;l++)o[l].transform(e,t,r);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(D.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(D.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(D.read(arguments))},localToParent:function(){return this._matrix._transformPoint(D.read(arguments))},fitBounds:function(e,t){e=$.read(arguments);var r=this.getBounds(),o=r.height/r.width,l=e.height/e.width,c=(t?o>l:o<l)?e.width/r.width:e.height/r.height,d=new $(new D,new ee(r.width*c,r.height*c));d.setCenter(e.getCenter()),this.setBounds(d)}}),{_setStyles:function(e,t,r){var o=this._style,l=this._matrix;if(o.hasFill()&&(e.fillStyle=o.getFillColor().toCanvasStyle(e,l)),o.hasStroke()){e.strokeStyle=o.getStrokeColor().toCanvasStyle(e,l),e.lineWidth=o.getStrokeWidth();var c=o.getStrokeJoin(),d=o.getStrokeCap(),p=o.getMiterLimit();if(c&&(e.lineJoin=c),d&&(e.lineCap=d),p&&(e.miterLimit=p),s.support.nativeDash){var _=o.getDashArray(),m=o.getDashOffset();_&&_.length&&("setLineDash"in e?(e.setLineDash(_),e.lineDashOffset=m):(e.mozDash=_,e.mozDashOffset=m))}}if(o.hasShadow()){var w=t.pixelRatio||1,y=r._shiftless().prepend(new te().scale(w,w)),v=y.transform(new D(o.getShadowBlur(),0)),C=y.transform(this.getShadowOffset());e.shadowColor=o.getShadowColor().toCanvasStyle(e),e.shadowBlur=v.getLength(),e.shadowOffsetX=C.x,e.shadowOffsetY=C.y}},draw:function(e,t,r){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var o=t.matrices,l=t.viewMatrix,c=this._matrix,d=o[o.length-1].appended(c);if(d.isInvertible()){l=l?l.appended(d):d,o.push(d),t.updateMatrix&&(this._globalMatrix=d);var p=this._blendMode,_=X.clamp(this._opacity,0,1),m=p==="normal",w=pt.nativeModes[p],y=m&&_===1||t.dontStart||t.clip||(w||m&&_<1)&&this._canComposite(),v=t.pixelRatio||1,C,P,I;if(!y){var k=this.getStrokeBounds(l);if(!k.width||!k.height){o.pop();return}I=t.offset,P=t.offset=k.getTopLeft().floor(),C=e,e=Pt.getContext(k.getSize().ceil().add(1).multiply(v)),v!==1&&e.scale(v,v)}e.save();var b=r?r.appended(c):this._canScaleStroke&&!this.getStrokeScaling(!0)&&l,x=!y&&t.clipItem,S=!b||x;if(y?(e.globalAlpha=_,w&&(e.globalCompositeOperation=p)):S&&e.translate(-P.x,-P.y),S&&(y?c:l).applyToContext(e),x&&t.clipItem.draw(e,t.extend({clip:!0})),b){e.setTransform(v,0,0,v,0,0);var E=t.offset;E&&e.translate(-E.x,-E.y)}this._draw(e,t,l,b),e.restore(),o.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),y||(pt.process(p,e,C,_,P.subtract(I).multiply(v)),Pt.release(e),t.offset=I)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof Be)return t._isUpdated(e);var r=this._updateVersion===e;return!r&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,r=!0),r},_drawSelection:function(e,t,r,o,l){var c=this._selection,d=c&1,p=c&2||d&&this._selectBounds,_=c&4;if(this._drawSelected||(d=!1),(d||p||_)&&this._isUpdated(l)){var m,w=this.getSelectedColor(!0)||(m=this.getLayer())&&m.getSelectedColor(!0),y=t.appended(this.getGlobalMatrix(!0)),v=r/2;if(e.strokeStyle=e.fillStyle=w?w.toCanvasStyle(e):"#009dec",d&&this._drawSelected(e,y,o),_){var C=this.getPosition(!0),P=this._parent,I=P?P.localToGlobal(C):C,k=I.x,b=I.y;e.beginPath(),e.arc(k,b,v,0,Math.PI*2,!0),e.stroke();for(var x=[[0,-1],[1,0],[0,1],[-1,0]],S=v,E=r+1,A=0;A<4;A++){var O=x[A],L=O[0],R=O[1];e.moveTo(k+L*S,b+R*S),e.lineTo(k+L*E,b+R*E),e.stroke()}}if(p){var F=y._transformCorners(this.getInternalBounds());e.beginPath();for(var A=0;A<8;A++)e[A?"lineTo":"moveTo"](F[A],F[++A]);e.closePath(),e.stroke();for(var A=0;A<8;A++)e.fillRect(F[A]-v,F[++A]-v,r,r)}}},_canComposite:function(){return!1}},h.each(["down","drag","up","move"],function(e){this["removeOn"+h.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var r="mouse"+t,o=this._project,l=o._removeSets=o._removeSets||{};l[r]=l[r]||{},l[r][this._id]=this}return this}}),{tween:function(e,t,r){r||(r=t,t=e,e=null,r||(r=t,t=null));var o=r&&r.easing,l=r&&r.start,c=r!=null&&(typeof r=="number"?r:r.duration),d=new ir(this,e,t,c,o,l);function p(_){d._handleFrame(_.time*1e3),d.running||this.off("frame",p)}return c&&this.on("frame",p),d},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),Te=B.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function e(t){e.base.call(this,t),t&2050&&(this._clipItem=a)},_getClipItem:function(){var e=this._clipItem;if(e===a){e=null;for(var t=this._children,r=0,o=t.length;r<o;r++)if(t[r]._clipMask){e=t[r];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,r){var o=this._getClipItem();return o?o._getCachedBounds(o._matrix.prepended(t),h.set({},r,{stroke:!1})):e.base.call(this,t,r)},_hitTestChildren:function e(t,r,o){var l=this._getClipItem();return(!l||l.contains(t))&&e.base.call(this,t,r,o,l)},_draw:function(e,t){var r=t.clip,o=!r&&this._getClipItem();t=t.extend({clipItem:o,clip:!1}),r?(e.beginPath(),t.dontStart=t.dontFinish=!0):o&&o.draw(e,t.extend({clip:!0}));for(var l=this._children,c=0,d=l.length;c<d;c++){var p=l[c];p!==o&&p.draw(e,t)}}}),ke=Te.extend({_class:"Layer",initialize:function(){Te.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function e(){return this._parent?e.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Ve=B.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,r){this._initialize(t,r)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&h.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new ce(e.width,e.height,this,"setSize")},setSize:function(){var e=ee.read(arguments);if(!this._size)this._size=e.clone();else if(!this._size.equals(e)){var t=this._type,r=e.width,o=e.height;t==="rectangle"?this._radius.set(ee.min(this._radius,e.divide(2).abs())):t==="circle"?(r=o=(r+o)/2,this._radius=r/2):t==="ellipse"&&this._radius._set(r/2,o/2),this._size._set(r,o),this._changed(9)}},getRadius:function(){var e=this._radius;return this._type==="circle"?e:new ce(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if(t==="circle"){if(e===this._radius)return;var r=e*2;this._radius=e,this._size._set(r,r)}else if(e=ee.read(arguments),!this._radius)this._radius=e.clone();else{if(this._radius.equals(e))return;if(this._radius.set(e),t==="rectangle"){var r=ee.max(this._size,e.multiply(2));this._size.set(r)}else t==="ellipse"&&this._size._set(e.width*2,e.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new Se[h.capitalize(this._type)]({center:new D,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),s.settings.applyMatrix&&t.setApplyMatrix(!0),(e===a||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,r,o){var l=this._style,c=l.hasFill(),d=l.hasStroke(),p=t.dontFinish||t.clip,_=!o;if(c||d||p){var m=this._type,w=this._radius,y=m==="circle";if(t.dontStart||e.beginPath(),_&&y)e.arc(0,0,w,0,Math.PI*2,!0);else{var v=y?w:w.width,C=y?w:w.height,P=this._size,I=P.width,k=P.height;if(_&&m==="rectangle"&&v===0&&C===0)e.rect(-I/2,-k/2,I,k);else{var b=I/2,x=k/2,S=1-.5522847498307936,E=v*S,A=C*S,O=[-b,-x+C,-b,-x+A,-b+E,-x,-b+v,-x,b-v,-x,b-E,-x,b,-x+A,b,-x+C,b,x-C,b,x-A,b-E,x,b-v,x,-b+v,x,-b+E,x,-b,x-A,-b,x-C];o&&o.transform(O,O,32),e.moveTo(O[0],O[1]),e.bezierCurveTo(O[2],O[3],O[4],O[5],O[6],O[7]),b!==v&&e.lineTo(O[8],O[9]),e.bezierCurveTo(O[10],O[11],O[12],O[13],O[14],O[15]),x!==C&&e.lineTo(O[16],O[17]),e.bezierCurveTo(O[18],O[19],O[20],O[21],O[22],O[23]),b!==v&&e.lineTo(O[24],O[25]),e.bezierCurveTo(O[26],O[27],O[28],O[29],O[30],O[31])}}e.closePath()}!p&&(c||d)&&(this._setStyles(e,t,r),c&&(e.fill(l.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),d&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var r=new $(this._size).setCenter(0,0),o=this._style,l=t.stroke&&o.hasStroke()&&o.getStrokeWidth();return e&&(r=e._transformBounds(r)),l?r.expand(Se._getStrokePadding(l,this._getStrokeMatrix(e,t))):r}},new function(){function e(r,o,l){var c=r._radius;if(!c.isZero())for(var d=r._size.divide(2),p=1;p<=4;p++){var _=new D(p>1&&p<4?-1:1,p>2?-1:1),m=_.multiply(d),w=m.subtract(_.multiply(c)),y=new $(l?m.add(_.multiply(l)):m,w);if(y.contains(o))return{point:w,quadrant:p}}}function t(r,o,l,c){var d=r.divide(o);return(!c||d.isInQuadrant(c))&&d.subtract(d.normalize()).multiply(o).divide(l).length<=1}return{_contains:function r(o){if(this._type==="rectangle"){var l=e(this,o);return l?o.subtract(l.point).divide(this._radius).getLength()<=1:r.base.call(this,o)}else return o.divide(this.size).getLength()<=.5},_hitTestSelf:function r(o,l,c,d){var p=!1,_=this._style,m=l.stroke&&_.hasStroke(),w=l.fill&&_.hasFill();if(m||w){var y=this._type,v=this._radius,C=m?_.getStrokeWidth()/2:0,P=l._tolerancePadding.add(Se._getStrokePadding(C,!_.getStrokeScaling()&&d));if(y==="rectangle"){var I=P.multiply(2),k=e(this,o,I);if(k)p=t(o.subtract(k.point),v,P,k.quadrant);else{var b=new $(this._size).setCenter(0,0),x=b.expand(I),S=b.expand(I.negate());p=x._containsPoint(o)&&!S._containsPoint(o)}}else p=t(o,v,P)}return p?new st(m?"stroke":"fill",this):r.base.apply(this,arguments)}}},{statics:new function(){function e(t,r,o,l,c){var d=h.create(Ve.prototype);return d._type=t,d._size=o,d._radius=l,d._initialize(h.getNamed(c),r),d}return{Circle:function(){var t=arguments,r=D.readNamed(t,"center"),o=h.readNamed(t,"radius");return e("circle",r,new ee(o*2),o,t)},Rectangle:function(){var t=arguments,r=$.readNamed(t,"rectangle"),o=ee.min(ee.readNamed(t,"radius"),r.getSize(!0).divide(2));return e("rectangle",r.getCenter(!0),r.getSize(!0),o,t)},Ellipse:function(){var t=arguments,r=Ve._readEllipse(t),o=r.radius;return e("ellipse",r.center,o.multiply(2),o,t)},_readEllipse:function(t){var r,o;if(h.hasNamed(t,"radius"))r=D.readNamed(t,"center"),o=ee.readNamed(t,"radius");else{var l=$.readNamed(t,"rectangle");r=l.getCenter(!0),o=l.getSize(!0).divide(2)}return{center:r,radius:o}}}}}),He=B.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,r){if(!this._initialize(t,r!==a&&D.read(arguments))){var o,l=typeof t,c=l==="string"?g.getElementById(t):l==="object"?t:null;if(c&&c!==B.NO_INSERT){if(c.getContext||c.naturalHeight!=null)o=c;else if(c){var d=ee.read(arguments);d.isZero()||(o=Pt.getCanvas(d))}}o?this.setImage(o):this.setSource(t)}this._size||(this._size=new ee,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,r=e._canvas;if(t)this._setImage(t);else if(r){var o=Pt.getCanvas(e._size);o.getContext("2d").drawImage(r,0,0),this._setImage(o)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new ce(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var r=ee.read(arguments);if(r.equals(this._size))t&&this.clear();else if(r.width>0&&r.height>0){var o=!t&&this.getElement();this._setImage(Pt.getCanvas(r)),o&&this.getContext(!0).drawImage(o,0,0,r.width,r.height)}else this._canvas&&Pt.release(this._canvas),this._size=r.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||e.width===0&&e.height===0},getResolution:function(){var e=this._matrix,t=new D(0,0).transform(e),r=new D(1,0).transform(e).subtract(t),o=new D(0,1).transform(e).subtract(t);return new ee(72/r.getLength(),72/o.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function r(o){var l=t.getView(),c=o&&o.type||"load";l&&t.responds(c)&&(s=l._scope,t.emit(c,new Mi(o)))}this._setImage(e),this._loaded?setTimeout(r,0):e&&tt.add(e,{load:function(o){t._setImage(e),r(o)},error:r})},_setImage:function(e){this._canvas&&Pt.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new ee(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=Pt.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){Pt.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new i.Image,r=this._crossOrigin;r&&(t.crossOrigin=r),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing=typeof e=="string"?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=$.read(arguments),t=Pt.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=$.read(arguments),t=new He(B.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var r=this.getCanvas();return r?r.toDataURL.apply(r,arguments):null},drawImage:function(e){var t=D.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,r;if(e?e instanceof Oe?(r=e,t=e.getBounds()):typeof e=="object"&&("width"in e?t=new $(e):"x"in e&&(t=new $(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var o=32,l=Math.min(t.width,o),c=Math.min(t.height,o),d=He._sampleContext;d?d.clearRect(0,0,o+1,o+1):d=He._sampleContext=Pt.getContext(new ee(o)),d.save();var p=new te().scale(l/t.width,c/t.height).translate(-t.x,-t.y);p.applyToContext(d),r&&r.draw(d,new h({clip:!0,matrices:[p]})),this._matrix.applyToContext(d);var _=this.getElement(),m=this._size;_&&d.drawImage(_,-m.width/2,-m.height/2),d.restore();for(var w=d.getImageData(.5,.5,Math.ceil(l),Math.ceil(c)).data,y=[0,0,0],v=0,C=0,P=w.length;C<P;C+=4){var I=w[C+3];v+=I,I/=255,y[0]+=w[C]*I,y[1]+=w[C+1]*I,y[2]+=w[C+2]*I}for(var C=0;C<3;C++)y[C]/=v;return v?We.read(y):null},getPixel:function(){var e=D.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new We("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=D.read(e),r=We.read(e),o=r._convert("rgb"),l=r._alpha,c=this.getContext(!0),d=c.createImageData(1,1),p=d.data;p[0]=o[0]*255,p[1]=o[1]*255,p[2]=o[2]*255,p[3]=l!=null?l*255:255,c.putImageData(d,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=ee.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=$.read(arguments);return e.isEmpty()&&(e=new $(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=D.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var r=new $(this._size).setCenter(0,0);return e?e._transformBounds(r):r},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new st("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,r){var o=this.getElement();if(o&&o.width>0&&o.height>0){e.globalAlpha=X.clamp(this._opacity,0,1),this._setStyles(e,t,r);var l=this._smoothing,c=l==="off";Xe.setPrefixed(e,c?"imageSmoothingEnabled":"imageSmoothingQuality",c?!1:l),e.drawImage(o,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),ht=B.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,r){this._initialize(t,r!==a&&D.read(arguments,1))||this.setDefinition(t instanceof qe?t:new qe(t))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var r=this._definition._item;return r._getCachedBounds(r._matrix.prepended(e),t)},_hitTestSelf:function(e,t,r){var o=t.extend({all:!1}),l=this._definition._item._hitTest(e,o,r);return l&&(l.item=this),l},_draw:function(e,t){this._definition._item.draw(e,t)}}),qe=h.extend({_class:"SymbolDefinition",initialize:function(t,r){this._id=ne.get(),this.project=s.project,t&&this.setItem(t,r)},_serialize:function(e,t){return t.add(this,function(){return h.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){e&8&&B._clearBoundsCache(this),e&1&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new D),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new ht(this,e)},clone:function(){return new qe(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),st=h.extend({_class:"HitResult",initialize:function(t,r,o){this.type=t,this.item=r,o&&this.inject(o)},statics:{getOptions:function(e){var t=e&&h.read(e);return new h({type:null,tolerance:s.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),Ee=h.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,r,o,l,c,d){var p=arguments.length,_,m,w,y;p>0&&(t==null||typeof t=="object"?p===1&&t&&"point"in t?(_=t.point,m=t.handleIn,w=t.handleOut,y=t.selection):(_=t,m=r,w=o,y=l):(_=[t,r],m=o!==a?[o,l]:null,w=c!==a?[c,d]:null)),new bt(_,this,"_point"),new bt(m,this,"_handleIn"),new bt(w,this,"_handleOut"),y&&this.setSelection(y)},_serialize:function(e,t){var r=this._point,o=this._selection,l=o||this.hasHandles()?[r,this._handleIn,this._handleOut]:r;return o&&l.push(o),h.serialize(l,e,!0,t)},_changed:function(e){var t=this._path;if(t){var r=t._curves,o=this._index,l;r&&((!e||e===this._point||e===this._handleIn)&&(l=o>0?r[o-1]:t._closed?r[r.length-1]:null)&&l._changed(),(!e||e===this._point||e===this._handleOut)&&(l=r[o])&&l._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(D.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(D.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(D.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,r=this._path;this._selection=e=e||0,r&&e!==t&&(r._updateSelection(this,t,e),r._changed(257))},_changeSelection:function(e,t){var r=this._selection;this.setSelection(t?r|e:r&~e)},isSelected:function(){return!!(this._selection&7)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==a?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new ct(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,r){var o=e||{},l=o.type,c=o.factor,d=this.getPrevious(),p=this.getNext(),_=(d||this)._point,m=this._point,w=(p||this)._point,y=_.getDistance(m),v=m.getDistance(w);if(!l||l==="catmull-rom"){var C=c===a?.5:c,P=Math.pow(y,C),I=P*P,k=Math.pow(v,C),b=k*k;if(!t&&d){var x=2*b+3*k*P+I,S=3*k*(k+P);this.setHandleIn(S!==0?new D((b*_._x+x*m._x-I*w._x)/S-m._x,(b*_._y+x*m._y-I*w._y)/S-m._y):new D)}if(!r&&p){var x=2*I+3*P*k+b,S=3*P*(P+k);this.setHandleOut(S!==0?new D((I*w._x+x*m._x-b*_._x)/S-m._x,(I*w._y+x*m._y-b*_._y)/S-m._y):new D)}}else if(l==="geometric"){if(d&&p){var E=_.subtract(w),A=c===a?.4:c,O=A*y/(y+v);t||this.setHandleIn(E.multiply(O)),r||this.setHandleOut(E.multiply(O-A))}}else throw new Error("Smoothing method '"+l+"' not supported.")},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,r=e.clone();e.set(t),t.set(r)},reversed:function(){return new Ee(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Ee(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,r){var o=1-r,l=r,c=e._point,d=t._point,p=e._handleIn,_=t._handleIn,m=t._handleOut,w=e._handleOut;this._point._set(o*c._x+l*d._x,o*c._y+l*d._y,!0),this._handleIn._set(o*p._x+l*_._x,o*p._y+l*_._y,!0),this._handleOut._set(o*w._x+l*m._x,o*w._y+l*m._y,!0),this._changed()},_transformCoordinates:function(e,t,r){var o=this._point,l=!r||!this._handleIn.isZero()?this._handleIn:null,c=!r||!this._handleOut.isZero()?this._handleOut:null,d=o._x,p=o._y,_=2;return t[0]=d,t[1]=p,l&&(t[_++]=l._x+d,t[_++]=l._y+p),c&&(t[_++]=c._x+d,t[_++]=c._y+p),e&&(e._transformCoordinates(t,t,_/2),d=t[0],p=t[1],r?(o._x=d,o._y=p,_=2,l&&(l._x=t[_++]-d,l._y=t[_++]-p),c&&(c._x=t[_++]-d,c._y=t[_++]-p)):(l||(t[_++]=d,t[_++]=p),c||(t[_++]=d,t[_++]=p))),t}}),bt=D.extend({initialize:function(t,r,o){var l,c,d;if(!t)l=c=0;else if((l=t[0])!==a)c=t[1];else{var p=t;(l=p.x)===a&&(p=D.read(arguments),l=p.x),c=p.y,d=p.selected}this._x=l,this._y=c,this._owner=r,r[o]=this,d&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=X.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),oe=h.extend({_class:"Curve",beans:!0,initialize:function(t,r,o,l,c,d,p,_){var m=arguments.length,w,y,v,C,P,I;m===3?(this._path=t,w=r,y=o):m?m===1?"segment1"in t?(w=new Ee(t.segment1),y=new Ee(t.segment2)):"point1"in t?(v=t.point1,P=t.handle1,I=t.handle2,C=t.point2):Array.isArray(t)&&(v=[t[0],t[1]],C=[t[6],t[7]],P=[t[2]-t[0],t[3]-t[1]],I=[t[4]-t[6],t[5]-t[7]]):m===2?(w=new Ee(t),y=new Ee(r)):m===4?(v=t,P=r,I=o,C=l):m===8&&(v=[t,r],C=[p,_],P=[o-t,l-r],I=[c-p,d-_]):(w=new Ee,y=new Ee),this._segment1=w||new Ee(v,null,P),this._segment2=y||new Ee(C,I,null)},_serialize:function(e,t){return h.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=a},clone:function(){return new oe(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return oe.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,r=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(r)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(D.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(D.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(D.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(D.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return oe.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],r=0;r<8;r+=2)t.push(new D(e[r],e[r+1]));return t}},{getLength:function(){return this._length==null&&(this._length=oe.getLength(this.getValues(),0,1)),this._length},getArea:function(){return oe.getArea(this.getValues())},getLine:function(){return new pe(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new oe(oe.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return oe.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var r=1e-8,o=1-r,l=null;if(e>=r&&e<=o){var c=oe.subdivide(this.getValues(),e),d=c[0],p=c[1],_=t||this.hasHandles(),m=this._segment1,w=this._segment2,y=this._path;_&&(m._handleOut._set(d[2]-d[0],d[3]-d[1]),w._handleIn._set(p[4]-p[6],p[5]-p[7]));var v=d[6],C=d[7],P=new Ee(new D(v,C),_&&new D(d[4]-v,d[5]-C),_&&new D(p[2]-v,p[3]-C));y?(y.insert(m._index+1,P),l=this.getNext()):(this._segment2=P,this._changed(),l=new oe(P,w))}return l},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===a?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===a?.5:t?e:this.getTimeAt(e))},reversed:function(){return new oe(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,r,o){var l=e._point,c=e._handleOut,d=t._handleIn,p=t._point,_=l.x,m=l.y,w=p.x,y=p.y,v=o?[_,m,_,m,w,y,w,y]:[_,m,_+c._x,m+c._y,w+d._x,y+d._y,w,y];return r&&r._transformCoordinates(v,v,4),v},subdivide:function(e,t){var r=e[0],o=e[1],l=e[2],c=e[3],d=e[4],p=e[5],_=e[6],m=e[7];t===a&&(t=.5);var w=1-t,y=w*r+t*l,v=w*o+t*c,C=w*l+t*d,P=w*c+t*p,I=w*d+t*_,k=w*p+t*m,b=w*y+t*C,x=w*v+t*P,S=w*C+t*I,E=w*P+t*k,A=w*b+t*S,O=w*x+t*E;return[[r,o,y,v,b,x,A,O],[A,O,S,E,I,k,_,m]]},getMonoCurves:function(e,t){var r=[],o=t?0:1,l=e[o+0],c=e[o+2],d=e[o+4],p=e[o+6];if(l>=c==c>=d&&c>=d==d>=p||oe.isStraight(e))r.push(e);else{var _=3*(c-d)-l+p,m=2*(l+d)-4*c,w=c-l,y=1e-8,v=1-y,C=[],P=X.solveQuadratic(_,m,w,C,y,v);if(!P)r.push(e);else{C.sort();var I=C[0],k=oe.subdivide(e,I);r.push(k[0]),P>1&&(I=(C[1]-I)/(1-I),k=oe.subdivide(k[1],I),r.push(k[0])),r.push(k[1])}}return r},solveCubic:function(e,t,r,o,l,c){var d=e[t],p=e[t+2],_=e[t+4],m=e[t+6],w=0;if(!(d<r&&m<r&&p<r&&_<r||d>r&&m>r&&p>r&&_>r)){var y=3*(p-d),v=3*(_-p)-y,C=m-d-y-v;w=X.solveCubic(C,v,y,d-r,o,l,c)}return w},getTimeOf:function(e,t){var r=new D(e[0],e[1]),o=new D(e[6],e[7]),l=1e-12,c=1e-7,d=t.isClose(r,l)?0:t.isClose(o,l)?1:null;if(d===null)for(var p=[t.x,t.y],_=[],m=0;m<2;m++)for(var w=oe.solveCubic(e,m,p[m],_,0,1),y=0;y<w;y++){var v=_[y];if(t.isClose(oe.getPoint(e,v),c))return v}return t.isClose(r,c)?0:t.isClose(o,c)?1:null},getNearestTime:function(e,t){if(oe.isStraight(e)){var r=e[0],o=e[1],l=e[6],c=e[7],d=l-r,p=c-o,_=d*d+p*p;if(_===0)return 0;var m=((t.x-r)*d+(t.y-o)*p)/_;return m<1e-12?0:m>.999999999999?1:oe.getTimeOf(e,new D(r+m*d,o+m*p))}var w=100,y=1/0,v=0;function C(k){if(k>=0&&k<=1){var b=t.getDistance(oe.getPoint(e,k),!0);if(b<y)return y=b,v=k,!0}}for(var P=0;P<=w;P++)C(P/w);for(var I=1/(w*2);I>1e-8;)!C(v-I)&&!C(v+I)&&(I/=2);return v},getPart:function(e,t,r){var o=t>r;if(o){var l=t;t=r,r=l}return t>0&&(e=oe.subdivide(e,t)[1]),r<1&&(e=oe.subdivide(e,(r-t)/(1-t))[0]),o?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var r=e[0],o=e[1],l=e[2],c=e[3],d=e[4],p=e[5],_=e[6],m=e[7],w=3*l-2*r-_,y=3*c-2*o-m,v=3*d-2*_-r,C=3*p-2*m-o;return Math.max(w*w,v*v)+Math.max(y*y,C*C)<=16*t*t},getArea:function(e){var t=e[0],r=e[1],o=e[2],l=e[3],c=e[4],d=e[5],p=e[6],_=e[7];return 3*((_-r)*(o+c)-(p-t)*(l+d)+l*(t-c)-o*(r-d)+_*(c+t/3)-p*(d+r/3))/20},getBounds:function(e){for(var t=e.slice(0,2),r=t.slice(),o=[0,0],l=0;l<2;l++)oe._addBounds(e[l],e[l+2],e[l+4],e[l+6],l,0,t,r,o);return new $(t[0],t[1],r[0]-t[0],r[1]-t[1])},_addBounds:function(e,t,r,o,l,c,d,p,_){function m(A,O){var L=A-O,R=A+O;L<d[l]&&(d[l]=L),R>p[l]&&(p[l]=R)}c/=2;var w=d[l]+c,y=p[l]-c;if(e<w||t<w||r<w||o<w||e>y||t>y||r>y||o>y)if(t<e!=t<o&&r<e!=r<o)m(e,0),m(o,0);else{var v=3*(t-r)-e+o,C=2*(e+r)-4*t,P=t-e,I=X.solveQuadratic(v,C,P,_),k=1e-8,b=1-k;m(o,0);for(var x=0;x<I;x++){var S=_[x],E=1-S;k<=S&&S<=b&&m(E*E*E*e+3*E*E*S*t+3*E*S*S*r+S*S*S*o,c)}}}}},h.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=Se[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),h.each({isStraight:function(e,t,r,o){if(t.isZero()&&r.isZero())return!0;var l=o.subtract(e);if(l.isZero())return!1;if(l.isCollinear(t)&&l.isCollinear(r)){var c=new pe(e,o),d=1e-7;if(c.getDistance(e.add(t))<d&&c.getDistance(o.add(r))<d){var p=l.dot(l),_=l.dot(t)/p,m=l.dot(r)/p;return _>=0&&_<=1&&m<=0&&m>=-1}}return!1},isLinear:function(e,t,r,o){var l=o.subtract(e).divide(3);return t.equals(l)&&r.negate().equals(l)}},function(e,t){this[t]=function(r){var o=this._segment1,l=this._segment2;return e(o._point,o._handleOut,l._handleIn,l._point,r)},this.statics[t]=function(r,o){var l=r[0],c=r[1],d=r[6],p=r[7];return e(new D(l,c),new D(r[2]-l,r[3]-c),new D(r[4]-d,r[5]-p),new D(d,p),o)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return e!=null&&e>=0&&e<=1?new ct(this,e):null},getTimeAt:function(e,t){return oe.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=D.read(arguments);return e.isZero()?[]:oe.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(D.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return oe.getTimeOf(this.getValues(),D.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=D.read(arguments),t=this.getValues(),r=oe.getNearestTime(t,e),o=oe.getPoint(t,r);return new ct(this,r,o,null,e.getDistance(o))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return h.each(e,function(t){this[t+"At"]=function(r,o){var l=this.getValues();return oe[t](l,o?r:oe.getTimeAt(l,r))},this[t+"AtTime"]=function(r){return oe[t](this.getValues(),r)}},{statics:{_evaluateMethods:e}})},new function(){function e(o){var l=o[0],c=o[1],d=o[2],p=o[3],_=o[4],m=o[5],w=o[6],y=o[7],v=9*(d-_)+3*(w-l),C=6*(l+_)-12*d,P=3*(d-l),I=9*(p-m)+3*(y-c),k=6*(c+m)-12*p,b=3*(p-c);return function(x){var S=(v*x+C)*x+P,E=(I*x+k)*x+b;return Math.sqrt(S*S+E*E)}}function t(o,l){return Math.max(2,Math.min(16,Math.ceil(Math.abs(l-o)*32)))}function r(o,l,c,d){if(l==null||l<0||l>1)return null;var p=o[0],_=o[1],m=o[2],w=o[3],y=o[4],v=o[5],C=o[6],P=o[7],I=X.isZero;I(m-p)&&I(w-_)&&(m=p,w=_),I(y-C)&&I(v-P)&&(y=C,v=P);var k=3*(m-p),b=3*(y-m)-k,x=C-p-k-b,S=3*(w-_),E=3*(v-w)-S,A=P-_-S-E,O,L;if(c===0)O=l===0?p:l===1?C:((x*l+b)*l+k)*l+p,L=l===0?_:l===1?P:((A*l+E)*l+S)*l+_;else{var R=1e-8,F=1-R;if(l<R?(O=k,L=S):l>F?(O=3*(C-y),L=3*(P-v)):(O=(3*x*l+2*b)*l+k,L=(3*A*l+2*E)*l+S),d){O===0&&L===0&&(l<R||l>F)&&(O=y-m,L=v-w);var U=Math.sqrt(O*O+L*L);U&&(O/=U,L/=U)}if(c===3){var y=6*x*l+2*b,v=6*A*l+2*E,G=Math.pow(O*O+L*L,3/2);O=G!==0?(O*v-L*y)/G:0,L=0}}return c===2?new D(L,-O):new D(O,L)}return{statics:{classify:function(o){var l=o[0],c=o[1],d=o[2],p=o[3],_=o[4],m=o[5],w=o[6],y=o[7],v=l*(y-m)+c*(_-w)+w*m-y*_,C=d*(c-y)+p*(w-l)+l*y-c*w,P=_*(p-c)+m*(l-d)+d*c-p*l,I=3*P,k=I-C,b=k-C+v,x=Math.sqrt(b*b+k*k+I*I),S=x!==0?1/x:0,E=X.isZero,A="serpentine";b*=S,k*=S,I*=S;function O(U,G,V){var j=G!==a,Q=j&&G>0&&G<1,Z=j&&V>0&&V<1;return j&&(!(Q||Z)||U==="loop"&&!(Q&&Z))&&(U="arch",Q=Z=!1),{type:U,roots:Q||Z?Q&&Z?G<V?[G,V]:[V,G]:[Q?G:V]:null}}if(E(b))return E(k)?O(E(I)?"line":"quadratic"):O(A,I/(3*k));var L=3*k*k-4*b*I;if(E(L))return O("cusp",k/(2*b));var R=L>0?Math.sqrt(L/3):Math.sqrt(-L),F=2*b;return O(L>0?A:"loop",(k+R)/F,(k-R)/F)},getLength:function(o,l,c,d){if(l===a&&(l=0),c===a&&(c=1),oe.isStraight(o)){var p=o;c<1&&(p=oe.subdivide(p,c)[0],l/=c),l>0&&(p=oe.subdivide(p,l)[1]);var _=p[6]-p[0],m=p[7]-p[1];return Math.sqrt(_*_+m*m)}return X.integrate(d||e(o),l,c,t(l,c))},getTimeAt:function(o,l,c){if(c===a&&(c=l<0?1:0),l===0)return c;var d=Math.abs,p=1e-12,_=l>0,m=_?c:0,w=_?1:c,y=e(o),v=oe.getLength(o,m,w,y),C=d(l)-v;if(d(C)<p)return _?w:m;if(C>p)return null;var P=l/v,I=0;function k(b){return I+=X.integrate(y,c,b,t(c,b)),c=b,I-l}return X.findRoot(k,y,c+P,m,w,32,1e-12)},getPoint:function(o,l){return r(o,l,0,!1)},getTangent:function(o,l){return r(o,l,1,!0)},getWeightedTangent:function(o,l){return r(o,l,1,!1)},getNormal:function(o,l){return r(o,l,2,!0)},getWeightedNormal:function(o,l){return r(o,l,2,!1)},getCurvature:function(o,l){return r(o,l,3,!1).x},getPeaks:function(o){var l=o[0],c=o[1],d=o[2],p=o[3],_=o[4],m=o[5],w=o[6],y=o[7],v=-l+3*d-3*_+w,C=3*l-6*d+3*_,P=-3*l+3*d,I=-c+3*p-3*m+y,k=3*c-6*p+3*m,b=-3*c+3*p,x=1e-8,S=1-x,E=[];return X.solveCubic(9*(v*v+I*I),9*(v*C+k*I),2*(C*C+k*k)+3*(P*v+b*I),P*C+k*b,E,x,S),E.sort()}}}},new function(){function e(C,P,I,k,b,x,S){var E=!S&&I.getPrevious()===b,A=!S&&I!==b&&I.getNext()===b,O=1e-8,L=1-O;if(k!==null&&k>=(E?O:0)&&k<=(A?L:1)&&x!==null&&x>=(A?O:0)&&x<=(E?L:1)){var R=new ct(I,k,null,S),F=new ct(b,x,null,S);R._intersection=F,F._intersection=R,(!P||P(R))&&ct.insert(C,R,!0)}}function t(C,P,I,k,b,x,S,E,A,O,L,R,F){if(++A>=4096||++E>=40)return A;var U=1e-9,G=P[0],V=P[1],j=P[6],Q=P[7],Z=pe.getSignedDistance,Y=Z(G,V,j,Q,P[2],P[3]),re=Z(G,V,j,Q,P[4],P[5]),le=Y*re>0?3/4:4/9,de=le*Math.min(0,Y,re),ve=le*Math.max(0,Y,re),we=Z(G,V,j,Q,C[0],C[1]),he=Z(G,V,j,Q,C[2],C[3]),fe=Z(G,V,j,Q,C[4],C[5]),xe=Z(G,V,j,Q,C[6],C[7]),Ce=r(we,he,fe,xe),Pe=Ce[0],Me=Ce[1],Re,ze;if(Y===0&&re===0&&we===0&&he===0&&fe===0&&xe===0||(Re=o(Pe,Me,de,ve))==null||(ze=o(Pe.reverse(),Me.reverse(),de,ve))==null)return A;var De=O+(L-O)*Re,Ue=O+(L-O)*ze;if(Math.max(F-R,Ue-De)<U){var ft=(De+Ue)/2,Ie=(R+F)/2;e(b,x,S?k:I,S?Ie:ft,S?I:k,S?ft:Ie)}else{C=oe.getPart(C,Re,ze);var Je=F-R;if(ze-Re>.8)if(Ue-De>Je){var Ke=oe.subdivide(C,.5),ft=(De+Ue)/2;A=t(P,Ke[0],k,I,b,x,!S,E,A,R,F,De,ft),A=t(P,Ke[1],k,I,b,x,!S,E,A,R,F,ft,Ue)}else{var Ke=oe.subdivide(P,.5),Ie=(R+F)/2;A=t(Ke[0],C,k,I,b,x,!S,E,A,R,Ie,De,Ue),A=t(Ke[1],C,k,I,b,x,!S,E,A,Ie,F,De,Ue)}else Je===0||Je>=U?A=t(P,C,k,I,b,x,!S,E,A,R,F,De,Ue):A=t(C,P,I,k,b,x,S,E,A,De,Ue,R,F)}return A}function r(C,P,I,k){var b=[0,C],x=[1/3,P],S=[2/3,I],E=[1,k],A=P-(2*C+k)/3,O=I-(C+2*k)/3,L;if(A*O<0)L=[[b,x,E],[b,S,E]];else{var R=A/O;L=[R>=2?[b,x,E]:R<=.5?[b,S,E]:[b,x,S,E],[b,E]]}return(A||O)<0?L.reverse():L}function o(C,P,I,k){return C[0][1]<I?l(C,!0,I):P[0][1]>k?l(P,!1,k):C[0][0]}function l(C,P,I){for(var k=C[0][0],b=C[0][1],x=1,S=C.length;x<S;x++){var E=C[x][0],A=C[x][1];if(P?A>=I:A<=I)return A===I?E:k+(I-b)*(E-k)/(A-b);k=E,b=A}return null}function c(C,P,I,k,b){var x=X.isZero;if(x(k)&&x(b)){var S=oe.getTimeOf(C,new D(P,I));return S===null?[]:[S]}for(var E=Math.atan2(-b,k),A=Math.sin(E),O=Math.cos(E),L=[],R=[],F=0;F<8;F+=2){var U=C[F]-P,G=C[F+1]-I;L.push(U*O-G*A,U*A+G*O)}return oe.solveCubic(L,1,0,R,0,1),R}function d(C,P,I,k,b,x,S){for(var E=P[0],A=P[1],O=P[6],L=P[7],R=c(C,E,A,O-E,L-A),F=0,U=R.length;F<U;F++){var G=R[F],V=oe.getPoint(C,G),j=oe.getTimeOf(P,V);j!==null&&e(b,x,S?k:I,S?j:G,S?I:k,S?G:j)}}function p(C,P,I,k,b,x){var S=pe.intersect(C[0],C[1],C[6],C[7],P[0],P[1],P[6],P[7]);S&&e(b,x,I,oe.getTimeOf(C,S),k,oe.getTimeOf(P,S))}function _(C,P,I,k,b,x){var S=1e-12,E=Math.min,A=Math.max;if(A(C[0],C[2],C[4],C[6])+S>E(P[0],P[2],P[4],P[6])&&E(C[0],C[2],C[4],C[6])-S<A(P[0],P[2],P[4],P[6])&&A(C[1],C[3],C[5],C[7])+S>E(P[1],P[3],P[5],P[7])&&E(C[1],C[3],C[5],C[7])-S<A(P[1],P[3],P[5],P[7])){var O=y(C,P);if(O)for(var L=0;L<2;L++){var R=O[L];e(b,x,I,R[0],k,R[1],!0)}else{var F=oe.isStraight(C),U=oe.isStraight(P),G=F&&U,V=F&&!U,j=b.length;if((G?p:F||U?d:t)(V?P:C,V?C:P,V?k:I,V?I:k,b,x,V,0,0,0,1,0,1),!G||b.length===j)for(var L=0;L<4;L++){var Q=L>>1,Z=L&1,Y=Q*6,re=Z*6,le=new D(C[Y],C[Y+1]),de=new D(P[re],P[re+1]);le.isClose(de,S)&&e(b,x,I,Q,k,Z)}}}return b}function m(C,P,I,k){var b=oe.classify(C);if(b.type==="loop"){var x=b.roots;e(I,k,P,x[0],P,x[1])}return I}function w(C,P,I,k,b,x){var S=1e-7,E=!P;E&&(P=C);for(var A=C.length,O=P.length,L=new Array(A),R=E?L:new Array(O),F=[],U=0;U<A;U++)L[U]=C[U].getValues(k);if(!E)for(var U=0;U<O;U++)R[U]=P[U].getValues(b);for(var G=W.findCurveBoundsCollisions(L,R,S),V=0;V<A;V++){var j=C[V],Q=L[V];E&&m(Q,j,F,I);var Z=G[V];if(Z)for(var Y=0;Y<Z.length;Y++){if(x&&F.length)return F;var re=Z[Y];if(!E||re>V){var le=P[re],de=R[re];_(Q,de,j,le,F,I)}}}return F}function y(C,P){function I(xe){var Ce=xe[6]-xe[0],Pe=xe[7]-xe[1];return Ce*Ce+Pe*Pe}var k=Math.abs,b=pe.getDistance,x=1e-8,S=1e-7,E=oe.isStraight(C),A=oe.isStraight(P),O=E&&A,L=I(C)<I(P),R=L?P:C,F=L?C:P,U=R[0],G=R[1],V=R[6]-U,j=R[7]-G;if(b(U,G,V,j,F[0],F[1],!0)<S&&b(U,G,V,j,F[6],F[7],!0)<S)!O&&b(U,G,V,j,R[2],R[3],!0)<S&&b(U,G,V,j,R[4],R[5],!0)<S&&b(U,G,V,j,F[2],F[3],!0)<S&&b(U,G,V,j,F[4],F[5],!0)<S&&(E=A=O=!0);else if(O)return null;if(E^A)return null;for(var Q=[C,P],Z=[],Y=0;Y<4&&Z.length<2;Y++){var re=Y&1,le=re^1,de=Y>>1,ve=oe.getTimeOf(Q[re],new D(Q[le][de?6:0],Q[le][de?7:1]));if(ve!=null){var we=re?[de,ve]:[ve,de];(!Z.length||k(we[0]-Z[0][0])>x&&k(we[1]-Z[0][1])>x)&&Z.push(we)}if(Y>2&&!Z.length)break}if(Z.length!==2)Z=null;else if(!O){var he=oe.getPart(C,Z[0][0],Z[1][0]),fe=oe.getPart(P,Z[0][1],Z[1][1]);(k(fe[2]-he[2])>S||k(fe[3]-he[3])>S||k(fe[4]-he[4])>S||k(fe[5]-he[5])>S)&&(Z=null)}return Z}function v(C,P){var I=C[0],k=C[1],b=C[2],x=C[3],S=C[4],E=C[5],A=C[6],O=C[7],L=P.normalize(),R=L.x,F=L.y,U=3*A-9*S+9*b-3*I,G=3*O-9*E+9*x-3*k,V=6*S-12*b+6*I,j=6*E-12*x+6*k,Q=3*b-3*I,Z=3*x-3*k,Y=2*U*F-2*G*R,re=[];if(Math.abs(Y)<X.CURVETIME_EPSILON){var le=U*Z-G*Q,Y=U*j-G*V;if(Y!=0){var de=-le/Y;de>=0&&de<=1&&re.push(de)}}else{var ve=(V*V-4*U*Q)*F*F+(-2*V*j+4*G*Q+4*U*Z)*R*F+(j*j-4*G*Z)*R*R,we=V*F-j*R;if(ve>=0&&Y!=0){var he=Math.sqrt(ve),fe=-(we+he)/Y,xe=(-we+he)/Y;fe>=0&&fe<=1&&re.push(fe),xe>=0&&xe<=1&&re.push(xe)}}return re}return{getIntersections:function(C){var P=this.getValues(),I=C&&C!==this&&C.getValues();return I?_(P,I,this,C,[]):m(P,this,[])},statics:{getOverlaps:y,getIntersections:w,getCurveLineIntersections:c,getTimesWithTangent:v}}}),ct=h.extend({_class:"CurveLocation",initialize:function(t,r,o,l,c){if(r>=.99999999){var d=t.getNext();d&&(r=0,t=d)}this._setCurve(t),this._time=r,this._point=o||t.getPointAtTime(r),this._overlap=l,this._distance=c,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),r=this.getTime();r===0?e=t._segment1:r===1?e=t._segment2:r!=null&&(e=t.getPartLength(0,r)<t.getPartLength(r,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function r(o){var l=o&&o.getCurve();if(l&&(t._time=l.getTimeOf(t._point))!=null)return t._setCurve(l),l}return this._curve||r(this._segment)||r(this._segment1)||r(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&t==null?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(e==null){e=0;var t=this.getPath(),r=this.getIndex();if(t&&r!=null)for(var o=t.getCurves(),l=0;l<r;l++)e+=o[l].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(e==null){var t=this.getCurve(),r=this.getTime();this._curveOffset=e=r!=null&&t&&t.getPartLength(0,r)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,r=e&&e.splitAtTime(this.getTime());return r&&this._setSegment(t.getLastSegment()),r},equals:function(e,t){var r=this===e;if(!r&&e instanceof ct){var o=this.getCurve(),l=e.getCurve(),c=o._path,d=l._path;if(c===d){var p=Math.abs,_=1e-7,m=p(this.getOffset()-e.getOffset()),w=!t&&this._intersection,y=!t&&e._intersection;r=(m<_||c&&p(c.getLength()-m)<_)&&(!w&&!y||w&&y&&w.equals(y,!0))}}return r},toString:function(){var e=[],t=this.getPoint(),r=K.instance;t&&e.push("point: "+t);var o=this.getIndex();o!=null&&e.push("index: "+o);var l=this.getTime();return l!=null&&e.push("time: "+r.number(l)),this._distance!=null&&e.push("distance: "+r.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),r=e.getCurve();return!(t.isStraight()&&r.isStraight()&&t.getLine().intersect(r.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),r=e.getTime(),o=1e-8,l=1-o,c=t>=o&&t<=l,d=r>=o&&r<=l;if(c&&d)return!this.isTouching();var p=this.getCurve(),_=p&&t<o?p.getPrevious():p,m=e.getCurve(),w=m&&r<o?m.getPrevious():m;if(t>l&&(p=p.getNext()),r>l&&(m=m.getNext()),!_||!p||!w||!m)return!1;var y=[];function v(R,F){var U=R.getValues(),G=oe.classify(U).roots||oe.getPeaks(U),V=G.length,j=oe.getLength(U,F&&V?G[V-1]:0,!F&&V?G[0]:1);y.push(V?j:j/32)}function C(R,F,U){return F<U?R>F&&R<U:R>F||R<U}c||(v(_,!0),v(p,!1)),d||(v(w,!0),v(m,!1));var P=this.getPoint(),I=Math.min.apply(Math,y),k=c?p.getTangentAtTime(t):p.getPointAt(I).subtract(P),b=c?k.negate():_.getPointAt(-I).subtract(P),x=d?m.getTangentAtTime(r):m.getPointAt(I).subtract(P),S=d?x.negate():w.getPointAt(-I).subtract(P),E=b.getAngle(),A=k.getAngle(),O=S.getAngle(),L=x.getAngle();return!!(c?C(E,O,L)^C(A,O,L)&&C(E,L,O)^C(A,L,O):C(O,E,A)^C(L,E,A)&&C(O,A,E)^C(L,A,E))},hasOverlap:function(){return!!this._overlap}},h.each(oe._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var r=this.getCurve(),o=this.getTime();return o!=null&&r&&r[t](o,!0)}},{preserve:!0}),new function(){function e(t,r,o){var l=t.length,c=0,d=l-1;function p(P,I){for(var k=P+I;k>=-1&&k<=l;k+=I){var b=t[(k%l+l)%l];if(!r.getPoint().isClose(b.getPoint(),1e-7))break;if(r.equals(b))return b}return null}for(;c<=d;){var _=c+d>>>1,m=t[_],w;if(o&&(w=r.equals(m)?m:p(_,-1)||p(_,1)))return r._overlap&&(w._overlap=w._intersection._overlap=!0),w;var y=r.getPath(),v=m.getPath(),C=y!==v?y._id-v._id:r.getIndex()+r.getTime()-(m.getIndex()+m.getTime());C<0?d=_-1:c=_+1}return t.splice(c,0,r),r}return{statics:{insert:e,expand:function(t){for(var r=t.slice(),o=t.length-1;o>=0;o--)e(r,t[o]._intersection,!1);return r}}}}),Oe=B.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,r,o;if(h.isPlainObject(e)?(r=e.segments,t=e.pathData):Array.isArray(e)?r=e:typeof e=="string"&&(t=e),r){var l=r[0];o=l&&Array.isArray(l[0])}else t&&(o=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));var c=o?Be:Se;return new c(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),r,o=!1,l,c,d=new D,p=new D;function _(S,E){var A=+r[S];return o&&(A+=d[E]),A}function m(S){return new D(_(S,"x"),_(S+1,"y"))}this.clear();for(var w=0,y=t&&t.length;w<y;w++){var v=t[w],C=v[0],P=C.toLowerCase();r=v.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var I=r&&r.length;switch(o=C===P,l==="z"&&!/[mz]/.test(P)&&this.moveTo(d),P){case"m":case"l":for(var k=P==="m",b=0;b<I;b+=2)this[k?"moveTo":"lineTo"](d=m(b)),k&&(p=d,k=!1);c=d;break;case"h":case"v":var x=P==="h"?"x":"y";d=d.clone();for(var b=0;b<I;b++)d[x]=_(b,x),this.lineTo(d);c=d;break;case"c":for(var b=0;b<I;b+=6)this.cubicCurveTo(m(b),c=m(b+2),d=m(b+4));break;case"s":for(var b=0;b<I;b+=4)this.cubicCurveTo(/[cs]/.test(l)?d.multiply(2).subtract(c):d,c=m(b),d=m(b+2)),l=P;break;case"q":for(var b=0;b<I;b+=4)this.quadraticCurveTo(c=m(b),d=m(b+2));break;case"t":for(var b=0;b<I;b+=2)this.quadraticCurveTo(c=/[qt]/.test(l)?d.multiply(2).subtract(c):d,d=m(b)),l=P;break;case"a":for(var b=0;b<I;b+=7)this.arcTo(d=m(b+5),new ee(+r[b],+r[b+1]),+r[b+2],+r[b+4],+r[b+3]);break;case"z":this.closePath(1e-12),d=p;break}l=P}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!(this.getFillRule()==="evenodd"?t.windingL&1||t.windingR&1:t.winding)},getIntersections:function(e,t,r,o){var l=this===e||!e,c=this._matrix._orNullIfIdentity(),d=l?c:(r||e._matrix)._orNullIfIdentity();return l||this.getBounds(c).intersects(e.getBounds(d),1e-12)?oe.getIntersections(this.getCurves(),!l&&e.getCurves(),t,c,d,o):[]},getCrossings:function(e){return this.getIntersections(e,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var e=D.read(arguments),t=this.getCurves(),r=1/0,o=null,l=0,c=t.length;l<c;l++){var d=t[l].getNearestLocation(e);d._distance<r&&(r=d._distance,o=d)}return o},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,r){var o=!this._children,l=o?"_segments":"_children",c=e[l],d=t[l],p=this[l];if(!c||!d||c.length!==d.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var _=p.length,m=d.length;if(_<m)for(var w=o?Ee:Se,y=_;y<m;y++)this.add(new w);else _>m&&this[o?"removeSegments":"removeChildren"](m,_);for(var y=0;y<m;y++)p[y].interpolate(c[y],d[y],r);o&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var r=this._children||[this],o=e._children?e._children.slice():[e],l=r.length,c=o.length,d=[],p=0;t=!0;for(var _=W.findItemBoundsCollisions(r,o,X.GEOMETRIC_EPSILON),m=l-1;m>=0&&t;m--){var w=r[m];t=!1;var y=_[m];if(y)for(var v=y.length-1;v>=0&&!t;v--)w.compare(o[y[v]])&&(d[y[v]]||(d[y[v]]=!0,p++),t=!0)}t=t&&p===c}return t}}),Se=Oe.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var r=arguments,o=Array.isArray(t)?typeof t[0]=="object"?t:r:t&&t.size===a&&(t.x!==a||t.point!==a)?r:null;o&&o.length>0?this.setSegments(o):(this._curves=a,this._segmentSelection=0,!o&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!o&&t)},_equals:function(e){return this._closed===e._closed&&h.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),t&8){if(this._length=this._area=a,t&32)this._version++;else if(this._curves)for(var r=0,o=this._curves.length;r<o;r++)this._curves[r]._changed()}else t&64&&(this._bounds=a)},getStyle:function(){var e=this._parent;return(e instanceof Be?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),r=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=a,r){var o=e[r-1];typeof o=="boolean"&&(this.setClosed(o),r--),this._add(Ee.readList(e,0,{},r))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var r=this._countCurves();e=this._curves=new Array(r);for(var o=0;o<r;o++)e[o]=new oe(this,t[o],t[o+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new oe(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var r=this._segments,o=r.length,l=new K(t),c=new Array(6),d=!0,p,_,m,w,y,v,C,P,I=[];function k(x,S){if(x._transformCoordinates(e,c),p=c[0],_=c[1],d)I.push("M"+l.pair(p,_)),d=!1;else if(y=c[2],v=c[3],y===p&&v===_&&C===m&&P===w){if(!S){var E=p-m,A=_-w;I.push(E===0?"v"+l.number(A):A===0?"h"+l.number(E):"l"+l.pair(E,A))}}else I.push("c"+l.pair(C-m,P-w)+" "+l.pair(y-m,v-w)+" "+l.pair(p-m,_-w));m=p,w=_,C=c[4],P=c[5]}if(!o)return"";for(var b=0;b<o;b++)k(r[b]);return this._closed&&o>0&&(k(r[0],!0),I.push("z")),I.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,r=new Array(6),o=0,l=t.length;o<l;o++)t[o]._transformCoordinates(e,r,!0);return!0},_add:function(e,d){for(var r=this._segments,o=this._curves,l=e.length,c=d==null,d=c?r.length:d,p=0;p<l;p++){var _=e[p];_._path&&(_=e[p]=_.clone()),_._path=this,_._index=d+p,_._selection&&this._updateSelection(_,0,_._selection)}if(c)h.push(r,e);else{r.splice.apply(r,[d,0].concat(e));for(var p=d+l,m=r.length;p<m;p++)r[p]._index=p}if(o){var w=this._countCurves(),y=d>0&&d+l-1===w?d-1:d,v=y,C=Math.min(y+l,w);e._curves&&(o.splice.apply(o,[y,0].concat(e._curves)),v+=e._curves.length);for(var p=v;p<C;p++)o.splice(p,0,new oe(this,null,null));this._adjustCurves(y,C)}return this._changed(41),e},_adjustCurves:function(e,t){for(var r=this._segments,o=this._curves,l,c=e;c<t;c++)l=o[c],l._path=this,l._segment1=r[c],l._segment2=r[c+1]||r[0],l._changed();(l=o[this._closed&&!e?r.length-1:e-1])&&(l._segment2=r[e]||r[0],l._changed()),(l=o[t])&&(l._segment1=r[t],l._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&typeof e!="number"?this._add(Ee.readList(t)):this._add([Ee.read(t)])[0]},insert:function(e,t){var r=arguments;return r.length>2&&typeof t!="number"?this._add(Ee.readList(r,1),e):this._add([Ee.read(r,1)],e)[0]},addSegment:function(){return this._add([Ee.read(arguments)])[0]},insertSegment:function(e){return this._add([Ee.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(Ee.readList(e))},insertSegments:function(e,t){return this._add(Ee.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,r){e=e||0,t=h.pick(t,this._segments.length);var o=this._segments,l=this._curves,c=o.length,d=o.splice(e,t-e),p=d.length;if(!p)return d;for(var _=0;_<p;_++){var m=d[_];m._selection&&this._updateSelection(m,m._selection,0),m._index=m._path=null}for(var _=e,w=o.length;_<w;_++)o[_]._index=_;if(l){for(var y=e>0&&t===c+(this._closed?1:0)?e-1:e,l=l.splice(y,p),_=l.length-1;_>=0;_--)l[_]._path=null;r&&(d._curves=l.slice(1)),this._adjustCurves(y,y)}return this._changed(41),d},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,r=e.length;t<r;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,r=e.length;t<r;t++)e[t].clearHandles()},getLength:function(){if(this._length==null){for(var e=this.getCurves(),t=0,r=0,o=e.length;r<o;r++)t+=e[r].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(e==null){var t=this._segments,r=this._closed;e=0;for(var o=0,l=t.length;o<l;o++){var c=o+1===l;e+=oe.getArea(oe.getValues(t[o],t[c?0:o+1],null,c&&!r))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===e*7},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){t&1||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,r=t.length,o=e?7:0;this._segmentSelection=o*r;for(var l=0;l<r;l++)t[l]._selection=o},_updateSelection:function(e,t,r){e._selection=r;var o=this._segmentSelection+=r-t;o>0&&this.setSelected(!0)},divideAt:function(e){var t=this.getLocationAt(e),r;return t&&(r=t.getCurve().divideAt(t.getCurveOffset()))?r._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),r=t&&t.index,o=t&&t.time,l=1e-8,c=1-l;o>c&&(r++,o=0);var d=this.getCurves();if(r>=0&&r<d.length){o>=l&&d[r++].divideAtTime(o);var p=this.removeSegments(r,this._segments.length,!0),_;return this._closed?(this.setClosed(!1),_=this):(_=new Se(B.NO_INSERT),_.insertAbove(this),_.copyAttributes(this)),_._add(p,0),this.addSegment(p[0]),_}return null},split:function(e,t){var r,o=t===a?e:(r=this.getCurves()[e])&&r.getLocationAtTime(t);return o!=null?this.splitAt(o):null},join:function(e,t){var r=t||0;if(e&&e!==this){var o=e._segments,l=this.getLastSegment(),c=e.getLastSegment();if(!c)return this;l&&l._point.isClose(c._point,r)&&e.reverse();var d=e.getFirstSegment();if(l&&l._point.isClose(d._point,r))l.setHandleOut(d._handleOut),this._add(o.slice(1));else{var p=this.getFirstSegment();p&&p._point.isClose(d._point,r)&&e.reverse(),c=e.getLastSegment(),p&&p._point.isClose(c._point,r)?(p.setHandleIn(c._handleIn),this._add(o.slice(0,o.length-1),0)):this._add(o.slice())}e._closed&&this._add([o[0]]),e.remove()}var _=this.getFirstSegment(),m=this.getLastSegment();return _!==m&&_._point.isClose(m._point,r)&&(_.setHandleIn(m._handleIn),m.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),r=e&&e.simplify,o=r?1e-7:0,l=t.length-1;l>=0;l--){var c=t[l];!c.hasHandles()&&(!c.hasLength(o)||r&&c.isCollinear(c.getNext()))&&c.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var r=this._segments[e],o=r._handleIn;r._handleIn=r._handleOut,r._handleOut=o,r._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new lt(this,e||.25,256,!0),r=t.parts,o=r.length,l=[],c=0;c<o;c++)l.push(new Ee(r[c].curve.slice(0,2)));!this._closed&&o>0&&l.push(new Ee(r[o-1].curve.slice(6))),this.setSegments(l)},simplify:function(e){var t=new ut(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,r=e||{},o=r.type||"asymmetric",l=this._segments,c=l.length,d=this._closed;function p(Pe,Me){var Re=Pe&&Pe.index;if(Re!=null){var ze=Pe.path;if(ze&&ze!==t)throw new Error(Pe._class+" "+Re+" of "+ze+" is not part of "+t);Me&&Pe instanceof oe&&Re++}else Re=typeof Pe=="number"?Pe:Me;return Math.min(Re<0&&d?Re%c:Re<0?Re+c:Re,c-1)}var _=d&&r.from===a&&r.to===a,m=p(r.from,0),w=p(r.to,c-1);if(m>w)if(d)m-=c;else{var y=m;m=w,w=y}if(/^(?:asymmetric|continuous)$/.test(o)){var v=o==="asymmetric",C=Math.min,P=w-m+1,I=P-1,k=_?C(P,4):1,b=k,x=k,S=[];if(d||(b=C(1,m),x=C(1,c-w-1)),I+=b+x,I<=1)return;for(var E=0,A=m-b;E<=I;E++,A++)S[E]=l[(A<0?A+c:A)%c]._point;for(var O=S[0]._x+2*S[1]._x,L=S[0]._y+2*S[1]._y,R=2,F=I-1,U=[O],G=[L],V=[R],j=[],Q=[],E=1;E<I;E++){var Z=E<F,Y=Z||v?1:2,re=Z?4:v?2:7,le=Z?4:v?3:8,de=Z?2:v?0:1,ve=Y/R;R=V[E]=re-ve,O=U[E]=le*S[E]._x+de*S[E+1]._x-ve*O,L=G[E]=le*S[E]._y+de*S[E+1]._y-ve*L}j[F]=U[F]/V[F],Q[F]=G[F]/V[F];for(var E=I-2;E>=0;E--)j[E]=(U[E]-j[E+1])/V[E],Q[E]=(G[E]-Q[E+1])/V[E];j[I]=(3*S[I]._x-j[F])/2,Q[I]=(3*S[I]._y-Q[F])/2;for(var E=b,we=I-x,A=m;E<=we;E++,A++){var he=l[A<0?A+c:A],fe=he._point,xe=j[E]-fe._x,Ce=Q[E]-fe._y;(_||E<we)&&he.setHandleOut(xe,Ce),(_||E>b)&&he.setHandleIn(-xe,-Ce)}}else for(var E=m;E<=w;E++)l[E<0?E+c:E].smooth(r,!_&&E===m,!_&&E===w)},toShape:function(e){if(!this._closed)return null;var t=this._segments,r,o,l,c;function d(v,C){var P=t[v],I=P.getNext(),k=t[C],b=k.getNext();return P._handleOut.isZero()&&I._handleIn.isZero()&&k._handleOut.isZero()&&b._handleIn.isZero()&&I._point.subtract(P._point).isCollinear(b._point.subtract(k._point))}function p(v){var C=t[v],P=C.getPrevious(),I=C.getNext();return P._handleOut.isZero()&&C._handleIn.isZero()&&C._handleOut.isZero()&&I._handleIn.isZero()&&C._point.subtract(P._point).isOrthogonal(I._point.subtract(C._point))}function _(v){var C=t[v],P=C.getNext(),I=C._handleOut,k=P._handleIn,b=.5522847498307936;if(I.isOrthogonal(k)){var x=C._point,S=P._point,E=new pe(x,I,!0).intersect(new pe(S,k,!0),!0);return E&&X.isZero(I.getLength()/E.subtract(x).getLength()-b)&&X.isZero(k.getLength()/E.subtract(S).getLength()-b)}return!1}function m(v,C){return t[v]._point.getDistance(t[C]._point)}if(!this.hasHandles()&&t.length===4&&d(0,2)&&d(1,3)&&p(1)?(r=Ve.Rectangle,o=new ee(m(0,3),m(0,1)),c=t[1]._point.add(t[2]._point).divide(2)):t.length===8&&_(0)&&_(2)&&_(4)&&_(6)&&d(1,5)&&d(3,7)?(r=Ve.Rectangle,o=new ee(m(1,6),m(0,3)),l=o.subtract(new ee(m(0,7),m(1,2))).divide(2),c=t[3]._point.add(t[4]._point).divide(2)):t.length===4&&_(0)&&_(1)&&_(2)&&_(3)&&(X.isZero(m(0,2)-m(1,3))?(r=Ve.Circle,l=m(0,2)/2):(r=Ve.Ellipse,l=new ee(m(2,0)/2,m(3,1)/2)),c=t[1]._point),r){var w=this.getPosition(!0),y=new r({center:w,size:o,radius:l,insert:!1});return y.copyAttributes(this,!0),y._matrix.prepend(this._matrix),y.rotate(c.subtract(w).getAngle()+90),(e===a||e)&&y.insertAbove(this),y}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof Be)return e.base.call(this,t);var r=this.getCurves(),o=t.getCurves(),l=r.length,c=o.length;if(!l||!c)return l==c;for(var d=r[0].getValues(),p=[],_=0,m,w=0,y,v=0;v<c;v++){var k=o[v].getValues();p.push(k);var C=oe.getOverlaps(d,k);if(C){m=!v&&C[0][0]>0?c-1:v,y=C[0][1];break}}for(var P=Math.abs,I=1e-8,k=p[m],b;d&&k;){var C=oe.getOverlaps(d,k);if(C){var x=C[0][0];if(P(x-w)<I){w=C[1][0],w===1&&(d=++_<l?r[_].getValues():null,w=0);var S=C[0][1];if(P(S-y)<I){if(b||(b=[m,S]),y=C[1][1],y===1&&(++m>=c&&(m=0),k=p[m]||o[m].getValues(),y=0),!d)return b[0]===m&&b[1]===y;continue}}}break}return!1},_hitTestSelf:function(e,t,r,o){var l=this,c=this.getStyle(),d=this._segments,p=d.length,_=this._closed,m=t._tolerancePadding,w=m,y,v,C,P,I,k,b=t.stroke&&c.hasStroke(),x=t.fill&&c.hasFill(),S=t.curves,E=b?c.getStrokeWidth()/2:x&&t.tolerance>0||S?0:null;E!==null&&(E>0?(y=c.getStrokeJoin(),v=c.getStrokeCap(),C=c.getMiterLimit(),w=w.add(Se._getStrokePadding(E,o))):y=v="round");function A(j,Q){return e.subtract(j).divide(Q).length<=1}function O(j,Q,Z){if(!t.selected||Q.isSelected()){var Y=j._point;if(Q!==Y&&(Q=Q.add(Y)),A(Q,w))return new st(Z,l,{segment:j,point:Q})}}function L(j,Q){return(Q||t.segments)&&O(j,j._point,"segment")||!Q&&t.handles&&(O(j,j._handleIn,"handle-in")||O(j,j._handleOut,"handle-out"))}function R(j){P.add(j)}function F(j){var Q=_||j._index>0&&j._index<p-1;if((Q?y:v)==="round")return A(j._point,w);if(P=new Se({internal:!0,closed:!0}),Q?j.isSmooth()||Se._addBevelJoin(j,y,E,C,null,o,R,!0):v==="square"&&Se._addSquareCap(j,v,E,null,o,R,!0),!P.isEmpty()){var Z;return P.contains(e)||(Z=P.getNearestLocation(e))&&A(Z.getPoint(),m)}}if(t.ends&&!t.segments&&!_){if(k=L(d[0],!0)||L(d[p-1],!0))return k}else if(t.segments||t.handles){for(var U=0;U<p;U++)if(k=L(d[U]))return k}if(E!==null){if(I=this.getNearestLocation(e),I){var G=I.getTime();G===0||G===1&&p>1?F(I.getSegment())||(I=null):A(I.getPoint(),w)||(I=null)}if(!I&&y==="miter"&&p>1)for(var U=0;U<p;U++){var V=d[U];if(e.getDistance(V._point)<=C*E&&F(V)){I=V.getLocation();break}}}return!I&&x&&this._contains(e)||I&&!b&&!S?new st("fill",this):I?new st(b?"stroke":"curve",this,{location:I,point:I.getPoint()}):null}},h.each(oe._evaluateMethods,function(e){this[e+"At"]=function(t){var r=this.getLocationAt(t);return r&&r[e]()}},{beans:!1,getLocationOf:function(){for(var e=D.read(arguments),t=this.getCurves(),r=0,o=t.length;r<o;r++){var l=t[r].getLocationOf(e);if(l)return l}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if(typeof e=="number"){for(var t=this.getCurves(),r=0,o=0,l=t.length;o<l;o++){var c=r,d=t[o];if(r+=d.getLength(),r>e)return d.getLocationAt(e-c)}if(t.length>0&&e<=this.getLength())return new ct(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=D.read(arguments);if(e.isZero())return[];for(var t=[],r=0,o=this.getCurves(),l=0,c=o.length;l<c;l++){for(var d=o[l],p=d.getTimesWithTangent(e),_=0,m=p.length;_<m;_++){var w=r+d.getOffsetAtTime(p[_]);t.indexOf(w)<0&&t.push(w)}r+=d.length}return t}}),new function(){function e(r,o,l,c){if(c<=0)return;var d=c/2,p=c-2,_=d-1,m=new Array(6),w,y;function v(x){var S=m[x],E=m[x+1];(w!=S||y!=E)&&(r.beginPath(),r.moveTo(w,y),r.lineTo(S,E),r.stroke(),r.beginPath(),r.arc(S,E,d,0,Math.PI*2,!0),r.fill())}for(var C=0,P=o.length;C<P;C++){var I=o[C],k=I._selection;if(I._transformCoordinates(l,m),w=m[0],y=m[1],k&2&&v(2),k&4&&v(4),r.fillRect(w-d,y-d,c,c),p>0&&!(k&1)){var b=r.fillStyle;r.fillStyle="#ffffff",r.fillRect(w-_,y-_,p,p),r.fillStyle=b}}}function t(r,o,l){var c=o._segments,d=c.length,p=new Array(6),_=!0,m,w,y,v,C,P,I,k;function b(S){if(l)S._transformCoordinates(l,p),m=p[0],w=p[1];else{var E=S._point;m=E._x,w=E._y}if(_)r.moveTo(m,w),_=!1;else{if(l)C=p[2],P=p[3];else{var A=S._handleIn;C=m+A._x,P=w+A._y}C===m&&P===w&&I===y&&k===v?r.lineTo(m,w):r.bezierCurveTo(I,k,C,P,m,w)}if(y=m,v=w,l)I=p[4],k=p[5];else{var A=S._handleOut;I=y+A._x,k=v+A._y}}for(var x=0;x<d;x++)b(c[x]);o._closed&&d>0&&b(c[0])}return{_draw:function(r,o,l,c){var d=o.dontStart,p=o.dontFinish||o.clip,_=this.getStyle(),m=_.hasFill(),w=_.hasStroke(),y=_.getDashArray(),v=!s.support.nativeDash&&w&&y&&y.length;d||r.beginPath(),(m||w&&!v||p)&&(t(r,this,c),this._closed&&r.closePath());function C(S){return y[(S%v+v)%v]}if(!p&&(m||w)&&(this._setStyles(r,o,l),m&&(r.fill(_.getFillRule()),r.shadowColor="rgba(0,0,0,0)"),w)){if(v){d||r.beginPath();for(var P=new lt(this,.25,32,!1,c),I=P.length,k=-_.getDashOffset(),b,x=0;k>0;)k-=C(x--)+C(x--);for(;k<I;)b=k+C(x++),(k>0||b>0)&&P.drawPart(r,Math.max(k,0),Math.max(b,0)),k=b+C(x++)}r.stroke()}},_drawSelected:function(r,o){r.beginPath(),t(r,this,o),r.stroke(),e(r,this._segments,o,s.settings.handleSize)}}},new function(){function e(t){var r=t._segments;if(!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return{moveTo:function(){var t=this._segments;t.length===1&&this.removeSegment(0),t.length||this._add([new Ee(D.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Ee(D.read(arguments))])},cubicCurveTo:function(){var t=arguments,r=D.read(t),o=D.read(t),l=D.read(t),c=e(this);c.setHandleOut(r.subtract(c._point)),this._add([new Ee(l,o.subtract(l))])},quadraticCurveTo:function(){var t=arguments,r=D.read(t),o=D.read(t),l=e(this)._point;this.cubicCurveTo(r.add(l.subtract(r).multiply(1/3)),r.add(o.subtract(r).multiply(1/3)),o)},curveTo:function(){var t=arguments,r=D.read(t),o=D.read(t),l=h.pick(h.read(t),.5),c=1-l,d=e(this)._point,p=r.subtract(d.multiply(c*c)).subtract(o.multiply(l*l)).divide(2*l*c);if(p.isNaN())throw new Error("Cannot put a curve through points with parameter = "+l);this.quadraticCurveTo(p,o)},arcTo:function(){var t=arguments,r=Math.abs,o=Math.sqrt,l=e(this),c=l._point,d=D.read(t),p,_=h.peek(t),m=h.pick(_,!0),w,y,v,C;if(typeof m=="boolean")var P=c.add(d).divide(2),p=P.add(P.subtract(c).rotate(m?-90:90));else if(h.remain(t)<=2)p=d,d=D.read(t);else if(!c.equals(d)){var I=ee.read(t),k=X.isZero;if(k(I.width)||k(I.height))return this.lineTo(d);var b=h.read(t),m=!!h.read(t),x=!!h.read(t),P=c.add(d).divide(2),S=c.subtract(P).rotate(-b),E=S.x,A=S.y,O=r(I.width),L=r(I.height),R=O*O,F=L*L,U=E*E,G=A*A,V=o(U/R+G/F);if(V>1&&(O*=V,L*=V,R=O*O,F=L*L),V=(R*F-R*G-F*U)/(R*G+F*U),r(V)<1e-12&&(V=0),V<0)throw new Error("Cannot create an arc with the given arguments");w=new D(O*A/L,-L*E/O).multiply((x===m?-1:1)*o(V)).rotate(b).add(P),C=new te().translate(w).rotate(b).scale(O,L),v=C._inverseTransform(c),y=v.getDirectedAngle(C._inverseTransform(d)),!m&&y>0?y-=360:m&&y<0&&(y+=360)}if(p){var j=new pe(c.add(p).divide(2),p.subtract(c).rotate(90),!0),Q=new pe(p.add(d).divide(2),d.subtract(p).rotate(90),!0),Z=new pe(c,d),Y=Z.getSide(p);if(w=j.intersect(Q,!0),!w){if(!Y)return this.lineTo(d);throw new Error("Cannot create an arc with the given arguments")}v=c.subtract(w),y=v.getDirectedAngle(d.subtract(w));var re=Z.getSide(w,!0);re===0?y=Y*r(y):Y===re&&(y+=y<0?360:-360)}if(y){for(var le=1e-5,de=r(y),ve=de>=360?4:Math.ceil((de-le)/90),we=y/ve,he=we*Math.PI/360,fe=4/3*Math.sin(he)/(1+Math.cos(he)),xe=[],Ce=0;Ce<=ve;Ce++){var S=d,Pe=null;if(Ce<ve&&(Pe=v.rotate(90).multiply(fe),C?(S=C._transformPoint(v),Pe=C._transformPoint(v.add(Pe)).subtract(S)):S=w.add(v)),!Ce)l.setHandleOut(Pe);else{var Me=v.rotate(-90).multiply(fe);C&&(Me=C._transformPoint(v.add(Me)).subtract(S)),xe.push(new Ee(S,Me,Pe))}v=v.rotate(we)}this._add(xe)}},lineBy:function(){var t=D.read(arguments),r=e(this)._point;this.lineTo(r.add(t))},curveBy:function(){var t=arguments,r=D.read(t),o=D.read(t),l=h.read(t),c=e(this)._point;this.curveTo(c.add(r),c.add(o),l)},cubicCurveBy:function(){var t=arguments,r=D.read(t),o=D.read(t),l=D.read(t),c=e(this)._point;this.cubicCurveTo(c.add(r),c.add(o),c.add(l))},quadraticCurveBy:function(){var t=arguments,r=D.read(t),o=D.read(t),l=e(this)._point;this.quadraticCurveTo(l.add(r),l.add(o))},arcBy:function(){var t=arguments,r=e(this)._point,o=r.add(D.read(t)),l=h.pick(h.peek(t),!0);typeof l=="boolean"?this.arcTo(o,l):this.arcTo(o,r.add(D.read(t)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(e,t){var r=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return Se[r](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,r,o,l,c){var d=e[0];if(!d)return new $;var p=new Array(6),_=d._transformCoordinates(o,new Array(6)),m=_.slice(0,2),w=m.slice(),y=new Array(2);function v(I){I._transformCoordinates(o,p);for(var k=0;k<2;k++)oe._addBounds(_[k],_[k+4],p[k+2],p[k],k,c?c[k]:0,m,w,y);var b=_;_=p,p=b}for(var C=1,P=e.length;C<P;C++)v(e[C]);return t&&v(d),new $(m[0],m[1],w[0]-m[0],w[1]-m[1])},getStrokeBounds:function(e,t,r,o,l){var c=r.getStyle(),d=c.hasStroke(),p=c.getStrokeWidth(),_=d&&r._getStrokeMatrix(o,l),m=d&&Se._getStrokePadding(p,_),w=Se.getBounds(e,t,r,o,l,m);if(!d)return w;var y=p/2,v=c.getStrokeJoin(),C=c.getStrokeCap(),P=c.getMiterLimit(),I=new $(new ee(m));function k(O){w=w.include(O)}function b(O){w=w.unite(I.setCenter(O._point.transform(o)))}function x(O,L){L==="round"||O.isSmooth()?b(O):Se._addBevelJoin(O,L,y,P,o,_,k)}function S(O,L){L==="round"?b(O):Se._addSquareCap(O,L,y,o,_,k)}var E=e.length-(t?0:1);if(E>0){for(var A=1;A<E;A++)x(e[A],v);t?x(e[0],v):(S(e[0],C),S(e[e.length-1],C))}return w},_getStrokePadding:function(e,t){if(!t)return[e,e];var r=new D(e,0).transform(t),o=new D(0,e).transform(t),l=r.getAngleInRadians(),c=r.getLength(),d=o.getLength(),p=Math.sin(l),_=Math.cos(l),m=Math.tan(l),w=Math.atan2(d*m,c),y=Math.atan2(d,m*c);return[Math.abs(c*Math.cos(w)*_+d*Math.sin(w)*p),Math.abs(d*Math.sin(y)*_+c*Math.cos(y)*p)]},_addBevelJoin:function(e,t,r,o,l,c,d,p){var _=e.getCurve(),m=_.getPrevious(),w=_.getPoint1().transform(l),y=m.getNormalAtTime(1).multiply(r).transform(c),v=_.getNormalAtTime(0).multiply(r).transform(c),C=y.getDirectedAngle(v);if((C<0||C>=180)&&(y=y.negate(),v=v.negate()),p&&d(w),d(w.add(y)),t==="miter"){var P=new pe(w.add(y),new D(-y.y,y.x),!0).intersect(new pe(w.add(v),new D(-v.y,v.x),!0),!0);P&&w.getDistance(P)<=o*r&&d(P)}d(w.add(v))},_addSquareCap:function(e,t,r,o,l,c,d){var p=e._point.transform(o),_=e.getLocation(),m=_.getNormal().multiply(_.getTime()===0?r:-r).transform(l);t==="square"&&(d&&(c(p.subtract(m)),c(p.add(m))),p=p.add(m.rotate(-90))),c(p.add(m)),c(p.subtract(m))},getHandleBounds:function(e,t,r,o,l){var c=r.getStyle(),d=l.stroke&&c.hasStroke(),p,_;if(d){var m=r._getStrokeMatrix(o,l),w=c.getStrokeWidth()/2,y=w;c.getStrokeJoin()==="miter"&&(y=w*c.getMiterLimit()),c.getStrokeCap()==="square"&&(y=Math.max(y,w*Math.SQRT2)),p=Se._getStrokePadding(w,m),_=Se._getStrokePadding(y,m)}for(var v=new Array(6),C=1/0,P=-C,I=C,k=P,b=0,x=e.length;b<x;b++){var S=e[b];S._transformCoordinates(o,v);for(var E=0;E<6;E+=2){var A=E?p:_,O=A?A[0]:0,L=A?A[1]:0,R=v[E],F=v[E+1],U=R-O,G=R+O,V=F-L,j=F+L;U<C&&(C=U),G>P&&(P=G),V<I&&(I=V),j>k&&(k=j)}}return new $(C,I,P-C,k-I)}}});Se.inject({statics:new function(){var e=.5522847498307936,t=[new Ee([-1,0],[0,e],[0,-e]),new Ee([0,-1],[-e,0],[e,0]),new Ee([1,0],[0,-e],[0,e]),new Ee([0,1],[e,0],[-e,0])];function r(l,c,d){var p=h.getNamed(d),_=new Se(p&&(p.insert==!0?B.INSERT:p.insert==!1?B.NO_INSERT:null));return _._add(l),_._closed=c,_.set(p,B.INSERT)}function o(l,c,d){for(var p=new Array(4),_=0;_<4;_++){var m=t[_];p[_]=new Ee(m._point.multiply(c).add(l),m._handleIn.multiply(c),m._handleOut.multiply(c))}return r(p,!0,d)}return{Line:function(){var l=arguments;return r([new Ee(D.readNamed(l,"from")),new Ee(D.readNamed(l,"to"))],!1,l)},Circle:function(){var l=arguments,c=D.readNamed(l,"center"),d=h.readNamed(l,"radius");return o(c,new ee(d),l)},Rectangle:function(){var l=arguments,c=$.readNamed(l,"rectangle"),d=ee.readNamed(l,"radius",0,{readNull:!0}),p=c.getBottomLeft(!0),_=c.getTopLeft(!0),m=c.getTopRight(!0),w=c.getBottomRight(!0),y;if(!d||d.isZero())y=[new Ee(p),new Ee(_),new Ee(m),new Ee(w)];else{d=ee.min(d,c.getSize(!0).divide(2));var v=d.width,C=d.height,P=v*e,I=C*e;y=[new Ee(p.add(v,0),null,[-P,0]),new Ee(p.subtract(0,C),[0,I]),new Ee(_.add(0,C),null,[0,-I]),new Ee(_.add(v,0),[-P,0],null),new Ee(m.subtract(v,0),null,[P,0]),new Ee(m.add(0,C),[0,-I],null),new Ee(w.subtract(0,C),null,[0,I]),new Ee(w.subtract(v,0),[P,0])]}return r(y,!0,l)},RoundRectangle:"#Rectangle",Ellipse:function(){var l=arguments,c=Ve._readEllipse(l);return o(c.center,c.radius,l)},Oval:"#Ellipse",Arc:function(){var l=arguments,c=D.readNamed(l,"from"),d=D.readNamed(l,"through"),p=D.readNamed(l,"to"),_=h.getNamed(l),m=new Se(_&&_.insert==!1&&B.NO_INSERT);return m.moveTo(c),m.arcTo(d,p),m.set(_)},RegularPolygon:function(){for(var l=arguments,c=D.readNamed(l,"center"),d=h.readNamed(l,"sides"),p=h.readNamed(l,"radius"),_=360/d,m=d%3===0,w=new D(0,m?-p:p),y=m?-1:.5,v=new Array(d),C=0;C<d;C++)v[C]=new Ee(c.add(w.rotate((C+y)*_)));return r(v,!0,l)},Star:function(){for(var l=arguments,c=D.readNamed(l,"center"),d=h.readNamed(l,"points")*2,p=h.readNamed(l,"radius1"),_=h.readNamed(l,"radius2"),m=360/d,w=new D(0,-1),y=new Array(d),v=0;v<d;v++)y[v]=new Ee(c.add(w.rotate(m*v).multiply(v%2?_:p)));return r(y,!0,l)}}}});var Be=Oe.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function e(t,r){var o=r,l=o[0];l&&typeof l[0]=="number"&&(o=[o]);for(var c=r.length-1;c>=0;c--){var d=o[c];o===r&&!(d instanceof Se)&&(o=h.slice(o)),Array.isArray(d)?o[c]=new Se({segments:d,insert:!1}):d instanceof Be&&(o.splice.apply(o,[c,1].concat(d.removeChildren())),d.remove())}return e.base.call(this,t,o)},reduce:function e(t){for(var r=this._children,o=r.length-1;o>=0;o--){var l=r[o].reduce(t);l.isEmpty()&&l.remove()}if(!r.length){var l=new Se(B.NO_INSERT);return l.copyAttributes(this),l.insertAbove(this),this.remove(),l}return e.base.call(this)},isClosed:function(){for(var e=this._children,t=0,r=e.length;t<r;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,r=0,o=t.length;r<o;r++)t[r].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],r=0,o=e.length;r<o;r++)h.push(t,e[r].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,r=0,o=e.length;r<o;r++)t+=e[r].getArea();return t},getLength:function(){for(var e=this._children,t=0,r=0,o=e.length;r<o;r++)t+=e[r].getLength();return t},getPathData:function(e,t){for(var r=this._children,o=[],l=0,c=r.length;l<c;l++){var d=r[l],p=d._matrix;o.push(d.getPathData(e&&!p.isIdentity()?e.appended(p):e,t))}return o.join("")},_hitTestChildren:function e(t,r,o){return e.base.call(this,t,r.class===Se||r.type==="path"?r:h.set({},r,{fill:!1}),o)},_draw:function(e,t,r,o){var l=this._children;if(l.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var c=0,d=l.length;c<d;c++)l[c].draw(e,t,o);if(!t.clip){this._setStyles(e,t,r);var p=this._style;p.hasFill()&&(e.fill(p.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),p.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,r){for(var o=this._children,l=0,c=o.length;l<c;l++){var d=o[l],p=d._matrix;r[d._id]||d._drawSelected(e,p.isIdentity()?t:t.appended(p))}}},new function(){function e(t,r){var o=t._children;if(r&&!o.length)throw new Error("Use a moveTo() command first");return o[o.length-1]}return h.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var r=e(this,!0);r[t].apply(r,arguments)}},{moveTo:function(){var t=e(this),r=t&&t.isEmpty()?t:new Se(B.NO_INSERT);r!==t&&this.addChild(r),r.moveTo.apply(r,arguments)},moveBy:function(){var t=e(this,!0),r=t&&t.getLastSegment(),o=D.read(arguments);this.moveTo(r?o.add(r._point):o)},closePath:function(t){e(this,!0).closePath(t)}})},h.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var r=this._children,o,l=0,c=r.length;l<c;l++)o=r[l][e](t)||o;return o}},{}));Oe.inject(new function(){var e=Math.min,t=Math.max,r=Math.abs,o={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function l(b){return b._children||[b]}function c(b,x){var S=b.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(x){for(var E=l(S),A=0,O=E.length;A<O;A++){var b=E[A];!b._closed&&!b.isEmpty()&&(b.closePath(1e-12),b.getFirstSegment().setHandleIn(0,0),b.getLastSegment().setHandleOut(0,0))}S=S.resolveCrossings().reorient(S.getFillRule()==="nonzero",!0)}return S}function d(b,x,S,E,A){var O=new Be(B.NO_INSERT);return O.addChildren(b,!0),O=O.reduce({simplify:x}),A&&A.insert==!1||O.insertAbove(E&&S.isSibling(E)&&S.getIndex()<E.getIndex()?E:S),O.copyAttributes(S,!0),O}function p(b){return b.hasOverlap()||b.isCrossing()}function _(b,x,S,E){if(E&&(E.trace==!1||E.stroke)&&/^(subtract|intersect)$/.test(S))return m(b,x,S);var A=c(b,!0),O=x&&b!==x&&c(x,!0),L=o[S];L[S]=!0,O&&(L.subtract||L.exclude)^(O.isClockwise()^A.isClockwise())&&O.reverse();var R=C(ct.expand(A.getIntersections(O,p))),F=l(A),U=O&&l(O),G=[],V=[],j;function Q(Pe){for(var Me=0,Re=Pe.length;Me<Re;Me++){var ze=Pe[Me];h.push(G,ze._segments),h.push(V,ze.getCurves()),ze._overlapsOnly=!0}}function Z(Pe){for(var Me=[],Re=0,ze=Pe&&Pe.length;Re<ze;Re++)Me.push(V[Pe[Re]]);return Me}if(R.length){Q(F),U&&Q(U);for(var Y=new Array(V.length),re=0,le=V.length;re<le;re++)Y[re]=V[re].getValues();for(var de=W.findCurveBoundsCollisions(Y,Y,0,!0),ve={},re=0;re<V.length;re++){var we=V[re],he=we._path._id,fe=ve[he]=ve[he]||{};fe[we.getIndex()]={hor:Z(de[re].hor),ver:Z(de[re].ver)}}for(var re=0,le=R.length;re<le;re++)I(R[re]._segment,A,O,ve,L);for(var re=0,le=G.length;re<le;re++){var xe=G[re],Ce=xe._intersection;xe._winding||I(xe,A,O,ve,L),Ce&&Ce._overlap||(xe._path._overlapsOnly=!1)}j=k(G,L)}else j=v(U?F.concat(U):F.slice(),function(Pe){return!!L[Pe]});return d(j,!0,b,x,E)}function m(b,x,S){var E=c(b),A=c(x),O=E.getIntersections(A,p),L=S==="subtract",R=S==="divide",F={},U=[];function G(Q){if(!F[Q._id]&&(R||A.contains(Q.getPointAt(Q.getLength()/2))^L))return U.unshift(Q),F[Q._id]=!0}for(var V=O.length-1;V>=0;V--){var j=O[V].split();j&&(G(j)&&j.getFirstSegment().setHandleIn(0,0),E.getLastSegment().setHandleOut(0,0))}return G(E),d(U,!1,b,x)}function w(b,x){for(var S=b;S;){if(S===x)return;S=S._previous}for(;b._next&&b._next!==x;)b=b._next;if(!b._next){for(;x._previous;)x=x._previous;b._next=x,x._previous=b}}function y(b){for(var x=b.length-1;x>=0;x--)b[x].clearHandles()}function v(b,x,S){var E=b&&b.length;if(E){var A=h.each(b,function(de,ve){this[de._id]={container:null,winding:de.isClockwise()?1:-1,index:ve}},{}),O=b.slice().sort(function(de,ve){return r(ve.getArea())-r(de.getArea())}),L=O[0],R=W.findItemBoundsCollisions(O,null,X.GEOMETRIC_EPSILON);S==null&&(S=L.isClockwise());for(var F=0;F<E;F++){var U=O[F],G=A[U._id],V=0,j=R[F];if(j){for(var Q=null,Z=j.length-1;Z>=0;Z--)if(j[Z]<F){Q=Q||U.getInteriorPoint();var Y=O[j[Z]];if(Y.contains(Q)){var re=A[Y._id];V=re.winding,G.winding+=V,G.container=re.exclude?re.container:Y;break}}}if(x(G.winding)===x(V))G.exclude=!0,b[G.index]=null;else{var le=G.container;U.setClockwise(le?!le.isClockwise():S)}}}return b}function C(b,x,S){var E=x&&[],A=1e-8,O=1-A,L=!1,R=S||[],F=S&&{},U,G,V;function j(Me){return Me._path._id+"."+Me._segment1._index}for(var Q=(S&&S.length)-1;Q>=0;Q--){var Z=S[Q];Z._path&&(F[j(Z)]=!0)}for(var Q=b.length-1;Q>=0;Q--){var Y=b[Q],re=Y._time,le=re,de=x&&!x(Y),Z=Y._curve,ve;if(Z&&(Z!==G?(L=!Z.hasHandles()||F&&F[j(Z)],U=[],V=null,G=Z):V>=A&&(re/=V)),de){U&&U.push(Y);continue}else x&&E.unshift(Y);if(V=le,re<A)ve=Z._segment1;else if(re>O)ve=Z._segment2;else{var we=Z.divideAtTime(re,!0);L&&R.push(Z,we),ve=we._segment1;for(var he=U.length-1;he>=0;he--){var fe=U[he];fe._time=(fe._time-re)/(1-re)}}Y._setSegment(ve);var xe=ve._intersection,Ce=Y._intersection;if(xe){w(xe,Ce);for(var Pe=xe;Pe;)w(Pe._intersection,xe),Pe=Pe._next}else ve._intersection=Ce}return S||y(R),E||b}function P(b,x,S,E,A){var O=Array.isArray(x)?x:x[S?"hor":"ver"],L=S?1:0,R=L^1,F=[b.x,b.y],U=F[L],G=F[R],V=1e-9,j=1e-6,Q=U-V,Z=U+V,Y=0,re=0,le=0,de=0,ve=!1,we=!1,he=1,fe=[],xe,Ce;function Pe(Qe){var gt=Qe[R+0],_t=Qe[R+6];if(!(G<e(gt,_t)||G>t(gt,_t))){var St=Qe[L+0],Qt=Qe[L+2],At=Qe[L+4],yt=Qe[L+6];if(gt===_t){(St<Z&&yt>Q||yt<Z&&St>Q)&&(ve=!0);return}var Ot=G===gt?0:G===_t||Q>t(St,Qt,At,yt)||Z<e(St,Qt,At,yt)?1:oe.solveCubic(Qe,R,G,fe,0,1)>0?fe[0]:1,Nt=Ot===0?St:Ot===1?yt:oe.getPoint(Qe,Ot)[S?"y":"x"],Xt=gt>_t?1:-1,ii=xe[R]>xe[R+6]?1:-1,mi=xe[L+6];return G!==gt?(Nt<Q?le+=Xt:Nt>Z?de+=Xt:ve=!0,Nt>U-j&&Nt<U+j&&(he/=2)):(Xt!==ii?St<Q?le+=Xt:St>Z&&(de+=Xt):St!=mi&&(mi<Z&&Nt>Z?(de+=Xt,ve=!0):mi>Q&&Nt<Q&&(le+=Xt,ve=!0)),he/=4),xe=Qe,!A&&Nt>Q&&Nt<Z&&oe.getTangent(Qe,Ot)[S?"x":"y"]===0&&P(b,x,!S,E,!0)}}function Me(Qe){var gt=Qe[R+0],_t=Qe[R+2],St=Qe[R+4],Qt=Qe[R+6];if(G<=t(gt,_t,St,Qt)&&G>=e(gt,_t,St,Qt)){for(var At=Qe[L+0],yt=Qe[L+2],Ot=Qe[L+4],Nt=Qe[L+6],Xt=Q>t(At,yt,Ot,Nt)||Z<e(At,yt,Ot,Nt)?[Qe]:oe.getMonoCurves(Qe,S),ii,mi=0,Pr=Xt.length;mi<Pr;mi++)if(ii=Pe(Xt[mi]))return ii}}for(var Re=0,ze=O.length;Re<ze;Re++){var De=O[Re],Ue=De._path,ft=De.getValues(),Ie;if((!Re||O[Re-1]._path!==Ue)&&(xe=null,Ue._closed||(Ce=oe.getValues(Ue.getLastCurve().getSegment2(),De.getSegment1(),null,!E),Ce[R]!==Ce[R+6]&&(xe=Ce)),!xe)){xe=ft;for(var Je=Ue.getLastCurve();Je&&Je!==De;){var Ke=Je.getValues();if(Ke[R]!==Ke[R+6]){xe=Ke;break}Je=Je.getPrevious()}}if(Ie=Me(ft))return Ie;if(Re+1===ze||O[Re+1]._path!==Ue){if(Ce&&(Ie=Me(Ce)))return Ie;ve&&!le&&!de&&(le=de=Ue.isClockwise(E)^S?1:-1),Y+=le,re+=de,le=de=0,ve&&(we=!0,ve=!1),Ce=null}}return Y=r(Y),re=r(re),{winding:t(Y,re),windingL:Y,windingR:re,quality:he,onPath:we}}function I(b,x,S,E,A){var O=[],L=b,R=0,V;do{var F=b.getCurve();if(F){var U=F.getLength();O.push({segment:b,curve:F,length:U}),R+=U}b=b.getNext()}while(b&&!b._intersection&&b!==L);for(var G=[.5,.25,.75],V={winding:0,quality:-1},j=.001,Q=1-j,Z=0;Z<G.length&&V.quality<.5;Z++)for(var U=R*G[Z],Y=0,re=O.length;Y<re;Y++){var le=O[Y],de=le.length;if(U<=de){var F=le.curve,ve=F._path,we=ve._parent,he=we instanceof Be?we:ve,fe=X.clamp(F.getTimeAt(U),j,Q),xe=F.getPointAtTime(fe),Ce=r(F.getTangentAtTime(fe).y)<Math.SQRT1_2,Pe=null;if(A.subtract&&S){var Me=he===x?S:x,Re=Me._getWinding(xe,Ce,!0);if(he===x&&Re.winding||he===S&&!Re.winding){if(Re.quality<1)continue;Pe={winding:0,quality:1}}}Pe=Pe||P(xe,E[ve._id][F.getIndex()],Ce,!0),Pe.quality>V.quality&&(V=Pe);break}U-=de}for(var Y=O.length-1;Y>=0;Y--)O[Y].segment._winding=V}function k(b,x){var S=[],E;function A(ze){var De;return!!(ze&&!ze._visited&&(!x||x[(De=ze._winding||{}).winding]&&!(x.unite&&De.winding===2&&De.windingL&&De.windingR)))}function O(ze){if(ze){for(var De=0,Ue=E.length;De<Ue;De++)if(ze===E[De])return!0}return!1}function L(ze){for(var De=ze._segments,Ue=0,ft=De.length;Ue<ft;Ue++)De[Ue]._visited=!0}function R(ze,De){var Ue=ze._intersection,ft=Ue,Ie=[];De&&(E=[ze]);function Je(Ke,Qe){for(;Ke&&Ke!==Qe;){var gt=Ke._segment,_t=gt&&gt._path;if(_t){var St=gt.getNext()||_t.getFirstSegment(),Qt=St._intersection;gt!==ze&&(O(gt)||O(St)||St&&A(gt)&&(A(St)||Qt&&A(Qt._segment)))&&Ie.push(gt),De&&E.push(gt)}Ke=Ke._next}}if(Ue){for(Je(Ue);Ue&&Ue._previous;)Ue=Ue._previous;Je(Ue,ft)}return Ie}b.sort(function(ze,De){var Ue=ze._intersection,ft=De._intersection,Ie=!!(Ue&&Ue._overlap),Je=!!(ft&&ft._overlap),Ke=ze._path,Qe=De._path;return Ie^Je?Ie?1:-1:!Ue^!ft?Ue?1:-1:Ke!==Qe?Ke._id-Qe._id:ze._index-De._index});for(var F=0,U=b.length;F<U;F++){var G=b[F],V=A(G),j=null,Q=!1,Z=!0,Y=[],re,le,de;if(V&&G._path._overlapsOnly){var ve=G._path,we=G._intersection._segment._path;ve.compare(we)&&(ve.getArea()&&S.push(ve.clone(!1)),L(ve),L(we),V=!1)}for(;V;){var he=!j,fe=R(G,he),xe=fe.shift(),Q=!he&&(O(G)||O(xe)),Ce=!Q&&xe;if(he&&(j=new Se(B.NO_INSERT),re=null),Q){(G.isFirst()||G.isLast())&&(Z=G._path._closed),G._visited=!0;break}if(Ce&&re&&(Y.push(re),re=null),re||(Ce&&fe.push(G),re={start:j._segments.length,crossings:fe,visited:le=[],handleIn:de}),Ce&&(G=xe),!A(G)){j.removeSegments(re.start);for(var Pe=0,Me=le.length;Pe<Me;Pe++)le[Pe]._visited=!1;le.length=0;do G=re&&re.crossings.shift(),(!G||!G._path)&&(G=null,re=Y.pop(),re&&(le=re.visited,de=re.handleIn));while(re&&!A(G));if(!G)break}var Re=G.getNext();j.add(new Ee(G._point,de,Re&&G._handleOut)),G._visited=!0,le.push(G),G=Re||G._path.getFirstSegment(),de=Re&&Re._handleIn}Q&&(Z&&(j.getFirstSegment().setHandleIn(de),j.setClosed(Z)),j.getArea()!==0&&S.push(j))}return S}return{_getWinding:function(b,x,S){return P(b,this.getCurves(),x,S)},unite:function(b,x){return _(this,b,"unite",x)},intersect:function(b,x){return _(this,b,"intersect",x)},subtract:function(b,x){return _(this,b,"subtract",x)},exclude:function(b,x){return _(this,b,"exclude",x)},divide:function(b,x){return x&&(x.trace==!1||x.stroke)?m(this,b,"divide"):d([this.subtract(b,x),this.intersect(b,x)],!0,this,b,x)},resolveCrossings:function(){var b=this._children,x=b||[this];function S(re,le){var de=re&&re._intersection;return de&&de._overlap&&de._path===le}var E=!1,A=!1,O=this.getIntersections(null,function(re){return re.hasOverlap()&&(E=!0)||re.isCrossing()&&(A=!0)}),L=E&&A&&[];if(O=ct.expand(O),E)for(var R=C(O,function(re){return re.hasOverlap()},L),F=R.length-1;F>=0;F--){var U=R[F],G=U._path,V=U._segment,j=V.getPrevious(),Q=V.getNext();S(j,G)&&S(Q,G)&&(V.remove(),j._handleOut._set(0,0),Q._handleIn._set(0,0),j!==V&&!j.getCurve().hasLength()&&(Q._handleIn.set(j._handleIn),j.remove()))}A&&(C(O,E&&function(re){var le=re.getCurve(),de=re.getSegment(),ve=re._intersection,we=ve._curve,he=ve._segment;if(le&&we&&le._path&&we._path)return!0;de&&(de._intersection=null),he&&(he._intersection=null)},L),L&&y(L),x=k(h.each(x,function(re){h.push(this,re._segments)},[])));var Z=x.length,Y;return Z>1&&b?(x!==b&&this.setChildren(x),Y=this):Z===1&&!b&&(x[0]!==this&&this.setSegments(x[0].removeSegments()),Y=this),Y||(Y=new Be(B.NO_INSERT),Y.addChildren(x),Y=Y.reduce(),Y.copyAttributes(this),this.replaceWith(Y)),Y},reorient:function(b,x){var S=this._children;return S&&S.length?this.setChildren(v(this.removeChildren(),function(E){return!!(b?E:E&1)},x)):x!==a&&this.setClockwise(x),this},getInteriorPoint:function(){var b=this.getBounds(),x=b.getCenter(!0);if(!this.contains(x)){for(var S=this.getCurves(),E=x.y,A=[],O=[],L=0,R=S.length;L<R;L++){var F=S[L].getValues(),U=F[1],G=F[3],V=F[5],j=F[7];if(E>=e(U,G,V,j)&&E<=t(U,G,V,j))for(var Q=oe.getMonoCurves(F),Z=0,Y=Q.length;Z<Y;Z++){var re=Q[Z],le=re[1],de=re[7];if(le!==de&&(E>=le&&E<=de||E>=de&&E<=le)){var ve=E===le?re[0]:E===de?re[6]:oe.solveCubic(re,1,E,O,0,1)===1?oe.getPoint(re,O[0]).x:(re[0]+re[6])/2;A.push(ve)}}}A.length>1&&(A.sort(function(we,he){return we-he}),x.x=(A[0]+A[1])/2)}return x}}});var lt=h.extend({_class:"PathFlattener",initialize:function(e,t,r,o,l){var c=[],d=[],p=0,_=1/(r||32),m=e._segments,w=m[0],y;function v(k,b){var x=oe.getValues(k,b,l);c.push(x),C(x,k._index,0,1)}function C(k,b,x,S){if(S-x>_&&!(o&&oe.isStraight(k))&&!oe.isFlatEnough(k,t||.25)){var E=oe.subdivide(k,.5),A=(x+S)/2;C(E[0],b,x,A),C(E[1],b,A,S)}else{var O=k[6]-k[0],L=k[7]-k[1],R=Math.sqrt(O*O+L*L);R>0&&(p+=R,d.push({offset:p,curve:k,index:b,time:S}))}}for(var P=1,I=m.length;P<I;P++)y=m[P],v(w,y),w=y;e._closed&&v(y||w,m[0]),this.curves=c,this.parts=d,this.length=p,this.index=0},_get:function(e){for(var t=this.parts,r=t.length,o,l=this.index;o=l,!(!l||t[--l].offset<e););for(;o<r;o++){var c=t[o];if(c.offset>=e){this.index=o;var d=t[o-1],p=d&&d.index===c.index?d.time:0,_=d?d.offset:0;return{index:c.index,time:p+(c.time-p)*(e-_)/(c.offset-_)}}}return{index:t[r-1].index,time:1}},drawPart:function(e,t,r){for(var o=this._get(t),l=this._get(r),c=o.index,d=l.index;c<=d;c++){var p=oe.getPart(this.curves[c],c===o.index?o.time:0,c===l.index?l.time:1);c===o.index&&e.moveTo(p[0],p[1]),e.bezierCurveTo.apply(e,p.slice(2))}}},h.each(oe._evaluateMethods,function(e){this[e+"At"]=function(t){var r=this._get(t);return oe[e](this.curves[r.index],r.time)}},{})),ut=h.extend({initialize:function(e){for(var t=this.points=[],r=e._segments,o=e._closed,l=0,c,d=r.length;l<d;l++){var p=r[l].point;(!c||!c.equals(p))&&t.push(c=p.clone())}o&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=o},fit:function(e){var t=this.points,r=t.length,o=null;return r>0&&(o=[new Ee(t[0])],r>1&&(this.fitCubic(o,e,0,r-1,t[1].subtract(t[0]),t[r-2].subtract(t[r-1])),this.closed&&(o.shift(),o.pop()))),o},fitCubic:function(e,t,r,o,l,c){var d=this.points;if(o-r===1){var p=d[r],_=d[o],m=p.getDistance(_)/3;this.addCurve(e,[p,p.add(l.normalize(m)),_.add(c.normalize(m)),_]);return}for(var w=this.chordLengthParameterize(r,o),y=Math.max(t,t*t),v,C=!0,P=0;P<=4;P++){var I=this.generateBezier(r,o,w,l,c),k=this.findMaxError(r,o,I,w);if(k.error<t&&C){this.addCurve(e,I);return}if(v=k.index,k.error>=y)break;C=this.reparameterize(r,o,w,I),y=k.error}var b=d[v-1].subtract(d[v+1]);this.fitCubic(e,t,r,v,l,b),this.fitCubic(e,t,v,o,b.negate(),c)},addCurve:function(e,t){var r=e[e.length-1];r.setHandleOut(t[1].subtract(t[0])),e.push(new Ee(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,r,o,l){for(var c=1e-12,d=Math.abs,p=this.points,_=p[e],m=p[t],w=[[0,0],[0,0]],y=[0,0],v=0,C=t-e+1;v<C;v++){var P=r[v],I=1-P,k=3*P*I,b=I*I*I,x=k*I,S=k*P,E=P*P*P,A=o.normalize(x),O=l.normalize(S),L=p[e+v].subtract(_.multiply(b+x)).subtract(m.multiply(S+E));w[0][0]+=A.dot(A),w[0][1]+=A.dot(O),w[1][0]=w[0][1],w[1][1]+=O.dot(O),y[0]+=A.dot(L),y[1]+=O.dot(L)}var R=w[0][0]*w[1][1]-w[1][0]*w[0][1],F,U;if(d(R)>c){var G=w[0][0]*y[1]-w[1][0]*y[0],V=y[0]*w[1][1]-y[1]*w[0][1];F=V/R,U=G/R}else{var j=w[0][0]+w[0][1],Q=w[1][0]+w[1][1];F=U=d(j)>c?y[0]/j:d(Q)>c?y[1]/Q:0}var Z=m.getDistance(_),Y=c*Z,re,le;if(F<Y||U<Y)F=U=Z/3;else{var de=m.subtract(_);re=o.normalize(F),le=l.normalize(U),re.dot(de)-le.dot(de)>Z*Z&&(F=U=Z/3,re=le=null)}return[_,_.add(re||o.normalize(F)),m.add(le||l.normalize(U)),m]},reparameterize:function(e,t,r,o){for(var l=e;l<=t;l++)r[l-e]=this.findRoot(o,this.points[l],r[l-e]);for(var l=1,c=r.length;l<c;l++)if(r[l]<=r[l-1])return!1;return!0},findRoot:function(e,t,r){for(var o=[],l=[],c=0;c<=2;c++)o[c]=e[c+1].subtract(e[c]).multiply(3);for(var c=0;c<=1;c++)l[c]=o[c+1].subtract(o[c]).multiply(2);var d=this.evaluate(3,e,r),p=this.evaluate(2,o,r),_=this.evaluate(1,l,r),m=d.subtract(t),w=p.dot(p)+m.dot(_);return X.isMachineZero(w)?r:r-m.dot(p)/w},evaluate:function(e,t,r){for(var o=t.slice(),l=1;l<=e;l++)for(var c=0;c<=e-l;c++)o[c]=o[c].multiply(1-r).add(o[c+1].multiply(r));return o[0]},chordLengthParameterize:function(e,t){for(var r=[0],o=e+1;o<=t;o++)r[o-e]=r[o-e-1]+this.points[o].getDistance(this.points[o-1]);for(var o=1,l=t-e;o<=l;o++)r[o]/=r[l];return r},findMaxError:function(e,t,r,o){for(var l=Math.floor((t-e+1)/2),c=0,d=e+1;d<t;d++){var p=this.evaluate(3,r,o[d-e]),_=p.subtract(this.points[d]),m=_.x*_.x+_.y*_.y;m>=c&&(c=m,l=d)}return{error:c,index:l}}}),zt=B.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var r=t&&h.isPlainObject(t)&&t.x===a&&t.y===a;this._initialize(r&&t,!r&&D.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Kt=zt.extend({_class:"PointText",initialize:function(){zt.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new ue(e.x,e.y,this,"setPoint")},setPoint:function(){var e=D.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,r){if(this._content){this._setStyles(e,t,r);var o=this._lines,l=this._style,c=l.hasFill(),d=l.hasStroke(),p=l.getLeading(),_=e.shadowColor;e.font=l.getFontStyle(),e.textAlign=l.getJustification();for(var m=0,w=o.length;m<w;m++){e.shadowColor=_;var y=o[m];c&&(e.fillText(y,0,0),e.shadowColor="rgba(0,0,0,0)"),d&&e.strokeText(y,0,0),e.translate(0,p)}}},_getBounds:function(e,t){var r=this._style,o=this._lines,l=o.length,c=r.getJustification(),d=r.getLeading(),p=this.getView().getTextWidth(r.getFontStyle(),o),_=0;c!=="left"&&(_-=p/(c==="center"?2:1));var m=new $(_,l?-.75*d:0,p,l*d);return e?e._transformBounds(m,m):m}}),We=h.extend(new function(){var e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},t={},r={transparent:[0,0,0,0]},o;function l(p){var _=p.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||p.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),m="rgb",w;if(_){var y=_[4]?4:3;w=new Array(y);for(var v=0;v<y;v++){var C=_[v+1];w[v]=parseInt(C.length==1?C+C:C,16)/255}}else if(_=p.match(/^(rgb|hsl)a?\((.*)\)$/)){m=_[1],w=_[2].trim().split(/[,\s]+/g);for(var P=m==="hsl",v=0,I=Math.min(w.length,4);v<I;v++){var k=w[v],C=parseFloat(k);if(P)if(v===0){var b=k.match(/([a-z]*)$/)[1];C*={turn:360,rad:180/Math.PI,grad:.9}[b]||1}else v<3&&(C/=100);else v<3&&(C/=/%$/.test(k)?100:255);w[v]=C}}else{var x=r[p];if(!x)if(u){o||(o=Pt.getContext(1,1,{willReadFrequently:!0}),o.globalCompositeOperation="copy"),o.fillStyle="rgba(0,0,0,0)",o.fillStyle=p,o.fillRect(0,0,1,1);var S=o.getImageData(0,0,1,1).data;x=r[p]=[S[0]/255,S[1]/255,S[2]/255]}else x=[0,0,0];w=x.slice()}return[m,w]}var c=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],d={"rgb-hsb":function(p,_,m){var w=Math.max(p,_,m),y=Math.min(p,_,m),v=w-y,C=v===0?0:(w==p?(_-m)/v+(_<m?6:0):w==_?(m-p)/v+2:(p-_)/v+4)*60;return[C,w===0?0:v/w,w]},"hsb-rgb":function(p,_,m){p=(p/60%6+6)%6;var y=Math.floor(p),w=p-y,y=c[y],v=[m,m*(1-_),m*(1-_*w),m*(1-_*(1-w))];return[v[y[0]],v[y[1]],v[y[2]]]},"rgb-hsl":function(p,_,m){var w=Math.max(p,_,m),y=Math.min(p,_,m),v=w-y,C=v===0,P=C?0:(w==p?(_-m)/v+(_<m?6:0):w==_?(m-p)/v+2:(p-_)/v+4)*60,I=(w+y)/2,k=C?0:I<.5?v/(w+y):v/(2-w-y);return[P,k,I]},"hsl-rgb":function(p,_,m){if(p=(p/360%1+1)%1,_===0)return[m,m,m];for(var w=[p+1/3,p,p-1/3],y=m<.5?m*(1+_):m+_-m*_,v=2*m-y,C=[],P=0;P<3;P++){var I=w[P];I<0&&(I+=1),I>1&&(I-=1),C[P]=6*I<1?v+(y-v)*6*I:2*I<1?y:3*I<2?v+(y-v)*(2/3-I)*6:v}return C},"rgb-gray":function(p,_,m){return[p*.2989+_*.587+m*.114]},"gray-rgb":function(p){return[p,p,p]},"gray-hsb":function(p){return[0,0,p]},"gray-hsl":function(p){return[0,0,p]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return h.each(e,function(p,_){t[_]=[],h.each(p,function(m,w){var y=h.capitalize(m),v=/^(hue|saturation)$/.test(m),C=t[_][w]=_==="gradient"?m==="gradient"?function(P){var I=this._components[0];return P=Wt.read(Array.isArray(P)?P:arguments,0,{readNull:!0}),I!==P&&(I&&I._removeOwner(this),P&&P._addOwner(this)),P}:function(){return D.read(arguments,0,{readNull:m==="highlight",clone:!0})}:function(P){return P==null||isNaN(P)?0:+P};this["get"+y]=function(){return this._type===_||v&&/^hs[bl]$/.test(this._type)?this._components[w]:this._convert(_)[w]},this["set"+y]=function(P){this._type!==_&&!(v&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(_),this._properties=e[_],this._type=_),this._components[w]=C.call(this,P),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function p(_){var m=arguments,w=this.__read,y=0,v,C,P,I;Array.isArray(_)&&(m=_,_=m[0]);var k=_!=null&&typeof _;if(k==="string"&&_ in e&&(v=_,_=m[1],Array.isArray(_)?(C=_,P=m[2]):(w&&(y=1),m=h.slice(m,1),k=typeof _)),!C){if(I=k==="number"?m:k==="object"&&_.length!=null?_:null,I){v||(v=I.length>=3?"rgb":"gray");var b=e[v].length;P=I[b],w&&(y+=I===arguments?b+(P!=null?1:0):1),I.length>b&&(I=h.slice(I,0,b))}else if(k==="string"){var x=l(_);v=x[0],C=x[1],C.length===4&&(P=C[3],C.length--)}else if(k==="object")if(_.constructor===p){if(v=_._type,C=_._components.slice(),P=_._alpha,v==="gradient")for(var S=1,E=C.length;S<E;S++){var A=C[S];A&&(C[S]=A.clone())}}else if(_.constructor===Wt)v="gradient",I=m;else{v="hue"in _?"lightness"in _?"hsl":"hsb":"gradient"in _||"stops"in _||"radial"in _?"gradient":"gray"in _?"gray":"rgb";var O=e[v],L=t[v];this._components=C=[];for(var S=0,E=O.length;S<E;S++){var R=_[O[S]];R==null&&!S&&v==="gradient"&&"stops"in _&&(R={stops:_.stops,radial:_.radial}),R=L[S].call(this,R),R!=null&&(C[S]=R)}P=_.alpha}w&&v&&(y=1)}if(this._type=v||"rgb",!C){this._components=C=[];for(var L=t[this._type],S=0,E=L.length;S<E;S++){var R=L[S].call(this,I&&I[S]);R!=null&&(C[S]=R)}}return this._components=C,this._properties=e[this._type],this._alpha=P,w&&(this.__read=y),this},set:"#initialize",_serialize:function(p,_){var m=this.getComponents();return h.serialize(/^(gray|rgb)$/.test(this._type)?m:[this._type].concat(m),p,!0,_)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(p){var _;return this._type===p?this._components.slice():(_=d[this._type+"-"+p])?_.apply(this,this._components):d["rgb-"+p].apply(this,d[this._type+"-rgb"].apply(this,this._components))},convert:function(p){return new We(p,this._convert(p),this._alpha)},getType:function(){return this._type},setType:function(p){this._components=this._convert(p),this._properties=e[p],this._type=p},getComponents:function(){var p=this._components.slice();return this._alpha!=null&&p.push(this._alpha),p},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(p){this._alpha=p==null?null:Math.min(Math.max(p,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(p){var _=h.isPlainValue(p,!0)?We.read(arguments):p;return _===this||_&&this._class===_._class&&this._type===_._type&&this.getAlpha()===_.getAlpha()&&h.equals(this._components,_._components)||!1},toString:function(){for(var p=this._properties,_=[],m=this._type==="gradient",w=K.instance,y=0,v=p.length;y<v;y++){var C=this._components[y];C!=null&&_.push(p[y]+": "+(m?C:w.number(C)))}return this._alpha!=null&&_.push("alpha: "+w.number(this._alpha)),"{ "+_.join(", ")+" }"},toCSS:function(p){var _=this._convert("rgb"),m=p||this._alpha==null?1:this._alpha;function w(y){return Math.round((y<0?0:y>1?1:y)*255)}return _=[w(_[0]),w(_[1]),w(_[2])],m<1&&_.push(m<0?0:m),p?"#"+((1<<24)+(_[0]<<16)+(_[1]<<8)+_[2]).toString(16).slice(1):(_.length==4?"rgba(":"rgb(")+_.join(",")+")"},toCanvasStyle:function(p,_){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var m=this._components,w=m[0],y=w._stops,v=m[1],C=m[2],P=m[3],I=_&&_.inverted(),k;if(I&&(v=I._transformPoint(v),C=I._transformPoint(C),P&&(P=I._transformPoint(P))),w._radial){var b=C.getDistance(v);if(P){var x=P.subtract(v);x.getLength()>b&&(P=v.add(x.normalize(b-.1)))}var S=P||v;k=p.createRadialGradient(S.x,S.y,0,v.x,v.y,b)}else k=p.createLinearGradient(v.x,v.y,C.x,C.y);for(var E=0,A=y.length;E<A;E++){var O=y[E],L=O._offset;k.addColorStop(L==null?E/(A-1):L,O._color.toCanvasStyle())}return this._canvasStyle=k},transform:function(p){if(this._type==="gradient"){for(var _=this._components,m=1,w=_.length;m<w;m++){var y=_[m];p._transformPoint(y,y,!0)}this._changed()}},statics:{_types:e,random:function(){var p=Math.random;return new We(p(),p(),p())},_setOwner:function(p,_,m){return p&&(p._owner&&_&&p._owner!==_&&(p=p.clone()),!p._owner^!_&&(p._owner=_||null,p._setter=m||null)),p}}})},new function(){var e={add:function(t,r){return t+r},subtract:function(t,r){return t-r},multiply:function(t,r){return t*r},divide:function(t,r){return t/r}};return h.each(e,function(t,r){this[r]=function(o){o=We.read(arguments);for(var l=this._type,c=this._components,d=o._convert(l),p=0,_=c.length;p<_;p++)d[p]=t(c[p],d[p]);return new We(l,d,this._alpha!=null?t(this._alpha,o.getAlpha()):null)}},{})}),Wt=h.extend({_class:"Gradient",initialize:function(t,r){this._id=ne.get(),t&&h.isPlainObject(t)&&(this.set(t),t=r=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof r=="string"&&r==="radial"||r||!1)},_serialize:function(e,t){return t.add(this,function(){return h.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length||(this._owners=a))},clone:function(){for(var e=[],t=0,r=this._stops.length;t<r;t++)e[t]=this._stops[t].clone();return new Wt(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var r=0,o=t.length;r<o;r++)t[r]._owner=a;t=this._stops=oi.readList(e,0,{clone:!0});for(var r=0,o=t.length;r<o;r++)t[r]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,r=e._stops,o=t.length;if(o===r.length){for(var l=0;l<o;l++)if(!t[l].equals(r[l]))return!1;return!0}}return!1}}),oi=h.extend({_class:"GradientStop",initialize:function(t,r){var o=t,l=r;typeof t=="object"&&r===a&&(Array.isArray(t)&&typeof t[0]!="number"?(o=t[0],l=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(o=t.color,l=t.offset||t.rampPoint||0)),this.setColor(o),this.setOffset(l)},clone:function(){return new oi(this._color.clone(),this._offset)},_serialize:function(e,t){var r=this._color,o=this._offset;return h.serialize(o==null?[r]:[r,o],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){We._setOwner(this._color,null),this._color=We._setOwner(We.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),an=h.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new D,selectedColor:null},t=h.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),r=h.set({},t,{fillColor:new We}),o={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},l={beans:!0},c={_class:"Style",beans:!0,initialize:function(p,_,m){this._values={},this._owner=_,this._project=_&&_._project||m||s.project,this._defaults=!_||_ instanceof Te?t:_ instanceof zt?r:e,p&&this.set(p)}};return h.each(t,function(d,p){var _=/Color$/.test(p),m=p==="shadowOffset",w=h.capitalize(p),y=o[p],v="set"+w,C="get"+w;c[v]=function(P){var I=this._owner,k=I&&I._children,b=k&&k.length>0&&!(I instanceof Be);if(b)for(var x=0,S=k.length;x<S;x++)k[x]._style[v](P);if((p==="selectedColor"||!b)&&p in this._defaults){var E=this._values[p];E!==P&&(_&&(E&&(We._setOwner(E,null),E._canvasStyle=null),P&&P.constructor===We&&(P=We._setOwner(P,I,b&&v))),this._values[p]=P,I&&I._changed(y||129))}},c[C]=function(P){var I=this._owner,k=I&&I._children,b=k&&k.length>0&&!(I instanceof Be),x;if(b&&!P)for(var S=0,E=k.length;S<E;S++){var A=k[S]._style[C]();if(!S)x=A;else if(!h.equals(x,A))return a}else if(p in this._defaults){var x=this._values[p];if(x===a)x=this._defaults[p],x&&x.clone&&(x=x.clone());else{var O=_?We:m?D:null;O&&!(x&&x.constructor===O)&&(this._values[p]=x=O.read([x],0,{readNull:!0,clone:!0}))}}return x&&_&&(x=We._setOwner(x,I,b&&v)),x},l[C]=function(P){return this._style[C](P)},l[v]=function(P){this._style[v](P)}}),h.each({Font:"FontFamily",WindingRule:"FillRule"},function(d,p){var _="get"+p,m="set"+p;c[_]=l[_]="#get"+d,c[m]=l[m]="#set"+d}),B.inject(l),c},{set:function(e){var t=e instanceof an,r=t?e._values:e;if(r){for(var o in r)if(o in this._defaults){var l=r[o];this[o]=l&&t&&l.clone?l.clone():l}}},equals:function(e){function t(r,o,l){var c=r._values,d=o._values,p=o._defaults;for(var _ in c){var m=c[_],w=d[_];if(!(l&&_ in d)&&!h.equals(m,w===a?p[_]:w))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;e=this.getFillColor(),e&&(e._canvasStyle=null),e=this.getStrokeColor(),e&&(e._canvasStyle=null),e=this.getShadowColor(),e&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),r=this.getFontSize();return/pt|em|%|px/.test(r)&&(r=this.getView().getPixelSize(r)),t!=null?t:r*1.2}}),Xe=new function(){function e(t,r,o,l){for(var c=["","webkit","moz","Moz","ms","o"],d=r[0].toUpperCase()+r.substring(1),p=0;p<6;p++){var _=c[p],m=_?_+d:r;if(m in t){if(o)t[m]=l;else return t[m];break}}}return{getStyles:function(t){var r=t&&t.nodeType!==9?t.ownerDocument:t,o=r&&r.defaultView;return o&&o.getComputedStyle(t,"")},getBounds:function(t,r){var o=t.ownerDocument,l=o.body,c=o.documentElement,d;try{d=t.getBoundingClientRect()}catch(w){d={left:0,top:0,width:0,height:0}}var p=d.left-(c.clientLeft||l.clientLeft||0),_=d.top-(c.clientTop||l.clientTop||0);if(!r){var m=o.defaultView;p+=m.pageXOffset||c.scrollLeft||l.scrollLeft,_+=m.pageYOffset||c.scrollTop||l.scrollTop}return new $(p,_,d.width,d.height)},getViewportBounds:function(t){var r=t.ownerDocument,o=r.defaultView,l=r.documentElement;return new $(0,0,o.innerWidth||l.clientWidth,o.innerHeight||l.clientHeight)},getOffset:function(t,r){return Xe.getBounds(t,r).getPoint()},getSize:function(t){return Xe.getBounds(t,!0).getSize()},isInvisible:function(t){return Xe.getSize(t).equals(new ee(0,0))},isInView:function(t){return!Xe.isInvisible(t)&&Xe.getViewportBounds(t).intersects(Xe.getBounds(t,!0))},isInserted:function(t){return g.body.contains(t)},getPrefixed:function(t,r){return t&&e(t,r)},setPrefixed:function(t,r,o){if(typeof r=="object")for(var l in r)e(t,l,!0,r[l]);else e(t,r,!0,o)}}},tt={add:function(e,t){if(e)for(var r in t)for(var o=t[r],l=r.split(/[\s,]+/g),c=0,d=l.length;c<d;c++){var p=l[c],_=e===g&&(p==="touchstart"||p==="touchmove")?{passive:!1}:!1;e.addEventListener(p,o,_)}},remove:function(e,t){if(e)for(var r in t)for(var o=t[r],l=r.split(/[\s,]+/g),c=0,d=l.length;c<d;c++)e.removeEventListener(l[c],o,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new D(t.pageX||t.clientX+g.documentElement.scrollLeft,t.pageY||t.clientY+g.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return tt.getPoint(e).subtract(Xe.getOffset(t||tt.getTarget(e)))}};tt.requestAnimationFrame=new function(){var e=Xe.getPrefixed(u,"requestAnimationFrame"),t=!1,r=[],o;function l(){var c=r;r=[];for(var d=0,p=c.length;d<p;d++)c[d]();t=e&&r.length,t&&e(l)}return function(c){r.push(c),e?t||(e(l),t=!0):o||(o=setInterval(l,1e3/60))}};var Ye=h.extend(T,{_class:"View",initialize:function e(t,r){function o(y){return r[y]||parseInt(r.getAttribute(y),10)}function l(){var y=Xe.getSize(r);return y.isNaN()||y.isZero()?new ee(o("width"),o("height")):y}var c;if(u&&r){this._id=r.getAttribute("id"),this._id==null&&r.setAttribute("id",this._id="paper-view-"+e._id++),tt.add(r,this._viewEvents);var d="none";if(Xe.setPrefixed(r.style,{userDrag:d,userSelect:d,touchCallout:d,contentZooming:d,tapHighlightColor:"rgba(0,0,0,0)"}),M.hasAttribute(r,"resize")){var p=this;tt.add(u,this._windowEvents={resize:function(){p.setViewSize(l())}})}if(c=l(),M.hasAttribute(r,"stats")&&typeof Stats!="undefined"){this._stats=new Stats;var _=this._stats.domElement,m=_.style,w=Xe.getOffset(r);m.position="absolute",m.left=w.x+"px",m.top=w.y+"px",g.body.appendChild(_)}}else c=new ee(r),r=null;this._project=t,this._scope=t._scope,this._element=r,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(c.width,c.height),this._viewSize=c,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new te)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!s.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Ye._focused===this&&(Ye._focused=null),Ye._views.splice(Ye._views.indexOf(this),1),delete Ye._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),tt.remove(this._element,this._viewEvents),tt.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:h.each(B._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;tt.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!Xe.getPrefixed(g,"hidden")||M.getAttribute(t,"keepalive")==="true")&&Xe.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){s=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new h({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var r=this._frameItems;t?(r[e._id]={item:e,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete r[e._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var r=this._frameItems[t];r.item.emit("frame",new h(e,{time:r.time+=e.delta,count:r.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=a},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var e=this._viewSize;return new ce(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=ee.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var r=this._element;r&&(r.width!==e&&(r.width=e),r.height!==t&&(r.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new $(new D,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Xe.isInView(this._element)},isInserted:function(){return Xe.isInserted(this._element)},getPixelSize:function(e){var t=this._element,r;if(t){var o=t.parentNode,l=g.createElement("div");l.style.fontSize=e,o.appendChild(l),r=parseFloat(Xe.getStyles(l).fontSize),o.removeChild(l)}else r=parseFloat(r);return r},getTextWidth:function(e,t){return 0}},h.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var r=arguments,o=(t?h:D).read(r),l=D.read(r,0,{readNull:!0});return this.transform(new te()[e](o,l||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new te;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=D.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform(new te().scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();t!=null&&e!=null&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new ue(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=D.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(D.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(D.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(D.read(arguments))},getEventPoint:function(e){return this.viewToProject(tt.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){g&&typeof t=="string"&&(t=g.getElementById(t));var r=u?kr:Ye;return new r(e,t)}}},new function(){if(!u)return;var e,t,r=!1,o=!1;function l(V){var j=tt.getTarget(V);return j.getAttribute&&Ye._viewsById[j.getAttribute("id")]}function c(){var V=Ye._focused;if(!V||!V.isVisible()){for(var j=0,Q=Ye._views.length;j<Q;j++)if((V=Ye._views[j]).isVisible()){Ye._focused=t=V;break}}}function d(V,j,Q){V._handleMouseEvent("mousemove",j,Q)}var p=u.navigator,_,m,w;p.pointerEnabled||p.msPointerEnabled?(_="pointerdown MSPointerDown",m="pointermove MSPointerMove",w="pointerup pointercancel MSPointerUp MSPointerCancel"):(_="touchstart",m="touchmove",w="touchend touchcancel","ontouchstart"in u&&p.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(_+=" mousedown",m+=" mousemove",w+=" mouseup"));var y={},v={mouseout:function(V){var j=Ye._focused,Q=tt.getRelatedTarget(V);if(j&&(!Q||Q.nodeName==="HTML")){var Z=tt.getOffset(V,j._element),Y=Z.x,re=Math.abs,le=re(Y),de=1<<25,ve=le-de;Z.x=re(ve)<le?ve*(Y<0?-1:1):Y,d(j,V,j.viewToProject(Z))}},scroll:c};y[_]=function(V){var j=Ye._focused=l(V);r||(r=!0,j._handleMouseEvent("mousedown",V))},v[m]=function(V){var j=Ye._focused;if(!o){var Q=l(V);Q?j!==Q&&(j&&d(j,V),e||(e=j),j=Ye._focused=t=Q):t&&t===j&&(e&&!e.isInserted()&&(e=null),j=Ye._focused=e,e=null,c())}j&&d(j,V)},v[_]=function(){o=!0},v[w]=function(V){var j=Ye._focused;j&&r&&j._handleMouseEvent("mouseup",V),o=r=!1},tt.add(g,v),tt.add(u,{load:c});var C=!1,P=!1,I={doubleclick:"click",mousedrag:"mousemove"},k=!1,b,x,S,E,A,O,L,R;function F(V,j,Q,Z,Y,re,le){var de=!1,ve;function we(he,fe){if(he.responds(fe)){if(ve||(ve=new Tr(fe,Z,Y,j||he,re?Y.subtract(re):null)),he.emit(fe,ve)&&(C=!0,ve.prevented&&(P=!0),ve.stopped))return de=!0}else{var xe=I[fe];if(xe)return we(he,xe)}}for(;V&&V!==le&&!we(V,Q);)V=V._parent;return de}function U(V,j,Q,Z,Y,re){return V._project.removeOn(Q),P=C=!1,A&&F(A,null,Q,Z,Y,re)||j&&j!==A&&!j.isDescendant(A)&&F(j,null,Q==="mousedrag"?"mousemove":Q,Z,Y,re,A)||F(V,A||j||V,Q,Z,Y,re)}var G={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:y,_handleMouseEvent:function(V,j,Q){var Z=this._itemEvents,Y=Z.native[V],re=V==="mousemove",le=this._scope.tool,de=this;function ve(Me){return Z.virtual[Me]||de.responds(Me)||le&&le.responds(Me)}re&&r&&ve("mousedrag")&&(V="mousedrag"),Q||(Q=this.getEventPoint(j));var we=this.getBounds().contains(Q),he=Y&&we&&de._project.hitTest(Q,{tolerance:0,fill:!0,stroke:!0}),fe=he&&he.item||null,xe=!1,Ce={};if(Ce[V.substr(5)]=!0,Y&&fe!==E&&(E&&F(E,null,"mouseleave",j,Q),fe&&F(fe,null,"mouseenter",j,Q),E=fe),k^we&&(F(this,null,we?"mouseenter":"mouseleave",j,Q),xe=!0),(we||Ce.drag)&&!Q.equals(x)&&(U(this,fe,re?V:"mousemove",j,Q,x),xe=!0),k=we,Ce.down&&we||Ce.up&&b){if(U(this,fe,V,j,Q,b),Ce.down){if(R=fe===O&&Date.now()-L<300,S=O=fe,!P&&fe){for(var Pe=fe;Pe&&!Pe.responds("mousedrag");)Pe=Pe._parent;Pe&&(A=fe)}b=Q}else Ce.up&&(!P&&fe===S&&(L=Date.now(),U(this,fe,R?"doubleclick":"click",j,Q,b),R=!1),S=A=null);k=!1,xe=!0}x=Q,xe&&le&&(C=le._handleMouseEvent(V,j,Q,Ce)||C),j.cancelable!==!1&&(C&&!Ce.move||Ce.down&&ve("mouseup"))&&j.preventDefault()},_handleKeyEvent:function(V,j,Q,Z){var Y=this._scope,re=Y.tool,le;function de(ve){ve.responds(V)&&(s=Y,ve.emit(V,le=le||new Nr(V,j,Q,Z)))}this.isVisible()&&(de(this),re&&re.responds(V)&&de(re))},_countItemEvent:function(V,j){var Q=this._itemEvents,Z=Q.native,Y=Q.virtual;for(var re in G)Z[re]=(Z[re]||0)+(G[re][V]||0)*j;Y[V]=(Y[V]||0)+j},statics:{updateFocus:c,_resetState:function(){r=o=C=k=!1,e=t=b=x=S=E=A=O=L=R=null}}}}),kr=Ye.extend({_class:"CanvasView",initialize:function(t,r){if(!(r instanceof u.HTMLCanvasElement)){var o=ee.read(arguments,1);if(o.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+h.slice(arguments,1));r=Pt.getCanvas(o)}var l=this._context=r.getContext("2d");if(l.save(),this._pixelRatio=1,!/^off|false$/.test(M.getAttribute(r,"hidpi"))){var c=u.devicePixelRatio||1,d=Xe.getPrefixed(l,"backingStorePixelRatio")||1;this._pixelRatio=c/d}Ye.call(this,t,r),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,r){var o=this._pixelRatio;if(e.base.call(this,t*o,r*o),o!==1){var l=this._element,c=this._context;if(!M.hasAttribute(l,"resize")){var d=l.style;d.width=t+"px",d.height=r+"px"}c.restore(),c.save(),c.scale(o,o)}},getContext:function(){return this._context},getPixelSize:function e(t){var r=s.agent,o;if(r&&r.firefox)o=e.base.call(this,t);else{var l=this._context,c=l.font;l.font=t+" serif",o=parseFloat(l.font),l.font=c}return o},getTextWidth:function(e,t){var r=this._context,o=r.font,l=0;r.font=e;for(var c=0,d=t.length;c<d;c++)l=Math.max(l,r.measureText(t[c]).width);return r.font=o,l},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,r=this._viewSize;return t.clearRect(0,0,r.width+1,r.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Mi=h.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return on.modifiers}}),Nr=Mi.extend({_class:"KeyEvent",initialize:function(t,r,o,l){this.type=t,this.event=r,this.key=o,this.character=l},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),on=new function(){var e={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},t={tab:"	",space:" ",enter:"\r"},r={},o={},l,c,d=new h({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var m=s&&s.agent;return m&&m.mac?this.meta:this.control}}});function p(m){var w=m.key||m.keyIdentifier;return w=/^U\+/.test(w)?String.fromCharCode(parseInt(w.substr(2),16)):/^Arrow[A-Z]/.test(w)?w.substr(5):w==="Unidentified"||w===a?String.fromCharCode(m.keyCode):w,e[w]||(w.length>1?h.hyphenate(w):w.toLowerCase())}function _(m,w,y,v){var C=Ye._focused,P;if(r[w]=m,m?o[w]=y:delete o[w],w.length>1&&(P=h.camelize(w))in d){d[P]=m;var I=s&&s.agent;if(P==="meta"&&I&&I.mac)if(m)l={};else{for(var k in l)k in o&&_(!1,k,l[k],v);l=null}}else m&&l&&(l[w]=y);C&&C._handleKeyEvent(m?"keydown":"keyup",v,w,y)}return tt.add(g,{keydown:function(m){var w=p(m),y=s&&s.agent;w.length>1||y&&y.chrome&&(m.altKey||y.mac&&m.metaKey||!y.mac&&m.ctrlKey)?_(!0,w,t[w]||(w.length>1?"":w),m):c=w},keypress:function(m){if(c){var w=p(m),y=m.charCode,v=y>=32?String.fromCharCode(y):w.length>1?"":w;w!==c&&(w=v.toLowerCase()),_(!0,w,v,m),c=null}},keyup:function(m){var w=p(m);w in o&&_(!1,w,o[w],m)}}),tt.add(u,{blur:function(m){for(var w in o)_(!1,w,o[w],m)}}),{modifiers:d,isDown:function(m){return!!r[m]}}},Tr=Mi.extend({_class:"MouseEvent",initialize:function(t,r,o,l,c){this.type=t,this.event=r,this.point=o,this.target=l,this.delta=c},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),ln=Mi.extend({_class:"ToolEvent",_item:null,initialize:function(t,r,o){this.tool=t,this.type=r,this.event=o},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,r=t._parent;/^(Group|CompoundPath)$/.test(r._class);)t=r,r=r._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),tr=z.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){z.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,e!=null&&this._maxDistance!=null&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,this._minDistance!=null&&e!=null&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,r,o){s=this._scope,o.drag&&!this.responds(e)&&(e="mousemove");var l=o.move||o.drag,c=this.responds(e),d=this.minDistance,p=this.maxDistance,_=!1,m=this;function w(v,C){var P=r,I=l?m._point:m._downPoint||P;if(l){if(m._moveCount>=0&&P.equals(I))return!1;if(I&&(v!=null||C!=null)){var k=P.subtract(I),b=k.getLength();if(b<(v||0))return!1;C&&(P=I.add(k.normalize(Math.min(b,C))))}m._moveCount++}return m._point=P,m._lastPoint=I||P,o.down&&(m._moveCount=-1,m._downPoint=P,m._downCount++),!0}function y(){c&&(_=m.emit(e,new ln(m,e,t))||_)}if(o.down)w(),y();else if(o.up)w(null,p),y();else if(c)for(;w(d,p);)y();return _}}),ir=h.extend(T,{_class:"Tween",statics:{easings:new h({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+2*(2-e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,r,o,l,c,d){this.object=t;var p=typeof c,_=p==="function";this.type=_?p:p==="string"?c:"linear",this.easing=_?c:e.easings[this.type],this.duration=l,this.running=!1,this._then=null,this._startTime=null;var m=r||o;this._keys=m?Object.keys(m):[],this._parsedKeys=this._parseKeys(this._keys),this._from=m&&this._getState(r),this._to=m&&this._getState(o),d!==!1&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),r=this._keys,o=function(w){return typeof w=="function"?w(t,e):w},l=0,c=r&&r.length;l<c;l++){var d=r[l],p=o(this._from[d]),_=o(this._to[d]),m=p&&_&&p.__add&&_.__add?_.__subtract(p).__multiply(t).__add(p):(_-p)*t+p;this._setProperty(this._parsedKeys[d],m)}this.responds("update")&&this.emit("update",new h({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,r=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(r)},_getState:function(e){for(var t=this._keys,r={},o=0,l=t.length;o<l;o++){var c=t[o],d=this._parsedKeys[c],p=this._getProperty(d),_;if(e){var m=this._resolveValue(p,e[c]);this._setProperty(d,m),_=this._getProperty(d),_=_&&_.clone?_.clone():_,this._setProperty(d,p)}else _=p&&p.clone?p.clone():p;r[c]=_}return r},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&t.length===2){var r=t[0];return r&&r.match&&r.match(/^[+\-\*\/]=/)?this._calculate(e,r[0],t[1]):t}else if(typeof t=="string"){var o=t.match(/^[+\-*/]=(.*)/);if(o){var l=JSON.parse(o[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],l)}}}return t},_calculate:function(e,t,r){return s.PaperScript.calculateBinary(e,t,r)},_parseKeys:function(e){for(var t={},r=0,o=e.length;r<o;r++){var l=e[r],c=l.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[l]=c.split("/")}return t},_getProperty:function(e,t){for(var r=this.object,o=0,l=e.length-(t||0);o<l&&r;o++)r=r[e[o]];return r},_setProperty:function(e,t){var r=this._getProperty(e,1);r&&(r[e[e.length-1]]=t)}}),Tt={request:function(e){var t=new i.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,h.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var r=t.status;r===0||r===200?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var r=t.status,o='Could not load "'+e.url+'" (Status: '+r+")";if(e.onError)e.onError(o,r);else throw new Error(o)},t.send(null)}},Pt=h.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,r){if(!u)return null;var o,l=!0;typeof e=="object"&&(t=e.height,e=e.width),this.canvases.length?o=this.canvases.pop():(o=g.createElement("canvas"),l=!1);var c=o.getContext("2d",r||{});if(!c)throw new Error("Canvas "+o+" is unable to provide a 2D context.");return o.width===e&&o.height===t?l&&c.clearRect(0,0,e+1,t+1):(o.width=e,o.height=t),c.save(),o},getContext:function(e,t,r){var o=this.getCanvas(e,t,r);return o?o.getContext("2d",r||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},pt=new function(){var e=Math.min,t=Math.max,r=Math.abs,o,l,c,d,p,_,m,w,y,v,C;function P(A,O,L){return .2989*A+.587*O+.114*L}function I(A,O,L,U){var F=U-P(A,O,L);y=A+F,v=O+F,C=L+F;var U=P(y,v,C),G=e(y,v,C),V=t(y,v,C);if(G<0){var j=U-G;y=U+(y-U)*U/j,v=U+(v-U)*U/j,C=U+(C-U)*U/j}if(V>255){var Q=255-U,Z=V-U;y=U+(y-U)*Q/Z,v=U+(v-U)*Q/Z,C=U+(C-U)*Q/Z}}function k(A,O,L){return t(A,O,L)-e(A,O,L)}function b(A,O,L,R){var F=[A,O,L],U=t(A,O,L),G=e(A,O,L),V;G=G===A?0:G===O?1:2,U=U===A?0:U===O?1:2,V=e(G,U)===0?t(G,U)===1?2:1:0,F[U]>F[G]?(F[V]=(F[V]-F[G])*R/(F[U]-F[G]),F[U]=R):F[V]=F[U]=0,F[G]=0,y=F[0],v=F[1],C=F[2]}var x={multiply:function(){y=p*o/255,v=_*l/255,C=m*c/255},screen:function(){y=p+o-p*o/255,v=_+l-_*l/255,C=m+c-m*c/255},overlay:function(){y=p<128?2*p*o/255:255-2*(255-p)*(255-o)/255,v=_<128?2*_*l/255:255-2*(255-_)*(255-l)/255,C=m<128?2*m*c/255:255-2*(255-m)*(255-c)/255},"soft-light":function(){var A=o*p/255;y=A+p*(255-(255-p)*(255-o)/255-A)/255,A=l*_/255,v=A+_*(255-(255-_)*(255-l)/255-A)/255,A=c*m/255,C=A+m*(255-(255-m)*(255-c)/255-A)/255},"hard-light":function(){y=o<128?2*o*p/255:255-2*(255-o)*(255-p)/255,v=l<128?2*l*_/255:255-2*(255-l)*(255-_)/255,C=c<128?2*c*m/255:255-2*(255-c)*(255-m)/255},"color-dodge":function(){y=p===0?0:o===255?255:e(255,255*p/(255-o)),v=_===0?0:l===255?255:e(255,255*_/(255-l)),C=m===0?0:c===255?255:e(255,255*m/(255-c))},"color-burn":function(){y=p===255?255:o===0?0:t(0,255-(255-p)*255/o),v=_===255?255:l===0?0:t(0,255-(255-_)*255/l),C=m===255?255:c===0?0:t(0,255-(255-m)*255/c)},darken:function(){y=p<o?p:o,v=_<l?_:l,C=m<c?m:c},lighten:function(){y=p>o?p:o,v=_>l?_:l,C=m>c?m:c},difference:function(){y=p-o,y<0&&(y=-y),v=_-l,v<0&&(v=-v),C=m-c,C<0&&(C=-C)},exclusion:function(){y=p+o*(255-p-p)/255,v=_+l*(255-_-_)/255,C=m+c*(255-m-m)/255},hue:function(){b(o,l,c,k(p,_,m)),I(y,v,C,P(p,_,m))},saturation:function(){b(p,_,m,k(o,l,c)),I(y,v,C,P(p,_,m))},luminosity:function(){I(p,_,m,P(o,l,c))},color:function(){I(o,l,c,P(p,_,m))},add:function(){y=e(p+o,255),v=e(_+l,255),C=e(m+c,255)},subtract:function(){y=t(p-o,0),v=t(_-l,0),C=t(m-c,0)},average:function(){y=(p+o)/2,v=(_+l)/2,C=(m+c)/2},negation:function(){y=255-r(255-o-p),v=255-r(255-l-_),C=255-r(255-c-m)}},S=this.nativeModes=h.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(A){this[A]=!0},{}),E=Pt.getContext(1,1,{willReadFrequently:!0});E&&(h.each(x,function(A,O){var L=O==="darken",R=!1;E.save();try{E.fillStyle=L?"#300":"#a00",E.fillRect(0,0,1,1),E.globalCompositeOperation=O,E.globalCompositeOperation===O&&(E.fillStyle=L?"#a00":"#300",E.fillRect(0,0,1,1),R=E.getImageData(0,0,1,1).data[0]!==L?170:51)}catch(F){}E.restore(),S[O]=R}),Pt.release(E)),this.process=function(A,O,L,R,F){var U=O.canvas,G=A==="normal";if(G||S[A])L.save(),L.setTransform(1,0,0,1,0,0),L.globalAlpha=R,G||(L.globalCompositeOperation=A),L.drawImage(U,F.x,F.y),L.restore();else{var V=x[A];if(!V)return;for(var j=L.getImageData(F.x,F.y,U.width,U.height),Q=j.data,Z=O.getImageData(0,0,U.width,U.height).data,Y=0,re=Q.length;Y<re;Y+=4){o=Z[Y],p=Q[Y],l=Z[Y+1],_=Q[Y+1],c=Z[Y+2],m=Q[Y+2],d=Z[Y+3],w=Q[Y+3],V();var le=d*R/255,de=1-le;Q[Y]=le*y+de*p,Q[Y+1]=le*v+de*_,Q[Y+2]=le*C+de*m,Q[Y+3]=d*R+de*w}L.putImageData(j,F.x,F.y)}}},It=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",r="http://www.w3.org/1999/xlink",o={href:r,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function l(p,_,m){return d(g.createElementNS(e,p),_,m)}function c(p,_){var m=o[_],w=m?p.getAttributeNS(m,_):p.getAttribute(_);return w==="null"?null:w}function d(p,_,m){for(var w in _){var y=_[w],v=o[w];typeof y=="number"&&m&&(y=m.number(y)),v?p.setAttributeNS(v,w,y):p.setAttribute(w,y)}return p}return{svg:e,xmlns:t,xlink:r,create:l,get:c,set:d}},nt=h.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof Oe||e instanceof Ve||e instanceof zt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var r=h.capitalize(t),o=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:o,fromSVG:o&&h.each(o,function(l,c){this[l]=c},{}),exportFilter:e[3],get:"get"+r,set:"set"+r}},{});new function(){var e;function t(x,S,E){var A=new h,O=x.getTranslation();if(S){var L;x.isInvertible()?(x=x._shiftless(),L=x._inverseTransform(O),O=null):L=new D,A[E?"cx":"x"]=L.x,A[E?"cy":"y"]=L.y}if(!x.isIdentity()){var R=x.decompose();if(R){var F=[],U=R.rotation,G=R.scaling,V=R.skewing;O&&!O.isZero()&&F.push("translate("+e.point(O)+")"),U&&F.push("rotate("+e.number(U)+")"),(!X.isZero(G.x-1)||!X.isZero(G.y-1))&&F.push("scale("+e.point(G)+")"),V.x&&F.push("skewX("+e.number(V.x)+")"),V.y&&F.push("skewY("+e.number(V.y)+")"),A.transform=F.join(" ")}else A.transform="matrix("+x.getValues().join(",")+")"}return A}function r(x,S){for(var E=t(x._matrix),A=x._children,O=It.create("g",E,e),L=0,R=A.length;L<R;L++){var F=A[L],U=k(F,S);if(U)if(F.isClipMask()){var G=It.create("clipPath");G.appendChild(U),P(F,G,"clip"),It.set(O,{"clip-path":"url(#"+G.id+")"})}else O.appendChild(U)}return O}function o(x,S){var E=t(x._matrix,!0),A=x.getSize(),O=x.getImage();return E.x-=A.width/2,E.y-=A.height/2,E.width=A.width,E.height=A.height,E.href=S.embedImages==!1&&O&&O.src||x.toDataURL(),It.create("image",E,e)}function l(x,S){var E=S.matchShapes;if(E){var A=x.toShape(!1);if(A)return c(A)}var O=x._segments,L=O.length,R,F=t(x._matrix);if(E&&L>=2&&!x.hasHandles())if(L>2){R=x._closed?"polygon":"polyline";for(var U=[],G=0;G<L;G++)U.push(e.point(O[G]._point));F.points=U.join(" ")}else{R="line";var V=O[0]._point,j=O[1]._point;F.set({x1:V.x,y1:V.y,x2:j.x,y2:j.y})}else R="path",F.d=x.getPathData(null,S.precision);return It.create(R,F,e)}function c(x){var S=x._type,E=x._radius,A=t(x._matrix,!0,S!=="rectangle");if(S==="rectangle"){S="rect";var O=x._size,L=O.width,R=O.height;A.x-=L/2,A.y-=R/2,A.width=L,A.height=R,E.isZero()&&(E=null)}return E&&(S==="circle"?A.r=E:(A.rx=E.width,A.ry=E.height)),It.create(S,A,e)}function d(x,S){var E=t(x._matrix),A=x.getPathData(null,S.precision);return A&&(E.d=A),It.create("path",E,e)}function p(x,S){var E=t(x._matrix,!0),A=x._definition,O=C(A,"symbol"),L=A._item,R=L.getStrokeBounds();return O||(O=It.create("symbol",{viewBox:e.rectangle(R)}),O.appendChild(k(L,S)),P(A,O,"symbol")),E.href="#"+O.id,E.x+=R.x,E.y+=R.y,E.width=R.width,E.height=R.height,E.overflow="visible",It.create("use",E,e)}function _(x){var S=C(x,"color");if(!S){var E=x.getGradient(),A=E._radial,O=x.getOrigin(),L=x.getDestination(),R;if(A){R={cx:O.x,cy:O.y,r:O.getDistance(L)};var F=x.getHighlight();F&&(R.fx=F.x,R.fy=F.y)}else R={x1:O.x,y1:O.y,x2:L.x,y2:L.y};R.gradientUnits="userSpaceOnUse",S=It.create((A?"radial":"linear")+"Gradient",R,e);for(var U=E._stops,G=0,V=U.length;G<V;G++){var j=U[G],Q=j._color,Z=Q.getAlpha(),Y=j._offset;R={offset:Y==null?G/(V-1):Y},Q&&(R["stop-color"]=Q.toCSS(!0)),Z<1&&(R["stop-opacity"]=Z),S.appendChild(It.create("stop",R,e))}P(x,S,"color")}return"url(#"+S.id+")"}function m(x){var S=It.create("text",t(x._matrix,!0),e);return S.textContent=x._content,S}var w={Group:r,Layer:r,Raster:o,Path:l,Shape:c,CompoundPath:d,SymbolItem:p,PointText:m};function y(x,S,E){var A={},O=!E&&x.getParent(),L=[];return x._name!=null&&(A.id=x._name),h.each(nt,function(R){var F=R.get,U=R.type,G=x[F]();if(R.exportFilter?R.exportFilter(x,G):!O||!h.equals(O[F](),G)){if(U==="color"&&G!=null){var V=G.getAlpha();V<1&&(A[R.attribute+"-opacity"]=V)}U==="style"?L.push(R.attribute+": "+G):A[R.attribute]=G==null?"none":U==="color"?G.gradient?_(G):G.toCSS(!0):U==="array"?G.join(","):U==="lookup"?R.toSVG[G]:G}}),L.length&&(A.style=L.join(";")),A.opacity===1&&delete A.opacity,x._visible||(A.visibility="hidden"),It.set(S,A,e)}var v;function C(x,S){return v||(v={ids:{},svgs:{}}),x&&v.svgs[S+"-"+(x._id||x.__id||(x.__id=ne.get("svg")))]}function P(x,S,E){v||C();var A=v.ids[E]=(v.ids[E]||0)+1;S.id=E+"-"+A,v.svgs[E+"-"+(x._id||x.__id)]=S}function I(x,S){var E=x,A=null;if(v){E=x.nodeName.toLowerCase()==="svg"&&x;for(var O in v.svgs)A||(E||(E=It.create("svg"),E.appendChild(x)),A=E.insertBefore(It.create("defs"),E.firstChild)),A.appendChild(v.svgs[O]);v=null}return S.asString?new i.XMLSerializer().serializeToString(E):E}function k(x,S,E){var A=w[x._class],O=A&&A(x,S);if(O){var L=S.onExport;L&&(O=L(x,O,S)||O);var R=JSON.stringify(x._data);R&&R!=="{}"&&R!=="null"&&O.setAttribute("data-paper-data",R)}return O&&y(x,O,E)}function b(x){return x||(x={}),e=new K(x.precision),x}B.inject({exportSVG:function(x){return x=b(x),I(k(this,x,!0),x)}}),ye.inject({exportSVG:function(x){x=b(x);var S=this._children,E=this.getView(),A=h.pick(x.bounds,"view"),O=x.matrix||A==="view"&&E._matrix,L=O&&te.read([O]),R=A==="view"?new $([0,0],E.getViewSize()):A==="content"?B._getBounds(S,L,{stroke:!0}).rect:$.read([A],0,{readNull:!0}),F={version:"1.1",xmlns:It.svg,"xmlns:xlink":It.xlink};R&&(F.width=R.width,F.height=R.height,(R.x||R.x===0||R.y||R.y===0)&&(F.viewBox=e.rectangle(R)));var U=It.create("svg",F,e),G=U;L&&!L.isIdentity()&&(G=U.appendChild(It.create("g",t(L),e)));for(var V=0,j=S.length;V<j;V++)G.appendChild(k(S[V],x,!0));return I(U,x)}})},new function(){var e={},t;function r(S,E,A,O,L,R){var F=It.get(S,E)||R,U=F==null?O?null:A?"":0:A?F:parseFloat(F);return/%\s*$/.test(F)?U/100*(L?1:t[/x|^width/.test(E)?"width":"height"]):U}function o(S,E,A,O,L,R,F){return E=r(S,E||"x",!1,O,L,R),A=r(S,A||"y",!1,O,L,F),O&&(E==null||A==null)?null:new D(E,A)}function l(S,E,A,O,L){return E=r(S,E||"width",!1,O,L),A=r(S,A||"height",!1,O,L),O&&(E==null||A==null)?null:new ee(E,A)}function c(S,E,A){return S==="none"?null:E==="number"?parseFloat(S):E==="array"?S?S.split(/[\s,]+/g).map(parseFloat):[]:E==="color"?k(S)||S:E==="lookup"?A[S]:S}function d(S,E,A,O){var L=S.childNodes,R=E==="clippath",F=E==="defs",U=new Te,G=U._project,V=G._currentStyle,j=[];if(!R&&!F&&(U=I(U,S,O),G._currentStyle=U._style.clone()),O)for(var Q=S.querySelectorAll("defs"),Z=0,Y=Q.length;Z<Y;Z++)b(Q[Z],A,!1);for(var Z=0,Y=L.length;Z<Y;Z++){var re=L[Z],le;re.nodeType===1&&!/^defs$/i.test(re.nodeName)&&(le=b(re,A,!1))&&!(le instanceof qe)&&j.push(le)}return U.addChildren(j),R&&(U=I(U.reduce(),S,O)),G._currentStyle=V,(R||F)&&(U.remove(),U=null),U}function p(S,E){for(var A=S.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),O=[],L=0,R=A.length;L<R;L+=2)O.push(new D(parseFloat(A[L]),parseFloat(A[L+1])));var F=new Se(O);return E==="polygon"&&F.closePath(),F}function _(S){return Oe.create(S.getAttribute("d"))}function m(S,E){var A=(r(S,"href",!0)||"").substring(1),O=E==="radialgradient",L;if(A)L=e[A].getGradient(),L._radial^O&&(L=L.clone(),L._radial=O);else{for(var R=S.childNodes,F=[],U=0,G=R.length;U<G;U++){var V=R[U];V.nodeType===1&&F.push(I(new oi,V))}L=new Wt(F,O)}var j,Q,Z,Y=r(S,"gradientUnits",!0)!=="userSpaceOnUse";O?(j=o(S,"cx","cy",!1,Y,"50%","50%"),Q=j.add(r(S,"r",!1,!1,Y,"50%"),0),Z=o(S,"fx","fy",!0,Y)):(j=o(S,"x1","y1",!1,Y,"0%","0%"),Q=o(S,"x2","y2",!1,Y,"100%","0%"));var re=I(new We(L,j,Q,Z),S);return re._scaleToBounds=Y,null}var w={"#document":function(S,E,A,O){for(var L=S.childNodes,R=0,F=L.length;R<F;R++){var U=L[R];if(U.nodeType===1)return b(U,A,O)}},g:d,svg:d,clippath:d,polygon:p,polyline:p,path:_,lineargradient:m,radialgradient:m,image:function(S){var E=new He(r(S,"href",!0));return E.on("load",function(){var A=l(S);this.setSize(A);var O=o(S).add(A.divide(2));this._matrix.append(new te().translate(O))}),E},symbol:function(S,E,A,O){return new qe(d(S,E,A,O),!0)},defs:d,use:function(S){var E=(r(S,"href",!0)||"").substring(1),A=e[E],O=o(S);return A?A instanceof qe?A.place(O):A.clone().translate(O):null},circle:function(S){return new Ve.Circle(o(S,"cx","cy"),r(S,"r"))},ellipse:function(S){return new Ve.Ellipse({center:o(S,"cx","cy"),radius:l(S,"rx","ry")})},rect:function(S){return new Ve.Rectangle(new $(o(S),l(S)),l(S,"rx","ry"))},line:function(S){return new Se.Line(o(S,"x1","y1"),o(S,"x2","y2"))},text:function(S){var E=new Kt(o(S).add(o(S,"dx","dy")));return E.setContent(S.textContent.trim()||""),E},switch:d};function y(S,E,A,O){if(S.transform){for(var L=(O.getAttribute(A)||"").split(/\)\s*/g),R=new te,F=0,U=L.length;F<U;F++){var G=L[F];if(!G)break;for(var V=G.split(/\(\s*/),j=V[0],Q=V[1].split(/[\s,]+/g),Z=0,Y=Q.length;Z<Y;Z++)Q[Z]=parseFloat(Q[Z]);switch(j){case"matrix":R.append(new te(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]));break;case"rotate":R.rotate(Q[0],Q[1]||0,Q[2]||0);break;case"translate":R.translate(Q[0],Q[1]||0);break;case"scale":R.scale(Q);break;case"skewX":R.skew(Q[0],0);break;case"skewY":R.skew(0,Q[0]);break}}S.transform(R)}}function v(S,E,A){var O=A==="fill-opacity"?"getFillColor":"getStrokeColor",L=S[O]&&S[O]();L&&L.setAlpha(parseFloat(E))}var C=h.set(h.each(nt,function(S){this[S.attribute]=function(E,A){if(E[S.set]&&(E[S.set](c(A,S.type,S.fromSVG)),S.type==="color")){var O=E[S.get]();if(O&&O._scaleToBounds){var L=E.getBounds();O.transform(new te().translate(L.getPoint()).scale(L.getSize()))}}}},{}),{id:function(S,E){e[E]=S,S.setName&&S.setName(E)},"clip-path":function(S,E){var A=k(E);if(A)if(A=A.clone(),A.setClipMask(!0),S instanceof Te)S.insertChild(0,A);else return new Te(A,S)},gradientTransform:y,transform:y,"fill-opacity":v,"stroke-opacity":v,visibility:function(S,E){S.setVisible&&S.setVisible(E==="visible")},display:function(S,E){S.setVisible&&S.setVisible(E!==null)},"stop-color":function(S,E){S.setColor&&S.setColor(E)},"stop-opacity":function(S,E){S._color&&S._color.setAlpha(parseFloat(E))},offset:function(S,E){if(S.setOffset){var A=E.match(/(.*)%$/);S.setOffset(A?A[1]/100:parseFloat(E))}},viewBox:function(S,E,A,O,L){var R=new $(c(E,"array")),F=l(O,null,null,!0),U,G;if(S instanceof Te){var V=F?F.divide(R.getSize()):1,G=new te().scale(V).translate(R.getPoint().negate());U=S}else S instanceof qe&&(F&&R.setSize(F),U=S._item);if(U){if(P(O,"overflow",L)!=="visible"){var j=new Ve.Rectangle(R);j.setClipMask(!0),U.addChild(j)}G&&U.transform(G)}}});function P(S,E,A){var O=S.attributes[E],L=O&&O.value;if(!L&&S.style){var R=h.camelize(E);L=S.style[R],!L&&A.node[R]!==A.parent[R]&&(L=A.node[R])}return L?L==="none"?null:L:a}function I(S,E,A){var O=E.parentNode,L={node:Xe.getStyles(E)||{},parent:!A&&!/^defs$/i.test(O.tagName)&&Xe.getStyles(O)||{}};return h.each(C,function(R,F){var U=P(E,F,L);S=U!==a&&R(S,U,F,E,L)||S}),S}function k(S){var E=S&&S.match(/\((?:["'#]*)([^"')]+)/),A=E&&E[1],O=A&&e[u?A.replace(u.location.href.split("#")[0]+"#",""):A];return O&&O._scaleToBounds&&(O=O.clone(),O._scaleToBounds=!0),O}function b(S,E,A){var O=S.nodeName.toLowerCase(),L=O!=="#document",R=g.body,F,U,G;A&&L&&(t=s.getView().getSize(),t=l(S,null,null,!0)||t,F=It.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),U=S.parentNode,G=S.nextSibling,F.appendChild(S),R.appendChild(F));var V=s.settings,j=V.applyMatrix,Q=V.insertItems;V.applyMatrix=!1,V.insertItems=!1;var Z=w[O],Y=Z&&Z(S,O,E,A)||null;if(V.insertItems=Q,V.applyMatrix=j,Y){L&&!(Y instanceof Te)&&(Y=I(Y,S,A));var re=E.onImport,le=L&&S.getAttribute("data-paper-data");re&&(Y=re(S,Y,E)||Y),E.expandShapes&&Y instanceof Ve&&(Y.remove(),Y=Y.toPath()),le&&(Y._data=JSON.parse(le))}return F&&(R.removeChild(F),U&&(G?U.insertBefore(S,G):U.appendChild(S))),A&&(e={},Y&&h.pick(E.applyMatrix,j)&&Y.matrix.apply(!0,!0)),Y}function x(S,E,A){if(!S)return null;E=typeof E=="function"?{onLoad:E}:E||{};var O=s,L=null;function R(V){try{var j=typeof V=="object"?V:new i.DOMParser().parseFromString(V.trim(),"image/svg+xml");if(!j.nodeName)throw j=null,new Error("Unsupported SVG source: "+S);s=O,L=b(j,E,!0),(!E||E.insert!==!1)&&A._insertItem(a,L);var Q=E.onLoad;Q&&Q(L,V)}catch(Z){F(Z)}}function F(V,j){var Q=E.onError;if(Q)Q(V,j);else throw new Error(V)}if(typeof S=="string"&&!/^[\s\S]*</.test(S)){var U=g.getElementById(S);U?R(U):Tt.request({url:S,async:!0,onLoad:R,onError:F})}else if(typeof File!="undefined"&&S instanceof File){var G=new FileReader;return G.onload=function(){R(G.result)},G.onerror=function(){F(G.error)},G.readAsText(S)}else R(S);return L}B.inject({importSVG:function(S,E){return x(S,E,this)}}),ye.inject({importSVG:function(S,E){return this.activate(),x(S,E,this)}})},h.exports.PaperScript=function(){var e=this,t=e.acorn;if(!t&&typeof T_!="undefined")try{t=A_()}catch(I){}if(!t){var r,o;t=r=o={},function(I,k){if(typeof r=="object"&&typeof o=="object")return k(r);if(typeof a=="function"&&a.amd)return a(["exports"],k);k(I.acorn||(I.acorn={}))}(this,function(I){I.version="0.5.0";var k,b,x,S;I.parse=function(se,ae){return b=String(se),x=b.length,A(ae),Bh(),dg(k.program)};var E=I.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function A(se){k=se||{};for(var ae in E)Object.prototype.hasOwnProperty.call(k,ae)||(k[ae]=E[ae]);S=k.sourceFile||null}var O=I.getLineInfo=function(se,ae){for(var me=1,Ne=0;;){Ar.lastIndex=Ne;var Ze=Ar.exec(se);if(Ze&&Ze.index<ae)++me,Ne=Ze.index+Ze[0].length;else break}return{line:me,column:ae-Ne}};I.tokenize=function(se,ae){b=String(se),x=b.length,A(ae),Bh();var me={};function Ne(Ze){return le=F,ur(Ze),me.start=R,me.end=F,me.startLoc=U,me.endLoc=G,me.type=V,me.value=j,me}return Ne.jumpTo=function(Ze,$e){if(L=Ze,k.locations){Z=1,Y=Ar.lastIndex=0;for(var et;(et=Ar.exec(b))&&et.index<Ze;)++Z,Y=et.index+et[0].length}Q=$e,Lr()},Ne};var L,R,F,U,G,V,j,Q,Z,Y,re,le,de,ve,we,he;function fe(se,ae){var me=O(b,se);ae+=" ("+me.line+":"+me.column+")";var Ne=new SyntaxError(ae);throw Ne.pos=se,Ne.loc=me,Ne.raisedAt=L,Ne}var xe=[],Ce={type:"num"},Pe={type:"regexp"},Me={type:"string"},Re={type:"name"},ze={type:"eof"},De={keyword:"break"},Ue={keyword:"case",beforeExpr:!0},ft={keyword:"catch"},Ie={keyword:"continue"},Je={keyword:"debugger"},Ke={keyword:"default"},Qe={keyword:"do",isLoop:!0},gt={keyword:"else",beforeExpr:!0},_t={keyword:"finally"},St={keyword:"for",isLoop:!0},Qt={keyword:"function"},At={keyword:"if"},yt={keyword:"return",beforeExpr:!0},Ot={keyword:"switch"},Nt={keyword:"throw",beforeExpr:!0},Xt={keyword:"try"},ii={keyword:"var"},mi={keyword:"while",isLoop:!0},Pr={keyword:"with"},nr={keyword:"new",beforeExpr:!0},gs={keyword:"this"},_s={keyword:"null",atomValue:null},ms={keyword:"true",atomValue:!0},rr={keyword:"false",atomValue:!1},rt={keyword:"in",binop:7,beforeExpr:!0},vs={break:De,case:Ue,catch:ft,continue:Ie,debugger:Je,default:Ke,do:Qe,else:gt,finally:_t,for:St,function:Qt,if:At,return:yt,switch:Ot,throw:Nt,try:Xt,var:ii,while:mi,with:Pr,null:_s,true:ms,false:rr,new:nr,in:rt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:gs,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},sr={type:"[",beforeExpr:!0},ar={type:"]"},un={type:"{",beforeExpr:!0},hn={type:"}"},Ri={type:"(",beforeExpr:!0},Ni={type:")"},f={type:",",beforeExpr:!0},N={type:";",beforeExpr:!0},H={type:":",beforeExpr:!0},q={type:"."},ie={type:"?",beforeExpr:!0},ge={binop:10,beforeExpr:!0},_e={isAssign:!0,beforeExpr:!0},Ae={isAssign:!0,beforeExpr:!0},Fe={postfix:!0,prefix:!0,isUpdate:!0},it={prefix:!0,beforeExpr:!0},at={binop:1,beforeExpr:!0},jt={binop:2,beforeExpr:!0},cn={binop:3,beforeExpr:!0},or={binop:4,beforeExpr:!0},bn={binop:5,beforeExpr:!0},Ir={binop:6,beforeExpr:!0},En={binop:7,beforeExpr:!0},kn={binop:8,beforeExpr:!0},Kp={binop:9,prefix:!0,beforeExpr:!0},Qp={binop:10,beforeExpr:!0};I.tokTypes={bracketL:sr,bracketR:ar,braceL:un,braceR:hn,parenL:Ri,parenR:Ni,comma:f,semi:N,colon:H,dot:q,question:ie,slash:ge,eq:_e,name:Re,eof:ze,num:Ce,regexp:Pe,string:Me};for(var Mh in vs)I.tokTypes["_"+Mh]=vs[Mh];function ys(se){se=se.split(" ");var ae="",me=[];e:for(var Ne=0;Ne<se.length;++Ne){for(var Ze=0;Ze<me.length;++Ze)if(me[Ze][0].length==se[Ne].length){me[Ze].push(se[Ne]);continue e}me.push([se[Ne]])}function $e(xt){if(xt.length==1)return ae+="return str === "+JSON.stringify(xt[0])+";";ae+="switch(str){";for(var Wi=0;Wi<xt.length;++Wi)ae+="case "+JSON.stringify(xt[Wi])+":";ae+="return true}return false;"}if(me.length>3){me.sort(function(xt,Wi){return Wi.length-xt.length}),ae+="switch(str.length){";for(var Ne=0;Ne<me.length;++Ne){var et=me[Ne];ae+="case "+et[0].length+":",$e(et)}ae+="}"}else $e(se);return new Function("str",ae)}var Zp=ys("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Xp=ys("class enum extends super const export import"),Rh=ys("implements interface let package private protected public static yield"),_a=ys("eval arguments"),Yp=ys("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),$p=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Dh="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Jp="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",zh=new RegExp("["+Dh+"]"),eg=new RegExp("["+Dh+Jp+"]"),ma=/[\n\r\u2028\u2029]/,Ar=/\r\n|[\n\r\u2028\u2029]/g,va=I.isIdentifierStart=function(se){return se<65?se===36:se<91?!0:se<97?se===95:se<123?!0:se>=170&&zh.test(String.fromCharCode(se))},Fh=I.isIdentifierChar=function(se){return se<48?se===36:se<58?!0:se<65?!1:se<91?!0:se<97?se===95:se<123?!0:se>=170&&eg.test(String.fromCharCode(se))};function lr(){this.line=Z,this.column=L-Y}function Bh(){Z=1,L=Y=0,Q=!0,Lr()}function ni(se,ae){F=L,k.locations&&(G=new lr),V=se,Lr(),j=ae,Q=se.beforeExpr}function tg(){var se=k.onComment&&k.locations&&new lr,ae=L,me=b.indexOf("*/",L+=2);if(me===-1&&fe(L-2,"Unterminated comment"),L=me+2,k.locations){Ar.lastIndex=ae;for(var Ne;(Ne=Ar.exec(b))&&Ne.index<L;)++Z,Y=Ne.index+Ne[0].length}k.onComment&&k.onComment(!0,b.slice(ae+2,me),ae,L,se,k.locations&&new lr)}function Yo(){for(var se=L,ae=k.onComment&&k.locations&&new lr,me=b.charCodeAt(L+=2);L<x&&me!==10&&me!==13&&me!==8232&&me!==8233;)++L,me=b.charCodeAt(L);k.onComment&&k.onComment(!1,b.slice(se+2,L),se,L,ae,k.locations&&new lr)}function Lr(){for(;L<x;){var se=b.charCodeAt(L);if(se===32)++L;else if(se===13){++L;var ae=b.charCodeAt(L);ae===10&&++L,k.locations&&(++Z,Y=L)}else if(se===10||se===8232||se===8233)++L,k.locations&&(++Z,Y=L);else if(se>8&&se<14)++L;else if(se===47){var ae=b.charCodeAt(L+1);if(ae===42)tg();else if(ae===47)Yo();else break}else if(se===160)++L;else if(se>=5760&&$p.test(String.fromCharCode(se)))++L;else break}}function ig(){var se=b.charCodeAt(L+1);return se>=48&&se<=57?Hh(!0):(++L,ni(q))}function ng(){var se=b.charCodeAt(L+1);return Q?(++L,Vh()):se===61?ri(Ae,2):ri(ge,1)}function rg(){var se=b.charCodeAt(L+1);return se===61?ri(Ae,2):ri(Qp,1)}function sg(se){var ae=b.charCodeAt(L+1);return ae===se?ri(se===124?at:jt,2):ae===61?ri(Ae,2):ri(se===124?cn:bn,1)}function ag(){var se=b.charCodeAt(L+1);return se===61?ri(Ae,2):ri(or,1)}function og(se){var ae=b.charCodeAt(L+1);return ae===se?ae==45&&b.charCodeAt(L+2)==62&&ma.test(b.slice(le,L))?(L+=3,Yo(),Lr(),ur()):ri(Fe,2):ae===61?ri(Ae,2):ri(Kp,1)}function lg(se){var ae=b.charCodeAt(L+1),me=1;return ae===se?(me=se===62&&b.charCodeAt(L+2)===62?3:2,b.charCodeAt(L+me)===61?ri(Ae,me+1):ri(kn,me)):ae==33&&se==60&&b.charCodeAt(L+2)==45&&b.charCodeAt(L+3)==45?(L+=4,Yo(),Lr(),ur()):(ae===61&&(me=b.charCodeAt(L+2)===61?3:2),ri(En,me))}function ug(se){var ae=b.charCodeAt(L+1);return ae===61?ri(Ir,b.charCodeAt(L+2)===61?3:2):ri(se===61?_e:it,1)}function hg(se){switch(se){case 46:return ig();case 40:return++L,ni(Ri);case 41:return++L,ni(Ni);case 59:return++L,ni(N);case 44:return++L,ni(f);case 91:return++L,ni(sr);case 93:return++L,ni(ar);case 123:return++L,ni(un);case 125:return++L,ni(hn);case 58:return++L,ni(H);case 63:return++L,ni(ie);case 48:var ae=b.charCodeAt(L+1);if(ae===120||ae===88)return cg();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Hh(!1);case 34:case 39:return fg(se);case 47:return ng();case 37:case 42:return rg();case 124:case 38:return sg(se);case 94:return ag();case 43:case 45:return og(se);case 60:case 62:return lg(se);case 61:case 33:return ug(se);case 126:return ri(it,1)}return!1}function ur(se){if(se?L=R+1:R=L,k.locations&&(U=new lr),se)return Vh();if(L>=x)return ni(ze);var ae=b.charCodeAt(L);if(va(ae)||ae===92)return Gh();var me=hg(ae);if(me===!1){var Ne=String.fromCharCode(ae);if(Ne==="\\"||zh.test(Ne))return Gh();fe(L,"Unexpected character '"+Ne+"'")}return me}function ri(se,ae){var me=b.slice(L,L+ae);L+=ae,ni(se,me)}function Vh(){for(var Ze="",se,ae,me=L;;){L>=x&&fe(me,"Unterminated regular expression");var Ne=b.charAt(L);if(ma.test(Ne)&&fe(me,"Unterminated regular expression"),se)se=!1;else{if(Ne==="[")ae=!0;else if(Ne==="]"&&ae)ae=!1;else if(Ne==="/"&&!ae)break;se=Ne==="\\"}++L}var Ze=b.slice(me,L);++L;var $e=Uh();$e&&!/^[gmsiy]*$/.test($e)&&fe(me,"Invalid regexp flag");try{var et=new RegExp(Ze,$e)}catch(xt){xt instanceof SyntaxError&&fe(me,xt.message),fe(xt)}return ni(Pe,et)}function ws(se,ae){for(var me=L,Ne=0,Ze=0,$e=ae==null?1/0:ae;Ze<$e;++Ze){var et=b.charCodeAt(L),xt;if(et>=97?xt=et-97+10:et>=65?xt=et-65+10:et>=48&&et<=57?xt=et-48:xt=1/0,xt>=se)break;++L,Ne=Ne*se+xt}return L===me||ae!=null&&L-me!==ae?null:Ne}function cg(){L+=2;var se=ws(16);return se==null&&fe(R+2,"Expected hexadecimal number"),va(b.charCodeAt(L))&&fe(L,"Identifier directly after number"),ni(Ce,se)}function Hh(se){var ae=L,me=!1,Ne=b.charCodeAt(L)===48;!se&&ws(10)===null&&fe(ae,"Invalid number"),b.charCodeAt(L)===46&&(++L,ws(10),me=!0);var Ze=b.charCodeAt(L);(Ze===69||Ze===101)&&(Ze=b.charCodeAt(++L),(Ze===43||Ze===45)&&++L,ws(10)===null&&fe(ae,"Invalid number"),me=!0),va(b.charCodeAt(L))&&fe(L,"Identifier directly after number");var $e=b.slice(ae,L),et;return me?et=parseFloat($e):!Ne||$e.length===1?et=parseInt($e,10):/[89]/.test($e)||he?fe(ae,"Invalid number"):et=parseInt($e,8),ni(Ce,et)}function fg(se){L++;for(var ae="";;){L>=x&&fe(R,"Unterminated string constant");var me=b.charCodeAt(L);if(me===se)return++L,ni(Me,ae);if(me===92){me=b.charCodeAt(++L);var Ne=/^[0-7]+/.exec(b.slice(L,L+3));for(Ne&&(Ne=Ne[0]);Ne&&parseInt(Ne,8)>255;)Ne=Ne.slice(0,-1);if(Ne==="0"&&(Ne=null),++L,Ne)he&&fe(L-2,"Octal literal in strict mode"),ae+=String.fromCharCode(parseInt(Ne,8)),L+=Ne.length-1;else switch(me){case 110:ae+=`
`;break;case 114:ae+="\r";break;case 120:ae+=String.fromCharCode(ya(2));break;case 117:ae+=String.fromCharCode(ya(4));break;case 85:ae+=String.fromCharCode(ya(8));break;case 116:ae+="	";break;case 98:ae+="\b";break;case 118:ae+="\v";break;case 102:ae+="\f";break;case 48:ae+="\0";break;case 13:b.charCodeAt(L)===10&&++L;case 10:k.locations&&(Y=L,++Z);break;default:ae+=String.fromCharCode(me);break}}else(me===13||me===10||me===8232||me===8233)&&fe(R,"Unterminated string constant"),ae+=String.fromCharCode(me),++L}}function ya(se){var ae=ws(16,se);return ae===null&&fe(R,"Bad character escape sequence"),ae}var Or;function Uh(){Or=!1;for(var se,ae=!0,me=L;;){var Ne=b.charCodeAt(L);if(Fh(Ne))Or&&(se+=b.charAt(L)),++L;else if(Ne===92){Or||(se=b.slice(me,L)),Or=!0,b.charCodeAt(++L)!=117&&fe(L,"Expecting Unicode escape sequence \\uXXXX"),++L;var Ze=ya(4),$e=String.fromCharCode(Ze);$e||fe(L-1,"Invalid Unicode escape"),(ae?va(Ze):Fh(Ze))||fe(L-4,"Invalid Unicode escape"),se+=$e}else break;ae=!1}return Or?se:b.slice(me,L)}function Gh(){var se=Uh(),ae=Re;return!Or&&Yp(se)&&(ae=vs[se]),ni(ae,se)}function mt(){re=R,le=F,de=G,ur()}function $o(se){if(he=se,L=R,k.locations)for(;L<Y;)Y=b.lastIndexOf(`
`,Y-2)+1,--Z;Lr(),ur()}function Wh(){this.type=null,this.start=R,this.end=null}function jh(){this.start=U,this.end=null,S!==null&&(this.source=S)}function li(){var se=new Wh;return k.locations&&(se.loc=new jh),k.directSourceFile&&(se.sourceFile=k.directSourceFile),k.ranges&&(se.range=[R,0]),se}function Nn(se){var ae=new Wh;return ae.start=se.start,k.locations&&(ae.loc=new jh,ae.loc.start=se.loc.start),k.ranges&&(ae.range=[se.range[0],0]),ae}function ot(se,ae){return se.type=ae,se.end=le,k.locations&&(se.loc.end=de),k.ranges&&(se.range[1]=le),se}function Jo(se){return k.ecmaVersion>=5&&se.type==="ExpressionStatement"&&se.expression.type==="Literal"&&se.expression.value==="use strict"}function Vt(se){if(V===se)return mt(),!0}function wa(){return!k.strictSemicolons&&(V===ze||V===hn||ma.test(b.slice(le,R)))}function hr(){!Vt(N)&&!wa()&&fn()}function Yt(se){V===se?mt():fn()}function fn(){fe(R,"Unexpected token")}function xa(se){se.type!=="Identifier"&&se.type!=="MemberExpression"&&fe(se.start,"Assigning to rvalue"),he&&se.type==="Identifier"&&_a(se.name)&&fe(se.start,"Assigning to "+se.name+" in strict mode")}function dg(se){re=le=L,k.locations&&(de=new lr),ve=he=null,we=[],ur();var ae=se||li(),me=!0;for(se||(ae.body=[]);V!==ze;){var Ne=Gi();ae.body.push(Ne),me&&Jo(Ne)&&$o(!0),me=!1}return ot(ae,"Program")}var el={kind:"loop"},pg={kind:"switch"};function Gi(){(V===ge||V===Ae&&j=="/=")&&ur(!0);var se=V,ae=li();switch(se){case De:case Ie:mt();var me=se===De;Vt(N)||wa()?ae.label=null:V!==Re?fn():(ae.label=Tn(),hr());for(var Ne=0;Ne<we.length;++Ne){var Ze=we[Ne];if((ae.label==null||Ze.name===ae.label.name)&&(Ze.kind!=null&&(me||Ze.kind==="loop")||ae.label&&me))break}return Ne===we.length&&fe(ae.start,"Unsyntactic "+se.keyword),ot(ae,me?"BreakStatement":"ContinueStatement");case Je:return mt(),hr(),ot(ae,"DebuggerStatement");case Qe:return mt(),we.push(el),ae.body=Gi(),we.pop(),Yt(mi),ae.test=xs(),hr(),ot(ae,"DoWhileStatement");case St:if(mt(),we.push(el),Yt(Ri),V===N)return tl(ae,null);if(V===ii){var $e=li();return mt(),Kh($e,!0),ot($e,"VariableDeclaration"),$e.declarations.length===1&&Vt(rt)?qh(ae,$e):tl(ae,$e)}var $e=fi(!1,!0);return Vt(rt)?(xa($e),qh(ae,$e)):tl(ae,$e);case Qt:return mt(),al(ae,!0);case At:return mt(),ae.test=xs(),ae.consequent=Gi(),ae.alternate=Vt(gt)?Gi():null,ot(ae,"IfStatement");case yt:return!ve&&!k.allowReturnOutsideFunction&&fe(R,"'return' outside of function"),mt(),Vt(N)||wa()?ae.argument=null:(ae.argument=fi(),hr()),ot(ae,"ReturnStatement");case Ot:mt(),ae.discriminant=xs(),ae.cases=[],Yt(un),we.push(pg);for(var et,xt;V!=hn;)if(V===Ue||V===Ke){var Wi=V===Ue;et&&ot(et,"SwitchCase"),ae.cases.push(et=li()),et.consequent=[],mt(),Wi?et.test=fi():(xt&&fe(re,"Multiple default clauses"),xt=!0,et.test=null),Yt(H)}else et||fn(),et.consequent.push(Gi());return et&&ot(et,"SwitchCase"),mt(),we.pop(),ot(ae,"SwitchStatement");case Nt:return mt(),ma.test(b.slice(le,R))&&fe(le,"Illegal newline after throw"),ae.argument=fi(),hr(),ot(ae,"ThrowStatement");case Xt:if(mt(),ae.block=Ss(),ae.handler=null,V===ft){var cr=li();mt(),Yt(Ri),cr.param=Tn(),he&&_a(cr.param.name)&&fe(cr.param.start,"Binding "+cr.param.name+" in strict mode"),Yt(Ni),cr.guard=null,cr.body=Ss(),ae.handler=ot(cr,"CatchClause")}return ae.guardedHandlers=xe,ae.finalizer=Vt(_t)?Ss():null,!ae.handler&&!ae.finalizer&&fe(ae.start,"Missing catch or finally clause"),ot(ae,"TryStatement");case ii:return mt(),Kh(ae),hr(),ot(ae,"VariableDeclaration");case mi:return mt(),ae.test=xs(),we.push(el),ae.body=Gi(),we.pop(),ot(ae,"WhileStatement");case Pr:return he&&fe(R,"'with' in strict mode"),mt(),ae.object=xs(),ae.body=Gi(),ot(ae,"WithStatement");case un:return Ss();case N:return mt(),ot(ae,"EmptyStatement");default:var ll=j,Sa=fi();if(se===Re&&Sa.type==="Identifier"&&Vt(H)){for(var Ne=0;Ne<we.length;++Ne)we[Ne].name===ll&&fe(Sa.start,"Label '"+ll+"' is already declared");var wg=V.isLoop?"loop":V===Ot?"switch":null;return we.push({name:ll,kind:wg}),ae.body=Gi(),we.pop(),ae.label=Sa,ot(ae,"LabeledStatement")}else return ae.expression=Sa,hr(),ot(ae,"ExpressionStatement")}}function xs(){Yt(Ri);var se=fi();return Yt(Ni),se}function Ss(se){var ae=li(),me=!0,Ne=!1,Ze;for(ae.body=[],Yt(un);!Vt(hn);){var $e=Gi();ae.body.push($e),me&&se&&Jo($e)&&(Ze=Ne,$o(Ne=!0)),me=!1}return Ne&&!Ze&&$o(!1),ot(ae,"BlockStatement")}function tl(se,ae){return se.init=ae,Yt(N),se.test=V===N?null:fi(),Yt(N),se.update=V===Ni?null:fi(),Yt(Ni),se.body=Gi(),we.pop(),ot(se,"ForStatement")}function qh(se,ae){return se.left=ae,se.right=fi(),Yt(Ni),se.body=Gi(),we.pop(),ot(se,"ForInStatement")}function Kh(se,ae){for(se.declarations=[],se.kind="var";;){var me=li();if(me.id=Tn(),he&&_a(me.id.name)&&fe(me.id.start,"Binding "+me.id.name+" in strict mode"),me.init=Vt(_e)?fi(!0,ae):null,se.declarations.push(ot(me,"VariableDeclarator")),!Vt(f))break}return se}function fi(se,ae){var me=il(ae);if(!se&&V===f){var Ne=Nn(me);for(Ne.expressions=[me];Vt(f);)Ne.expressions.push(il(ae));return ot(Ne,"SequenceExpression")}return me}function il(se){var ae=gg(se);if(V.isAssign){var me=Nn(ae);return me.operator=j,me.left=ae,mt(),me.right=il(se),xa(ae),ot(me,"AssignmentExpression")}return ae}function gg(se){var ae=_g(se);if(Vt(ie)){var me=Nn(ae);return me.test=ae,me.consequent=fi(!0),Yt(H),me.alternate=fi(!0,se),ot(me,"ConditionalExpression")}return ae}function _g(se){return nl(rl(),-1,se)}function nl(se,ae,me){var Ne=V.binop;if(Ne!=null&&(!me||V!==rt)&&Ne>ae){var Ze=Nn(se);Ze.left=se,Ze.operator=j;var $e=V;mt(),Ze.right=nl(rl(),Ne,me);var et=ot(Ze,$e===at||$e===jt?"LogicalExpression":"BinaryExpression");return nl(et,ae,me)}return se}function rl(){if(V.prefix){var se=li(),ae=V.isUpdate;return se.operator=j,se.prefix=!0,Q=!0,mt(),se.argument=rl(),ae?xa(se.argument):he&&se.operator==="delete"&&se.argument.type==="Identifier"&&fe(se.start,"Deleting local variable in strict mode"),ot(se,ae?"UpdateExpression":"UnaryExpression")}for(var me=mg();V.postfix&&!wa();){var se=Nn(me);se.operator=j,se.prefix=!1,se.argument=me,xa(me),mt(),me=ot(se,"UpdateExpression")}return me}function mg(){return Cs(sl())}function Cs(se,ae){if(Vt(q)){var me=Nn(se);return me.object=se,me.property=Tn(!0),me.computed=!1,Cs(ot(me,"MemberExpression"),ae)}else if(Vt(sr)){var me=Nn(se);return me.object=se,me.property=fi(),me.computed=!0,Yt(ar),Cs(ot(me,"MemberExpression"),ae)}else if(!ae&&Vt(Ri)){var me=Nn(se);return me.callee=se,me.arguments=ol(Ni,!1),Cs(ot(me,"CallExpression"),ae)}else return se}function sl(){switch(V){case gs:var Ne=li();return mt(),ot(Ne,"ThisExpression");case Re:return Tn();case Ce:case Me:case Pe:var Ne=li();return Ne.value=j,Ne.raw=b.slice(R,F),mt(),ot(Ne,"Literal");case _s:case ms:case rr:var Ne=li();return Ne.value=V.atomValue,Ne.raw=V.keyword,mt(),ot(Ne,"Literal");case Ri:var se=U,ae=R;mt();var me=fi();return me.start=ae,me.end=F,k.locations&&(me.loc.start=se,me.loc.end=G),k.ranges&&(me.range=[ae,F]),Yt(Ni),me;case sr:var Ne=li();return mt(),Ne.elements=ol(ar,!0,!0),ot(Ne,"ArrayExpression");case un:return yg();case Qt:var Ne=li();return mt(),al(Ne,!1);case nr:return vg();default:fn()}}function vg(){var se=li();return mt(),se.callee=Cs(sl(),!0),Vt(Ri)?se.arguments=ol(Ni,!1):se.arguments=xe,ot(se,"NewExpression")}function yg(){var se=li(),ae=!0,me=!1;for(se.properties=[],mt();!Vt(hn);){if(ae)ae=!1;else if(Yt(f),k.allowTrailingCommas&&Vt(hn))break;var Ne={key:Qh()},Ze=!1,$e;if(Vt(H)?(Ne.value=fi(!0),$e=Ne.kind="init"):k.ecmaVersion>=5&&Ne.key.type==="Identifier"&&(Ne.key.name==="get"||Ne.key.name==="set")?(Ze=me=!0,$e=Ne.kind=Ne.key.name,Ne.key=Qh(),V!==Ri&&fn(),Ne.value=al(li(),!1)):fn(),Ne.key.type==="Identifier"&&(he||me))for(var et=0;et<se.properties.length;++et){var xt=se.properties[et];if(xt.key.name===Ne.key.name){var Wi=$e==xt.kind||Ze&&xt.kind==="init"||$e==="init"&&(xt.kind==="get"||xt.kind==="set");Wi&&!he&&$e==="init"&&xt.kind==="init"&&(Wi=!1),Wi&&fe(Ne.key.start,"Redefinition of property")}}se.properties.push(Ne)}return ot(se,"ObjectExpression")}function Qh(){return V===Ce||V===Me?sl():Tn(!0)}function al(se,ae){V===Re?se.id=Tn():ae?fn():se.id=null,se.params=[];var me=!0;for(Yt(Ri);!Vt(Ni);)me?me=!1:Yt(f),se.params.push(Tn());var Ne=ve,Ze=we;if(ve=!0,we=[],se.body=Ss(!0),ve=Ne,we=Ze,he||se.body.body.length&&Jo(se.body.body[0]))for(var $e=se.id?-1:0;$e<se.params.length;++$e){var et=$e<0?se.id:se.params[$e];if((Rh(et.name)||_a(et.name))&&fe(et.start,"Defining '"+et.name+"' in strict mode"),$e>=0)for(var xt=0;xt<$e;++xt)et.name===se.params[xt].name&&fe(et.start,"Argument name clash in strict mode")}return ot(se,ae?"FunctionDeclaration":"FunctionExpression")}function ol(se,ae,me){for(var Ne=[],Ze=!0;!Vt(se);){if(Ze)Ze=!1;else if(Yt(f),ae&&k.allowTrailingCommas&&Vt(se))break;me&&V===f?Ne.push(null):Ne.push(fi(!0))}return Ne}function Tn(se){var ae=li();return se&&k.forbidReserved=="everywhere"&&(se=!1),V===Re?(!se&&(k.forbidReserved&&(k.ecmaVersion===3?Zp:Xp)(j)||he&&Rh(j))&&b.slice(R,F).indexOf("\\")==-1&&fe(R,"The keyword '"+j+"' is reserved"),ae.name=j):se&&V.keyword?ae.name=V.keyword:fn(),Q=!1,mt(),ot(ae,"Identifier")}}),t.version||(t=null)}function l(I,k){return(e.acorn||t).parse(I,k)}var c={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},d={"-":"__negate","+":"__self"},p=h.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(I){this["__"+I]="#"+I},{__self:function(){return this}});D.inject(p),ee.inject(p),We.inject(p);function _(I,k,b){var x=c[k];if(I&&I[x]){var S=I[x](b);return k==="!="?!S:S}switch(k){case"+":return I+b;case"-":return I-b;case"*":return I*b;case"/":return I/b;case"%":return I%b;case"==":return I==b;case"!=":return I!=b}}function m(I,k){var b=d[I];if(k&&k[b])return k[b]();switch(I){case"+":return+k;case"-":return-k}}function w(I,k){if(!I)return"";k=k||{};var b=[];function x(he){for(var fe=0,xe=b.length;fe<xe;fe++){var Ce=b[fe];if(Ce[0]>=he)break;he+=Ce[1]}return he}function S(he){return I.substring(x(he.range[0]),x(he.range[1]))}function E(he,fe){return I.substring(x(he.range[1]),x(fe.range[0]))}function A(he,fe){for(var xe=x(he.range[0]),Ce=x(he.range[1]),Pe=0,Me=b.length-1;Me>=0;Me--)if(xe>b[Me][0]){Pe=Me+1;break}b.splice(Pe,0,[xe,fe.length-Ce+xe]),I=I.substring(0,xe)+fe+I.substring(Ce)}function O(he,fe){switch(he.type){case"UnaryExpression":if(he.operator in d&&he.argument.type!=="Literal"){var xe=S(he.argument);A(he,'$__("'+he.operator+'", '+xe+")")}break;case"BinaryExpression":if(he.operator in c&&he.left.type!=="Literal"){var Ce=S(he.left),Pe=S(he.right),Me=E(he.left,he.right),Re=he.operator;A(he,"__$__("+Ce+","+Me.replace(new RegExp("\\"+Re),'"'+Re+'"')+", "+Pe+")")}break;case"UpdateExpression":case"AssignmentExpression":var ze=fe&&fe.type;if(!(ze==="ForStatement"||ze==="BinaryExpression"&&/^[=!<>]/.test(fe.operator)||ze==="MemberExpression"&&fe.computed)){if(he.type==="UpdateExpression"){var xe=S(he.argument),De="__$__("+xe+', "'+he.operator[0]+'", 1)',Ue=xe+" = "+De;he.prefix?Ue="("+Ue+")":(ze==="AssignmentExpression"||ze==="VariableDeclarator"||ze==="BinaryExpression")&&(S(fe.left||fe.id)===xe&&(Ue=De),Ue=xe+"; "+Ue),A(he,Ue)}else if(/^.=$/.test(he.operator)&&he.left.type!=="Literal"){var Ce=S(he.left),Pe=S(he.right),De=Ce+" = __$__("+Ce+', "'+he.operator[0]+'", '+Pe+")";A(he,/^\(.*\)$/.test(S(he))?"("+De+")":De)}}break}}function L(he){switch(he.type){case"ExportDefaultDeclaration":A({range:[he.start,he.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var fe=he.declaration,xe=he.specifiers;if(fe){var Ce=fe.declarations;Ce&&(Ce.forEach(function(Me){A(Me,"module.exports."+S(Me))}),A({range:[he.start,fe.start+fe.kind.length]},""))}else if(xe){var Pe=xe.map(function(Me){var Re=S(Me);return"module.exports."+Re+" = "+Re+"; "}).join("");Pe&&A(he,Pe)}break}}function R(he,fe,xe){if(he){for(var Ce in he)if(Ce!=="range"&&Ce!=="loc"){var Pe=he[Ce];if(Array.isArray(Pe))for(var Me=0,Re=Pe.length;Me<Re;Me++)R(Pe[Me],he,xe);else Pe&&typeof Pe=="object"&&R(Pe,he,xe)}xe.operatorOverloading!==!1&&O(he,fe),xe.moduleExports!==!1&&L(he)}}function F(he){var fe="",xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(he=(Math.abs(he)<<1)+(he<0?1:0);he||!fe;){var Ce=he&31;he>>=5,he&&(Ce|=32),fe+=xe[Ce]}return fe}var U=k.url||"",G=k.sourceMaps,V=k.paperFeatures||{},j=k.source||I,Q=k.offset||0,Z=s.agent,Y=Z.versionNumber,re=!1,le=/\r\n|\n|\r/mg,de;if(G&&(Z.chrome&&Y>=30||Z.webkit&&Y>=537.76||Z.firefox&&Y>=23||Z.node)){if(Z.node)Q-=2;else if(u&&U&&!u.location.href.indexOf(U)){var ve=g.getElementsByTagName("html")[0].innerHTML;Q=ve.substr(0,ve.indexOf(I)+1).match(le).length+1}re=Q>0&&!(Z.chrome&&Y>=36||Z.safari&&Y>=600||Z.firefox&&Y>=40||Z.node);var we=["AA"+F(re?0:Q)+"A"];we.length=(I.match(le)||[]).length+1+(re?Q:0),de={version:3,file:U,names:[],mappings:we.join(";AACA"),sourceRoot:"",sources:[U],sourcesContent:[j]}}return(V.operatorOverloading!==!1||V.moduleExports!==!1)&&R(l(I,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,V),de&&(re&&(I=new Array(Q+1).join(`
`)+I),/^(inline|both)$/.test(G)&&(I+=`
//# sourceMappingURL=data:application/json;base64,`+i.btoa(unescape(encodeURIComponent(JSON.stringify(de))))),I+=`
//# sourceURL=`+(U||"paperscript")),{url:U,source:j,code:I,map:de}}function y(I,k,b){s=k;var x=k.getView(),S=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(I)&&!/\bnew\s+Tool\b/.test(I)?new tr:null,E=S?S._events:[],A=["onFrame","onResize"].concat(E),O=[],L=[],R,F=typeof I=="object"?I:w(I,b);I=F.code;function U(Y,re){for(var le in Y)(re||!/^_/.test(le))&&new RegExp("([\\b\\s\\W]|^)"+le.replace(/\$/g,"\\$")+"\\b").test(I)&&(O.push(le),L.push(Y[le]))}U({__$__:_,$__:m,paper:k,tool:S},!0),U(k),I="var module = { exports: {} }; "+I;var Q=h.each(A,function(Y){new RegExp("\\s+"+Y+"\\b").test(I)&&(O.push(Y),this.push("module.exports."+Y+" = "+Y+";"))},[]).join(`
`);Q&&(I+=`
`+Q),I+=`
return module.exports;`;var G=s.agent;if(g&&(G.chrome||G.firefox&&G.versionNumber<40)){var V=g.createElement("script"),j=g.head||g.getElementsByTagName("head")[0];G.firefox&&(I=`
`+I),V.appendChild(g.createTextNode("document.__paperscript__ = function("+O+") {"+I+`
}`)),j.appendChild(V),R=g.__paperscript__,delete g.__paperscript__,j.removeChild(V)}else R=Function(O,I);var Q=R&&R.apply(k,L),Z=Q||{};return h.each(E,function(Y){var re=Z[Y];re&&(S[Y]=re)}),x&&(Z.onResize&&x.setOnResize(Z.onResize),x.emit("resize",{size:x.size,delta:new D}),Z.onFrame&&x.setOnFrame(Z.onFrame),x.requestUpdate()),Q}function v(I){if(/^text\/(?:x-|)paperscript$/.test(I.type)&&M.getAttribute(I,"ignore")!=="true"){var k=M.getAttribute(I,"canvas"),b=g.getElementById(k),x=I.src||I.getAttribute("data-src"),S=M.hasAttribute(I,"async"),E="data-paper-scope";if(!b)throw new Error('Unable to find canvas with id "'+k+'"');var A=M.get(b.getAttribute(E))||new M().setup(b);return b.setAttribute(E,A._id),x?Tt.request({url:x,async:S,mimeType:"text/plain",onLoad:function(O){y(O,A,x)}}):y(I.innerHTML,A,I.baseURI),I.setAttribute("data-paper-ignore","true"),A}}function C(){h.each(g&&g.getElementsByTagName("script"),v)}function P(I){return I?v(I):C()}return u&&(g.readyState==="complete"?setTimeout(C):tt.add(u,{load:C})),{compile:w,execute:y,load:P,parse:l,calculateBinary:_,calculateUnary:m}}.call(this);var s=new(M.inject(h.exports,{Base:h,Numerical:X,Key:on,DomEvent:tt,DomElement:Xe,document:g,window:u,Symbol:qe,PlacedSymbol:ht}));return s.agent.node&&ro(s),typeof a=="function"&&a.amd?a("paper",s):n&&(n.exports=s),s}).call(Mu,typeof self=="object"?self:null)})(Mf);var L_=Mf.exports;const Ls=Ru(L_);function wt(){return Ls}function O_(n){Ls.setup(n);const i=document.getElementById(n),a=new Ls.Tool;a.onMouseDown=function(){},a.onMouseDrag=function(u){const g=u.point.subtract(u.downPoint);Ls.view.center=Ls.view.center.subtract(g)},a.onMouseUp=function(){},i==null||i.addEventListener("mousewheel",function(u){const g=wt();let h=g.view.zoom;const T=g.view.zoom;u.deltaY<0?h=g.view.zoom*1.05:h=g.view.zoom*.95;const M=T/h,z=new g.Point(u.offsetX,u.offsetY),K=g.view.viewToProject(z),X=g.view.center,ne=K.subtract(X),D=K.subtract(ne.multiply(M)).subtract(X);g.view.zoom=h,g.view.center=g.view.center.add(D),u.preventDefault(),g.view.update()})}var Rf={exports:{}};/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(n){(function(i,a){i=i||ro;var u=i.window,g=i.document,h=new function(){var s=/^(statics|enumerable|beans|preserve)$/,e=[],t=e.slice,r=Object.create,o=Object.getOwnPropertyDescriptor,l=Object.defineProperty,c=e.forEach||function(y,v){for(var C=0,P=this.length;C<P;C++)y.call(v,this[C],C,this)},d=function(y,v){for(var C in this)this.hasOwnProperty(C)&&y.call(v,this[C],C,this)},p=Object.assign||function(y){for(var v=1,C=arguments.length;v<C;v++){var P=arguments[v];for(var I in P)P.hasOwnProperty(I)&&(y[I]=P[I])}return y},_=function(y,v,C){if(y){var P=o(y,"length");(P&&typeof P.value=="number"?c:d).call(y,v,C=C||y)}return C};function m(y,v,C,P,I){var k={};function b(O,L){L=L||(L=o(v,O))&&(L.get?L:L.value),typeof L=="string"&&L[0]==="#"&&(L=y[L.substring(1)]||L);var R=typeof L=="function",F=L,U=I||R&&!L.base?L&&L.get?O in y:y[O]:null,G;(!I||!U)&&(R&&U&&(L.base=U),R&&P!==!1&&(G=O.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(k[G[3].toLowerCase()+G[4]]=G[2]),(!F||R||!F.get||typeof F.get!="function"||!w.isPlainObject(F))&&(F={value:F,writable:!0}),(o(y,O)||{configurable:!0}).configurable&&(F.configurable=!0,F.enumerable=C!=null?C:!G),l(y,O,F))}if(v){for(var x in v)v.hasOwnProperty(x)&&!s.test(x)&&b(x);for(var x in k){var S=k[x],E=y["set"+S],A=y["get"+S]||E&&y["is"+S];A&&(P===!0||A.length===0)&&b(x,{get:A,set:E})}}return y}function w(){for(var y=0,v=arguments.length;y<v;y++){var C=arguments[y];C&&p(this,C)}return this}return m(w,{inject:function(y){if(y){var v=y.statics===!0?y:y.statics,C=y.beans,P=y.preserve;v!==y&&m(this.prototype,y,y.enumerable,C,P),m(this,v,null,C,P)}for(var I=1,k=arguments.length;I<k;I++)this.inject(arguments[I]);return this},extend:function(){for(var y=this,v,C,P=0,I,k=arguments.length;P<k&&!(v&&C);P++)I=arguments[P],v=v||I.initialize,C=C||I.prototype;return v=v||function(){y.apply(this,arguments)},C=v.prototype=C||r(this.prototype),l(C,"constructor",{value:v,writable:!0,configurable:!0}),m(v,this),arguments.length&&this.inject.apply(v,arguments),v.base=y,v}}).inject({enumerable:!1,initialize:w,set:w,inject:function(){for(var y=0,v=arguments.length;y<v;y++){var C=arguments[y];C&&m(this,C,C.enumerable,C.beans,C.preserve)}return this},extend:function(){var y=r(this);return y.inject.apply(y,arguments)},each:function(y,v){return _(this,y,v)},clone:function(){return new this.constructor(this)},statics:{set:p,each:_,create:r,define:l,describe:o,clone:function(y){return p(new y.constructor,y)},isPlainObject:function(y){var v=y!=null&&y.constructor;return v&&(v===Object||v===w||v.name==="Object")},pick:function(y,v){return y!==a?y:v},slice:function(y,v,C){return t.call(y,v,C)}}})};n.exports=h,h.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+h.each(this,function(s,e){if(!/^_/.test(e)){var t=typeof s;this.push(e+": "+(t==="number"?K.instance.number(s):t==="string"?"'"+s+"'":s))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(s){return h.importJSON(s,this)},exportJSON:function(s){return h.exportJSON(this,s)},toJSON:function(){return h.serialize(this)},set:function(s,e){return s&&h.filter(this,s,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function s(){var e=s.base.apply(this,arguments),t=e.prototype._class;return t&&!h.exports[t]&&(h.exports[t]=e),e},equals:function(s,e){if(s===e)return!0;if(s&&s.equals)return s.equals(e);if(e&&e.equals)return e.equals(s);if(s&&e&&typeof s=="object"&&typeof e=="object"){if(Array.isArray(s)&&Array.isArray(e)){var t=s.length;if(t!==e.length)return!1;for(;t--;)if(!h.equals(s[t],e[t]))return!1}else{var r=Object.keys(s),t=r.length;if(t!==Object.keys(e).length)return!1;for(;t--;){var o=r[t];if(!(e.hasOwnProperty(o)&&h.equals(s[o],e[o])))return!1}}return!0}return!1},read:function(s,e,t,r){if(this===h){var o=this.peek(s,e);return s.__index++,o}var l=this.prototype,c=l._readIndex,d=e||c&&s.__index||0,p=s.length,_=s[d];if(r=r||p-d,_ instanceof this||t&&t.readNull&&_==null&&r<=1)return c&&(s.__index=d+1),_&&t&&t.clone?_.clone():_;if(_=h.create(l),c&&(_.__read=!0),_=_.initialize.apply(_,d>0||d+r<p?h.slice(s,d,d+r):s)||_,c){s.__index=d+_.__read;var m=_.__filtered;m&&(s.__filtered=m,_.__filtered=a),_.__read=a}return _},peek:function(s,e){return s[s.__index=e||s.__index||0]},remain:function(s){return s.length-(s.__index||0)},readList:function(s,e,t,r){for(var o=[],l,c=e||0,d=r?c+r:s.length,p=c;p<d;p++)o.push(Array.isArray(l=s[p])?this.read(l,0,t):this.read(s,p,t,1));return o},readNamed:function(s,e,t,r,o){var l=this.getNamed(s,e),c=l!==a;if(c){var d=s.__filtered;if(!d){var p=this.getSource(s);d=s.__filtered=h.create(p),d.__unfiltered=p}d[e]=a}return this.read(c?[l]:s,t,r,o)},readSupported:function(s,e){var t=this.getSource(s),r=this,o=!1;return t&&Object.keys(t).forEach(function(l){if(l in e){var c=r.readNamed(s,l);c!==a&&(e[l]=c),o=!0}}),o},getSource:function(s){var e=s.__source;if(e===a){var t=s.length===1&&s[0];e=s.__source=t&&h.isPlainObject(t)?t:null}return e},getNamed:function(s,e){var t=this.getSource(s);if(t)return e?t[e]:s.__filtered||t},hasNamed:function(s,e){return!!this.getNamed(s,e)},filter:function(s,e,t,r){var o;function l(m){if(!(t&&m in t)&&!(o&&m in o)){var w=e[m];w!==a&&(s[m]=w)}}if(r){for(var c={},d=0,p,_=r.length;d<_;d++)(p=r[d])in e&&(l(p),c[p]=!0);o=c}return Object.keys(e.__unfiltered||e).forEach(l),s},isPlainValue:function(s,e){return h.isPlainObject(s)||Array.isArray(s)||e&&typeof s=="string"},serialize:function(s,e,t,r){e=e||{};var o=!r,l;if(o&&(e.formatter=new K(e.precision),r={length:0,definitions:{},references:{},add:function(w,y){var v="#"+w._id,C=this.references[v];if(!C){this.length++;var P=y.call(w),I=w._class;I&&P[0]!==I&&P.unshift(I),this.definitions[v]=P,C=this.references[v]=[v]}return C}}),s&&s._serialize){l=s._serialize(e,r);var c=s._class;c&&!s._compactSerialize&&(o||!t)&&l[0]!==c&&l.unshift(c)}else if(Array.isArray(s)){l=[];for(var d=0,p=s.length;d<p;d++)l[d]=h.serialize(s[d],e,t,r)}else if(h.isPlainObject(s)){l={};for(var _=Object.keys(s),d=0,p=_.length;d<p;d++){var m=_[d];l[m]=h.serialize(s[m],e,t,r)}}else typeof s=="number"?l=e.formatter.number(s,e.precision):l=s;return o&&r.length>0?[["dictionary",r.definitions],l]:l},deserialize:function(s,e,t,r,o){var l=s,c=!t,d=c&&s&&s.length&&s[0][0]==="dictionary";if(t=t||{},Array.isArray(s)){var p=s[0],_=p==="dictionary";if(s.length==1&&/^#/.test(p))return t.dictionary[p];p=h.exports[p],l=[];for(var m=p?1:0,w=s.length;m<w;m++)l.push(h.deserialize(s[m],e,t,_,d));if(p){var y=l;e?l=e(p,y,c||o):l=new p(y)}}else if(h.isPlainObject(s)){l={},r&&(t.dictionary=l);for(var v in s)l[v]=h.deserialize(s[v],e,t)}return d?l[1]:l},exportJSON:function(s,e){var t=h.serialize(s,e);return e&&e.asString==!1?t:JSON.stringify(t)},importJSON:function(s,e){return h.deserialize(typeof s=="string"?JSON.parse(s):s,function(t,r,o){var l=o&&e&&e.constructor===t,c=l?e:h.create(t.prototype);if(r.length===1&&c instanceof B&&(l||!(c instanceof ke))){var d=r[0];h.isPlainObject(d)&&(d.insert=!1,l&&(r=r.concat([B.INSERT])))}return(l?c.set:t).apply(c,r),l&&(e=null),c})},push:function(s,e){var t=e.length;if(t<4096)s.push.apply(s,e);else{var r=s.length;s.length+=t;for(var o=0;o<t;o++)s[r+o]=e[o]}return s},splice:function(s,e,t,r){var o=e&&e.length,l=t===a;t=l?s.length:t,t>s.length&&(t=s.length);for(var c=0;c<o;c++)e[c]._index=t+c;if(l)return h.push(s,e),[];var d=[t,r];e&&h.push(d,e);for(var p=s.splice.apply(s,d),c=0,_=p.length;c<_;c++)p[c]._index=a;for(var c=t+o,_=s.length;c<_;c++)s[c]._index=c;return p},capitalize:function(s){return s.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(s){return s.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},hyphenate:function(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var T={on:function(s,e){if(typeof s!="string")h.each(s,function(l,c){this.on(c,l)},this);else{var t=this._eventTypes,r=t&&t[s],o=this._callbacks=this._callbacks||{};o=o[s]=o[s]||[],o.indexOf(e)===-1&&(o.push(e),r&&r.install&&o.length===1&&r.install.call(this,s))}return this},off:function(s,e){if(typeof s!="string"){h.each(s,function(c,d){this.off(d,c)},this);return}var t=this._eventTypes,r=t&&t[s],o=this._callbacks&&this._callbacks[s],l;return o&&(!e||(l=o.indexOf(e))!==-1&&o.length===1?(r&&r.uninstall&&r.uninstall.call(this,s),delete this._callbacks[s]):l!==-1&&o.splice(l,1)),this},once:function(s,e){return this.on(s,function t(){e.apply(this,arguments),this.off(s,t)})},emit:function(s,e){var t=this._callbacks&&this._callbacks[s];if(!t)return!1;var r=h.slice(arguments,1),o=e&&e.target&&!e.currentTarget;t=t.slice(),o&&(e.currentTarget=this);for(var l=0,c=t.length;l<c;l++)if(t[l].apply(this,r)==!1){e&&e.stop&&e.stop();break}return o&&delete e.currentTarget,!0},responds:function(s){return!!(this._callbacks&&this._callbacks[s])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(s){var e=this._eventTypes,t=this._callbacks,r=s?"install":"uninstall";if(e){for(var o in t)if(t[o].length>0){var l=e[o],c=l&&l[r];c&&c.call(this,o)}}},statics:{inject:function s(e){var t=e._events;if(t){var r={};h.each(t,function(o,l){var c=typeof o=="string",d=c?o:l,p=h.capitalize(d),_=d.substring(2).toLowerCase();r[_]=c?{}:o,d="_"+d,e["get"+p]=function(){return this[d]},e["set"+p]=function(m){var w=this[d];w&&this.off(_,w),m&&this.on(_,m),this[d]=m}}),e._eventTypes=r}return s.base.apply(this,arguments)}}},M=h.extend({_class:"PaperScope",initialize:function s(){nt=this,this.settings=new h({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=s._id++,s._scopes[this._id]=this;var e=s.prototype;if(!this.support){var t=Tt.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in t||"mozDash"in t,nativeBlendModes:Pt.nativeModes},Tt.release(t)}if(!this.agent){var r=i.navigator.userAgent.toLowerCase(),o=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],l=o==="darwin"?"mac":o,c=e.agent=e.browser={platform:l};l&&(c[l]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(d,p,_,m,w){if(!c.chrome){var y=p==="opera"?m:/^(node|trident)$/.test(p)?w:_;c.version=y,c.versionNumber=parseFloat(y),p={trident:"msie",jsdom:"node"}[p]||p,c.name=p,c[p]=!0}}),c.chrome&&delete c.webkit,c.atom&&delete c.chrome}},version:"0.12.17",getView:function(){var s=this.project;return s&&s._view},getPaper:function(){return this},execute:function(s,e){},install:function(s){var e=this;h.each(["project","view","tool"],function(r){h.define(s,r,{configurable:!0,get:function(){return e[r]}})});for(var t in this)!/^_/.test(t)&&this[t]&&(s[t]=this[t])},setup:function(s){return nt=this,this.project=new ye(s),this},createCanvas:function(s,e){return Tt.getCanvas(s,e)},activate:function(){nt=this},clear:function(){for(var s=this.projects,e=this.tools,t=s.length-1;t>=0;t--)s[t].remove();for(var t=e.length-1;t>=0;t--)e[t].remove()},remove:function(){this.clear(),delete M._scopes[this._id]},statics:new function(){function s(e){return e+="Attribute",function(t,r){return t[e](r)||t[e]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:s("get"),hasAttribute:s("has")}}}),z=h.extend(T,{initialize:function(s){this._scope=nt,this._index=this._scope[this._list].push(this)-1,(s||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var s=this._scope[this._reference];return s&&s!==this&&s.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",s),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(h.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),W={findItemBoundsCollisions:function(s,e,t){function r(c){for(var d=new Array(c.length),p=0;p<c.length;p++){var _=c[p].getBounds();d[p]=[_.left,_.top,_.right,_.bottom]}return d}var o=r(s),l=!e||e===s?o:r(e);return this.findBoundsCollisions(o,l,t||0)},findCurveBoundsCollisions:function(s,e,t,r){function o(y){for(var v=Math.min,C=Math.max,P=new Array(y.length),I=0;I<y.length;I++){var k=y[I];P[I]=[v(k[0],k[2],k[4],k[6]),v(k[1],k[3],k[5],k[7]),C(k[0],k[2],k[4],k[6]),C(k[1],k[3],k[5],k[7])]}return P}var l=o(s),c=!e||e===s?l:o(e);if(r){for(var d=this.findBoundsCollisions(l,c,t||0,!1,!0),p=this.findBoundsCollisions(l,c,t||0,!0,!0),_=[],m=0,w=d.length;m<w;m++)_[m]={hor:d[m],ver:p[m]};return _}return this.findBoundsCollisions(l,c,t||0)},findBoundsCollisions:function(s,e,t,r,o){var l=!e||s===e,c=l?s:s.concat(e),d=s.length,p=c.length;function _(le,de,ve){for(var we=0,he=le.length;we<he;){var fe=he+we>>>1;c[le[fe]][de]<ve?we=fe+1:he=fe}return we-1}for(var m=r?1:0,w=m+2,y=r?0:1,v=y+2,C=new Array(p),P=0;P<p;P++)C[P]=P;C.sort(function(le,de){return c[le][m]-c[de][m]});for(var I=[],k=new Array(d),P=0;P<p;P++){var b=C[P],x=c[b],S=l?b:b-d,E=b<d,A=l||!E,O=E?[]:null;if(I.length){var L=_(I,w,x[m]-t)+1;if(I.splice(0,L),l&&o){O=O.concat(I);for(var R=0;R<I.length;R++){var F=I[R];k[F].push(S)}}else for(var U=x[v],G=x[y],R=0;R<I.length;R++){var F=I[R],V=c[F],j=F<d,Q=l||F>=d;(o||(E&&Q||A&&j)&&U>=V[y]-t&&G<=V[v]+t)&&(E&&Q&&O.push(l?F:F-d),A&&j&&k[F].push(S))}}if(E&&(s===e&&O.push(b),k[b]=O),I.length){var Z=x[w],Y=_(I,w,Z);I.splice(Y+1,0,b)}else I.push(b)}for(var P=0;P<k.length;P++){var re=k[P];re&&re.sort(function(de,ve){return de-ve})}return k}},K=h.extend({initialize:function(s){this.precision=h.pick(s,5),this.multiplier=Math.pow(10,this.precision)},number:function(s){return this.precision<16?Math.round(s*this.multiplier)/this.multiplier:s},pair:function(s,e,t){return this.number(s)+(t||",")+this.number(e)},point:function(s,e){return this.number(s.x)+(e||",")+this.number(s.y)},size:function(s,e){return this.number(s.width)+(e||",")+this.number(s.height)},rectangle:function(s,e){return this.point(s,e)+(e||",")+this.size(s,e)}});K.instance=new K;var X=new function(){var s=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],t=Math.abs,r=Math.sqrt,o=Math.pow,l=Math.log2||function(w){return Math.log(w)*Math.LOG2E},c=1e-12,d=112e-18;function p(w,y,v){return w<y?y:w>v?v:w}function _(w,y,v){function C(L){var R=L*134217729,F=L-R,U=F+R,G=L-U;return[U,G]}var P=y*y-w*v,I=y*y+w*v;if(t(P)*3<I){var k=C(w),b=C(y),x=C(v),S=y*y,E=b[0]*b[0]-S+2*b[0]*b[1]+b[1]*b[1],A=w*v,O=k[0]*x[0]-A+k[0]*x[1]+k[1]*x[0]+k[1]*x[1];P=S-A+(E-O)}return P}function m(){var w=Math.max.apply(Math,arguments);return w&&(w<1e-8||w>1e8)?o(2,-Math.round(l(w))):0}return{EPSILON:c,MACHINE_EPSILON:d,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(w){return w>=-c&&w<=c},isMachineZero:function(w){return w>=-d&&w<=d},clamp:p,integrate:function(w,y,v,C){for(var P=s[C-2],I=e[C-2],k=(v-y)*.5,b=k+y,x=0,S=C+1>>1,E=C&1?I[x++]*w(b):0;x<S;){var A=k*P[x];E+=I[x++]*(w(b+A)+w(b-A))}return k*E},findRoot:function(w,y,v,C,P,I,k){for(var b=0;b<I;b++){var x=w(v),S=x/y(v),E=v-S;if(t(S)<k){v=E;break}x>0?(P=v,v=E<=C?(C+P)*.5:E):(C=v,v=E>=P?(C+P)*.5:E)}return p(v,C,P)},solveQuadratic:function(w,y,v,C,P,I){var k,b=1/0;if(t(w)<c){if(t(y)<c)return t(v)<c?-1:0;k=-v/y}else{y*=-.5;var x=_(w,y,v);if(x&&t(x)<d){var S=m(t(w),t(y),t(v));S&&(w*=S,y*=S,v*=S,x=_(w,y,v))}if(x>=-d){var E=x<0?0:r(x),A=y+(y<0?-E:E);A===0?(k=v/w,b=-k):(k=A/w,b=v/A)}}var O=0,L=P==null,R=P-c,F=I+c;return isFinite(k)&&(L||k>R&&k<F)&&(C[O++]=L?k:p(k,P,I)),b!==k&&isFinite(b)&&(L||b>R&&b<F)&&(C[O++]=L?b:p(b,P,I)),O},solveCubic:function(w,y,v,C,P,I,k){var b=m(t(w),t(y),t(v),t(C)),x,S,E,A,O;b&&(w*=b,y*=b,v*=b,C*=b);function L(Y){x=Y;var re=w*x;S=re+y,E=S*x+v,A=(re+S)*x+E,O=E*x+C}if(t(w)<c)w=y,S=v,E=C,x=1/0;else if(t(C)<c)S=y,E=v,x=0;else{L(-(y/w)/3);var R=O/w,F=o(t(R),1/3),U=R<0?-1:1,G=-A/w,V=G>0?1.324717957244746*Math.max(F,r(G)):F,j=x-U*V;if(j!==x){do L(j),j=A===0?x:x-O/A/(1+d);while(U*j>U*x);t(w)*x*x>t(C/x)&&(E=-C/x,S=(E-v)/x)}}var Q=X.solveQuadratic(w,S,E,P,I,k),Z=I==null;return isFinite(x)&&(Q===0||Q>0&&x!==P[0]&&x!==P[1])&&(Z||x>I-c&&x<k+c)&&(P[Q++]=Z?x:p(x,I,k)),Q}}},ne={_id:1,_pools:{},get:function(s){if(s){var e=this._pools[s];return e||(e=this._pools[s]={_id:1}),e._id++}else return this._id++}},D=h.extend({_class:"Point",_readIndex:!0,initialize:function(e,t){var r=typeof e,o=this.__read,l=0;if(r==="number"){var c=typeof t=="number";this._set(e,c?t:e),o&&(l=c?2:1)}else if(r==="undefined"||e===null)this._set(0,0),o&&(l=e===null?1:0);else{var d=r==="string"?e.split(/[\s,]+/)||[]:e;l=1,Array.isArray(d)?this._set(+d[0],+(d.length>1?d[1]:d[0])):"x"in d?this._set(d.x||0,d.y||0):"width"in d?this._set(d.width||0,d.height||0):"angle"in d?(this._set(d.length||0,0),this.setAngle(d.angle||0)):(this._set(0,0),l=0)}return o&&(this.__read=l),this},set:"#initialize",_set:function(s,e){return this.x=s,this.y=e,this},equals:function(s){return this===s||s&&(this.x===s.x&&this.y===s.y||Array.isArray(s)&&this.x===s[0]&&this.y===s[1])||!1},clone:function(){return new D(this.x,this.y)},toString:function(){var s=K.instance;return"{ x: "+s.number(this.x)+", y: "+s.number(this.y)+" }"},_serialize:function(s){var e=s.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(s){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*s,Math.sin(e)*s)}else{var t=s/this.getLength();X.isZero(t)&&this.getAngle(),this._set(this.x*t,this.y*t)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(s){this.setAngleInRadians.call(this,s*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var s=D.read(arguments),e=this.getLength()*s.getLength();if(X.isZero(e))return NaN;var t=this.dot(s)/e;return Math.acos(t<-1?-1:t>1?1:t)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(s){if(this._angle=s,!this.isZero()){var e=this.getLength();this._set(Math.cos(s)*e,Math.sin(s)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var s=D.read(arguments);return Math.atan2(this.cross(s),this.dot(s))*180/Math.PI},getDistance:function(){var s=arguments,e=D.read(s),t=e.x-this.x,r=e.y-this.y,o=t*t+r*r,l=h.read(s);return l?o:Math.sqrt(o)},normalize:function(s){s===a&&(s=1);var e=this.getLength(),t=e!==0?s/e:0,r=new D(this.x*t,this.y*t);return t>=0&&(r._angle=this._angle),r},rotate:function(s,e){if(s===0)return this.clone();s=s*Math.PI/180;var t=e?this.subtract(e):this,r=Math.sin(s),o=Math.cos(s);return t=new D(t.x*o-t.y*r,t.x*r+t.y*o),e?t.add(e):t},transform:function(s){return s?s._transformPoint(this):this},add:function(){var s=D.read(arguments);return new D(this.x+s.x,this.y+s.y)},subtract:function(){var s=D.read(arguments);return new D(this.x-s.x,this.y-s.y)},multiply:function(){var s=D.read(arguments);return new D(this.x*s.x,this.y*s.y)},divide:function(){var s=D.read(arguments);return new D(this.x/s.x,this.y/s.y)},modulo:function(){var s=D.read(arguments);return new D(this.x%s.x,this.y%s.y)},negate:function(){return new D(-this.x,-this.y)},isInside:function(){return $.read(arguments).contains(this)},isClose:function(){var s=arguments,e=D.read(s),t=h.read(s);return this.getDistance(e)<=t},isCollinear:function(){var s=D.read(arguments);return D.isCollinear(this.x,this.y,s.x,s.y)},isColinear:"#isCollinear",isOrthogonal:function(){var s=D.read(arguments);return D.isOrthogonal(this.x,this.y,s.x,s.y)},isZero:function(){var s=X.isZero;return s(this.x)&&s(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(s){return this.x*(s>1&&s<4?-1:1)>=0&&this.y*(s>2?-1:1)>=0},dot:function(){var s=D.read(arguments);return this.x*s.x+this.y*s.y},cross:function(){var s=D.read(arguments);return this.x*s.y-this.y*s.x},project:function(){var s=D.read(arguments),e=s.isZero()?0:this.dot(s)/s.dot(s);return new D(s.x*e,s.y*e)},statics:{min:function(){var s=arguments,e=D.read(s),t=D.read(s);return new D(Math.min(e.x,t.x),Math.min(e.y,t.y))},max:function(){var s=arguments,e=D.read(s),t=D.read(s);return new D(Math.max(e.x,t.x),Math.max(e.y,t.y))},random:function(){return new D(Math.random(),Math.random())},isCollinear:function(s,e,t,r){return Math.abs(s*r-e*t)<=Math.sqrt((s*s+e*e)*(t*t+r*r))*1e-8},isOrthogonal:function(s,e,t,r){return Math.abs(s*t+e*r)<=Math.sqrt((s*s+e*e)*(t*t+r*r))*1e-8}}},h.each(["round","ceil","floor","abs"],function(s){var e=Math[s];this[s]=function(){return new D(e(this.x),e(this.y))}},{})),ue=D.extend({initialize:function(e,t,r,o){this._x=e,this._y=t,this._owner=r,this._setter=o},_set:function(s,e,t){return this._x=s,this._y=e,t||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(s){this._x=s,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(s){this._y=s,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(s){this._owner._changeSelection(this._getSelection(),s)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),ee=h.extend({_class:"Size",_readIndex:!0,initialize:function(e,t){var r=typeof e,o=this.__read,l=0;if(r==="number"){var c=typeof t=="number";this._set(e,c?t:e),o&&(l=c?2:1)}else if(r==="undefined"||e===null)this._set(0,0),o&&(l=e===null?1:0);else{var d=r==="string"?e.split(/[\s,]+/)||[]:e;l=1,Array.isArray(d)?this._set(+d[0],+(d.length>1?d[1]:d[0])):"width"in d?this._set(d.width||0,d.height||0):"x"in d?this._set(d.x||0,d.y||0):(this._set(0,0),l=0)}return o&&(this.__read=l),this},set:"#initialize",_set:function(s,e){return this.width=s,this.height=e,this},equals:function(s){return s===this||s&&(this.width===s.width&&this.height===s.height||Array.isArray(s)&&this.width===s[0]&&this.height===s[1])||!1},clone:function(){return new ee(this.width,this.height)},toString:function(){var s=K.instance;return"{ width: "+s.number(this.width)+", height: "+s.number(this.height)+" }"},_serialize:function(s){var e=s.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var s=ee.read(arguments);return new ee(this.width+s.width,this.height+s.height)},subtract:function(){var s=ee.read(arguments);return new ee(this.width-s.width,this.height-s.height)},multiply:function(){var s=ee.read(arguments);return new ee(this.width*s.width,this.height*s.height)},divide:function(){var s=ee.read(arguments);return new ee(this.width/s.width,this.height/s.height)},modulo:function(){var s=ee.read(arguments);return new ee(this.width%s.width,this.height%s.height)},negate:function(){return new ee(-this.width,-this.height)},isZero:function(){var s=X.isZero;return s(this.width)&&s(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(s,e){return new ee(Math.min(s.width,e.width),Math.min(s.height,e.height))},max:function(s,e){return new ee(Math.max(s.width,e.width),Math.max(s.height,e.height))},random:function(){return new ee(Math.random(),Math.random())}}},h.each(["round","ceil","floor","abs"],function(s){var e=Math[s];this[s]=function(){return new ee(e(this.width),e(this.height))}},{})),ce=ee.extend({initialize:function(e,t,r,o){this._width=e,this._height=t,this._owner=r,this._setter=o},_set:function(s,e,t){return this._width=s,this._height=e,t||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(s){this._width=s,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(s){this._height=s,this._owner[this._setter](this)}}),$=h.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,t,r,o){var l=arguments,c=typeof e,d;if(c==="number"?(this._set(e,t,r,o),d=4):c==="undefined"||e===null?(this._set(0,0,0,0),d=e===null?1:0):l.length===1&&(Array.isArray(e)?(this._set.apply(this,e),d=1):e.x!==a||e.width!==a?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),d=1):e.from===a&&e.to===a&&(this._set(0,0,0,0),h.readSupported(l,this)&&(d=1))),d===a){var p=D.readNamed(l,"from"),_=h.peek(l),m=p.x,w=p.y,y,v;if(_&&_.x!==a||h.hasNamed(l,"to")){var C=D.readNamed(l,"to");y=C.x-m,v=C.y-w,y<0&&(m=C.x,y=-y),v<0&&(w=C.y,v=-v)}else{var P=ee.read(l);y=P.width,v=P.height}this._set(m,w,y,v),d=l.__index}var I=l.__filtered;return I&&(this.__filtered=I),this.__read&&(this.__read=d),this},set:"#initialize",_set:function(s,e,t,r){return this.x=s,this.y=e,this.width=t,this.height=r,this},clone:function(){return new $(this.x,this.y,this.width,this.height)},equals:function(s){var e=h.isPlainValue(s)?$.read(arguments):s;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var s=K.instance;return"{ x: "+s.number(this.x)+", y: "+s.number(this.y)+", width: "+s.number(this.width)+", height: "+s.number(this.height)+" }"},_serialize:function(s){var e=s.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(s){var e=s?D:ue;return new e(this.x,this.y,this,"setPoint")},setPoint:function(){var s=D.read(arguments);this.x=s.x,this.y=s.y},getSize:function(s){var e=s?ee:ce;return new e(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var s=ee.read(arguments),e=this._sx,t=this._sy,r=s.width,o=s.height;e&&(this.x+=(this.width-r)*e),t&&(this.y+=(this.height-o)*t),this.width=r,this.height=o,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(s){if(!this._fw){var e=s-this.x;this.width-=this._sx===.5?e*2:e}this.x=s,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(s){if(!this._fh){var e=s-this.y;this.height-=this._sy===.5?e*2:e}this.y=s,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(s){if(!this._fw){var e=s-this.x;this.width=this._sx===.5?e*2:e}this.x=s-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(s){if(!this._fh){var e=s-this.y;this.height=this._sy===.5?e*2:e}this.y=s-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(s){this._fw||this._sx===.5?this.x=s-this.width/2:(this._sx&&(this.x+=(s-this.x)*2*this._sx),this.width=(s-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(s){this._fh||this._sy===.5?this.y=s-this.height/2:(this._sy&&(this.y+=(s-this.y)*2*this._sy),this.height=(s-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(s){var e=s?D:ue;return new e(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var s=D.read(arguments);return this.setCenterX(s.x),this.setCenterY(s.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(s){return s&&s.width!==a||(Array.isArray(s)?s:arguments).length===4?this._containsRectangle($.read(arguments)):this._containsPoint(D.read(arguments))},_containsPoint:function(s){var e=s.x,t=s.y;return e>=this.x&&t>=this.y&&e<=this.x+this.width&&t<=this.y+this.height},_containsRectangle:function(s){var e=s.x,t=s.y;return e>=this.x&&t>=this.y&&e+s.width<=this.x+this.width&&t+s.height<=this.y+this.height},intersects:function(){var s=$.read(arguments),e=h.read(arguments)||0;return s.x+s.width>this.x-e&&s.y+s.height>this.y-e&&s.x<this.x+this.width+e&&s.y<this.y+this.height+e},intersect:function(){var s=$.read(arguments),e=Math.max(this.x,s.x),t=Math.max(this.y,s.y),r=Math.min(this.x+this.width,s.x+s.width),o=Math.min(this.y+this.height,s.y+s.height);return new $(e,t,r-e,o-t)},unite:function(){var s=$.read(arguments),e=Math.min(this.x,s.x),t=Math.min(this.y,s.y),r=Math.max(this.x+this.width,s.x+s.width),o=Math.max(this.y+this.height,s.y+s.height);return new $(e,t,r-e,o-t)},include:function(){var s=D.read(arguments),e=Math.min(this.x,s.x),t=Math.min(this.y,s.y),r=Math.max(this.x+this.width,s.x),o=Math.max(this.y+this.height,s.y);return new $(e,t,r-e,o-t)},expand:function(){var s=ee.read(arguments),e=s.width,t=s.height;return new $(this.x-e/2,this.y-t/2,this.width+e,this.height+t)},scale:function(s,e){return this.expand(this.width*s-this.width,this.height*(e===a?s:e)-this.height)}},h.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(s,e){var t=s.join(""),r=/^[RL]/.test(t);e>=4&&(s[1]+=r?"Y":"X");var o=s[r?0:1],l=s[r?1:0],c="get"+o,d="get"+l,p="set"+o,_="set"+l,m="get"+t,w="set"+t;this[m]=function(y){var v=y?D:ue;return new v(this[c](),this[d](),this,w)},this[w]=function(){var y=D.read(arguments);this[p](y.x),this[_](y.y)}},{beans:!0})),J=$.extend({initialize:function(e,t,r,o,l,c){this._set(e,t,r,o,!0),this._owner=l,this._setter=c},_set:function(s,e,t,r,o){return this._x=s,this._y=e,this._width=t,this._height=r,o||this._owner[this._setter](this),this}},new function(){var s=$.prototype;return h.each(["x","y","width","height"],function(e){var t=h.capitalize(e),r="_"+e;this["get"+t]=function(){return this[r]},this["set"+t]=function(o){this[r]=o,this._dontNotify||this._owner[this._setter](this)}},h.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var t="set"+e;this[t]=function(){this._dontNotify=!0,s[t].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(e){var t=this._owner;t._changeSelection&&t._changeSelection(2,e)}}))}),te=h.extend({_class:"Matrix",initialize:function s(e,t){var r=arguments,o=r.length,l=!0;if(o>=6?this._set.apply(this,r):o===1||o===2?e instanceof s?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,t):Array.isArray(e)?this._set.apply(this,t?e.concat([t]):e):l=!1:o?l=!1:this.reset(),!l)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(s,e,t,r,o,l,c){return this._a=s,this._b=e,this._c=t,this._d=r,this._tx=o,this._ty=l,c||this._changed(),this},_serialize:function(s,e){return h.serialize(this.getValues(),s,!0,e)},_changed:function(){var s=this._owner;s&&(s._applyMatrix?s.transform(null,!0):s._changed(25))},clone:function(){return new te(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(s){return s===this||s&&this._a===s._a&&this._b===s._b&&this._c===s._c&&this._d===s._d&&this._tx===s._tx&&this._ty===s._ty},toString:function(){var s=K.instance;return"[["+[s.number(this._a),s.number(this._c),s.number(this._tx)].join(", ")+"], ["+[s.number(this._b),s.number(this._d),s.number(this._ty)].join(", ")+"]]"},reset:function(s){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,s||this._changed(),this},apply:function(s,e){var t=this._owner;return t?(t.transform(null,h.pick(s,!0),e),this.isIdentity()):!1},translate:function(){var s=D.read(arguments),e=s.x,t=s.y;return this._tx+=e*this._a+t*this._c,this._ty+=e*this._b+t*this._d,this._changed(),this},scale:function(){var s=arguments,e=D.read(s),t=D.read(s,0,{readNull:!0});return t&&this.translate(t),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,t&&this.translate(t.negate()),this._changed(),this},rotate:function(s){s*=Math.PI/180;var e=D.read(arguments,1),t=e.x,r=e.y,o=Math.cos(s),l=Math.sin(s),c=t-t*o+r*l,d=r-t*l-r*o,p=this._a,_=this._b,m=this._c,w=this._d;return this._a=o*p+l*m,this._b=o*_+l*w,this._c=-l*p+o*m,this._d=-l*_+o*w,this._tx+=c*p+d*m,this._ty+=c*_+d*w,this._changed(),this},shear:function(){var s=arguments,e=D.read(s),t=D.read(s,0,{readNull:!0});t&&this.translate(t);var r=this._a,o=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*r,this._d+=e.x*o,t&&this.translate(t.negate()),this._changed(),this},skew:function(){var s=arguments,e=D.read(s),t=D.read(s,0,{readNull:!0}),r=Math.PI/180,o=new D(Math.tan(e.x*r),Math.tan(e.y*r));return this.shear(o,t)},append:function(s,e){if(s){var t=this._a,r=this._b,o=this._c,l=this._d,c=s._a,d=s._c,p=s._b,_=s._d,m=s._tx,w=s._ty;this._a=c*t+p*o,this._c=d*t+_*o,this._b=c*r+p*l,this._d=d*r+_*l,this._tx+=m*t+w*o,this._ty+=m*r+w*l,e||this._changed()}return this},prepend:function(s,e){if(s){var t=this._a,r=this._b,o=this._c,l=this._d,c=this._tx,d=this._ty,p=s._a,_=s._c,m=s._b,w=s._d,y=s._tx,v=s._ty;this._a=p*t+_*r,this._c=p*o+_*l,this._b=m*t+w*r,this._d=m*o+w*l,this._tx=p*c+_*d+y,this._ty=m*c+w*d+v,e||this._changed()}return this},appended:function(s){return this.clone().append(s)},prepended:function(s){return this.clone().prepend(s)},invert:function(){var s=this._a,e=this._b,t=this._c,r=this._d,o=this._tx,l=this._ty,c=s*r-e*t,d=null;return c&&!isNaN(c)&&isFinite(o)&&isFinite(l)&&(this._a=r/c,this._b=-e/c,this._c=-t/c,this._d=s/c,this._tx=(t*l-r*o)/c,this._ty=(e*o-s*l)/c,d=this),d},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new te(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var s=this._a*this._d-this._c*this._b;return s&&!isNaN(s)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(s,e,t){return arguments.length<3?this._transformPoint(D.read(arguments)):this._transformCoordinates(s,e,t)},_transformPoint:function(s,e,t){var r=s.x,o=s.y;return e||(e=new D),e._set(r*this._a+o*this._c+this._tx,r*this._b+o*this._d+this._ty,t)},_transformCoordinates:function(s,e,t){for(var r=0,o=2*t;r<o;r+=2){var l=s[r],c=s[r+1];e[r]=l*this._a+c*this._c+this._tx,e[r+1]=l*this._b+c*this._d+this._ty}return e},_transformCorners:function(s){var e=s.x,t=s.y,r=e+s.width,o=t+s.height,l=[e,t,r,t,r,o,e,o];return this._transformCoordinates(l,l,4)},_transformBounds:function(s,e,t){for(var r=this._transformCorners(s),o=r.slice(0,2),l=o.slice(),c=2;c<8;c++){var d=r[c],p=c&1;d<o[p]?o[p]=d:d>l[p]&&(l[p]=d)}return e||(e=new $),e._set(o[0],o[1],l[0]-o[0],l[1]-o[1],t)},inverseTransform:function(){return this._inverseTransform(D.read(arguments))},_inverseTransform:function(s,e,t){var r=this._a,o=this._b,l=this._c,c=this._d,d=this._tx,p=this._ty,_=r*c-o*l,m=null;if(_&&!isNaN(_)&&isFinite(d)&&isFinite(p)){var w=s.x-this._tx,y=s.y-this._ty;e||(e=new D),m=e._set((w*c-y*l)/_,(y*r-w*o)/_,t)}return m},decompose:function(){var s=this._a,e=this._b,t=this._c,r=this._d,o=s*r-e*t,l=Math.sqrt,c=Math.atan2,d=180/Math.PI,p,_,m;if(s!==0||e!==0){var w=l(s*s+e*e);p=Math.acos(s/w)*(e>0?1:-1),_=[w,o/w],m=[c(s*t+e*r,w*w),0]}else if(t!==0||r!==0){var y=l(t*t+r*r);p=Math.asin(t/y)*(r>0?1:-1),_=[o/y,y],m=[0,c(s*t+e*r,y*y)]}else p=0,m=_=[0,0];return{translation:this.getTranslation(),rotation:p*d,scaling:new D(_),skewing:new D(m[0]*d,m[1]*d)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new D(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(s){this.isIdentity()||s.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},h.each(["a","b","c","d","tx","ty"],function(s){var e=h.capitalize(s),t="_"+s;this["get"+e]=function(){return this[t]},this["set"+e]=function(r){this[t]=r,this._changed()}},{})),pe=h.extend({_class:"Line",initialize:function(e,t,r,o,l){var c=!1;arguments.length>=4?(this._px=e,this._py=t,this._vx=r,this._vy=o,c=l):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,c=r),c||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new D(this._px,this._py)},getVector:function(){return new D(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(s,e){return pe.intersect(this._px,this._py,this._vx,this._vy,s._px,s._py,s._vx,s._vy,!0,e)},getSide:function(s,e){return pe.getSide(this._px,this._py,this._vx,this._vy,s.x,s.y,!0,e)},getDistance:function(s){return Math.abs(this.getSignedDistance(s))},getSignedDistance:function(s){return pe.getSignedDistance(this._px,this._py,this._vx,this._vy,s.x,s.y,!0)},isCollinear:function(s){return D.isCollinear(this._vx,this._vy,s._vx,s._vy)},isOrthogonal:function(s){return D.isOrthogonal(this._vx,this._vy,s._vx,s._vy)},statics:{intersect:function(s,e,t,r,o,l,c,d,p,_){p||(t-=s,r-=e,c-=o,d-=l);var m=t*d-r*c;if(!X.isMachineZero(m)){var w=s-o,y=e-l,v=(c*y-d*w)/m,C=(t*y-r*w)/m,P=1e-12,I=-P,k=1+P;if(_||I<v&&v<k&&I<C&&C<k)return _||(v=v<=0?0:v>=1?1:v),new D(s+v*t,e+v*r)}},getSide:function(s,e,t,r,o,l,c,d){c||(t-=s,r-=e);var p=o-s,_=l-e,m=p*r-_*t;return!d&&X.isMachineZero(m)&&(m=(p*t+p*t)/(t*t+r*r),m>=0&&m<=1&&(m=0)),m<0?-1:m>0?1:0},getSignedDistance:function(s,e,t,r,o,l,c){return c||(t-=s,r-=e),t===0?r>0?o-s:s-o:r===0?t<0?l-e:e-l:((o-s)*r-(l-e)*t)/(r>t?r*Math.sqrt(1+t*t/(r*r)):t*Math.sqrt(1+r*r/(t*t)))},getDistance:function(s,e,t,r,o,l,c){return Math.abs(pe.getSignedDistance(s,e,t,r,o,l,c))}}}),ye=z.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){z.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new an(null,null,this),this._view=Ye.create(this,e||Tt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(s,e){return h.serialize(this._children,s,!0,e)},_changed:function(s,e){if(s&1){var t=this._view;t&&(t._needsUpdate=!0,!t._requested&&t._autoUpdate&&t.requestUpdate())}var r=this._changes;if(r&&e){var o=this._changesById,l=e._id,c=o[l];c?c.flags|=s:r.push(o[l]={item:e,flags:s})}},clear:function(){for(var s=this._children,e=s.length-1;e>=0;e--)s[e].remove()},isEmpty:function(){return!this._children.length},remove:function s(){return s.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(s){this._currentStyle.set(s)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ke({project:this,insert:!0})},getSymbolDefinitions:function(){var s=[],e={};return this.getItems({class:ht,match:function(t){var r=t._definition,o=r._id;return e[o]||(e[o]=!0,s.push(r)),!1}}),s},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var s=this._selectionItems,e=[];for(var t in s){var r=s[t],o=r._selection;o&1&&r.isInserted()?e.push(r):o||this._updateSelection(r)}return e},_updateSelection:function(s){var e=s._id,t=this._selectionItems;s._selection?t[e]!==s&&(this._selectionCount++,t[e]=s):t[e]===s&&(this._selectionCount--,delete t[e])},selectAll:function(){for(var s=this._children,e=0,t=s.length;e<t;e++)s[e].setFullySelected(!0)},deselectAll:function(){var s=this._selectionItems;for(var e in s)s[e].setFullySelected(!1)},addLayer:function(s){return this.insertLayer(a,s)},insertLayer:function(s,e){if(e instanceof ke){e._remove(!1,!0),h.splice(this._children,[e],s,0),e._setProject(this,!0);var t=e._name;t&&e.setName(t),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(s,e,t){return e=this.insertLayer(s,e)||(this._activeLayer||this._insertItem(a,new ke(B.NO_INSERT),!0)).insertChild(s,e),t&&e.activate&&e.activate(),e},getItems:function(s){return B._getItems(this,s)},getItem:function(s){return B._getItems(this,s,null,null,!0)[0]||null},importJSON:function(s){this.activate();var e=this._activeLayer;return h.importJSON(s,e&&e.isEmpty()&&e)},removeOn:function(s){var e=this._removeSets;if(e){s==="mouseup"&&(e.mousedrag=null);var t=e[s];if(t){for(var r in t){var o=t[r];for(var l in e){var c=e[l];c&&c!=t&&delete c[o._id]}o.remove()}e[s]=null}}},draw:function(s,e,t){this._updateVersion++,s.save(),e.applyToContext(s);for(var r=this._children,o=new h({offset:new D(0,0),pixelRatio:t,viewMatrix:e.isIdentity()?null:e,matrices:[new te],updateMatrix:!0}),l=0,c=r.length;l<c;l++)r[l].draw(s,o);if(s.restore(),this._selectionCount>0){s.save(),s.strokeWidth=1;var d=this._selectionItems,p=this._scope.settings.handleSize,_=this._updateVersion;for(var m in d)d[m]._drawSelection(s,e,p,d,_);s.restore()}}}),B=h.extend(T,{statics:{extend:function s(e){return e._serializeFields&&(e._serializeFields=h.set({},this.prototype._serializeFields,e._serializeFields)),s.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new te,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var s=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return h.each(s,function(e){this._events[e]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:s}})},{initialize:function(){},_initialize:function(s,e){var t=s&&h.isPlainObject(s),r=t&&s.internal===!0,o=this._matrix=new te,l=t&&s.project||nt.project,c=nt.settings;return this._id=r?null:ne.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&c.applyMatrix,e&&o.translate(e),o._owner=this,this._style=new an(l._currentStyle,this,l),r||t&&s.insert==!1||!c.insertItems&&!(t&&s.insert==!0)?this._setProject(l):(t&&s.parent||l)._insertItem(a,this,!0),t&&s!==B.NO_INSERT&&s!==B.INSERT&&this.set(s,{internal:!0,insert:!0,project:!0,parent:!0}),t},_serialize:function(s,e){var t={},r=this;function o(l){for(var c in l){var d=r[c];h.equals(d,c==="leading"?l.fontSize*1.2:l[c])||(t[c]=h.serialize(d,s,c!=="data",e))}}return o(this._serializeFields),this instanceof Te||o(this._style._defaults),[this._class,t]},_changed:function(s){var e=this._symbol,t=this._parent||e,r=this._project;s&8&&(this._bounds=this._position=this._decomposed=a),s&16&&(this._globalMatrix=a),t&&s&72&&B._clearBoundsCache(t),s&2&&B._clearBoundsCache(this),r&&r._changed(s,this),e&&e._changed(s)},getId:function(){return this._id},getName:function(){return this._name},setName:function(s){if(this._name&&this._removeNamed(),s===+s+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(s&&e){var t=e._children,r=e._namedChildren;(r[s]=r[s]||[]).push(this),s in t||(t[s]=this)}this._name=s||a,this._changed(256)},getStyle:function(){return this._style},setStyle:function(s){this.getStyle().set(s)}},h.each(["locked","visible","blendMode","opacity","guide"],function(s){var e=h.capitalize(s),t="_"+s,r={locked:256,visible:265};this["get"+e]=function(){return this[t]},this["set"+e]=function(o){o!=this[t]&&(this[t]=o,this._changed(r[s]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(s){if(s!==this._selection){this._selection=s;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(s,e){var t=this._selection;this.setSelection(e?t|s:t&~s)},isSelected:function(){if(this._selectChildren){for(var s=this._children,e=0,t=s.length;e<t;e++)if(s[e].isSelected())return!0}return!!(this._selection&1)},setSelected:function(s){if(this._selectChildren)for(var e=this._children,t=0,r=e.length;t<r;t++)e[t].setSelected(s);this._changeSelection(1,s)},isFullySelected:function(){var s=this._children,e=!!(this._selection&1);if(s&&e){for(var t=0,r=s.length;t<r;t++)if(!s[t].isFullySelected())return!1;return!0}return e},setFullySelected:function(s){var e=this._children;if(e)for(var t=0,r=e.length;t<r;t++)e[t].setFullySelected(s);this._changeSelection(1,s)},isClipMask:function(){return this._clipMask},setClipMask:function(s){this._clipMask!=(s=!!s)&&(this._clipMask=s,s&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(s){this._data=s},getPosition:function(s){var e=s?D:ue,t=this._position||(this._position=this._getPositionFromBounds());return new e(t.x,t.y,this,"setPosition")},setPosition:function(){this.translate(D.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(s){return this._pivot?this._matrix._transformPoint(this._pivot):(s||this.getBounds()).getCenter(!0)},getPivot:function(){var s=this._pivot;return s?new ue(s.x,s.y,this,"setPivot"):null},setPivot:function(){this._pivot=D.read(arguments,0,{clone:!0,readNull:!0}),this._position=a}},h.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(s,e){this[e]=function(t){return this.getBounds(t,s)}},{beans:!0,getBounds:function(s,e){var t=e||s instanceof te,r=h.set({},t?e:s,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var o=this._getCachedBounds(t&&s,r).rect;return arguments.length?o:new J(o.x,o.y,o.width,o.height,this,"setBounds")},setBounds:function(){var s=$.read(arguments),e=this.getBounds(),t=this._matrix,r=new te,o=s.getCenter();r.translate(o),(s.width!=e.width||s.height!=e.height)&&(t.isInvertible()||(t.set(t._backup||new te().translate(t.getTranslation())),e=this.getBounds()),r.scale(e.width!==0?s.width/e.width:0,e.height!==0?s.height/e.height:0)),o=e.getCenter(),r.translate(-o.x,-o.y),this.transform(r)},_getBounds:function(s,e){var t=this._children;return!t||!t.length?new $:(B._updateBoundsCache(this,e.cacheItem),B._getBounds(t,s,e))},_getBoundsCacheKey:function(s,e){return[s.stroke?1:0,s.handle?1:0,e?1:0].join("")},_getCachedBounds:function(s,e,t){s=s&&s._orNullIfIdentity();var r=e.internal&&!t,o=e.cacheItem,l=r?null:this._matrix._orNullIfIdentity(),c=o&&(!s||s.equals(l))&&this._getBoundsCacheKey(e,r),d=this._bounds;if(B._updateBoundsCache(this._parent||this._symbol,o),c&&d&&c in d){var p=d[c];return{rect:p.rect.clone(),nonscaling:p.nonscaling}}var _=this._getBounds(s||l,e),m=_.rect||_,w=this._style,y=_.nonscaling||w.hasStroke()&&!w.getStrokeScaling();if(c){d||(this._bounds=d={});var p=d[c]={rect:m.clone(),nonscaling:y,internal:r}}return{rect:m,nonscaling:y}},_getStrokeMatrix:function(s,e){var t=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,r=t?t.getViewMatrix().invert():s;return r&&r._shiftless()},statics:{_updateBoundsCache:function(s,e){if(s&&e){var t=e._id,r=s._boundsCache=s._boundsCache||{ids:{},list:[]};r.ids[t]||(r.list.push(e),r.ids[t]=e)}},_clearBoundsCache:function(s){var e=s._boundsCache;if(e){s._bounds=s._position=s._boundsCache=a;for(var t=0,r=e.list,o=r.length;t<o;t++){var l=r[t];l!==s&&(l._bounds=l._position=a,l._boundsCache&&B._clearBoundsCache(l))}}},_getBounds:function(s,e,t){var r=1/0,o=-r,l=r,c=o,d=!1;t=t||{};for(var p=0,_=s.length;p<_;p++){var m=s[p];if(m._visible&&!m.isEmpty(!0)){var w=m._getCachedBounds(e&&e.appended(m._matrix),t,!0),y=w.rect;r=Math.min(y.x,r),l=Math.min(y.y,l),o=Math.max(y.x+y.width,o),c=Math.max(y.y+y.height,c),w.nonscaling&&(d=!0)}}return{rect:isFinite(r)?new $(r,l,o-r,c-l):new $,nonscaling:d}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var s=this._decompose();return s?s.rotation:0},setRotation:function(s){var e=this.getRotation();if(e!=null&&s!=null){var t=this._decomposed;this.rotate(s-e),t&&(t.rotation=s,this._decomposed=t)}},getScaling:function(){var s=this._decompose(),e=s&&s.scaling;return new ue(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var s=this.getScaling(),e=D.read(arguments,0,{clone:!0,readNull:!0});if(s&&e&&!s.equals(e)){var t=this.getRotation(),r=this._decomposed,o=new te,l=X.isZero;if(l(s.x)||l(s.y))o.translate(r.translation),t&&o.rotate(t),o.scale(e.x,e.y),this._matrix.set(o);else{var c=this.getPosition(!0);o.translate(c),t&&o.rotate(t),o.scale(e.x/s.x,e.y/s.y),t&&o.rotate(-t),o.translate(c.negate()),this.transform(o)}r&&(r.scaling=e,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var s=this._matrix;s.set.apply(s,arguments)},getGlobalMatrix:function(s){var e=this._globalMatrix;if(e)for(var t=this._parent,r=[];t;){if(!t._globalMatrix){e=null;for(var o=0,l=r.length;o<l;o++)r[o]._globalMatrix=null;break}r.push(t),t=t._parent}if(!e){e=this._globalMatrix=this._matrix.clone();var t=this._parent;t&&e.prepend(t.getGlobalMatrix(!0))}return s?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(s){(this._applyMatrix=this._canApplyMatrix&&!!s)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(s,e){if(this._project!==s){this._project&&this._installEvents(!1),this._project=s;for(var t=this._children,r=0,o=t&&t.length;r<o;r++)t[r]._setProject(s);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function s(e){s.base.call(this,e);for(var t=this._children,r=0,o=t&&t.length;r<o;r++)t[r]._installEvents(e)},getLayer:function(){for(var s=this;s=s._parent;)if(s instanceof ke)return s;return null},getParent:function(){return this._parent},setParent:function(s){return s.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(s){this.removeChildren(),this.addChildren(s)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var s=this._getOwner();return s&&s._children[this._index+1]||null},getPreviousSibling:function(){var s=this._getOwner();return s&&s._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(s){return s===this||s&&this._class===s._class&&this._style.equals(s._style)&&this._matrix.equals(s._matrix)&&this._locked===s._locked&&this._visible===s._visible&&this._blendMode===s._blendMode&&this._opacity===s._opacity&&this._clipMask===s._clipMask&&this._guide===s._guide&&this._equals(s)||!1},_equals:function(s){return h.equals(this._children,s._children)},clone:function(s){var e=new this.constructor(B.NO_INSERT),t=this._children,r=h.pick(s?s.insert:a,s===a||s===!0),o=h.pick(s?s.deep:a,!0);t&&e.copyAttributes(this),(!t||o)&&e.copyContent(this),t||e.copyAttributes(this),r&&e.insertAbove(this);var l=this._name,c=this._parent;if(l&&c){for(var t=c._children,d=l,p=1;t[l];)l=d+" "+p++;l!==d&&e.setName(l)}return e},copyContent:function(s){for(var e=s._children,t=0,r=e&&e.length;t<r;t++)this.addChild(e[t].clone(!1),!0)},copyAttributes:function(s,e){this.setStyle(s._style);for(var t=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,o=t.length;r<o;r++){var l=t[r];s.hasOwnProperty(l)&&(this[l]=s[l])}e||this._matrix.set(s._matrix,!0),this.setApplyMatrix(s._applyMatrix),this.setPivot(s._pivot),this.setSelection(s._selection);var c=s._data,d=s._name;this._data=c?h.clone(c):null,d&&this.setName(d)},rasterize:function(s,e){var t,r,o;h.isPlainObject(s)?(t=s.resolution,r=s.insert,o=s.raster):(t=s,r=e),o||(o=new He(B.NO_INSERT));var l=this.getStrokeBounds(),c=(t||this.getView().getResolution())/72,d=l.getTopLeft().floor(),p=l.getBottomRight().ceil(),_=new ee(p.subtract(d)),m=_.multiply(c);if(o.setSize(m,!0),!m.isZero()){var w=o.getContext(!0),y=new te().scale(c).translate(d.negate());w.save(),y.applyToContext(w),this.draw(w,new h({matrices:[y]})),w.restore()}return o._matrix.set(new te().translate(d.add(_.divide(2))).scale(1/c)),(r===a||r)&&o.insertAbove(this),o},contains:function(){var s=this._matrix;return s.isInvertible()&&!!this._contains(s._inverseTransform(D.read(arguments)))},_contains:function(s){var e=this._children;if(e){for(var t=e.length-1;t>=0;t--)if(e[t].contains(s))return!0;return!1}return s.isInside(this.getInternalBounds())},isInside:function(){return $.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Se.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(s,e){return s instanceof B?this._asPathItem().getIntersections(s._asPathItem(),null,e,!0).length>0:!1}},new function(){function s(){var r=arguments;return this._hitTest(D.read(r),st.getOptions(r))}function e(){var r=arguments,o=D.read(r),l=st.getOptions(r),c=[];return this._hitTest(o,new h({all:c},l)),c}function t(r,o,l,c){var d=this._children;if(d)for(var p=d.length-1;p>=0;p--){var _=d[p],m=_!==c&&_._hitTest(r,o,l);if(m&&!o.all)return m}return null}return ye.inject({hitTest:s,hitTestAll:e,_hitTest:t}),{hitTest:s,hitTestAll:e,_hitTestChildren:t}},{_hitTest:function(s,e,t){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var r=this._matrix,o=t?t.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),l=Math.max(e.tolerance,1e-12),c=e._tolerancePadding=new ee(Se._getStrokePadding(l,r._shiftless().invert()));if(s=r._inverseTransform(s),!s||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(c.multiply(2))._containsPoint(s))return null;var d=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==h.hyphenate(this._class)||e.class&&!(this instanceof e.class)),p=e.match,_=this,m,w;function y(x){return x&&p&&!p(x)&&(x=null),x&&e.all&&e.all.push(x),x}function v(x,S){var E=S?m["get"+S]():_.getPosition();if(s.subtract(E).divide(c).length<=1)return new st(x,_,{name:S?h.hyphenate(S):x,point:E})}var C=e.position,P=e.center,I=e.bounds;if(d&&this._parent&&(C||P||I)){if((P||I)&&(m=this.getInternalBounds()),w=C&&v("position")||P&&v("center","Center"),!w&&I)for(var k=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!w;b++)w=v("bounds",k[b]);w=y(w)}return w||(w=this._hitTestChildren(s,e,o)||d&&y(this._hitTestSelf(s,e,o,this.getStrokeScaling()?null:o._shiftless().invert()))||null),w&&w.point&&(w.point=r.transform(w.point)),w},_hitTestSelf:function(s,e){if(e.fill&&this.hasFill()&&this._contains(s))return new st("fill",this)},matches:function(s,e){function t(c,d){for(var p in c)if(c.hasOwnProperty(p)){var _=c[p],m=d[p];if(h.isPlainObject(_)&&h.isPlainObject(m)){if(!t(_,m))return!1}else if(!h.equals(_,m))return!1}return!0}var r=typeof s;if(r==="object"){for(var o in s)if(s.hasOwnProperty(o)&&!this.matches(o,s[o]))return!1;return!0}else{if(r==="function")return s(this);if(s==="match")return e(this);var l=/^(empty|editable)$/.test(s)?this["is"+h.capitalize(s)]():s==="type"?h.hyphenate(this._class):this[s];if(s==="class"){if(typeof e=="function")return this instanceof e;l=this._class}if(typeof e=="function")return!!e(l);if(e){if(e.test)return e.test(l);if(h.isPlainObject(e))return t(e,l)}return h.equals(l,e)}},getItems:function(s){return B._getItems(this,s,this._matrix)},getItem:function(s){return B._getItems(this,s,this._matrix,null,!0)[0]||null},statics:{_getItems:function s(e,t,r,o,l){if(!o){var c=typeof t=="object"&&t,d=c&&c.overlapping,p=c&&c.inside,_=d||p,y=_&&$.read([_]);o={items:[],recursive:c&&c.recursive!==!1,inside:!!p,overlapping:!!d,rect:y,path:d&&new Se.Rectangle({rectangle:y,insert:!1})},c&&(t=h.filter({},t,{recursive:!0,inside:!0,overlapping:!0}))}var m=e._children,w=o.items,y=o.rect;r=y&&(r||new te);for(var v=0,C=m&&m.length;v<C;v++){var P=m[v],I=r&&r.appended(P._matrix),k=!0;if(y){var _=P.getBounds(I);if(!y.intersects(_))continue;y.contains(_)||o.overlapping&&(_.contains(y)||o.path.intersects(P,I))||(k=!1)}if(k&&P.matches(t)&&(w.push(P),l)||(o.recursive!==!1&&s(P,t,I,o,l),l&&w.length>0))break}return w}}},{importJSON:function(s){var e=h.importJSON(s,this);return e!==this?this.addChild(e):e},addChild:function(s){return this.insertChild(a,s)},insertChild:function(s,e){var t=e?this.insertChildren(s,[e]):null;return t&&t[0]},addChildren:function(s){return this.insertChildren(this._children.length,s)},insertChildren:function(s,e){var t=this._children;if(t&&e&&e.length>0){e=h.slice(e);for(var r={},o=e.length-1;o>=0;o--){var l=e[o],c=l&&l._id;!l||r[c]?e.splice(o,1):(l._remove(!1,!0),r[c]=!0)}h.splice(t,e,s,0);for(var d=this._project,p=d._changes,o=0,_=e.length;o<_;o++){var l=e[o],m=l._name;l._parent=this,l._setProject(d,!0),m&&l.setName(m),p&&l._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(s,e){var t=s&&s._getOwner(),r=s!==this&&t?this:null;return r&&(r._remove(!1,!0),t._insertItem(s._index+e,r)),r},insertAbove:function(s){return this._insertAt(s,1)},insertBelow:function(s){return this._insertAt(s,0)},sendToBack:function(){var s=this._getOwner();return s?s._insertItem(0,this):null},bringToFront:function(){var s=this._getOwner();return s?s._insertItem(a,this):null},appendTop:"#addChild",appendBottom:function(s){return this.insertChild(0,s)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(s){return s._insertItem(a,this)},copyTo:function(s){return this.clone(!1).addTo(s)},reduce:function(s){var e=this._children;if(e&&e.length===1){var t=e[0].reduce(s);return this._parent?(t.insertAbove(this),this.remove()):t.remove(),t}return this},_removeNamed:function(){var s=this._getOwner();if(s){var e=s._children,t=s._namedChildren,r=this._name,o=t[r],l=o?o.indexOf(this):-1;l!==-1&&(e[r]==this&&delete e[r],o.splice(l,1),o.length?e[r]=o[0]:delete t[r])}},_remove:function(s,e){var t=this._getOwner(),r=this._project,o=this._index;return this._style&&this._style._dispose(),t?(this._name&&this._removeNamed(),o!=null&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),h.splice(t._children,null,o,1)),this._installEvents(!1),s&&r._changes&&this._changed(5),e&&t._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(s){var e=s&&s.insertBelow(this);return e&&this.remove(),e},removeChildren:function(s,e){if(!this._children)return null;s=s||0,e=h.pick(e,this._children.length);for(var t=h.splice(this._children,null,s,e-s),r=t.length-1;r>=0;r--)t[r]._remove(!0,!1);return t.length>0&&this._changed(11),t},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var s=0,e=this._children.length;s<e;s++)this._children[s]._index=s;this._changed(11)}},isEmpty:function(s){var e=this._children,t=e?e.length:0;if(s){for(var r=0;r<t;r++)if(!e[r].isEmpty(s))return!1;return!0}return!t},isEditable:function(){for(var s=this;s;){if(!s._visible||s._locked)return!1;s=s._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(s){function e(c){var d=[];do d.unshift(c);while(c=c._parent);return d}for(var t=e(this),r=e(s),o=0,l=Math.min(t.length,r.length);o<l;o++)if(t[o]!=r[o])return t[o]._index<r[o]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(s){return this._getOrder(s)===-1},isBelow:function(s){return this._getOrder(s)===1},isParent:function(s){return this._parent===s},isChild:function(s){return s&&s._parent===this},isDescendant:function(s){for(var e=this;e=e._parent;)if(e===s)return!0;return!1},isAncestor:function(s){return s?s.isDescendant(this):!1},isSibling:function(s){return this._parent===s._parent},isGroupedWith:function(s){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&s.isDescendant(e))return!0;e=e._parent}return!1}},h.each(["rotate","scale","shear","skew"],function(s){var e=s==="rotate";this[s]=function(){var t=arguments,r=(e?h:D).read(t),o=D.read(t,0,{readNull:!0});return this.transform(new te()[s](r,o||this.getPosition(!0)))}},{translate:function(){var s=new te;return this.transform(s.translate.apply(s,arguments))},transform:function(s,e,t){var r=this._matrix,o=s&&!s.isIdentity(),l=t&&this._canApplyMatrix||this._applyMatrix&&(o||!r.isIdentity()||e&&this._children);if(!o&&!l)return this;if(o){!s.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(s,!0);var c=this._style,d=c.getFillColor(!0),p=c.getStrokeColor(!0);d&&d.transform(s),p&&p.transform(s)}if(l&&(l=this._transformContent(r,e,t))){var _=this._pivot;_&&r._transformPoint(_,_,!0),r.reset(!0),t&&this._canApplyMatrix&&(this._applyMatrix=!0)}var m=this._bounds,w=this._position;(o||l)&&this._changed(25);var y=o&&m&&s.decompose();if(y&&y.skewing.isZero()&&y.rotation%90===0){for(var v in m){var C=m[v];if(C.nonscaling)delete m[v];else if(l||!C.internal){var P=C.rect;s._transformBounds(P,P)}}this._bounds=m;var I=m[this._getBoundsCacheKey(this._boundsOptions||{})];I&&(this._position=this._getPositionFromBounds(I.rect))}else o&&w&&this._pivot&&(this._position=s._transformPoint(w,w));return this},_transformContent:function(s,e,t){var r=this._children;if(r){for(var o=0,l=r.length;o<l;o++)r[o].transform(s,e,t);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(D.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(D.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(D.read(arguments))},localToParent:function(){return this._matrix._transformPoint(D.read(arguments))},fitBounds:function(s,e){s=$.read(arguments);var t=this.getBounds(),r=t.height/t.width,o=s.height/s.width,l=(e?r>o:r<o)?s.width/t.width:s.height/t.height,c=new $(new D,new ee(t.width*l,t.height*l));c.setCenter(s.getCenter()),this.setBounds(c)}}),{_setStyles:function(s,e,t){var r=this._style,o=this._matrix;if(r.hasFill()&&(s.fillStyle=r.getFillColor().toCanvasStyle(s,o)),r.hasStroke()){s.strokeStyle=r.getStrokeColor().toCanvasStyle(s,o),s.lineWidth=r.getStrokeWidth();var l=r.getStrokeJoin(),c=r.getStrokeCap(),d=r.getMiterLimit();if(l&&(s.lineJoin=l),c&&(s.lineCap=c),d&&(s.miterLimit=d),nt.support.nativeDash){var p=r.getDashArray(),_=r.getDashOffset();p&&p.length&&("setLineDash"in s?(s.setLineDash(p),s.lineDashOffset=_):(s.mozDash=p,s.mozDashOffset=_))}}if(r.hasShadow()){var m=e.pixelRatio||1,w=t._shiftless().prepend(new te().scale(m,m)),y=w.transform(new D(r.getShadowBlur(),0)),v=w.transform(this.getShadowOffset());s.shadowColor=r.getShadowColor().toCanvasStyle(s),s.shadowBlur=y.getLength(),s.shadowOffsetX=v.x,s.shadowOffsetY=v.y}},draw:function(s,e,t){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var r=e.matrices,o=e.viewMatrix,l=this._matrix,c=r[r.length-1].appended(l);if(c.isInvertible()){o=o?o.appended(c):c,r.push(c),e.updateMatrix&&(this._globalMatrix=c);var d=this._blendMode,p=X.clamp(this._opacity,0,1),_=d==="normal",m=Pt.nativeModes[d],w=_&&p===1||e.dontStart||e.clip||(m||_&&p<1)&&this._canComposite(),y=e.pixelRatio||1,v,C,P;if(!w){var I=this.getStrokeBounds(o);if(!I.width||!I.height){r.pop();return}P=e.offset,C=e.offset=I.getTopLeft().floor(),v=s,s=Tt.getContext(I.getSize().ceil().add(1).multiply(y)),y!==1&&s.scale(y,y)}s.save();var k=t?t.appended(l):this._canScaleStroke&&!this.getStrokeScaling(!0)&&o,b=!w&&e.clipItem,x=!k||b;if(w?(s.globalAlpha=p,m&&(s.globalCompositeOperation=d)):x&&s.translate(-C.x,-C.y),x&&(w?l:o).applyToContext(s),b&&e.clipItem.draw(s,e.extend({clip:!0})),k){s.setTransform(y,0,0,y,0,0);var S=e.offset;S&&s.translate(-S.x,-S.y)}this._draw(s,e,o,k),s.restore(),r.pop(),e.clip&&!e.dontFinish&&s.clip(this.getFillRule()),w||(Pt.process(d,s,v,p,C.subtract(P).multiply(y)),Tt.release(s),e.offset=P)}}},_isUpdated:function(s){var e=this._parent;if(e instanceof Be)return e._isUpdated(s);var t=this._updateVersion===s;return!t&&e&&e._visible&&e._isUpdated(s)&&(this._updateVersion=s,t=!0),t},_drawSelection:function(s,e,t,r,o){var l=this._selection,c=l&1,d=l&2||c&&this._selectBounds,p=l&4;if(this._drawSelected||(c=!1),(c||d||p)&&this._isUpdated(o)){var _,m=this.getSelectedColor(!0)||(_=this.getLayer())&&_.getSelectedColor(!0),w=e.appended(this.getGlobalMatrix(!0)),y=t/2;if(s.strokeStyle=s.fillStyle=m?m.toCanvasStyle(s):"#009dec",c&&this._drawSelected(s,w,r),p){var v=this.getPosition(!0),C=this._parent,P=C?C.localToGlobal(v):v,I=P.x,k=P.y;s.beginPath(),s.arc(I,k,y,0,Math.PI*2,!0),s.stroke();for(var b=[[0,-1],[1,0],[0,1],[-1,0]],x=y,S=t+1,E=0;E<4;E++){var A=b[E],O=A[0],L=A[1];s.moveTo(I+O*x,k+L*x),s.lineTo(I+O*S,k+L*S),s.stroke()}}if(d){var R=w._transformCorners(this.getInternalBounds());s.beginPath();for(var E=0;E<8;E++)s[E?"lineTo":"moveTo"](R[E],R[++E]);s.closePath(),s.stroke();for(var E=0;E<8;E++)s.fillRect(R[E]-y,R[++E]-y,t,t)}}},_canComposite:function(){return!1}},h.each(["down","drag","up","move"],function(s){this["removeOn"+h.capitalize(s)]=function(){var e={};return e[s]=!0,this.removeOn(e)}},{removeOn:function(s){for(var e in s)if(s[e]){var t="mouse"+e,r=this._project,o=r._removeSets=r._removeSets||{};o[t]=o[t]||{},o[t][this._id]=this}return this}}),{tween:function(s,e,t){t||(t=e,e=s,s=null,t||(t=e,e=null));var r=t&&t.easing,o=t&&t.start,l=t!=null&&(typeof t=="number"?t:t.duration),c=new tr(this,s,e,l,r,o);function d(p){c._handleFrame(p.time*1e3),c.running||this.off("frame",d)}return l&&this.on("frame",d),c},tweenTo:function(s,e){return this.tween(null,s,e)},tweenFrom:function(s,e){return this.tween(s,null,e)}}),Te=B.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function s(e){s.base.call(this,e),e&2050&&(this._clipItem=a)},_getClipItem:function(){var s=this._clipItem;if(s===a){s=null;for(var e=this._children,t=0,r=e.length;t<r;t++)if(e[t]._clipMask){s=e[t];break}this._clipItem=s}return s},isClipped:function(){return!!this._getClipItem()},setClipped:function(s){var e=this.getFirstChild();e&&e.setClipMask(s)},_getBounds:function s(e,t){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(e),h.set({},t,{stroke:!1})):s.base.call(this,e,t)},_hitTestChildren:function s(e,t,r){var o=this._getClipItem();return(!o||o.contains(e))&&s.base.call(this,e,t,r,o)},_draw:function(s,e){var t=e.clip,r=!t&&this._getClipItem();e=e.extend({clipItem:r,clip:!1}),t?(s.beginPath(),e.dontStart=e.dontFinish=!0):r&&r.draw(s,e.extend({clip:!0}));for(var o=this._children,l=0,c=o.length;l<c;l++){var d=o[l];d!==r&&d.draw(s,e)}}}),ke=Te.extend({_class:"Layer",initialize:function(){Te.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function s(){return this._parent?s.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Ve=B.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,t){this._initialize(e,t)},_equals:function(s){return this._type===s._type&&this._size.equals(s._size)&&h.equals(this._radius,s._radius)},copyContent:function(s){this.setType(s._type),this.setSize(s._size),this.setRadius(s._radius)},getType:function(){return this._type},setType:function(s){this._type=s},getShape:"#getType",setShape:"#setType",getSize:function(){var s=this._size;return new ce(s.width,s.height,this,"setSize")},setSize:function(){var s=ee.read(arguments);if(!this._size)this._size=s.clone();else if(!this._size.equals(s)){var e=this._type,t=s.width,r=s.height;e==="rectangle"?this._radius.set(ee.min(this._radius,s.divide(2).abs())):e==="circle"?(t=r=(t+r)/2,this._radius=t/2):e==="ellipse"&&this._radius._set(t/2,r/2),this._size._set(t,r),this._changed(9)}},getRadius:function(){var s=this._radius;return this._type==="circle"?s:new ce(s.width,s.height,this,"setRadius")},setRadius:function(s){var e=this._type;if(e==="circle"){if(s===this._radius)return;var t=s*2;this._radius=s,this._size._set(t,t)}else if(s=ee.read(arguments),!this._radius)this._radius=s.clone();else{if(this._radius.equals(s))return;if(this._radius.set(s),e==="rectangle"){var t=ee.max(this._size,s.multiply(2));this._size.set(t)}else e==="ellipse"&&this._size._set(s.width*2,s.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(s){var e=new Se[h.capitalize(this._type)]({center:new D,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),nt.settings.applyMatrix&&e.setApplyMatrix(!0),(s===a||s)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(s,e,t,r){var o=this._style,l=o.hasFill(),c=o.hasStroke(),d=e.dontFinish||e.clip,p=!r;if(l||c||d){var _=this._type,m=this._radius,w=_==="circle";if(e.dontStart||s.beginPath(),p&&w)s.arc(0,0,m,0,Math.PI*2,!0);else{var y=w?m:m.width,v=w?m:m.height,C=this._size,P=C.width,I=C.height;if(p&&_==="rectangle"&&y===0&&v===0)s.rect(-P/2,-I/2,P,I);else{var k=P/2,b=I/2,x=1-.5522847498307936,S=y*x,E=v*x,A=[-k,-b+v,-k,-b+E,-k+S,-b,-k+y,-b,k-y,-b,k-S,-b,k,-b+E,k,-b+v,k,b-v,k,b-E,k-S,b,k-y,b,-k+y,b,-k+S,b,-k,b-E,-k,b-v];r&&r.transform(A,A,32),s.moveTo(A[0],A[1]),s.bezierCurveTo(A[2],A[3],A[4],A[5],A[6],A[7]),k!==y&&s.lineTo(A[8],A[9]),s.bezierCurveTo(A[10],A[11],A[12],A[13],A[14],A[15]),b!==v&&s.lineTo(A[16],A[17]),s.bezierCurveTo(A[18],A[19],A[20],A[21],A[22],A[23]),k!==y&&s.lineTo(A[24],A[25]),s.bezierCurveTo(A[26],A[27],A[28],A[29],A[30],A[31])}}s.closePath()}!d&&(l||c)&&(this._setStyles(s,e,t),l&&(s.fill(o.getFillRule()),s.shadowColor="rgba(0,0,0,0)"),c&&s.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(s,e){var t=new $(this._size).setCenter(0,0),r=this._style,o=e.stroke&&r.hasStroke()&&r.getStrokeWidth();return s&&(t=s._transformBounds(t)),o?t.expand(Se._getStrokePadding(o,this._getStrokeMatrix(s,e))):t}},new function(){function s(t,r,o){var l=t._radius;if(!l.isZero())for(var c=t._size.divide(2),d=1;d<=4;d++){var p=new D(d>1&&d<4?-1:1,d>2?-1:1),_=p.multiply(c),m=_.subtract(p.multiply(l)),w=new $(o?_.add(p.multiply(o)):_,m);if(w.contains(r))return{point:m,quadrant:d}}}function e(t,r,o,l){var c=t.divide(r);return(!l||c.isInQuadrant(l))&&c.subtract(c.normalize()).multiply(r).divide(o).length<=1}return{_contains:function t(r){if(this._type==="rectangle"){var o=s(this,r);return o?r.subtract(o.point).divide(this._radius).getLength()<=1:t.base.call(this,r)}else return r.divide(this.size).getLength()<=.5},_hitTestSelf:function t(r,o,l,c){var d=!1,p=this._style,_=o.stroke&&p.hasStroke(),m=o.fill&&p.hasFill();if(_||m){var w=this._type,y=this._radius,v=_?p.getStrokeWidth()/2:0,C=o._tolerancePadding.add(Se._getStrokePadding(v,!p.getStrokeScaling()&&c));if(w==="rectangle"){var P=C.multiply(2),I=s(this,r,P);if(I)d=e(r.subtract(I.point),y,C,I.quadrant);else{var k=new $(this._size).setCenter(0,0),b=k.expand(P),x=k.expand(P.negate());d=b._containsPoint(r)&&!x._containsPoint(r)}}else d=e(r,y,C)}return d?new st(_?"stroke":"fill",this):t.base.apply(this,arguments)}}},{statics:new function(){function s(e,t,r,o,l){var c=h.create(Ve.prototype);return c._type=e,c._size=r,c._radius=o,c._initialize(h.getNamed(l),t),c}return{Circle:function(){var e=arguments,t=D.readNamed(e,"center"),r=h.readNamed(e,"radius");return s("circle",t,new ee(r*2),r,e)},Rectangle:function(){var e=arguments,t=$.readNamed(e,"rectangle"),r=ee.min(ee.readNamed(e,"radius"),t.getSize(!0).divide(2));return s("rectangle",t.getCenter(!0),t.getSize(!0),r,e)},Ellipse:function(){var e=arguments,t=Ve._readEllipse(e),r=t.radius;return s("ellipse",t.center,r.multiply(2),r,e)},_readEllipse:function(e){var t,r;if(h.hasNamed(e,"radius"))t=D.readNamed(e,"center"),r=ee.readNamed(e,"radius");else{var o=$.readNamed(e,"rectangle");t=o.getCenter(!0),r=o.getSize(!0).divide(2)}return{center:t,radius:r}}}}}),He=B.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(e,t){if(!this._initialize(e,t!==a&&D.read(arguments))){var r,o=typeof e,l=o==="string"?g.getElementById(e):o==="object"?e:null;if(l&&l!==B.NO_INSERT){if(l.getContext||l.naturalHeight!=null)r=l;else if(l){var c=ee.read(arguments);c.isZero()||(r=Tt.getCanvas(c))}}r?this.setImage(r):this.setSource(e)}this._size||(this._size=new ee,this._loaded=!1)},_equals:function(s){return this.getSource()===s.getSource()},copyContent:function(s){var e=s._image,t=s._canvas;if(e)this._setImage(e);else if(t){var r=Tt.getCanvas(s._size);r.getContext("2d").drawImage(t,0,0),this._setImage(r)}this._crossOrigin=s._crossOrigin},getSize:function(){var s=this._size;return new ce(s?s.width:0,s?s.height:0,this,"setSize")},setSize:function(s,e){var t=ee.read(arguments);if(t.equals(this._size))e&&this.clear();else if(t.width>0&&t.height>0){var r=!e&&this.getElement();this._setImage(Tt.getCanvas(t)),r&&this.getContext(!0).drawImage(r,0,0,t.width,t.height)}else this._canvas&&Tt.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(s){this.setSize(s,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(s){this.setSize(this.getWidth(),s)},getLoaded:function(){return this._loaded},isEmpty:function(){var s=this._size;return!s||s.width===0&&s.height===0},getResolution:function(){var s=this._matrix,e=new D(0,0).transform(s),t=new D(1,0).transform(s).subtract(e),r=new D(0,1).transform(s).subtract(e);return new ee(72/t.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(s){var e=this;function t(r){var o=e.getView(),l=r&&r.type||"load";o&&e.responds(l)&&(nt=o._scope,e.emit(l,new Mi(r)))}this._setImage(s),this._loaded?setTimeout(t,0):s&&tt.add(s,{load:function(r){e._setImage(s),t(r)},error:t})},_setImage:function(s){this._canvas&&Tt.release(this._canvas),s&&s.getContext?(this._image=null,this._canvas=s,this._loaded=!0):(this._image=s,this._canvas=null,this._loaded=!!(s&&s.src&&s.complete)),this._size=new ee(s?s.naturalWidth||s.width:0,s?s.naturalHeight||s.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var s=Tt.getContext(this._size);try{this._image&&s.drawImage(this._image,0,0),this._canvas=s.canvas}catch(e){Tt.release(s)}}return this._canvas},setCanvas:"#setImage",getContext:function(s){return this._context||(this._context=this.getCanvas().getContext("2d")),s&&(this._image=null,this._changed(1025)),this._context},setContext:function(s){this._context=s},getSource:function(){var s=this._image;return s&&s.src||this.toDataURL()},setSource:function(s){var e=new i.Image,t=this._crossOrigin;t&&(e.crossOrigin=t),s&&(e.src=s),this.setImage(e)},getCrossOrigin:function(){var s=this._image;return s&&s.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(s){this._crossOrigin=s;var e=this._image;e&&(e.crossOrigin=s)},getSmoothing:function(){return this._smoothing},setSmoothing:function(s){this._smoothing=typeof s=="string"?s:s?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var s=$.read(arguments),e=Tt.getContext(s.getSize());return e.drawImage(this.getCanvas(),s.x,s.y,s.width,s.height,0,0,s.width,s.height),e.canvas},getSubRaster:function(){var s=$.read(arguments),e=new He(B.NO_INSERT);return e._setImage(this.getSubCanvas(s)),e.translate(s.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var s=this._image,e=s&&s.src;if(/^data:/.test(e))return e;var t=this.getCanvas();return t?t.toDataURL.apply(t,arguments):null},drawImage:function(s){var e=D.read(arguments,1);this.getContext(!0).drawImage(s,e.x,e.y)},getAverageColor:function(s){var e,t;if(s?s instanceof Oe?(t=s,e=s.getBounds()):typeof s=="object"&&("width"in s?e=new $(s):"x"in s&&(e=new $(s.x-.5,s.y-.5,1,1))):e=this.getBounds(),!e)return null;var r=32,o=Math.min(e.width,r),l=Math.min(e.height,r),c=He._sampleContext;c?c.clearRect(0,0,r+1,r+1):c=He._sampleContext=Tt.getContext(new ee(r)),c.save();var d=new te().scale(o/e.width,l/e.height).translate(-e.x,-e.y);d.applyToContext(c),t&&t.draw(c,new h({clip:!0,matrices:[d]})),this._matrix.applyToContext(c);var p=this.getElement(),_=this._size;p&&c.drawImage(p,-_.width/2,-_.height/2),c.restore();for(var m=c.getImageData(.5,.5,Math.ceil(o),Math.ceil(l)).data,w=[0,0,0],y=0,v=0,C=m.length;v<C;v+=4){var P=m[v+3];y+=P,P/=255,w[0]+=m[v]*P,w[1]+=m[v+1]*P,w[2]+=m[v+2]*P}for(var v=0;v<3;v++)w[v]/=y;return y?We.read(w):null},getPixel:function(){var s=D.read(arguments),e=this.getContext().getImageData(s.x,s.y,1,1).data;return new We("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var s=arguments,e=D.read(s),t=We.read(s),r=t._convert("rgb"),o=t._alpha,l=this.getContext(!0),c=l.createImageData(1,1),d=c.data;d[0]=r[0]*255,d[1]=r[1]*255,d[2]=r[2]*255,d[3]=o!=null?o*255:255,l.putImageData(c,e.x,e.y)},clear:function(){var s=this._size;this.getContext(!0).clearRect(0,0,s.width+1,s.height+1)},createImageData:function(){var s=ee.read(arguments);return this.getContext().createImageData(s.width,s.height)},getImageData:function(){var s=$.read(arguments);return s.isEmpty()&&(s=new $(this._size)),this.getContext().getImageData(s.x,s.y,s.width,s.height)},putImageData:function(s){var e=D.read(arguments,1);this.getContext(!0).putImageData(s,e.x,e.y)},setImageData:function(s){this.setSize(s),this.getContext(!0).putImageData(s,0,0)},_getBounds:function(s,e){var t=new $(this._size).setCenter(0,0);return s?s._transformBounds(t):t},_hitTestSelf:function(s){if(this._contains(s)){var e=this;return new st("pixel",e,{offset:s.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(s,e,t){var r=this.getElement();if(r&&r.width>0&&r.height>0){s.globalAlpha=X.clamp(this._opacity,0,1),this._setStyles(s,e,t);var o=this._smoothing,l=o==="off";Xe.setPrefixed(s,l?"imageSmoothingEnabled":"imageSmoothingQuality",l?!1:o),s.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),ht=B.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,t){this._initialize(e,t!==a&&D.read(arguments,1))||this.setDefinition(e instanceof qe?e:new qe(e))},_equals:function(s){return this._definition===s._definition},copyContent:function(s){this.setDefinition(s._definition)},getDefinition:function(){return this._definition},setDefinition:function(s){this._definition=s,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(s,e){var t=this._definition._item;return t._getCachedBounds(t._matrix.prepended(s),e)},_hitTestSelf:function(s,e,t){var r=e.extend({all:!1}),o=this._definition._item._hitTest(s,r,t);return o&&(o.item=this),o},_draw:function(s,e){this._definition._item.draw(s,e)}}),qe=h.extend({_class:"SymbolDefinition",initialize:function(e,t){this._id=ne.get(),this.project=nt.project,e&&this.setItem(e,t)},_serialize:function(s,e){return e.add(this,function(){return h.serialize([this._class,this._item],s,!1,e)})},_changed:function(s){s&8&&B._clearBoundsCache(this),s&1&&this.project._changed(s)},getItem:function(){return this._item},setItem:function(s,e){s._symbol&&(s=s.clone()),this._item&&(this._item._symbol=null),this._item=s,s.remove(),s.setSelected(!1),e||s.setPosition(new D),s._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(s){return new ht(this,s)},clone:function(){return new qe(this._item.clone(!1))},equals:function(s){return s===this||s&&this._item.equals(s._item)||!1}}),st=h.extend({_class:"HitResult",initialize:function(e,t,r){this.type=e,this.item=t,r&&this.inject(r)},statics:{getOptions:function(s){var e=s&&h.read(s);return new h({type:null,tolerance:nt.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),Ee=h.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,t,r,o,l,c){var d=arguments.length,p,_,m,w;d>0&&(e==null||typeof e=="object"?d===1&&e&&"point"in e?(p=e.point,_=e.handleIn,m=e.handleOut,w=e.selection):(p=e,_=t,m=r,w=o):(p=[e,t],_=r!==a?[r,o]:null,m=l!==a?[l,c]:null)),new bt(p,this,"_point"),new bt(_,this,"_handleIn"),new bt(m,this,"_handleOut"),w&&this.setSelection(w)},_serialize:function(s,e){var t=this._point,r=this._selection,o=r||this.hasHandles()?[t,this._handleIn,this._handleOut]:t;return r&&o.push(r),h.serialize(o,s,!0,e)},_changed:function(s){var e=this._path;if(e){var t=e._curves,r=this._index,o;t&&((!s||s===this._point||s===this._handleIn)&&(o=r>0?t[r-1]:e._closed?t[t.length-1]:null)&&o._changed(),(!s||s===this._point||s===this._handleOut)&&(o=t[r])&&o._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(D.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(D.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(D.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var s=this._handleIn,e=this._handleOut;return!s.isZero()&&!e.isZero()&&s.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(s){var e=this._selection,t=this._path;this._selection=s=s||0,t&&s!==e&&(t._updateSelection(this,e,s),t._changed(257))},_changeSelection:function(s,e){var t=this._selection;this.setSelection(e?t|s:t&~s)},isSelected:function(){return!!(this._selection&7)},setSelected:function(s){this._changeSelection(7,s)},getIndex:function(){return this._index!==a?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var s=this._path,e=this._index;return s?(e>0&&!s._closed&&e===s._segments.length-1&&e--,s.getCurves()[e]||null):null},getLocation:function(){var s=this.getCurve();return s?new ct(s,this===s._segment1?0:1):null},getNext:function(){var s=this._path&&this._path._segments;return s&&(s[this._index+1]||this._path._closed&&s[0])||null},smooth:function(s,e,t){var r=s||{},o=r.type,l=r.factor,c=this.getPrevious(),d=this.getNext(),p=(c||this)._point,_=this._point,m=(d||this)._point,w=p.getDistance(_),y=_.getDistance(m);if(!o||o==="catmull-rom"){var v=l===a?.5:l,C=Math.pow(w,v),P=C*C,I=Math.pow(y,v),k=I*I;if(!e&&c){var b=2*k+3*I*C+P,x=3*I*(I+C);this.setHandleIn(x!==0?new D((k*p._x+b*_._x-P*m._x)/x-_._x,(k*p._y+b*_._y-P*m._y)/x-_._y):new D)}if(!t&&d){var b=2*P+3*C*I+k,x=3*C*(C+I);this.setHandleOut(x!==0?new D((P*m._x+b*_._x-k*p._x)/x-_._x,(P*m._y+b*_._y-k*p._y)/x-_._y):new D)}}else if(o==="geometric"){if(c&&d){var S=p.subtract(m),E=l===a?.4:l,A=E*w/(w+y);e||this.setHandleIn(S.multiply(A)),t||this.setHandleOut(S.multiply(A-E))}}else throw new Error("Smoothing method '"+o+"' not supported.")},getPrevious:function(){var s=this._path&&this._path._segments;return s&&(s[this._index-1]||this._path._closed&&s[s.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var s=this._path;return s&&this._index===s._segments.length-1||!1},reverse:function(){var s=this._handleIn,e=this._handleOut,t=s.clone();s.set(e),e.set(t)},reversed:function(){return new Ee(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Ee(this._point,this._handleIn,this._handleOut)},equals:function(s){return s===this||s&&this._class===s._class&&this._point.equals(s._point)&&this._handleIn.equals(s._handleIn)&&this._handleOut.equals(s._handleOut)||!1},toString:function(){var s=["point: "+this._point];return this._handleIn.isZero()||s.push("handleIn: "+this._handleIn),this._handleOut.isZero()||s.push("handleOut: "+this._handleOut),"{ "+s.join(", ")+" }"},transform:function(s){this._transformCoordinates(s,new Array(6),!0),this._changed()},interpolate:function(s,e,t){var r=1-t,o=t,l=s._point,c=e._point,d=s._handleIn,p=e._handleIn,_=e._handleOut,m=s._handleOut;this._point._set(r*l._x+o*c._x,r*l._y+o*c._y,!0),this._handleIn._set(r*d._x+o*p._x,r*d._y+o*p._y,!0),this._handleOut._set(r*m._x+o*_._x,r*m._y+o*_._y,!0),this._changed()},_transformCoordinates:function(s,e,t){var r=this._point,o=!t||!this._handleIn.isZero()?this._handleIn:null,l=!t||!this._handleOut.isZero()?this._handleOut:null,c=r._x,d=r._y,p=2;return e[0]=c,e[1]=d,o&&(e[p++]=o._x+c,e[p++]=o._y+d),l&&(e[p++]=l._x+c,e[p++]=l._y+d),s&&(s._transformCoordinates(e,e,p/2),c=e[0],d=e[1],t?(r._x=c,r._y=d,p=2,o&&(o._x=e[p++]-c,o._y=e[p++]-d),l&&(l._x=e[p++]-c,l._y=e[p++]-d)):(o||(e[p++]=c,e[p++]=d),l||(e[p++]=c,e[p++]=d))),e}}),bt=D.extend({initialize:function(e,t,r){var o,l,c;if(!e)o=l=0;else if((o=e[0])!==a)l=e[1];else{var d=e;(o=d.x)===a&&(d=D.read(arguments),o=d.x),l=d.y,c=d.selected}this._x=o,this._y=l,this._owner=t,t[r]=this,c&&this.setSelected(!0)},_set:function(s,e){return this._x=s,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(s){this._x=s,this._owner._changed(this)},getY:function(){return this._y},setY:function(s){this._y=s,this._owner._changed(this)},isZero:function(){var s=X.isZero;return s(this._x)&&s(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(s){this._owner._changeSelection(this._getSelection(),s)},_getSelection:function(){var s=this._owner;return this===s._point?1:this===s._handleIn?2:this===s._handleOut?4:0}}),oe=h.extend({_class:"Curve",beans:!0,initialize:function(e,t,r,o,l,c,d,p){var _=arguments.length,m,w,y,v,C,P;_===3?(this._path=e,m=t,w=r):_?_===1?"segment1"in e?(m=new Ee(e.segment1),w=new Ee(e.segment2)):"point1"in e?(y=e.point1,C=e.handle1,P=e.handle2,v=e.point2):Array.isArray(e)&&(y=[e[0],e[1]],v=[e[6],e[7]],C=[e[2]-e[0],e[3]-e[1]],P=[e[4]-e[6],e[5]-e[7]]):_===2?(m=new Ee(e),w=new Ee(t)):_===4?(y=e,C=t,P=r,v=o):_===8&&(y=[e,t],v=[d,p],C=[r-e,o-t],P=[l-d,c-p]):(m=new Ee,w=new Ee),this._segment1=m||new Ee(y,null,C),this._segment2=w||new Ee(v,P,null)},_serialize:function(s,e){return h.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],s,!0,e)},_changed:function(){this._length=this._bounds=a},clone:function(){return new oe(this._segment1,this._segment2)},toString:function(){var s=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||s.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||s.push("handle2: "+this._segment2._handleIn),s.push("point2: "+this._segment2._point),"{ "+s.join(", ")+" }"},classify:function(){return oe.classify(this.getValues())},remove:function(){var s=!1;if(this._path){var e=this._segment2,t=e._handleOut;s=e.remove(),s&&this._segment1._handleOut.set(t)}return s},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(D.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(D.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(D.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(D.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var s=this._path&&this._path._curves;return s&&(s[this._segment1._index+1]||this._path._closed&&s[0])||null},getPrevious:function(){var s=this._path&&this._path._curves;return s&&(s[this._segment1._index-1]||this._path._closed&&s[s.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var s=this._path;return s&&this._segment1._index===s._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(s){this.getPoint1().setSelected(s),this.getHandle1().setSelected(s),this.getHandle2().setSelected(s),this.getPoint2().setSelected(s)},getValues:function(s){return oe.getValues(this._segment1,this._segment2,s)},getPoints:function(){for(var s=this.getValues(),e=[],t=0;t<8;t+=2)e.push(new D(s[t],s[t+1]));return e}},{getLength:function(){return this._length==null&&(this._length=oe.getLength(this.getValues(),0,1)),this._length},getArea:function(){return oe.getArea(this.getValues())},getLine:function(){return new pe(this._segment1._point,this._segment2._point)},getPart:function(s,e){return new oe(oe.getPart(this.getValues(),s,e))},getPartLength:function(s,e){return oe.getLength(this.getValues(),s,e)},divideAt:function(s){return this.divideAtTime(s&&s.curve===this?s.time:this.getTimeAt(s))},divideAtTime:function(s,e){var t=1e-8,r=1-t,o=null;if(s>=t&&s<=r){var l=oe.subdivide(this.getValues(),s),c=l[0],d=l[1],p=e||this.hasHandles(),_=this._segment1,m=this._segment2,w=this._path;p&&(_._handleOut._set(c[2]-c[0],c[3]-c[1]),m._handleIn._set(d[4]-d[6],d[5]-d[7]));var y=c[6],v=c[7],C=new Ee(new D(y,v),p&&new D(c[4]-y,c[5]-v),p&&new D(d[2]-y,d[3]-v));w?(w.insert(_._index+1,C),o=this.getNext()):(this._segment2=C,this._changed(),o=new oe(C,m))}return o},splitAt:function(s){var e=this._path;return e?e.splitAt(s):null},splitAtTime:function(s){return this.splitAt(this.getLocationAtTime(s))},divide:function(s,e){return this.divideAtTime(s===a?.5:e?s:this.getTimeAt(s))},split:function(s,e){return this.splitAtTime(s===a?.5:e?s:this.getTimeAt(s))},reversed:function(){return new oe(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(s,e,t,r){var o=s._point,l=s._handleOut,c=e._handleIn,d=e._point,p=o.x,_=o.y,m=d.x,w=d.y,y=r?[p,_,p,_,m,w,m,w]:[p,_,p+l._x,_+l._y,m+c._x,w+c._y,m,w];return t&&t._transformCoordinates(y,y,4),y},subdivide:function(s,e){var t=s[0],r=s[1],o=s[2],l=s[3],c=s[4],d=s[5],p=s[6],_=s[7];e===a&&(e=.5);var m=1-e,w=m*t+e*o,y=m*r+e*l,v=m*o+e*c,C=m*l+e*d,P=m*c+e*p,I=m*d+e*_,k=m*w+e*v,b=m*y+e*C,x=m*v+e*P,S=m*C+e*I,E=m*k+e*x,A=m*b+e*S;return[[t,r,w,y,k,b,E,A],[E,A,x,S,P,I,p,_]]},getMonoCurves:function(s,e){var t=[],r=e?0:1,o=s[r+0],l=s[r+2],c=s[r+4],d=s[r+6];if(o>=l==l>=c&&l>=c==c>=d||oe.isStraight(s))t.push(s);else{var p=3*(l-c)-o+d,_=2*(o+c)-4*l,m=l-o,w=1e-8,y=1-w,v=[],C=X.solveQuadratic(p,_,m,v,w,y);if(!C)t.push(s);else{v.sort();var P=v[0],I=oe.subdivide(s,P);t.push(I[0]),C>1&&(P=(v[1]-P)/(1-P),I=oe.subdivide(I[1],P),t.push(I[0])),t.push(I[1])}}return t},solveCubic:function(s,e,t,r,o,l){var c=s[e],d=s[e+2],p=s[e+4],_=s[e+6],m=0;if(!(c<t&&_<t&&d<t&&p<t||c>t&&_>t&&d>t&&p>t)){var w=3*(d-c),y=3*(p-d)-w,v=_-c-w-y;m=X.solveCubic(v,y,w,c-t,r,o,l)}return m},getTimeOf:function(s,e){var t=new D(s[0],s[1]),r=new D(s[6],s[7]),o=1e-12,l=1e-7,c=e.isClose(t,o)?0:e.isClose(r,o)?1:null;if(c===null)for(var d=[e.x,e.y],p=[],_=0;_<2;_++)for(var m=oe.solveCubic(s,_,d[_],p,0,1),w=0;w<m;w++){var y=p[w];if(e.isClose(oe.getPoint(s,y),l))return y}return e.isClose(t,l)?0:e.isClose(r,l)?1:null},getNearestTime:function(s,e){if(oe.isStraight(s)){var t=s[0],r=s[1],o=s[6],l=s[7],c=o-t,d=l-r,p=c*c+d*d;if(p===0)return 0;var _=((e.x-t)*c+(e.y-r)*d)/p;return _<1e-12?0:_>.999999999999?1:oe.getTimeOf(s,new D(t+_*c,r+_*d))}var m=100,w=1/0,y=0;function v(I){if(I>=0&&I<=1){var k=e.getDistance(oe.getPoint(s,I),!0);if(k<w)return w=k,y=I,!0}}for(var C=0;C<=m;C++)v(C/m);for(var P=1/(m*2);P>1e-8;)!v(y-P)&&!v(y+P)&&(P/=2);return y},getPart:function(s,e,t){var r=e>t;if(r){var o=e;e=t,t=o}return e>0&&(s=oe.subdivide(s,e)[1]),t<1&&(s=oe.subdivide(s,(t-e)/(1-e))[0]),r?[s[6],s[7],s[4],s[5],s[2],s[3],s[0],s[1]]:s},isFlatEnough:function(s,e){var t=s[0],r=s[1],o=s[2],l=s[3],c=s[4],d=s[5],p=s[6],_=s[7],m=3*o-2*t-p,w=3*l-2*r-_,y=3*c-2*p-t,v=3*d-2*_-r;return Math.max(m*m,y*y)+Math.max(w*w,v*v)<=16*e*e},getArea:function(s){var e=s[0],t=s[1],r=s[2],o=s[3],l=s[4],c=s[5],d=s[6],p=s[7];return 3*((p-t)*(r+l)-(d-e)*(o+c)+o*(e-l)-r*(t-c)+p*(l+e/3)-d*(c+t/3))/20},getBounds:function(s){for(var e=s.slice(0,2),t=e.slice(),r=[0,0],o=0;o<2;o++)oe._addBounds(s[o],s[o+2],s[o+4],s[o+6],o,0,e,t,r);return new $(e[0],e[1],t[0]-e[0],t[1]-e[1])},_addBounds:function(s,e,t,r,o,l,c,d,p){function _(E,A){var O=E-A,L=E+A;O<c[o]&&(c[o]=O),L>d[o]&&(d[o]=L)}l/=2;var m=c[o]+l,w=d[o]-l;if(s<m||e<m||t<m||r<m||s>w||e>w||t>w||r>w)if(e<s!=e<r&&t<s!=t<r)_(s,0),_(r,0);else{var y=3*(e-t)-s+r,v=2*(s+t)-4*e,C=e-s,P=X.solveQuadratic(y,v,C,p),I=1e-8,k=1-I;_(r,0);for(var b=0;b<P;b++){var x=p[b],S=1-x;I<=x&&x<=k&&_(S*S*S*s+3*S*S*x*e+3*S*x*x*t+x*x*x*r,l)}}}}},h.each(["getBounds","getStrokeBounds","getHandleBounds"],function(s){this[s]=function(){this._bounds||(this._bounds={});var e=this._bounds[s];return e||(e=this._bounds[s]=Se[s]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),h.each({isStraight:function(s,e,t,r){if(e.isZero()&&t.isZero())return!0;var o=r.subtract(s);if(o.isZero())return!1;if(o.isCollinear(e)&&o.isCollinear(t)){var l=new pe(s,r),c=1e-7;if(l.getDistance(s.add(e))<c&&l.getDistance(r.add(t))<c){var d=o.dot(o),p=o.dot(e)/d,_=o.dot(t)/d;return p>=0&&p<=1&&_<=0&&_>=-1}}return!1},isLinear:function(s,e,t,r){var o=r.subtract(s).divide(3);return e.equals(o)&&t.negate().equals(o)}},function(s,e){this[e]=function(t){var r=this._segment1,o=this._segment2;return s(r._point,r._handleOut,o._handleIn,o._point,t)},this.statics[e]=function(t,r){var o=t[0],l=t[1],c=t[6],d=t[7];return s(new D(o,l),new D(t[2]-o,t[3]-l),new D(t[4]-c,t[5]-d),new D(c,d),r)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(s){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(s||0)},isCollinear:function(s){return s&&this.isStraight()&&s.isStraight()&&this.getLine().isCollinear(s.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(s,e){return this.getLocationAtTime(e?s:this.getTimeAt(s))},getLocationAtTime:function(s){return s!=null&&s>=0&&s<=1?new ct(this,s):null},getTimeAt:function(s,e){return oe.getTimeAt(this.getValues(),s,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var s=D.read(arguments);return s.isZero()?[]:oe.getTimesWithTangent(this.getValues(),s)},getOffsetAtTime:function(s){return this.getPartLength(0,s)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(D.read(arguments)))},getOffsetOf:function(){var s=this.getLocationOf.apply(this,arguments);return s?s.getOffset():null},getTimeOf:function(){return oe.getTimeOf(this.getValues(),D.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var s=D.read(arguments),e=this.getValues(),t=oe.getNearestTime(e,s),r=oe.getPoint(e,t);return new ct(this,t,r,null,s.getDistance(r))},getNearestPoint:function(){var s=this.getNearestLocation.apply(this,arguments);return s&&s.getPoint()}},new function(){var s=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return h.each(s,function(e){this[e+"At"]=function(t,r){var o=this.getValues();return oe[e](o,r?t:oe.getTimeAt(o,t))},this[e+"AtTime"]=function(t){return oe[e](this.getValues(),t)}},{statics:{_evaluateMethods:s}})},new function(){function s(r){var o=r[0],l=r[1],c=r[2],d=r[3],p=r[4],_=r[5],m=r[6],w=r[7],y=9*(c-p)+3*(m-o),v=6*(o+p)-12*c,C=3*(c-o),P=9*(d-_)+3*(w-l),I=6*(l+_)-12*d,k=3*(d-l);return function(b){var x=(y*b+v)*b+C,S=(P*b+I)*b+k;return Math.sqrt(x*x+S*S)}}function e(r,o){return Math.max(2,Math.min(16,Math.ceil(Math.abs(o-r)*32)))}function t(r,o,l,c){if(o==null||o<0||o>1)return null;var d=r[0],p=r[1],_=r[2],m=r[3],w=r[4],y=r[5],v=r[6],C=r[7],P=X.isZero;P(_-d)&&P(m-p)&&(_=d,m=p),P(w-v)&&P(y-C)&&(w=v,y=C);var I=3*(_-d),k=3*(w-_)-I,b=v-d-I-k,x=3*(m-p),S=3*(y-m)-x,E=C-p-x-S,A,O;if(l===0)A=o===0?d:o===1?v:((b*o+k)*o+I)*o+d,O=o===0?p:o===1?C:((E*o+S)*o+x)*o+p;else{var L=1e-8,R=1-L;if(o<L?(A=I,O=x):o>R?(A=3*(v-w),O=3*(C-y)):(A=(3*b*o+2*k)*o+I,O=(3*E*o+2*S)*o+x),c){A===0&&O===0&&(o<L||o>R)&&(A=w-_,O=y-m);var F=Math.sqrt(A*A+O*O);F&&(A/=F,O/=F)}if(l===3){var w=6*b*o+2*k,y=6*E*o+2*S,U=Math.pow(A*A+O*O,3/2);A=U!==0?(A*y-O*w)/U:0,O=0}}return l===2?new D(O,-A):new D(A,O)}return{statics:{classify:function(r){var o=r[0],l=r[1],c=r[2],d=r[3],p=r[4],_=r[5],m=r[6],w=r[7],y=o*(w-_)+l*(p-m)+m*_-w*p,v=c*(l-w)+d*(m-o)+o*w-l*m,C=p*(d-l)+_*(o-c)+c*l-d*o,P=3*C,I=P-v,k=I-v+y,b=Math.sqrt(k*k+I*I+P*P),x=b!==0?1/b:0,S=X.isZero,E="serpentine";k*=x,I*=x,P*=x;function A(F,U,G){var V=U!==a,j=V&&U>0&&U<1,Q=V&&G>0&&G<1;return V&&(!(j||Q)||F==="loop"&&!(j&&Q))&&(F="arch",j=Q=!1),{type:F,roots:j||Q?j&&Q?U<G?[U,G]:[G,U]:[j?U:G]:null}}if(S(k))return S(I)?A(S(P)?"line":"quadratic"):A(E,P/(3*I));var O=3*I*I-4*k*P;if(S(O))return A("cusp",I/(2*k));var L=O>0?Math.sqrt(O/3):Math.sqrt(-O),R=2*k;return A(O>0?E:"loop",(I+L)/R,(I-L)/R)},getLength:function(r,o,l,c){if(o===a&&(o=0),l===a&&(l=1),oe.isStraight(r)){var d=r;l<1&&(d=oe.subdivide(d,l)[0],o/=l),o>0&&(d=oe.subdivide(d,o)[1]);var p=d[6]-d[0],_=d[7]-d[1];return Math.sqrt(p*p+_*_)}return X.integrate(c||s(r),o,l,e(o,l))},getTimeAt:function(r,o,l){if(l===a&&(l=o<0?1:0),o===0)return l;var c=Math.abs,d=1e-12,p=o>0,_=p?l:0,m=p?1:l,w=s(r),y=oe.getLength(r,_,m,w),v=c(o)-y;if(c(v)<d)return p?m:_;if(v>d)return null;var C=o/y,P=0;function I(k){return P+=X.integrate(w,l,k,e(l,k)),l=k,P-o}return X.findRoot(I,w,l+C,_,m,32,1e-12)},getPoint:function(r,o){return t(r,o,0,!1)},getTangent:function(r,o){return t(r,o,1,!0)},getWeightedTangent:function(r,o){return t(r,o,1,!1)},getNormal:function(r,o){return t(r,o,2,!0)},getWeightedNormal:function(r,o){return t(r,o,2,!1)},getCurvature:function(r,o){return t(r,o,3,!1).x},getPeaks:function(r){var o=r[0],l=r[1],c=r[2],d=r[3],p=r[4],_=r[5],m=r[6],w=r[7],y=-o+3*c-3*p+m,v=3*o-6*c+3*p,C=-3*o+3*c,P=-l+3*d-3*_+w,I=3*l-6*d+3*_,k=-3*l+3*d,b=1e-8,x=1-b,S=[];return X.solveCubic(9*(y*y+P*P),9*(y*v+I*P),2*(v*v+I*I)+3*(C*y+k*P),C*v+I*k,S,b,x),S.sort()}}}},new function(){function s(v,C,P,I,k,b,x){var S=!x&&P.getPrevious()===k,E=!x&&P!==k&&P.getNext()===k,A=1e-8,O=1-A;if(I!==null&&I>=(S?A:0)&&I<=(E?O:1)&&b!==null&&b>=(E?A:0)&&b<=(S?O:1)){var L=new ct(P,I,null,x),R=new ct(k,b,null,x);L._intersection=R,R._intersection=L,(!C||C(L))&&ct.insert(v,L,!0)}}function e(v,C,P,I,k,b,x,S,E,A,O,L,R){if(++E>=4096||++S>=40)return E;var F=1e-9,U=C[0],G=C[1],V=C[6],j=C[7],Q=pe.getSignedDistance,Z=Q(U,G,V,j,C[2],C[3]),Y=Q(U,G,V,j,C[4],C[5]),re=Z*Y>0?3/4:4/9,le=re*Math.min(0,Z,Y),de=re*Math.max(0,Z,Y),ve=Q(U,G,V,j,v[0],v[1]),we=Q(U,G,V,j,v[2],v[3]),he=Q(U,G,V,j,v[4],v[5]),fe=Q(U,G,V,j,v[6],v[7]),xe=t(ve,we,he,fe),Ce=xe[0],Pe=xe[1],Me,Re;if(Z===0&&Y===0&&ve===0&&we===0&&he===0&&fe===0||(Me=r(Ce,Pe,le,de))==null||(Re=r(Ce.reverse(),Pe.reverse(),le,de))==null)return E;var ze=A+(O-A)*Me,De=A+(O-A)*Re;if(Math.max(R-L,De-ze)<F){var Ue=(ze+De)/2,ft=(L+R)/2;s(k,b,x?I:P,x?ft:Ue,x?P:I,x?Ue:ft)}else{v=oe.getPart(v,Me,Re);var Ie=R-L;if(Re-Me>.8)if(De-ze>Ie){var Je=oe.subdivide(v,.5),Ue=(ze+De)/2;E=e(C,Je[0],I,P,k,b,!x,S,E,L,R,ze,Ue),E=e(C,Je[1],I,P,k,b,!x,S,E,L,R,Ue,De)}else{var Je=oe.subdivide(C,.5),ft=(L+R)/2;E=e(Je[0],v,I,P,k,b,!x,S,E,L,ft,ze,De),E=e(Je[1],v,I,P,k,b,!x,S,E,ft,R,ze,De)}else Ie===0||Ie>=F?E=e(C,v,I,P,k,b,!x,S,E,L,R,ze,De):E=e(v,C,P,I,k,b,x,S,E,ze,De,L,R)}return E}function t(v,C,P,I){var k=[0,v],b=[1/3,C],x=[2/3,P],S=[1,I],E=C-(2*v+I)/3,A=P-(v+2*I)/3,O;if(E*A<0)O=[[k,b,S],[k,x,S]];else{var L=E/A;O=[L>=2?[k,b,S]:L<=.5?[k,x,S]:[k,b,x,S],[k,S]]}return(E||A)<0?O.reverse():O}function r(v,C,P,I){return v[0][1]<P?o(v,!0,P):C[0][1]>I?o(C,!1,I):v[0][0]}function o(v,C,P){for(var I=v[0][0],k=v[0][1],b=1,x=v.length;b<x;b++){var S=v[b][0],E=v[b][1];if(C?E>=P:E<=P)return E===P?S:I+(P-k)*(S-I)/(E-k);I=S,k=E}return null}function l(v,C,P,I,k){var b=X.isZero;if(b(I)&&b(k)){var x=oe.getTimeOf(v,new D(C,P));return x===null?[]:[x]}for(var S=Math.atan2(-k,I),E=Math.sin(S),A=Math.cos(S),O=[],L=[],R=0;R<8;R+=2){var F=v[R]-C,U=v[R+1]-P;O.push(F*A-U*E,F*E+U*A)}return oe.solveCubic(O,1,0,L,0,1),L}function c(v,C,P,I,k,b,x){for(var S=C[0],E=C[1],A=C[6],O=C[7],L=l(v,S,E,A-S,O-E),R=0,F=L.length;R<F;R++){var U=L[R],G=oe.getPoint(v,U),V=oe.getTimeOf(C,G);V!==null&&s(k,b,x?I:P,x?V:U,x?P:I,x?U:V)}}function d(v,C,P,I,k,b){var x=pe.intersect(v[0],v[1],v[6],v[7],C[0],C[1],C[6],C[7]);x&&s(k,b,P,oe.getTimeOf(v,x),I,oe.getTimeOf(C,x))}function p(v,C,P,I,k,b){var x=1e-12,S=Math.min,E=Math.max;if(E(v[0],v[2],v[4],v[6])+x>S(C[0],C[2],C[4],C[6])&&S(v[0],v[2],v[4],v[6])-x<E(C[0],C[2],C[4],C[6])&&E(v[1],v[3],v[5],v[7])+x>S(C[1],C[3],C[5],C[7])&&S(v[1],v[3],v[5],v[7])-x<E(C[1],C[3],C[5],C[7])){var A=w(v,C);if(A)for(var O=0;O<2;O++){var L=A[O];s(k,b,P,L[0],I,L[1],!0)}else{var R=oe.isStraight(v),F=oe.isStraight(C),U=R&&F,G=R&&!F,V=k.length;if((U?d:R||F?c:e)(G?C:v,G?v:C,G?I:P,G?P:I,k,b,G,0,0,0,1,0,1),!U||k.length===V)for(var O=0;O<4;O++){var j=O>>1,Q=O&1,Z=j*6,Y=Q*6,re=new D(v[Z],v[Z+1]),le=new D(C[Y],C[Y+1]);re.isClose(le,x)&&s(k,b,P,j,I,Q)}}}return k}function _(v,C,P,I){var k=oe.classify(v);if(k.type==="loop"){var b=k.roots;s(P,I,C,b[0],C,b[1])}return P}function m(v,C,P,I,k,b){var x=1e-7,S=!C;S&&(C=v);for(var E=v.length,A=C.length,O=new Array(E),L=S?O:new Array(A),R=[],F=0;F<E;F++)O[F]=v[F].getValues(I);if(!S)for(var F=0;F<A;F++)L[F]=C[F].getValues(k);for(var U=W.findCurveBoundsCollisions(O,L,x),G=0;G<E;G++){var V=v[G],j=O[G];S&&_(j,V,R,P);var Q=U[G];if(Q)for(var Z=0;Z<Q.length;Z++){if(b&&R.length)return R;var Y=Q[Z];if(!S||Y>G){var re=C[Y],le=L[Y];p(j,le,V,re,R,P)}}}return R}function w(v,C){function P(fe){var xe=fe[6]-fe[0],Ce=fe[7]-fe[1];return xe*xe+Ce*Ce}var I=Math.abs,k=pe.getDistance,b=1e-8,x=1e-7,S=oe.isStraight(v),E=oe.isStraight(C),A=S&&E,O=P(v)<P(C),L=O?C:v,R=O?v:C,F=L[0],U=L[1],G=L[6]-F,V=L[7]-U;if(k(F,U,G,V,R[0],R[1],!0)<x&&k(F,U,G,V,R[6],R[7],!0)<x)!A&&k(F,U,G,V,L[2],L[3],!0)<x&&k(F,U,G,V,L[4],L[5],!0)<x&&k(F,U,G,V,R[2],R[3],!0)<x&&k(F,U,G,V,R[4],R[5],!0)<x&&(S=E=A=!0);else if(A)return null;if(S^E)return null;for(var j=[v,C],Q=[],Z=0;Z<4&&Q.length<2;Z++){var Y=Z&1,re=Y^1,le=Z>>1,de=oe.getTimeOf(j[Y],new D(j[re][le?6:0],j[re][le?7:1]));if(de!=null){var ve=Y?[le,de]:[de,le];(!Q.length||I(ve[0]-Q[0][0])>b&&I(ve[1]-Q[0][1])>b)&&Q.push(ve)}if(Z>2&&!Q.length)break}if(Q.length!==2)Q=null;else if(!A){var we=oe.getPart(v,Q[0][0],Q[1][0]),he=oe.getPart(C,Q[0][1],Q[1][1]);(I(he[2]-we[2])>x||I(he[3]-we[3])>x||I(he[4]-we[4])>x||I(he[5]-we[5])>x)&&(Q=null)}return Q}function y(v,C){var P=v[0],I=v[1],k=v[2],b=v[3],x=v[4],S=v[5],E=v[6],A=v[7],O=C.normalize(),L=O.x,R=O.y,F=3*E-9*x+9*k-3*P,U=3*A-9*S+9*b-3*I,G=6*x-12*k+6*P,V=6*S-12*b+6*I,j=3*k-3*P,Q=3*b-3*I,Z=2*F*R-2*U*L,Y=[];if(Math.abs(Z)<X.CURVETIME_EPSILON){var re=F*Q-U*j,Z=F*V-U*G;if(Z!=0){var le=-re/Z;le>=0&&le<=1&&Y.push(le)}}else{var de=(G*G-4*F*j)*R*R+(-2*G*V+4*U*j+4*F*Q)*L*R+(V*V-4*U*Q)*L*L,ve=G*R-V*L;if(de>=0&&Z!=0){var we=Math.sqrt(de),he=-(ve+we)/Z,fe=(-ve+we)/Z;he>=0&&he<=1&&Y.push(he),fe>=0&&fe<=1&&Y.push(fe)}}return Y}return{getIntersections:function(v){var C=this.getValues(),P=v&&v!==this&&v.getValues();return P?p(C,P,this,v,[]):_(C,this,[])},statics:{getOverlaps:w,getIntersections:m,getCurveLineIntersections:l,getTimesWithTangent:y}}}),ct=h.extend({_class:"CurveLocation",initialize:function(e,t,r,o,l){if(t>=.99999999){var c=e.getNext();c&&(t=0,e=c)}this._setCurve(e),this._time=t,this._point=r||e.getPointAtTime(t),this._overlap=o,this._distance=l,this._intersection=this._next=this._previous=null},_setPath:function(s){this._path=s,this._version=s?s._version:0},_setCurve:function(s){this._setPath(s._path),this._curve=s,this._segment=null,this._segment1=s._segment1,this._segment2=s._segment2},_setSegment:function(s){var e=s.getCurve();e?this._setCurve(e):(this._setPath(s._path),this._segment1=s,this._segment2=null),this._segment=s,this._time=s===this._segment1?0:1,this._point=s._point.clone()},getSegment:function(){var s=this._segment;if(!s){var e=this.getCurve(),t=this.getTime();t===0?s=e._segment1:t===1?s=e._segment2:t!=null&&(s=e.getPartLength(0,t)<e.getPartLength(t,1)?e._segment1:e._segment2),this._segment=s}return s},getCurve:function(){var s=this._path,e=this;s&&s._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function t(r){var o=r&&r.getCurve();if(o&&(e._time=o.getTimeOf(e._point))!=null)return e._setCurve(o),o}return this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var s=this.getCurve();return s&&s._path},getIndex:function(){var s=this.getCurve();return s&&s.getIndex()},getTime:function(){var s=this.getCurve(),e=this._time;return s&&e==null?this._time=s.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var s=this._offset;if(s==null){s=0;var e=this.getPath(),t=this.getIndex();if(e&&t!=null)for(var r=e.getCurves(),o=0;o<t;o++)s+=r[o].getLength();this._offset=s+=this.getCurveOffset()}return s},getCurveOffset:function(){var s=this._curveOffset;if(s==null){var e=this.getCurve(),t=this.getTime();this._curveOffset=s=t!=null&&e&&e.getPartLength(0,t)}return s},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var s=this.getCurve(),e=s&&s.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var s=this.getCurve(),e=s._path,t=s&&s.splitAtTime(this.getTime());return t&&this._setSegment(e.getLastSegment()),t},equals:function(s,e){var t=this===s;if(!t&&s instanceof ct){var r=this.getCurve(),o=s.getCurve(),l=r._path,c=o._path;if(l===c){var d=Math.abs,p=1e-7,_=d(this.getOffset()-s.getOffset()),m=!e&&this._intersection,w=!e&&s._intersection;t=(_<p||l&&d(l.getLength()-_)<p)&&(!m&&!w||m&&w&&m.equals(w,!0))}}return t},toString:function(){var s=[],e=this.getPoint(),t=K.instance;e&&s.push("point: "+e);var r=this.getIndex();r!=null&&s.push("index: "+r);var o=this.getTime();return o!=null&&s.push("time: "+t.number(o)),this._distance!=null&&s.push("distance: "+t.number(this._distance)),"{ "+s.join(", ")+" }"},isTouching:function(){var s=this._intersection;if(s&&this.getTangent().isCollinear(s.getTangent())){var e=this.getCurve(),t=s.getCurve();return!(e.isStraight()&&t.isStraight()&&e.getLine().intersect(t.getLine()))}return!1},isCrossing:function(){var s=this._intersection;if(!s)return!1;var e=this.getTime(),t=s.getTime(),r=1e-8,o=1-r,l=e>=r&&e<=o,c=t>=r&&t<=o;if(l&&c)return!this.isTouching();var d=this.getCurve(),p=d&&e<r?d.getPrevious():d,_=s.getCurve(),m=_&&t<r?_.getPrevious():_;if(e>o&&(d=d.getNext()),t>o&&(_=_.getNext()),!p||!d||!m||!_)return!1;var w=[];function y(L,R){var F=L.getValues(),U=oe.classify(F).roots||oe.getPeaks(F),G=U.length,V=oe.getLength(F,R&&G?U[G-1]:0,!R&&G?U[0]:1);w.push(G?V:V/32)}function v(L,R,F){return R<F?L>R&&L<F:L>R||L<F}l||(y(p,!0),y(d,!1)),c||(y(m,!0),y(_,!1));var C=this.getPoint(),P=Math.min.apply(Math,w),I=l?d.getTangentAtTime(e):d.getPointAt(P).subtract(C),k=l?I.negate():p.getPointAt(-P).subtract(C),b=c?_.getTangentAtTime(t):_.getPointAt(P).subtract(C),x=c?b.negate():m.getPointAt(-P).subtract(C),S=k.getAngle(),E=I.getAngle(),A=x.getAngle(),O=b.getAngle();return!!(l?v(S,A,O)^v(E,A,O)&&v(S,O,A)^v(E,O,A):v(A,S,E)^v(O,S,E)&&v(A,E,S)^v(O,E,S))},hasOverlap:function(){return!!this._overlap}},h.each(oe._evaluateMethods,function(s){var e=s+"At";this[s]=function(){var t=this.getCurve(),r=this.getTime();return r!=null&&t&&t[e](r,!0)}},{preserve:!0}),new function(){function s(e,t,r){var o=e.length,l=0,c=o-1;function d(C,P){for(var I=C+P;I>=-1&&I<=o;I+=P){var k=e[(I%o+o)%o];if(!t.getPoint().isClose(k.getPoint(),1e-7))break;if(t.equals(k))return k}return null}for(;l<=c;){var p=l+c>>>1,_=e[p],m;if(r&&(m=t.equals(_)?_:d(p,-1)||d(p,1)))return t._overlap&&(m._overlap=m._intersection._overlap=!0),m;var w=t.getPath(),y=_.getPath(),v=w!==y?w._id-y._id:t.getIndex()+t.getTime()-(_.getIndex()+_.getTime());v<0?c=p-1:l=p+1}return e.splice(l,0,t),t}return{statics:{insert:s,expand:function(e){for(var t=e.slice(),r=e.length-1;r>=0;r--)s(t,e[r]._intersection,!1);return t}}}}),Oe=B.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(s){var e,t,r;if(h.isPlainObject(s)?(t=s.segments,e=s.pathData):Array.isArray(s)?t=s:typeof s=="string"&&(e=s),t){var o=t[0];r=o&&Array.isArray(o[0])}else e&&(r=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));var l=r?Be:Se;return new l(s)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(s){this.isClockwise()!=(s=!!s)&&this.reverse()},setPathData:function(s){var e=s&&s.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),t,r=!1,o,l,c=new D,d=new D;function p(x,S){var E=+t[x];return r&&(E+=c[S]),E}function _(x){return new D(p(x,"x"),p(x+1,"y"))}this.clear();for(var m=0,w=e&&e.length;m<w;m++){var y=e[m],v=y[0],C=v.toLowerCase();t=y.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var P=t&&t.length;switch(r=v===C,o==="z"&&!/[mz]/.test(C)&&this.moveTo(c),C){case"m":case"l":for(var I=C==="m",k=0;k<P;k+=2)this[I?"moveTo":"lineTo"](c=_(k)),I&&(d=c,I=!1);l=c;break;case"h":case"v":var b=C==="h"?"x":"y";c=c.clone();for(var k=0;k<P;k++)c[b]=p(k,b),this.lineTo(c);l=c;break;case"c":for(var k=0;k<P;k+=6)this.cubicCurveTo(_(k),l=_(k+2),c=_(k+4));break;case"s":for(var k=0;k<P;k+=4)this.cubicCurveTo(/[cs]/.test(o)?c.multiply(2).subtract(l):c,l=_(k),c=_(k+2)),o=C;break;case"q":for(var k=0;k<P;k+=4)this.quadraticCurveTo(l=_(k),c=_(k+2));break;case"t":for(var k=0;k<P;k+=2)this.quadraticCurveTo(l=/[qt]/.test(o)?c.multiply(2).subtract(l):c,c=_(k)),o=C;break;case"a":for(var k=0;k<P;k+=7)this.arcTo(c=_(k+5),new ee(+t[k],+t[k+1]),+t[k+2],+t[k+4],+t[k+3]);break;case"z":this.closePath(1e-12),c=d;break}o=C}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(s){var e=s.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(s):{};return e.onPath||!!(this.getFillRule()==="evenodd"?e.windingL&1||e.windingR&1:e.winding)},getIntersections:function(s,e,t,r){var o=this===s||!s,l=this._matrix._orNullIfIdentity(),c=o?l:(t||s._matrix)._orNullIfIdentity();return o||this.getBounds(l).intersects(s.getBounds(c),1e-12)?oe.getIntersections(this.getCurves(),!o&&s.getCurves(),e,l,c,r):[]},getCrossings:function(s){return this.getIntersections(s,function(e){return e.isCrossing()})},getNearestLocation:function(){for(var s=D.read(arguments),e=this.getCurves(),t=1/0,r=null,o=0,l=e.length;o<l;o++){var c=e[o].getNearestLocation(s);c._distance<t&&(t=c._distance,r=c)}return r},getNearestPoint:function(){var s=this.getNearestLocation.apply(this,arguments);return s&&s.getPoint()},interpolate:function(s,e,t){var r=!this._children,o=r?"_segments":"_children",l=s[o],c=e[o],d=this[o];if(!l||!c||l.length!==c.length)throw new Error("Invalid operands in interpolate() call: "+s+", "+e);var p=d.length,_=c.length;if(p<_)for(var m=r?Ee:Se,w=p;w<_;w++)this.add(new m);else p>_&&this[r?"removeSegments":"removeChildren"](_,p);for(var w=0;w<_;w++)d[w].interpolate(l[w],c[w],t);r&&(this.setClosed(s._closed),this._changed(9))},compare:function(s){var e=!1;if(s){var t=this._children||[this],r=s._children?s._children.slice():[s],o=t.length,l=r.length,c=[],d=0;e=!0;for(var p=W.findItemBoundsCollisions(t,r,X.GEOMETRIC_EPSILON),_=o-1;_>=0&&e;_--){var m=t[_];e=!1;var w=p[_];if(w)for(var y=w.length-1;y>=0&&!e;y--)m.compare(r[w[y]])&&(c[w[y]]||(c[w[y]]=!0,d++),e=!0)}e=e&&d===l}return e}}),Se=Oe.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var t=arguments,r=Array.isArray(e)?typeof e[0]=="object"?e:t:e&&e.size===a&&(e.x!==a||e.point!==a)?t:null;r&&r.length>0?this.setSegments(r):(this._curves=a,this._segmentSelection=0,!r&&typeof e=="string"&&(this.setPathData(e),e=null)),this._initialize(!r&&e)},_equals:function(s){return this._closed===s._closed&&h.equals(this._segments,s._segments)},copyContent:function(s){this.setSegments(s._segments),this._closed=s._closed},_changed:function s(e){if(s.base.call(this,e),e&8){if(this._length=this._area=a,e&32)this._version++;else if(this._curves)for(var t=0,r=this._curves.length;t<r;t++)this._curves[t]._changed()}else e&64&&(this._bounds=a)},getStyle:function(){var s=this._parent;return(s instanceof Be?s:this)._style},getSegments:function(){return this._segments},setSegments:function(s){var e=this.isFullySelected(),t=s&&s.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=a,t){var r=s[t-1];typeof r=="boolean"&&(this.setClosed(r),t--),this._add(Ee.readList(s,0,{},t))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var s=this._curves,e=this._segments;if(!s){var t=this._countCurves();s=this._curves=new Array(t);for(var r=0;r<t;r++)s[r]=new oe(this,e[r],e[r+1]||e[0])}return s},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var s=this.getCurves();return s[s.length-1]},isClosed:function(){return this._closed},setClosed:function(s){if(this._closed!=(s=!!s)){if(this._closed=s,this._curves){var e=this._curves.length=this._countCurves();s&&(this._curves[e-1]=new oe(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(s,e){var t=this._segments,r=t.length,o=new K(e),l=new Array(6),c=!0,d,p,_,m,w,y,v,C,P=[];function I(b,x){if(b._transformCoordinates(s,l),d=l[0],p=l[1],c)P.push("M"+o.pair(d,p)),c=!1;else if(w=l[2],y=l[3],w===d&&y===p&&v===_&&C===m){if(!x){var S=d-_,E=p-m;P.push(S===0?"v"+o.number(E):E===0?"h"+o.number(S):"l"+o.pair(S,E))}}else P.push("c"+o.pair(v-_,C-m)+" "+o.pair(w-_,y-m)+" "+o.pair(d-_,p-m));_=d,m=p,v=l[4],C=l[5]}if(!r)return"";for(var k=0;k<r;k++)I(t[k]);return this._closed&&r>0&&(I(t[0],!0),P.push("z")),P.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(s){for(var e=this._segments,t=new Array(6),r=0,o=e.length;r<o;r++)e[r]._transformCoordinates(s,t,!0);return!0},_add:function(s,c){for(var t=this._segments,r=this._curves,o=s.length,l=c==null,c=l?t.length:c,d=0;d<o;d++){var p=s[d];p._path&&(p=s[d]=p.clone()),p._path=this,p._index=c+d,p._selection&&this._updateSelection(p,0,p._selection)}if(l)h.push(t,s);else{t.splice.apply(t,[c,0].concat(s));for(var d=c+o,_=t.length;d<_;d++)t[d]._index=d}if(r){var m=this._countCurves(),w=c>0&&c+o-1===m?c-1:c,y=w,v=Math.min(w+o,m);s._curves&&(r.splice.apply(r,[w,0].concat(s._curves)),y+=s._curves.length);for(var d=y;d<v;d++)r.splice(d,0,new oe(this,null,null));this._adjustCurves(w,v)}return this._changed(41),s},_adjustCurves:function(s,e){for(var t=this._segments,r=this._curves,o,l=s;l<e;l++)o=r[l],o._path=this,o._segment1=t[l],o._segment2=t[l+1]||t[0],o._changed();(o=r[this._closed&&!s?t.length-1:s-1])&&(o._segment2=t[s]||t[0],o._changed()),(o=r[e])&&(o._segment1=t[e],o._changed())},_countCurves:function(){var s=this._segments.length;return!this._closed&&s>0?s-1:s},add:function(s){var e=arguments;return e.length>1&&typeof s!="number"?this._add(Ee.readList(e)):this._add([Ee.read(e)])[0]},insert:function(s,e){var t=arguments;return t.length>2&&typeof e!="number"?this._add(Ee.readList(t,1),s):this._add([Ee.read(t,1)],s)[0]},addSegment:function(){return this._add([Ee.read(arguments)])[0]},insertSegment:function(s){return this._add([Ee.read(arguments,1)],s)[0]},addSegments:function(s){return this._add(Ee.readList(s))},insertSegments:function(s,e){return this._add(Ee.readList(e),s)},removeSegment:function(s){return this.removeSegments(s,s+1)[0]||null},removeSegments:function(s,e,t){s=s||0,e=h.pick(e,this._segments.length);var r=this._segments,o=this._curves,l=r.length,c=r.splice(s,e-s),d=c.length;if(!d)return c;for(var p=0;p<d;p++){var _=c[p];_._selection&&this._updateSelection(_,_._selection,0),_._index=_._path=null}for(var p=s,m=r.length;p<m;p++)r[p]._index=p;if(o){for(var w=s>0&&e===l+(this._closed?1:0)?s-1:s,o=o.splice(w,d),p=o.length-1;p>=0;p--)o[p]._path=null;t&&(c._curves=o.slice(1)),this._adjustCurves(w,w)}return this._changed(41),c},clear:"#removeSegments",hasHandles:function(){for(var s=this._segments,e=0,t=s.length;e<t;e++)if(s[e].hasHandles())return!0;return!1},clearHandles:function(){for(var s=this._segments,e=0,t=s.length;e<t;e++)s[e].clearHandles()},getLength:function(){if(this._length==null){for(var s=this.getCurves(),e=0,t=0,r=s.length;t<r;t++)e+=s[t].getLength();this._length=e}return this._length},getArea:function(){var s=this._area;if(s==null){var e=this._segments,t=this._closed;s=0;for(var r=0,o=e.length;r<o;r++){var l=r+1===o;s+=oe.getArea(oe.getValues(e[r],e[l?0:r+1],null,l&&!t))}this._area=s}return s},isFullySelected:function(){var s=this._segments.length;return this.isSelected()&&s>0&&this._segmentSelection===s*7},setFullySelected:function(s){s&&this._selectSegments(!0),this.setSelected(s)},setSelection:function s(e){e&1||this._selectSegments(!1),s.base.call(this,e)},_selectSegments:function(s){var e=this._segments,t=e.length,r=s?7:0;this._segmentSelection=r*t;for(var o=0;o<t;o++)e[o]._selection=r},_updateSelection:function(s,e,t){s._selection=t;var r=this._segmentSelection+=t-e;r>0&&this.setSelected(!0)},divideAt:function(s){var e=this.getLocationAt(s),t;return e&&(t=e.getCurve().divideAt(e.getCurveOffset()))?t._segment1:null},splitAt:function(s){var e=this.getLocationAt(s),t=e&&e.index,r=e&&e.time,o=1e-8,l=1-o;r>l&&(t++,r=0);var c=this.getCurves();if(t>=0&&t<c.length){r>=o&&c[t++].divideAtTime(r);var d=this.removeSegments(t,this._segments.length,!0),p;return this._closed?(this.setClosed(!1),p=this):(p=new Se(B.NO_INSERT),p.insertAbove(this),p.copyAttributes(this)),p._add(d,0),this.addSegment(d[0]),p}return null},split:function(s,e){var t,r=e===a?s:(t=this.getCurves()[s])&&t.getLocationAtTime(e);return r!=null?this.splitAt(r):null},join:function(s,e){var t=e||0;if(s&&s!==this){var r=s._segments,o=this.getLastSegment(),l=s.getLastSegment();if(!l)return this;o&&o._point.isClose(l._point,t)&&s.reverse();var c=s.getFirstSegment();if(o&&o._point.isClose(c._point,t))o.setHandleOut(c._handleOut),this._add(r.slice(1));else{var d=this.getFirstSegment();d&&d._point.isClose(c._point,t)&&s.reverse(),l=s.getLastSegment(),d&&d._point.isClose(l._point,t)?(d.setHandleIn(l._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}s._closed&&this._add([r[0]]),s.remove()}var p=this.getFirstSegment(),_=this.getLastSegment();return p!==_&&p._point.isClose(_._point,t)&&(p.setHandleIn(_._handleIn),_.remove(),this.setClosed(!0)),this},reduce:function(s){for(var e=this.getCurves(),t=s&&s.simplify,r=t?1e-7:0,o=e.length-1;o>=0;o--){var l=e[o];!l.hasHandles()&&(!l.hasLength(r)||t&&l.isCollinear(l.getNext()))&&l.remove()}return this},reverse:function(){this._segments.reverse();for(var s=0,e=this._segments.length;s<e;s++){var t=this._segments[s],r=t._handleIn;t._handleIn=t._handleOut,t._handleOut=r,t._index=s}this._curves=null,this._changed(9)},flatten:function(s){for(var e=new lt(this,s||.25,256,!0),t=e.parts,r=t.length,o=[],l=0;l<r;l++)o.push(new Ee(t[l].curve.slice(0,2)));!this._closed&&r>0&&o.push(new Ee(t[r-1].curve.slice(6))),this.setSegments(o)},simplify:function(s){var e=new ut(this).fit(s||2.5);return e&&this.setSegments(e),!!e},smooth:function(s){var e=this,t=s||{},r=t.type||"asymmetric",o=this._segments,l=o.length,c=this._closed;function d(Ce,Pe){var Me=Ce&&Ce.index;if(Me!=null){var Re=Ce.path;if(Re&&Re!==e)throw new Error(Ce._class+" "+Me+" of "+Re+" is not part of "+e);Pe&&Ce instanceof oe&&Me++}else Me=typeof Ce=="number"?Ce:Pe;return Math.min(Me<0&&c?Me%l:Me<0?Me+l:Me,l-1)}var p=c&&t.from===a&&t.to===a,_=d(t.from,0),m=d(t.to,l-1);if(_>m)if(c)_-=l;else{var w=_;_=m,m=w}if(/^(?:asymmetric|continuous)$/.test(r)){var y=r==="asymmetric",v=Math.min,C=m-_+1,P=C-1,I=p?v(C,4):1,k=I,b=I,x=[];if(c||(k=v(1,_),b=v(1,l-m-1)),P+=k+b,P<=1)return;for(var S=0,E=_-k;S<=P;S++,E++)x[S]=o[(E<0?E+l:E)%l]._point;for(var A=x[0]._x+2*x[1]._x,O=x[0]._y+2*x[1]._y,L=2,R=P-1,F=[A],U=[O],G=[L],V=[],j=[],S=1;S<P;S++){var Q=S<R,Z=Q||y?1:2,Y=Q?4:y?2:7,re=Q?4:y?3:8,le=Q?2:y?0:1,de=Z/L;L=G[S]=Y-de,A=F[S]=re*x[S]._x+le*x[S+1]._x-de*A,O=U[S]=re*x[S]._y+le*x[S+1]._y-de*O}V[R]=F[R]/G[R],j[R]=U[R]/G[R];for(var S=P-2;S>=0;S--)V[S]=(F[S]-V[S+1])/G[S],j[S]=(U[S]-j[S+1])/G[S];V[P]=(3*x[P]._x-V[R])/2,j[P]=(3*x[P]._y-j[R])/2;for(var S=k,ve=P-b,E=_;S<=ve;S++,E++){var we=o[E<0?E+l:E],he=we._point,fe=V[S]-he._x,xe=j[S]-he._y;(p||S<ve)&&we.setHandleOut(fe,xe),(p||S>k)&&we.setHandleIn(-fe,-xe)}}else for(var S=_;S<=m;S++)o[S<0?S+l:S].smooth(t,!p&&S===_,!p&&S===m)},toShape:function(s){if(!this._closed)return null;var e=this._segments,t,r,o,l;function c(y,v){var C=e[y],P=C.getNext(),I=e[v],k=I.getNext();return C._handleOut.isZero()&&P._handleIn.isZero()&&I._handleOut.isZero()&&k._handleIn.isZero()&&P._point.subtract(C._point).isCollinear(k._point.subtract(I._point))}function d(y){var v=e[y],C=v.getPrevious(),P=v.getNext();return C._handleOut.isZero()&&v._handleIn.isZero()&&v._handleOut.isZero()&&P._handleIn.isZero()&&v._point.subtract(C._point).isOrthogonal(P._point.subtract(v._point))}function p(y){var v=e[y],C=v.getNext(),P=v._handleOut,I=C._handleIn,k=.5522847498307936;if(P.isOrthogonal(I)){var b=v._point,x=C._point,S=new pe(b,P,!0).intersect(new pe(x,I,!0),!0);return S&&X.isZero(P.getLength()/S.subtract(b).getLength()-k)&&X.isZero(I.getLength()/S.subtract(x).getLength()-k)}return!1}function _(y,v){return e[y]._point.getDistance(e[v]._point)}if(!this.hasHandles()&&e.length===4&&c(0,2)&&c(1,3)&&d(1)?(t=Ve.Rectangle,r=new ee(_(0,3),_(0,1)),l=e[1]._point.add(e[2]._point).divide(2)):e.length===8&&p(0)&&p(2)&&p(4)&&p(6)&&c(1,5)&&c(3,7)?(t=Ve.Rectangle,r=new ee(_(1,6),_(0,3)),o=r.subtract(new ee(_(0,7),_(1,2))).divide(2),l=e[3]._point.add(e[4]._point).divide(2)):e.length===4&&p(0)&&p(1)&&p(2)&&p(3)&&(X.isZero(_(0,2)-_(1,3))?(t=Ve.Circle,o=_(0,2)/2):(t=Ve.Ellipse,o=new ee(_(2,0)/2,_(3,1)/2)),l=e[1]._point),t){var m=this.getPosition(!0),w=new t({center:m,size:r,radius:o,insert:!1});return w.copyAttributes(this,!0),w._matrix.prepend(this._matrix),w.rotate(l.subtract(m).getAngle()+90),(s===a||s)&&w.insertAbove(this),w}return null},toPath:"#clone",compare:function s(e){if(!e||e instanceof Be)return s.base.call(this,e);var t=this.getCurves(),r=e.getCurves(),o=t.length,l=r.length;if(!o||!l)return o==l;for(var c=t[0].getValues(),d=[],p=0,_,m=0,w,y=0;y<l;y++){var I=r[y].getValues();d.push(I);var v=oe.getOverlaps(c,I);if(v){_=!y&&v[0][0]>0?l-1:y,w=v[0][1];break}}for(var C=Math.abs,P=1e-8,I=d[_],k;c&&I;){var v=oe.getOverlaps(c,I);if(v){var b=v[0][0];if(C(b-m)<P){m=v[1][0],m===1&&(c=++p<o?t[p].getValues():null,m=0);var x=v[0][1];if(C(x-w)<P){if(k||(k=[_,x]),w=v[1][1],w===1&&(++_>=l&&(_=0),I=d[_]||r[_].getValues(),w=0),!c)return k[0]===_&&k[1]===w;continue}}}break}return!1},_hitTestSelf:function(s,e,t,r){var o=this,l=this.getStyle(),c=this._segments,d=c.length,p=this._closed,_=e._tolerancePadding,m=_,w,y,v,C,P,I,k=e.stroke&&l.hasStroke(),b=e.fill&&l.hasFill(),x=e.curves,S=k?l.getStrokeWidth()/2:b&&e.tolerance>0||x?0:null;S!==null&&(S>0?(w=l.getStrokeJoin(),y=l.getStrokeCap(),v=l.getMiterLimit(),m=m.add(Se._getStrokePadding(S,r))):w=y="round");function E(V,j){return s.subtract(V).divide(j).length<=1}function A(V,j,Q){if(!e.selected||j.isSelected()){var Z=V._point;if(j!==Z&&(j=j.add(Z)),E(j,m))return new st(Q,o,{segment:V,point:j})}}function O(V,j){return(j||e.segments)&&A(V,V._point,"segment")||!j&&e.handles&&(A(V,V._handleIn,"handle-in")||A(V,V._handleOut,"handle-out"))}function L(V){C.add(V)}function R(V){var j=p||V._index>0&&V._index<d-1;if((j?w:y)==="round")return E(V._point,m);if(C=new Se({internal:!0,closed:!0}),j?V.isSmooth()||Se._addBevelJoin(V,w,S,v,null,r,L,!0):y==="square"&&Se._addSquareCap(V,y,S,null,r,L,!0),!C.isEmpty()){var Q;return C.contains(s)||(Q=C.getNearestLocation(s))&&E(Q.getPoint(),_)}}if(e.ends&&!e.segments&&!p){if(I=O(c[0],!0)||O(c[d-1],!0))return I}else if(e.segments||e.handles){for(var F=0;F<d;F++)if(I=O(c[F]))return I}if(S!==null){if(P=this.getNearestLocation(s),P){var U=P.getTime();U===0||U===1&&d>1?R(P.getSegment())||(P=null):E(P.getPoint(),m)||(P=null)}if(!P&&w==="miter"&&d>1)for(var F=0;F<d;F++){var G=c[F];if(s.getDistance(G._point)<=v*S&&R(G)){P=G.getLocation();break}}}return!P&&b&&this._contains(s)||P&&!k&&!x?new st("fill",this):P?new st(k?"stroke":"curve",this,{location:P,point:P.getPoint()}):null}},h.each(oe._evaluateMethods,function(s){this[s+"At"]=function(e){var t=this.getLocationAt(e);return t&&t[s]()}},{beans:!1,getLocationOf:function(){for(var s=D.read(arguments),e=this.getCurves(),t=0,r=e.length;t<r;t++){var o=e[t].getLocationOf(s);if(o)return o}return null},getOffsetOf:function(){var s=this.getLocationOf.apply(this,arguments);return s?s.getOffset():null},getLocationAt:function(s){if(typeof s=="number"){for(var e=this.getCurves(),t=0,r=0,o=e.length;r<o;r++){var l=t,c=e[r];if(t+=c.getLength(),t>s)return c.getLocationAt(s-l)}if(e.length>0&&s<=this.getLength())return new ct(e[e.length-1],1)}else if(s&&s.getPath&&s.getPath()===this)return s;return null},getOffsetsWithTangent:function(){var s=D.read(arguments);if(s.isZero())return[];for(var e=[],t=0,r=this.getCurves(),o=0,l=r.length;o<l;o++){for(var c=r[o],d=c.getTimesWithTangent(s),p=0,_=d.length;p<_;p++){var m=t+c.getOffsetAtTime(d[p]);e.indexOf(m)<0&&e.push(m)}t+=c.length}return e}}),new function(){function s(t,r,o,l){if(l<=0)return;var c=l/2,d=l-2,p=c-1,_=new Array(6),m,w;function y(b){var x=_[b],S=_[b+1];(m!=x||w!=S)&&(t.beginPath(),t.moveTo(m,w),t.lineTo(x,S),t.stroke(),t.beginPath(),t.arc(x,S,c,0,Math.PI*2,!0),t.fill())}for(var v=0,C=r.length;v<C;v++){var P=r[v],I=P._selection;if(P._transformCoordinates(o,_),m=_[0],w=_[1],I&2&&y(2),I&4&&y(4),t.fillRect(m-c,w-c,l,l),d>0&&!(I&1)){var k=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(m-p,w-p,d,d),t.fillStyle=k}}}function e(t,r,o){var l=r._segments,c=l.length,d=new Array(6),p=!0,_,m,w,y,v,C,P,I;function k(x){if(o)x._transformCoordinates(o,d),_=d[0],m=d[1];else{var S=x._point;_=S._x,m=S._y}if(p)t.moveTo(_,m),p=!1;else{if(o)v=d[2],C=d[3];else{var E=x._handleIn;v=_+E._x,C=m+E._y}v===_&&C===m&&P===w&&I===y?t.lineTo(_,m):t.bezierCurveTo(P,I,v,C,_,m)}if(w=_,y=m,o)P=d[4],I=d[5];else{var E=x._handleOut;P=w+E._x,I=y+E._y}}for(var b=0;b<c;b++)k(l[b]);r._closed&&c>0&&k(l[0])}return{_draw:function(t,r,o,l){var c=r.dontStart,d=r.dontFinish||r.clip,p=this.getStyle(),_=p.hasFill(),m=p.hasStroke(),w=p.getDashArray(),y=!nt.support.nativeDash&&m&&w&&w.length;c||t.beginPath(),(_||m&&!y||d)&&(e(t,this,l),this._closed&&t.closePath());function v(x){return w[(x%y+y)%y]}if(!d&&(_||m)&&(this._setStyles(t,r,o),_&&(t.fill(p.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),m)){if(y){c||t.beginPath();for(var C=new lt(this,.25,32,!1,l),P=C.length,I=-p.getDashOffset(),k,b=0;I>0;)I-=v(b--)+v(b--);for(;I<P;)k=I+v(b++),(I>0||k>0)&&C.drawPart(t,Math.max(I,0),Math.max(k,0)),I=k+v(b++)}t.stroke()}},_drawSelected:function(t,r){t.beginPath(),e(t,this,r),t.stroke(),s(t,this._segments,r,nt.settings.handleSize)}}},new function(){function s(e){var t=e._segments;if(!t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){var e=this._segments;e.length===1&&this.removeSegment(0),e.length||this._add([new Ee(D.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Ee(D.read(arguments))])},cubicCurveTo:function(){var e=arguments,t=D.read(e),r=D.read(e),o=D.read(e),l=s(this);l.setHandleOut(t.subtract(l._point)),this._add([new Ee(o,r.subtract(o))])},quadraticCurveTo:function(){var e=arguments,t=D.read(e),r=D.read(e),o=s(this)._point;this.cubicCurveTo(t.add(o.subtract(t).multiply(1/3)),t.add(r.subtract(t).multiply(1/3)),r)},curveTo:function(){var e=arguments,t=D.read(e),r=D.read(e),o=h.pick(h.read(e),.5),l=1-o,c=s(this)._point,d=t.subtract(c.multiply(l*l)).subtract(r.multiply(o*o)).divide(2*o*l);if(d.isNaN())throw new Error("Cannot put a curve through points with parameter = "+o);this.quadraticCurveTo(d,r)},arcTo:function(){var e=arguments,t=Math.abs,r=Math.sqrt,o=s(this),l=o._point,c=D.read(e),d,p=h.peek(e),_=h.pick(p,!0),m,w,y,v;if(typeof _=="boolean")var C=l.add(c).divide(2),d=C.add(C.subtract(l).rotate(_?-90:90));else if(h.remain(e)<=2)d=c,c=D.read(e);else if(!l.equals(c)){var P=ee.read(e),I=X.isZero;if(I(P.width)||I(P.height))return this.lineTo(c);var k=h.read(e),_=!!h.read(e),b=!!h.read(e),C=l.add(c).divide(2),x=l.subtract(C).rotate(-k),S=x.x,E=x.y,A=t(P.width),O=t(P.height),L=A*A,R=O*O,F=S*S,U=E*E,G=r(F/L+U/R);if(G>1&&(A*=G,O*=G,L=A*A,R=O*O),G=(L*R-L*U-R*F)/(L*U+R*F),t(G)<1e-12&&(G=0),G<0)throw new Error("Cannot create an arc with the given arguments");m=new D(A*E/O,-O*S/A).multiply((b===_?-1:1)*r(G)).rotate(k).add(C),v=new te().translate(m).rotate(k).scale(A,O),y=v._inverseTransform(l),w=y.getDirectedAngle(v._inverseTransform(c)),!_&&w>0?w-=360:_&&w<0&&(w+=360)}if(d){var V=new pe(l.add(d).divide(2),d.subtract(l).rotate(90),!0),j=new pe(d.add(c).divide(2),c.subtract(d).rotate(90),!0),Q=new pe(l,c),Z=Q.getSide(d);if(m=V.intersect(j,!0),!m){if(!Z)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments")}y=l.subtract(m),w=y.getDirectedAngle(c.subtract(m));var Y=Q.getSide(m,!0);Y===0?w=Z*t(w):Z===Y&&(w+=w<0?360:-360)}if(w){for(var re=1e-5,le=t(w),de=le>=360?4:Math.ceil((le-re)/90),ve=w/de,we=ve*Math.PI/360,he=4/3*Math.sin(we)/(1+Math.cos(we)),fe=[],xe=0;xe<=de;xe++){var x=c,Ce=null;if(xe<de&&(Ce=y.rotate(90).multiply(he),v?(x=v._transformPoint(y),Ce=v._transformPoint(y.add(Ce)).subtract(x)):x=m.add(y)),!xe)o.setHandleOut(Ce);else{var Pe=y.rotate(-90).multiply(he);v&&(Pe=v._transformPoint(y.add(Pe)).subtract(x)),fe.push(new Ee(x,Pe,Ce))}y=y.rotate(ve)}this._add(fe)}},lineBy:function(){var e=D.read(arguments),t=s(this)._point;this.lineTo(t.add(e))},curveBy:function(){var e=arguments,t=D.read(e),r=D.read(e),o=h.read(e),l=s(this)._point;this.curveTo(l.add(t),l.add(r),o)},cubicCurveBy:function(){var e=arguments,t=D.read(e),r=D.read(e),o=D.read(e),l=s(this)._point;this.cubicCurveTo(l.add(t),l.add(r),l.add(o))},quadraticCurveBy:function(){var e=arguments,t=D.read(e),r=D.read(e),o=s(this)._point;this.quadraticCurveTo(o.add(t),o.add(r))},arcBy:function(){var e=arguments,t=s(this)._point,r=t.add(D.read(e)),o=h.pick(h.peek(e),!0);typeof o=="boolean"?this.arcTo(r,o):this.arcTo(r,t.add(D.read(e)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(s,e){var t=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return Se[t](this._segments,this._closed,this,s,e)},statics:{getBounds:function(s,e,t,r,o,l){var c=s[0];if(!c)return new $;var d=new Array(6),p=c._transformCoordinates(r,new Array(6)),_=p.slice(0,2),m=_.slice(),w=new Array(2);function y(P){P._transformCoordinates(r,d);for(var I=0;I<2;I++)oe._addBounds(p[I],p[I+4],d[I+2],d[I],I,l?l[I]:0,_,m,w);var k=p;p=d,d=k}for(var v=1,C=s.length;v<C;v++)y(s[v]);return e&&y(c),new $(_[0],_[1],m[0]-_[0],m[1]-_[1])},getStrokeBounds:function(s,e,t,r,o){var l=t.getStyle(),c=l.hasStroke(),d=l.getStrokeWidth(),p=c&&t._getStrokeMatrix(r,o),_=c&&Se._getStrokePadding(d,p),m=Se.getBounds(s,e,t,r,o,_);if(!c)return m;var w=d/2,y=l.getStrokeJoin(),v=l.getStrokeCap(),C=l.getMiterLimit(),P=new $(new ee(_));function I(A){m=m.include(A)}function k(A){m=m.unite(P.setCenter(A._point.transform(r)))}function b(A,O){O==="round"||A.isSmooth()?k(A):Se._addBevelJoin(A,O,w,C,r,p,I)}function x(A,O){O==="round"?k(A):Se._addSquareCap(A,O,w,r,p,I)}var S=s.length-(e?0:1);if(S>0){for(var E=1;E<S;E++)b(s[E],y);e?b(s[0],y):(x(s[0],v),x(s[s.length-1],v))}return m},_getStrokePadding:function(s,e){if(!e)return[s,s];var t=new D(s,0).transform(e),r=new D(0,s).transform(e),o=t.getAngleInRadians(),l=t.getLength(),c=r.getLength(),d=Math.sin(o),p=Math.cos(o),_=Math.tan(o),m=Math.atan2(c*_,l),w=Math.atan2(c,_*l);return[Math.abs(l*Math.cos(m)*p+c*Math.sin(m)*d),Math.abs(c*Math.sin(w)*p+l*Math.cos(w)*d)]},_addBevelJoin:function(s,e,t,r,o,l,c,d){var p=s.getCurve(),_=p.getPrevious(),m=p.getPoint1().transform(o),w=_.getNormalAtTime(1).multiply(t).transform(l),y=p.getNormalAtTime(0).multiply(t).transform(l),v=w.getDirectedAngle(y);if((v<0||v>=180)&&(w=w.negate(),y=y.negate()),d&&c(m),c(m.add(w)),e==="miter"){var C=new pe(m.add(w),new D(-w.y,w.x),!0).intersect(new pe(m.add(y),new D(-y.y,y.x),!0),!0);C&&m.getDistance(C)<=r*t&&c(C)}c(m.add(y))},_addSquareCap:function(s,e,t,r,o,l,c){var d=s._point.transform(r),p=s.getLocation(),_=p.getNormal().multiply(p.getTime()===0?t:-t).transform(o);e==="square"&&(c&&(l(d.subtract(_)),l(d.add(_))),d=d.add(_.rotate(-90))),l(d.add(_)),l(d.subtract(_))},getHandleBounds:function(s,e,t,r,o){var l=t.getStyle(),c=o.stroke&&l.hasStroke(),d,p;if(c){var _=t._getStrokeMatrix(r,o),m=l.getStrokeWidth()/2,w=m;l.getStrokeJoin()==="miter"&&(w=m*l.getMiterLimit()),l.getStrokeCap()==="square"&&(w=Math.max(w,m*Math.SQRT2)),d=Se._getStrokePadding(m,_),p=Se._getStrokePadding(w,_)}for(var y=new Array(6),v=1/0,C=-v,P=v,I=C,k=0,b=s.length;k<b;k++){var x=s[k];x._transformCoordinates(r,y);for(var S=0;S<6;S+=2){var E=S?d:p,A=E?E[0]:0,O=E?E[1]:0,L=y[S],R=y[S+1],F=L-A,U=L+A,G=R-O,V=R+O;F<v&&(v=F),U>C&&(C=U),G<P&&(P=G),V>I&&(I=V)}}return new $(v,P,C-v,I-P)}}});Se.inject({statics:new function(){var s=.5522847498307936,e=[new Ee([-1,0],[0,s],[0,-s]),new Ee([0,-1],[-s,0],[s,0]),new Ee([1,0],[0,-s],[0,s]),new Ee([0,1],[s,0],[-s,0])];function t(o,l,c){var d=h.getNamed(c),p=new Se(d&&(d.insert==!0?B.INSERT:d.insert==!1?B.NO_INSERT:null));return p._add(o),p._closed=l,p.set(d,B.INSERT)}function r(o,l,c){for(var d=new Array(4),p=0;p<4;p++){var _=e[p];d[p]=new Ee(_._point.multiply(l).add(o),_._handleIn.multiply(l),_._handleOut.multiply(l))}return t(d,!0,c)}return{Line:function(){var o=arguments;return t([new Ee(D.readNamed(o,"from")),new Ee(D.readNamed(o,"to"))],!1,o)},Circle:function(){var o=arguments,l=D.readNamed(o,"center"),c=h.readNamed(o,"radius");return r(l,new ee(c),o)},Rectangle:function(){var o=arguments,l=$.readNamed(o,"rectangle"),c=ee.readNamed(o,"radius",0,{readNull:!0}),d=l.getBottomLeft(!0),p=l.getTopLeft(!0),_=l.getTopRight(!0),m=l.getBottomRight(!0),w;if(!c||c.isZero())w=[new Ee(d),new Ee(p),new Ee(_),new Ee(m)];else{c=ee.min(c,l.getSize(!0).divide(2));var y=c.width,v=c.height,C=y*s,P=v*s;w=[new Ee(d.add(y,0),null,[-C,0]),new Ee(d.subtract(0,v),[0,P]),new Ee(p.add(0,v),null,[0,-P]),new Ee(p.add(y,0),[-C,0],null),new Ee(_.subtract(y,0),null,[C,0]),new Ee(_.add(0,v),[0,-P],null),new Ee(m.subtract(0,v),null,[0,P]),new Ee(m.subtract(y,0),[C,0])]}return t(w,!0,o)},RoundRectangle:"#Rectangle",Ellipse:function(){var o=arguments,l=Ve._readEllipse(o);return r(l.center,l.radius,o)},Oval:"#Ellipse",Arc:function(){var o=arguments,l=D.readNamed(o,"from"),c=D.readNamed(o,"through"),d=D.readNamed(o,"to"),p=h.getNamed(o),_=new Se(p&&p.insert==!1&&B.NO_INSERT);return _.moveTo(l),_.arcTo(c,d),_.set(p)},RegularPolygon:function(){for(var o=arguments,l=D.readNamed(o,"center"),c=h.readNamed(o,"sides"),d=h.readNamed(o,"radius"),p=360/c,_=c%3===0,m=new D(0,_?-d:d),w=_?-1:.5,y=new Array(c),v=0;v<c;v++)y[v]=new Ee(l.add(m.rotate((v+w)*p)));return t(y,!0,o)},Star:function(){for(var o=arguments,l=D.readNamed(o,"center"),c=h.readNamed(o,"points")*2,d=h.readNamed(o,"radius1"),p=h.readNamed(o,"radius2"),_=360/c,m=new D(0,-1),w=new Array(c),y=0;y<c;y++)w[y]=new Ee(l.add(m.rotate(_*y).multiply(y%2?p:d)));return t(w,!0,o)}}}});var Be=Oe.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||(typeof e=="string"?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function s(e,t){var r=t,o=r[0];o&&typeof o[0]=="number"&&(r=[r]);for(var l=t.length-1;l>=0;l--){var c=r[l];r===t&&!(c instanceof Se)&&(r=h.slice(r)),Array.isArray(c)?r[l]=new Se({segments:c,insert:!1}):c instanceof Be&&(r.splice.apply(r,[l,1].concat(c.removeChildren())),c.remove())}return s.base.call(this,e,r)},reduce:function s(e){for(var t=this._children,r=t.length-1;r>=0;r--){var o=t[r].reduce(e);o.isEmpty()&&o.remove()}if(!t.length){var o=new Se(B.NO_INSERT);return o.copyAttributes(this),o.insertAbove(this),this.remove(),o}return s.base.call(this)},isClosed:function(){for(var s=this._children,e=0,t=s.length;e<t;e++)if(!s[e]._closed)return!1;return!0},setClosed:function(s){for(var e=this._children,t=0,r=e.length;t<r;t++)e[t].setClosed(s)},getFirstSegment:function(){var s=this.getFirstChild();return s&&s.getFirstSegment()},getLastSegment:function(){var s=this.getLastChild();return s&&s.getLastSegment()},getCurves:function(){for(var s=this._children,e=[],t=0,r=s.length;t<r;t++)h.push(e,s[t].getCurves());return e},getFirstCurve:function(){var s=this.getFirstChild();return s&&s.getFirstCurve()},getLastCurve:function(){var s=this.getLastChild();return s&&s.getLastCurve()},getArea:function(){for(var s=this._children,e=0,t=0,r=s.length;t<r;t++)e+=s[t].getArea();return e},getLength:function(){for(var s=this._children,e=0,t=0,r=s.length;t<r;t++)e+=s[t].getLength();return e},getPathData:function(s,e){for(var t=this._children,r=[],o=0,l=t.length;o<l;o++){var c=t[o],d=c._matrix;r.push(c.getPathData(s&&!d.isIdentity()?s.appended(d):s,e))}return r.join("")},_hitTestChildren:function s(e,t,r){return s.base.call(this,e,t.class===Se||t.type==="path"?t:h.set({},t,{fill:!1}),r)},_draw:function(s,e,t,r){var o=this._children;if(o.length){e=e.extend({dontStart:!0,dontFinish:!0}),s.beginPath();for(var l=0,c=o.length;l<c;l++)o[l].draw(s,e,r);if(!e.clip){this._setStyles(s,e,t);var d=this._style;d.hasFill()&&(s.fill(d.getFillRule()),s.shadowColor="rgba(0,0,0,0)"),d.hasStroke()&&s.stroke()}}},_drawSelected:function(s,e,t){for(var r=this._children,o=0,l=r.length;o<l;o++){var c=r[o],d=c._matrix;t[c._id]||c._drawSelected(s,d.isIdentity()?e:e.appended(d))}}},new function(){function s(e,t){var r=e._children;if(t&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return h.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var t=s(this,!0);t[e].apply(t,arguments)}},{moveTo:function(){var e=s(this),t=e&&e.isEmpty()?e:new Se(B.NO_INSERT);t!==e&&this.addChild(t),t.moveTo.apply(t,arguments)},moveBy:function(){var e=s(this,!0),t=e&&e.getLastSegment(),r=D.read(arguments);this.moveTo(t?r.add(t._point):r)},closePath:function(e){s(this,!0).closePath(e)}})},h.each(["reverse","flatten","simplify","smooth"],function(s){this[s]=function(e){for(var t=this._children,r,o=0,l=t.length;o<l;o++)r=t[o][s](e)||r;return r}},{}));Oe.inject(new function(){var s=Math.min,e=Math.max,t=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function o(k){return k._children||[k]}function l(k,b){var x=k.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(b){for(var S=o(x),E=0,A=S.length;E<A;E++){var k=S[E];!k._closed&&!k.isEmpty()&&(k.closePath(1e-12),k.getFirstSegment().setHandleIn(0,0),k.getLastSegment().setHandleOut(0,0))}x=x.resolveCrossings().reorient(x.getFillRule()==="nonzero",!0)}return x}function c(k,b,x,S,E){var A=new Be(B.NO_INSERT);return A.addChildren(k,!0),A=A.reduce({simplify:b}),E&&E.insert==!1||A.insertAbove(S&&x.isSibling(S)&&x.getIndex()<S.getIndex()?S:x),A.copyAttributes(x,!0),A}function d(k){return k.hasOverlap()||k.isCrossing()}function p(k,b,x,S){if(S&&(S.trace==!1||S.stroke)&&/^(subtract|intersect)$/.test(x))return _(k,b,x);var E=l(k,!0),A=b&&k!==b&&l(b,!0),O=r[x];O[x]=!0,A&&(O.subtract||O.exclude)^(A.isClockwise()^E.isClockwise())&&A.reverse();var L=v(ct.expand(E.getIntersections(A,d))),R=o(E),F=A&&o(A),U=[],G=[],V;function j(Ce){for(var Pe=0,Me=Ce.length;Pe<Me;Pe++){var Re=Ce[Pe];h.push(U,Re._segments),h.push(G,Re.getCurves()),Re._overlapsOnly=!0}}function Q(Ce){for(var Pe=[],Me=0,Re=Ce&&Ce.length;Me<Re;Me++)Pe.push(G[Ce[Me]]);return Pe}if(L.length){j(R),F&&j(F);for(var Z=new Array(G.length),Y=0,re=G.length;Y<re;Y++)Z[Y]=G[Y].getValues();for(var le=W.findCurveBoundsCollisions(Z,Z,0,!0),de={},Y=0;Y<G.length;Y++){var ve=G[Y],we=ve._path._id,he=de[we]=de[we]||{};he[ve.getIndex()]={hor:Q(le[Y].hor),ver:Q(le[Y].ver)}}for(var Y=0,re=L.length;Y<re;Y++)P(L[Y]._segment,E,A,de,O);for(var Y=0,re=U.length;Y<re;Y++){var fe=U[Y],xe=fe._intersection;fe._winding||P(fe,E,A,de,O),xe&&xe._overlap||(fe._path._overlapsOnly=!1)}V=I(U,O)}else V=y(F?R.concat(F):R.slice(),function(Ce){return!!O[Ce]});return c(V,!0,k,b,S)}function _(k,b,x){var S=l(k),E=l(b),A=S.getIntersections(E,d),O=x==="subtract",L=x==="divide",R={},F=[];function U(j){if(!R[j._id]&&(L||E.contains(j.getPointAt(j.getLength()/2))^O))return F.unshift(j),R[j._id]=!0}for(var G=A.length-1;G>=0;G--){var V=A[G].split();V&&(U(V)&&V.getFirstSegment().setHandleIn(0,0),S.getLastSegment().setHandleOut(0,0))}return U(S),c(F,!1,k,b)}function m(k,b){for(var x=k;x;){if(x===b)return;x=x._previous}for(;k._next&&k._next!==b;)k=k._next;if(!k._next){for(;b._previous;)b=b._previous;k._next=b,b._previous=k}}function w(k){for(var b=k.length-1;b>=0;b--)k[b].clearHandles()}function y(k,b,x){var S=k&&k.length;if(S){var E=h.each(k,function(le,de){this[le._id]={container:null,winding:le.isClockwise()?1:-1,index:de}},{}),A=k.slice().sort(function(le,de){return t(de.getArea())-t(le.getArea())}),O=A[0],L=W.findItemBoundsCollisions(A,null,X.GEOMETRIC_EPSILON);x==null&&(x=O.isClockwise());for(var R=0;R<S;R++){var F=A[R],U=E[F._id],G=0,V=L[R];if(V){for(var j=null,Q=V.length-1;Q>=0;Q--)if(V[Q]<R){j=j||F.getInteriorPoint();var Z=A[V[Q]];if(Z.contains(j)){var Y=E[Z._id];G=Y.winding,U.winding+=G,U.container=Y.exclude?Y.container:Z;break}}}if(b(U.winding)===b(G))U.exclude=!0,k[U.index]=null;else{var re=U.container;F.setClockwise(re?!re.isClockwise():x)}}}return k}function v(k,b,x){var S=b&&[],E=1e-8,A=1-E,O=!1,L=x||[],R=x&&{},F,U,G;function V(Pe){return Pe._path._id+"."+Pe._segment1._index}for(var j=(x&&x.length)-1;j>=0;j--){var Q=x[j];Q._path&&(R[V(Q)]=!0)}for(var j=k.length-1;j>=0;j--){var Z=k[j],Y=Z._time,re=Y,le=b&&!b(Z),Q=Z._curve,de;if(Q&&(Q!==U?(O=!Q.hasHandles()||R&&R[V(Q)],F=[],G=null,U=Q):G>=E&&(Y/=G)),le){F&&F.push(Z);continue}else b&&S.unshift(Z);if(G=re,Y<E)de=Q._segment1;else if(Y>A)de=Q._segment2;else{var ve=Q.divideAtTime(Y,!0);O&&L.push(Q,ve),de=ve._segment1;for(var we=F.length-1;we>=0;we--){var he=F[we];he._time=(he._time-Y)/(1-Y)}}Z._setSegment(de);var fe=de._intersection,xe=Z._intersection;if(fe){m(fe,xe);for(var Ce=fe;Ce;)m(Ce._intersection,fe),Ce=Ce._next}else de._intersection=xe}return x||w(L),S||k}function C(k,b,x,S,E){var A=Array.isArray(b)?b:b[x?"hor":"ver"],O=x?1:0,L=O^1,R=[k.x,k.y],F=R[O],U=R[L],G=1e-9,V=1e-6,j=F-G,Q=F+G,Z=0,Y=0,re=0,le=0,de=!1,ve=!1,we=1,he=[],fe,xe;function Ce(Ke){var Qe=Ke[L+0],gt=Ke[L+6];if(!(U<s(Qe,gt)||U>e(Qe,gt))){var _t=Ke[O+0],St=Ke[O+2],Qt=Ke[O+4],At=Ke[O+6];if(Qe===gt){(_t<Q&&At>j||At<Q&&_t>j)&&(de=!0);return}var yt=U===Qe?0:U===gt||j>e(_t,St,Qt,At)||Q<s(_t,St,Qt,At)?1:oe.solveCubic(Ke,L,U,he,0,1)>0?he[0]:1,Ot=yt===0?_t:yt===1?At:oe.getPoint(Ke,yt)[x?"y":"x"],Nt=Qe>gt?1:-1,Xt=fe[L]>fe[L+6]?1:-1,ii=fe[O+6];return U!==Qe?(Ot<j?re+=Nt:Ot>Q?le+=Nt:de=!0,Ot>F-V&&Ot<F+V&&(we/=2)):(Nt!==Xt?_t<j?re+=Nt:_t>Q&&(le+=Nt):_t!=ii&&(ii<Q&&Ot>Q?(le+=Nt,de=!0):ii>j&&Ot<j&&(re+=Nt,de=!0)),we/=4),fe=Ke,!E&&Ot>j&&Ot<Q&&oe.getTangent(Ke,yt)[x?"x":"y"]===0&&C(k,b,!x,S,!0)}}function Pe(Ke){var Qe=Ke[L+0],gt=Ke[L+2],_t=Ke[L+4],St=Ke[L+6];if(U<=e(Qe,gt,_t,St)&&U>=s(Qe,gt,_t,St)){for(var Qt=Ke[O+0],At=Ke[O+2],yt=Ke[O+4],Ot=Ke[O+6],Nt=j>e(Qt,At,yt,Ot)||Q<s(Qt,At,yt,Ot)?[Ke]:oe.getMonoCurves(Ke,x),Xt,ii=0,mi=Nt.length;ii<mi;ii++)if(Xt=Ce(Nt[ii]))return Xt}}for(var Me=0,Re=A.length;Me<Re;Me++){var ze=A[Me],De=ze._path,Ue=ze.getValues(),ft;if((!Me||A[Me-1]._path!==De)&&(fe=null,De._closed||(xe=oe.getValues(De.getLastCurve().getSegment2(),ze.getSegment1(),null,!S),xe[L]!==xe[L+6]&&(fe=xe)),!fe)){fe=Ue;for(var Ie=De.getLastCurve();Ie&&Ie!==ze;){var Je=Ie.getValues();if(Je[L]!==Je[L+6]){fe=Je;break}Ie=Ie.getPrevious()}}if(ft=Pe(Ue))return ft;if(Me+1===Re||A[Me+1]._path!==De){if(xe&&(ft=Pe(xe)))return ft;de&&!re&&!le&&(re=le=De.isClockwise(S)^x?1:-1),Z+=re,Y+=le,re=le=0,de&&(ve=!0,de=!1),xe=null}}return Z=t(Z),Y=t(Y),{winding:e(Z,Y),windingL:Z,windingR:Y,quality:we,onPath:ve}}function P(k,b,x,S,E){var A=[],O=k,L=0,G;do{var R=k.getCurve();if(R){var F=R.getLength();A.push({segment:k,curve:R,length:F}),L+=F}k=k.getNext()}while(k&&!k._intersection&&k!==O);for(var U=[.5,.25,.75],G={winding:0,quality:-1},V=.001,j=1-V,Q=0;Q<U.length&&G.quality<.5;Q++)for(var F=L*U[Q],Z=0,Y=A.length;Z<Y;Z++){var re=A[Z],le=re.length;if(F<=le){var R=re.curve,de=R._path,ve=de._parent,we=ve instanceof Be?ve:de,he=X.clamp(R.getTimeAt(F),V,j),fe=R.getPointAtTime(he),xe=t(R.getTangentAtTime(he).y)<Math.SQRT1_2,Ce=null;if(E.subtract&&x){var Pe=we===b?x:b,Me=Pe._getWinding(fe,xe,!0);if(we===b&&Me.winding||we===x&&!Me.winding){if(Me.quality<1)continue;Ce={winding:0,quality:1}}}Ce=Ce||C(fe,S[de._id][R.getIndex()],xe,!0),Ce.quality>G.quality&&(G=Ce);break}F-=le}for(var Z=A.length-1;Z>=0;Z--)A[Z].segment._winding=G}function I(k,b){var x=[],S;function E(Re){var ze;return!!(Re&&!Re._visited&&(!b||b[(ze=Re._winding||{}).winding]&&!(b.unite&&ze.winding===2&&ze.windingL&&ze.windingR)))}function A(Re){if(Re){for(var ze=0,De=S.length;ze<De;ze++)if(Re===S[ze])return!0}return!1}function O(Re){for(var ze=Re._segments,De=0,Ue=ze.length;De<Ue;De++)ze[De]._visited=!0}function L(Re,ze){var De=Re._intersection,Ue=De,ft=[];ze&&(S=[Re]);function Ie(Je,Ke){for(;Je&&Je!==Ke;){var Qe=Je._segment,gt=Qe&&Qe._path;if(gt){var _t=Qe.getNext()||gt.getFirstSegment(),St=_t._intersection;Qe!==Re&&(A(Qe)||A(_t)||_t&&E(Qe)&&(E(_t)||St&&E(St._segment)))&&ft.push(Qe),ze&&S.push(Qe)}Je=Je._next}}if(De){for(Ie(De);De&&De._previous;)De=De._previous;Ie(De,Ue)}return ft}k.sort(function(Re,ze){var De=Re._intersection,Ue=ze._intersection,ft=!!(De&&De._overlap),Ie=!!(Ue&&Ue._overlap),Je=Re._path,Ke=ze._path;return ft^Ie?ft?1:-1:!De^!Ue?De?1:-1:Je!==Ke?Je._id-Ke._id:Re._index-ze._index});for(var R=0,F=k.length;R<F;R++){var U=k[R],G=E(U),V=null,j=!1,Q=!0,Z=[],Y,re,le;if(G&&U._path._overlapsOnly){var de=U._path,ve=U._intersection._segment._path;de.compare(ve)&&(de.getArea()&&x.push(de.clone(!1)),O(de),O(ve),G=!1)}for(;G;){var we=!V,he=L(U,we),fe=he.shift(),j=!we&&(A(U)||A(fe)),xe=!j&&fe;if(we&&(V=new Se(B.NO_INSERT),Y=null),j){(U.isFirst()||U.isLast())&&(Q=U._path._closed),U._visited=!0;break}if(xe&&Y&&(Z.push(Y),Y=null),Y||(xe&&he.push(U),Y={start:V._segments.length,crossings:he,visited:re=[],handleIn:le}),xe&&(U=fe),!E(U)){V.removeSegments(Y.start);for(var Ce=0,Pe=re.length;Ce<Pe;Ce++)re[Ce]._visited=!1;re.length=0;do U=Y&&Y.crossings.shift(),(!U||!U._path)&&(U=null,Y=Z.pop(),Y&&(re=Y.visited,le=Y.handleIn));while(Y&&!E(U));if(!U)break}var Me=U.getNext();V.add(new Ee(U._point,le,Me&&U._handleOut)),U._visited=!0,re.push(U),U=Me||U._path.getFirstSegment(),le=Me&&Me._handleIn}j&&(Q&&(V.getFirstSegment().setHandleIn(le),V.setClosed(Q)),V.getArea()!==0&&x.push(V))}return x}return{_getWinding:function(k,b,x){return C(k,this.getCurves(),b,x)},unite:function(k,b){return p(this,k,"unite",b)},intersect:function(k,b){return p(this,k,"intersect",b)},subtract:function(k,b){return p(this,k,"subtract",b)},exclude:function(k,b){return p(this,k,"exclude",b)},divide:function(k,b){return b&&(b.trace==!1||b.stroke)?_(this,k,"divide"):c([this.subtract(k,b),this.intersect(k,b)],!0,this,k,b)},resolveCrossings:function(){var k=this._children,b=k||[this];function x(Y,re){var le=Y&&Y._intersection;return le&&le._overlap&&le._path===re}var S=!1,E=!1,A=this.getIntersections(null,function(Y){return Y.hasOverlap()&&(S=!0)||Y.isCrossing()&&(E=!0)}),O=S&&E&&[];if(A=ct.expand(A),S)for(var L=v(A,function(Y){return Y.hasOverlap()},O),R=L.length-1;R>=0;R--){var F=L[R],U=F._path,G=F._segment,V=G.getPrevious(),j=G.getNext();x(V,U)&&x(j,U)&&(G.remove(),V._handleOut._set(0,0),j._handleIn._set(0,0),V!==G&&!V.getCurve().hasLength()&&(j._handleIn.set(V._handleIn),V.remove()))}E&&(v(A,S&&function(Y){var re=Y.getCurve(),le=Y.getSegment(),de=Y._intersection,ve=de._curve,we=de._segment;if(re&&ve&&re._path&&ve._path)return!0;le&&(le._intersection=null),we&&(we._intersection=null)},O),O&&w(O),b=I(h.each(b,function(Y){h.push(this,Y._segments)},[])));var Q=b.length,Z;return Q>1&&k?(b!==k&&this.setChildren(b),Z=this):Q===1&&!k&&(b[0]!==this&&this.setSegments(b[0].removeSegments()),Z=this),Z||(Z=new Be(B.NO_INSERT),Z.addChildren(b),Z=Z.reduce(),Z.copyAttributes(this),this.replaceWith(Z)),Z},reorient:function(k,b){var x=this._children;return x&&x.length?this.setChildren(y(this.removeChildren(),function(S){return!!(k?S:S&1)},b)):b!==a&&this.setClockwise(b),this},getInteriorPoint:function(){var k=this.getBounds(),b=k.getCenter(!0);if(!this.contains(b)){for(var x=this.getCurves(),S=b.y,E=[],A=[],O=0,L=x.length;O<L;O++){var R=x[O].getValues(),F=R[1],U=R[3],G=R[5],V=R[7];if(S>=s(F,U,G,V)&&S<=e(F,U,G,V))for(var j=oe.getMonoCurves(R),Q=0,Z=j.length;Q<Z;Q++){var Y=j[Q],re=Y[1],le=Y[7];if(re!==le&&(S>=re&&S<=le||S>=le&&S<=re)){var de=S===re?Y[0]:S===le?Y[6]:oe.solveCubic(Y,1,S,A,0,1)===1?oe.getPoint(Y,A[0]).x:(Y[0]+Y[6])/2;E.push(de)}}}E.length>1&&(E.sort(function(ve,we){return ve-we}),b.x=(E[0]+E[1])/2)}return b}}});var lt=h.extend({_class:"PathFlattener",initialize:function(s,e,t,r,o){var l=[],c=[],d=0,p=1/(t||32),_=s._segments,m=_[0],w;function y(I,k){var b=oe.getValues(I,k,o);l.push(b),v(b,I._index,0,1)}function v(I,k,b,x){if(x-b>p&&!(r&&oe.isStraight(I))&&!oe.isFlatEnough(I,e||.25)){var S=oe.subdivide(I,.5),E=(b+x)/2;v(S[0],k,b,E),v(S[1],k,E,x)}else{var A=I[6]-I[0],O=I[7]-I[1],L=Math.sqrt(A*A+O*O);L>0&&(d+=L,c.push({offset:d,curve:I,index:k,time:x}))}}for(var C=1,P=_.length;C<P;C++)w=_[C],y(m,w),m=w;s._closed&&y(w||m,_[0]),this.curves=l,this.parts=c,this.length=d,this.index=0},_get:function(s){for(var e=this.parts,t=e.length,r,o=this.index;r=o,!(!o||e[--o].offset<s););for(;r<t;r++){var l=e[r];if(l.offset>=s){this.index=r;var c=e[r-1],d=c&&c.index===l.index?c.time:0,p=c?c.offset:0;return{index:l.index,time:d+(l.time-d)*(s-p)/(l.offset-p)}}}return{index:e[t-1].index,time:1}},drawPart:function(s,e,t){for(var r=this._get(e),o=this._get(t),l=r.index,c=o.index;l<=c;l++){var d=oe.getPart(this.curves[l],l===r.index?r.time:0,l===o.index?o.time:1);l===r.index&&s.moveTo(d[0],d[1]),s.bezierCurveTo.apply(s,d.slice(2))}}},h.each(oe._evaluateMethods,function(s){this[s+"At"]=function(e){var t=this._get(e);return oe[s](this.curves[t.index],t.time)}},{})),ut=h.extend({initialize:function(s){for(var e=this.points=[],t=s._segments,r=s._closed,o=0,l,c=t.length;o<c;o++){var d=t[o].point;(!l||!l.equals(d))&&e.push(l=d.clone())}r&&(e.unshift(e[e.length-1]),e.push(e[1])),this.closed=r},fit:function(s){var e=this.points,t=e.length,r=null;return t>0&&(r=[new Ee(e[0])],t>1&&(this.fitCubic(r,s,0,t-1,e[1].subtract(e[0]),e[t-2].subtract(e[t-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(s,e,t,r,o,l){var c=this.points;if(r-t===1){var d=c[t],p=c[r],_=d.getDistance(p)/3;this.addCurve(s,[d,d.add(o.normalize(_)),p.add(l.normalize(_)),p]);return}for(var m=this.chordLengthParameterize(t,r),w=Math.max(e,e*e),y,v=!0,C=0;C<=4;C++){var P=this.generateBezier(t,r,m,o,l),I=this.findMaxError(t,r,P,m);if(I.error<e&&v){this.addCurve(s,P);return}if(y=I.index,I.error>=w)break;v=this.reparameterize(t,r,m,P),w=I.error}var k=c[y-1].subtract(c[y+1]);this.fitCubic(s,e,t,y,o,k),this.fitCubic(s,e,y,r,k.negate(),l)},addCurve:function(s,e){var t=s[s.length-1];t.setHandleOut(e[1].subtract(e[0])),s.push(new Ee(e[3],e[2].subtract(e[3])))},generateBezier:function(s,e,t,r,o){for(var l=1e-12,c=Math.abs,d=this.points,p=d[s],_=d[e],m=[[0,0],[0,0]],w=[0,0],y=0,v=e-s+1;y<v;y++){var C=t[y],P=1-C,I=3*C*P,k=P*P*P,b=I*P,x=I*C,S=C*C*C,E=r.normalize(b),A=o.normalize(x),O=d[s+y].subtract(p.multiply(k+b)).subtract(_.multiply(x+S));m[0][0]+=E.dot(E),m[0][1]+=E.dot(A),m[1][0]=m[0][1],m[1][1]+=A.dot(A),w[0]+=E.dot(O),w[1]+=A.dot(O)}var L=m[0][0]*m[1][1]-m[1][0]*m[0][1],R,F;if(c(L)>l){var U=m[0][0]*w[1]-m[1][0]*w[0],G=w[0]*m[1][1]-w[1]*m[0][1];R=G/L,F=U/L}else{var V=m[0][0]+m[0][1],j=m[1][0]+m[1][1];R=F=c(V)>l?w[0]/V:c(j)>l?w[1]/j:0}var Q=_.getDistance(p),Z=l*Q,Y,re;if(R<Z||F<Z)R=F=Q/3;else{var le=_.subtract(p);Y=r.normalize(R),re=o.normalize(F),Y.dot(le)-re.dot(le)>Q*Q&&(R=F=Q/3,Y=re=null)}return[p,p.add(Y||r.normalize(R)),_.add(re||o.normalize(F)),_]},reparameterize:function(s,e,t,r){for(var o=s;o<=e;o++)t[o-s]=this.findRoot(r,this.points[o],t[o-s]);for(var o=1,l=t.length;o<l;o++)if(t[o]<=t[o-1])return!1;return!0},findRoot:function(s,e,t){for(var r=[],o=[],l=0;l<=2;l++)r[l]=s[l+1].subtract(s[l]).multiply(3);for(var l=0;l<=1;l++)o[l]=r[l+1].subtract(r[l]).multiply(2);var c=this.evaluate(3,s,t),d=this.evaluate(2,r,t),p=this.evaluate(1,o,t),_=c.subtract(e),m=d.dot(d)+_.dot(p);return X.isMachineZero(m)?t:t-_.dot(d)/m},evaluate:function(s,e,t){for(var r=e.slice(),o=1;o<=s;o++)for(var l=0;l<=s-o;l++)r[l]=r[l].multiply(1-t).add(r[l+1].multiply(t));return r[0]},chordLengthParameterize:function(s,e){for(var t=[0],r=s+1;r<=e;r++)t[r-s]=t[r-s-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,o=e-s;r<=o;r++)t[r]/=t[o];return t},findMaxError:function(s,e,t,r){for(var o=Math.floor((e-s+1)/2),l=0,c=s+1;c<e;c++){var d=this.evaluate(3,t,r[c-s]),p=d.subtract(this.points[c]),_=p.x*p.x+p.y*p.y;_>=l&&(l=_,o=c)}return{error:l,index:o}}}),zt=B.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var t=e&&h.isPlainObject(e)&&e.x===a&&e.y===a;this._initialize(t&&e,!t&&D.read(arguments))},_equals:function(s){return this._content===s._content},copyContent:function(s){this.setContent(s._content)},getContent:function(){return this._content},setContent:function(s){this._content=""+s,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Kt=zt.extend({_class:"PointText",initialize:function(){zt.apply(this,arguments)},getPoint:function(){var s=this._matrix.getTranslation();return new ue(s.x,s.y,this,"setPoint")},setPoint:function(){var s=D.read(arguments);this.translate(s.subtract(this._matrix.getTranslation()))},_draw:function(s,e,t){if(this._content){this._setStyles(s,e,t);var r=this._lines,o=this._style,l=o.hasFill(),c=o.hasStroke(),d=o.getLeading(),p=s.shadowColor;s.font=o.getFontStyle(),s.textAlign=o.getJustification();for(var _=0,m=r.length;_<m;_++){s.shadowColor=p;var w=r[_];l&&(s.fillText(w,0,0),s.shadowColor="rgba(0,0,0,0)"),c&&s.strokeText(w,0,0),s.translate(0,d)}}},_getBounds:function(s,e){var t=this._style,r=this._lines,o=r.length,l=t.getJustification(),c=t.getLeading(),d=this.getView().getTextWidth(t.getFontStyle(),r),p=0;l!=="left"&&(p-=d/(l==="center"?2:1));var _=new $(p,o?-.75*c:0,d,o*c);return s?s._transformBounds(_,_):_}}),We=h.extend(new function(){var s={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},e={},t={transparent:[0,0,0,0]},r;function o(d){var p=d.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||d.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),_="rgb",m;if(p){var w=p[4]?4:3;m=new Array(w);for(var y=0;y<w;y++){var v=p[y+1];m[y]=parseInt(v.length==1?v+v:v,16)/255}}else if(p=d.match(/^(rgb|hsl)a?\((.*)\)$/)){_=p[1],m=p[2].trim().split(/[,\s]+/g);for(var C=_==="hsl",y=0,P=Math.min(m.length,4);y<P;y++){var I=m[y],v=parseFloat(I);if(C)if(y===0){var k=I.match(/([a-z]*)$/)[1];v*={turn:360,rad:180/Math.PI,grad:.9}[k]||1}else y<3&&(v/=100);else y<3&&(v/=/%$/.test(I)?100:255);m[y]=v}}else{var b=t[d];if(!b)if(u){r||(r=Tt.getContext(1,1,{willReadFrequently:!0}),r.globalCompositeOperation="copy"),r.fillStyle="rgba(0,0,0,0)",r.fillStyle=d,r.fillRect(0,0,1,1);var x=r.getImageData(0,0,1,1).data;b=t[d]=[x[0]/255,x[1]/255,x[2]/255]}else b=[0,0,0];m=b.slice()}return[_,m]}var l=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],c={"rgb-hsb":function(d,p,_){var m=Math.max(d,p,_),w=Math.min(d,p,_),y=m-w,v=y===0?0:(m==d?(p-_)/y+(p<_?6:0):m==p?(_-d)/y+2:(d-p)/y+4)*60;return[v,m===0?0:y/m,m]},"hsb-rgb":function(d,p,_){d=(d/60%6+6)%6;var w=Math.floor(d),m=d-w,w=l[w],y=[_,_*(1-p),_*(1-p*m),_*(1-p*(1-m))];return[y[w[0]],y[w[1]],y[w[2]]]},"rgb-hsl":function(d,p,_){var m=Math.max(d,p,_),w=Math.min(d,p,_),y=m-w,v=y===0,C=v?0:(m==d?(p-_)/y+(p<_?6:0):m==p?(_-d)/y+2:(d-p)/y+4)*60,P=(m+w)/2,I=v?0:P<.5?y/(m+w):y/(2-m-w);return[C,I,P]},"hsl-rgb":function(d,p,_){if(d=(d/360%1+1)%1,p===0)return[_,_,_];for(var m=[d+1/3,d,d-1/3],w=_<.5?_*(1+p):_+p-_*p,y=2*_-w,v=[],C=0;C<3;C++){var P=m[C];P<0&&(P+=1),P>1&&(P-=1),v[C]=6*P<1?y+(w-y)*6*P:2*P<1?w:3*P<2?y+(w-y)*(2/3-P)*6:y}return v},"rgb-gray":function(d,p,_){return[d*.2989+p*.587+_*.114]},"gray-rgb":function(d){return[d,d,d]},"gray-hsb":function(d){return[0,0,d]},"gray-hsl":function(d){return[0,0,d]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return h.each(s,function(d,p){e[p]=[],h.each(d,function(_,m){var w=h.capitalize(_),y=/^(hue|saturation)$/.test(_),v=e[p][m]=p==="gradient"?_==="gradient"?function(C){var P=this._components[0];return C=Wt.read(Array.isArray(C)?C:arguments,0,{readNull:!0}),P!==C&&(P&&P._removeOwner(this),C&&C._addOwner(this)),C}:function(){return D.read(arguments,0,{readNull:_==="highlight",clone:!0})}:function(C){return C==null||isNaN(C)?0:+C};this["get"+w]=function(){return this._type===p||y&&/^hs[bl]$/.test(this._type)?this._components[m]:this._convert(p)[m]},this["set"+w]=function(C){this._type!==p&&!(y&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(p),this._properties=s[p],this._type=p),this._components[m]=v.call(this,C),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function d(p){var _=arguments,m=this.__read,w=0,y,v,C,P;Array.isArray(p)&&(_=p,p=_[0]);var I=p!=null&&typeof p;if(I==="string"&&p in s&&(y=p,p=_[1],Array.isArray(p)?(v=p,C=_[2]):(m&&(w=1),_=h.slice(_,1),I=typeof p)),!v){if(P=I==="number"?_:I==="object"&&p.length!=null?p:null,P){y||(y=P.length>=3?"rgb":"gray");var k=s[y].length;C=P[k],m&&(w+=P===arguments?k+(C!=null?1:0):1),P.length>k&&(P=h.slice(P,0,k))}else if(I==="string"){var b=o(p);y=b[0],v=b[1],v.length===4&&(C=v[3],v.length--)}else if(I==="object")if(p.constructor===d){if(y=p._type,v=p._components.slice(),C=p._alpha,y==="gradient")for(var x=1,S=v.length;x<S;x++){var E=v[x];E&&(v[x]=E.clone())}}else if(p.constructor===Wt)y="gradient",P=_;else{y="hue"in p?"lightness"in p?"hsl":"hsb":"gradient"in p||"stops"in p||"radial"in p?"gradient":"gray"in p?"gray":"rgb";var A=s[y],O=e[y];this._components=v=[];for(var x=0,S=A.length;x<S;x++){var L=p[A[x]];L==null&&!x&&y==="gradient"&&"stops"in p&&(L={stops:p.stops,radial:p.radial}),L=O[x].call(this,L),L!=null&&(v[x]=L)}C=p.alpha}m&&y&&(w=1)}if(this._type=y||"rgb",!v){this._components=v=[];for(var O=e[this._type],x=0,S=O.length;x<S;x++){var L=O[x].call(this,P&&P[x]);L!=null&&(v[x]=L)}}return this._components=v,this._properties=s[this._type],this._alpha=C,m&&(this.__read=w),this},set:"#initialize",_serialize:function(d,p){var _=this.getComponents();return h.serialize(/^(gray|rgb)$/.test(this._type)?_:[this._type].concat(_),d,!0,p)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(d){var p;return this._type===d?this._components.slice():(p=c[this._type+"-"+d])?p.apply(this,this._components):c["rgb-"+d].apply(this,c[this._type+"-rgb"].apply(this,this._components))},convert:function(d){return new We(d,this._convert(d),this._alpha)},getType:function(){return this._type},setType:function(d){this._components=this._convert(d),this._properties=s[d],this._type=d},getComponents:function(){var d=this._components.slice();return this._alpha!=null&&d.push(this._alpha),d},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(d){this._alpha=d==null?null:Math.min(Math.max(d,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(d){var p=h.isPlainValue(d,!0)?We.read(arguments):d;return p===this||p&&this._class===p._class&&this._type===p._type&&this.getAlpha()===p.getAlpha()&&h.equals(this._components,p._components)||!1},toString:function(){for(var d=this._properties,p=[],_=this._type==="gradient",m=K.instance,w=0,y=d.length;w<y;w++){var v=this._components[w];v!=null&&p.push(d[w]+": "+(_?v:m.number(v)))}return this._alpha!=null&&p.push("alpha: "+m.number(this._alpha)),"{ "+p.join(", ")+" }"},toCSS:function(d){var p=this._convert("rgb"),_=d||this._alpha==null?1:this._alpha;function m(w){return Math.round((w<0?0:w>1?1:w)*255)}return p=[m(p[0]),m(p[1]),m(p[2])],_<1&&p.push(_<0?0:_),d?"#"+((1<<24)+(p[0]<<16)+(p[1]<<8)+p[2]).toString(16).slice(1):(p.length==4?"rgba(":"rgb(")+p.join(",")+")"},toCanvasStyle:function(d,p){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var _=this._components,m=_[0],w=m._stops,y=_[1],v=_[2],C=_[3],P=p&&p.inverted(),I;if(P&&(y=P._transformPoint(y),v=P._transformPoint(v),C&&(C=P._transformPoint(C))),m._radial){var k=v.getDistance(y);if(C){var b=C.subtract(y);b.getLength()>k&&(C=y.add(b.normalize(k-.1)))}var x=C||y;I=d.createRadialGradient(x.x,x.y,0,y.x,y.y,k)}else I=d.createLinearGradient(y.x,y.y,v.x,v.y);for(var S=0,E=w.length;S<E;S++){var A=w[S],O=A._offset;I.addColorStop(O==null?S/(E-1):O,A._color.toCanvasStyle())}return this._canvasStyle=I},transform:function(d){if(this._type==="gradient"){for(var p=this._components,_=1,m=p.length;_<m;_++){var w=p[_];d._transformPoint(w,w,!0)}this._changed()}},statics:{_types:s,random:function(){var d=Math.random;return new We(d(),d(),d())},_setOwner:function(d,p,_){return d&&(d._owner&&p&&d._owner!==p&&(d=d.clone()),!d._owner^!p&&(d._owner=p||null,d._setter=_||null)),d}}})},new function(){var s={add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t}};return h.each(s,function(e,t){this[t]=function(r){r=We.read(arguments);for(var o=this._type,l=this._components,c=r._convert(o),d=0,p=l.length;d<p;d++)c[d]=e(l[d],c[d]);return new We(o,c,this._alpha!=null?e(this._alpha,r.getAlpha()):null)}},{})}),Wt=h.extend({_class:"Gradient",initialize:function(e,t){this._id=ne.get(),e&&h.isPlainObject(e)&&(this.set(e),e=t=null),this._stops==null&&this.setStops(e||["white","black"]),this._radial==null&&this.setRadial(typeof t=="string"&&t==="radial"||t||!1)},_serialize:function(s,e){return e.add(this,function(){return h.serialize([this._stops,this._radial],s,!0,e)})},_changed:function(){for(var s=0,e=this._owners&&this._owners.length;s<e;s++)this._owners[s]._changed()},_addOwner:function(s){this._owners||(this._owners=[]),this._owners.push(s)},_removeOwner:function(s){var e=this._owners?this._owners.indexOf(s):-1;e!=-1&&(this._owners.splice(e,1),this._owners.length||(this._owners=a))},clone:function(){for(var s=[],e=0,t=this._stops.length;e<t;e++)s[e]=this._stops[e].clone();return new Wt(s,this._radial)},getStops:function(){return this._stops},setStops:function(s){if(s.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var t=0,r=e.length;t<r;t++)e[t]._owner=a;e=this._stops=oi.readList(s,0,{clone:!0});for(var t=0,r=e.length;t<r;t++)e[t]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(s){this._radial=s,this._changed()},equals:function(s){if(s===this)return!0;if(s&&this._class===s._class){var e=this._stops,t=s._stops,r=e.length;if(r===t.length){for(var o=0;o<r;o++)if(!e[o].equals(t[o]))return!1;return!0}}return!1}}),oi=h.extend({_class:"GradientStop",initialize:function(e,t){var r=e,o=t;typeof e=="object"&&t===a&&(Array.isArray(e)&&typeof e[0]!="number"?(r=e[0],o=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(r=e.color,o=e.offset||e.rampPoint||0)),this.setColor(r),this.setOffset(o)},clone:function(){return new oi(this._color.clone(),this._offset)},_serialize:function(s,e){var t=this._color,r=this._offset;return h.serialize(r==null?[t]:[t,r],s,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(s){this._offset=s,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){We._setOwner(this._color,null),this._color=We._setOwner(We.read(arguments,0),this,"setColor"),this._changed()},equals:function(s){return s===this||s&&this._class===s._class&&this._color.equals(s._color)&&this._offset==s._offset||!1}}),an=h.extend(new function(){var s={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new D,selectedColor:null},e=h.set({},s,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),t=h.set({},e,{fillColor:new We}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},o={beans:!0},l={_class:"Style",beans:!0,initialize:function(d,p,_){this._values={},this._owner=p,this._project=p&&p._project||_||nt.project,this._defaults=!p||p instanceof Te?e:p instanceof zt?t:s,d&&this.set(d)}};return h.each(e,function(c,d){var p=/Color$/.test(d),_=d==="shadowOffset",m=h.capitalize(d),w=r[d],y="set"+m,v="get"+m;l[y]=function(C){var P=this._owner,I=P&&P._children,k=I&&I.length>0&&!(P instanceof Be);if(k)for(var b=0,x=I.length;b<x;b++)I[b]._style[y](C);if((d==="selectedColor"||!k)&&d in this._defaults){var S=this._values[d];S!==C&&(p&&(S&&(We._setOwner(S,null),S._canvasStyle=null),C&&C.constructor===We&&(C=We._setOwner(C,P,k&&y))),this._values[d]=C,P&&P._changed(w||129))}},l[v]=function(C){var P=this._owner,I=P&&P._children,k=I&&I.length>0&&!(P instanceof Be),b;if(k&&!C)for(var x=0,S=I.length;x<S;x++){var E=I[x]._style[v]();if(!x)b=E;else if(!h.equals(b,E))return a}else if(d in this._defaults){var b=this._values[d];if(b===a)b=this._defaults[d],b&&b.clone&&(b=b.clone());else{var A=p?We:_?D:null;A&&!(b&&b.constructor===A)&&(this._values[d]=b=A.read([b],0,{readNull:!0,clone:!0}))}}return b&&p&&(b=We._setOwner(b,P,k&&y)),b},o[v]=function(C){return this._style[v](C)},o[y]=function(C){this._style[y](C)}}),h.each({Font:"FontFamily",WindingRule:"FillRule"},function(c,d){var p="get"+d,_="set"+d;l[p]=o[p]="#get"+c,l[_]=o[_]="#set"+c}),B.inject(o),l},{set:function(s){var e=s instanceof an,t=e?s._values:s;if(t){for(var r in t)if(r in this._defaults){var o=t[r];this[r]=o&&e&&o.clone?o.clone():o}}},equals:function(s){function e(t,r,o){var l=t._values,c=r._values,d=r._defaults;for(var p in l){var _=l[p],m=c[p];if(!(o&&p in c)&&!h.equals(_,m===a?d[p]:m))return!1}return!0}return s===this||s&&this._class===s._class&&e(this,s)&&e(s,this,!0)||!1},_dispose:function(){var s;s=this.getFillColor(),s&&(s._canvasStyle=null),s=this.getStrokeColor(),s&&(s._canvasStyle=null),s=this.getShadowColor(),s&&(s._canvasStyle=null)},hasFill:function(){var s=this.getFillColor();return!!s&&s.alpha>0},hasStroke:function(){var s=this.getStrokeColor();return!!s&&s.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var s=this.getShadowColor();return!!s&&s.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var s=this.getFontSize();return this.getFontWeight()+" "+s+(/[a-z]/i.test(s+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function s(){var e=s.base.call(this),t=this.getFontSize();return/pt|em|%|px/.test(t)&&(t=this.getView().getPixelSize(t)),e!=null?e:t*1.2}}),Xe=new function(){function s(e,t,r,o){for(var l=["","webkit","moz","Moz","ms","o"],c=t[0].toUpperCase()+t.substring(1),d=0;d<6;d++){var p=l[d],_=p?p+c:t;if(_ in e){if(r)e[_]=o;else return e[_];break}}}return{getStyles:function(e){var t=e&&e.nodeType!==9?e.ownerDocument:e,r=t&&t.defaultView;return r&&r.getComputedStyle(e,"")},getBounds:function(e,t){var r=e.ownerDocument,o=r.body,l=r.documentElement,c;try{c=e.getBoundingClientRect()}catch(m){c={left:0,top:0,width:0,height:0}}var d=c.left-(l.clientLeft||o.clientLeft||0),p=c.top-(l.clientTop||o.clientTop||0);if(!t){var _=r.defaultView;d+=_.pageXOffset||l.scrollLeft||o.scrollLeft,p+=_.pageYOffset||l.scrollTop||o.scrollTop}return new $(d,p,c.width,c.height)},getViewportBounds:function(e){var t=e.ownerDocument,r=t.defaultView,o=t.documentElement;return new $(0,0,r.innerWidth||o.clientWidth,r.innerHeight||o.clientHeight)},getOffset:function(e,t){return Xe.getBounds(e,t).getPoint()},getSize:function(e){return Xe.getBounds(e,!0).getSize()},isInvisible:function(e){return Xe.getSize(e).equals(new ee(0,0))},isInView:function(e){return!Xe.isInvisible(e)&&Xe.getViewportBounds(e).intersects(Xe.getBounds(e,!0))},isInserted:function(e){return g.body.contains(e)},getPrefixed:function(e,t){return e&&s(e,t)},setPrefixed:function(e,t,r){if(typeof t=="object")for(var o in t)s(e,o,!0,t[o]);else s(e,t,!0,r)}}},tt={add:function(s,e){if(s)for(var t in e)for(var r=e[t],o=t.split(/[\s,]+/g),l=0,c=o.length;l<c;l++){var d=o[l],p=s===g&&(d==="touchstart"||d==="touchmove")?{passive:!1}:!1;s.addEventListener(d,r,p)}},remove:function(s,e){if(s)for(var t in e)for(var r=e[t],o=t.split(/[\s,]+/g),l=0,c=o.length;l<c;l++)s.removeEventListener(o[l],r,!1)},getPoint:function(s){var e=s.targetTouches?s.targetTouches.length?s.targetTouches[0]:s.changedTouches[0]:s;return new D(e.pageX||e.clientX+g.documentElement.scrollLeft,e.pageY||e.clientY+g.documentElement.scrollTop)},getTarget:function(s){return s.target||s.srcElement},getRelatedTarget:function(s){return s.relatedTarget||s.toElement},getOffset:function(s,e){return tt.getPoint(s).subtract(Xe.getOffset(e||tt.getTarget(s)))}};tt.requestAnimationFrame=new function(){var s=Xe.getPrefixed(u,"requestAnimationFrame"),e=!1,t=[],r;function o(){var l=t;t=[];for(var c=0,d=l.length;c<d;c++)l[c]();e=s&&t.length,e&&s(o)}return function(l){t.push(l),s?e||(s(o),e=!0):r||(r=setInterval(o,1e3/60))}};var Ye=h.extend(T,{_class:"View",initialize:function s(e,t){function r(w){return t[w]||parseInt(t.getAttribute(w),10)}function o(){var w=Xe.getSize(t);return w.isNaN()||w.isZero()?new ee(r("width"),r("height")):w}var l;if(u&&t){this._id=t.getAttribute("id"),this._id==null&&t.setAttribute("id",this._id="paper-view-"+s._id++),tt.add(t,this._viewEvents);var c="none";if(Xe.setPrefixed(t.style,{userDrag:c,userSelect:c,touchCallout:c,contentZooming:c,tapHighlightColor:"rgba(0,0,0,0)"}),M.hasAttribute(t,"resize")){var d=this;tt.add(u,this._windowEvents={resize:function(){d.setViewSize(o())}})}if(l=o(),M.hasAttribute(t,"stats")&&typeof Stats!="undefined"){this._stats=new Stats;var p=this._stats.domElement,_=p.style,m=Xe.getOffset(t);_.position="absolute",_.left=m.x+"px",_.top=m.y+"px",g.body.appendChild(p)}}else l=new ee(t),t=null;this._project=e,this._scope=e._scope,this._element=t,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(l.width,l.height),this._viewSize=l,s._views.push(this),s._viewsById[this._id]=this,(this._matrix=new te)._owner=this,s._focused||(s._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!nt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Ye._focused===this&&(Ye._focused=null),Ye._views.splice(Ye._views.indexOf(this),1),delete Ye._viewsById[this._id];var s=this._project;return s._view===this&&(s._view=null),tt.remove(this._element,this._viewEvents),tt.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:h.each(B._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(s){this[s]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(s){this._autoUpdate=s,s&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var s=this;tt.requestAnimationFrame(function(){if(s._requested=!1,s._animate){s.requestUpdate();var e=s._element;(!Xe.getPrefixed(g,"hidden")||M.getAttribute(e,"keepalive")==="true")&&Xe.isInView(e)&&s._handleFrame()}s._autoUpdate&&s.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){nt=this._scope;var s=Date.now()/1e3,e=this._last?s-this._last:0;this._last=s,this.emit("frame",new h({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(s,e){var t=this._frameItems;e?(t[s._id]={item:s,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete t[s._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(s){for(var e in this._frameItems){var t=this._frameItems[e];t.item.emit("frame",new h(s,{time:t.time+=s.delta,count:t.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=a},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var s=this._viewSize;return new ce(s.width,s.height,this,"setViewSize")},setViewSize:function(){var s=ee.read(arguments),e=s.subtract(this._viewSize);e.isZero()||(this._setElementSize(s.width,s.height),this._viewSize.set(s),this._changed(),this.emit("resize",{size:s,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(s,e){var t=this._element;t&&(t.width!==s&&(t.width=s),t.height!==e&&(t.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new $(new D,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Xe.isInView(this._element)},isInserted:function(){return Xe.isInserted(this._element)},getPixelSize:function(s){var e=this._element,t;if(e){var r=e.parentNode,o=g.createElement("div");o.style.fontSize=s,r.appendChild(o),t=parseFloat(Xe.getStyles(o).fontSize),r.removeChild(o)}else t=parseFloat(t);return t},getTextWidth:function(s,e){return 0}},h.each(["rotate","scale","shear","skew"],function(s){var e=s==="rotate";this[s]=function(){var t=arguments,r=(e?h:D).read(t),o=D.read(t,0,{readNull:!0});return this.transform(new te()[s](r,o||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var s=new te;return this.transform(s.translate.apply(s,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var s=D.read(arguments);this.translate(this.getCenter().subtract(s))},getZoom:function(){var s=this._decompose().scaling;return(s.x+s.y)/2},setZoom:function(s){this.transform(new te().scale(s/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(s){var e=this.getRotation();e!=null&&s!=null&&this.rotate(s-e)},getScaling:function(){var s=this._decompose().scaling;return new ue(s.x,s.y,this,"setScaling")},setScaling:function(){var s=this.getScaling(),e=D.read(arguments,0,{clone:!0,readNull:!0});s&&e&&this.scale(e.x/s.x,e.y/s.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var s=this._matrix;s.set.apply(s,arguments)},transform:function(s){this._matrix.append(s)},scrollBy:function(){this.translate(D.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(D.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(D.read(arguments))},getEventPoint:function(s){return this.viewToProject(tt.getOffset(s,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(s,e){g&&typeof e=="string"&&(e=g.getElementById(e));var t=u?kr:Ye;return new t(s,e)}}},new function(){if(!u)return;var s,e,t=!1,r=!1;function o(G){var V=tt.getTarget(G);return V.getAttribute&&Ye._viewsById[V.getAttribute("id")]}function l(){var G=Ye._focused;if(!G||!G.isVisible()){for(var V=0,j=Ye._views.length;V<j;V++)if((G=Ye._views[V]).isVisible()){Ye._focused=e=G;break}}}function c(G,V,j){G._handleMouseEvent("mousemove",V,j)}var d=u.navigator,p,_,m;d.pointerEnabled||d.msPointerEnabled?(p="pointerdown MSPointerDown",_="pointermove MSPointerMove",m="pointerup pointercancel MSPointerUp MSPointerCancel"):(p="touchstart",_="touchmove",m="touchend touchcancel","ontouchstart"in u&&d.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(p+=" mousedown",_+=" mousemove",m+=" mouseup"));var w={},y={mouseout:function(G){var V=Ye._focused,j=tt.getRelatedTarget(G);if(V&&(!j||j.nodeName==="HTML")){var Q=tt.getOffset(G,V._element),Z=Q.x,Y=Math.abs,re=Y(Z),le=1<<25,de=re-le;Q.x=Y(de)<re?de*(Z<0?-1:1):Z,c(V,G,V.viewToProject(Q))}},scroll:l};w[p]=function(G){var V=Ye._focused=o(G);t||(t=!0,V._handleMouseEvent("mousedown",G))},y[_]=function(G){var V=Ye._focused;if(!r){var j=o(G);j?V!==j&&(V&&c(V,G),s||(s=V),V=Ye._focused=e=j):e&&e===V&&(s&&!s.isInserted()&&(s=null),V=Ye._focused=s,s=null,l())}V&&c(V,G)},y[p]=function(){r=!0},y[m]=function(G){var V=Ye._focused;V&&t&&V._handleMouseEvent("mouseup",G),r=t=!1},tt.add(g,y),tt.add(u,{load:l});var v=!1,C=!1,P={doubleclick:"click",mousedrag:"mousemove"},I=!1,k,b,x,S,E,A,O,L;function R(G,V,j,Q,Z,Y,re){var le=!1,de;function ve(we,he){if(we.responds(he)){if(de||(de=new Tr(he,Q,Z,V||we,Y?Z.subtract(Y):null)),we.emit(he,de)&&(v=!0,de.prevented&&(C=!0),de.stopped))return le=!0}else{var fe=P[he];if(fe)return ve(we,fe)}}for(;G&&G!==re&&!ve(G,j);)G=G._parent;return le}function F(G,V,j,Q,Z,Y){return G._project.removeOn(j),C=v=!1,E&&R(E,null,j,Q,Z,Y)||V&&V!==E&&!V.isDescendant(E)&&R(V,null,j==="mousedrag"?"mousemove":j,Q,Z,Y,E)||R(G,E||V||G,j,Q,Z,Y)}var U={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:w,_handleMouseEvent:function(G,V,j){var Q=this._itemEvents,Z=Q.native[G],Y=G==="mousemove",re=this._scope.tool,le=this;function de(Pe){return Q.virtual[Pe]||le.responds(Pe)||re&&re.responds(Pe)}Y&&t&&de("mousedrag")&&(G="mousedrag"),j||(j=this.getEventPoint(V));var ve=this.getBounds().contains(j),we=Z&&ve&&le._project.hitTest(j,{tolerance:0,fill:!0,stroke:!0}),he=we&&we.item||null,fe=!1,xe={};if(xe[G.substr(5)]=!0,Z&&he!==S&&(S&&R(S,null,"mouseleave",V,j),he&&R(he,null,"mouseenter",V,j),S=he),I^ve&&(R(this,null,ve?"mouseenter":"mouseleave",V,j),fe=!0),(ve||xe.drag)&&!j.equals(b)&&(F(this,he,Y?G:"mousemove",V,j,b),fe=!0),I=ve,xe.down&&ve||xe.up&&k){if(F(this,he,G,V,j,k),xe.down){if(L=he===A&&Date.now()-O<300,x=A=he,!C&&he){for(var Ce=he;Ce&&!Ce.responds("mousedrag");)Ce=Ce._parent;Ce&&(E=he)}k=j}else xe.up&&(!C&&he===x&&(O=Date.now(),F(this,he,L?"doubleclick":"click",V,j,k),L=!1),x=E=null);I=!1,fe=!0}b=j,fe&&re&&(v=re._handleMouseEvent(G,V,j,xe)||v),V.cancelable!==!1&&(v&&!xe.move||xe.down&&de("mouseup"))&&V.preventDefault()},_handleKeyEvent:function(G,V,j,Q){var Z=this._scope,Y=Z.tool,re;function le(de){de.responds(G)&&(nt=Z,de.emit(G,re=re||new Nr(G,V,j,Q)))}this.isVisible()&&(le(this),Y&&Y.responds(G)&&le(Y))},_countItemEvent:function(G,V){var j=this._itemEvents,Q=j.native,Z=j.virtual;for(var Y in U)Q[Y]=(Q[Y]||0)+(U[Y][G]||0)*V;Z[G]=(Z[G]||0)+V},statics:{updateFocus:l,_resetState:function(){t=r=v=I=!1,s=e=k=b=x=S=E=A=O=L=null}}}}),kr=Ye.extend({_class:"CanvasView",initialize:function(e,t){if(!(t instanceof u.HTMLCanvasElement)){var r=ee.read(arguments,1);if(r.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+h.slice(arguments,1));t=Tt.getCanvas(r)}var o=this._context=t.getContext("2d");if(o.save(),this._pixelRatio=1,!/^off|false$/.test(M.getAttribute(t,"hidpi"))){var l=u.devicePixelRatio||1,c=Xe.getPrefixed(o,"backingStorePixelRatio")||1;this._pixelRatio=l/c}Ye.call(this,e,t),this._needsUpdate=!0},remove:function s(){return this._context.restore(),s.base.call(this)},_setElementSize:function s(e,t){var r=this._pixelRatio;if(s.base.call(this,e*r,t*r),r!==1){var o=this._element,l=this._context;if(!M.hasAttribute(o,"resize")){var c=o.style;c.width=e+"px",c.height=t+"px"}l.restore(),l.save(),l.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function s(e){var t=nt.agent,r;if(t&&t.firefox)r=s.base.call(this,e);else{var o=this._context,l=o.font;o.font=e+" serif",r=parseFloat(o.font),o.font=l}return r},getTextWidth:function(s,e){var t=this._context,r=t.font,o=0;t.font=s;for(var l=0,c=e.length;l<c;l++)o=Math.max(o,t.measureText(e[l]).width);return t.font=r,o},update:function(){if(!this._needsUpdate)return!1;var s=this._project,e=this._context,t=this._viewSize;return e.clearRect(0,0,t.width+1,t.height+1),s&&s.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Mi=h.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return on.modifiers}}),Nr=Mi.extend({_class:"KeyEvent",initialize:function(e,t,r,o){this.type=e,this.event=t,this.key=r,this.character=o},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),on=new function(){var s={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},e={tab:"	",space:" ",enter:"\r"},t={},r={},o,l,c=new h({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var _=nt&&nt.agent;return _&&_.mac?this.meta:this.control}}});function d(_){var m=_.key||_.keyIdentifier;return m=/^U\+/.test(m)?String.fromCharCode(parseInt(m.substr(2),16)):/^Arrow[A-Z]/.test(m)?m.substr(5):m==="Unidentified"||m===a?String.fromCharCode(_.keyCode):m,s[m]||(m.length>1?h.hyphenate(m):m.toLowerCase())}function p(_,m,w,y){var v=Ye._focused,C;if(t[m]=_,_?r[m]=w:delete r[m],m.length>1&&(C=h.camelize(m))in c){c[C]=_;var P=nt&&nt.agent;if(C==="meta"&&P&&P.mac)if(_)o={};else{for(var I in o)I in r&&p(!1,I,o[I],y);o=null}}else _&&o&&(o[m]=w);v&&v._handleKeyEvent(_?"keydown":"keyup",y,m,w)}return tt.add(g,{keydown:function(_){var m=d(_),w=nt&&nt.agent;m.length>1||w&&w.chrome&&(_.altKey||w.mac&&_.metaKey||!w.mac&&_.ctrlKey)?p(!0,m,e[m]||(m.length>1?"":m),_):l=m},keypress:function(_){if(l){var m=d(_),w=_.charCode,y=w>=32?String.fromCharCode(w):m.length>1?"":m;m!==l&&(m=y.toLowerCase()),p(!0,m,y,_),l=null}},keyup:function(_){var m=d(_);m in r&&p(!1,m,r[m],_)}}),tt.add(u,{blur:function(_){for(var m in r)p(!1,m,r[m],_)}}),{modifiers:c,isDown:function(_){return!!t[_]}}},Tr=Mi.extend({_class:"MouseEvent",initialize:function(e,t,r,o,l){this.type=e,this.event=t,this.point=r,this.target=o,this.delta=l},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),ln=Mi.extend({_class:"ToolEvent",_item:null,initialize:function(e,t,r){this.tool=e,this.type=t,this.event=r},_choosePoint:function(s,e){return s||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(s){this._point=s},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(s){this._lastPoint=s},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(s){this._downPoint=s},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(s){this._middlePoint=s},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(s){this._delta=s},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(s){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=s},getItem:function(){if(!this._item){var s=this.tool._scope.project.hitTest(this.getPoint());if(s){for(var e=s.item,t=e._parent;/^(Group|CompoundPath)$/.test(t._class);)e=t,t=t._parent;this._item=e}}return this._item},setItem:function(s){this._item=s},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}});z.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){z.call(this),this._moveCount=-1,this._downCount=-1,this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(s){this._minDistance=s,s!=null&&this._maxDistance!=null&&s>this._maxDistance&&(this._maxDistance=s)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(s){this._maxDistance=s,this._minDistance!=null&&s!=null&&s<this._minDistance&&(this._minDistance=s)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(s){this._minDistance=this._maxDistance=s},_handleMouseEvent:function(s,e,t,r){nt=this._scope,r.drag&&!this.responds(s)&&(s="mousemove");var o=r.move||r.drag,l=this.responds(s),c=this.minDistance,d=this.maxDistance,p=!1,_=this;function m(y,v){var C=t,P=o?_._point:_._downPoint||C;if(o){if(_._moveCount>=0&&C.equals(P))return!1;if(P&&(y!=null||v!=null)){var I=C.subtract(P),k=I.getLength();if(k<(y||0))return!1;v&&(C=P.add(I.normalize(Math.min(k,v))))}_._moveCount++}return _._point=C,_._lastPoint=P||C,r.down&&(_._moveCount=-1,_._downPoint=C,_._downCount++),!0}function w(){l&&(p=_.emit(s,new ln(_,s,e))||p)}if(r.down)m(),w();else if(r.up)m(null,d),w();else if(l)for(;m(c,d);)w();return p}});var tr=h.extend(T,{_class:"Tween",statics:{easings:new h({linear:function(s){return s},easeInQuad:function(s){return s*s},easeOutQuad:function(s){return s*(2-s)},easeInOutQuad:function(s){return s<.5?2*s*s:-1+2*(2-s)*s},easeInCubic:function(s){return s*s*s},easeOutCubic:function(s){return--s*s*s+1},easeInOutCubic:function(s){return s<.5?4*s*s*s:(s-1)*(2*s-2)*(2*s-2)+1},easeInQuart:function(s){return s*s*s*s},easeOutQuart:function(s){return 1- --s*s*s*s},easeInOutQuart:function(s){return s<.5?8*s*s*s*s:1-8*--s*s*s*s},easeInQuint:function(s){return s*s*s*s*s},easeOutQuint:function(s){return 1+--s*s*s*s*s},easeInOutQuint:function(s){return s<.5?16*s*s*s*s*s:1+16*--s*s*s*s*s}})},initialize:function s(e,t,r,o,l,c){this.object=e;var d=typeof l,p=d==="function";this.type=p?d:d==="string"?l:"linear",this.easing=p?l:s.easings[this.type],this.duration=o,this.running=!1,this._then=null,this._startTime=null;var _=t||r;this._keys=_?Object.keys(_):[],this._parsedKeys=this._parseKeys(this._keys),this._from=_&&this._getState(t),this._to=_&&this._getState(r),c!==!1&&this.start()},then:function(s){return this._then=s,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(s){if(this.running){s>=1&&(s=1,this.running=!1);for(var e=this.easing(s),t=this._keys,r=function(m){return typeof m=="function"?m(e,s):m},o=0,l=t&&t.length;o<l;o++){var c=t[o],d=r(this._from[c]),p=r(this._to[c]),_=d&&p&&d.__add&&p.__add?p.__subtract(d).__multiply(e).__add(d):(p-d)*e+d;this._setProperty(this._parsedKeys[c],_)}this.responds("update")&&this.emit("update",new h({progress:s,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(s){var e=this._startTime,t=e?(s-e)/this.duration:0;e||(this._startTime=s),this.update(t)},_getState:function(s){for(var e=this._keys,t={},r=0,o=e.length;r<o;r++){var l=e[r],c=this._parsedKeys[l],d=this._getProperty(c),p;if(s){var _=this._resolveValue(d,s[l]);this._setProperty(c,_),p=this._getProperty(c),p=p&&p.clone?p.clone():p,this._setProperty(c,d)}else p=d&&d.clone?d.clone():d;t[l]=p}return t},_resolveValue:function(s,e){if(e){if(Array.isArray(e)&&e.length===2){var t=e[0];return t&&t.match&&t.match(/^[+\-\*\/]=/)?this._calculate(s,t[0],e[1]):e}else if(typeof e=="string"){var r=e.match(/^[+\-*/]=(.*)/);if(r){var o=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(s,e[0],o)}}}return e},_calculate:function(s,e,t){return nt.PaperScript.calculateBinary(s,e,t)},_parseKeys:function(s){for(var e={},t=0,r=s.length;t<r;t++){var o=s[t],l=o.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[o]=l.split("/")}return e},_getProperty:function(s,e){for(var t=this.object,r=0,o=s.length-(e||0);r<o&&t;r++)t=t[s[r]];return t},_setProperty:function(s,e){var t=this._getProperty(s,1);t&&(t[s[s.length-1]]=e)}}),ir={request:function(s){var e=new i.XMLHttpRequest;return e.open((s.method||"get").toUpperCase(),s.url,h.pick(s.async,!0)),s.mimeType&&e.overrideMimeType(s.mimeType),e.onload=function(){var t=e.status;t===0||t===200?s.onLoad&&s.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var t=e.status,r='Could not load "'+s.url+'" (Status: '+t+")";if(s.onError)s.onError(r,t);else throw new Error(r)},e.send(null)}},Tt=h.exports.CanvasProvider={canvases:[],getCanvas:function(s,e,t){if(!u)return null;var r,o=!0;typeof s=="object"&&(e=s.height,s=s.width),this.canvases.length?r=this.canvases.pop():(r=g.createElement("canvas"),o=!1);var l=r.getContext("2d",t||{});if(!l)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===s&&r.height===e?o&&l.clearRect(0,0,s+1,e+1):(r.width=s,r.height=e),l.save(),r},getContext:function(s,e,t){var r=this.getCanvas(s,e,t);return r?r.getContext("2d",t||{}):null},release:function(s){var e=s&&s.canvas?s.canvas:s;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},Pt=new function(){var s=Math.min,e=Math.max,t=Math.abs,r,o,l,c,d,p,_,m,w,y,v;function C(E,A,O){return .2989*E+.587*A+.114*O}function P(E,A,O,F){var R=F-C(E,A,O);w=E+R,y=A+R,v=O+R;var F=C(w,y,v),U=s(w,y,v),G=e(w,y,v);if(U<0){var V=F-U;w=F+(w-F)*F/V,y=F+(y-F)*F/V,v=F+(v-F)*F/V}if(G>255){var j=255-F,Q=G-F;w=F+(w-F)*j/Q,y=F+(y-F)*j/Q,v=F+(v-F)*j/Q}}function I(E,A,O){return e(E,A,O)-s(E,A,O)}function k(E,A,O,L){var R=[E,A,O],F=e(E,A,O),U=s(E,A,O),G;U=U===E?0:U===A?1:2,F=F===E?0:F===A?1:2,G=s(U,F)===0?e(U,F)===1?2:1:0,R[F]>R[U]?(R[G]=(R[G]-R[U])*L/(R[F]-R[U]),R[F]=L):R[G]=R[F]=0,R[U]=0,w=R[0],y=R[1],v=R[2]}var b={multiply:function(){w=d*r/255,y=p*o/255,v=_*l/255},screen:function(){w=d+r-d*r/255,y=p+o-p*o/255,v=_+l-_*l/255},overlay:function(){w=d<128?2*d*r/255:255-2*(255-d)*(255-r)/255,y=p<128?2*p*o/255:255-2*(255-p)*(255-o)/255,v=_<128?2*_*l/255:255-2*(255-_)*(255-l)/255},"soft-light":function(){var E=r*d/255;w=E+d*(255-(255-d)*(255-r)/255-E)/255,E=o*p/255,y=E+p*(255-(255-p)*(255-o)/255-E)/255,E=l*_/255,v=E+_*(255-(255-_)*(255-l)/255-E)/255},"hard-light":function(){w=r<128?2*r*d/255:255-2*(255-r)*(255-d)/255,y=o<128?2*o*p/255:255-2*(255-o)*(255-p)/255,v=l<128?2*l*_/255:255-2*(255-l)*(255-_)/255},"color-dodge":function(){w=d===0?0:r===255?255:s(255,255*d/(255-r)),y=p===0?0:o===255?255:s(255,255*p/(255-o)),v=_===0?0:l===255?255:s(255,255*_/(255-l))},"color-burn":function(){w=d===255?255:r===0?0:e(0,255-(255-d)*255/r),y=p===255?255:o===0?0:e(0,255-(255-p)*255/o),v=_===255?255:l===0?0:e(0,255-(255-_)*255/l)},darken:function(){w=d<r?d:r,y=p<o?p:o,v=_<l?_:l},lighten:function(){w=d>r?d:r,y=p>o?p:o,v=_>l?_:l},difference:function(){w=d-r,w<0&&(w=-w),y=p-o,y<0&&(y=-y),v=_-l,v<0&&(v=-v)},exclusion:function(){w=d+r*(255-d-d)/255,y=p+o*(255-p-p)/255,v=_+l*(255-_-_)/255},hue:function(){k(r,o,l,I(d,p,_)),P(w,y,v,C(d,p,_))},saturation:function(){k(d,p,_,I(r,o,l)),P(w,y,v,C(d,p,_))},luminosity:function(){P(d,p,_,C(r,o,l))},color:function(){P(r,o,l,C(d,p,_))},add:function(){w=s(d+r,255),y=s(p+o,255),v=s(_+l,255)},subtract:function(){w=e(d-r,0),y=e(p-o,0),v=e(_-l,0)},average:function(){w=(d+r)/2,y=(p+o)/2,v=(_+l)/2},negation:function(){w=255-t(255-r-d),y=255-t(255-o-p),v=255-t(255-l-_)}},x=this.nativeModes=h.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(E){this[E]=!0},{}),S=Tt.getContext(1,1,{willReadFrequently:!0});S&&(h.each(b,function(E,A){var O=A==="darken",L=!1;S.save();try{S.fillStyle=O?"#300":"#a00",S.fillRect(0,0,1,1),S.globalCompositeOperation=A,S.globalCompositeOperation===A&&(S.fillStyle=O?"#a00":"#300",S.fillRect(0,0,1,1),L=S.getImageData(0,0,1,1).data[0]!==O?170:51)}catch(R){}S.restore(),x[A]=L}),Tt.release(S)),this.process=function(E,A,O,L,R){var F=A.canvas,U=E==="normal";if(U||x[E])O.save(),O.setTransform(1,0,0,1,0,0),O.globalAlpha=L,U||(O.globalCompositeOperation=E),O.drawImage(F,R.x,R.y),O.restore();else{var G=b[E];if(!G)return;for(var V=O.getImageData(R.x,R.y,F.width,F.height),j=V.data,Q=A.getImageData(0,0,F.width,F.height).data,Z=0,Y=j.length;Z<Y;Z+=4){r=Q[Z],d=j[Z],o=Q[Z+1],p=j[Z+1],l=Q[Z+2],_=j[Z+2],c=Q[Z+3],m=j[Z+3],G();var re=c*L/255,le=1-re;j[Z]=re*w+le*d,j[Z+1]=re*y+le*p,j[Z+2]=re*v+le*_,j[Z+3]=c*L+le*m}O.putImageData(V,R.x,R.y)}}},pt=new function(){var s="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",t="http://www.w3.org/1999/xlink",r={href:t,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function o(d,p,_){return c(g.createElementNS(s,d),p,_)}function l(d,p){var _=r[p],m=_?d.getAttributeNS(_,p):d.getAttribute(p);return m==="null"?null:m}function c(d,p,_){for(var m in p){var w=p[m],y=r[m];typeof w=="number"&&_&&(w=_.number(w)),y?d.setAttributeNS(y,m,w):d.setAttribute(m,w)}return d}return{svg:s,xmlns:e,xlink:t,create:o,get:l,set:c}},It=h.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(s,e){return!e&&(s instanceof Oe||s instanceof Ve||s instanceof zt)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(s,e){var t=h.capitalize(e),r=s[2];this[e]={type:s[1],property:e,attribute:s[0],toSVG:r,fromSVG:r&&h.each(r,function(o,l){this[o]=l},{}),exportFilter:s[3],get:"get"+t,set:"set"+t}},{});new function(){var s;function e(b,x,S){var E=new h,A=b.getTranslation();if(x){var O;b.isInvertible()?(b=b._shiftless(),O=b._inverseTransform(A),A=null):O=new D,E[S?"cx":"x"]=O.x,E[S?"cy":"y"]=O.y}if(!b.isIdentity()){var L=b.decompose();if(L){var R=[],F=L.rotation,U=L.scaling,G=L.skewing;A&&!A.isZero()&&R.push("translate("+s.point(A)+")"),F&&R.push("rotate("+s.number(F)+")"),(!X.isZero(U.x-1)||!X.isZero(U.y-1))&&R.push("scale("+s.point(U)+")"),G.x&&R.push("skewX("+s.number(G.x)+")"),G.y&&R.push("skewY("+s.number(G.y)+")"),E.transform=R.join(" ")}else E.transform="matrix("+b.getValues().join(",")+")"}return E}function t(b,x){for(var S=e(b._matrix),E=b._children,A=pt.create("g",S,s),O=0,L=E.length;O<L;O++){var R=E[O],F=I(R,x);if(F)if(R.isClipMask()){var U=pt.create("clipPath");U.appendChild(F),C(R,U,"clip"),pt.set(A,{"clip-path":"url(#"+U.id+")"})}else A.appendChild(F)}return A}function r(b,x){var S=e(b._matrix,!0),E=b.getSize(),A=b.getImage();return S.x-=E.width/2,S.y-=E.height/2,S.width=E.width,S.height=E.height,S.href=x.embedImages==!1&&A&&A.src||b.toDataURL(),pt.create("image",S,s)}function o(b,x){var S=x.matchShapes;if(S){var E=b.toShape(!1);if(E)return l(E)}var A=b._segments,O=A.length,L,R=e(b._matrix);if(S&&O>=2&&!b.hasHandles())if(O>2){L=b._closed?"polygon":"polyline";for(var F=[],U=0;U<O;U++)F.push(s.point(A[U]._point));R.points=F.join(" ")}else{L="line";var G=A[0]._point,V=A[1]._point;R.set({x1:G.x,y1:G.y,x2:V.x,y2:V.y})}else L="path",R.d=b.getPathData(null,x.precision);return pt.create(L,R,s)}function l(b){var x=b._type,S=b._radius,E=e(b._matrix,!0,x!=="rectangle");if(x==="rectangle"){x="rect";var A=b._size,O=A.width,L=A.height;E.x-=O/2,E.y-=L/2,E.width=O,E.height=L,S.isZero()&&(S=null)}return S&&(x==="circle"?E.r=S:(E.rx=S.width,E.ry=S.height)),pt.create(x,E,s)}function c(b,x){var S=e(b._matrix),E=b.getPathData(null,x.precision);return E&&(S.d=E),pt.create("path",S,s)}function d(b,x){var S=e(b._matrix,!0),E=b._definition,A=v(E,"symbol"),O=E._item,L=O.getStrokeBounds();return A||(A=pt.create("symbol",{viewBox:s.rectangle(L)}),A.appendChild(I(O,x)),C(E,A,"symbol")),S.href="#"+A.id,S.x+=L.x,S.y+=L.y,S.width=L.width,S.height=L.height,S.overflow="visible",pt.create("use",S,s)}function p(b){var x=v(b,"color");if(!x){var S=b.getGradient(),E=S._radial,A=b.getOrigin(),O=b.getDestination(),L;if(E){L={cx:A.x,cy:A.y,r:A.getDistance(O)};var R=b.getHighlight();R&&(L.fx=R.x,L.fy=R.y)}else L={x1:A.x,y1:A.y,x2:O.x,y2:O.y};L.gradientUnits="userSpaceOnUse",x=pt.create((E?"radial":"linear")+"Gradient",L,s);for(var F=S._stops,U=0,G=F.length;U<G;U++){var V=F[U],j=V._color,Q=j.getAlpha(),Z=V._offset;L={offset:Z==null?U/(G-1):Z},j&&(L["stop-color"]=j.toCSS(!0)),Q<1&&(L["stop-opacity"]=Q),x.appendChild(pt.create("stop",L,s))}C(b,x,"color")}return"url(#"+x.id+")"}function _(b){var x=pt.create("text",e(b._matrix,!0),s);return x.textContent=b._content,x}var m={Group:t,Layer:t,Raster:r,Path:o,Shape:l,CompoundPath:c,SymbolItem:d,PointText:_};function w(b,x,S){var E={},A=!S&&b.getParent(),O=[];return b._name!=null&&(E.id=b._name),h.each(It,function(L){var R=L.get,F=L.type,U=b[R]();if(L.exportFilter?L.exportFilter(b,U):!A||!h.equals(A[R](),U)){if(F==="color"&&U!=null){var G=U.getAlpha();G<1&&(E[L.attribute+"-opacity"]=G)}F==="style"?O.push(L.attribute+": "+U):E[L.attribute]=U==null?"none":F==="color"?U.gradient?p(U):U.toCSS(!0):F==="array"?U.join(","):F==="lookup"?L.toSVG[U]:U}}),O.length&&(E.style=O.join(";")),E.opacity===1&&delete E.opacity,b._visible||(E.visibility="hidden"),pt.set(x,E,s)}var y;function v(b,x){return y||(y={ids:{},svgs:{}}),b&&y.svgs[x+"-"+(b._id||b.__id||(b.__id=ne.get("svg")))]}function C(b,x,S){y||v();var E=y.ids[S]=(y.ids[S]||0)+1;x.id=S+"-"+E,y.svgs[S+"-"+(b._id||b.__id)]=x}function P(b,x){var S=b,E=null;if(y){S=b.nodeName.toLowerCase()==="svg"&&b;for(var A in y.svgs)E||(S||(S=pt.create("svg"),S.appendChild(b)),E=S.insertBefore(pt.create("defs"),S.firstChild)),E.appendChild(y.svgs[A]);y=null}return x.asString?new i.XMLSerializer().serializeToString(S):S}function I(b,x,S){var E=m[b._class],A=E&&E(b,x);if(A){var O=x.onExport;O&&(A=O(b,A,x)||A);var L=JSON.stringify(b._data);L&&L!=="{}"&&L!=="null"&&A.setAttribute("data-paper-data",L)}return A&&w(b,A,S)}function k(b){return b||(b={}),s=new K(b.precision),b}B.inject({exportSVG:function(b){return b=k(b),P(I(this,b,!0),b)}}),ye.inject({exportSVG:function(b){b=k(b);var x=this._children,S=this.getView(),E=h.pick(b.bounds,"view"),A=b.matrix||E==="view"&&S._matrix,O=A&&te.read([A]),L=E==="view"?new $([0,0],S.getViewSize()):E==="content"?B._getBounds(x,O,{stroke:!0}).rect:$.read([E],0,{readNull:!0}),R={version:"1.1",xmlns:pt.svg,"xmlns:xlink":pt.xlink};L&&(R.width=L.width,R.height=L.height,(L.x||L.x===0||L.y||L.y===0)&&(R.viewBox=s.rectangle(L)));var F=pt.create("svg",R,s),U=F;O&&!O.isIdentity()&&(U=F.appendChild(pt.create("g",e(O),s)));for(var G=0,V=x.length;G<V;G++)U.appendChild(I(x[G],b,!0));return P(F,b)}})},new function(){var s={},e;function t(x,S,E,A,O,L){var R=pt.get(x,S)||L,F=R==null?A?null:E?"":0:E?R:parseFloat(R);return/%\s*$/.test(R)?F/100*(O?1:e[/x|^width/.test(S)?"width":"height"]):F}function r(x,S,E,A,O,L,R){return S=t(x,S||"x",!1,A,O,L),E=t(x,E||"y",!1,A,O,R),A&&(S==null||E==null)?null:new D(S,E)}function o(x,S,E,A,O){return S=t(x,S||"width",!1,A,O),E=t(x,E||"height",!1,A,O),A&&(S==null||E==null)?null:new ee(S,E)}function l(x,S,E){return x==="none"?null:S==="number"?parseFloat(x):S==="array"?x?x.split(/[\s,]+/g).map(parseFloat):[]:S==="color"?I(x)||x:S==="lookup"?E[x]:x}function c(x,S,E,A){var O=x.childNodes,L=S==="clippath",R=S==="defs",F=new Te,U=F._project,G=U._currentStyle,V=[];if(!L&&!R&&(F=P(F,x,A),U._currentStyle=F._style.clone()),A)for(var j=x.querySelectorAll("defs"),Q=0,Z=j.length;Q<Z;Q++)k(j[Q],E,!1);for(var Q=0,Z=O.length;Q<Z;Q++){var Y=O[Q],re;Y.nodeType===1&&!/^defs$/i.test(Y.nodeName)&&(re=k(Y,E,!1))&&!(re instanceof qe)&&V.push(re)}return F.addChildren(V),L&&(F=P(F.reduce(),x,A)),U._currentStyle=G,(L||R)&&(F.remove(),F=null),F}function d(x,S){for(var E=x.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),A=[],O=0,L=E.length;O<L;O+=2)A.push(new D(parseFloat(E[O]),parseFloat(E[O+1])));var R=new Se(A);return S==="polygon"&&R.closePath(),R}function p(x){return Oe.create(x.getAttribute("d"))}function _(x,S){var E=(t(x,"href",!0)||"").substring(1),A=S==="radialgradient",O;if(E)O=s[E].getGradient(),O._radial^A&&(O=O.clone(),O._radial=A);else{for(var L=x.childNodes,R=[],F=0,U=L.length;F<U;F++){var G=L[F];G.nodeType===1&&R.push(P(new oi,G))}O=new Wt(R,A)}var V,j,Q,Z=t(x,"gradientUnits",!0)!=="userSpaceOnUse";A?(V=r(x,"cx","cy",!1,Z,"50%","50%"),j=V.add(t(x,"r",!1,!1,Z,"50%"),0),Q=r(x,"fx","fy",!0,Z)):(V=r(x,"x1","y1",!1,Z,"0%","0%"),j=r(x,"x2","y2",!1,Z,"100%","0%"));var Y=P(new We(O,V,j,Q),x);return Y._scaleToBounds=Z,null}var m={"#document":function(x,S,E,A){for(var O=x.childNodes,L=0,R=O.length;L<R;L++){var F=O[L];if(F.nodeType===1)return k(F,E,A)}},g:c,svg:c,clippath:c,polygon:d,polyline:d,path:p,lineargradient:_,radialgradient:_,image:function(x){var S=new He(t(x,"href",!0));return S.on("load",function(){var E=o(x);this.setSize(E);var A=r(x).add(E.divide(2));this._matrix.append(new te().translate(A))}),S},symbol:function(x,S,E,A){return new qe(c(x,S,E,A),!0)},defs:c,use:function(x){var S=(t(x,"href",!0)||"").substring(1),E=s[S],A=r(x);return E?E instanceof qe?E.place(A):E.clone().translate(A):null},circle:function(x){return new Ve.Circle(r(x,"cx","cy"),t(x,"r"))},ellipse:function(x){return new Ve.Ellipse({center:r(x,"cx","cy"),radius:o(x,"rx","ry")})},rect:function(x){return new Ve.Rectangle(new $(r(x),o(x)),o(x,"rx","ry"))},line:function(x){return new Se.Line(r(x,"x1","y1"),r(x,"x2","y2"))},text:function(x){var S=new Kt(r(x).add(r(x,"dx","dy")));return S.setContent(x.textContent.trim()||""),S},switch:c};function w(x,S,E,A){if(x.transform){for(var O=(A.getAttribute(E)||"").split(/\)\s*/g),L=new te,R=0,F=O.length;R<F;R++){var U=O[R];if(!U)break;for(var G=U.split(/\(\s*/),V=G[0],j=G[1].split(/[\s,]+/g),Q=0,Z=j.length;Q<Z;Q++)j[Q]=parseFloat(j[Q]);switch(V){case"matrix":L.append(new te(j[0],j[1],j[2],j[3],j[4],j[5]));break;case"rotate":L.rotate(j[0],j[1]||0,j[2]||0);break;case"translate":L.translate(j[0],j[1]||0);break;case"scale":L.scale(j);break;case"skewX":L.skew(j[0],0);break;case"skewY":L.skew(0,j[0]);break}}x.transform(L)}}function y(x,S,E){var A=E==="fill-opacity"?"getFillColor":"getStrokeColor",O=x[A]&&x[A]();O&&O.setAlpha(parseFloat(S))}var v=h.set(h.each(It,function(x){this[x.attribute]=function(S,E){if(S[x.set]&&(S[x.set](l(E,x.type,x.fromSVG)),x.type==="color")){var A=S[x.get]();if(A&&A._scaleToBounds){var O=S.getBounds();A.transform(new te().translate(O.getPoint()).scale(O.getSize()))}}}},{}),{id:function(x,S){s[S]=x,x.setName&&x.setName(S)},"clip-path":function(x,S){var E=I(S);if(E)if(E=E.clone(),E.setClipMask(!0),x instanceof Te)x.insertChild(0,E);else return new Te(E,x)},gradientTransform:w,transform:w,"fill-opacity":y,"stroke-opacity":y,visibility:function(x,S){x.setVisible&&x.setVisible(S==="visible")},display:function(x,S){x.setVisible&&x.setVisible(S!==null)},"stop-color":function(x,S){x.setColor&&x.setColor(S)},"stop-opacity":function(x,S){x._color&&x._color.setAlpha(parseFloat(S))},offset:function(x,S){if(x.setOffset){var E=S.match(/(.*)%$/);x.setOffset(E?E[1]/100:parseFloat(S))}},viewBox:function(x,S,E,A,O){var L=new $(l(S,"array")),R=o(A,null,null,!0),F,U;if(x instanceof Te){var G=R?R.divide(L.getSize()):1,U=new te().scale(G).translate(L.getPoint().negate());F=x}else x instanceof qe&&(R&&L.setSize(R),F=x._item);if(F){if(C(A,"overflow",O)!=="visible"){var V=new Ve.Rectangle(L);V.setClipMask(!0),F.addChild(V)}U&&F.transform(U)}}});function C(x,S,E){var A=x.attributes[S],O=A&&A.value;if(!O&&x.style){var L=h.camelize(S);O=x.style[L],!O&&E.node[L]!==E.parent[L]&&(O=E.node[L])}return O?O==="none"?null:O:a}function P(x,S,E){var A=S.parentNode,O={node:Xe.getStyles(S)||{},parent:!E&&!/^defs$/i.test(A.tagName)&&Xe.getStyles(A)||{}};return h.each(v,function(L,R){var F=C(S,R,O);x=F!==a&&L(x,F,R,S,O)||x}),x}function I(x){var S=x&&x.match(/\((?:["'#]*)([^"')]+)/),E=S&&S[1],A=E&&s[u?E.replace(u.location.href.split("#")[0]+"#",""):E];return A&&A._scaleToBounds&&(A=A.clone(),A._scaleToBounds=!0),A}function k(x,S,E){var A=x.nodeName.toLowerCase(),O=A!=="#document",L=g.body,R,F,U;E&&O&&(e=nt.getView().getSize(),e=o(x,null,null,!0)||e,R=pt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),F=x.parentNode,U=x.nextSibling,R.appendChild(x),L.appendChild(R));var G=nt.settings,V=G.applyMatrix,j=G.insertItems;G.applyMatrix=!1,G.insertItems=!1;var Q=m[A],Z=Q&&Q(x,A,S,E)||null;if(G.insertItems=j,G.applyMatrix=V,Z){O&&!(Z instanceof Te)&&(Z=P(Z,x,E));var Y=S.onImport,re=O&&x.getAttribute("data-paper-data");Y&&(Z=Y(x,Z,S)||Z),S.expandShapes&&Z instanceof Ve&&(Z.remove(),Z=Z.toPath()),re&&(Z._data=JSON.parse(re))}return R&&(L.removeChild(R),F&&(U?F.insertBefore(x,U):F.appendChild(x))),E&&(s={},Z&&h.pick(S.applyMatrix,V)&&Z.matrix.apply(!0,!0)),Z}function b(x,S,E){if(!x)return null;S=typeof S=="function"?{onLoad:S}:S||{};var A=nt,O=null;function L(G){try{var V=typeof G=="object"?G:new i.DOMParser().parseFromString(G.trim(),"image/svg+xml");if(!V.nodeName)throw V=null,new Error("Unsupported SVG source: "+x);nt=A,O=k(V,S,!0),(!S||S.insert!==!1)&&E._insertItem(a,O);var j=S.onLoad;j&&j(O,G)}catch(Q){R(Q)}}function R(G,V){var j=S.onError;if(j)j(G,V);else throw new Error(G)}if(typeof x=="string"&&!/^[\s\S]*</.test(x)){var F=g.getElementById(x);F?L(F):ir.request({url:x,async:!0,onLoad:L,onError:R})}else if(typeof File!="undefined"&&x instanceof File){var U=new FileReader;return U.onload=function(){L(U.result)},U.onerror=function(){R(U.error)},U.readAsText(x)}else L(x);return O}B.inject({importSVG:function(x,S){return b(x,S,this)}}),ye.inject({importSVG:function(x,S){return this.activate(),b(x,S,this)}})};var nt=new(M.inject(h.exports,{Base:h,Numerical:X,Key:on,DomEvent:tt,DomElement:Xe,document:g,window:u,Symbol:qe,PlacedSymbol:ht}));return nt.agent.node&&ro(nt),typeof a=="function"&&a.amd?a("paper",nt):n&&(n.exports=nt),nt}).call(Mu,typeof self=="object"?self:null)})(Rf);var Bl=Rf.exports;const M_={text:!1,trimmedCurve:!1,circle:!1,circleArc:!1,ellipse:!1,ellipseArc:!1,shape:!1,component:!1,line:!1,printIdMap:!1,highlightIds:!1};function qn(){return M_}const R_={text:{red:0,green:0,blue:1,alpha:.5},trimmedCurve:{red:0,green:1,blue:0,alpha:.5},circle:{red:1,green:1,blue:0,alpha:.5},circleArc:{red:1,green:1,blue:0,alpha:.5},ellipse:{red:1,green:1,blue:0,alpha:.5},ellipseArc:{red:1,green:1,blue:0,alpha:.5},component:{red:.5,green:1,blue:1,alpha:.5},shape:{red:1,green:.5,blue:1,alpha:.5},line:{red:1,green:0,blue:0,alpha:.5}};function Kn(){return R_}function Qn(n,i,a,u,g=0,h=0,T,M,z){var W;if((W=n==null?void 0:n.Extent)!=null&&W.length){const K=n.Extent[0].Max[0].x.valueAsNumber,X=n.Extent[0].Min[0].x.valueAsNumber,ne=(K-X)*i<1?1:(K-X)*i,D=n.Extent[0].Max[0].y.valueAsNumber,ue=n.Extent[0].Min[0].y.valueAsNumber,ee=(D-ue)*i<1?1:(D-ue)*i,ce=g*i+X*i,$=u*i-(D+h)*i;if(T){const J=wt().Shape,te=wt().Size,pe=wt().Color,ye=new te(ne,ee),B=new J.Rectangle(new Bl.Point(ce,$),ye);B.fillColor=new pe(M),B.onClick=()=>{z.publicEvent("onClick",n)},B.bringToFront()}return[ce,$,ne,ee]}else return[0,0,0,0]}function D_(n,i,a,u,g=0,h=0,T,M,z){var ue,ee,ce;const W=wt().Point,K=wt().Path,X=wt().Color,ne=[];if(!Array.isArray(n.Coordinate)||n.Coordinate.length===0){((ue=n.numPoints)==null?void 0:ue.valueAsNumber)!==0&&console.warn("line element without coordinate");return}n.Coordinate.forEach($=>{const J=$.x.valueAsNumber+g,te=$.y.valueAsNumber+h,pe=new W(J*i,u*i-te*i);ne.push(pe)});const D=new K(ne);switch(D.strokeColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value}),(ee=n.Presentation[0].lineType)==null?void 0:ee.valueAsString){case"0":break;case"Solid":break;case"1":D.dashArray=[.3,.3];case"Dotted":D.dashArray=[.3,.3];break;case"2":D.dashArray=[2,.5];case"Dashed":D.dashArray=[2,.5];break;case"3":D.dashArray=[4,.5];case"Long Dash":D.dashArray=[4,.5];break;case"4":D.dashArray=[4,.5,1,.5];break;case"Long Dash + Short Dash, CenterLine":D.dashArray=[15,1,.5,1,.5,1];break;case"5":D.dashArray=[1,.5];break;case"Short Dash":D.dashArray=[1,.5];break;case"6":D.dashArray=[4,.5,1,.5,1,.5];break;case"Long Dash + Short Dash + Short Dash":D.dashArray=[4,1,1,1,1,1];break;case"7":D.dashArray=[2,.5,1,.5];break;case"Dash + Short Dash":D.dashArray=[2,.5,1,.5];break;default:((ce=n.Presentation[0].lineType)==null?void 0:ce.valueAsString)!==void 0&&console.error("unknown linetype",n)}D.strokeWidth=n.Presentation[0].lineWeight.valueAsNumber*i,T?T.addChild(D):D.onClick=function(){z.publicEvent("onClick",n)},Qn(n,i,a,u,g,h,qn().line,Kn().line,z)}function z_(n,i,a,u,g=0,h=0,T,M,z){const W=wt().Point,K=wt().Path,X=wt().Color,ne=[];n.Coordinate.forEach(ue=>{const ee=ue.x.valueAsNumber+g,ce=ue.y.valueAsNumber+h,$=new W(ee*i,u*i-ce*i);ne.push($)});const D=new K(ne);T?T.addChild(D):D.onClick=function(){z.publicEvent("onClick",n)},D.strokeColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value}),D.strokeWidth=n.Presentation[0].lineWeight.valueAsNumber*i,n.filled&&(D.fillColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value})),Qn(n,i,a,u,g,h,qn().shape,Kn().shape,z)}function F_(n,i,a,u,g=0,h=0,T,M,z){var ce;const W=wt().Point,K=wt().Path,X=wt().Color,ne=n.Position[0].Location[0].x.valueAsNumber+g,D=n.Position[0].Location[0].y.valueAsNumber+h,ue=new W(ne*i,u*i-D*i),ee=new K.Circle(ue,n.radius.valueAsNumber*i);T?T.addChild(ee):ee.onClick=function(){z.publicEvent("onClick",n)},ee.strokeColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value}),ee.strokeWidth=n.Presentation[0].lineWeight.valueAsNumber*i,(ce=n.filled)!=null&&ce.value&&(ee.fillColor=new X("black")),Qn(n,i,a,u,g,h,qn().circle,Kn().circleArc,z)}function B_(n,i,a,u,g=0,h=0,T,M,z){var ht,qe,st,Ee,bt,oe,ct,Oe,Se,Be,lt,ut,zt,Kt;const W=wt().PointText,K=wt().Point,X=wt().Color,ne=wt().Shape,D=wt().Size;let ue=!0;if(!((ht=n.Position[0])!=null&&ht.Location)){console.warn("unexpected missing location element on text, skipping text",(qe=n==null?void 0:n.string)==null?void 0:qe.valueAsString,n);return}if((st=n.Extent[0])!=null&&st.Max||(ue=!1),!n.Presentation[0]){console.warn("unexpected missing Presentation element on text, skipping text",(Ee=n==null?void 0:n.string)==null?void 0:Ee.valueAsString,n);return}if((bt=n.Presentation[0].layer)!=null&&bt.valueAsString.toUpperCase().includes("HIDDEN"))return;const[ee,ce,$,J]=Qn(n,i,a,u,g,h,qn().text,Kn().text,z),te=(n.Position[0].Location[0].x.valueAsNumber+g)*i,pe=u*i-(n.Position[0].Location[0].y.valueAsNumber+h)*i,ye=new K(te,pe),B=new D($,J),Te=new ne.Rectangle(new K(ee,ce),B),ke=new W(new K(te,pe));if(ke.content=(oe=n.string)==null?void 0:oe.valueAsString,ke.content==="undefined"&&n.attributes.DependantAttribute&&n.attributes.ItemID){const We=b_(n.attributes.ItemID);We&&We.GenericAttributes.forEach(Wt=>{Wt.GenericAttribute.forEach(oi=>{`[${oi.attributes.Name}]`===n.attributes.DependantAttribute&&(ke.content=oi.attributes.Value)})}),ke.content==="undefined"&&console.warn("dependable attribute:",n.attributes.DependantAttribute,"not found in ",n)}ke.fontSize=n.height.valueAsNumber*i,ke.fontFamily=n.font.valueAsString,((ct=n.textAngle)==null?void 0:ct.valueAsNumber)>0&&ke.rotate(-n.textAngle.valueAsNumber,new K(te,pe)),((Oe=n.slantAngle)==null?void 0:Oe.valueAsNumber)>0&&console.warn("Text slantAngle not implemented",n);const Ve=(lt=(Be=(Se=n.Position[0])==null?void 0:Se.Reference[0])==null?void 0:Be.x)==null?void 0:lt.valueAsNumber;Ve&&Ve!==1&&ke.rotate(-(Ve/(Math.PI/180))*Math.PI,ye);const He=(Kt=(zt=(ut=n.Position[0])==null?void 0:ut.Reference[0])==null?void 0:zt.y)==null?void 0:Kt.valueAsNumber;if(He&&He!==0&&ke.rotate(-(He/(Math.PI/90))*Math.PI,ye),ue&&(ke.bounds.y=Te.bounds.y,ke.bounds.x=Te.bounds.x,ke.fitBounds(Te.bounds)),ke.fillColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value}),!ue){const We=n.justification.value;We=="CenterCenter"&&(ke.bounds.x=ke.bounds.x-ke.bounds.width/2,ke.bounds.y=ke.bounds.y+ke.bounds.height/2),We=="RightTop"&&(ke.bounds.x=ke.bounds.x-ke.bounds.width,ke.bounds.y=ke.bounds.y+ke.bounds.height),We=="CenterTop"&&(ke.bounds.x=ke.bounds.x-ke.bounds.width/2,ke.bounds.y=ke.bounds.y+ke.bounds.height)}T?T.addChild(ke):ke.onClick=function(){z.publicEvent("onClick",n)}}function V_(n,i,a,u,g=0,h=0,T,M,z){Lf(n).forEach(K=>{var X,ne,D,ue;if(K.element.tagName==="Circle"){const ee=wt().Point,ce=wt().Path,$=wt().Color,J=K,te=J.Position[0].Location[0].x.valueAsNumber+g,pe=J.Position[0].Location[0].y.valueAsNumber+h,ye=J.Position[0].Reference[0].x.valueAsNumber,B=J.Position[0].Reference[0].y.valueAsNumber,Te=J.Position[0].Axis[0].y.valueAsNumber===-1,ke=new ee(te*i,u*i-pe*i),Ve=J.radius.valueAsNumber*i,He=-((X=n.startAngle)==null?void 0:X.valueAsNumber)||0,ht=-((ne=n.endAngle)==null?void 0:ne.valueAsNumber)||0,qe=new ee(Ve,0);qe.angle=He;const st=new ee(Ve,0);st.angle=ht;const Ee=new ee(Ve,0),bt=ht-He;Ee.angle=He+bt/2;const oe=new ce.Arc(qe,Ee,st);oe.strokeColor=new $({red:J.Presentation[0].r.value,green:J.Presentation[0].g.value,blue:J.Presentation[0].b.value}),oe.strokeWidth=J.Presentation[0].lineWeight.valueAsNumber*i,oe.translate(ke),ye<0&&oe.rotate(ye/(Math.PI/180)*Math.PI,ke),B&&B!==0&&oe.rotate(-(B/(Math.PI/90))*Math.PI,ke),Te&&console.log("not implented flipY",n,ye,B,Te),T?T.addChild(oe):oe.onClick=function(){console.log(n)},Qn(J,i,a,u,g,h,qn().circleArc,Kn().circleArc,z)}if(K.element.tagName==="Ellipse"){const ee=wt().Point,ce=wt().Path,$=wt().Color,J=K,te=J.Position[0].Location[0].x.valueAsNumber+g,pe=J.Position[0].Location[0].y.valueAsNumber+h,ye=J.Position[0].Reference[0].x.valueAsNumber,B=J.Position[0].Reference[0].y.valueAsNumber,Te=new ee(te*i,u*i-pe*i),ke=J.primaryAxis.valueAsNumber*i,Ve=((D=n.startAngle)==null?void 0:D.valueAsNumber)||0,He=((ue=n.endAngle)==null?void 0:ue.valueAsNumber)||0,ht=new ee(ke,0);ht.angle=Ve;const qe=new ee(ke,0);qe.angle=He;const st=new ee(ke,0),Ee=He-Ve;st.angle=Ve+Ee/2;const bt=new ce.Arc(ht,st,qe);bt.strokeColor=new $({red:J.Presentation[0].r.value,green:J.Presentation[0].g.value,blue:J.Presentation[0].b.value}),bt.strokeWidth=J.Presentation[0].lineWeight.valueAsNumber*i,bt.translate(Te),bt.scale(1,J.secondaryAxis.valueAsNumber*i/ke,Te),ye<0&&bt.rotate(ye/(Math.PI/180)*Math.PI,Te),B&&B!==0&&bt.rotate(-(B/(Math.PI/90))*Math.PI,Te);const oe=J.Position[0].Axis[0].z.valueAsNumber===-1;oe&&console.log("not implented flipY",n,ye,B,oe),T?T.addChild(bt):bt.onClick=function(){z.publicEvent("onClick",n)},Qn(J,i,a,u,g,h,qn().ellipseArc,Kn().ellipseArc,z)}})}function H_(n,i,a,u,g=0,h=0,T,M,z){var B,Te,ke,Ve,He,ht,qe;const W=wt().Point,K=wt().Path,X=wt().Color,ne=wt().Size,D=wt().Rectangle,ue=n.Position[0].Location[0].x.valueAsNumber+g,ee=n.Position[0].Location[0].y.valueAsNumber+h,ce=new W(ue*i,u*i-ee*i),$=new D(ce,new ne(n.primaryAxis.valueAsNumber*i,n.secondaryAxis.valueAsNumber*i)),J=new K.Ellipse($),te=(ke=(Te=(B=n.Position[0])==null?void 0:B.Reference[0])==null?void 0:Te.x)==null?void 0:ke.valueAsNumber;te&&te!==1&&J.rotate(-(te/(Math.PI/180))*Math.PI,ce);const pe=(ht=(He=(Ve=n.Position[0])==null?void 0:Ve.Reference[0])==null?void 0:He.y)==null?void 0:ht.valueAsNumber;pe&&pe!==0&&J.rotate(-(pe/(Math.PI/90))*Math.PI,ce);const ye=n.Position[0].Axis[0].z.valueAsNumber===-1;ye&&console.log("not implented flipY",n,te,pe,ye),T?T.addChild(J):J.onClick=function(){z.publicEvent("onClick",n)},J.strokeColor=new X({red:n.Presentation[0].r.value,green:n.Presentation[0].g.value,blue:n.Presentation[0].b.value}),J.strokeWidth=n.Presentation[0].lineWeight.valueAsNumber*i,(qe=n.filled)!=null&&qe.value&&(J.fillColor=new X("black")),Qn(n,i,a,u,g,h,qn().circle,Kn().circleArc,z)}class Vu{constructor(i,a,u){Ft(this,"isChild",!0);Ft(this,"tagName");Ft(this,"elementTagName");Ft(this,"attributes",{});Ft(this,"GenericAttributes",[]);Ft(this,"shapeCatalogItem");Ft(this,"GenericAttribute",[]);Ft(this,"genericAttributes",{});Ft(this,"componentName");Ft(this,"iD");Ft(this,"Position",[]);Ft(this,"Extent",[]);Ft(this,"Presentation",[]);Ft(this,"Scale",[]);var h,T,M;this.element=i,this.isShapeCatalogChild=a,this.parent=u,this.elementTagName=this.element.tagName,this.elementTagName==="ShapeCatalogue"&&(this.isShapeCatalogChild=!0);for(let z=0;z<this.element.children.length;z++){const W=this.element.children[z],K=W.tagName,X=this;X[K]||(X[K]=[]);const ne=new Vu(W,this.isShapeCatalogChild,this);X[K].push(ne)}i.getAttributeNames().forEach(z=>{const W=this,K=z[0].toLowerCase()+z.substring(1,z.length);W[K]=new E_(i,z,this)}),this.GenericAttribute.length&&this.GenericAttribute.forEach(z=>{this.genericAttributes[z.attributes.Name]=z.attributes.Value}),this.GenericAttributes.length&&this.GenericAttributes.forEach((z,W)=>{this.genericAttributes[`${W+1}: ${z.attributes.Set||""}`]=z.genericAttributes}),this.elementTagName!=="ShapeCatalogue"&&this.isShapeCatalogChild&&(h=this.componentName)!=null&&h.value&&k_((T=this.componentName)==null?void 0:T.value,this),(M=this.iD)!=null&&M.valueAsString&&C_(this.iD.valueAsString,this)}draw(i,a,u,g=0,h=0,T,M,z){var K,X,ne,D,ue,ee,ce,$,J,te,pe,ye,B,Te,ke,Ve,He,ht,qe,st;if(this.elementTagName==="ShapeCatalogue")return;if(this.elementTagName==="TrimmedCurve"){V_(this,i,a,u,g,h,T,M,z);return}if(Lf(this).forEach(Ee=>{Ee.draw(i,a,u,g,h,T,this,z)}),(K=this.componentName)!=null&&K.value&&((X=this.Position)!=null&&X.length)){const Ee=N_(this.componentName.value);if(Ee&&Ee!==this){const bt=wt().Group,oe=new bt;this.shapeCatalogItem=Ee;const ct=this;oe.onClick=function(){z.publicEvent("onClick",ct)};const Oe=this.Position[0].Location[0].x.valueAsNumber+g,Se=this.Position[0].Location[0].y.valueAsNumber+h,Be=new Bl.Point(Oe*i,u*i-Se*i);if(typeof Ee.draw=="function"&&Ee.draw(i,a,u,Oe+g,Se+h,oe,this,z),this.Scale.length){const Kt=parseFloat(this.Scale[0].attributes.X),We=parseFloat(this.Scale[0].attributes.Y);(Kt!==1||We!==1)&&oe.scale(Kt,We,Be)}const lt=(ue=(D=(ne=this.Position[0])==null?void 0:ne.Reference[0])==null?void 0:D.x)==null?void 0:ue.valueAsNumber;lt&&lt!==1&&oe.rotate(-(lt/(Math.PI/180))*Math.PI,Be);const ut=($=(ce=(ee=this.Position[0])==null?void 0:ee.Reference[0])==null?void 0:ce.y)==null?void 0:$.valueAsNumber;ut&&ut!==0&&oe.rotate(-(ut/(Math.PI/90))*Math.PI,Be),((pe=(te=(J=this.Position[0])==null?void 0:J.Axis[0])==null?void 0:te.z)==null?void 0:pe.valueAsNumber)===-1&&oe.scale(1,-1,Be),Qn(this,i,a,u,g,h,qn().component,Kn().component,z)}else if(T){const bt=this.Position[0].Location[0].x.valueAsNumber+g,oe=this.Position[0].Location[0].y.valueAsNumber+h,ct=new Bl.Point(bt*i,u*i-oe*i);if(this.Scale.length){const lt=parseFloat(this.Scale[0].attributes.X),ut=parseFloat(this.Scale[0].attributes.Y);(lt!==1||ut!==1)&&T.scale(lt,ut,ct)}const Oe=(Te=(B=(ye=this.Position[0])==null?void 0:ye.Reference[0])==null?void 0:B.x)==null?void 0:Te.valueAsNumber;Oe&&Oe!==1&&T.rotate(-(Oe/(Math.PI/180))*Math.PI,ct);const Se=(He=(Ve=(ke=this.Position[0])==null?void 0:ke.Reference[0])==null?void 0:Ve.y)==null?void 0:He.valueAsNumber;Se&&Se!==0&&T.rotate(-(Se/(Math.PI/90))*Math.PI,ct),((st=(qe=(ht=this.Position[0])==null?void 0:ht.Axis[0])==null?void 0:qe.z)==null?void 0:st.valueAsNumber)===-1&&T.scale(1,-1,ct)}}(this.elementTagName==="Line"||this.elementTagName==="PolyLine"||this.elementTagName==="CenterLine")&&D_(this,i,a,u,g,h,T,M,z),this.elementTagName==="BsplineCurve"&&console.warn("BsplineCurve not implemented",this),this.elementTagName==="CompositeCurve"&&console.warn("CompositeCurve not implemented",this),this.elementTagName==="Circle"&&F_(this,i,a,u,g,h,T,M,z),this.elementTagName==="Ellipse"&&H_(this,i,a,u,g,h,T,M,z),this.elementTagName==="Shape"&&z_(this,i,a,u,g,h,T,M,z),this.elementTagName==="Text"&&B_(this,i,a,u,g,h,T,M,z)}}class U_{constructor(i,a){Ft(this,"xml");Ft(this,"canvas");Ft(this,"PlantModel");Ft(this,"root");Ft(this,"subscribers",new Set);this.root=!0,this.xml=new window.DOMParser().parseFromString(i,"text/xml"),this.canvas=document.getElementById(a),x_(),O_(a);const u=this.xml.getElementsByTagName("PlantModel")[0];if(!u){alert("missing plantmodel");return}this.PlantModel=new Vu(u,!1)}getSchemaLocation(){const i=this.xml.getElementsByTagName("PlantModel")[0];if(i){const a=i.getAttribute("xsi:schemaLocation");if(a)return a;const u=i.getAttribute("xsi:noNamespaceSchemaLocation");if(u)return u}return null}getSchemaVersion(){const i=this.xml.getElementsByTagName("PlantInformation")[0];if(i){const a=i.getAttribute("SchemaVersion");if(a)return a}return null}addEventListener(i){this.subscribers.add(i)}removeEventListener(i){this.subscribers.delete(i)}publicEvent(i,a){this.subscribers.forEach(u=>{u.handleEvent({type:i,data:a})})}draw(){var M,z,W,K,X,ne,D;wt().project.activeLayer.removeChildren(),wt().view.requestUpdate();const i=["Metre","mm","Millimetre","m"],a=this.PlantModel.PlantInformation[0].units.value;i.includes(a)||console.warn("I need to add more here",this.PlantModel.PlantInformation[0].units.value);let u=1.5;switch(!0){case a==="Metre":u=1500;break;case a==="m":u=1500;break}if(!Array.isArray(this.PlantModel.Drawing)||this.PlantModel.Drawing[0].length===0){const ue=(z=(M=this.PlantModel.Extent[0])==null?void 0:M.Max[0])==null?void 0:z.x.valueAsNumber,ee=(K=(W=this.PlantModel.Extent[0])==null?void 0:W.Max[0])==null?void 0:K.y.valueAsNumber;u===1.5?(console.warn(`No drawing element, using x:${ue|1261.5}, y:${ee|891}`,this.PlantModel),this.PlantModel.draw(u,ue||1261.5,ee||891,0,0)):(console.warn(`No drawing element, using x:${ue|.12615}, y:${ee|.891}`,this.PlantModel),this.PlantModel.draw(u,ue||.12615,ee||.891,0,0));return}const g=(X=this.PlantModel.Drawing[0])==null?void 0:X.Presentation[0];(ne=g==null?void 0:g.attributes)!=null&&ne.Color?this.canvas.style.backgroundColor=(D=g==null?void 0:g.attributes)==null?void 0:D.Color:this.canvas.style.backgroundColor="white";const h=this.PlantModel.Drawing[0].Extent[0].Max[0].x.valueAsNumber,T=this.PlantModel.Drawing[0].Extent[0].Max[0].y.valueAsNumber;this.PlantModel.draw(u,h,T,0,0,null,this,this)}}const Os={EQUAL:"equal_to",LESS_THAN_OR_EQUAL_TO:"less_or_equal",GREATER_THAN_OR_EQUAL_TO:"greater_than_or_equal",LESS_THAN:"less_than",GREATER_THAN:"greater_than",CONTAINS:"contains",NOT_EQUAL_TO:"not_equal_to",DOES_NOT_CONTAIN:"does_not_contain",BEGIN_WITH:"start_with",END_WITH:"end_with",IN:"IN",NOT_IN:"NOT_IN",IS_BLANK:"IS_BLANK",IS_NOT_BLANK:"IS_NOT_BLANK"};class G_{constructor(i,a=!1){this.__editedProps={},this.__originalValues={},this.__currentValues={},this.__newprops={},this.__isNew=!1,this.__edited=!1,this.__KEYSTRING=i,this.__isNew=a}get(i,a){return a==="__controller"?this:["__KEY","__group","__groupID","__groupName","__groupLvl","__groupTotal","__groupChildren","__groupExpanded"].indexOf(a)>-1?a==="__KEY"&&this.__KEYSTRING?i[this.__KEYSTRING]:this[a]:i[a]}set(i,a,u){let g=!0;if(a[0]==="_"&&a[1]==="_"&&(g=!1,["__KEY","__group","__groupID","__groupName","__groupLvl","__groupTotal","__groupChildren","__groupExpanded"].indexOf(a)>-1))if(a==="__KEY"){if(this.__KEYSTRING)return i[this.__KEYSTRING]=u;this[a]=u}else this[a]=u;if(g){this.__newprops.hasOwnProperty(a)||(this.__originalValues[a]=i[a],this.__newprops[a]=!0),!this.__editedProps.hasOwnProperty(a)&&!this.__isNew?(this.__originalValues[a]=i[a],this.__editedProps[a]=!0):this.__editedProps[a]=!0;let h=this.__originalValues[a],T=u;if(h instanceof Date)try{h=new Date(new Date(h).getFullYear(),new Date(h).getMonth(),new Date(h).getDate(),0,0,0,0)}catch(M){h=null}T instanceof Date&&(T=new Date(new Date(T).getFullYear(),new Date(T).getMonth(),new Date(T).getDate(),0,0,0,0)),(h===T||h==null&&T==="")&&(this.__editedProps[a]=!1),this.__currentValues[a]=u,i[a]=u,this.__edited=Object.values(this.__editedProps).includes(!0),this.__currentValues[a]=u,i[a]=u}return!0}}function ic(n,i){let a=!0,u,g,h=i.operator,T,M=i.type||"text";if(i.value instanceof Date&&(M="date"),Number(i.value)===i.value&&(M="number"),u=n[i.attribute],h==="IS_BLANK")return!!(M==="date"&&u&&typeof u=="object"&&u.toString&&u.toString()==="Invalid Date"||u===""||u===0||u===null||u===void 0);if(h==="IS_NOT_BLANK")return!(M==="date"&&u&&typeof u=="object"&&u.toString&&u.toString()==="Invalid Date"||u===""||u===0||u===null||u===void 0);const z={true:!0,false:!1};switch(M){case"date":try{u=new Date(new Date(u).getFullYear(),new Date(u).getMonth(),new Date(u).getDate(),0,0,0,0),u=u.getTime()}catch(W){u=u}try{g=new Date(new Date(i.value).getFullYear(),new Date(i.value).getMonth(),new Date(i.value).getDate(),0,0,0,0),g=g.getTime()}catch(W){g=i.value}h==="END_WITH"&&(h="LESS_THAN_OR_EQUAL_TO"),h==="DOES_NOT_CONTAIN"&&(h="LESS_THAN"),h!=="EQUAL"&&h!=="NOT_EQUAL_TO"&&h!=="GREATER_THAN"&&h!=="GREATER_THAN_OR_EQUAL_TO"&&h!=="LESS_THAN"&&h!=="LESS_THAN_OR_EQUAL_TO"&&(h="GREATER_THAN_OR_EQUAL_TO");break;case"number":g=Number(i.value),g||(g=0);try{u=isNaN(Number(u))?0:Number(u)}catch(W){u=u}h==="END_WITH"&&(h="LESS_THAN_OR_EQUAL_TO"),h==="DOES_NOT_CONTAIN"&&(h="LESS_THAN"),h!=="EQUAL"&&h!=="NOT_EQUAL_TO"&&h!=="GREATER_THAN"&&h!=="GREATER_THAN_OR_EQUAL_TO"&&h!=="LESS_THAN"&&h!=="LESS_THAN_OR_EQUAL_TO"&&(h="GREATER_THAN_OR_EQUAL_TO");break;case"text":switch(u==null?u="":(u=u+"",u=u.toLowerCase()),g=i.value.toLowerCase(),h=h||"BEGIN_WITH",T=h,h){case"BEGIN_WITH":T="REGEX",g=new RegExp(`^${g.replace(/\*/g,".*").replace(/\%/g,".*")}.*`,"gim");break;case"CONTAINS":T="REGEX",g=new RegExp(`.*${g.replace(/\*/g,".*").replace(/\%/g,".*")}.*`,"gim");break;case"END_WITH":T="REGEX",g=new RegExp(`.*${g.replace(/\*/g,".*").replace(/\%/g,".*")}$`,"gim");break;case"DOES_NOT_CONTAIN":T="REGEX-NOT",g=new RegExp(`.*${g.replace(/\*/g,".*").replace(/\%/g,".*")}`,"gim");break;case"NOT_EQUAL_TO":T="REGEX-NOT";let W="";(g[0]!=="*"||g[0]!=="%")&&(W="^");let K="";(g[g.length]!=="*"||g[g.length]!=="%")&&(K="$"),g=new RegExp(`${W}${g.replace(/\*/g,".*").replace(/\%/g,".*")}${K}`,"gim");break;default:if(g.split("*").length>1||g.split("%").length>1){T="REGEX";let X="";(g[0]!=="*"||g[0]!=="%")&&(X="^");let ne="";(g[g.length]!=="*"||g[g.length]!=="%")&&(ne="$"),g=new RegExp(`${X}${g.replace(/\*/g,".*").replace(/\%/g,".*")}${ne}`,"gim")}}h!==T&&(h=T);break;case"boolean":g=z[i.value],h="EQUAL";break;default:try{u=u.toLowerCase()}catch(W){u=u}try{g=i.value.toLowerCase()}catch(W){g=i.value}h=h||"EQUAL";break}switch(h){case"REGEX":g.test(u)||(a=!1);break;case"REGEX-NOT":g.test(u)&&(a=!1);break;case"EQUAL":u!==g&&(a=!1);break;case"LESS_THAN_OR_EQUAL_TO":u<=g||(a=!1);break;case"GREATER_THAN_OR_EQUAL_TO":u>=g||(a=!1);break;case"LESS_THAN":u<g||(a=!1);break;case"GREATER_THAN":u>g||(a=!1);break;case"CONTAINS":u.indexOf(g)===-1&&(a=!1);break;case"NOT_EQUAL_TO":u===g&&(a=!1);break;case"DOES_NOT_CONTAIN":u.indexOf(g)!==-1&&(a=!1);break;case"BEGIN_WITH":u.substring(0,g.length)!==g&&(a=!1);break;case"END_WITH":u.substring(u.length-g.length,u.length)!==g&&(a=!1);break;default:u!==g&&(a=!1)}return a}class W_{constructor(){this.currentFilter=null}getFilter(){return this.currentFilter}setFilter(i){this.currentFilter=i}getFilterFromType(i){switch(i){case"date":case"number":return"GREATER_THAN";case"bool":return"EQUAL";default:return"BEGIN_WITH"}}filter(i,a,u){var g;this.currentFilter=a;const h=Array.isArray(a)&&a.length===0;return!a||h||(a==null?void 0:a.type)==="GROUP"&&Array.isArray(a==null?void 0:a.filterArguments)&&((g=a==null?void 0:a.filterArguments)===null||g===void 0?void 0:g.length)===0?i.slice():i.filter(M=>a.logicalOperator==="AND"?this.andStatement(M,a,u):this.orStatement(M,a,u))}orStatement(i,a,u){if(Array.isArray(a.filterArguments))for(let g=0;g<a.filterArguments.length;g++){const h=a.filterArguments[g];if(h.logicalOperator==="AND"&&this.andStatement(i,h,u)||h.logicalOperator==="OR"&&this.orStatement(i,h,u))return!0;if(h.logicalOperator==="NONE"||h.logicalOperator===null||h.logicalOperator==null){let T=h.value;h.valueType==="ATTRIBUTE"&&(typeof h.value=="string"?T=i[h.value]:console.error("filtervalue needs to be string if you are comparing attributes"));let M=!1;if(h.operator==="IN"||h.operator==="NOT_IN"){let z=h.value;if(!Array.isArray(h.value)){if(typeof h.value!="string")return!1;z=h.value.toUpperCase().split(`
`),h.value=z}let W;h.attributeType==="date"&&i?W=u.getDateFormater().fromDate(i[h.attribute]):h.attributeType==="number"&&i?W=u.getNumberFormater().fromNumber(i[h.attribute]):i&&i[h.attribute]!==null&&i[h.attribute]!==void 0&&(W=i&&i[h.attribute],W&&W.toUpperCase&&(W=W.toUpperCase()));let K;W==null||W===""||W===0?K=z.indexOf("NULL"):K=z.indexOf(W),K!==-1&&h.operator==="IN"&&(M=!0),K===-1&&h.operator==="NOT_IN"&&(M=!0)}else M=ic(i,{value:T,operator:h.operator,attribute:h.attribute,type:h.attributeType});if(M)return!0}}return!1}andStatement(i,a,u){if(Array.isArray(a.filterArguments))for(let g=0;g<a.filterArguments.length;g++){const h=a.filterArguments[g];if(h.logicalOperator==="AND"&&!this.andStatement(i,h,u)||h.logicalOperator==="OR"&&!this.orStatement(i,h,u))return!1;if(h.logicalOperator==="NONE"||h.logicalOperator===null||h.logicalOperator==null){let T=h.value;h.valueType==="ATTRIBUTE"&&(typeof h.value=="string"?T=i[h.value]:console.error("filtervalue needs to be string if you are comparing attributes"));let M=!1;if(h.operator==="IN"||h.operator==="NOT_IN"){let z=h.value;if(!Array.isArray(h.value)){if(typeof h.value!="string")return!1;z=h.value.toUpperCase().split(`
`),h.value=z}let W;h.attributeType==="date"&&i?W=u.getDateFormater().fromDate(i[h.attribute]):h.attributeType==="number"&&i?W=u.getNumberFormater().fromNumber(i[h.attribute]):i&&i[h.attribute]!==null&&i[h.attribute]!==void 0&&(W=i&&i[h.attribute],W&&W.toUpperCase&&(W=W.toUpperCase()));let K;W==null||W===""||W===0?K=z.indexOf("NULL"):K=z.indexOf(W),K!==-1&&h.operator==="IN"&&(M=!0),K===-1&&h.operator==="NOT_IN"&&(M=!0)}else M=ic(i,{value:T,operator:h.operator,attribute:h.attribute,type:h.attributeType});if(!M)return!1}}return!0}}class j_{constructor(){this.dates=[],this.lastSorting=[],this.currentSorting=[],this.localeCompareCode=null}setDateAttribute(i=[]){this.dates=i}setLocaleCompare(i,a){this.localeCompareCode=new Intl.Collator(i,a)}reset(i){i?(this.lastSorting=[{attribute:i,ascending:!0}],this.currentSorting=[{attribute:i,ascending:!0}]):(this.lastSorting=[],this.currentSorting=[])}overrideSort(i){this.lastSorting=i,this.currentSorting=i}getLastSort(){return this.lastSorting}setOrderBy(i,a){if(Array.isArray(i))this.lastSorting=i,this.currentSorting=i;else if(a&&this.lastSorting.length>0){this.currentSorting=this.lastSorting;let u=!1;this.currentSorting.forEach(g=>{g.attribute===i.attribute&&(u=!0,g.ascending=i.ascending)}),u||this.currentSorting.push(i),this.lastSorting=this.currentSorting}else this.currentSorting=[i],this.lastSorting=this.currentSorting}getOrderBy(){return this.currentSorting}runOrderBy(i){const a=this.getOrderBy();i.sort((u,g)=>{let h=0;for(let T=0;T<a.length&&h===0;++T){const M=a[T],z=this.dates.indexOf(M.attribute)!==-1,W=u[M.attribute]||"",K=g[M.attribute]||"",X=(ne,D)=>{let ue=null;return this.localeCompareCode?ue=this.localeCompareCode.compare(ne,D):ue=ne.localeCompare(D),ue};if(h=0,W!==K)if(M.ascending===!0)if(z){let ne=-1;W&&W.getTime&&(ne=new Date(new Date(W).getFullYear(),new Date(W).getMonth(),new Date(W).getDate(),0,0,0,0).getTime()||0);let D=0;K&&K.getTime&&(D=new Date(new Date(K).getFullYear(),new Date(K).getMonth(),new Date(K).getDate(),0,0,0,0).getTime()||0),ne<D&&(h=-1),ne>D&&(h=1)}else typeof W=="string"&&typeof W=="string"?X(W,K)<0&&X(W,K)!==0?h=-1:h=1:(W<K&&(h=-1),W>K&&(h=1));else if(z){let ne=-1;W&&W.getTime&&(ne=new Date(new Date(W).getFullYear(),new Date(W).getMonth(),new Date(W).getDate(),0,0,0,0).getTime()||0);let D=0;K&&K.getTime&&(D=new Date(new Date(K).getFullYear(),new Date(K).getMonth(),new Date(K).getDate(),0,0,0,0).getTime()||0),ne<D&&(h=1),ne>D&&(h=-1)}else typeof W=="string"&&typeof W=="string"?X(W,K)<0&&X(W,K)!==0?h=1:h=-1:(W<K&&(h=1),W>K&&(h=-1))}return h}),this.lastSorting=this.getOrderBy().slice(0)}}class q_{constructor(){this.groupingConfig=[],this.expandedGroupIDs=new Set([])}reset(){this.currentGroups=[],this.groupingConfig=[],this.expandedGroupIDs=new Set([])}group(i,a,u,g){if(a.length>0){u||(this.expandedGroupIDs=new Set([]));const h=[];return a.forEach((T,M)=>{if(M===0){const z=this.createMainGrouping(i,T.attribute,M,T.title,g);h.push(z)}else{const z=h[h.length-1],W=this.groupChildren(z,T.attribute,M,T.title,g);h.push(W)}}),this.currentGroups=h,this.groupingConfig=a,u?this.expandOneOrAll(null,this.expandedGroupIDs):h[0]}else return i.forEach(h=>{h.__groupLvl=0}),this.groupingConfig=[],i}getExpanded(){return Array.from(this.expandedGroupIDs)}setExpanded(i){this.expandedGroupIDs=new Set(i)}getGrouping(){return this.groupingConfig}setGrouping(i){this.groupingConfig=i}toUppercase(i){return i&&i[0].toUpperCase()+i.substring(1,i.length)}expandOneOrAll(i,a){let u=!i;i||a&&(u=!1),a||(a=new Set([]));const g=[],h=this.currentGroups[0],T=M=>{M.__groupChildren.forEach(z=>{switch(g.push(z),!0){case u:case z.__groupID===i:case a.has(z.__groupID):case(z.__groupID!==i&&z.__groupExpanded):z.__groupChildren&&(z.__groupExpanded=!0,this.expandedGroupIDs.add(z.__groupID),T(z));break}})};return h.forEach(M=>{switch(g.push(M),!0){case u:case M.__groupID===i:case a.has(M.__groupID):case(M.__groupID!==i&&M.__groupExpanded):M.__groupExpanded=!0,this.expandedGroupIDs.add(M.__groupID),M.__groupChildren&&T(M);break}}),g}collapseOneOrAll(i){const a=!i;i=i===void 0?null:i;const u=[],g=this.currentGroups[0],h=T=>{T.__groupChildren.forEach(M=>{switch(!0){case a:M.__groupChildren&&(M.__groupExpanded=!1,this.expandedGroupIDs.delete(M.__groupID),h(M));break;case M.__groupID===i:u.push(M),this.expandedGroupIDs.delete(M.__groupID),M.__groupExpanded=!1;break;default:u.push(M),M.__groupChildren&&M.__groupExpanded&&h(M);break}})};return g.forEach(T=>{switch(u.push(T),!0){case a:T.__groupExpanded=!1,this.expandedGroupIDs.delete(T.__groupID),T.__groupChildren&&h(T);break;case T.__groupID===i:T.__groupExpanded=!1,this.expandedGroupIDs.delete(T.__groupID);break;default:T.__groupChildren&&T.__groupExpanded&&h(T);break}}),u}createMainGrouping(i,a,u,g,h){const T=[];let M={},z=null;return i.forEach(W=>{let K=W[a];K=typeof K=="boolean"?K.toString():K,K=typeof(K==null?void 0:K.toLocaleDateString)=="function"?h.getDateFormater().fromDate(K):typeof(K==null?void 0:K.toFixed)=="function"?h.getNumberFormater().fromNumber(K):K,K=K||" blank",K!==z?(M={__groupName:this.toUppercase(g)+": "+K,__group:!0,__groupID:K,__groupLvl:u,__groupChildren:[W],__groupTotal:1,__groupExpanded:!1},W.__groupLvl=u+1,z=K,T.push(M)):(M.__groupChildren.push(W),M.__groupTotal++)}),T}groupChildren(i,a,u,g,h){const T=[];let M={};return i.forEach(z=>{let W=null;const K=[];z.__groupChildren.forEach(X=>{let ne=X[a];if(ne=typeof(ne==null?void 0:ne.toLocaleDateString)=="function"?h.getDateFormater().fromDate(ne):typeof(ne==null?void 0:ne.toFixed)=="function"?h.getNumberFormater().fromNumber(ne):ne,ne=ne||" blank",ne!==W){const D=z.__groupID;M={__groupName:this.toUppercase(g)+": "+ne,__groupID:D+"-"+ne,__group:!0,__groupLvl:u,__groupChildren:[X],__groupTotal:1,__groupExpanded:!1},X.__groupLvl=u+1,W=ne,K.push(M),T.push(M)}else M.__groupChildren.push(X),M.__groupTotal++}),z.__groupChildren=K}),T}}class K_{constructor(i){this.dataSource=i,this.selectedRows=0,this.selection=new Set([])}isSelected(i){let a=!1;return this.selectedRows>0&&(a=this.selection.has(this.getRowKey(i))),a}selectAll(){this.selectRange(0,this.dataSource.length()-1)}addSelectedKeys(i){i.forEach(a=>{this.selection.add(a)}),this.selectedRows=this.selection.size}deSelectAll(){this.selection.clear(),this.selectedRows=this.selection.size}highlightRow(i,a,u){if(u==="none")return;const g=u||this.dataSource.getSelectionMode();let h,T=this.getSelectedRows(),M="";if(this.dataSource.__select(a),a!==this.lastRowSelected||T[0]!==a){if(a<=this.dataSource.length()-1){if(g==="multiple")switch(i.shiftKey&&(M="shift",T=this.getSelectedRows(),T.length>0&&this.lastKeyKodeUsed==="none"&&(this.lastRowSelected=T[0],this.lastKeyKodeUsed="shift")),i.ctrlKey&&(M="ctrl"),!i.ctrlKey&&!i.shiftKey&&(M="none"),!0){case M==="none":this.select(a,!1);break;case(this.lastKeyKodeUsed==="shift"&&M==="ctrl"):h=this.isSelected(a),h===!0?this.deSelect(a):this.select(a,!0),this.lastRowSelected=a;break;case(this.lastKeyKodeUsed==="ctrl"&&M==="shift"):const z=this.getSelectedRows();this.selectRange(this.lastRowSelected,a);const W=this.getSelectedRows();this.setSelectedRows(z.concat(W));break;case(this.lastKeyKodeUsed==="ctrl"&&M==="ctrl"):h=this.isSelected(a),h===!0?this.deSelect(a):this.select(a,!0),this.lastRowSelected=a;break;case(this.lastKeyKodeUsed==="none"&&M==="ctrl"):h=this.isSelected(a),h===!0?this.deSelect(a):this.select(a,!0),this.lastRowSelected=a;break;case(this.lastKeyKodeUsed==="shift"&&M==="shift"):this.lastRowSelected>a?this.selectRange(a,this.lastRowSelected):this.selectRange(this.lastRowSelected,a);break;case(this.lastKeyKodeUsed==="none"&&M==="shift"):this.lastRowSelected!==-1?this.lastRowSelected>a?this.selectRange(a,this.lastRowSelected):this.selectRange(this.lastRowSelected,a):(this.lastRowSelected=a,this.select(a,!1));break;default:console.error("error, this should not happen, debug selection")}else this.select(a,!1);this.lastKeyKodeUsed=M,this.dataSource.__callSubscribers("selectionChange")}}else i.ctrlKey&&(M="ctrl"),M==="ctrl"?(this.lastKeyKodeUsed=M,h=this.isSelected(a),h===!0&&this.deSelect(a),this.lastRowSelected=a):this.select(a,!1),this.dataSource.__callSubscribers("selectionChange")}getRowKey(i){return this.dataSource.getRow(i)&&this.dataSource.getRow(i).__KEY}getRowKeys(){const i=[];return this.dataSource.getRows().forEach(a=>{i.push(a.__KEY)}),i}deSelect(i){this.selection.delete(this.getRowKey(i)),this.selectedRows=this.selection.size}select(i,a){switch(this.dataSource.getSelectionMode()){case"none":case null:case void 0:break;case"single":this.selection.clear(),this.selection.add(this.getRowKey(i)),this.selectedRows=this.selection.size;break;case"multiple":a?(this.selection.add(this.getRowKey(i)),this.selectedRows=this.selection.size):(this.selection.clear(),this.selection.add(this.getRowKey(i)),this.selectedRows=this.selection.size);break}}selectRange(i,a){if(this.dataSource.getSelectionMode()==="multiple"){this.selection.clear();for(let u=i;u<a+1;u++)this.selection.add(this.getRowKey(u));this.selectedRows=this.selection.size}this.selectedRows=this.selection.size}getSelectedRows(){const i=[],a=this.getRowKeys();return this.selectedRows>0&&a.forEach((u,g)=>{this.selection.has(u)===!0&&i.push(g)}),i}getSelectedKeys(){return Array.from(this.selection)}setSelectedKeys(i){this.selection.clear(),i.forEach(a=>{this.selection.add(a)}),this.selectedRows=this.selection.size}triggerSelectionChange(){this.dataSource.__callSubscribers("selectionChange")}setSelectedRows(i){this.selectedRows>0&&this.selection.clear();for(let a=0;a<i.length;a++)this.selection.add(this.getRowKey(i[a]));this.selectedRows=this.selection.size}}let nc=0;const Q_=function(){return nc--,nc};class Z_{constructor(i){this.__collection=[],this.__markedForDeletion=[],this.__keyAttribute="",this.EntityHandler=G_,this.__keyAttribute=i}overrideEntityHandler(i){this.EntityHandler=i}get type(){return"DataContainer"}getKey(){return Q_()}getDataSet(){return this.__collection.slice()}lenght(){return this.__collection.length}getMarkedForDeletion(){return this.__markedForDeletion}resetData(){const i=[];this.setData(this.__markedForDeletion,!0),this.__collection.forEach(a=>{if(a.__controller.__isNew&&i.push(a),a.__controller.__edited){for(const u in a.__controller.__originalValues)a[u]=a.__controller.__originalValues[u];a.__controller.__editedProps={},a.__controller.__edited=!1}}),this.removeData(i),this.__markedForDeletion=[]}markForDeletion(i,a=!1){if(a){const u=this.__collection.slice();this.__collection=[],this.__markedForDeletion=u}if(i)if(Array.isArray(i)){const u=[];i.forEach(g=>{const h=this.__collection.indexOf(g);h!==-1&&u.push(this.__collection.splice(h,1)[0])}),this.__markedForDeletion=this.__markedForDeletion.concat(u)}else{const u=this.__collection.indexOf(i);u!==-1&&this.__markedForDeletion.push(this.__collection.splice(u,1)[0])}}clearMarkedForDeletion(){this.__markedForDeletion=[]}removeData(i,a=!1){if(a){const u=this.__collection.slice();return this.__collection=[],u}if(i)if(Array.isArray(i)){const u=[];return i.forEach(g=>{const h=this.__collection.indexOf(g);h!==-1&&u.push(this.__collection.splice(h,1)[0])}),u}else{const u=this.__collection.indexOf(i);if(u!==-1)return this.__collection.splice(u,1)}return[]}setData(i,a=!1,u=!1){a||(this.__markedForDeletion=[],this.__collection=[]);const g=Array.from(i,h=>{if(h&&h.__controller)return h&&!h.__KEY&&(h.__KEY=this.getKey()),h;{const T=new Proxy(h,new this.EntityHandler(this.__keyAttribute,u));return T&&!T.__KEY&&(T.__KEY=this.getKey()),T}});return this.__collection=this.__collection.concat(g),g}replace(i,a,u){const g=Array.from(i,h=>h&&h.__controller?h:new Proxy(h,new this.EntityHandler(this.__keyAttribute,!1)));this.__collection.splice(a,u,...g)}}class X_{static fromDate(i){let a=i;if(a==null||a==="")return a;if(a=new Date(a).toDateString(),a==="Invalid Date"&&(a=""),a){const u=new Date(i).getFullYear();let g=(new Date(i).getMonth()+1).toString();g.length===1&&(g="0"+g);let h=new Date(i).getDate().toString();h.length===1&&(h="0"+h),a=`${u}-${g}-${h}`}return a}static toDate(i){let a=i;if(a==null)return a;if(a<1||typeof a!="string")return null;const u=a.split("-");return u[1]||(u[1]=new Date().getMonth()+1),u[2]||(u[2]=new Date().getDate()),a=new Date(u[0],parseInt(u[1])-1,parseInt(u[2]),new Date().getHours(),new Date().getMinutes(),new Date().getSeconds(),new Date().getMilliseconds()),a&&typeof a=="object"&&a.toString()==="Invalid Date"&&(a=""),a}static getPlaceHolderDate(){return"YYYY-MM-DD"}}class Ji{static toNumber(i){let a=i;return a.includes(",")&&!a.includes(".")&&(a=a.replace(",",".")),isNaN(parseFloat(a))||a==="0"?0:parseFloat(a)}static fromNumber(i){let a=i;return isNaN(parseFloat(a))&&(a=""),a==null?a:(a.toString().includes(",")&&(a=a.toString().replace(",",".")),a.toString())}}class Ks{constructor(i,a){this.__collectionFiltered=[],this.__collectionDisplayed=[],this.__selectionMode="multiple",this.__listeners=new Set,this.__dateFormater=X_,this.__numberFormater=Ji,this.currentEntity=null,this.__dataContainer=i||new Z_,this.__selectionMode=(a==null?void 0:a.selectionMode)||"multiple",this.__selection=new K_(this),this.__filter=new W_,this.__sorting=new j_,this.__grouping=new q_}setNumberFormater(i){this.__numberFormater=i}setDateFormater(i){this.__dateFormater=i}getNumberFormater(){return this.__numberFormater}getDateFormater(){return this.__dateFormater}get type(){return"Datasource"}setDates(i){this.__sorting.setDateAttribute(i)}getMarkedForDeletion(){return this.__dataContainer.getMarkedForDeletion()}clearMarkedForDeletion(){this.__dataContainer.clearMarkedForDeletion()}resetData(){this.__dataContainer.resetData(),this.__internalUpdate(!0)||this.__callSubscribers("collection-filtered",{info:"resetData"})}markForDeletion(i,a=!1){this.__dataContainer.markForDeletion(i,a),this.__internalUpdate(!0)||this.__callSubscribers("collection-filtered",{info:"markForDeletion"})}removeData(i,a=!1){const u=this.__dataContainer.removeData(i,a);return this.__callSubscribers("collection-changed",{removed:!0,info:"removeData",data:i}),u}getAllData(){return this.__dataContainer.getDataSet()}__select(i){this.currentEntity=this.__collectionDisplayed[i],this.currentEntity===void 0&&(this.currentEntity=null),this.__callSubscribers("currentEntity")}setRowAsCurrentEntity(i){this.__select(i)}setData(i,a=!1,u=!1){if(a){const g=this.__dataContainer.setData(i,a);g&&this.__collectionFiltered.push(...g)}else this.__dataContainer.setData(i,a),this.__collectionFiltered=this.getAllData().slice();this.__internalUpdate(u),this.__callSubscribers("collection-changed",{added:!!a})}addNewEmpty(i={},a=!0){this.__dataContainer.setData([i],!0,!0),this.__internalUpdate(!1);const u=this.__dataContainer.getDataSet(),g=u[u.length-1];this.__collectionFiltered.push(g),this.__collectionDisplayed.push(g),this.__callSubscribers("collection-changed",{added:!0}),a&&this.selectLast()}__internalUpdate(i){let a=!1;return!i&&!this.__filter.getFilter()&&!this.__sorting.getLastSort().length&&!this.__grouping.getGrouping().length&&(a=!0),i&&(this.__filter.getFilter()?this.__collectionFiltered=this.__filter.filter(this.getAllData(),this.__filter.getFilter(),this):this.__collectionFiltered=this.__dataContainer.getDataSet()),this.__sorting.getLastSort().length&&this.__sorting.runOrderBy(this.__collectionFiltered),this.__grouping.getGrouping().length?this.__collectionDisplayed=this.__grouping.group(this.__collectionFiltered,this.__grouping.getGrouping(),!0,this):this.__collectionDisplayed=this.__collectionFiltered.slice(),a&&this.__callSubscribers("collection-filtered",{info:"__internalUpdate, forced"}),a}sort(i,a){if(this.__grouping.getGrouping().length||(i?(this.__sorting.setOrderBy(i,a),this.__sorting.runOrderBy(this.__collectionFiltered)):this.__sorting.getLastSort().length&&this.__sorting.runOrderBy(this.__collectionFiltered)),this.__grouping.getGrouping().length){i&&this.__sorting.setOrderBy(i,a);const u=this.__sorting.getOrderBy().map(T=>T.attribute),g=this.__sorting.getOrderBy().map(T=>T.ascending);this.__sorting.reset(),this.__grouping.getGrouping().forEach(T=>{const M=u.indexOf(T.attribute);u.indexOf(T.attribute)===-1?this.__sorting.setOrderBy({attribute:T.attribute,ascending:!0},!0):this.__sorting.setOrderBy({attribute:T.attribute,ascending:g[M]},!0)});const h=this.__grouping.getGrouping().map(T=>T.attribute);u.forEach((T,M)=>{h.indexOf(T)===-1&&this.__sorting.setOrderBy({attribute:u[M],ascending:g[M]},!0)}),this.__sorting.runOrderBy(this.__collectionFiltered),this.__collectionDisplayed=this.__grouping.group(this.__collectionFiltered,this.__grouping.getGrouping(),!0,this)}else this.__collectionDisplayed=this.__collectionFiltered.slice();this.__callSubscribers("collection-sorted")}filter(i){var a,u;i&&(Array.isArray(i)?this.__filter.setFilter({type:"GROUP",logicalOperator:"AND",filterArguments:i}):!i.filterArguments||((a=i==null?void 0:i.filterArguments)===null||a===void 0?void 0:a.length)===0?(this.__filter.setFilter({type:"GROUP",logicalOperator:"AND",filterArguments:[i]}),i!=null&&i.logicalOperator&&((u=i==null?void 0:i.filterArguments)===null||u===void 0?void 0:u.length)===0&&this.__filter.setFilter(null)):this.__filter.setFilter(i)),this.__internalUpdate(!0)||this.__callSubscribers("collection-filtered",{info:"filter"})}group(i,a){let u;if(a?(u=this.__grouping.getGrouping(),u=u.concat(i)):u=i,this.__sorting.reset(),u.forEach(g=>{this.__sorting.setOrderBy({attribute:g.attribute,ascending:!0},!0)}),this.__sorting.runOrderBy(this.__collectionFiltered),u.length){const g=this.__grouping.group(this.__collectionFiltered,u,!0,this);this.__collectionDisplayed=g}else this.__collectionDisplayed=this.__collectionFiltered;this.__callSubscribers("collection-grouped",{info:"group",groupings:u})}removeGroup(i){if(i){const a=this.__grouping.getGrouping(),u=a.indexOf(i);u!==-1&&a.splice(u,1),this.group(a)}else this.group([]);this.__callSubscribers("collection-grouped",{info:"removeGroup"})}expandGroup(i){this.__collectionDisplayed=this.__grouping.expandOneOrAll(i),this.__callSubscribers("collection-expand")}collapseGroup(i){this.__collectionDisplayed=this.__grouping.collapseOneOrAll(i),this.__callSubscribers("collection-collapse")}__callSubscribers(i,a={}){const u=[];this.__listeners.forEach(g=>{let h;typeof g=="function"?h=g({type:i,data:a}):typeof(g==null?void 0:g.handleEvent)=="function"&&(h=g.handleEvent({type:i,data:a})),h&&u.push(g)}),this.__listeners=new Set(u)}addEventListener(i){if(typeof i!="function"&&typeof(i==null?void 0:i.handleEvent)!="function")throw new Error("callable sent to datasource event listner is wrong type");this.__listeners.has(i)||this.__listeners.add(i)}removeEventListener(i){this.__listeners.has(i)&&this.__listeners.delete(i)}length(i){return i?this.__collectionFiltered.length:this.__collectionDisplayed.length}getSelectionMode(){return this.__selectionMode}selectAll(){this.__selection.selectAll()}setSelectionMode(i){this.__selectionMode=i||"none"}getRow(i){return this.__collectionDisplayed[i]}getRows(i){return i?this.__collectionFiltered:this.__collectionDisplayed}select(i,a){this.__selection.highlightRow({},i?i-1:0),a&&this.__callSubscribers("select")}selectFirst(){this.__selection.highlightRow({},0),this.__callSubscribers("select",{info:"select-first"})}selectPrev(){let i=this.__collectionDisplayed.indexOf(this.currentEntity)-1;i<0&&(i=this.__collectionDisplayed.length-1,this.__selection.highlightRow({},i)),this.__selection.highlightRow({},i),this.__callSubscribers("select",{info:"select-prev"})}selectNext(){let i=this.__collectionDisplayed.indexOf(this.currentEntity)+1;this.__collectionDisplayed.length-1<i&&(i=0),this.__selection.highlightRow({},i),this.__callSubscribers("select",{info:"select-next"})}selectLast(){this.__selection.highlightRow({},this.__collectionDisplayed.length-1),this.__callSubscribers("select",{info:"select-last"})}setLocalCompare(i,a){this.__sorting.setLocaleCompare(i,a)}resetSort(i){this.__sorting.reset(i)}setOrderBy(i,a){this.__sorting.setOrderBy(i,a)}getOrderBy(){return this.__sorting.getOrderBy()}getGrouping(){return this.__grouping.getGrouping()}setGrouping(i){this.__grouping.setGrouping(i)}setExpanded(i){this.__grouping.setExpanded(i)}getExpanded(){return this.__grouping.getExpanded()}getFilter(){return this.__filter.getFilter()}getSelection(){return this.__selection}sortReset(){return this.__sorting.reset()}getFilterFromType(i){return this.__filter.getFilterFromType(i)}setFilter(i){return this.__filter.setFilter(i)}reloadDatasource(){this.__collectionFiltered=this.getAllData(),this.__internalUpdate(!0)}getFilterString(){var i;const a=this.__filter.getFilter();if(!(!((i=a==null?void 0:a.filterArguments)===null||i===void 0)&&i.length))return"";const u=this.getDateFormater(),g=this.getNumberFormater();function h(M,z){return M==="date"?u.fromDate(z):M==="number"?g.fromNumber(z):z}const T=function(M,z=""){return M&&(!M.filterArguments||M.filterArguments&&M.filterArguments.length===0?M.operator==="IS_BLANK"||M.operator==="IS_NOT_BLANK"?z=z+`[${M.attribute}] <<${Os[M.operator]}>>`:M.operator!=="IN"&&M.operator!=="NOT_IN"?z=z+`[${M.attribute}] <<${Os[M.operator]}>> ${M.valueType==="ATTRIBUTE"?`[${M.value}]`:"'"+h(M.attributeType,M.value)+"'"}`:Array.isArray(M.value)?z=z+`[${M.attribute}] <<${Os[M.operator]}>> [${M.value.map(W=>`'${W}'`)}]`:z=z+`[${M.attribute}] <<${Os[M.operator]}>> [${M.value.split(`
`).map(W=>`'${W}'`)}]`:M.filterArguments.forEach((W,K)=>{K>0?z=z+` ${M.logicalOperator} `:z=z+"(",z=T(W,z),M.filterArguments.length-1===K&&(z=z+")")})),z};return T(this.__filter.getFilter()).toUpperCase()}}function Yn(n,i,a,u,g,h,T){const M=document.createElement(n);M.style.top=i.clientY+document.documentElement.scrollTop+"px",M.style.left=i.clientX+document.documentElement.scrollLeft+"px",M.connector=a,M.ref=u,M.cell=g&&g(),M.rowNo=h&&h(),M.rowData=T&&T(),document.body.appendChild(M)}class Hu{constructor(i,a){this.__subscribers=new Set,this.__handleEvent=null,a?(a.type==="Datasource"&&(this.__ds=a),a.type==="DataContainer"&&(this.__ds=new Ks(a))):this.__ds=new Ks,this.__configDefault=JSON.parse(JSON.stringify(i)),this.__CONFIG=i,this.parseConfig()}get dateFormater(){return this.__ds.getDateFormater()}get numberFormater(){return this.__ds.getNumberFormater()}get completeDataset(){return this.__ds.getAllData()}get filteredDataset(){return this.__ds.getRows(!0)}get displayedDataset(){return this.__ds.getRows()}showFilterDialog(){Yn("simple-html-grid-filter-dialog",this.__SimpleHtmlGrid,this,this.__SimpleHtmlGrid,null,null,null)}clearAllFilters(){this.setCurrentFilter(null),this.config.groups.flatMap(a=>a.rows).forEach(a=>{const u=a.filterable;u&&(u.currentValue=null)}),this.reRender(),this.reRunFilter()}getDatasource(){return this.__ds}handleEvent(i){if(i.type==="select"){this.dataSourceUpdated();const a=this.__SimpleHtmlGrid.getElementsByTagName("simple-html-grid-body")[0],u=a==null?void 0:a.clientHeight,g=a==null?void 0:a.scrollTop,h=this.getSelectedRows()[0],T=this.__SCROLL_TOPS[h];let M=!1,z=0;return g>T&&(M=!0,z=T-u/2),g+u<=T&&(M=!0,z=T),M&&setTimeout(()=>{this.setScroll(z)}),!0}return i.type==="currentEntity"?!0:i.type==="selectionChange"?(this.__SimpleHtmlGrid.triggerEvent("selection"),!0):(this.config.groupingSet=this.__ds.getGrouping(),this.config.groupingExpanded=this.__ds.getExpanded(),this.config.sortingSet=this.__ds.getOrderBy(),this.__handleEvent===null&&(this.parseConfigWidth(),this.__SimpleHtmlGrid&&this.__SimpleHtmlGrid.resetRowCache(),this.__handleEvent=1,Promise.resolve().then(()=>{this.dataSourceUpdated(),this.__SimpleHtmlGrid&&this.reRender(),this.__handleEvent=null})),!0)}getMainElement(){return this.__SimpleHtmlGrid}parseConfig(){var i;let a=1;if(this.__CONFIG.groups=this.__CONFIG.groups.filter(u=>u),this.__CONFIG.groups.forEach(u=>{u.rows&&u.rows.forEach((g,h)=>{a<h+1&&(a=h+1)})}),this.__CONFIG.__cellRows=a,this.__CONFIG.__rowHeight=this.__CONFIG.cellHeight*a,this.parseConfigWidth(),this.__CONFIG){this.__CONFIG.sortingSet&&this.__ds.setOrderBy(this.__CONFIG.sortingSet),this.__CONFIG.groupingSet&&this.__ds.setGrouping(this.__CONFIG.groupingSet),this.__CONFIG.groupingExpanded&&this.__ds.setExpanded(this.__CONFIG.groupingExpanded),this.__CONFIG.filterSet&&(this.__ds.setFilter(this.__CONFIG.filterSet),this.__CONFIG.filterSet=null);const u=[];(i=this.__CONFIG.groups)===null||i===void 0||i.forEach(g=>{var h;(h=g.rows)===null||h===void 0||h.forEach(T=>{T.type==="date"&&u.push(T.attribute)})}),this.__ds.setDates(u)}}parseConfigWidth(){var i;let a=0;this.config.groups.reduce((g,h)=>(h.__left=g,a=a+h.width,h.__left+h.width),0),this.__CONFIG.__rowWidth=a;const u=(i=this.__SimpleHtmlGrid)===null||i===void 0?void 0:i.getElementsByTagName("simple-html-grid-body")[0];this.__CONFIG.__rowWidth<(u==null?void 0:u.clientWidth)&&this.__CONFIG.scrollLeft>0&&(this.__CONFIG.scrollLeft=u.scrollLeft)}saveSettings(){this.__CONFIG.filterSet=this.__ds.getFilter()||[],this.__CONFIG.groupingSet=this.__ds.getGrouping()||[],this.__CONFIG.groupingExpanded=this.__ds.getExpanded()||[],this.__CONFIG.sortingSet=this.__ds.getOrderBy()||[];const i=JSON.parse(JSON.stringify(this.config));return this.__CONFIG.filterSet=null,i}loadSettings(i,a=!1){a&&(this.__configDefault=JSON.parse(JSON.stringify(i))),this.manualConfigChange(JSON.parse(JSON.stringify(i)))}useInitSettings(){this.manualConfigChange(JSON.parse(JSON.stringify(this.__configDefault)))}manualConfigChange(i){i&&(this.__CONFIG=i),this.parseConfig(),this.__SimpleHtmlGrid&&this.__SimpleHtmlGrid.manualConfigChange(),this.reRunFilter()}setData(i,a=!1,u=!1){this.__ds.setData(i,a,u),this.dataSourceUpdated()}reloadDatasource(){this.__ds.reloadDatasource(),this.dataSourceUpdated()}dataSourceUpdated(){this.__SCROLL_TOPS=[],this.__SCROLL_HEIGHTS=[],this.__SCROLL_HEIGHT=0;const i=this.config.cellHeight,a=this.config.__rowHeight;let u=0;this.displayedDataset.forEach(g=>{const h=g.__group?i:a;this.__SCROLL_TOPS.push(u),this.__SCROLL_HEIGHTS.push(h),u=u+h}),this.__SCROLL_HEIGHT=u}get config(){return this.__CONFIG}set config(i){this.__CONFIG=i}get getScrollVars(){return{__SCROLL_HEIGHT:this.__SCROLL_HEIGHT,__SCROLL_HEIGHTS:this.__SCROLL_HEIGHTS,__SCROLL_TOPS:this.__SCROLL_TOPS}}select(i){this.__ds.select(i)}selectAll(){this.__ds.selectAll()}edited(){return this.__ds.getAllData().filter(i=>!!i.__controller.__edited)}publishEvent(i,a){const u=[];this.__subscribers.forEach(g=>{let h;typeof g=="function"?h=g({type:i,data:a}):typeof(g==null?void 0:g.handleEvent)=="function"&&(h=g.handleEvent({type:i,data:a})),h&&u.push(g)}),this.__subscribers=new Set(u)}addEventListener(i){if(typeof i!="function"&&typeof(i==null?void 0:i.handleEvent)!="function")throw new Error("callable sent to datasource event listner is wrong type");this.__subscribers.has(i)||this.__subscribers.add(i)}removeEventListener(i){this.__subscribers.has(i)&&this.__subscribers.delete(i)}reRender(){this.__SimpleHtmlGrid&&this.__SimpleHtmlGrid.reRender()}render(){this.__SimpleHtmlGrid&&this.__SimpleHtmlGrid.reRender()}groupingCallback(i,a,u){let g=!!a;const h=this.__ds.getGrouping();let T=null;if(a&&h.forEach((M,z)=>{M.attribute===a.attribute&&(g=!1),u&&M.attribute===u&&(T=z)}),g&&(u?h.splice(T,0,{title:a.header,attribute:a.attribute}):h.push({title:a.header,attribute:a.attribute})),!g&&u&&a){let M=null;h.forEach((W,K)=>{W.attribute===u&&(T=K)}),h.forEach((W,K)=>{a.attribute===W.attribute&&(M=K)});const z=h.splice(M,1);z.length&&h.splice(T,0,z[0])}if(!g&&!u&&a){let M=null;h.forEach((W,K)=>{a.attribute===W.attribute&&(M=K)});const z=h.splice(M,1);h.push(z[0])}this.clearConfigSort(this.config.groups.flatMap(M=>M.rows)),this.__ds.sortReset(),h.forEach(M=>{this.__ds.setOrderBy({attribute:M.attribute,ascending:!0},!0)}),this.__updateSortConfig(),this.__ds.group(h)}filterCallback(i,a,u,g,h){switch(a.type){case"date":a.filterable.currentValue=this.dateFormater.toDate(i);break;case"number":a.filterable.currentValue=this.numberFormater.toNumber(i);break;case"boolean":i===""&&(a.filterable.currentValue=null),i==="false"&&(a.filterable.currentValue=!1),i==="true"&&(a.filterable.currentValue=!0);break;default:a.filterable.currentValue=g||i}const T=this.__ds.getFilter();let M={type:"GROUP",logicalOperator:"AND",filterArguments:[]};(T==null?void 0:T.logicalOperator)==="AND"&&(M=T,M.filterArguments=M.filterArguments.filter(K=>K.attribute!==a.attribute)),this.config.groups.flatMap(K=>K.rows).forEach(K=>{const X=K.filterable;X&&X.currentValue!==null&&X.currentValue!==void 0&&X.currentValue!==""&&M.filterArguments.push({type:"CONDITION",logicalOperator:"NONE",valueType:"VALUE",attribute:K.attribute,attributeType:K.type||"text",operator:X.operator||this.__ds.getFilterFromType(K.type),value:X.currentValue})}),u&&M.filterArguments.push({type:"CONDITION",logicalOperator:"NONE",valueType:"VALUE",attribute:a.attribute,attributeType:a.type||"text",operator:h?"NOT_IN":"IN",value:u}),g&&M.filterArguments.unshift({type:"CONDITION",logicalOperator:"NONE",valueType:"VALUE",attribute:a.attribute,attributeType:a.type||"text",operator:"CONTAINS",value:g});const W=[];M.filterArguments=M.filterArguments.filter(K=>W.indexOf(K.attribute)!==-1&&K.operator!=="IN"&&K.operator!=="NOT_IN"?!1:(W.push(K.attribute),!0)),u&&!g&&(a.filterable.currentValue=""),this.__ds.filter(M)}clearConfigSort(i){i.forEach(a=>{a.sortable&&(a.sortable.sortAscending=null,a.sortable.sortNo=null)})}__updateSortConfig(){const i=this.config.groups.flatMap(g=>g.rows),a=this.__ds.getOrderBy().flatMap(g=>g.attribute),u=this.__ds.getOrderBy();i.forEach(g=>{const h=a.indexOf(g.attribute);h!==-1?(g.sortable||(g.sortable={}),g.sortable.sortAscending=u[h].ascending,g.sortable.sortNo=h+1):g.sortable&&(g.sortable.sortAscending,g.sortable.sortNo=null)})}sortCallback(i,a){var u;let g=this.__ds.getOrderBy();const h=a.attribute,T=(u=a==null?void 0:a.sortable)===null||u===void 0?void 0:u.sortAscending,M=i.shiftKey;if(this.clearConfigSort(this.config.groups.flatMap(z=>z.rows)),M){let z=!1;g.forEach(W=>{W.attribute===h&&(z=!0,W.ascending=!W.ascending)}),z?(a.sortable.sortAscending=!0,a.sortable.sortNo=g.length):g.push({attribute:h,ascending:T!==!1})}else g=[{attribute:h,ascending:!T}];this.__ds.setOrderBy(g),this.__ds.sort(),this.__updateSortConfig()}removeGroup(i){this.__ds.removeGroup(i)}groupExpand(i){this.__ds.expandGroup(i)}updateRowCells(i=!1){i?this.__SimpleHtmlGrid.triggerEvent("update-cell-data-currentEnity"):this.__SimpleHtmlGrid.triggerEvent("update-cell-data")}groupCollapse(i){this.__ds.collapseGroup(i)}connectGrid(i){this.__SimpleHtmlGrid!==i&&(this.__SimpleHtmlGrid=i,this.__ds.addEventListener(this),this.dataSourceUpdated())}disconnectGrid(i){this.__SimpleHtmlGrid!==i&&(this.__SimpleHtmlGrid=null,this.__ds.removeEventListener(this))}getCurrentFilter(){return this.__ds.getFilter()}setCurrentFilter(i){this.__ds.setFilter(i)}reRunFilter(){this.__ds.filter()}isSelected(i){return this.__ds.getSelection().isSelected(i)}highlightRow(i,a){this.__ds.getSelection().highlightRow(i,a,this.config.selectionMode)}getSelectedRows(){return this.__ds.getSelection().getSelectedRows()}setReadOnlyState(i=!0){return this.__CONFIG.readonly=i}setScroll(i=0){if(this.__SimpleHtmlGrid){const a=this.__SimpleHtmlGrid.getElementsByTagName("simple-html-grid-body")[0];a&&(a.scrollTop=i)}}getFilterString(){return this.getDatasource().getFilterString()}getTextWidth(i){const u=document.createElement("canvas").getContext("2d");return u.font=this.getFont(),u.measureText(i).width}getFont(){const i=this===null||this===void 0?void 0:this.__SimpleHtmlGrid;return i?window.getComputedStyle(i).getPropertyValue("font-size")+" "+window.getComputedStyle(i).getPropertyValue("font-family"):"12px Arial"}autoResizeColumns(i){const a=i?[i]:this.config.groups.flatMap(M=>M==null?void 0:M.rows);let u=a.map(M=>{var z;return((z=M==null?void 0:M.header)===null||z===void 0?void 0:z.length)+4});const g=a.map(M=>{var z;return M.type==="date"&&((z=M==null?void 0:M.header)===null||z===void 0?void 0:z.length)<5?"19.19.2000 A":(M==null?void 0:M.header)+"sorter"});this.__ds.getAllData().forEach(M=>{a.forEach((z,W)=>{M&&typeof M[z.attribute]=="string"&&u[W]<M[z.attribute].length&&(u[W]=M[z.attribute].length,g[W]=M[z.attribute]),M&&typeof M[z.attribute]=="number"&&u[W]<(M[z.attribute]+"").length&&(u[W]=(M[z.attribute]+"").length,g[W]=M[z.attribute])})});const T=a.map(M=>M.attribute);u=u.map(M=>M?M*8:100),this.config.groups.forEach(M=>{let z=0;M==null||M.rows.forEach(W=>{z<750&&T.indexOf(W.attribute)!==-1&&u[T.indexOf(W.attribute)]>z&&(z=this.getTextWidth(g[T.indexOf(W.attribute)])+15)}),z&&(M.width=z>750?750:z)}),this.manualConfigChange(this.config)}}function Jt(n,i){customElements.get(i)?globalThis.hmrCache&&customElements.define(i,n):customElements.define(i,n)}function so(n,i,a,u,g){let h=u;n.displayedDataset.length<=i.length&&(h=0);const T=n.getScrollVars.__SCROLL_TOPS;let M=0,z=0;if(h!==0)for(;z<T.length;){if(Math.floor(h-T[z])<0){M=z-1;break}z++}let W=M;const K=[];for(let X=0;X<i.length;X++){const ne=M+X;ne>n.displayedDataset.length-1?(W--,K.push(W)):K.push(ne),i[X].update=!0}for(let X=0;X<i.length;X++){const ne=K.indexOf(i[X].i);ne!==-1&&(K.splice(ne,1),i[X].update=!1)}for(let X=0;X<i.length;X++)if(i[X].update){const ne=K.splice(0,1)[0];i[X].i=ne}else i[X].update=!1;g||a.getElementsByTagName("simple-html-grid-body")[0].rows.forEach(ne=>{ne.verticalScrollEvent()})}class Y_ extends HTMLElement{constructor(){super(...arguments),this.firstLoad=!0}connectedCallback(){this.classList.add("simple-html-grid-body");const i=this.connector.config;this.style.top=i.panelHeight+i.__rowHeight*2+2+"px",this.style.bottom=i.footerHeight+"px",this.ref.addEventListener("reRender",this),this.ref.addEventListener("column-resize",this),this.body=document.createElement("simple-html-grid-body-content"),this.body.style.height=`${this.connector.getScrollVars.__SCROLL_HEIGHT||.1}px`,this.body.style.width=`${i.__rowWidth}px`,this.body.classList.add("simple-html-grid-content"),this.append(this.body),this.ref.interface.config.lastScrollTop&&(this.skipFirstRerender=!0,this.scrollTop=this.ref.interface.config.lastScrollTop,so(this.ref.interface,this.ref.rowCache,this.ref,this.scrollTop,!0)),this.rows=this.rowPositionCache.map(a=>{const u=document.createElement("simple-html-grid-row");return u.connector=this.connector,u.row=a,u.ref=this.ref,this.body.append(u),u}),this.reRender()}handleEvent(i){if(i.type==="reRender"&&this.reRender(),i.type==="column-resize"){const a=this.connector.config;this.body.style.width=`${a.__rowWidth}px`}}disconnectedCallback(){this.ref.removeEventListener("reRender",this),this.ref.removeEventListener("column-resize",this)}reRender(){const i=this.connector.config;if(this.style.top=i.panelHeight+i.__rowHeight*2+2+"px",this.style.bottom=i.footerHeight+"px",this.body.style.height=`${this.connector.getScrollVars.__SCROLL_HEIGHT||.1}px`,this.body.style.width=`${i.__rowWidth}px`,this.skipFirstRerender?this.skipFirstRerender=!1:(this.ref.resetColCache(),this.ref.resetRowCache()),this.rowPositionCache.length!==this.rows.length)if(this.rowPositionCache.length<this.rows.length){const a=[];this.rows.forEach((u,g)=>{this.rowPositionCache[g]?a.push(u):this.body.removeChild(u)}),this.rows=a}else this.rowPositionCache.forEach((a,u)=>{if(this.rows[u]){const g=this.rows[u];g.row=a}else{const g=document.createElement("simple-html-grid-row");g.connector=this.connector,g.row=a,g.ref=this.ref,this.body.append(g),this.rows.push(g)}});this.rows.forEach((a,u)=>{const g=a;g.connector=this.connector,g.row=this.rowPositionCache[u],g.ref=this.ref,g.updateRowColumns()})}}Jt(Y_,"simple-html-grid-body");class $_ extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-cell-row");const i=this.connector.config;this.style.display="block",this.style.height=i.cellHeight+"px",this.style.width=i.groups[this.group].width+"px",this.style.top=this.cellPosition*i.cellHeight+"px",this.cell=i.groups[this.group].rows[this.cellPosition],this.innerEle=document.createElement("input"),this.innerEle.classList.add("simple-html-grid-row-input"),this.innerEle.setAttribute("data-type",this.cell.type||"text"),this.innerEle.setAttribute("data-value-cell",""),this.appendChild(this.innerEle),this.ref.addEventListener("update-cell-data-currentEnity",this),this.ref.addEventListener("update-cell-data",this)}disconnectedCallback(){this.ref.removeEventListener("update-cell-data-currentEnity",this),this.ref.removeEventListener("update-cell-data",this)}handleEvent(i){if(i.type==="column-resize"&&(this.style.width=this.connector.config.groups[this.group].width+"px"),i.type==="update-cell-data"&&this.updateInput(),i.type==="update-cell-data-currentEnity"){const a=this.connector.displayedDataset[this.rowNo],u=this.connector.getDatasource().currentEntity;a===u&&this.updateInput()}}updateCallback(i){const a=this.connector.displayedDataset[this.rowNo],u=this.cell;if(this.style.width=this.connector.config.groups[this.group].width+"px",u.readonly||this.connector.config.readonly){if(this.cell.type==="date"){i.target.value=this.connector.dateFormater.fromDate(a[u.attribute]||null);return}if(this.cell.type==="number"){i.target.value=this.connector.numberFormater.fromNumber(a[u.attribute]||null);return}if(this.cell.type==="boolean"){i.target.checked=a[u.attribute];return}i.target.value=a[u.attribute]}if(u.autoUpdateData!==!1){switch(this.cell.type){case"boolean":a[u.attribute]=i.target.checked;break;case"image":break;case"date":a[u.attribute]=this.connector.dateFormater.toDate(i.target.value);break;case"number":a[u.attribute]=this.connector.numberFormater.toNumber(i.target.value);break;default:a[u.attribute]=i.target.value}this.connector.publishEvent("attribute-change",this)}}updateWidth(){this.style.width=this.connector.config.groups[this.group].width+"px"}updateInput(){const i=this.connector.displayedDataset[this.rowNo],a=this.ref,u=this.connector;this.innerEle.setAttribute("data-attribute",this.cell.attribute||""),this.innerEle.setAttribute("data-type",this.cell.type||"text");const g=K=>{K.button!==0&&Yn("simple-html-grid-menu-row",K,u,a,()=>this.cell,()=>this.rowNo,()=>this.connector.displayedDataset[this.rowNo])},h=this.cell.editEventType!=="input"?K=>{this.lastVal=void 0,this.updateCallback(K),this.updateInput()}:null,T=this.cell.editEventType==="input"?K=>{this.lastVal=void 0,this.updateCallback(K)}:null;if(this.innerEle.readOnly=this.cell.readonly||u.config.readonly,this.innerEle.disabled=this.cell.disabled,this.innerEle.onchange=h,this.cell.type==="date"?this.innerEle.oninput=null:(this.innerEle.oninput=this.cell.stopManualEdit?null:T,this.cell.stopManualEdit&&(this.innerEle.onkeydown=function(K){return K.preventDefault(),!1})),this.innerEle.oncontextmenu=K=>(K.preventDefault(),g(K),!1),!i||i.__group){this.parentNode.style.display="none";return}else this.parentNode.style.display="block";let M=this.cell.type==="boolean"?"checkbox":this.cell.type||"text";if(M!=="text"&&M!=="checkbox"&&(M="text"),this.innerEle.type!==M&&(this.innerEle.type=M),this.innerEle.onfocus=()=>{this.innerBtn&&this.innerBtn.classList.remove("simple-html-grid-iconhidden")},this.innerEle.onblur=()=>{this.innerBtn&&setTimeout(()=>{this.innerBtn&&this.innerBtn.classList.add("simple-html-grid-iconhidden")},200)},M==="checkbox"?(this.innerEle.classList.contains("simple-html-grid-row-input")&&this.innerEle.classList.remove("simple-html-grid-row-input"),this.innerEle.classList.contains("simple-html-grid-row-checkbox")||this.innerEle.classList.add("simple-html-grid-row-checkbox")):(this.innerEle.classList.contains("simple-html-grid-row-checkbox")&&this.innerEle.classList.remove("simple-html-grid-row-checkbox"),this.innerEle.classList.contains("simple-html-grid-row-input")||this.innerEle.classList.add("simple-html-grid-row-input")),M!=="checkbox"&&this.cell.focusButton){this.innerBtn&&this.innerBtn.parentNode===null&&(this.innerBtn=null);let K=!0;const X=this.connector.config.readonly,ne=this.cell.readonly;X&&this.cell.focusButtonIfGridReadonly===!1&&(K=!1),ne&&this.cell.focusButtonIfCellReadonly===!1&&(K=!1),K?(this.innerBtn||(this.innerBtn=document.createElement("button"),this.innerBtn.classList.add("simple-html-grid-row-input-button","simple-html-grid-iconhidden"),this.innerBtn.appendChild(document.createTextNode("...")),this.appendChild(this.innerBtn)),this.innerBtn.onclick=()=>{this.connector.publishEvent("focus-button",this)}):this.innerBtn&&this.innerBtn.parentNode&&this.innerBtn.parentNode.removeChild(this.innerBtn)}else this.innerBtn&&this.innerBtn.parentNode&&this.innerBtn.parentNode.removeChild(this.innerBtn);if(this.style.width=this.connector.config.groups[this.group].width+"px",this.innerEle.placeholder=this.cell.placeholder||"",i){const K=this.cell;K.type==="date"&&(this.innerEle.placeholder=this.cell.placeholder?this.cell.placeholder:this.connector.dateFormater.getPlaceHolderDate());const X=i[K.attribute]||null;if(X!==this.lastVal)switch(K.type){case"boolean":this.innerEle.checked=X;break;case"image":console.log("no-image");break;case"empty":console.log("no-.empty");break;case"date":this.innerEle.value=this.connector.dateFormater.fromDate(X);break;case"number":this.innerEle.value=this.connector.numberFormater.fromNumber(X);break;default:this.innerEle.value=X}this.lastVal=X}else this.innerEle.value&&(this.innerEle.value="");const z=this.connector.displayedDataset[this.rowNo-1],W=this.innerEle.classList;if(z){let K=z[this.cell.attribute]||"",X=i[this.cell.attribute]||"";this.cell.type==="number"&&(K=K+"",X=X+""),this.cell.type==="date"&&(K=this.connector.dateFormater.fromDate(K),X=this.connector.dateFormater.fromDate(X)),K===X?W.contains("simple-html-grid-duplicate-value")||W.add("simple-html-grid-duplicate-value"):W.contains("simple-html-grid-duplicate-value")&&W.remove("simple-html-grid-duplicate-value")}else W.contains("simple-html-grid-duplicate-value")&&W.remove("simple-html-grid-duplicate-value")}}Jt($_,"simple-html-grid-cell-row");class J_ extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-cell-filter");const i=this.connector.config;this.style.height=i.cellHeight+"px",this.style.width=this.group.width+"px",this.style.top=this.cellPosition*i.cellHeight+"px",this.attribute=this.group.rows[this.cellPosition].attribute,this.ref.addEventListener("column-resize",this),this.updateGui()}handleEvent(i){i.type==="column-resize"&&(this.style.width=this.group.width+"px")}disconnectedCallback(){this.ref.removeEventListener("column-resize",this)}updateGui(){const i=this.group.rows[this.cellPosition],a=this.connector,u=this.ref,g=i.type==="boolean"?"checkbox":i.type,h=i.filterable.currentValue||null,T=i.filterable.placeholder||"",M=this.connector.config,z=te=>{if(i.type==="boolean"){const pe=te.target;switch(pe.state){case 0:pe.state=2,pe.style.opacity="1",pe.checked=!0,pe.indeterminate=!1;break;case 2:pe.state=3,pe.style.opacity="1",pe.indeterminate=!1;break;default:pe.checked=!1,pe.state=0,pe.style.opacity="0.3",pe.indeterminate=!0}te.target.value=pe.indeterminate?null:pe.checked}i.filterable.auto!==!1&&this.connector.filterCallback(te.target.value,i)},W=te=>{(te.keyCode?te.keyCode:te.which)===13&&z(te)},K=i.editEventType!=="input"?z:null,X=i.editEventType==="input"?z:null,ne=te=>{te.button!==0&&Yn("simple-html-grid-menu-filter",te,a,u,()=>this.group.rows[this.cellPosition]||null)};let D=null,ue=!1,ee=0;i.type==="boolean"&&i.filterable&&(i.filterable.currentValue!==!1&&i.filterable.currentValue!==!0?(D=!0,ue=!0,ee=0):ee=i.filterable.currentValue?2:3);let ce;this.children.length?ce=this.children[0]:ce=document.createElement("input");let $="simple-html-grid-row-input";const J="simple-html-grid-row-checkbox";if(i.type==="boolean"?(ce.classList.contains($)&&ce.classList.remove($),$=J):ce.classList.contains(J)&&ce.classList.remove(J),this.style.height=M.cellHeight+"px",this.style.width=this.group.width+"px",this.style.top=this.cellPosition*M.cellHeight+"px",this.attribute=this.group.rows[this.cellPosition].attribute,ce.type=g,g!=="text"&&g!=="checkbox"&&(ce.type="text"),ce.placeholder=T,g==="date"&&(ce.placeholder=this.connector.dateFormater.getPlaceHolderDate()),ce.classList.add($),ce.state=ee,ce.indeterminate=ue,D&&(ce.style.opacity="0.3"),ce.onchange=K,ce.oncontextmenu=te=>(te.preventDefault(),ne(te),!1),ce.oninput=X,ce.onkeydown=W,ce.value!==(h||""))switch(g){case"checkbox":ce.checked!==h&&(ce.checked=h);break;case"number":i.filterable.currentValue===0?ce.value="0":ce.value=this.connector.numberFormater.fromNumber(h);break;case"date":ce.value=this.connector.dateFormater.fromDate(h);break;default:ce.value=h}this.children.length||this.appendChild(ce)}}Jt(J_,"simple-html-grid-cell-filter");function e0(n,i){let a=null,u=i().width;const g=z=>{if(z.preventDefault(),a&&Math.abs(a-z.screenX)%2===0){const K=a-z.screenX,X=u-K;i().width=X>10?X:10;let ne=0;n.interface.config.groups.reduce((D,ue)=>(ue.__left=D,ne=ne+ue.width,ue.__left+ue.width),0),n.interface.config.__rowWidth=ne,requestAnimationFrame(()=>{n.triggerEvent("column-resize")})}},h=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h)},T=z=>{a=z.screenX,u=i().width,document.addEventListener("mousemove",g),document.addEventListener("mouseup",h)},M=document.createElement("div");return M.classList.add("simple-html-grid-draggable-handler"),M.onmousedown=T,M}let Et=null,Ln=null,Ct=null,tn=null,Rn=null,Rr=null,Dr=null;function Df(n){return n&&n[0].toUpperCase()+n.substring(1,n.length)}const rc=(n,i)=>{const a=u=>{Et!=null&&Et.allowGrouping&&i.groupingCallback(u,Et,Dr),u.target.removeEventListener("mouseup",a),u.target.classList.remove("simple-html-grid-candrop"),Rn&&Rn.classList.remove("simple-html-grid-candrop"),Rr&&Rr.classList.remove("simple-html-grid-candrop-panel-col"),Dr=null,tn=null};return u=>{n==="enter"&&Et&&(Rn=u.target,u.target.classList.add("simple-html-grid-candrop"),u.target.addEventListener("mouseup",a)),n==="leave"&&Et&&(Rn=null,u.target.removeEventListener("mouseup",a),u.target.classList.remove("simple-html-grid-candrop"))}},sc=(n,i)=>{const a=u=>{tn&&(i.groupingCallback(u,tn,Dr),u.target.removeEventListener("mouseup",a),u.target.classList.remove("simple-html-grid-candrop"),Rn&&Rn.classList.remove("simple-html-grid-candrop"),Rr&&Rr.classList.remove("simple-html-grid-candrop-panel-col"),Dr=null,tn=null)};return(u,g)=>{(n==="enter"&&Et||n==="enter"&&tn)&&(Rr=u.target,Dr=g,u.target.classList.add("simple-html-grid-candrop-panel-col"),Rn&&Rn.classList.remove("simple-html-grid-candrop"),tn&&u.target.addEventListener("mouseup",a)),(n==="leave"&&Et||n==="leave"&&tn)&&(Rr=null,Dr=null,u.target.classList.remove("simple-html-grid-candrop-panel-col"),tn&&u.target.removeEventListener("mouseup",a))}},t0=(n,i)=>{const a=function(){document.removeEventListener("mouseup",a),document.removeEventListener("mousemove",u),tn=null,Ln=null,Ct&&document.body.removeChild(Ct),Ct=null},u=function(g){requestAnimationFrame(()=>{Ct&&(Ct.style.top=g.clientY+document.documentElement.scrollTop+"px",Ct.style.left=g.clientX+document.documentElement.scrollLeft+"px")})};return(g,h)=>{n==="dragstart"&&g.button===0&&g.target.tagName==="P"&&(tn={header:h.title,attribute:h.attribute},document.addEventListener("mouseup",a),Ct=document.createElement("div"),Ct.style.top="-1200px",Ct.style.left="-1200px",Ct.style.height=i.config.cellHeight+"px",Ct.classList.add("simple-html-grid"),Ct.classList.add("simple-html-grid-drag"),Ct.classList.add("simple-html-grid-cell-label"),Ct.textContent=Df(h.title),document.body.appendChild(Ct),document.addEventListener("mousemove",u))}};let cl=null,fl=null;const ja=(n,i,a,u)=>{var g;const h=function(){document.removeEventListener("mouseup",h),document.removeEventListener("mousemove",M),Et=null,Ln=null,Ct&&document.body.removeChild(Ct),Ct=null};let T=(g=a.getMainElement())===null||g===void 0?void 0:g.getElementsByTagName("simple-html-grid-body")[0];const M=function(z){var W;(Math.abs(fl-z.clientY)>10||Math.abs(cl-z.clientX)>10)&&(fl=99200,cl=99200,T=(W=a.getMainElement())===null||W===void 0?void 0:W.getElementsByTagName("simple-html-grid-body")[0],requestAnimationFrame(()=>{if(Ct){Ct.style.top=z.clientY+document.documentElement.scrollTop+"px",Ct.style.left=z.clientX+document.documentElement.scrollLeft+"px";const K=a.getMainElement().getClientRects()[0];T.scrollLeft>0&&K.x>z.clientX&&(T.scrollLeft=T.scrollLeft+(z.clientX-K.x)),K.x+K.width<z.clientX&&(T.scrollLeft=T.scrollLeft-(K.x+K.width-z.clientX))}}))};return z=>{if(n==="dragstart"&&z.button===0&&z.target.tagName==="SPAN"&&(Et=i(),Ln=u&&u(),fl=z.clientY,cl=z.clientX,document.addEventListener("mouseup",h),Ct=document.createElement("div"),Ct.style.top="-1200px",Ct.style.left="-1200px",Ct.style.height=a.config.cellHeight+"px",Ct.classList.add("simple-html-grid"),Ct.classList.add("simple-html-grid-drag"),Ct.classList.add("simple-html-grid-cell-label"),Ct.textContent=Df(i().header),document.body.appendChild(Ct),document.addEventListener("mousemove",M)),Et!==null){const W=K=>{if(Et!==null){const X=Object.assign({},Et),ne=Object.assign({},i()),D=Object.assign(Et,i());for(const ue in D)Et[ue]=ne[ue],i()[ue]=X[ue];a.reRender(),K.target.removeEventListener("mouseup",W),K.target.classList.remove("simple-html-grid-candrop")}};n==="enter"&&Et&&Et!==i()&&(i().type==="empty"&&z.target.classList.toggle("hideme"),z.target.classList.add("simple-html-grid-candrop"),z.target.addEventListener("mouseup",W)),n==="leave"&&Et&&(i().type==="empty"&&z.target.classList.toggle("hideme"),z.target.removeEventListener("mouseup",W),z.target.classList.remove("simple-html-grid-candrop"))}}};function Ea(n,i,a,u){const g=function(z){let W=null,K=null,X=null,ne=null;const D=i(),ue=a();if(Ln)n.config.groups.forEach((ce,$)=>{ce===Ln&&(ce.rows.forEach((J,te)=>{J===Et&&(W=$,K=te)}),ce===D&&(X=$),K!==null&&ce.rows.splice(K,1))});else{let ce=null;n.config.optionalCells&&(n.config.optionalCells.forEach(($,J)=>{$===Et&&(ce=J)}),ce!==null&&n.config.optionalCells.splice(ce,1))}n.config.groups.forEach((ce,$)=>{ce===D&&ce.rows.forEach((J,te)=>{J===ue&&(X=$,ne=te)})}),ne!==null&&(u==="left"&&n.config.groups.splice(X,0,{width:Ln?n.config.groups[W].width:100,rows:[Et]}),u==="right"&&n.config.groups.splice(X+1,0,{width:Ln?n.config.groups[W].width:100,rows:[Et]}),u==="top"&&n.config.groups[X].rows.splice(ne,0,Et),u==="bottom"&&n.config.groups[X].rows.splice(ne+1,0,Et)),z.target.classList.remove("simple-html-grid-candrop"),Et=null,Ln=null;let ee=null;n.config.groups.forEach((ce,$)=>{ce.rows.length===0&&(ee=$)}),ee!==null&&n.config.groups.splice(ee,1),setTimeout(()=>{n.manualConfigChange(n.config)},0)},h=z=>{const W=a();Et&&Et!==W&&(z.preventDefault(),z.target.classList.add("simple-html-grid-candrop"),z.target.addEventListener("mouseup",g))},T=z=>{const W=a();Et&&Et!==W&&(z.preventDefault(),z.target.classList.remove("simple-html-grid-candrop"),z.target.removeEventListener("mouseup",g))},M=document.createElement("div");switch(M.onmouseenter=h,M.onmouseleave=T,u){case"bottom":M.classList.add("simple-html-grid-drop-zone-bottom");break;case"top":M.classList.add("simple-html-grid-drop-zone-top");break;case"left":M.classList.add("simple-html-grid-drop-zone-left");break;case"right":M.classList.add("simple-html-grid-drop-zone-right");break}return M}class i0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-cell-label");const i=this.connector.config;this.style.display="block",this.style.height=i.cellHeight+"px",this.style.width=this.group.width+"px",this.style.top=this.cellPosition*i.cellHeight+"px",this.ref.addEventListener("column-resize",this),this.generateGui()}handleEvent(i){i.type==="column-resize"&&(this.style.width=this.group.width+"px")}disconnectedCallback(){this.ref.removeEventListener("column-resize",this)}capalize(i){return i&&i[0].toUpperCase()+i.substring(1,i.length)}update(){const i=this.group.rows[this.cellPosition];this.labelEl.cell=i,this.style.display="block";const a=this.connector.config;this.style.height=a.cellHeight+"px",this.style.width=this.group.width+"px",this.style.top=this.cellPosition*a.cellHeight+"px",this.labelEl.innerText=this.capalize(this.group.rows[this.cellPosition].header||""),this.setSortIcon()}setSortIcon(){var i;const a="http://www.w3.org/2000/svg",u=document.createElementNS(a,"svg");u.setAttributeNS(null,"viewBox","0 0 16 16"),u.setAttributeNS(null,"class","simple-html-grid-icon");const g=document.createElementNS(a,"path");g.setAttributeNS(null,"d","M7.4 6L3 10h1.5L8 7l3.4 3H13L8.5 6h-1z"),u.appendChild(g);const h=document.createElementNS(a,"svg");h.setAttributeNS(null,"viewBox","0 0 16 16"),h.setAttributeNS(null,"class","simple-html-grid-icon");const T=document.createElementNS(a,"path");T.setAttributeNS(null,"d","M7.4 10L3 6h1.5L8 9.2 11.3 6H13l-4.5 4h-1z"),h.appendChild(T),this.sortIcon&&((i=this.sortIcon.parentNode)===null||i===void 0||i.removeChild(this.sortIcon),this.sortIcon=null);const M=this.group.rows[this.cellPosition];M.sortable&&M.sortable.sortNo&&(this.sortIcon=document.createElement("i"),this.sortIcon.appendChild(M.sortable.sortAscending?u:h),this.labelEl.appendChild(this.sortIcon),this.sortIcon.classList.add("simple-html-grid-fa-sort-number"),this.sortIcon.setAttribute("data-vgridsort",M.sortable.sortNo))}generateGui(){const i=K=>{const X=ne=>{const D=this.group.rows[this.cellPosition],ue=this.connector;D.sortable.auto!==!1&&ue.sortCallback(ne,D)};K.button===0&&(K.target.addEventListener("mouseup",X),setTimeout(()=>{K.target.removeEventListener("mouseup",X)},500))},a=ja("dragstart",()=>this.group.rows[this.cellPosition],this.connector,()=>this.group),u=ja("enter",()=>this.group.rows[this.cellPosition],this.connector,()=>this.group),g=ja("leave",()=>this.group.rows[this.cellPosition],this.connector,()=>this.group),h=K=>{K.button!==0&&Yn("simple-html-grid-menu-label",K,M,z,()=>this.group.rows[this.cellPosition])},T=this.group.rows[this.cellPosition],M=this.connector,z=this.ref,W=M.config;this.style.display="block",this.style.height=W.cellHeight+"px",this.style.width=this.group.width+"px",this.style.top=this.cellPosition*W.cellHeight+"px",this.labelEl=document.createElement("span"),this.labelEl.classList.add("simple-html-grid-label"),this.labelEl.onmouseenter=!T.disableDragDrop&&u,this.labelEl.onmouseleave=!T.disableDragDrop&&g,this.labelEl.onmousedown=K=>{const X=this.group.rows[this.cellPosition];X.sortable&&i(K),!X.disableDragDrop&&a(K)},this.oncontextmenu=K=>(K.preventDefault(),h(K),!1),this.appendChild(this.labelEl),this.appendChild(e0(this.ref,()=>this.group)),this.appendChild(Ea(M,()=>this.group,()=>this.group.rows[this.cellPosition],"left")),this.appendChild(Ea(M,()=>this.group,()=>this.group.rows[this.cellPosition],"right")),this.appendChild(Ea(M,()=>this.group,()=>this.group.rows[this.cellPosition],"top")),this.appendChild(Ea(M,()=>this.group,()=>this.group.rows[this.cellPosition],"bottom")),this.labelEl.innerText=this.capalize(this.group.rows[this.cellPosition].header||""),this.setSortIcon()}}Jt(i0,"simple-html-grid-cell-label");class n0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-group-label"),this.styling(),this.ref.addEventListener("column-resize",this),this.rows=this.group.rows.map((i,a)=>{const u=document.createElement("simple-html-grid-cell-filter");return u.connector=this.connector,u.group=this.group,u.ref=this.ref,u.cellPosition=a,this.appendChild(u),u})}handleEvent(i){i.type==="column-resize"&&this.xrender()}disconnectedCallback(){this.ref.removeEventListener("column-resize",this)}styling(){const i=this.connector.config;this.style.display="block";const a=this.connector.config.groupingSet&&this.connector.config.groupingSet.length,u=a?a*15:0;this.style.height=i.__rowHeight+"px",this.style.width=this.group.width+"px",this.style.left=this.group.__left+u+"px",this.style.top=i.__rowHeight+"px"}xrender(){this.styling();const i=this.group.rows;if(i.length!==this.rows.length)if(i.length<this.rows.length){const a=[];this.rows.forEach((u,g)=>{i[g]?a.push(u):this.removeChild(u)}),this.rows=a}else i.forEach((a,u)=>{if(this.rows[u]){const g=this.rows[u];g.connector=this.connector,g.group=this.group,g.ref=this.ref,g.cellPosition=u}else{const g=document.createElement("simple-html-grid-cell-filter");g.connector=this.connector,g.group=this.group,g.ref=this.ref,g.cellPosition=u,this.appendChild(g),this.rows.push(g)}});this.rows.forEach((a,u)=>{a.cellPosition=u,a.group=this.group}),this.rows.forEach(a=>a.updateGui())}}Jt(n0,"simple-html-grid-group-filter");class r0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-group-label"),this.styling(),this.ref.addEventListener("column-resize",this),this.rows=this.group.rows.map((i,a)=>{const u=document.createElement("simple-html-grid-cell-label");return u.connector=this.connector,u.group=this.group,u.ref=this.ref,u.cellPosition=a,this.appendChild(u),u})}handleEvent(i){i.type==="column-resize"&&this.styling()}disconnectedCallback(){this.ref.removeEventListener("column-resize",this)}styling(){const i=this.connector.config;this.style.display="block";const a=this.connector.config.groupingSet&&this.connector.config.groupingSet.length,u=a?a*15:0;this.style.height=i.__rowHeight+"px",this.style.width=this.group.width+"px",this.style.left=this.group.__left+u+"px"}xrender(){this.styling();const i=this.group.rows;if(i.length!==this.rows.length)if(i.length<this.rows.length){const a=[];this.rows.forEach((u,g)=>{i[g]?a.push(u):this.removeChild(u)}),this.rows=a}else i.forEach((a,u)=>{if(this.rows[u]){const g=this.rows[u];g.connector=this.connector,g.group=this.group,g.ref=this.ref,g.cellPosition=u}else{const g=document.createElement("simple-html-grid-cell-label");g.connector=this.connector,g.group=this.group,g.ref=this.ref,g.cellPosition=u,this.appendChild(g),this.rows.push(g)}});this.rows.forEach((a,u)=>{a.cellPosition=u,a.group=this.group}),this.rows.forEach(a=>a.update())}}Jt(r0,"simple-html-grid-group-label");class s0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-group-row");const i=this.connector.config;this.updateStyling(),this.rows=i.groups[this.group.i].rows.map((a,u)=>{const g=document.createElement("simple-html-grid-cell-row");return g.connector=this.connector,g.rowNo=this.rowNo,g.cell=a,g.group=this.group.i,g.ref=this.ref,g.cellPosition=u,this.appendChild(g),g})}updateCells(){const i=this.connector.config.groups[this.group.i].rows;if(this.rows.length!==i.length)if(i.length<this.rows.length){const a=[];this.rows.forEach((u,g)=>{i[g]?a.push(u):this.removeChild(u)}),this.rows=a,this.rows.forEach((u,g)=>{u.rowNo=this.rowNo,u.group=g})}else i.forEach((a,u)=>{if(this.rows[u]){const g=this.rows[u];g.rowNo=this.rowNo,g.cell=i[u],g.group=this.group.i,g.cellPosition=u}else{const g=document.createElement("simple-html-grid-cell-row");g.connector=this.connector,g.rowNo=this.rowNo,g.cell=i[u],g.group=this.group.i,g.ref=this.ref,g.cellPosition=u,this.appendChild(g),this.rows.push(g)}});this.rows.forEach((a,u)=>{a.rowNo=this.rowNo,a.group=this.group.i,a.cell=this.connector.config.groups[this.group.i].rows[u],a.cellPosition=u,a.updateInput()}),this.updateStyling()}updateStyling(){const i=this.connector.config,a=i.groupingSet&&i.groupingSet.length,u=a?a*15:0;this.style.height=i.__rowHeight+"px",this.style.width=i.groups[this.group.i].width+"px",this.style.transform=`translate3d(${i.groups[this.group.i].__left+u}px, 0px,  0px)`}handleEvent(i){i.type==="column-resize"&&(this.updateStyling(),this.rows.forEach(a=>{a.updateWidth()}))}disconnectedCallback(){this.ref.removeEventListener("column-resize",this)}}Jt(s0,"simple-html-grid-group-row");class a0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-header");const i=this.connector.config;this.style.top=i.panelHeight+"px",this.style.height=i.__rowHeight*2+2+"px",this.ref.addEventListener("horizontal-scroll",this),this.ref.addEventListener("reRender",this);const a=this.connector.config.groupingSet&&this.connector.config.groupingSet.length;this.groupMarginEl=document.createElement("simple-html-grid-col"),this.groupMarginEl.classList.add("simple-html-grid-grouping-row"),this.groupMarginEl.style.width=`${a?a*15:0}px`,this.groupMarginEl.style.left="0",this.groupMarginEl.style.display=a?"block":"none",this.appendChild(this.groupMarginEl),this.colLabels=this.connector.config.groups.map(u=>{const g=document.createElement("simple-html-grid-group-label");return g.connector=this.connector,g.ref=this.ref,g.group=u,this.appendChild(g),g}),this.colFilters=this.connector.config.groups.map(u=>{const g=document.createElement("simple-html-grid-group-filter");return g.connector=this.connector,g.ref=this.ref,g.group=u,this.appendChild(g),g})}handleEvent(i){if(i.type==="horizontal-scroll"){const a=this.connector.config;this.style.left=-a.scrollLeft+"px",this.style.width=a.__rowWidth+"px"}if(i.type==="reRender"){const a=this.connector.config,u=this.connector.config.groupingSet&&this.connector.config.groupingSet.length;this.groupMarginEl.style.width=`${u?u*15:0}px`,this.groupMarginEl.style.left="0",this.groupMarginEl.style.display=u?"block":"none",this.style.left=-a.scrollLeft+"px",this.style.width=a.__rowWidth+"px",this.style.top=a.panelHeight+"px",this.style.height=a.__rowHeight*2+2+"px";const g=this.connector.config.groups;if(g.length<this.colLabels.length){const h=[];this.colLabels.forEach((T,M)=>{g[M]?h.push(T):this.removeChild(T)}),this.colLabels=h}else g.forEach((h,T)=>{if(this.colLabels[T]){const M=this.colLabels[T];M.group=g[T]}else{const M=document.createElement("simple-html-grid-group-label");M.connector=this.connector,M.ref=this.ref,M.group=g[T],this.colLabels.push(M),this.appendChild(M)}});if(this.colLabels.forEach((h,T)=>{h.group=g[T],h.xrender()}),g.length<this.colFilters.length){const h=[];this.colFilters.forEach((T,M)=>{g[M]?h.push(T):this.removeChild(T)}),this.colFilters=h}else g.forEach((h,T)=>{if(this.colFilters[T]){const M=this.colFilters[T];M.group=g[T]}else{const M=document.createElement("simple-html-grid-group-filter");M.connector=this.connector,M.ref=this.ref,M.group=g[T],this.colFilters.push(M),this.appendChild(M)}});this.colFilters.forEach((h,T)=>{h.group=g[T],h.xrender()})}}disconnectedCallback(){this.ref.removeEventListener("horizontal-scroll",this),this.ref.removeEventListener("reRender",this)}}Jt(a0,"simple-html-grid-header");class o0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-footer");const i=this.connector.config;this.style.height=i.footerHeight+"px",this.ref.addEventListener("reRender",this),this.renderx()}disconnectedCallback(){this.ref.removeEventListener("reRender",this)}handleEvent(i){i.type==="reRender"&&(this.innerHTML="",this.renderx())}showEdit(){const i=document.createElement("div");i.classList.add("grid-edit-button");const a=document.createElement("button");return a.style.padding="2px",a.onclick=u=>{Yn("simple-html-grid-filter-dialog",u,this.connector,this.ref,null,null,null)},a.appendChild(document.createTextNode("Edit filter")),i.append(a),i}renderx(){const i=this.connector.completeDataset.length,a=this.connector.filteredDataset.length;this.connector.config.showDialogInFooter&&this.appendChild(this.showEdit());{const u=document.createElement("div");u.style.textAlign="center",u.appendChild(document.createTextNode(`${a}/${i}`)),this.appendChild(u)}{const u=document.createElement("div");u.style.display="flex",u.style.justifyContent="center";const g=document.createElement("span");g.style.marginRight="5px",g.style.maxWidth="90%;",g.style.whiteSpace="nowrap",g.style.textOverflow="ellipsis",g.appendChild(document.createTextNode(`${this.connector.getFilterString().replace(/\,/g,", ")}`)),u.appendChild(g),this.appendChild(u)}}}Jt(o0,"simple-html-grid-footer");function l0(n){return n&&n[0].toUpperCase()+n.substring(1,n.length)}class u0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-panel");const i=this.connector.config;this.style.height=i.panelHeight+"px",this.ref.addEventListener("reRender",this),this.addEventListener("contextmenu",this),this.updateGui()}handleEvent(i){i.type==="reRender"&&this.updateGui(),i.type==="contextmenu"&&(i.preventDefault(),Yn("simple-html-grid-menu-panel",i,this.connector,this.ref))}disconnectedCallback(){this.removeEventListener("contextmenu",this),this.ref.removeEventListener("reRender",this)}updateGui(){this.innerHTML="";const i=this.connector.config.groupingSet||[],a=z=>{z.target.getElementsByClassName("simple-html-grid-icon")[0].classList.remove("simple-html-grid-iconhidden")},u=z=>{z.target.getElementsByClassName("simple-html-grid-icon")[0].classList.add("simple-html-grid-iconhidden")},g=sc("enter",this.connector),h=sc("leave",this.connector),T=t0("dragstart",this.connector);i.map(z=>{const W=()=>{this.connector.removeGroup(z)},K=document.createElement("div");K.classList.add("simple-html-grid-grouping-panel-container"),K.onmouseenter=ce=>{a(ce),g(ce,z.attribute)},K.onmouseleave=ce=>{u(ce),h(ce)},K.onmousedown=ce=>{T(ce,z)};const X=document.createElement("p");X.classList.add("simple-html-grid-grouping-panel-p"),X.appendChild(document.createTextNode(`${l0(z.title||z.attribute)}`));const ne=document.createElement("i"),D="http://www.w3.org/2000/svg",ue=document.createElementNS(D,"svg");ue.classList.add("simple-html-grid-icon","simple-html-grid-iconhidden"),ue.onclick=W,ue.setAttributeNS(null,"viewBox","0 0 16 16");const ee=document.createElementNS(D,"path");return ee.setAttributeNS(null,"d","M3 4l4.3 4L3 12h1.4L8 8.7l3.5 3.3H13L8.6 8 13 4h-1.5L8 7.3 4.4 4H3z"),ue.appendChild(ee),ne.appendChild(ue),X.appendChild(ne),K.appendChild(X),K}).forEach(z=>{this.appendChild(z)})}}Jt(u0,"simple-html-grid-panel");class h0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid-row"),this.ref.addEventListener("vertical-scroll",this),this.ref.addEventListener("selection",this),this.ref.addEventListener("column-resize",this);const i=this.connector.config.groupingSet&&this.connector.config.groupingSet.length;this.groupMarginEl=document.createElement("simple-html-grid-col"),this.groupMarginEl.classList.add("simple-html-grid-grouping-row"),this.groupMarginEl.style.width=`${i?i*15:0}px`,this.groupMarginEl.style.left="0",this.groupMarginEl.style.display=i?"block":"none",this.groupMarginEl.connector=this.connector,this.groupMarginEl.row=this.row,this.groupDataEl=document.createElement("simple-html-grid-col"),this.groupDataEl.classList.add("simple-html-grid-grouping-row"),this.groupDataEl.style.width=`${i?i*15:0}px`,this.groupDataEl.style.left="0",this.groupDataEl.style.display=i?"block":"none",this.groupDataEl.connector=this.connector,this.groupDataEl.row=this.row,this.appendChild(this.groupMarginEl),this.appendChild(this.groupDataEl),this.colEls=this.ref.colCache.map(a=>{const u=document.createElement("simple-html-grid-group-row");return u.onclick=g=>{this.connector.highlightRow(g,this.row.i)},u.connector=this.connector,u.rowNo=this.row.i,u.ref=this.ref,u.group=a,this.appendChild(u),u}),this.updateView()}verticalScrollEvent(){this.groupMarginEl.row=this.row,this.groupMarginEl.updateGui(),this.groupDataEl.connector=this.connector,this.groupDataEl.row=this.row,this.groupDataEl.ref=this.ref,this.groupDataEl.updateGui(),this.row.update&&(this.colEls.forEach((i,a)=>{i.rowNo=this.row.i,i.group=this.ref.colCache[a],i.updateCells()}),this.row.update=!1,this.updateView())}syncColumnsWithColCache(){if(this.ref.colCache.length<this.colEls.length){const i=[];this.colEls.forEach((a,u)=>{this.ref.colCache[u]?i.push(a):this.removeChild(a)}),this.colEls=i}else this.ref.colCache.forEach((i,a)=>{if(this.colEls[a]){const u=this.colEls[a];u.rowNo=this.row.i,u.group=this.ref.colCache[a]}else{const u=document.createElement("simple-html-grid-group-row");u.onclick=g=>{this.connector.highlightRow(g,this.row.i)},u.connector=this.connector,u.rowNo=this.row.i,u.ref=this.ref,u.group=i,u.group.update=!0,this.colEls.push(u),this.appendChild(u)}});this.colEls.forEach((i,a)=>{i.rowNo=this.row.i,i.group=this.ref.colCache[a],i.updateCells()})}updateRowColumns(){this.groupMarginEl.row=this.row,this.groupMarginEl.updateGui(),this.groupDataEl.connector=this.connector,this.groupDataEl.row=this.row,this.groupDataEl.ref=this.ref,this.groupDataEl.updateGui(),this.colEls.length!==this.ref.colCache.length?this.syncColumnsWithColCache():this.colEls.forEach((i,a)=>{i.rowNo=this.row.i,i.group=this.ref.colCache[a],i.updateCells()}),this.updateView()}horizontalScollEvent(){this.colEls.length!==this.ref.colCache.length?this.syncColumnsWithColCache():this.colEls.forEach((i,a)=>{i.group=this.ref.colCache[a],i.rowNo=this.row.i,i.updateCells()}),this.updateView()}handleEvent(i){if(i.type==="column-resize"){const a=this.connector.displayedDataset[this.row.i];a&&!a.__group&&this.colEls.forEach(u=>{u.updateCells()}),this.updateView()}i.type==="selection"&&this.updateView()}disconnectedCallback(){this.ref.removeEventListener("vertical-scroll",this),this.ref.removeEventListener("selection",this),this.ref.removeEventListener("column-resize",this)}updateView(){var i;const a=this.connector.displayedDataset[this.row.i];this.connector.config.__rowHeight>this.connector.config.cellHeight&&a&&!a.__group?this.classList.add("grouping-row-border"):this.classList.remove("grouping-row-border"),this.style.height=this.connector.getScrollVars.__SCROLL_HEIGHTS[this.row.i]+"px",this.style.transform=`translate3d(0px, ${this.connector.getScrollVars.__SCROLL_TOPS[this.row.i]}px, 0px)`,this.style.display="block",((i=this.row)===null||i===void 0?void 0:i.i)%2===0?this.classList.add("simple-html-grid-row-even"):this.classList.remove("simple-html-grid-row-even"),this.connector.isSelected(this.row.i)?this.classList.add("simple-html-grid-selected-row"):this.classList.remove("simple-html-grid-selected-row")}}Jt(h0,"simple-html-grid-row");class c0 extends HTMLElement{connectedCallback(){this.updateGui()}updateGui(){if(this.innerHTML="",this.ref){this.style.width="100%",this.style.height=this.connector.getScrollVars.__SCROLL_HEIGHTS[this.row.i]+"px";const i=this.connector.displayedDataset[this.row.i];if(i&&i.__group){this.style.display="block",this.style.left=(i.__groupLvl?i.__groupLvl*15:0)+"px";const a=()=>{i.__groupExpanded?this.connector.groupCollapse(i.__groupID):this.connector.groupExpand(i.__groupID)},u=document.createElement("i");u.onclick=a,this.appendChild(u);const g="http://www.w3.org/2000/svg",h=document.createElementNS(g,"svg");h.classList.add("simple-html-grid-icon"),h.setAttributeNS(null,"viewBox","0 0 16 16");const T=document.createElementNS(g,"path");T.setAttributeNS(null,"d",i.__groupExpanded?"M4.8 7.5h6.5v1H4.8z":"M7.4 4.8v2.7H4.7v1h2.7v3h1v-3h2.8v-1H8.5V4.8h-1z"),h.appendChild(T),u.appendChild(h);const M=document.createElement("span");M.appendChild(document.createTextNode(`${i.__groupName} (${i.__groupTotal})`)),this.appendChild(M)}else this.style.display="none"}else if(this.connector){const i=this.connector.config.groupingSet&&this.connector.config.groupingSet.length,a=this.row?this.connector.displayedDataset[this.row.i]:null;a&&a.__group?this.style.width=a.__groupLvl*15+"px":this.style.width=(i?i*15:0)+"px",this.style.height=(this.row?this.connector.getScrollVars.__SCROLL_HEIGHTS[this.row.i]:this.connector.config.cellHeight)+"px",this.style.display=i?"block":"none"}}}Jt(c0,"simple-html-grid-col");let je=null;class f0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid","simple-html-grid-menu"),document.addEventListener("click",this),setTimeout(()=>{document.addEventListener("contextmenu",this)},50),this.buildHtml();const i=this.getBoundingClientRect(),a=window.innerHeight,u=window.innerWidth;i.bottom>a?this.style.top=`${this.offsetTop-(i.bottom-a)}px`:i.right>u&&(this.style.left=`${this.offsetLeft-(i.right-u)}px`)}disconnectedCallback(){document.removeEventListener("click",this),document.removeEventListener("contextmenu",this)}handleEvent(i){i.target!==this&&this.removeSelf()}capalize(i){return i&&(i=i.toLowerCase(),i[0].toUpperCase()+i.substring(1,i.length))}action(i){return dn(this,null,function*(){if(this.connector.publishEvent(i,this),i==="copy-cell"&&this.rowData)try{let h=function(T){T.clipboardData.setData("text/html",je),T.clipboardData.setData("text/plain",je),T.preventDefault()};var a=h;const u=this.connector.numberFormater,g=this.connector.dateFormater;je=this.rowData[this.cell.attribute],this.cell.type==="date"?je=g.fromDate(je):this.cell.type==="number"&&(je=u.fromNumber(je)),document.addEventListener("copy",h),document.execCommand("copy"),document.removeEventListener("copy",h)}catch(u){console.error(u)}if((i==="copy-column"||i==="copy-column-with-header")&&this.rowData)try{let h=function(M){M.clipboardData.setData("text/html",g()),M.clipboardData.setData("text/plain",u()),M.preventDefault()};var a=h;const u=()=>{je="",i==="copy-column-with-header"&&(je=this.capalize(this.cell.attribute)+`
`);const M=this.connector.numberFormater,z=this.connector.dateFormater;return this.connector.getSelectedRows().forEach(W=>{if(!this.connector.displayedDataset[W].__group){const K=this.connector.displayedDataset[W][this.cell.attribute];this.cell.type==="date"?je=je+z.fromDate(K)+`
`:this.cell.type==="number"?je=je+M.fromNumber(K)+`
`:je=je+(K||"")+`
`}}),je},g=()=>{je=`<html>
                                <body>
                                <style>
                                    table {
                                        border-collapse: collapse;
                                        border:.5pt solid windowtext;
                                    }
                                    td,
                                    th {
                                        border-collapse: collapse;
                                        padding:3px;
                                        border:.5pt solid windowtext;
                                    }
                                </style>
                                <table>`,i==="copy-column-with-header"&&(je=je+"<tr><th>"+this.capalize(this.cell.attribute)+"</th></tr>");const M=this.connector.numberFormater,z=this.connector.dateFormater;return this.connector.getSelectedRows().forEach(W=>{if(!this.connector.displayedDataset[W].__group){const K=this.connector.displayedDataset[W][this.cell.attribute];this.cell.type==="date"?je=je+"<tr><td>"+z.fromDate(K)+"</td></tr>":this.cell.type==="number"?je=je+"<tr><td>"+M.fromNumber(K)+"</td ></tr>":je=je+"<tr><td>"+(K||"")+"</td></tr>"}}),je=je+"</table></body></html>",je};document.addEventListener("copy",h),document.execCommand("copy"),document.removeEventListener("copy",h)}catch(u){console.error(u)}if(i==="copy-row-with-header"&&this.rowData)try{let M=function(W){W.clipboardData.setData("text/html",T()),W.clipboardData.setData("text/plain",h()),W.preventDefault()};var a=M;const u=this.connector.config.groups.flatMap(W=>W.rows.map(K=>K.attribute)),g=this.connector.config.groups.flatMap(W=>W.rows.map(K=>K.type)),h=()=>{je="",u.forEach(X=>{je=je+this.capalize(X)+"	"}),je=je+`
`;const W=this.connector.numberFormater,K=this.connector.dateFormater;return this.connector.getSelectedRows().forEach(X=>{this.connector.displayedDataset[X].__group||(u.forEach((ne,D)=>{const ue=this.connector.displayedDataset[X][ne];g[D]==="date"?je=je+K.fromDate(ue)+"	":g[D]==="number"?je=je+W.fromNumber(ue)+"	":je=je+(ue||"")+"	"}),je=je+`
`)}),je},T=()=>{je=`<html>
                                <body>
                                <style>
                                    table {
                                        border-collapse: collapse;
                                        border:.5pt solid windowtext;
                                    }
                                    td,
                                    th {
                                        border-collapse: collapse;
                                        padding:3px;
                                        border:.5pt solid windowtext;
                                    }
                                </style>
                                <table>`,je=je+"<tr>",u.forEach(X=>{je=je+"<th>"+this.capalize(X)+"</th>"}),je=je+"</tr>";const W=this.connector.numberFormater,K=this.connector.dateFormater;return this.connector.getSelectedRows().forEach(X=>{if(!this.connector.displayedDataset[X].__group){let ne="<tr>";u.forEach((D,ue)=>{const ee=this.connector.displayedDataset[X][D];g[ue]==="date"?ne=ne+"<td>"+K.fromDate(ee)+"</td>":g[ue]==="number"?ne=ne+"<td>"+W.fromNumber(ee)+"</td>":ne=ne+"<td>"+(ee||"")+"</td>"}),je=je+ne+"</tr>"}}),je=je+"</table></body></html>",je};document.addEventListener("copy",M),document.execCommand("copy"),document.removeEventListener("copy",M)}catch(u){console.error(u)}if(i==="paste-into-selected-rows-in-selected-column")try{let u;navigator.clipboard.readText?u=yield navigator.clipboard.readText():u=je,(u==="undefined"||u==="null")&&(u=null),this.pasteIntoCells(u)}catch(u){console.error(u)}i==="clear-cells-selected-rows-in-selected-columns"&&this.pasteIntoCells(null)})}pasteIntoCells(i){const a=this.connector.numberFormater,u=this.connector.dateFormater;this.connector.getSelectedRows().forEach(g=>{this.cell.type==="number"?this.connector.displayedDataset[g][this.cell.attribute]=a.toNumber(i):this.cell.type==="date"?this.connector.displayedDataset[g][this.cell.attribute]=u.toDate(i):this.connector.displayedDataset[g][this.cell.attribute]=i}),this.connector.reRender()}removeSelf(){document.body.removeChild(this)}buildHtml(){{const h=document.createElement("p");h.onclick=()=>this.action("copy-cell"),h.appendChild(document.createTextNode("Copy")),h.classList.add("simple-html-grid-menu-item"),this.appendChild(h)}{const h=document.createElement("p");h.onclick=()=>this.action("copy-column-with-header"),h.appendChild(document.createTextNode("Copy column")),h.classList.add("simple-html-grid-menu-item"),this.appendChild(h)}{const h=document.createElement("p");h.onclick=()=>this.action("copy-row-with-header"),h.appendChild(document.createTextNode("Copy rows")),h.classList.add("simple-html-grid-menu-item"),this.appendChild(h)}if(!this.connector.config.readonly&&!this.cell.readonly){{const h=document.createElement("p");h.onclick=()=>this.action("paste-into-selected-rows-in-selected-column"),h.appendChild(document.createTextNode("Paste into rows")),h.classList.add("simple-html-grid-menu-item"),this.appendChild(h)}{const h=document.createElement("p");h.onclick=()=>this.action("clear-cells-selected-rows-in-selected-columns"),h.appendChild(document.createTextNode("Clear rows")),h.classList.add("simple-html-grid-menu-item"),this.appendChild(h)}}if(this.cell.type==="number"){let h=function(ee,ce){return parseFloat((ee+ce).toFixed(5))},T=function(ee,ce){return ce>ee?ce:ee},M=function(ee,ce){return ee===null||ce<ee?ce:ee},z=function(ee,ce){return Math.round(ce/ee)};var i=h,a=T,u=M,g=z;const W=this.connector.getDatasource(),K=W.getSelection().getSelectedRows(),X=W.getRows();let ne=0,D=0,ue=null;K.forEach(ee=>{const ce=X[ee];ce&&ce[this.cell.attribute]&&(ne=h(ne,ce[this.cell.attribute]),D=T(D,ce[this.cell.attribute]),ue=M(ue,ce[this.cell.attribute]))});{const ee=document.createElement("hr");this.appendChild(ee)}{const ee=document.createElement("p");ee.onclick=()=>dn(this,null,function*(){const $=Math.round(ne*100)/100;yield navigator.clipboard.writeText(Ji.fromNumber($))});const ce=Math.round(ne*100)/100;ee.appendChild(document.createTextNode(`Sum: ${Ji.fromNumber(ce)}`)),ee.classList.add("simple-html-grid-menu-item"),this.appendChild(ee)}{const ee=document.createElement("p");ee.onclick=()=>dn(this,null,function*(){const $=Math.round(D*100)/100;yield navigator.clipboard.writeText(Ji.fromNumber($))});const ce=Math.round(D*100)/100;ee.appendChild(document.createTextNode(`Max: ${Ji.fromNumber(ce)}`)),ee.classList.add("simple-html-grid-menu-item"),this.appendChild(ee)}{const ee=document.createElement("p");ee.onclick=()=>dn(this,null,function*(){const $=Math.round(ue*100)/100;yield navigator.clipboard.writeText(Ji.fromNumber($))});const ce=Math.round(ue*100)/100;ee.appendChild(document.createTextNode(`Min: ${Ji.fromNumber(ce)}`)),ee.classList.add("simple-html-grid-menu-item"),this.appendChild(ee)}{const ee=document.createElement("p");ee.onclick=()=>dn(this,null,function*(){const $=Math.round(z(K.length,ne)*100)/100;yield navigator.clipboard.writeText(Ji.fromNumber($))});const ce=Math.round(z(K.length,ne)*100)/100;ee.appendChild(document.createTextNode(`Avg: ${Ji.fromNumber(ce)}`)),ee.classList.add("simple-html-grid-menu-item"),this.appendChild(ee)}{const ee=document.createElement("p");ee.onclick=()=>dn(this,null,function*(){yield navigator.clipboard.writeText(Ji.fromNumber(K.length))}),ee.appendChild(document.createTextNode(`Rows: ${K.length}`)),ee.classList.add("simple-html-grid-menu-item"),this.appendChild(ee)}}}}Jt(f0,"simple-html-grid-menu-row");class d0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid","simple-html-grid-menu"),document.addEventListener("click",this),setTimeout(()=>{document.addEventListener("contextmenu",this)},50),this.buildHtml();const i=this.getBoundingClientRect(),a=window.innerHeight,u=window.innerWidth;i.bottom>a&&(this.style.top=`${this.offsetTop-(i.bottom-a)}px`),i.right>u&&(this.style.left=`${this.offsetLeft-(i.right-u)}px`)}disconnectedCallback(){document.removeEventListener("click",this),document.removeEventListener("contextmenu",this)}handleEvent(i){i.target!==this&&this.removeSelf()}select(i,a,u){i==="sort"&&(this.cell.sortable?(this.cell.sortable.sortAscending=a,this.cell.sortable.noToggle=!0):this.cell.sortable={sortAscending:a,noToggle:!0},this.connector.sortCallback({shiftKey:u},this.cell)),i==="groupBy"&&this.cell.allowGrouping&&this.connector.groupingCallback(null,this.cell,null),this.removeSelf()}removeSelf(){this===null||this===void 0||this.parentNode.removeChild(this)}buildHtml(){const i=[1,1,1,1,1,1,1,1,1].map(()=>document.createElement("p"));i.forEach(a=>a.classList.add("simple-html-grid-menu-item")),i[0].onclick=()=>this.select("sort",!1,!1),i[0].appendChild(document.createTextNode("Sort asc")),i[1].onclick=()=>this.select("sort",!0,!1),i[1].appendChild(document.createTextNode("Sort desc")),i[2].onclick=()=>this.select("sort",!0,!0),i[2].appendChild(document.createTextNode("Sort asc (add)")),i[3].onclick=()=>this.select("sort",!1,!0),i[3].appendChild(document.createTextNode("Sort desc (add)")),i[4].onclick=()=>this.connector.autoResizeColumns(),i[4].appendChild(document.createTextNode("Auto resize columns")),i[5].onclick=()=>this.connector.autoResizeColumns(this.cell),i[5].appendChild(document.createTextNode("Auto resize this column")),i[6].onclick=()=>this.select("groupBy"),i[6].appendChild(document.createTextNode("Group by")),i[7].onclick=()=>{const a=this.cell;this.connector.config.optionalCells||(this.connector.config.optionalCells=[]),this.connector.config.optionalCells.push(a);let u=null;this.connector.config.groups.forEach((g,h)=>{const T=g.rows.indexOf(a);T!==-1&&g.rows.splice(T,1),g.rows.length===0&&(u=h)}),u!==null&&this.connector.config.groups.splice(u,1),this.connector.manualConfigChange(this.connector.config)},i[7].appendChild(document.createTextNode("Hide column")),i[8].onclick=a=>Yn("simple-html-grid-column-chooser",a,this.connector,this.ref,null,null,null),i[8].appendChild(document.createTextNode("Column Chooser")),i.forEach(a=>this.appendChild(a))}}Jt(d0,"simple-html-grid-menu-label");class p0 extends HTMLElement{constructor(){super(...arguments),this.defaultMenu=!0,this.selectAll=!0,this.availableOnly=!1,this.enableAvailableOnlyOption=!1}connectedCallback(){var i;this.classList.add("simple-html-grid","simple-html-grid-menu"),document.addEventListener("click",this),this.ref.addEventListener("vertical-scroll",this),setTimeout(()=>{document.addEventListener("contextmenu",this)},50),this.search=((i=this.cell.filterable)===null||i===void 0?void 0:i.currentValue)||null,this.search&&(this.serachRegex=new RegExp(`${this.search.replace(/\*/g,".*").replace(/\%/g,".*")}.*`,"gim")),this.getDropdownData(),this.generateMainMenu();const a=this.getBoundingClientRect(),u=window.innerHeight,g=window.innerWidth;a.bottom>u&&(this.style.top=`${this.offsetTop-(a.bottom-u)}px`),a.right>g&&(this.style.left=`${this.offsetLeft-(a.right-g)}px`)}getDropdownData(){var i;if(!this.cell.type||this.cell.type==="text"){const a=this.availableOnly?this.connector.getDatasource().getRows(!0):this.connector.getDatasource().getAllData(),u=this.cell.attribute,g=new Set,h=a.length;let T=!1;this.search&&(this.serachRegex=new RegExp(`${this.search.replace(/\*/g,".*").replace(/\%/g,".*")}.*`,"gim"));for(let W=0;W<h;W++)a[W]&&a[W][u]&&g.size<50?(typeof a[W][u]=="string"&&(this.search?this.serachRegex.test(a[W][u])&&g.add(a[W][u].toLocaleUpperCase()):g.add(a[W][u].toLocaleUpperCase())),typeof a[W][u]=="number"&&(this.search?this.serachRegex.test(a[W][u])&&g.add(a[W][u]):g.add(a[W][u]))):T=!0;this.dataFilterSet=g,T&&this.dataFilterSet.add("NULL");const M=Array.from(g).sort();T&&M.unshift("NULL"),this.dataFilterSetFull=new Set(M);const z=this.connector.getDatasource().getFilter();!((i=z==null?void 0:z.filterArguments)===null||i===void 0)&&i.length&&(z==null||z.filterArguments.forEach(W=>{if(W.attribute===this.cell.attribute&&Array.isArray(W.value)&&(W.operator==="IN"&&(this.dataFilterSet=new Set(W.value),this.selectAll=!1),W.operator==="NOT_IN")){const K=new Set(W.value);this.dataFilterSet=new Set(Array.from(this.dataFilterSetFull).filter(X=>!K.has(X))),this.selectAll=!1}})),this.enableAvailableOnlyOption=this.connector.getDatasource().getRows(!0).length!==this.connector.getDatasource().getAllData().length||this.dataFilterSet.size===this.dataFilterSetFull.size}}disconnectedCallback(){document.removeEventListener("click",this),document.removeEventListener("contextmenu",this),this.ref.removeEventListener("vertical-scroll",this)}handleEvent(i){if(this.wait){this.wait=!1;return}i.target!==this&&this.removeSelf()}select(i){this.cell.filterable&&(this.cell.filterable.operator=i),this.removeSelf()}removeSelf(){document.body.removeChild(this)}clearAll(){this.connector.setCurrentFilter(null),this.connector.config.groups.flatMap(a=>a.rows).forEach(a=>{const u=a.filterable;u&&(u.currentValue=null)}),this.connector.reRender(),this.connector.reRunFilter()}clearThis(){const i=this.connector.getDatasource().getFilter(),a=g=>{g&&Array.isArray(g.filterArguments)&&(g.filterArguments=g.filterArguments.filter(h=>h.attribute!==this.cell.attribute),g.filterArguments.forEach(h=>{h.type==="GROUP"&&a(h)}))};a(i),this.connector.config.groups.flatMap(g=>g.rows).forEach(g=>{const h=g.filterable;h&&this.cell.attribute===g.attribute&&(h.currentValue=null)}),this.connector.reRender(),this.connector.reRunFilter()}setFilter(i){const a=this.connector.getDatasource().getFilter(),u=h=>{h&&Array.isArray(h.filterArguments)&&(h.filterArguments=h.filterArguments.filter(T=>T.attribute!==this.cell.attribute),h.filterArguments.forEach(T=>{T.type==="GROUP"&&u(T)}))};u(a),this.connector.config.groups.flatMap(h=>h.rows).forEach(h=>{const T=h.filterable;T&&this.cell.attribute===h.attribute&&(T.currentValue=null)}),a&&Array.isArray(a.filterArguments)?(a.filterArguments.push({type:"CONDITION",attribute:this.cell.attribute,operator:i,attributeType:this.cell.type}),this.connector.getDatasource().setFilter(a)):this.connector.getDatasource().setFilter({type:"GROUP",logicalOperator:"AND",filterArguments:[{type:"CONDITION",attribute:this.cell.attribute,operator:i,attributeType:this.cell.type}]}),this.connector.reRender(),this.connector.reRunFilter()}generateOperatorMenu(){var i,a;this.innerHTML="";const u=((a=(i=this.cell)===null||i===void 0?void 0:i.filterable)===null||a===void 0?void 0:a.operator)||"BEGIN_WITH";{const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.onclick=()=>this.select("EQUAL"),T.style.fontWeight=u==="EQUAL"?"bold":"",T.appendChild(document.createTextNode("Equal to")),this.appendChild(T)}{const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.onclick=()=>this.select("NOT_EQUAL_TO"),T.style.fontWeight=u==="NOT_EQUAL_TO"?"bold":"",T.appendChild(document.createTextNode("Not equal to")),this.appendChild(T)}{const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.onclick=()=>this.select("BEGIN_WITH"),T.style.fontWeight=u==="BEGIN_WITH"?"bold":"",T.appendChild(document.createTextNode("Begin with")),this.appendChild(T)}{const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.onclick=()=>this.select("GREATER_THAN"),T.style.fontWeight=u==="GREATER_THAN"?"bold":"",T.appendChild(document.createTextNode("Greater than")),this.appendChild(T)}{const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.onclick=()=>this.select("GREATER_THAN_OR_EQUAL_TO"),T.style.fontWeight=u==="GREATER_THAN_OR_EQUAL_TO"?"bold":"",T.appendChild(document.createTextNode("Greater than or equal")),this.appendChild(T)}{const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.onclick=()=>this.select("LESS_THAN"),T.style.fontWeight=u==="LESS_THAN"?"bold":"",T.appendChild(document.createTextNode("Less than")),this.appendChild(T)}{const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.onclick=()=>this.select("LESS_THAN_OR_EQUAL_TO"),T.style.fontWeight=u==="LESS_THAN_OR_EQUAL_TO"?"bold":"",T.appendChild(document.createTextNode("Less than or equal")),this.appendChild(T)}{const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.onclick=()=>this.select("END_WITH"),T.style.fontWeight=u==="END_WITH"?"bold":"",T.appendChild(document.createTextNode("End with")),this.appendChild(T)}{const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.onclick=()=>this.select("CONTAINS"),T.style.fontWeight=u==="CONTAINS"?"bold":"",T.appendChild(document.createTextNode("Contains")),this.appendChild(T)}{const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.onclick=()=>this.select("DOES_NOT_CONTAIN"),T.style.fontWeight=u==="DOES_NOT_CONTAIN"?"bold":"",T.appendChild(document.createTextNode("Does not contain")),this.appendChild(T)}{const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.onclick=()=>this.select("END_WITH"),T.style.fontWeight=u==="END_WITH"?"bold":"",T.appendChild(document.createTextNode("End with")),this.appendChild(T)}const g=document.createElement("hr");this.appendChild(g);const h=document.createElement("p");h.classList.add("simple-html-grid-menu-item"),h.appendChild(document.createTextNode("Back")),h.onclick=()=>{this.defaultMenu=!0,this.wait=!0,this.generateMainMenu()},this.appendChild(h)}filterValueClick(i){this.wait=!0,this.selectAll=!1,this.dataFilterSet.has(i)?this.dataFilterSet.delete(i):this.dataFilterSet.add(i),this.selectAll=this.dataFilterSetFull.size===this.dataFilterSet.size&&!this.availableOnly;const a=this.scrollAreaRef.scrollTop;this.generateMainMenu(),this.scrollAreaRef.scrollTop=a}selectAllClick(){this.wait=!0,this.selectAll=!this.selectAll,this.selectAll?this.dataFilterSet=new Set(this.dataFilterSetFull):this.dataFilterSet=new Set,this.generateMainMenu()}generateMainMenu(){this.innerHTML="";const i=()=>{this.wait=!0,this.availableOnly=!this.availableOnly,this.selectAll=this.dataFilterSetFull.size===this.dataFilterSet.size&&!this.availableOnly,this.getDropdownData(),this.generateMainMenu()},a=()=>{const g=Array.from(this.dataFilterSetFull).filter(h=>!this.dataFilterSet.has(h));g.length<this.dataFilterSet.size?this.connector.filterCallback(null,this.cell,g.length?g:null,this.search?this.search:null,!!g.length):this.connector.filterCallback(null,this.cell,this.dataFilterSet.size?Array.from(this.dataFilterSet):null,this.search?this.search:null,!1)};let u=document.createElement("p");if(u.classList.add("simple-html-grid-menu-item"),u.onclick=()=>{this.defaultMenu=!1,this.wait=!0,this.generateOperatorMenu()},u.appendChild(document.createTextNode("Filters")),this.appendChild(u),u=document.createElement("hr"),this.appendChild(u),u=document.createElement("p"),u.classList.add("simple-html-grid-menu-item"),u.onclick=g=>Yn("simple-html-grid-filter-dialog",g,this.connector,this.ref,null,null,null),u.appendChild(document.createTextNode("Advanced")),this.appendChild(u),u=document.createElement("hr"),this.appendChild(u),u=document.createElement("p"),u.classList.add("simple-html-grid-menu-item"),u.onclick=()=>this.clearAll(),u.appendChild(document.createTextNode("Remove all filters")),this.appendChild(u),u=document.createElement("p"),u.classList.add("simple-html-grid-menu-item"),u.onclick=()=>this.clearThis(),u.appendChild(document.createTextNode("Reset column filter")),this.appendChild(u),u=document.createElement("p"),u.classList.add("simple-html-grid-menu-item"),u.onclick=()=>this.setFilter("IS_BLANK"),u.appendChild(document.createTextNode("Set blank filter")),this.appendChild(u),u=document.createElement("p"),u.classList.add("simple-html-grid-menu-item"),u.onclick=()=>this.setFilter("IS_NOT_BLANK"),u.appendChild(document.createTextNode("Set not blank filter")),this.appendChild(u),u=document.createElement("hr"),this.appendChild(u),this.enableAvailableOnlyOption){u=document.createElement("div"),u.style.padding="2px";const g=document.createElement("input");g.style.padding="2px",g.type="checkbox",g.checked=this.availableOnly,g.onclick=()=>i(),u.appendChild(g);const h=document.createElement("label");h.style.padding="2px",h.onclick=()=>i(),h.appendChild(document.createTextNode("Filter Available")),u.appendChild(h),u.classList.add("simple-html-defaults"),this.appendChild(u)}if(this.cell.type==="text"||this.cell.type===void 0){const g=document.createElement("input");g.classList.add("simple-html-grid-menu-item-input"),g.style.outline="none",g.style.width="100%",g.type="text",g.placeholder="search",g.value=this.search,g.checked=this.availableOnly,g.onclick=()=>{this.wait=!0},g.oninput=M=>{this.search=M.target.value||null,this.getDropdownData(),this.scrollAreaRef.innerText="",this.generateScrollListItems(this.scrollAreaRef)},this.appendChild(g);const h=document.createElement("div");h.style.overflowY="auto",h.style.maxHeight="250px",this.generateScrollListItems(h),this.appendChild(h),this.scrollAreaRef=h;const T=document.createElement("p");T.classList.add("simple-html-grid-menu-item"),T.classList.add("simple-html-grid-menu-item-center"),T.onclick=()=>a(),T.appendChild(document.createTextNode("Run filter")),this.appendChild(T)}}generateScrollListItems(i){const a=document.createElement("div");a.style.padding="2px";const u=document.createElement("input");u.style.padding="2px",u.type="checkbox",u.checked=this.selectAll,u.onclick=()=>this.selectAllClick(),a.appendChild(u);const g=document.createElement("label");g.style.padding="2px",g.onclick=()=>this.selectAllClick(),g.appendChild(document.createTextNode("Select all")),a.appendChild(g),a.classList.add("simple-html-defaults"),i.appendChild(a),Array.from(this.dataFilterSetFull).forEach(h=>{const T=document.createElement("div");T.style.padding="2px",T.style.display="flex",T.className="simple-html-grid-hover";const M=document.createElement("input");M.style.padding="2px",M.type="checkbox",M.checked=this.dataFilterSet.has(h),M.onclick=()=>this.filterValueClick(h),T.appendChild(M);const z=document.createElement("label");z.style.padding="2px",z.style.width="100%",z.onclick=()=>this.filterValueClick(h),z.appendChild(document.createTextNode(h==="NULL"?"Blank":h)),T.appendChild(z),i.appendChild(T),i.classList.add("simple-html-defaults")})}}Jt(p0,"simple-html-grid-menu-filter");class g0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid","simple-html-grid-menu"),document.addEventListener("click",this),setTimeout(()=>{document.addEventListener("contextmenu",this)},50),this.buildHtml();const i=this.getBoundingClientRect(),a=window.innerHeight,u=window.innerWidth;i.bottom>a&&(this.style.top=`${this.offsetTop-(i.bottom-a)}px`),i.right>u&&(this.style.left=`${this.offsetLeft-(i.right-u)}px`)}disconnectedCallback(){document.removeEventListener("click",this),document.removeEventListener("contextmenu",this)}handleEvent(i){i.target!==this&&this.removeSelf()}select(i){i==="clear"&&(this.connector.config.groupingExpanded=[],this.connector.config.groupingSet=[],this.connector.manualConfigChange()),i==="collapse"&&this.connector.groupCollapse(null),i==="expand"&&this.connector.groupExpand(null),this.removeSelf()}removeSelf(){document.body.removeChild(this)}buildHtml(){const i=[1,1,1].map(()=>document.createElement("p"));i.forEach(a=>a.classList.add("simple-html-grid-menu-item")),i[0].onclick=()=>this.select("clear"),i[0].appendChild(document.createTextNode("Clear grouping")),i[1].onclick=()=>this.select("collapse"),i[1].appendChild(document.createTextNode("Collapse all")),i[2].onclick=()=>this.select("expand"),i[2].appendChild(document.createTextNode("Expand all")),i.forEach(a=>this.appendChild(a))}}Jt(g0,"simple-html-grid-menu-panel");function _0(n,i,a){const u="http://www.w3.org/2000/svg",g=document.createElementNS(u,"svg");g.setAttributeNS(null,"viewBox","0 0 24 24"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"stroke-linecap","round"),g.setAttributeNS(null,"stroke-linejoin","round"),g.setAttributeNS(null,"stroke-width","2"),g.setAttributeNS(null,"stroke","currentColor");const h=document.createElementNS(u,"path");h.setAttributeNS(null,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),g.appendChild(h);const T=document.createElement("button");return T.classList.add("dialog-item-x","dialog-condition-trash"),T.onclick=()=>{i&&i.splice(a,1),n.generate()},T.appendChild(g),T}function m0(n,i){const a="http://www.w3.org/2000/svg",u=document.createElementNS(a,"svg");u.setAttributeNS(null,"viewBox","0 0 24 24"),u.setAttributeNS(null,"fill","none"),u.setAttributeNS(null,"stroke-linecap","round"),u.setAttributeNS(null,"stroke-linejoin","round"),u.setAttributeNS(null,"stroke-width","2"),u.setAttributeNS(null,"stroke","currentColor");const g=document.createElementNS(a,"path");g.setAttributeNS(null,"d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"),u.appendChild(g);const h=document.createElement("button");return h.classList.add("dialog-item-x","dialog-condition-type"),h.onclick=()=>{n.valueType=n.valueType==="VALUE"?"ATTRIBUTE":"VALUE",i.generate()},h.appendChild(u),h}function v0(n,i){if(n.operator==="IN"||n.operator==="NOT_IN"){const u=document.createElement("textarea");return u.classList.add("dialog-item-y"),u.style.textAlign="center",u.oninput=g=>{const h=g.target.value.toUpperCase().split(`
`);h[h.length-1]===""&&h.pop(),n.value=h},u.textContent=Array.isArray(n.value)?n.value.join(`
`):n.value.toString(),u}const a=document.createElement("input");switch(a.classList.add("dialog-item-y"),a.style.textAlign="center",n.attributeType){case"boolean":return a.type="checkbox",a.checked=n.value,a.onchange=u=>{n.value=u.target.checked},a.oninput=u=>{n.value=u.target.checked},a;case"image":case"empty":case"date":return a.type="text",a.placeholder=i.connector.dateFormater.getPlaceHolderDate(),a.value=i.connector.dateFormater.fromDate(n.value),a.onchange=u=>{n.value=i.connector.dateFormater.toDate(u.target.value)},a.oninput=u=>{n.value=u.target.value},a;case"number":return a.type="text",a.value=i.connector.numberFormater.fromNumber(n.value),a.oninput=u=>{n.value=i.connector.numberFormater.toNumber(u.target.value)},a;default:return a.type="text",a.value=n.value,a.oninput=u=>{n.value=u.target.value},a}}function Uu(n,i){const a=document.createElement("simple-html-grid-menu-custom");a.style.top=n.clientY+document.documentElement.scrollTop+"px",a.style.left=n.clientX+document.documentElement.scrollLeft+"px",a.style.maxHeight="300px",a.style["overflow-y"]="auto",a.rows=i,document.body.appendChild(a)}function y0(n,i){const a=document.createElement("button");a.style.margin="1px",a.classList.add("dialog-item-y"),a.onclick=g=>{Uu(g,[{operator:"BEGIN_WITH",title:"Begin with",callback:()=>{n.operator="BEGIN_WITH",i.generate()}},{operator:"EQUAL",title:"Equal to",callback:()=>{n.operator="EQUAL",i.generate()}},{operator:"CONTAINS",title:"Contains",callback:()=>{n.operator="CONTAINS",i.generate()}},{operator:"DOES_NOT_CONTAIN",title:"Does not contain",callback:()=>{n.operator="DOES_NOT_CONTAIN",i.generate()}},{operator:"END_WITH",title:"End with",callback:()=>{n.operator="END_WITH",i.generate()}},{operator:"GREATER_THAN",title:"Greater than",callback:()=>{n.operator="GREATER_THAN",i.generate()}},{operator:"GREATER_THAN_OR_EQUAL_TO",title:"Greater than or equal to",callback:()=>{n.operator="GREATER_THAN_OR_EQUAL_TO",i.generate()}},{operator:"LESS_THAN",title:"Less than",callback:()=>{n.operator="LESS_THAN",i.generate()}},{operator:"LESS_THAN_OR_EQUAL_TO",title:"Less then or equal to",callback:()=>{n.operator="LESS_THAN_OR_EQUAL_TO",i.generate()}},{operator:"NOT_EQUAL_TO",title:"Not Equal to",callback:()=>{n.operator="NOT_EQUAL_TO",i.generate()}},{operator:"IN",title:"IN",callback:()=>{n.operator="IN",i.generate()}},{operator:"NOT_IN",title:"NOT IN",callback:()=>{n.operator="NOT_IN",i.generate()}},{operator:"IS_BLANK",title:"IS BLANK",callback:()=>{n.operator="IS_BLANK",i.generate()}},{operator:"IS_NOT_BLANK",title:"IS NOT BLANK",callback:()=>{n.operator="IS_NOT_BLANK",i.generate()}}])};const u=document.createElement("b");return u.appendChild(document.createTextNode(Os[n.operator])),a.appendChild(u),a}function ac(n,i,a){const u=document.createElement("button");u.classList.add("dialog-item-y"),u.onclick=h=>{Uu(h,i.filterAttributes.map(T=>({title:T.attribute,callback:()=>{a?n.value=T.attribute:n.attribute=T.attribute,n.attributeType=T.type,i.generate()}})))};let g=n.value||"click to select column";return a!==!0&&(g=n.attribute),u.appendChild(document.createTextNode(g)),u}function w0(n,i,a){return i.width=a+i.width,Array.isArray(n)?n.map((u,g)=>{if(u.type==="GROUP")return zf(u,i,a,n);{const h=document.createElement("li");return h.classList.add("dialog-row"),h.appendChild(ac(u,i)),h.appendChild(y0(u,i)),u.operator!=="IS_BLANK"&&u.operator!=="IS_NOT_BLANK"&&h.appendChild(u.valueType==="VALUE"?v0(u,i):ac(u,i,!0)),h.appendChild(m0(u,i)),h.appendChild(_0(i,n,g)),h}}):null}function zf(n,i,a,u){const g=document.createElement("ul");g.classList.add("dialog-row","main-group",a?"skipme":"first-dialog-row"),g.style.flexFlow="column";const h=document.createElement("div");h.classList.add("dialog-row"),h.style.flexFlow="row";const T=document.createElement("button");T.classList.add("dialog-item-x","group-operator"),T.onclick=()=>{n.logicalOperator=n.logicalOperator==="AND"?"OR":"AND",i.generate()};const M=document.createElement("b");M.appendChild(document.createTextNode(n.logicalOperator)),T.appendChild(M),h.appendChild(T);const z=document.createElement("button");z.classList.add("dialog-item-x"),z.onclick=ce=>{Uu(ce,[{title:"Insert Group",callback:()=>{const $=n;n.type="GROUP",n.logicalOperator="AND",n.filterArguments=[JSON.parse(JSON.stringify($))],i.generate()}},{title:"Add Group",callback:()=>{n.filterArguments.push({type:"GROUP",logicalOperator:"AND",filterArguments:[]}),i.generate()}},{title:"Add condition",callback:()=>{n.filterArguments.splice(0,0,{type:"CONDITION",logicalOperator:"NONE",attribute:"click to select column",operator:"EQUAL",valueType:"VALUE",attributeType:"text",filterArguments:[],value:""}),i.generate()}}])};const W="http://www.w3.org/2000/svg",K=document.createElementNS(W,"svg");K.setAttributeNS(null,"viewBox","0 0 24 24"),K.setAttributeNS(null,"fill","none"),K.setAttributeNS(null,"stroke-linecap","round"),K.setAttributeNS(null,"stroke-linejoin","round"),K.setAttributeNS(null,"stroke-width","2"),K.setAttributeNS(null,"stroke","currentColor");const X=document.createElementNS(W,"path");X.setAttributeNS(null,"d","M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"),K.appendChild(X),z.appendChild(K),h.appendChild(z);const ne=document.createElement("button");ne.classList.add("dialog-item-x"),ne.onclick=()=>{u&&u.splice(u.indexOf(n),1),u||(n.filterArguments=[]),i.generate()};const D=document.createElementNS(W,"svg");D.setAttributeNS(null,"viewBox","0 0 24 24"),D.setAttributeNS(null,"fill","none"),D.setAttributeNS(null,"stroke-linecap","round"),D.setAttributeNS(null,"stroke-linejoin","round"),D.setAttributeNS(null,"stroke-width","2"),D.setAttributeNS(null,"stroke","currentColor");const ue=document.createElementNS(W,"path");ue.setAttributeNS(null,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),D.appendChild(ue),ne.appendChild(D),h.appendChild(ne),g.appendChild(h);const ee=w0(n.filterArguments,i,a+1);return ee&&ee.length&&ee.forEach(ce=>{g.appendChild(ce)}),g}class x0 extends HTMLElement{connectedCallback(){this.style.top="0",this.style.left="0";const i={type:"GROUP",logicalOperator:"AND",filterArguments:[]};this.filter=this.connector.getCurrentFilter()||i,Array.isArray(this.filter)&&(this.filter=i),this.classList.add("simple-html-grid-menu-full"),this.filterAttributes=this.connector.config.groups.flatMap(a=>a.rows),Array.isArray(this.connector.config.optionalCells)&&(this.filterAttributes=this.filterAttributes.concat(this.connector.config.optionalCells)),this.generate()}handleEvent(i){i.target!==this&&this.removeSelf()}removeSelf(){document.body.removeChild(this)}generate(){this.innerHTML="";const i=document.createElement("div");i.style.width="650px",i.classList.add("simple-html-grid","simple-html-filter-dialog");const a=document.createElement("div");a.classList.add("dialog-row","main-group","filter-dialog-top-row");const u=document.createElement("span");u.appendChild(document.createTextNode("Filter Editor")),a.appendChild(u),i.appendChild(a),i.appendChild(zf(this.filter,this,0)),this.appendChild(i);const g=document.createElement("div");g.classList.add("dialog-row","main-group","filter-dialog-bottom-row"),i.appendChild(g);const h=document.createElement("button");h.classList.add("dialog-item-buttombuttons"),h.onclick=()=>{this.removeSelf()},h.appendChild(document.createTextNode("Cancel")),g.appendChild(h),i.appendChild(g);const T=document.createElement("button");T.classList.add("dialog-item-buttombuttons"),T.onclick=()=>{this.connector.config.groups.flatMap(W=>W.rows).forEach(W=>{const K=W.filterable;K&&(K.currentValue=null)}),this.connector.setCurrentFilter(this.filter),this.connector.reRunFilter()},T.appendChild(document.createTextNode("Apply")),g.appendChild(T);const M=document.createElement("button");M.classList.add("dialog-item-buttombuttons"),M.onclick=()=>{this.connector.config.groups.flatMap(W=>W.rows).forEach(W=>{const K=W.filterable;K&&(K.currentValue=null)}),this.connector.setCurrentFilter(this.filter),this.connector.reRunFilter(),this.removeSelf()},M.appendChild(document.createTextNode("OK")),g.appendChild(M)}}Jt(x0,"simple-html-grid-filter-dialog");class S0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid","simple-html-grid-menu"),this.ref.addEventListener("reRender",this),this.show()}handleEvent(i){if(i.type==="reRender"){this.innerHTML="",this.show();return}i.target!==this&&this.removeSelf()}removeSelf(){document.body.removeChild(this),this.ref.removeEventListener("reRender",this)}show(){var i;const a=document.createElement("div");a.classList.add("simple-html-grid");const u=document.createElement("span");u.classList.add("block","simple-html-grid-menu-item"),u.onclick=()=>{this.removeSelf()};const g=document.createElement("b");g.appendChild(document.createTextNode("Close")),u.appendChild(g),a.appendChild(u),this.appendChild(a);const h=(i=this.connector.config.optionalCells)===null||i===void 0?void 0:i.map(T=>{const M=ja("dragstart",()=>T,this.connector,null),z=document.createElement("span");return z.classList.add("block","simple-html-grid-menu-item"),z.onmousedown=W=>{M(W)},z.appendChild(document.createTextNode(T.header)),z});h&&h.length&&h.forEach(T=>{this.appendChild(T)})}}Jt(S0,"simple-html-grid-column-chooser");class C0 extends HTMLElement{connectedCallback(){this.classList.add("simple-html-grid","simple-html-grid-menu"),setTimeout(()=>{document.addEventListener("click",this),document.addEventListener("contextmenu",this)},50),this.renderx()}disconnectedCallback(){document.removeEventListener("click",this),document.removeEventListener("contextmenu",this)}handleEvent(i){i.target!==this&&this.removeSelf()}removeSelf(){document.body.removeChild(this)}renderx(){this.rows.forEach(i=>{const a=document.createElement("p");a.classList.add("simple-html-grid-menu-item"),a.onclick=()=>i.callback(i),a.appendChild(document.createTextNode(i.title)),this.appendChild(a)})}}Jt(C0,"simple-html-grid-menu-custom");let Di;function b0(n,i,a){return u=>{function g(){var T,M;const z=u.target.scrollLeft,W=n.config.scrollLeft;let K=!1;if(Math.abs(z-W)>2e3&&(K=!0),K||Di)Di&&clearTimeout(Di),Di=setTimeout(()=>{a.resetColCache(),Di=null,a.getElementsByTagName("simple-html-grid-body")[0].rows.forEach(ne=>{ne.horizontalScollEvent()}),a.colCache.forEach(ne=>ne.update=!1)},70);else{const X=a.getElementsByTagName("simple-html-grid-body")[0],ne=X==null?void 0:X.clientWidth,D=X==null?void 0:X.scrollLeft,ue=[];let ee=Math.floor(ne/50)||22;if(ee>n.config.groups.length&&(ee=n.config.groups.length),n.config.groups.forEach((J,te)=>{const pe=J.__left+J.width,ye=J.__left,B=ne+D;if(pe>=D&&ye<=B){ue.push({i:te,update:!0,found:!1});return}}),ue.length<ee)for(;ue.length<ee;){let J=ue[ue.length-1].i+1;J>=n.config.groups.length?(J=ue[0].i-1,ue.unshift({i:J,update:!0,found:!1})):ue.push({i:J,update:!0,found:!1})}a.colCache=((M=(T=X.rows[0])===null||T===void 0?void 0:T.colEls)===null||M===void 0?void 0:M.map(J=>J.group))||[],a.colCache.forEach(J=>J.found=!1);const ce=ue.map(J=>J.i);a.colCache.forEach(J=>{ce.indexOf(J.i)!==-1?(J.found=!0,J.update=!1,ce.splice(ce.indexOf(J.i),1)):(J.found=!1,J.update=!0)}),ce.length&&a.colCache.forEach(J=>{J.update&&ce.length&&(J.i=ce.pop(),J.found=!0)});let $=a.colCache.length;for(let J=0;J<$;J++)a.colCache[J].found===!1&&(X.rows.forEach(te=>{te.colEls[J].parentNode.removeChild(te.colEls[J]),te.colEls.splice(J,1)}),a.colCache.splice(J,1),J--,$--);Di=null,X.rows.forEach(J=>{J.horizontalScollEvent()}),a.colCache.forEach(J=>{J.update=!1})}n.config.scrollLeft=u.target.scrollLeft,a.triggerEvent("horizontal-scroll")}function h(){document.activeElement&&document.activeElement.blur();const T=u.target.scrollTop,M=n.config.lastScrollTop;n.config.lastScrollTop=T;let z=!1;Math.abs(T-M)>700&&(z=!0),z||Di?(Di&&clearTimeout(Di),Di=setTimeout(()=>{Di=null,so(n,i,a,T)},90)):(Di=null,so(n,i,a,T))}n.config.scrollLeft!==u.target.scrollLeft&&g(),n.config.lastScrollTop!==u.target.scrollTop&&h()}}function oc(n,i,a){const u=b0(n,i,a),g=rc("enter",n),h=rc("leave",n);if(n.config.delayRowRenderToNextTick)setTimeout(()=>{const W=document.createElement("simple-html-grid-body");W.connector=n,W.ref=a,W.rowPositionCache=i,W.onscroll=u,a.appendChild(W)},n.config.delayMs||0);else{const W=document.createElement("simple-html-grid-body");W.connector=n,W.ref=a,W.rowPositionCache=i,W.onscroll=u,a.appendChild(W)}const T=document.createElement("simple-html-grid-panel");T.connector=n,T.ref=a,T.onmouseleave=h,T.onmouseenter=g,a.appendChild(T);const M=document.createElement("simple-html-grid-header");M.connector=n,M.ref=a,a.appendChild(M);const z=document.createElement("simple-html-grid-footer");z.connector=n,z.ref=a,a.appendChild(z)}let E0=class extends HTMLElement{constructor(){super(...arguments),this.rowCache=[],this.colCache=[]}set interface(i){this.__DATASOURCE_INTERFACE!==i&&(this.__DATASOURCE_INTERFACE=i,this.__DATASOURCE_INTERFACE.connectGrid(this)),this.resizeInit||this.initResizerEvent()}get interface(){return this.__DATASOURCE_INTERFACE}connectedCallback(){this.resizeInit=!1,this.interface&&this.isConnected&&(this.oldHeight=this.clientHeight,this.oldWidth=this.clientWidth,this.resizeTimer,this.resetRowCache(),this.interface.connectGrid(this),this.children.length||oc(this.interface,this.rowCache,this),this.initResizerEvent()),this.onkeydown=i=>{i.ctrlKey===!0&&(i.key==="A"||i.key==="a")&&(i.preventDefault(),this.interface.selectAll(),this.reRender())}}initResizerEvent(){new ResizeObserver(()=>{this.isConnected&&((this.oldHeight!==this.clientHeight||this.oldWidth!==this.clientWidth&&this.resizeInit)&&(this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.resetRowCache(),this.reRender()},100)),this.resizeInit=!0)}).observe(this)}disconnectedCallback(){this.__DATASOURCE_INTERFACE&&this.__DATASOURCE_INTERFACE.disconnectGrid(this)}reRender(){const i=this.getElementsByTagName("simple-html-grid-body")[0];i&&i.scrollTop!==void 0&&this.interface&&so(this.interface,this.rowCache,this,i.scrollTop,!0),this.triggerEvent("reRender")}manualConfigChange(){this.children.length||oc(this.interface,this.rowCache,this),this.reRender()}triggerEvent(i,a){const u=new CustomEvent(i,{bubbles:!0,detail:{data:a}});this.dispatchEvent(u)}resetColCache(){const i=this.getElementsByTagName("simple-html-grid-body")[0],a=(i==null?void 0:i.clientWidth)||1980,u=(i==null?void 0:i.scrollLeft)||0;let g=Math.floor(a/50)||22;if(g>this.interface.config.groups.length&&(g=this.interface.config.groups.length),this.colCache=[],this.interface.config.groups.forEach((h,T)=>{const M=h.__left+h.width,z=h.__left,W=a+u,K=u;if(K<=z&&z<=W||K<=M&&M<=W){this.colCache.push({i:T,update:!0,found:!1});return}}),this.colCache.length<g){const h=this.colCache.map(z=>z.i),M=Array.from(new Array(g)).map((z,W)=>W).filter(z=>!h.includes(z));for(;this.colCache.length<g;)this.colCache.push({i:M.pop(),update:!0,found:!1})}}resetRowCache(){if(this.interface){const i=this.getElementsByTagName("simple-html-grid-body")[0],a=(i==null?void 0:i.clientHeight)||this.interface.config.cellHeight*50;this.resetColCache();let u=Math.round(Math.floor(a/this.interface.config.cellHeight))+2;u>80&&(u=80);const g=this.interface.displayedDataset.length>u?u:this.interface.displayedDataset.length;if(g!==this.rowCache.length)if(this.rowCache.length>g){let h=this.rowCache.length;for(let M=0;M<h;M++)(this.rowCache&&this.rowCache[M].i>g-1||this.rowCache[M].i<0)&&(this.rowCache.splice(M,1),M--,h--);const T=g-this.rowCache.length;for(let M=0;M<T;M++)this.rowCache.push({i:M,update:!0})}else{const h=g-this.rowCache.length;for(let T=0;T<h;T++)this.rowCache.push({i:this.rowCache.length,update:!0})}}else this.rowCache=[]}};Jt(E0,"simple-html-grid");const Ff={cellHeight:20,panelHeight:25,footerHeight:40,readonly:!0,selectionMode:"single",sortingSet:[{attribute:"elementName",ascending:!0}],groupingSet:[{title:"Element",attribute:"elementName"}],groups:[{width:200,rows:[{header:"Element",attribute:"elementName",filterable:{},allowGrouping:!0,sortable:{}}]},{width:200,rows:[{header:"ID",attribute:"id",filterable:{},allowGrouping:!0,sortable:{}}]},{width:200,rows:[{header:"TagName",attribute:"tagName",filterable:{},allowGrouping:!0,sortable:{}}]},{width:300,rows:[{header:"XPath",attribute:"xpath",filterable:{},allowGrouping:!0,sortable:{}}]}]},ao=new Ks,k0=new Hu(Ff,ao);ao.addEventListener({handleEvent:n=>{var i;if(n.type==="currentEntity"){const a=(i=ao.currentEntity)==null?void 0:i.component;Rt.getState().setSelected(a)}return!0}});const qa={gridInterFace:k0,dataSource:ao},oo=new Ks,N0=new Hu(Ff,oo);oo.addEventListener({handleEvent:n=>{var i;if(n.type==="currentEntity"){const a=(i=oo.currentEntity)==null?void 0:i.component;Rt.getState().setSelected(a)}return!0}});const Ka={gridInterFace:N0,dataSource:oo};function T0(n){if(n==="//PlantModel/ActuatingSystem"||n==="//PlantModel/InstrumentationLoopFunction"||n==="//PlantModel/MetaData"||n==="//PlantModel/PipingNetworkSystem"||n==="//PlantModel/PlantStructureItem"||n==="//PlantModel/ProcessInstrumentationFunction"||n==="//PlantModel/ProcessSignalGeneratingSystem"||n==="//PlantModel/Equipment")return!0}let Bf="";function P0(n){Bf=n}function Vl(){return Bf}let Vf="";function Hl(n){Vf=n}function Hf(){return Vf}const I0={cellHeight:20,panelHeight:25,footerHeight:40,readonly:!0,selectionMode:"single",sortingSet:[{attribute:"node",ascending:!0}],groups:[{width:200,rows:[{header:"Node",attribute:"node",filterable:{},allowGrouping:!0,sortable:{}}]},{width:110,rows:[{header:"Line",attribute:"line",filterable:{},allowGrouping:!0,sortable:{}}]},{width:1450,rows:[{header:"Error message",attribute:"message",filterable:{},allowGrouping:!0,sortable:{}}]}]},lo=new Ks,A0=new Hu(I0,lo);lo.addEventListener({handleEvent:n=>{var i;if(n.type==="currentEntity"){const a=(i=lo.currentEntity)==null?void 0:i.component;Rt.getState().setSelected(a)}return!0}});const Xr={gridInterFace:A0,dataSource:lo};function Uf(n,i,a,u){return new Promise(g=>{const h=new Worker("xmlvalidateWorker.js"),T=[];h.postMessage({content:u,name:a}),h.onmessage=M=>{var W,K;let z=!0;M.data.file===a&&M.data.loaded?(z=!1,h.postMessage({content:i,name:n})):M.data.file===n&&(M.data.message&&(z=!1,T.push({line:M.data.line,node:M.data.node,message:M.data.message})),M.data.valid!==void 0&&(z=!1,h.terminate(),g(T))),(W=M.data)!=null&&W.includes&&((K=M.data)!=null&&K.includes("failed to compile"))?(console.log(M),h.terminate(),g([{message:"xsd failed to compile"}])):z&&console.log(M)}})}function L0(){const n=Rt();return be.jsxs("label",{className:"inline-block p-2 bg-gray-700/50 -10 relative text-center text-indigo-400 font-semibold hover:bg-gray-700",children:["Open XML File",be.jsx("input",{className:" hidden",type:"file",accept:".xml",onChange:i=>{const a=new FileReader;a.onload=()=>dn(this,null,function*(){P0(a.result),Hl("");const u=new U_(a.result,"pidCanvas");u.draw(),u.addEventListener({handleEvent(W){n.setSelected(W.data)}});const g=S_(),h=[],T=[];g.forEach(W=>{var ne,D,ue,ee,ce;let K=((ne=W.element)==null?void 0:ne.tagName)||"",X=W.parent||null;for(;X!==null;)K=`${X.element.tagName}/${K}`,X=X.parent||null;K=`//${K}`,T0(K)&&T.push({id:(D=W.iD)==null?void 0:D.valueAsString,elementName:W.element.tagName,tagName:(ue=W.tagName)==null?void 0:ue.valueAsString,xpath:K,component:W}),h.push({id:(ee=W.iD)==null?void 0:ee.valueAsString,elementName:W.element.tagName,tagName:(ce=W.tagName)==null?void 0:ce.valueAsString,xpath:K,component:W})}),Xr.dataSource.setData([]),qa.dataSource.setData([]),qa.dataSource.setData(h),qa.gridInterFace.autoResizeColumns(),Ka.dataSource.setData([]),Ka.dataSource.setData(T),Ka.gridInterFace.autoResizeColumns();const M=u.getSchemaVersion()||"unknown";Rt.setState({selectedXmlFileName:`${Rt.getState().selectedXmlFileName} - (Schema Version: ${M})`});const z=u.getSchemaLocation();if(!z)Rt.setState({selectedXsdFileName:"No schema location found, you need to select file manually"});else try{const W=yield fetch(z);if(W.ok){const K=yield W.text();Hl(K);const X=yield Uf("test.xml",Vl(),"test.xsd",Hf());Xr.dataSource.setData([]),Xr.dataSource.setData(X),Rt.setState({selectedXsdFileName:z})}else Rt.setState({selectedXsdFileName:"Unable to download: "+z})}catch(W){Rt.setState({selectedXsdFileName:"Unable to download: "+z})}i.target.value=""}),a.onloadend=()=>{n.setLoading(!1)},a.onerror=()=>{},i!=null&&i.target.files&&(Rt.setState({currentTab:"viewer",isLoading:!0,loadingHeader:"Reading XML",loadingMessage:"Please wait while we parse and generate graphics"}),Rt.setState({selectedXmlFileName:i.target.files[0].name,selectedXsdFileName:""}),a.readAsText(i.target.files[0]))}})]})}function O0(){var g;const n=Rt(),i=[];function a(h){let T=h,M=!0;for(;M;)["Text","Line","CenterLine","Shape","Ellipse","Circle"].includes(T.elementTagName)||(T.elementTagName&&i.push({type:"element",name:"element",value:T.elementTagName}),T.genericAttributes&&(i.push({type:"attribute-header",name:"Attributes",value:""}),Object.keys(T.attributes).forEach(W=>{i.push({type:"attribute",name:W,value:T.attributes[W]})})),T.genericAttributes&&Object.keys(T.genericAttributes).forEach(W=>{i.push({type:"genericAttributes",name:"GenericAttribute Set",value:W}),Object.keys(T.genericAttributes[W]).forEach(X=>{i.push({type:"genericAttribute",name:X,value:T.genericAttributes[W][X]})})})),T.parent?T=T.parent:M=!1}if(!((g=n.selected)!=null&&g.elementTagName))return be.jsxs("div",{className:"border-gray-600 detailView flex flex-col text-xs w-full ",children:[be.jsx("span",{className:"pl-1 border-b bg-gray-700 border-b-gray-600 text-lg font-bold",children:"Selected"}),"Nothing selected"]});console.log(n.selected),a(n.selected);let u=-1;return be.jsxs("div",{className:"border-gray-600 detailView flex flex-col text-xs w-full ",children:[be.jsx("span",{className:"pl-1 border-b  border-b-gray-600 text-lg font-bold ",children:"Selected Element"}),be.jsx("div",{className:"flex flex-col overflow-auto scrollbar",style:{minHeight:0},children:i.map((h,T)=>{const M=T+":"+h.type+"-"+h.name+"-"+h.value;return h.type==="element"?(u++,be.jsx("span",{className:"border-b bg-gray-800 border-b-gray-700 flex pt-2 pb-1 sticky top-0",children:be.jsxs("span",{className:"pl-1 font-semibold flex-1 text-sm flex",children:[be.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 ml-2 mr-1 text-yellow-400",children:be.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l7.5-7.5 7.5 7.5m-15 6l7.5-7.5 7.5 7.5"})}),"(",u,") ",h.value]})},M)):h.type==="attribute-header"?be.jsxs("span",{className:"border-b bg-gray-700 border-b-gray-400 flex pt-2 pb-1 sticky top-7 text-sm",children:[be.jsx("span",{className:"pl-3 font-semibold flex-1 overflow-x-auto scrollbar",children:h.name}),be.jsx("span",{className:"ml-2  ",children:h.value})]},M):h.type==="genericAttributes"?be.jsx("span",{className:"border-b bg-gray-700 border-b-gray-400 flex pt-2 pb-1 sticky top-7 text-sm",children:be.jsxs("span",{className:"pl-3 font-semibold flex-1 overflow-x-auto scrollbar",children:[h.name," - ",h.value]})},M):be.jsxs("span",{className:"pl-2 border-b border-b-gray-600 flex pr-2",children:[be.jsxs("span",{className:"pl-4 font-semibold flex-1 overflow-x-auto scrollbar",children:[h.name,":"]}),be.jsx("span",{className:"ml-2 flex-1 overflow-x-auto scrollbar",children:h.value})]},M)})})]})}function ka(n){const i=Rt();return fs.useEffect(()=>{const a=document.getElementById("pidCanvas");a&&a.setAttribute("resize","true")}),!i.selectedXmlFileName&&!n.stayHidden?be.jsxs("div",{className:"m-auto flex flex-col items-center text-green-300",children:[be.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-photo   h-28 w-28",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[be.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),be.jsx("line",{x1:15,y1:8,x2:"15.01",y2:8}),be.jsx("rect",{x:4,y:4,width:16,height:16,rx:3}),be.jsx("path",{d:"M4 15l4 -4a3 5 0 0 1 3 0l5 5"}),be.jsx("path",{d:"M14 14l1 -1a3 5 0 0 1 3 0l2 2"})]}),be.jsx("span",{children:"Open XML file to get started."})]}):n.stayHidden?be.jsx("canvas",{id:"pidCanvas",className:"border w-full h-full border-gray-800 hidden  "}):be.jsx("canvas",{id:"pidCanvas",className:"border w-full h-full border-gray-800  "})}class Gu extends Fl.Component{constructor(a){super(a);Ft(this,"myRef");this.myRef=Fl.createRef()}shouldComponentUpdate(){return!0}componentDidMount(){this.myRef.current.resizeInit=!0,this.myRef.current.interface=this.props.interface,this.myRef.current.connectedCallback(),this.myRef.current.addEventListener("dblclick",function(a){if(a.type==="dblclick"&&a.target.className==="simple-html-grid-row-input"){const u=a.target.parentNode;if(u&&u.cell){const g=u.connector.displayedDataset[u.rowNo][u.cell.attribute];typeof g=="string"&&g.indexOf("http")===0&&window.open(g,g)}}})}render(){var a,u;return be.jsx("simple-html-grid",{ref:this.myRef,style:{width:(a=this.props.style)==null?void 0:a.width,height:(u=this.props.style)==null?void 0:u.height},class:this.props.className})}}function M0(){return be.jsx("div",{className:"flex-grow",children:be.jsx("div",{className:"flex flex-row h-full w-full",children:be.jsx(Gu,{className:"simple-html-grid flex-grow",interface:Ka.gridInterFace})})})}function R0(){return be.jsx("div",{className:"flex-grow",children:be.jsx("div",{className:"flex flex-row h-full w-full",children:be.jsx(Gu,{className:"simple-html-grid flex-grow",interface:qa.gridInterFace})})})}function D0(){const n=Rt();return be.jsxs("label",{className:"inline-block p-2 bg-gray-700/50 -10 relative text-center text-indigo-400 font-semibold hover:bg-gray-700",children:["Use XSD File",be.jsx("input",{className:" hidden",type:"file",accept:".xsd",onChange:i=>{Vl()||alert("open xml first");const a=new FileReader;a.onload=()=>dn(this,null,function*(){Hl(a.result);const u=yield Uf("test.xml",Vl(),"test.xsd",Hf());Xr.dataSource.setData([]),Xr.dataSource.setData(u),i.target.value=""}),a.onloadend=()=>{n.setLoading(!1)},a.onerror=()=>{},i!=null&&i.target.files&&(Rt.setState({currentTab:"xsdValidation",isLoading:!0,loadingHeader:"Reading XSD",loadingMessage:"Please wait while we parse and validate xml"}),Rt.setState({selectedXsdFileName:i.target.files[0].name}),a.readAsText(i.target.files[0]))}})]})}function z0(){return be.jsxs("div",{className:"flex flex-col h-full w-full flex-grow",children:[be.jsxs("div",{className:"pr-2 pl-2 pb-2 ",children:[be.jsxs("span",{className:"text-gray-400 italic text-xs",children:["XML Schema Definition or XSD is a recommendation by the World Wide Web Consortium (W3C) to describe and validate the structure and content of an XML document. An XSD is similar to earlier XML schema languages, such as Document Type Definition (DTD), but it is a more powerful alternative as it provides greater control over the XML structure."," ",be.jsx("a",{className:"text-indigo-400",href:"https://www.w3.org/XML/Schema",target:"_blank",rel:"noreferrer",children:"Read more"})]}),be.jsxs("div",{className:"flex ",children:[be.jsx(D0,{}),be.jsx("div",{className:"w-96 flex ml-3",children:be.jsx("a",{className:"text-indigo-400 m-auto",href:"https://github.com/ProteusXML/proteusxml",target:"_blank",rel:"noreferrer",children:"Click here to find Proteus XSD files (github)."})})]})]}),be.jsx(Gu,{className:"simple-html-grid flex-grow ",interface:Xr.gridInterFace})]})}function lc(){const n=Rt();return n.currentTab==="idList"?be.jsxs(be.Fragment,{children:[be.jsx(ka,{stayHidden:!0}),be.jsx(R0,{})]}):n.currentTab==="conceptualModelList"?be.jsxs(be.Fragment,{children:[be.jsx(ka,{stayHidden:!0}),be.jsx(M0,{})]}):n.currentTab==="xsdValidation"?be.jsxs(be.Fragment,{children:[be.jsx(ka,{stayHidden:!0}),be.jsx(z0,{})]}):be.jsx(be.Fragment,{children:be.jsx(ka,{stayHidden:!1})})}function F0(){const n=Rt(),i=" p-1 min-w-[14rem] font-semibold ",a=i+" text-gray-300 font-semibold ",u=i+" text-indigo-400 font-semibold hover:bg-gray-700 ",g=" border-b-4 w-full border-indigo-600 ",h=" border-b-4 w-full border-gray-700 ";let T=u,M=u,z=u,W=u,K=h,X=h,ne=h,D=h;return n.currentTab==="viewer"&&(T=a,K=g),n.currentTab==="idList"&&(M=a,X=g),n.currentTab==="conceptualModelList"&&(z=a,ne=g),n.currentTab==="xsdValidation"&&(W=a,D=g),be.jsxs("div",{className:" border-b border-b-gray-700 flex border-gray-800",children:[be.jsxs("div",{className:"border-l border-t border-gray-800",children:[be.jsx("button",{className:T,onClick:()=>{Rt.setState({currentTab:"viewer"})},children:"Viewer"}),be.jsx("div",{className:K})]}),be.jsxs("div",{className:"border-l  border-t border-gray-800",children:[be.jsx("button",{className:z,onClick:()=>{Rt.setState({currentTab:"conceptualModelList"})},children:"Conceptual Model"}),be.jsx("div",{className:ne})]}),be.jsxs("div",{className:"border-l border-t border-gray-800",children:[be.jsx("button",{className:M,onClick:()=>{Rt.setState({currentTab:"idList"})},children:"ID List"}),be.jsx("div",{className:X})]}),be.jsxs("div",{className:"border-l border-r border-t border-gray-800",children:[be.jsx("button",{className:W,onClick:()=>{Rt.setState({currentTab:"xsdValidation"})},children:"XSD validation"}),be.jsx("div",{className:D})]})]})}function B0(){const n=Rt();return be.jsxs("div",{className:"flex flex-col h-full bg-gray-900 text-gray-200 min-w-[]",children:[be.jsx(w_,{}),be.jsx(jg,{}),be.jsxs("div",{className:"fixed bottom-0 left-0 right-0 text-gray-500 flex flex-col text-sm",children:[be.jsx("span",{className:"m-auto ",children:"No files is uploaded to any third party - all work is done in the browser."}),be.jsx("div",{className:"m-auto italic",children:"LibXml2 - v2.10.2+ latest commit (20 sept - 2022)"})]}),be.jsx("div",{className:"fixed top-2 right-2  p-2",children:be.jsxs("div",{className:"flex gap-x-2 text-indigo-600",children:[be.jsx(Kg,{}),be.jsx(qg,{})]})}),be.jsxs("div",{className:"p-2 flex",children:[be.jsx("div",{className:"mr-2",children:be.jsx(L0,{})}),be.jsxs("div",{className:"flex flex-col p-1",children:[be.jsxs("div",{className:"text-xs ",children:[be.jsx("span",{className:"mr-1 font-bold",children:"XML File:"}),be.jsx("span",{children:n.selectedXmlFileName})]}),be.jsxs("div",{className:"text-xs",children:[be.jsx("span",{className:"mr-1 font-bold",children:"XSD File:"}),be.jsx("span",{children:n.selectedXsdFileName})]})]})]}),be.jsx("div",{className:"text-gray-500 pl-2 pr-2 pt-4",children:be.jsx(F0,{})}),n.currentTab==="xsdValidation"?be.jsxs(be.Fragment,{children:[be.jsx("div",{className:"flex h-full",style:{minHeight:"0px"},children:be.jsx("div",{className:"flex flex-1 p-1 pb-10",children:be.jsx(lc,{})})}),be.jsxs("div",{className:"fixed bottom-0 right-0 pr-2 text-gray-500",children:["Version: ","1.6.4"]})]}):be.jsxs(be.Fragment,{children:[be.jsxs("div",{className:"flex h-full",style:{minHeight:"0px"},children:[be.jsx("div",{className:"flex basis-1/2 xl:basis-2/3  p-1 pb-10 ",children:be.jsx(lc,{})}),be.jsx("div",{className:"flex basis-1/2 xl:basis-1/3 pb-10 pl-1 pr-1",children:be.jsx(O0,{})})]}),be.jsxs("div",{className:"fixed bottom-0 right-0 pr-2 text-gray-500",children:["Version: ","1.6.4"]})]})]})}var Gf={exports:{}},Li={},Wf={exports:{}},jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function i(Oe,Se){var Be=Oe.length;Oe.push(Se);e:for(;0<Be;){var lt=Be-1>>>1,ut=Oe[lt];if(0<g(ut,Se))Oe[lt]=Se,Oe[Be]=ut,Be=lt;else break e}}function a(Oe){return Oe.length===0?null:Oe[0]}function u(Oe){if(Oe.length===0)return null;var Se=Oe[0],Be=Oe.pop();if(Be!==Se){Oe[0]=Be;e:for(var lt=0,ut=Oe.length,zt=ut>>>1;lt<zt;){var Kt=2*(lt+1)-1,We=Oe[Kt],Wt=Kt+1,oi=Oe[Wt];if(0>g(We,Be))Wt<ut&&0>g(oi,We)?(Oe[lt]=oi,Oe[Wt]=Be,lt=Wt):(Oe[lt]=We,Oe[Kt]=Be,lt=Kt);else if(Wt<ut&&0>g(oi,Be))Oe[lt]=oi,Oe[Wt]=Be,lt=Wt;else break e}}return Se}function g(Oe,Se){var Be=Oe.sortIndex-Se.sortIndex;return Be!==0?Be:Oe.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var T=Date,M=T.now();n.unstable_now=function(){return T.now()-M}}var z=[],W=[],K=1,X=null,ne=3,D=!1,ue=!1,ee=!1,ce=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(Oe){for(var Se=a(W);Se!==null;){if(Se.callback===null)u(W);else if(Se.startTime<=Oe)u(W),Se.sortIndex=Se.expirationTime,i(z,Se);else break;Se=a(W)}}function pe(Oe){if(ee=!1,te(Oe),!ue)if(a(z)!==null)ue=!0,oe(ye);else{var Se=a(W);Se!==null&&ct(pe,Se.startTime-Oe)}}function ye(Oe,Se){ue=!1,ee&&(ee=!1,$(ke),ke=-1),D=!0;var Be=ne;try{for(te(Se),X=a(z);X!==null&&(!(X.expirationTime>Se)||Oe&&!ht());){var lt=X.callback;if(typeof lt=="function"){X.callback=null,ne=X.priorityLevel;var ut=lt(X.expirationTime<=Se);Se=n.unstable_now(),typeof ut=="function"?X.callback=ut:X===a(z)&&u(z),te(Se)}else u(z);X=a(z)}if(X!==null)var zt=!0;else{var Kt=a(W);Kt!==null&&ct(pe,Kt.startTime-Se),zt=!1}return zt}finally{X=null,ne=Be,D=!1}}var B=!1,Te=null,ke=-1,Ve=5,He=-1;function ht(){return!(n.unstable_now()-He<Ve)}function qe(){if(Te!==null){var Oe=n.unstable_now();He=Oe;var Se=!0;try{Se=Te(!0,Oe)}finally{Se?st():(B=!1,Te=null)}}else B=!1}var st;if(typeof J=="function")st=function(){J(qe)};else if(typeof MessageChannel!="undefined"){var Ee=new MessageChannel,bt=Ee.port2;Ee.port1.onmessage=qe,st=function(){bt.postMessage(null)}}else st=function(){ce(qe,0)};function oe(Oe){Te=Oe,B||(B=!0,st())}function ct(Oe,Se){ke=ce(function(){Oe(n.unstable_now())},Se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Oe){Oe.callback=null},n.unstable_continueExecution=function(){ue||D||(ue=!0,oe(ye))},n.unstable_forceFrameRate=function(Oe){0>Oe||125<Oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ve=0<Oe?Math.floor(1e3/Oe):5},n.unstable_getCurrentPriorityLevel=function(){return ne},n.unstable_getFirstCallbackNode=function(){return a(z)},n.unstable_next=function(Oe){switch(ne){case 1:case 2:case 3:var Se=3;break;default:Se=ne}var Be=ne;ne=Se;try{return Oe()}finally{ne=Be}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Oe,Se){switch(Oe){case 1:case 2:case 3:case 4:case 5:break;default:Oe=3}var Be=ne;ne=Oe;try{return Se()}finally{ne=Be}},n.unstable_scheduleCallback=function(Oe,Se,Be){var lt=n.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?lt+Be:lt):Be=lt,Oe){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=Be+ut,Oe={id:K++,callback:Se,priorityLevel:Oe,startTime:Be,expirationTime:ut,sortIndex:-1},Be>lt?(Oe.sortIndex=Be,i(W,Oe),a(z)===null&&Oe===a(W)&&(ee?($(ke),ke=-1):ee=!0,ct(pe,Be-lt))):(Oe.sortIndex=ut,i(z,Oe),ue||D||(ue=!0,oe(ye))),Oe},n.unstable_shouldYield=ht,n.unstable_wrapCallback=function(Oe){var Se=ne;return function(){var Be=ne;ne=Se;try{return Oe.apply(this,arguments)}finally{ne=Be}}}})(jf);Wf.exports=jf;var V0=Wf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf=fs,Ai=V0;function Le(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kf=new Set,Qs={};function br(n,i){rs(n,i),rs(n+"Capture",i)}function rs(n,i){for(Qs[n]=i,n=0;n<i.length;n++)Kf.add(i[n])}var yn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Ul=Object.prototype.hasOwnProperty,H0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uc={},hc={};function U0(n){return Ul.call(hc,n)?!0:Ul.call(uc,n)?!1:H0.test(n)?hc[n]=!0:(uc[n]=!0,!1)}function G0(n,i,a,u){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W0(n,i,a,u){if(i===null||typeof i=="undefined"||G0(n,i,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function xi(n,i,a,u,g,h,T){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=g,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=h,this.removeEmptyString=T}var ci={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ci[n]=new xi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];ci[i]=new xi(i,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ci[n]=new xi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ci[n]=new xi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ci[n]=new xi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ci[n]=new xi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ci[n]=new xi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ci[n]=new xi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ci[n]=new xi(n,5,!1,n.toLowerCase(),null,!1,!1)});var Wu=/[\-:]([a-z])/g;function ju(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(Wu,ju);ci[i]=new xi(i,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(Wu,ju);ci[i]=new xi(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(Wu,ju);ci[i]=new xi(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ci[n]=new xi(n,1,!1,n.toLowerCase(),null,!1,!1)});ci.xlinkHref=new xi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ci[n]=new xi(n,1,!1,n.toLowerCase(),null,!0,!0)});function qu(n,i,a,u){var g=ci.hasOwnProperty(i)?ci[i]:null;(g!==null?g.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(W0(i,a,g,u)&&(a=null),u||g===null?U0(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):g.mustUseProperty?n[g.propertyName]=a===null?g.type===3?!1:"":a:(i=g.attributeName,u=g.attributeNamespace,a===null?n.removeAttribute(i):(g=g.type,a=g===3||g===4&&a===!0?"":""+a,u?n.setAttributeNS(u,i,a):n.setAttribute(i,a))))}var Cn=qf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Na=Symbol.for("react.element"),zr=Symbol.for("react.portal"),Fr=Symbol.for("react.fragment"),Ku=Symbol.for("react.strict_mode"),Gl=Symbol.for("react.profiler"),Qf=Symbol.for("react.provider"),Zf=Symbol.for("react.context"),Qu=Symbol.for("react.forward_ref"),Wl=Symbol.for("react.suspense"),jl=Symbol.for("react.suspense_list"),Zu=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),Xf=Symbol.for("react.offscreen"),cc=Symbol.iterator;function bs(n){return n===null||typeof n!="object"?null:(n=cc&&n[cc]||n["@@iterator"],typeof n=="function"?n:null)}var Gt=Object.assign,dl;function Ms(n){if(dl===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);dl=i&&i[1]||""}return`
`+dl+n}var pl=!1;function gl(n,i){if(!n||pl)return"";pl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(W){var u=W}Reflect.construct(n,[],i)}else{try{i.call()}catch(W){u=W}n.call(i.prototype)}else{try{throw Error()}catch(W){u=W}n()}}catch(W){if(W&&u&&typeof W.stack=="string"){for(var g=W.stack.split(`
`),h=u.stack.split(`
`),T=g.length-1,M=h.length-1;1<=T&&0<=M&&g[T]!==h[M];)M--;for(;1<=T&&0<=M;T--,M--)if(g[T]!==h[M]){if(T!==1||M!==1)do if(T--,M--,0>M||g[T]!==h[M]){var z=`
`+g[T].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=T&&0<=M);break}}}finally{pl=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Ms(n):""}function j0(n){switch(n.tag){case 5:return Ms(n.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 2:case 15:return n=gl(n.type,!1),n;case 11:return n=gl(n.type.render,!1),n;case 1:return n=gl(n.type,!0),n;default:return""}}function ql(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Fr:return"Fragment";case zr:return"Portal";case Gl:return"Profiler";case Ku:return"StrictMode";case Wl:return"Suspense";case jl:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Zf:return(n.displayName||"Context")+".Consumer";case Qf:return(n._context.displayName||"Context")+".Provider";case Qu:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Zu:return i=n.displayName||null,i!==null?i:ql(n.type)||"Memo";case In:i=n._payload,n=n._init;try{return ql(n(i))}catch(a){}}return null}function q0(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ql(i);case 8:return i===Ku?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Zn(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Yf(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function K0(n){var i=Yf(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),u=""+n[i];if(!n.hasOwnProperty(i)&&typeof a!="undefined"&&typeof a.get=="function"&&typeof a.set=="function"){var g=a.get,h=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return g.call(this)},set:function(T){u=""+T,h.call(this,T)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ta(n){n._valueTracker||(n._valueTracker=K0(n))}function $f(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return n&&(u=Yf(n)?n.checked?"true":"false":n.value),n=u,n!==a?(i.setValue(n),!0):!1}function uo(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch(i){return n.body}}function Kl(n,i){var a=i.checked;return Gt({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a!=null?a:n._wrapperState.initialChecked})}function fc(n,i){var a=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;a=Zn(i.value!=null?i.value:a),n._wrapperState={initialChecked:u,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Jf(n,i){i=i.checked,i!=null&&qu(n,"checked",i,!1)}function Ql(n,i){Jf(n,i);var a=Zn(i.value),u=i.type;if(a!=null)u==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(u==="submit"||u==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Zl(n,i.type,a):i.hasOwnProperty("defaultValue")&&Zl(n,i.type,Zn(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function dc(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Zl(n,i,a){(i!=="number"||uo(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Rs=Array.isArray;function Yr(n,i,a,u){if(n=n.options,i){i={};for(var g=0;g<a.length;g++)i["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=i.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&u&&(n[a].defaultSelected=!0)}else{for(a=""+Zn(a),i=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}i!==null||n[g].disabled||(i=n[g])}i!==null&&(i.selected=!0)}}function Xl(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(Le(91));return Gt({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function pc(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(Le(92));if(Rs(a)){if(1<a.length)throw Error(Le(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Zn(a)}}function ed(n,i){var a=Zn(i.value),u=Zn(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),u!=null&&(n.defaultValue=""+u)}function gc(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function td(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yl(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?td(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Pa,id=function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(i,a,u,g){MSApp.execUnsafeLocalFunction(function(){return n(i,a,u,g)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Pa=Pa||document.createElement("div"),Pa.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Pa.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Zs(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q0=["Webkit","ms","Moz","O"];Object.keys(Fs).forEach(function(n){Q0.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Fs[i]=Fs[n]})});function nd(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Fs.hasOwnProperty(n)&&Fs[n]?(""+i).trim():i+"px"}function rd(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var u=a.indexOf("--")===0,g=nd(a,i[a],u);a==="float"&&(a="cssFloat"),u?n.setProperty(a,g):n[a]=g}}var Z0=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $l(n,i){if(i){if(Z0[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(Le(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(Le(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(Le(61))}if(i.style!=null&&typeof i.style!="object")throw Error(Le(62))}}function Jl(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eu=null;function Xu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var tu=null,$r=null,Jr=null;function _c(n){if(n=pa(n)){if(typeof tu!="function")throw Error(Le(280));var i=n.stateNode;i&&(i=Vo(i),tu(n.stateNode,n.type,i))}}function sd(n){$r?Jr?Jr.push(n):Jr=[n]:$r=n}function ad(){if($r){var n=$r,i=Jr;if(Jr=$r=null,_c(n),i)for(n=0;n<i.length;n++)_c(i[n])}}function od(n,i){return n(i)}function ld(){}var _l=!1;function ud(n,i,a){if(_l)return n(i,a);_l=!0;try{return od(n,i,a)}finally{_l=!1,($r!==null||Jr!==null)&&(ld(),ad())}}function Xs(n,i){var a=n.stateNode;if(a===null)return null;var u=Vo(a);if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(Le(231,i,typeof a));return a}var iu=!1;if(yn)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){iu=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch(n){iu=!1}function X0(n,i,a,u,g,h,T,M,z){var W=Array.prototype.slice.call(arguments,3);try{i.apply(a,W)}catch(K){this.onError(K)}}var Bs=!1,ho=null,co=!1,nu=null,Y0={onError:function(n){Bs=!0,ho=n}};function $0(n,i,a,u,g,h,T,M,z){Bs=!1,ho=null,X0.apply(Y0,arguments)}function J0(n,i,a,u,g,h,T,M,z){if($0.apply(this,arguments),Bs){if(Bs){var W=ho;Bs=!1,ho=null}else throw Error(Le(198));co||(co=!0,nu=W)}}function Er(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function hd(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function mc(n){if(Er(n)!==n)throw Error(Le(188))}function em(n){var i=n.alternate;if(!i){if(i=Er(n),i===null)throw Error(Le(188));return i!==n?null:n}for(var a=n,u=i;;){var g=a.return;if(g===null)break;var h=g.alternate;if(h===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===h.child){for(h=g.child;h;){if(h===a)return mc(g),n;if(h===u)return mc(g),i;h=h.sibling}throw Error(Le(188))}if(a.return!==u.return)a=g,u=h;else{for(var T=!1,M=g.child;M;){if(M===a){T=!0,a=g,u=h;break}if(M===u){T=!0,u=g,a=h;break}M=M.sibling}if(!T){for(M=h.child;M;){if(M===a){T=!0,a=h,u=g;break}if(M===u){T=!0,u=h,a=g;break}M=M.sibling}if(!T)throw Error(Le(189))}}if(a.alternate!==u)throw Error(Le(190))}if(a.tag!==3)throw Error(Le(188));return a.stateNode.current===a?n:i}function cd(n){return n=em(n),n!==null?fd(n):null}function fd(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=fd(n);if(i!==null)return i;n=n.sibling}return null}var dd=Ai.unstable_scheduleCallback,vc=Ai.unstable_cancelCallback,tm=Ai.unstable_shouldYield,im=Ai.unstable_requestPaint,Zt=Ai.unstable_now,nm=Ai.unstable_getCurrentPriorityLevel,Yu=Ai.unstable_ImmediatePriority,pd=Ai.unstable_UserBlockingPriority,fo=Ai.unstable_NormalPriority,rm=Ai.unstable_LowPriority,gd=Ai.unstable_IdlePriority,Do=null,rn=null;function sm(n){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Do,n,void 0,(n.current.flags&128)===128)}catch(i){}}var Zi=Math.clz32?Math.clz32:lm,am=Math.log,om=Math.LN2;function lm(n){return n>>>=0,n===0?32:31-(am(n)/om|0)|0}var Ia=64,Aa=4194304;function Ds(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function po(n,i){var a=n.pendingLanes;if(a===0)return 0;var u=0,g=n.suspendedLanes,h=n.pingedLanes,T=a&268435455;if(T!==0){var M=T&~g;M!==0?u=Ds(M):(h&=T,h!==0&&(u=Ds(h)))}else T=a&~g,T!==0?u=Ds(T):h!==0&&(u=Ds(h));if(u===0)return 0;if(i!==0&&i!==u&&!(i&g)&&(g=u&-u,h=i&-i,g>=h||g===16&&(h&4194240)!==0))return i;if(u&4&&(u|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=u;0<i;)a=31-Zi(i),g=1<<a,u|=n[a],i&=~g;return u}function um(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hm(n,i){for(var a=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,h=n.pendingLanes;0<h;){var T=31-Zi(h),M=1<<T,z=g[T];z===-1?(!(M&a)||M&u)&&(g[T]=um(M,i)):z<=i&&(n.expiredLanes|=M),h&=~M}}function ru(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function _d(){var n=Ia;return Ia<<=1,!(Ia&4194240)&&(Ia=64),n}function ml(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function fa(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Zi(i),n[i]=a}function cm(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var u=n.eventTimes;for(n=n.expirationTimes;0<a;){var g=31-Zi(a),h=1<<g;i[g]=0,u[g]=-1,n[g]=-1,a&=~h}}function $u(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var u=31-Zi(a),g=1<<u;g&i|n[u]&i&&(n[u]|=i),a&=~g}}var kt=0;function md(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var vd,Ju,yd,wd,xd,su=!1,La=[],Fn=null,Bn=null,Vn=null,Ys=new Map,$s=new Map,On=[],fm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yc(n,i){switch(n){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Ys.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":$s.delete(i.pointerId)}}function ks(n,i,a,u,g,h){return n===null||n.nativeEvent!==h?(n={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:h,targetContainers:[g]},i!==null&&(i=pa(i),i!==null&&Ju(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),n)}function dm(n,i,a,u,g){switch(i){case"focusin":return Fn=ks(Fn,n,i,a,u,g),!0;case"dragenter":return Bn=ks(Bn,n,i,a,u,g),!0;case"mouseover":return Vn=ks(Vn,n,i,a,u,g),!0;case"pointerover":var h=g.pointerId;return Ys.set(h,ks(Ys.get(h)||null,n,i,a,u,g)),!0;case"gotpointercapture":return h=g.pointerId,$s.set(h,ks($s.get(h)||null,n,i,a,u,g)),!0}return!1}function Sd(n){var i=pr(n.target);if(i!==null){var a=Er(i);if(a!==null){if(i=a.tag,i===13){if(i=hd(a),i!==null){n.blockedOn=i,xd(n.priority,function(){yd(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qa(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=au(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);eu=u,a.target.dispatchEvent(u),eu=null}else return i=pa(a),i!==null&&Ju(i),n.blockedOn=a,!1;i.shift()}return!0}function wc(n,i,a){Qa(n)&&a.delete(i)}function pm(){su=!1,Fn!==null&&Qa(Fn)&&(Fn=null),Bn!==null&&Qa(Bn)&&(Bn=null),Vn!==null&&Qa(Vn)&&(Vn=null),Ys.forEach(wc),$s.forEach(wc)}function Ns(n,i){n.blockedOn===i&&(n.blockedOn=null,su||(su=!0,Ai.unstable_scheduleCallback(Ai.unstable_NormalPriority,pm)))}function Js(n){function i(g){return Ns(g,n)}if(0<La.length){Ns(La[0],n);for(var a=1;a<La.length;a++){var u=La[a];u.blockedOn===n&&(u.blockedOn=null)}}for(Fn!==null&&Ns(Fn,n),Bn!==null&&Ns(Bn,n),Vn!==null&&Ns(Vn,n),Ys.forEach(i),$s.forEach(i),a=0;a<On.length;a++)u=On[a],u.blockedOn===n&&(u.blockedOn=null);for(;0<On.length&&(a=On[0],a.blockedOn===null);)Sd(a),a.blockedOn===null&&On.shift()}var es=Cn.ReactCurrentBatchConfig,go=!0;function gm(n,i,a,u){var g=kt,h=es.transition;es.transition=null;try{kt=1,eh(n,i,a,u)}finally{kt=g,es.transition=h}}function _m(n,i,a,u){var g=kt,h=es.transition;es.transition=null;try{kt=4,eh(n,i,a,u)}finally{kt=g,es.transition=h}}function eh(n,i,a,u){if(go){var g=au(n,i,a,u);if(g===null)Nl(n,i,u,_o,a),yc(n,u);else if(dm(g,n,i,a,u))u.stopPropagation();else if(yc(n,u),i&4&&-1<fm.indexOf(n)){for(;g!==null;){var h=pa(g);if(h!==null&&vd(h),h=au(n,i,a,u),h===null&&Nl(n,i,u,_o,a),h===g)break;g=h}g!==null&&u.stopPropagation()}else Nl(n,i,u,null,a)}}var _o=null;function au(n,i,a,u){if(_o=null,n=Xu(u),n=pr(n),n!==null)if(i=Er(n),i===null)n=null;else if(a=i.tag,a===13){if(n=hd(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return _o=n,null}function Cd(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nm()){case Yu:return 1;case pd:return 4;case fo:case rm:return 16;case gd:return 536870912;default:return 16}default:return 16}}var Dn=null,th=null,Za=null;function bd(){if(Za)return Za;var n,i=th,a=i.length,u,g="value"in Dn?Dn.value:Dn.textContent,h=g.length;for(n=0;n<a&&i[n]===g[n];n++);var T=a-n;for(u=1;u<=T&&i[a-u]===g[h-u];u++);return Za=g.slice(n,1<u?1-u:void 0)}function Xa(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Oa(){return!0}function xc(){return!1}function Oi(n){function i(a,u,g,h,T){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=h,this.target=T,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(a=n[M],this[M]=a?a(h):h[M]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Oa:xc,this.isPropagationStopped=xc,this}return Gt(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),i}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ih=Oi(ds),da=Gt({},ds,{view:0,detail:0}),mm=Oi(da),vl,yl,Ts,zo=Gt({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nh,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ts&&(Ts&&n.type==="mousemove"?(vl=n.screenX-Ts.screenX,yl=n.screenY-Ts.screenY):yl=vl=0,Ts=n),vl)},movementY:function(n){return"movementY"in n?n.movementY:yl}}),Sc=Oi(zo),vm=Gt({},zo,{dataTransfer:0}),ym=Oi(vm),wm=Gt({},da,{relatedTarget:0}),wl=Oi(wm),xm=Gt({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Sm=Oi(xm),Cm=Gt({},ds,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bm=Oi(Cm),Em=Gt({},ds,{data:0}),Cc=Oi(Em),km={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pm(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Tm[n])?!!i[n]:!1}function nh(){return Pm}var Im=Gt({},da,{key:function(n){if(n.key){var i=km[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Xa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Nm[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nh,charCode:function(n){return n.type==="keypress"?Xa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Am=Oi(Im),Lm=Gt({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bc=Oi(Lm),Om=Gt({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nh}),Mm=Oi(Om),Rm=Gt({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dm=Oi(Rm),zm=Gt({},zo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Fm=Oi(zm),Bm=[9,13,27,32],rh=yn&&"CompositionEvent"in window,Vs=null;yn&&"documentMode"in document&&(Vs=document.documentMode);var Vm=yn&&"TextEvent"in window&&!Vs,Ed=yn&&(!rh||Vs&&8<Vs&&11>=Vs),Ec=" ",kc=!1;function kd(n,i){switch(n){case"keyup":return Bm.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Br=!1;function Hm(n,i){switch(n){case"compositionend":return Nd(i);case"keypress":return i.which!==32?null:(kc=!0,Ec);case"textInput":return n=i.data,n===Ec&&kc?null:n;default:return null}}function Um(n,i){if(Br)return n==="compositionend"||!rh&&kd(n,i)?(n=bd(),Za=th=Dn=null,Br=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ed&&i.locale!=="ko"?null:i.data;default:return null}}var Gm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Gm[n.type]:i==="textarea"}function Td(n,i,a,u){sd(u),i=mo(i,"onChange"),0<i.length&&(a=new ih("onChange","change",null,a,u),n.push({event:a,listeners:i}))}var Hs=null,ea=null;function Wm(n){Bd(n,0)}function Fo(n){var i=Ur(n);if($f(i))return n}function jm(n,i){if(n==="change")return i}var Pd=!1;if(yn){var xl;if(yn){var Sl="oninput"in document;if(!Sl){var Tc=document.createElement("div");Tc.setAttribute("oninput","return;"),Sl=typeof Tc.oninput=="function"}xl=Sl}else xl=!1;Pd=xl&&(!document.documentMode||9<document.documentMode)}function Pc(){Hs&&(Hs.detachEvent("onpropertychange",Id),ea=Hs=null)}function Id(n){if(n.propertyName==="value"&&Fo(ea)){var i=[];Td(i,ea,n,Xu(n)),ud(Wm,i)}}function qm(n,i,a){n==="focusin"?(Pc(),Hs=i,ea=a,Hs.attachEvent("onpropertychange",Id)):n==="focusout"&&Pc()}function Km(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Fo(ea)}function Qm(n,i){if(n==="click")return Fo(i)}function Zm(n,i){if(n==="input"||n==="change")return Fo(i)}function Xm(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Yi=typeof Object.is=="function"?Object.is:Xm;function ta(n,i){if(Yi(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!Ul.call(i,g)||!Yi(n[g],i[g]))return!1}return!0}function Ic(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ac(n,i){var a=Ic(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=i&&u>=i)return{node:a,offset:i-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ic(a)}}function Ad(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ad(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Ld(){for(var n=window,i=uo();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch(u){a=!1}if(a)n=i.contentWindow;else break;i=uo(n.document)}return i}function sh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function Ym(n){var i=Ld(),a=n.focusedElem,u=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Ad(a.ownerDocument.documentElement,a)){if(u!==null&&sh(a)){if(i=u.start,n=u.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var g=a.textContent.length,h=Math.min(u.start,g);u=u.end===void 0?h:Math.min(u.end,g),!n.extend&&h>u&&(g=u,u=h,h=g),g=Ac(a,h);var T=Ac(a,u);g&&T&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==T.node||n.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),n.removeAllRanges(),h>u?(n.addRange(i),n.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var $m=yn&&"documentMode"in document&&11>=document.documentMode,Vr=null,ou=null,Us=null,lu=!1;function Lc(n,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;lu||Vr==null||Vr!==uo(u)||(u=Vr,"selectionStart"in u&&sh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Us&&ta(Us,u)||(Us=u,u=mo(ou,"onSelect"),0<u.length&&(i=new ih("onSelect","select",null,i,a),n.push({event:i,listeners:u}),i.target=Vr)))}function Ma(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Hr={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionend:Ma("Transition","TransitionEnd")},Cl={},Od={};yn&&(Od=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function Bo(n){if(Cl[n])return Cl[n];if(!Hr[n])return n;var i=Hr[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Od)return Cl[n]=i[a];return n}var Md=Bo("animationend"),Rd=Bo("animationiteration"),Dd=Bo("animationstart"),zd=Bo("transitionend"),Fd=new Map,Oc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(n,i){Fd.set(n,i),br(i,[n])}for(var bl=0;bl<Oc.length;bl++){var El=Oc[bl],Jm=El.toLowerCase(),ev=El[0].toUpperCase()+El.slice(1);$n(Jm,"on"+ev)}$n(Md,"onAnimationEnd");$n(Rd,"onAnimationIteration");$n(Dd,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(zd,"onTransitionEnd");rs("onMouseEnter",["mouseout","mouseover"]);rs("onMouseLeave",["mouseout","mouseover"]);rs("onPointerEnter",["pointerout","pointerover"]);rs("onPointerLeave",["pointerout","pointerover"]);br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));br("onBeforeInput",["compositionend","keypress","textInput","paste"]);br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tv=new Set("cancel close invalid load scroll toggle".split(" ").concat(zs));function Mc(n,i,a){var u=n.type||"unknown-event";n.currentTarget=a,J0(u,i,void 0,n),n.currentTarget=null}function Bd(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],g=u.event;u=u.listeners;e:{var h=void 0;if(i)for(var T=u.length-1;0<=T;T--){var M=u[T],z=M.instance,W=M.currentTarget;if(M=M.listener,z!==h&&g.isPropagationStopped())break e;Mc(g,M,W),h=z}else for(T=0;T<u.length;T++){if(M=u[T],z=M.instance,W=M.currentTarget,M=M.listener,z!==h&&g.isPropagationStopped())break e;Mc(g,M,W),h=z}}}if(co)throw n=nu,co=!1,nu=null,n}function Mt(n,i){var a=i[du];a===void 0&&(a=i[du]=new Set);var u=n+"__bubble";a.has(u)||(Vd(i,n,2,!1),a.add(u))}function kl(n,i,a){var u=0;i&&(u|=4),Vd(a,n,u,i)}var Ra="_reactListening"+Math.random().toString(36).slice(2);function ia(n){if(!n[Ra]){n[Ra]=!0,Kf.forEach(function(a){a!=="selectionchange"&&(tv.has(a)||kl(a,!1,n),kl(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ra]||(i[Ra]=!0,kl("selectionchange",!1,i))}}function Vd(n,i,a,u){switch(Cd(i)){case 1:var g=gm;break;case 4:g=_m;break;default:g=eh}a=g.bind(null,i,a,n),g=void 0,!iu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(i,a,{capture:!0,passive:g}):n.addEventListener(i,a,!0):g!==void 0?n.addEventListener(i,a,{passive:g}):n.addEventListener(i,a,!1)}function Nl(n,i,a,u,g){var h=u;if(!(i&1)&&!(i&2)&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var M=u.stateNode.containerInfo;if(M===g||M.nodeType===8&&M.parentNode===g)break;if(T===4)for(T=u.return;T!==null;){var z=T.tag;if((z===3||z===4)&&(z=T.stateNode.containerInfo,z===g||z.nodeType===8&&z.parentNode===g))return;T=T.return}for(;M!==null;){if(T=pr(M),T===null)return;if(z=T.tag,z===5||z===6){u=h=T;continue e}M=M.parentNode}}u=u.return}ud(function(){var W=h,K=Xu(a),X=[];e:{var ne=Fd.get(n);if(ne!==void 0){var D=ih,ue=n;switch(n){case"keypress":if(Xa(a)===0)break e;case"keydown":case"keyup":D=Am;break;case"focusin":ue="focus",D=wl;break;case"focusout":ue="blur",D=wl;break;case"beforeblur":case"afterblur":D=wl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=Sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=ym;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=Mm;break;case Md:case Rd:case Dd:D=Sm;break;case zd:D=Dm;break;case"scroll":D=mm;break;case"wheel":D=Fm;break;case"copy":case"cut":case"paste":D=bm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=bc}var ee=(i&4)!==0,ce=!ee&&n==="scroll",$=ee?ne!==null?ne+"Capture":null:ne;ee=[];for(var J=W,te;J!==null;){te=J;var pe=te.stateNode;if(te.tag===5&&pe!==null&&(te=pe,$!==null&&(pe=Xs(J,$),pe!=null&&ee.push(na(J,pe,te)))),ce)break;J=J.return}0<ee.length&&(ne=new D(ne,ue,null,a,K),X.push({event:ne,listeners:ee}))}}if(!(i&7)){e:{if(ne=n==="mouseover"||n==="pointerover",D=n==="mouseout"||n==="pointerout",ne&&a!==eu&&(ue=a.relatedTarget||a.fromElement)&&(pr(ue)||ue[wn]))break e;if((D||ne)&&(ne=K.window===K?K:(ne=K.ownerDocument)?ne.defaultView||ne.parentWindow:window,D?(ue=a.relatedTarget||a.toElement,D=W,ue=ue?pr(ue):null,ue!==null&&(ce=Er(ue),ue!==ce||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(D=null,ue=W),D!==ue)){if(ee=Sc,pe="onMouseLeave",$="onMouseEnter",J="mouse",(n==="pointerout"||n==="pointerover")&&(ee=bc,pe="onPointerLeave",$="onPointerEnter",J="pointer"),ce=D==null?ne:Ur(D),te=ue==null?ne:Ur(ue),ne=new ee(pe,J+"leave",D,a,K),ne.target=ce,ne.relatedTarget=te,pe=null,pr(K)===W&&(ee=new ee($,J+"enter",ue,a,K),ee.target=te,ee.relatedTarget=ce,pe=ee),ce=pe,D&&ue)t:{for(ee=D,$=ue,J=0,te=ee;te;te=Mr(te))J++;for(te=0,pe=$;pe;pe=Mr(pe))te++;for(;0<J-te;)ee=Mr(ee),J--;for(;0<te-J;)$=Mr($),te--;for(;J--;){if(ee===$||$!==null&&ee===$.alternate)break t;ee=Mr(ee),$=Mr($)}ee=null}else ee=null;D!==null&&Rc(X,ne,D,ee,!1),ue!==null&&ce!==null&&Rc(X,ce,ue,ee,!0)}}e:{if(ne=W?Ur(W):window,D=ne.nodeName&&ne.nodeName.toLowerCase(),D==="select"||D==="input"&&ne.type==="file")var ye=jm;else if(Nc(ne))if(Pd)ye=Zm;else{ye=Km;var B=qm}else(D=ne.nodeName)&&D.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(ye=Qm);if(ye&&(ye=ye(n,W))){Td(X,ye,a,K);break e}B&&B(n,ne,W),n==="focusout"&&(B=ne._wrapperState)&&B.controlled&&ne.type==="number"&&Zl(ne,"number",ne.value)}switch(B=W?Ur(W):window,n){case"focusin":(Nc(B)||B.contentEditable==="true")&&(Vr=B,ou=W,Us=null);break;case"focusout":Us=ou=Vr=null;break;case"mousedown":lu=!0;break;case"contextmenu":case"mouseup":case"dragend":lu=!1,Lc(X,a,K);break;case"selectionchange":if($m)break;case"keydown":case"keyup":Lc(X,a,K)}var Te;if(rh)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Br?kd(n,a)&&(ke="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Ed&&a.locale!=="ko"&&(Br||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Br&&(Te=bd()):(Dn=K,th="value"in Dn?Dn.value:Dn.textContent,Br=!0)),B=mo(W,ke),0<B.length&&(ke=new Cc(ke,n,null,a,K),X.push({event:ke,listeners:B}),Te?ke.data=Te:(Te=Nd(a),Te!==null&&(ke.data=Te)))),(Te=Vm?Hm(n,a):Um(n,a))&&(W=mo(W,"onBeforeInput"),0<W.length&&(K=new Cc("onBeforeInput","beforeinput",null,a,K),X.push({event:K,listeners:W}),K.data=Te))}Bd(X,i)})}function na(n,i,a){return{instance:n,listener:i,currentTarget:a}}function mo(n,i){for(var a=i+"Capture",u=[];n!==null;){var g=n,h=g.stateNode;g.tag===5&&h!==null&&(g=h,h=Xs(n,a),h!=null&&u.unshift(na(n,h,g)),h=Xs(n,i),h!=null&&u.push(na(n,h,g))),n=n.return}return u}function Mr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Rc(n,i,a,u,g){for(var h=i._reactName,T=[];a!==null&&a!==u;){var M=a,z=M.alternate,W=M.stateNode;if(z!==null&&z===u)break;M.tag===5&&W!==null&&(M=W,g?(z=Xs(a,h),z!=null&&T.unshift(na(a,z,M))):g||(z=Xs(a,h),z!=null&&T.push(na(a,z,M)))),a=a.return}T.length!==0&&n.push({event:i,listeners:T})}var iv=/\r\n?/g,nv=/\u0000|\uFFFD/g;function Dc(n){return(typeof n=="string"?n:""+n).replace(iv,`
`).replace(nv,"")}function Da(n,i,a){if(i=Dc(i),Dc(n)!==i&&a)throw Error(Le(425))}function vo(){}var uu=null,hu=null;function cu(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fu=typeof setTimeout=="function"?setTimeout:void 0,rv=typeof clearTimeout=="function"?clearTimeout:void 0,zc=typeof Promise=="function"?Promise:void 0,sv=typeof queueMicrotask=="function"?queueMicrotask:typeof zc!="undefined"?function(n){return zc.resolve(null).then(n).catch(av)}:fu;function av(n){setTimeout(function(){throw n})}function Tl(n,i){var a=i,u=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(u===0){n.removeChild(g),Js(i);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=g}while(a);Js(i)}function Hn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Fc(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var ps=Math.random().toString(36).slice(2),nn="__reactFiber$"+ps,ra="__reactProps$"+ps,wn="__reactContainer$"+ps,du="__reactEvents$"+ps,ov="__reactListeners$"+ps,lv="__reactHandles$"+ps;function pr(n){var i=n[nn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[wn]||a[nn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Fc(n);n!==null;){if(a=n[nn])return a;n=Fc(n)}return i}n=a,a=n.parentNode}return null}function pa(n){return n=n[nn]||n[wn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ur(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Le(33))}function Vo(n){return n[ra]||null}var pu=[],Gr=-1;function Jn(n){return{current:n}}function Dt(n){0>Gr||(n.current=pu[Gr],pu[Gr]=null,Gr--)}function Lt(n,i){Gr++,pu[Gr]=n.current,n.current=i}var Xn={},_i=Jn(Xn),bi=Jn(!1),yr=Xn;function ss(n,i){var a=n.type.contextTypes;if(!a)return Xn;var u=n.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var g={},h;for(h in a)g[h]=i[h];return u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=g),g}function Ei(n){return n=n.childContextTypes,n!=null}function yo(){Dt(bi),Dt(_i)}function Bc(n,i,a){if(_i.current!==Xn)throw Error(Le(168));Lt(_i,i),Lt(bi,a)}function Hd(n,i,a){var u=n.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var g in u)if(!(g in i))throw Error(Le(108,q0(n)||"Unknown",g));return Gt({},a,u)}function wo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xn,yr=_i.current,Lt(_i,n),Lt(bi,bi.current),!0}function Vc(n,i,a){var u=n.stateNode;if(!u)throw Error(Le(169));a?(n=Hd(n,i,yr),u.__reactInternalMemoizedMergedChildContext=n,Dt(bi),Dt(_i),Lt(_i,n)):Dt(bi),Lt(bi,a)}var gn=null,Ho=!1,Pl=!1;function Ud(n){gn===null?gn=[n]:gn.push(n)}function uv(n){Ho=!0,Ud(n)}function er(){if(!Pl&&gn!==null){Pl=!0;var n=0,i=kt;try{var a=gn;for(kt=1;n<a.length;n++){var u=a[n];do u=u(!0);while(u!==null)}gn=null,Ho=!1}catch(g){throw gn!==null&&(gn=gn.slice(n+1)),dd(Yu,er),g}finally{kt=i,Pl=!1}}return null}var Wr=[],jr=0,xo=null,So=0,zi=[],Fi=0,wr=null,_n=1,mn="";function fr(n,i){Wr[jr++]=So,Wr[jr++]=xo,xo=n,So=i}function Gd(n,i,a){zi[Fi++]=_n,zi[Fi++]=mn,zi[Fi++]=wr,wr=n;var u=_n;n=mn;var g=32-Zi(u)-1;u&=~(1<<g),a+=1;var h=32-Zi(i)+g;if(30<h){var T=g-g%5;h=(u&(1<<T)-1).toString(32),u>>=T,g-=T,_n=1<<32-Zi(i)+g|a<<g|u,mn=h+n}else _n=1<<h|a<<g|u,mn=n}function ah(n){n.return!==null&&(fr(n,1),Gd(n,1,0))}function oh(n){for(;n===xo;)xo=Wr[--jr],Wr[jr]=null,So=Wr[--jr],Wr[jr]=null;for(;n===wr;)wr=zi[--Fi],zi[Fi]=null,mn=zi[--Fi],zi[Fi]=null,_n=zi[--Fi],zi[Fi]=null}var Ii=null,Pi=null,Bt=!1,Qi=null;function Wd(n,i){var a=Bi(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Hc(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Ii=n,Pi=Hn(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Ii=n,Pi=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=wr!==null?{id:_n,overflow:mn}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Bi(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,Ii=n,Pi=null,!0):!1;default:return!1}}function gu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function _u(n){if(Bt){var i=Pi;if(i){var a=i;if(!Hc(n,i)){if(gu(n))throw Error(Le(418));i=Hn(a.nextSibling);var u=Ii;i&&Hc(n,i)?Wd(u,a):(n.flags=n.flags&-4097|2,Bt=!1,Ii=n)}}else{if(gu(n))throw Error(Le(418));n.flags=n.flags&-4097|2,Bt=!1,Ii=n}}}function Uc(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ii=n}function za(n){if(n!==Ii)return!1;if(!Bt)return Uc(n),Bt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!cu(n.type,n.memoizedProps)),i&&(i=Pi)){if(gu(n))throw jd(),Error(Le(418));for(;i;)Wd(n,i),i=Hn(i.nextSibling)}if(Uc(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Le(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Pi=Hn(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Pi=null}}else Pi=Ii?Hn(n.stateNode.nextSibling):null;return!0}function jd(){for(var n=Pi;n;)n=Hn(n.nextSibling)}function as(){Pi=Ii=null,Bt=!1}function lh(n){Qi===null?Qi=[n]:Qi.push(n)}var hv=Cn.ReactCurrentBatchConfig;function qi(n,i){if(n&&n.defaultProps){i=Gt({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}var Co=Jn(null),bo=null,qr=null,uh=null;function hh(){uh=qr=bo=null}function ch(n){var i=Co.current;Dt(Co),n._currentValue=i}function mu(n,i,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===a)break;n=n.return}}function ts(n,i){bo=n,uh=qr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&i&&(Ci=!0),n.firstContext=null)}function Hi(n){var i=n._currentValue;if(uh!==n)if(n={context:n,memoizedValue:i,next:null},qr===null){if(bo===null)throw Error(Le(308));qr=n,bo.dependencies={lanes:0,firstContext:n}}else qr=qr.next=n;return i}var gr=null;function fh(n){gr===null?gr=[n]:gr.push(n)}function qd(n,i,a,u){var g=i.interleaved;return g===null?(a.next=a,fh(i)):(a.next=g.next,g.next=a),i.interleaved=a,xn(n,u)}function xn(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var An=!1;function dh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function vn(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Un(n,i,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,vt&2){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,xn(n,a)}return g=u.interleaved,g===null?(i.next=i,fh(u)):(i.next=g.next,g.next=i),u.interleaved=i,xn(n,a)}function Ya(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,$u(n,a)}}function Gc(n,i){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var T={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};h===null?g=h=T:h=h.next=T,a=a.next}while(a!==null);h===null?g=h=i:h=h.next=i}else g=h=i;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:h,shared:u.shared,effects:u.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Eo(n,i,a,u){var g=n.updateQueue;An=!1;var h=g.firstBaseUpdate,T=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var z=M,W=z.next;z.next=null,T===null?h=W:T.next=W,T=z;var K=n.alternate;K!==null&&(K=K.updateQueue,M=K.lastBaseUpdate,M!==T&&(M===null?K.firstBaseUpdate=W:M.next=W,K.lastBaseUpdate=z))}if(h!==null){var X=g.baseState;T=0,K=W=z=null,M=h;do{var ne=M.lane,D=M.eventTime;if((u&ne)===ne){K!==null&&(K=K.next={eventTime:D,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var ue=n,ee=M;switch(ne=i,D=a,ee.tag){case 1:if(ue=ee.payload,typeof ue=="function"){X=ue.call(D,X,ne);break e}X=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ee.payload,ne=typeof ue=="function"?ue.call(D,X,ne):ue,ne==null)break e;X=Gt({},X,ne);break e;case 2:An=!0}}M.callback!==null&&M.lane!==0&&(n.flags|=64,ne=g.effects,ne===null?g.effects=[M]:ne.push(M))}else D={eventTime:D,lane:ne,tag:M.tag,payload:M.payload,callback:M.callback,next:null},K===null?(W=K=D,z=X):K=K.next=D,T|=ne;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;ne=M,M=ne.next,ne.next=null,g.lastBaseUpdate=ne,g.shared.pending=null}}while(!0);if(K===null&&(z=X),g.baseState=z,g.firstBaseUpdate=W,g.lastBaseUpdate=K,i=g.shared.interleaved,i!==null){g=i;do T|=g.lane,g=g.next;while(g!==i)}else h===null&&(g.shared.lanes=0);Sr|=T,n.lanes=T,n.memoizedState=X}}function Wc(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var u=n[i],g=u.callback;if(g!==null){if(u.callback=null,u=a,typeof g!="function")throw Error(Le(191,g));g.call(u)}}}var Qd=new qf.Component().refs;function vu(n,i,a,u){i=n.memoizedState,a=a(u,i),a=a==null?i:Gt({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Uo={isMounted:function(n){return(n=n._reactInternals)?Er(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var u=yi(),g=Wn(n),h=vn(u,g);h.payload=i,a!=null&&(h.callback=a),i=Un(n,h,g),i!==null&&(Xi(i,n,g,u),Ya(i,n,g))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var u=yi(),g=Wn(n),h=vn(u,g);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Un(n,h,g),i!==null&&(Xi(i,n,g,u),Ya(i,n,g))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=yi(),u=Wn(n),g=vn(a,u);g.tag=2,i!=null&&(g.callback=i),i=Un(n,g,u),i!==null&&(Xi(i,n,u,a),Ya(i,n,u))}};function jc(n,i,a,u,g,h,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,h,T):i.prototype&&i.prototype.isPureReactComponent?!ta(a,u)||!ta(g,h):!0}function Zd(n,i,a){var u=!1,g=Xn,h=i.contextType;return typeof h=="object"&&h!==null?h=Hi(h):(g=Ei(i)?yr:_i.current,u=i.contextTypes,h=(u=u!=null)?ss(n,g):Xn),i=new i(a,h),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Uo,n.stateNode=i,i._reactInternals=n,u&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=h),i}function qc(n,i,a,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==n&&Uo.enqueueReplaceState(i,i.state,null)}function yu(n,i,a,u){var g=n.stateNode;g.props=a,g.state=n.memoizedState,g.refs=Qd,dh(n);var h=i.contextType;typeof h=="object"&&h!==null?g.context=Hi(h):(h=Ei(i)?yr:_i.current,g.context=ss(n,h)),g.state=n.memoizedState,h=i.getDerivedStateFromProps,typeof h=="function"&&(vu(n,i,h,a),g.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&Uo.enqueueReplaceState(g,g.state,null),Eo(n,a,g,u),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function Ps(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(Le(309));var u=a.stateNode}if(!u)throw Error(Le(147,n));var g=u,h=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===h?i.ref:(i=function(T){var M=g.refs;M===Qd&&(M=g.refs={}),T===null?delete M[h]:M[h]=T},i._stringRef=h,i)}if(typeof n!="string")throw Error(Le(284));if(!a._owner)throw Error(Le(290,n))}return n}function Fa(n,i){throw n=Object.prototype.toString.call(i),Error(Le(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Kc(n){var i=n._init;return i(n._payload)}function Xd(n){function i($,J){if(n){var te=$.deletions;te===null?($.deletions=[J],$.flags|=16):te.push(J)}}function a($,J){if(!n)return null;for(;J!==null;)i($,J),J=J.sibling;return null}function u($,J){for($=new Map;J!==null;)J.key!==null?$.set(J.key,J):$.set(J.index,J),J=J.sibling;return $}function g($,J){return $=jn($,J),$.index=0,$.sibling=null,$}function h($,J,te){return $.index=te,n?(te=$.alternate,te!==null?(te=te.index,te<J?($.flags|=2,J):te):($.flags|=2,J)):($.flags|=1048576,J)}function T($){return n&&$.alternate===null&&($.flags|=2),$}function M($,J,te,pe){return J===null||J.tag!==6?(J=Dl(te,$.mode,pe),J.return=$,J):(J=g(J,te),J.return=$,J)}function z($,J,te,pe){var ye=te.type;return ye===Fr?K($,J,te.props.children,pe,te.key):J!==null&&(J.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===In&&Kc(ye)===J.type)?(pe=g(J,te.props),pe.ref=Ps($,J,te),pe.return=$,pe):(pe=no(te.type,te.key,te.props,null,$.mode,pe),pe.ref=Ps($,J,te),pe.return=$,pe)}function W($,J,te,pe){return J===null||J.tag!==4||J.stateNode.containerInfo!==te.containerInfo||J.stateNode.implementation!==te.implementation?(J=zl(te,$.mode,pe),J.return=$,J):(J=g(J,te.children||[]),J.return=$,J)}function K($,J,te,pe,ye){return J===null||J.tag!==7?(J=vr(te,$.mode,pe,ye),J.return=$,J):(J=g(J,te),J.return=$,J)}function X($,J,te){if(typeof J=="string"&&J!==""||typeof J=="number")return J=Dl(""+J,$.mode,te),J.return=$,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Na:return te=no(J.type,J.key,J.props,null,$.mode,te),te.ref=Ps($,null,J),te.return=$,te;case zr:return J=zl(J,$.mode,te),J.return=$,J;case In:var pe=J._init;return X($,pe(J._payload),te)}if(Rs(J)||bs(J))return J=vr(J,$.mode,te,null),J.return=$,J;Fa($,J)}return null}function ne($,J,te,pe){var ye=J!==null?J.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return ye!==null?null:M($,J,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Na:return te.key===ye?z($,J,te,pe):null;case zr:return te.key===ye?W($,J,te,pe):null;case In:return ye=te._init,ne($,J,ye(te._payload),pe)}if(Rs(te)||bs(te))return ye!==null?null:K($,J,te,pe,null);Fa($,te)}return null}function D($,J,te,pe,ye){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return $=$.get(te)||null,M(J,$,""+pe,ye);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case Na:return $=$.get(pe.key===null?te:pe.key)||null,z(J,$,pe,ye);case zr:return $=$.get(pe.key===null?te:pe.key)||null,W(J,$,pe,ye);case In:var B=pe._init;return D($,J,te,B(pe._payload),ye)}if(Rs(pe)||bs(pe))return $=$.get(te)||null,K(J,$,pe,ye,null);Fa(J,pe)}return null}function ue($,J,te,pe){for(var ye=null,B=null,Te=J,ke=J=0,Ve=null;Te!==null&&ke<te.length;ke++){Te.index>ke?(Ve=Te,Te=null):Ve=Te.sibling;var He=ne($,Te,te[ke],pe);if(He===null){Te===null&&(Te=Ve);break}n&&Te&&He.alternate===null&&i($,Te),J=h(He,J,ke),B===null?ye=He:B.sibling=He,B=He,Te=Ve}if(ke===te.length)return a($,Te),Bt&&fr($,ke),ye;if(Te===null){for(;ke<te.length;ke++)Te=X($,te[ke],pe),Te!==null&&(J=h(Te,J,ke),B===null?ye=Te:B.sibling=Te,B=Te);return Bt&&fr($,ke),ye}for(Te=u($,Te);ke<te.length;ke++)Ve=D(Te,$,ke,te[ke],pe),Ve!==null&&(n&&Ve.alternate!==null&&Te.delete(Ve.key===null?ke:Ve.key),J=h(Ve,J,ke),B===null?ye=Ve:B.sibling=Ve,B=Ve);return n&&Te.forEach(function(ht){return i($,ht)}),Bt&&fr($,ke),ye}function ee($,J,te,pe){var ye=bs(te);if(typeof ye!="function")throw Error(Le(150));if(te=ye.call(te),te==null)throw Error(Le(151));for(var B=ye=null,Te=J,ke=J=0,Ve=null,He=te.next();Te!==null&&!He.done;ke++,He=te.next()){Te.index>ke?(Ve=Te,Te=null):Ve=Te.sibling;var ht=ne($,Te,He.value,pe);if(ht===null){Te===null&&(Te=Ve);break}n&&Te&&ht.alternate===null&&i($,Te),J=h(ht,J,ke),B===null?ye=ht:B.sibling=ht,B=ht,Te=Ve}if(He.done)return a($,Te),Bt&&fr($,ke),ye;if(Te===null){for(;!He.done;ke++,He=te.next())He=X($,He.value,pe),He!==null&&(J=h(He,J,ke),B===null?ye=He:B.sibling=He,B=He);return Bt&&fr($,ke),ye}for(Te=u($,Te);!He.done;ke++,He=te.next())He=D(Te,$,ke,He.value,pe),He!==null&&(n&&He.alternate!==null&&Te.delete(He.key===null?ke:He.key),J=h(He,J,ke),B===null?ye=He:B.sibling=He,B=He);return n&&Te.forEach(function(qe){return i($,qe)}),Bt&&fr($,ke),ye}function ce($,J,te,pe){if(typeof te=="object"&&te!==null&&te.type===Fr&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case Na:e:{for(var ye=te.key,B=J;B!==null;){if(B.key===ye){if(ye=te.type,ye===Fr){if(B.tag===7){a($,B.sibling),J=g(B,te.props.children),J.return=$,$=J;break e}}else if(B.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===In&&Kc(ye)===B.type){a($,B.sibling),J=g(B,te.props),J.ref=Ps($,B,te),J.return=$,$=J;break e}a($,B);break}else i($,B);B=B.sibling}te.type===Fr?(J=vr(te.props.children,$.mode,pe,te.key),J.return=$,$=J):(pe=no(te.type,te.key,te.props,null,$.mode,pe),pe.ref=Ps($,J,te),pe.return=$,$=pe)}return T($);case zr:e:{for(B=te.key;J!==null;){if(J.key===B)if(J.tag===4&&J.stateNode.containerInfo===te.containerInfo&&J.stateNode.implementation===te.implementation){a($,J.sibling),J=g(J,te.children||[]),J.return=$,$=J;break e}else{a($,J);break}else i($,J);J=J.sibling}J=zl(te,$.mode,pe),J.return=$,$=J}return T($);case In:return B=te._init,ce($,J,B(te._payload),pe)}if(Rs(te))return ue($,J,te,pe);if(bs(te))return ee($,J,te,pe);Fa($,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,J!==null&&J.tag===6?(a($,J.sibling),J=g(J,te),J.return=$,$=J):(a($,J),J=Dl(te,$.mode,pe),J.return=$,$=J),T($)):a($,J)}return ce}var os=Xd(!0),Yd=Xd(!1),ga={},sn=Jn(ga),sa=Jn(ga),aa=Jn(ga);function _r(n){if(n===ga)throw Error(Le(174));return n}function ph(n,i){switch(Lt(aa,i),Lt(sa,n),Lt(sn,ga),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Yl(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Yl(i,n)}Dt(sn),Lt(sn,i)}function ls(){Dt(sn),Dt(sa),Dt(aa)}function $d(n){_r(aa.current);var i=_r(sn.current),a=Yl(i,n.type);i!==a&&(Lt(sa,n),Lt(sn,a))}function gh(n){sa.current===n&&(Dt(sn),Dt(sa))}var Ht=Jn(0);function ko(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Il=[];function _h(){for(var n=0;n<Il.length;n++)Il[n]._workInProgressVersionPrimary=null;Il.length=0}var $a=Cn.ReactCurrentDispatcher,Al=Cn.ReactCurrentBatchConfig,xr=0,Ut=null,ei=null,si=null,No=!1,Gs=!1,oa=0,cv=0;function di(){throw Error(Le(321))}function mh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Yi(n[a],i[a]))return!1;return!0}function vh(n,i,a,u,g,h){if(xr=h,Ut=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$a.current=n===null||n.memoizedState===null?gv:_v,n=a(u,g),Gs){h=0;do{if(Gs=!1,oa=0,25<=h)throw Error(Le(301));h+=1,si=ei=null,i.updateQueue=null,$a.current=mv,n=a(u,g)}while(Gs)}if($a.current=To,i=ei!==null&&ei.next!==null,xr=0,si=ei=Ut=null,No=!1,i)throw Error(Le(300));return n}function yh(){var n=oa!==0;return oa=0,n}function en(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?Ut.memoizedState=si=n:si=si.next=n,si}function Ui(){if(ei===null){var n=Ut.alternate;n=n!==null?n.memoizedState:null}else n=ei.next;var i=si===null?Ut.memoizedState:si.next;if(i!==null)si=i,ei=n;else{if(n===null)throw Error(Le(310));ei=n,n={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},si===null?Ut.memoizedState=si=n:si=si.next=n}return si}function la(n,i){return typeof i=="function"?i(n):i}function Ll(n){var i=Ui(),a=i.queue;if(a===null)throw Error(Le(311));a.lastRenderedReducer=n;var u=ei,g=u.baseQueue,h=a.pending;if(h!==null){if(g!==null){var T=g.next;g.next=h.next,h.next=T}u.baseQueue=g=h,a.pending=null}if(g!==null){h=g.next,u=u.baseState;var M=T=null,z=null,W=h;do{var K=W.lane;if((xr&K)===K)z!==null&&(z=z.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),u=W.hasEagerState?W.eagerState:n(u,W.action);else{var X={lane:K,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};z===null?(M=z=X,T=u):z=z.next=X,Ut.lanes|=K,Sr|=K}W=W.next}while(W!==null&&W!==h);z===null?T=u:z.next=M,Yi(u,i.memoizedState)||(Ci=!0),i.memoizedState=u,i.baseState=T,i.baseQueue=z,a.lastRenderedState=u}if(n=a.interleaved,n!==null){g=n;do h=g.lane,Ut.lanes|=h,Sr|=h,g=g.next;while(g!==n)}else g===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Ol(n){var i=Ui(),a=i.queue;if(a===null)throw Error(Le(311));a.lastRenderedReducer=n;var u=a.dispatch,g=a.pending,h=i.memoizedState;if(g!==null){a.pending=null;var T=g=g.next;do h=n(h,T.action),T=T.next;while(T!==g);Yi(h,i.memoizedState)||(Ci=!0),i.memoizedState=h,i.baseQueue===null&&(i.baseState=h),a.lastRenderedState=h}return[h,u]}function Jd(){}function ep(n,i){var a=Ut,u=Ui(),g=i(),h=!Yi(u.memoizedState,g);if(h&&(u.memoizedState=g,Ci=!0),u=u.queue,wh(np.bind(null,a,u,n),[n]),u.getSnapshot!==i||h||si!==null&&si.memoizedState.tag&1){if(a.flags|=2048,ua(9,ip.bind(null,a,u,g,i),void 0,null),ai===null)throw Error(Le(349));xr&30||tp(a,i,g)}return g}function tp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ut.updateQueue,i===null?(i={lastEffect:null,stores:null},Ut.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function ip(n,i,a,u){i.value=a,i.getSnapshot=u,rp(i)&&sp(n)}function np(n,i,a){return a(function(){rp(i)&&sp(n)})}function rp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Yi(n,a)}catch(u){return!0}}function sp(n){var i=xn(n,1);i!==null&&Xi(i,n,1,-1)}function Qc(n){var i=en();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:n},i.queue=n,n=n.dispatch=pv.bind(null,Ut,n),[i.memoizedState,n]}function ua(n,i,a,u){return n={tag:n,create:i,destroy:a,deps:u,next:null},i=Ut.updateQueue,i===null?(i={lastEffect:null,stores:null},Ut.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,i.lastEffect=n)),n}function ap(){return Ui().memoizedState}function Ja(n,i,a,u){var g=en();Ut.flags|=n,g.memoizedState=ua(1|i,a,void 0,u===void 0?null:u)}function Go(n,i,a,u){var g=Ui();u=u===void 0?null:u;var h=void 0;if(ei!==null){var T=ei.memoizedState;if(h=T.destroy,u!==null&&mh(u,T.deps)){g.memoizedState=ua(i,a,h,u);return}}Ut.flags|=n,g.memoizedState=ua(1|i,a,h,u)}function Zc(n,i){return Ja(8390656,8,n,i)}function wh(n,i){return Go(2048,8,n,i)}function op(n,i){return Go(4,2,n,i)}function lp(n,i){return Go(4,4,n,i)}function up(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function hp(n,i,a){return a=a!=null?a.concat([n]):null,Go(4,4,up.bind(null,i,n),a)}function xh(){}function cp(n,i){var a=Ui();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&mh(i,u[1])?u[0]:(a.memoizedState=[n,i],n)}function fp(n,i){var a=Ui();i=i===void 0?null:i;var u=a.memoizedState;return u!==null&&i!==null&&mh(i,u[1])?u[0]:(n=n(),a.memoizedState=[n,i],n)}function dp(n,i,a){return xr&21?(Yi(a,i)||(a=_d(),Ut.lanes|=a,Sr|=a,n.baseState=!0),i):(n.baseState&&(n.baseState=!1,Ci=!0),n.memoizedState=a)}function fv(n,i){var a=kt;kt=a!==0&&4>a?a:4,n(!0);var u=Al.transition;Al.transition={};try{n(!1),i()}finally{kt=a,Al.transition=u}}function pp(){return Ui().memoizedState}function dv(n,i,a){var u=Wn(n);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},gp(n))_p(i,a);else if(a=qd(n,i,a,u),a!==null){var g=yi();Xi(a,n,u,g),mp(a,i,u)}}function pv(n,i,a){var u=Wn(n),g={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(gp(n))_p(i,g);else{var h=n.alternate;if(n.lanes===0&&(h===null||h.lanes===0)&&(h=i.lastRenderedReducer,h!==null))try{var T=i.lastRenderedState,M=h(T,a);if(g.hasEagerState=!0,g.eagerState=M,Yi(M,T)){var z=i.interleaved;z===null?(g.next=g,fh(i)):(g.next=z.next,z.next=g),i.interleaved=g;return}}catch(W){}finally{}a=qd(n,i,g,u),a!==null&&(g=yi(),Xi(a,n,u,g),mp(a,i,u))}}function gp(n){var i=n.alternate;return n===Ut||i!==null&&i===Ut}function _p(n,i){Gs=No=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function mp(n,i,a){if(a&4194240){var u=i.lanes;u&=n.pendingLanes,a|=u,i.lanes=a,$u(n,a)}}var To={readContext:Hi,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},gv={readContext:Hi,useCallback:function(n,i){return en().memoizedState=[n,i===void 0?null:i],n},useContext:Hi,useEffect:Zc,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Ja(4194308,4,up.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Ja(4194308,4,n,i)},useInsertionEffect:function(n,i){return Ja(4,2,n,i)},useMemo:function(n,i){var a=en();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var u=en();return i=a!==void 0?a(i):i,u.memoizedState=u.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},u.queue=n,n=n.dispatch=dv.bind(null,Ut,n),[u.memoizedState,n]},useRef:function(n){var i=en();return n={current:n},i.memoizedState=n},useState:Qc,useDebugValue:xh,useDeferredValue:function(n){return en().memoizedState=n},useTransition:function(){var n=Qc(!1),i=n[0];return n=fv.bind(null,n[1]),en().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var u=Ut,g=en();if(Bt){if(a===void 0)throw Error(Le(407));a=a()}else{if(a=i(),ai===null)throw Error(Le(349));xr&30||tp(u,i,a)}g.memoizedState=a;var h={value:a,getSnapshot:i};return g.queue=h,Zc(np.bind(null,u,h,n),[n]),u.flags|=2048,ua(9,ip.bind(null,u,h,a,i),void 0,null),a},useId:function(){var n=en(),i=ai.identifierPrefix;if(Bt){var a=mn,u=_n;a=(u&~(1<<32-Zi(u)-1)).toString(32)+a,i=":"+i+"R"+a,a=oa++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=cv++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},_v={readContext:Hi,useCallback:cp,useContext:Hi,useEffect:wh,useImperativeHandle:hp,useInsertionEffect:op,useLayoutEffect:lp,useMemo:fp,useReducer:Ll,useRef:ap,useState:function(){return Ll(la)},useDebugValue:xh,useDeferredValue:function(n){var i=Ui();return dp(i,ei.memoizedState,n)},useTransition:function(){var n=Ll(la)[0],i=Ui().memoizedState;return[n,i]},useMutableSource:Jd,useSyncExternalStore:ep,useId:pp,unstable_isNewReconciler:!1},mv={readContext:Hi,useCallback:cp,useContext:Hi,useEffect:wh,useImperativeHandle:hp,useInsertionEffect:op,useLayoutEffect:lp,useMemo:fp,useReducer:Ol,useRef:ap,useState:function(){return Ol(la)},useDebugValue:xh,useDeferredValue:function(n){var i=Ui();return ei===null?i.memoizedState=n:dp(i,ei.memoizedState,n)},useTransition:function(){var n=Ol(la)[0],i=Ui().memoizedState;return[n,i]},useMutableSource:Jd,useSyncExternalStore:ep,useId:pp,unstable_isNewReconciler:!1};function us(n,i){try{var a="",u=i;do a+=j0(u),u=u.return;while(u);var g=a}catch(h){g=`
Error generating stack: `+h.message+`
`+h.stack}return{value:n,source:i,stack:g,digest:null}}function Ml(n,i,a){return{value:n,source:null,stack:a!=null?a:null,digest:i!=null?i:null}}function wu(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var vv=typeof WeakMap=="function"?WeakMap:Map;function vp(n,i,a){a=vn(-1,a),a.tag=3,a.payload={element:null};var u=i.value;return a.callback=function(){Io||(Io=!0,Iu=u),wu(n,i)},a}function yp(n,i,a){a=vn(-1,a),a.tag=3;var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var g=i.value;a.payload=function(){return u(g)},a.callback=function(){wu(n,i)}}var h=n.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(a.callback=function(){wu(n,i),typeof u!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var T=i.stack;this.componentDidCatch(i.value,{componentStack:T!==null?T:""})}),a}function Xc(n,i,a){var u=n.pingCache;if(u===null){u=n.pingCache=new vv;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(a)||(g.add(a),n=Lv.bind(null,n,i,a),i.then(n,n))}function Yc(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function $c(n,i,a,u,g){return n.mode&1?(n.flags|=65536,n.lanes=g,n):(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=vn(-1,1),i.tag=2,Un(a,i,1))),a.lanes|=1),n)}var yv=Cn.ReactCurrentOwner,Ci=!1;function vi(n,i,a,u){i.child=n===null?Yd(i,null,a,u):os(i,n.child,a,u)}function Jc(n,i,a,u,g){a=a.render;var h=i.ref;return ts(i,g),u=vh(n,i,a,u,h,g),a=yh(),n!==null&&!Ci?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~g,Sn(n,i,g)):(Bt&&a&&ah(i),i.flags|=1,vi(n,i,u,g),i.child)}function ef(n,i,a,u,g){if(n===null){var h=a.type;return typeof h=="function"&&!Ph(h)&&h.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=h,wp(n,i,h,u,g)):(n=no(a.type,null,u,i,i.mode,g),n.ref=i.ref,n.return=i,i.child=n)}if(h=n.child,!(n.lanes&g)){var T=h.memoizedProps;if(a=a.compare,a=a!==null?a:ta,a(T,u)&&n.ref===i.ref)return Sn(n,i,g)}return i.flags|=1,n=jn(h,u),n.ref=i.ref,n.return=i,i.child=n}function wp(n,i,a,u,g){if(n!==null){var h=n.memoizedProps;if(ta(h,u)&&n.ref===i.ref)if(Ci=!1,i.pendingProps=u=h,(n.lanes&g)!==0)n.flags&131072&&(Ci=!0);else return i.lanes=n.lanes,Sn(n,i,g)}return xu(n,i,a,u,g)}function xp(n,i,a){var u=i.pendingProps,g=u.children,h=n!==null?n.memoizedState:null;if(u.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Qr,Ti),Ti|=a;else{if(!(a&1073741824))return n=h!==null?h.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Lt(Qr,Ti),Ti|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=h!==null?h.baseLanes:a,Lt(Qr,Ti),Ti|=u}else h!==null?(u=h.baseLanes|a,i.memoizedState=null):u=a,Lt(Qr,Ti),Ti|=u;return vi(n,i,g,a),i.child}function Sp(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function xu(n,i,a,u,g){var h=Ei(a)?yr:_i.current;return h=ss(i,h),ts(i,g),a=vh(n,i,a,u,h,g),u=yh(),n!==null&&!Ci?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~g,Sn(n,i,g)):(Bt&&u&&ah(i),i.flags|=1,vi(n,i,a,g),i.child)}function tf(n,i,a,u,g){if(Ei(a)){var h=!0;wo(i)}else h=!1;if(ts(i,g),i.stateNode===null)eo(n,i),Zd(i,a,u),yu(i,a,u,g),u=!0;else if(n===null){var T=i.stateNode,M=i.memoizedProps;T.props=M;var z=T.context,W=a.contextType;typeof W=="object"&&W!==null?W=Hi(W):(W=Ei(a)?yr:_i.current,W=ss(i,W));var K=a.getDerivedStateFromProps,X=typeof K=="function"||typeof T.getSnapshotBeforeUpdate=="function";X||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(M!==u||z!==W)&&qc(i,T,u,W),An=!1;var ne=i.memoizedState;T.state=ne,Eo(i,u,T,g),z=i.memoizedState,M!==u||ne!==z||bi.current||An?(typeof K=="function"&&(vu(i,a,K,u),z=i.memoizedState),(M=An||jc(i,a,M,u,ne,z,W))?(X||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(i.flags|=4194308)):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=z),T.props=u,T.state=z,T.context=W,u=M):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{T=i.stateNode,Kd(n,i),M=i.memoizedProps,W=i.type===i.elementType?M:qi(i.type,M),T.props=W,X=i.pendingProps,ne=T.context,z=a.contextType,typeof z=="object"&&z!==null?z=Hi(z):(z=Ei(a)?yr:_i.current,z=ss(i,z));var D=a.getDerivedStateFromProps;(K=typeof D=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(M!==X||ne!==z)&&qc(i,T,u,z),An=!1,ne=i.memoizedState,T.state=ne,Eo(i,u,T,g);var ue=i.memoizedState;M!==X||ne!==ue||bi.current||An?(typeof D=="function"&&(vu(i,a,D,u),ue=i.memoizedState),(W=An||jc(i,a,W,u,ne,ue,z)||!1)?(K||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(u,ue,z),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(u,ue,z)),typeof T.componentDidUpdate=="function"&&(i.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof T.componentDidUpdate!="function"||M===n.memoizedProps&&ne===n.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&ne===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ue),T.props=u,T.state=ue,T.context=z,u=W):(typeof T.componentDidUpdate!="function"||M===n.memoizedProps&&ne===n.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&ne===n.memoizedState||(i.flags|=1024),u=!1)}return Su(n,i,a,u,h,g)}function Su(n,i,a,u,g,h){Sp(n,i);var T=(i.flags&128)!==0;if(!u&&!T)return g&&Vc(i,a,!1),Sn(n,i,h);u=i.stateNode,yv.current=i;var M=T&&typeof a.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,n!==null&&T?(i.child=os(i,n.child,null,h),i.child=os(i,null,M,h)):vi(n,i,M,h),i.memoizedState=u.state,g&&Vc(i,a,!0),i.child}function Cp(n){var i=n.stateNode;i.pendingContext?Bc(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Bc(n,i.context,!1),ph(n,i.containerInfo)}function nf(n,i,a,u,g){return as(),lh(g),i.flags|=256,vi(n,i,a,u),i.child}var Cu={dehydrated:null,treeContext:null,retryLane:0};function bu(n){return{baseLanes:n,cachePool:null,transitions:null}}function bp(n,i,a){var u=i.pendingProps,g=Ht.current,h=!1,T=(i.flags&128)!==0,M;if((M=T)||(M=n!==null&&n.memoizedState===null?!1:(g&2)!==0),M?(h=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Lt(Ht,g&1),n===null)return _u(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(i.mode&1?n.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(T=u.children,n=u.fallback,h?(u=i.mode,h=i.child,T={mode:"hidden",children:T},!(u&1)&&h!==null?(h.childLanes=0,h.pendingProps=T):h=qo(T,u,0,null),n=vr(n,u,a,null),h.return=i,n.return=i,h.sibling=n,i.child=h,i.child.memoizedState=bu(a),i.memoizedState=Cu,n):Sh(i,T));if(g=n.memoizedState,g!==null&&(M=g.dehydrated,M!==null))return wv(n,i,T,u,M,g,a);if(h){h=u.fallback,T=i.mode,g=n.child,M=g.sibling;var z={mode:"hidden",children:u.children};return!(T&1)&&i.child!==g?(u=i.child,u.childLanes=0,u.pendingProps=z,i.deletions=null):(u=jn(g,z),u.subtreeFlags=g.subtreeFlags&14680064),M!==null?h=jn(M,h):(h=vr(h,T,a,null),h.flags|=2),h.return=i,u.return=i,u.sibling=h,i.child=u,u=h,h=i.child,T=n.child.memoizedState,T=T===null?bu(a):{baseLanes:T.baseLanes|a,cachePool:null,transitions:T.transitions},h.memoizedState=T,h.childLanes=n.childLanes&~a,i.memoizedState=Cu,u}return h=n.child,n=h.sibling,u=jn(h,{mode:"visible",children:u.children}),!(i.mode&1)&&(u.lanes=a),u.return=i,u.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=u,i.memoizedState=null,u}function Sh(n,i){return i=qo({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Ba(n,i,a,u){return u!==null&&lh(u),os(i,n.child,null,a),n=Sh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function wv(n,i,a,u,g,h,T){if(a)return i.flags&256?(i.flags&=-257,u=Ml(Error(Le(422))),Ba(n,i,T,u)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(h=u.fallback,g=i.mode,u=qo({mode:"visible",children:u.children},g,0,null),h=vr(h,g,T,null),h.flags|=2,u.return=i,h.return=i,u.sibling=h,i.child=u,i.mode&1&&os(i,n.child,null,T),i.child.memoizedState=bu(T),i.memoizedState=Cu,h);if(!(i.mode&1))return Ba(n,i,T,null);if(g.data==="$!"){if(u=g.nextSibling&&g.nextSibling.dataset,u)var M=u.dgst;return u=M,h=Error(Le(419)),u=Ml(h,u,void 0),Ba(n,i,T,u)}if(M=(T&n.childLanes)!==0,Ci||M){if(u=ai,u!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(u.suspendedLanes|T)?0:g,g!==0&&g!==h.retryLane&&(h.retryLane=g,xn(n,g),Xi(u,n,g,-1))}return Th(),u=Ml(Error(Le(421))),Ba(n,i,T,u)}return g.data==="$?"?(i.flags|=128,i.child=n.child,i=Ov.bind(null,n),g._reactRetry=i,null):(n=h.treeContext,Pi=Hn(g.nextSibling),Ii=i,Bt=!0,Qi=null,n!==null&&(zi[Fi++]=_n,zi[Fi++]=mn,zi[Fi++]=wr,_n=n.id,mn=n.overflow,wr=i),i=Sh(i,u.children),i.flags|=4096,i)}function rf(n,i,a){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),mu(n.return,i,a)}function Rl(n,i,a,u,g){var h=n.memoizedState;h===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g}:(h.isBackwards=i,h.rendering=null,h.renderingStartTime=0,h.last=u,h.tail=a,h.tailMode=g)}function Ep(n,i,a){var u=i.pendingProps,g=u.revealOrder,h=u.tail;if(vi(n,i,u.children,a),u=Ht.current,u&2)u=u&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&rf(n,a,i);else if(n.tag===19)rf(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}if(Lt(Ht,u),!(i.mode&1))i.memoizedState=null;else switch(g){case"forwards":for(a=i.child,g=null;a!==null;)n=a.alternate,n!==null&&ko(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=i.child,i.child=null):(g=a.sibling,a.sibling=null),Rl(i,!1,g,a,h);break;case"backwards":for(a=null,g=i.child,i.child=null;g!==null;){if(n=g.alternate,n!==null&&ko(n)===null){i.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}Rl(i,!0,a,null,h);break;case"together":Rl(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function eo(n,i){!(i.mode&1)&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Sn(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Sr|=i.lanes,!(a&i.childLanes))return null;if(n!==null&&i.child!==n.child)throw Error(Le(153));if(i.child!==null){for(n=i.child,a=jn(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=jn(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function xv(n,i,a){switch(i.tag){case 3:Cp(i),as();break;case 5:$d(i);break;case 1:Ei(i.type)&&wo(i);break;case 4:ph(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,g=i.memoizedProps.value;Lt(Co,u._currentValue),u._currentValue=g;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(Lt(Ht,Ht.current&1),i.flags|=128,null):a&i.child.childLanes?bp(n,i,a):(Lt(Ht,Ht.current&1),n=Sn(n,i,a),n!==null?n.sibling:null);Lt(Ht,Ht.current&1);break;case 19:if(u=(a&i.childLanes)!==0,n.flags&128){if(u)return Ep(n,i,a);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Lt(Ht,Ht.current),u)break;return null;case 22:case 23:return i.lanes=0,xp(n,i,a)}return Sn(n,i,a)}var kp,Eu,Np,Tp;kp=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Eu=function(){};Np=function(n,i,a,u){var g=n.memoizedProps;if(g!==u){n=i.stateNode,_r(sn.current);var h=null;switch(a){case"input":g=Kl(n,g),u=Kl(n,u),h=[];break;case"select":g=Gt({},g,{value:void 0}),u=Gt({},u,{value:void 0}),h=[];break;case"textarea":g=Xl(n,g),u=Xl(n,u),h=[];break;default:typeof g.onClick!="function"&&typeof u.onClick=="function"&&(n.onclick=vo)}$l(a,u);var T;a=null;for(W in g)if(!u.hasOwnProperty(W)&&g.hasOwnProperty(W)&&g[W]!=null)if(W==="style"){var M=g[W];for(T in M)M.hasOwnProperty(T)&&(a||(a={}),a[T]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(Qs.hasOwnProperty(W)?h||(h=[]):(h=h||[]).push(W,null));for(W in u){var z=u[W];if(M=g!=null?g[W]:void 0,u.hasOwnProperty(W)&&z!==M&&(z!=null||M!=null))if(W==="style")if(M){for(T in M)!M.hasOwnProperty(T)||z&&z.hasOwnProperty(T)||(a||(a={}),a[T]="");for(T in z)z.hasOwnProperty(T)&&M[T]!==z[T]&&(a||(a={}),a[T]=z[T])}else a||(h||(h=[]),h.push(W,a)),a=z;else W==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,M=M?M.__html:void 0,z!=null&&M!==z&&(h=h||[]).push(W,z)):W==="children"?typeof z!="string"&&typeof z!="number"||(h=h||[]).push(W,""+z):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(Qs.hasOwnProperty(W)?(z!=null&&W==="onScroll"&&Mt("scroll",n),h||M===z||(h=[])):(h=h||[]).push(W,z))}a&&(h=h||[]).push("style",a);var W=h;(i.updateQueue=W)&&(i.flags|=4)}};Tp=function(n,i,a,u){a!==u&&(i.flags|=4)};function Is(n,i){if(!Bt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function pi(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(i)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&14680064,u|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=a,i}function Sv(n,i,a){var u=i.pendingProps;switch(oh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(i),null;case 1:return Ei(i.type)&&yo(),pi(i),null;case 3:return u=i.stateNode,ls(),Dt(bi),Dt(_i),_h(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(za(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Qi!==null&&(Ou(Qi),Qi=null))),Eu(n,i),pi(i),null;case 5:gh(i);var g=_r(aa.current);if(a=i.type,n!==null&&i.stateNode!=null)Np(n,i,a,u,g),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(Le(166));return pi(i),null}if(n=_r(sn.current),za(i)){u=i.stateNode,a=i.type;var h=i.memoizedProps;switch(u[nn]=i,u[ra]=h,n=(i.mode&1)!==0,a){case"dialog":Mt("cancel",u),Mt("close",u);break;case"iframe":case"object":case"embed":Mt("load",u);break;case"video":case"audio":for(g=0;g<zs.length;g++)Mt(zs[g],u);break;case"source":Mt("error",u);break;case"img":case"image":case"link":Mt("error",u),Mt("load",u);break;case"details":Mt("toggle",u);break;case"input":fc(u,h),Mt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!h.multiple},Mt("invalid",u);break;case"textarea":pc(u,h),Mt("invalid",u)}$l(a,h),g=null;for(var T in h)if(h.hasOwnProperty(T)){var M=h[T];T==="children"?typeof M=="string"?u.textContent!==M&&(h.suppressHydrationWarning!==!0&&Da(u.textContent,M,n),g=["children",M]):typeof M=="number"&&u.textContent!==""+M&&(h.suppressHydrationWarning!==!0&&Da(u.textContent,M,n),g=["children",""+M]):Qs.hasOwnProperty(T)&&M!=null&&T==="onScroll"&&Mt("scroll",u)}switch(a){case"input":Ta(u),dc(u,h,!0);break;case"textarea":Ta(u),gc(u);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(u.onclick=vo)}u=g,i.updateQueue=u,u!==null&&(i.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=td(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=T.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof u.is=="string"?n=T.createElement(a,{is:u.is}):(n=T.createElement(a),a==="select"&&(T=n,u.multiple?T.multiple=!0:u.size&&(T.size=u.size))):n=T.createElementNS(n,a),n[nn]=i,n[ra]=u,kp(n,i,!1,!1),i.stateNode=n;e:{switch(T=Jl(a,u),a){case"dialog":Mt("cancel",n),Mt("close",n),g=u;break;case"iframe":case"object":case"embed":Mt("load",n),g=u;break;case"video":case"audio":for(g=0;g<zs.length;g++)Mt(zs[g],n);g=u;break;case"source":Mt("error",n),g=u;break;case"img":case"image":case"link":Mt("error",n),Mt("load",n),g=u;break;case"details":Mt("toggle",n),g=u;break;case"input":fc(n,u),g=Kl(n,u),Mt("invalid",n);break;case"option":g=u;break;case"select":n._wrapperState={wasMultiple:!!u.multiple},g=Gt({},u,{value:void 0}),Mt("invalid",n);break;case"textarea":pc(n,u),g=Xl(n,u),Mt("invalid",n);break;default:g=u}$l(a,g),M=g;for(h in M)if(M.hasOwnProperty(h)){var z=M[h];h==="style"?rd(n,z):h==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&id(n,z)):h==="children"?typeof z=="string"?(a!=="textarea"||z!=="")&&Zs(n,z):typeof z=="number"&&Zs(n,""+z):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Qs.hasOwnProperty(h)?z!=null&&h==="onScroll"&&Mt("scroll",n):z!=null&&qu(n,h,z,T))}switch(a){case"input":Ta(n),dc(n,u,!1);break;case"textarea":Ta(n),gc(n);break;case"option":u.value!=null&&n.setAttribute("value",""+Zn(u.value));break;case"select":n.multiple=!!u.multiple,h=u.value,h!=null?Yr(n,!!u.multiple,h,!1):u.defaultValue!=null&&Yr(n,!!u.multiple,u.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=vo)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return pi(i),null;case 6:if(n&&i.stateNode!=null)Tp(n,i,n.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(Le(166));if(a=_r(aa.current),_r(sn.current),za(i)){if(u=i.stateNode,a=i.memoizedProps,u[nn]=i,(h=u.nodeValue!==a)&&(n=Ii,n!==null))switch(n.tag){case 3:Da(u.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Da(u.nodeValue,a,(n.mode&1)!==0)}h&&(i.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[nn]=i,i.stateNode=u}return pi(i),null;case 13:if(Dt(Ht),u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Bt&&Pi!==null&&i.mode&1&&!(i.flags&128))jd(),as(),i.flags|=98560,h=!1;else if(h=za(i),u!==null&&u.dehydrated!==null){if(n===null){if(!h)throw Error(Le(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(Le(317));h[nn]=i}else as(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;pi(i),h=!1}else Qi!==null&&(Ou(Qi),Qi=null),h=!0;if(!h)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(u=u!==null,u!==(n!==null&&n.memoizedState!==null)&&u&&(i.child.flags|=8192,i.mode&1&&(n===null||Ht.current&1?ti===0&&(ti=3):Th())),i.updateQueue!==null&&(i.flags|=4),pi(i),null);case 4:return ls(),Eu(n,i),n===null&&ia(i.stateNode.containerInfo),pi(i),null;case 10:return ch(i.type._context),pi(i),null;case 17:return Ei(i.type)&&yo(),pi(i),null;case 19:if(Dt(Ht),h=i.memoizedState,h===null)return pi(i),null;if(u=(i.flags&128)!==0,T=h.rendering,T===null)if(u)Is(h,!1);else{if(ti!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(T=ko(n),T!==null){for(i.flags|=128,Is(h,!1),u=T.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=a,a=i.child;a!==null;)h=a,n=u,h.flags&=14680066,T=h.alternate,T===null?(h.childLanes=0,h.lanes=n,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=T.childLanes,h.lanes=T.lanes,h.child=T.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=T.memoizedProps,h.memoizedState=T.memoizedState,h.updateQueue=T.updateQueue,h.type=T.type,n=T.dependencies,h.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Lt(Ht,Ht.current&1|2),i.child}n=n.sibling}h.tail!==null&&Zt()>hs&&(i.flags|=128,u=!0,Is(h,!1),i.lanes=4194304)}else{if(!u)if(n=ko(T),n!==null){if(i.flags|=128,u=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Is(h,!0),h.tail===null&&h.tailMode==="hidden"&&!T.alternate&&!Bt)return pi(i),null}else 2*Zt()-h.renderingStartTime>hs&&a!==1073741824&&(i.flags|=128,u=!0,Is(h,!1),i.lanes=4194304);h.isBackwards?(T.sibling=i.child,i.child=T):(a=h.last,a!==null?a.sibling=T:i.child=T,h.last=T)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Zt(),i.sibling=null,a=Ht.current,Lt(Ht,u?a&1|2:a&1),i):(pi(i),null);case 22:case 23:return Nh(),u=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==u&&(i.flags|=8192),u&&i.mode&1?Ti&1073741824&&(pi(i),i.subtreeFlags&6&&(i.flags|=8192)):pi(i),null;case 24:return null;case 25:return null}throw Error(Le(156,i.tag))}function Cv(n,i){switch(oh(i),i.tag){case 1:return Ei(i.type)&&yo(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ls(),Dt(bi),Dt(_i),_h(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 5:return gh(i),null;case 13:if(Dt(Ht),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(Le(340));as()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Dt(Ht),null;case 4:return ls(),null;case 10:return ch(i.type._context),null;case 22:case 23:return Nh(),null;case 24:return null;default:return null}}var Va=!1,gi=!1,bv=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Kr(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){qt(n,i,u)}else a.current=null}function ku(n,i,a){try{a()}catch(u){qt(n,i,u)}}var sf=!1;function Ev(n,i){if(uu=go,n=Ld(),sh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{a.nodeType,h.nodeType}catch(pe){a=null;break e}var T=0,M=-1,z=-1,W=0,K=0,X=n,ne=null;t:for(;;){for(var D;X!==a||g!==0&&X.nodeType!==3||(M=T+g),X!==h||u!==0&&X.nodeType!==3||(z=T+u),X.nodeType===3&&(T+=X.nodeValue.length),(D=X.firstChild)!==null;)ne=X,X=D;for(;;){if(X===n)break t;if(ne===a&&++W===g&&(M=T),ne===h&&++K===u&&(z=T),(D=X.nextSibling)!==null)break;X=ne,ne=X.parentNode}X=D}a=M===-1||z===-1?null:{start:M,end:z}}else a=null}a=a||{start:0,end:0}}else a=null;for(hu={focusedElem:n,selectionRange:a},go=!1,Ge=i;Ge!==null;)if(i=Ge,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ge=n;else for(;Ge!==null;){i=Ge;try{var ue=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ee=ue.memoizedProps,ce=ue.memoizedState,$=i.stateNode,J=$.getSnapshotBeforeUpdate(i.elementType===i.type?ee:qi(i.type,ee),ce);$.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var te=i.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(pe){qt(i,i.return,pe)}if(n=i.sibling,n!==null){n.return=i.return,Ge=n;break}Ge=i.return}return ue=sf,sf=!1,ue}function Ws(n,i,a){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var g=u=u.next;do{if((g.tag&n)===n){var h=g.destroy;g.destroy=void 0,h!==void 0&&ku(i,a,h)}g=g.next}while(g!==u)}}function Wo(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var u=a.create;a.destroy=u()}a=a.next}while(a!==i)}}function Nu(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Pp(n){var i=n.alternate;i!==null&&(n.alternate=null,Pp(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[nn],delete i[ra],delete i[du],delete i[ov],delete i[lv])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ip(n){return n.tag===5||n.tag===3||n.tag===4}function af(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ip(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Tu(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=vo));else if(u!==4&&(n=n.child,n!==null))for(Tu(n,i,a),n=n.sibling;n!==null;)Tu(n,i,a),n=n.sibling}function Pu(n,i,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(u!==4&&(n=n.child,n!==null))for(Pu(n,i,a),n=n.sibling;n!==null;)Pu(n,i,a),n=n.sibling}var ui=null,Ki=!1;function Pn(n,i,a){for(a=a.child;a!==null;)Ap(n,i,a),a=a.sibling}function Ap(n,i,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Do,a)}catch(M){}switch(a.tag){case 5:gi||Kr(a,i);case 6:var u=ui,g=Ki;ui=null,Pn(n,i,a),ui=u,Ki=g,ui!==null&&(Ki?(n=ui,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):ui.removeChild(a.stateNode));break;case 18:ui!==null&&(Ki?(n=ui,a=a.stateNode,n.nodeType===8?Tl(n.parentNode,a):n.nodeType===1&&Tl(n,a),Js(n)):Tl(ui,a.stateNode));break;case 4:u=ui,g=Ki,ui=a.stateNode.containerInfo,Ki=!0,Pn(n,i,a),ui=u,Ki=g;break;case 0:case 11:case 14:case 15:if(!gi&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){g=u=u.next;do{var h=g,T=h.destroy;h=h.tag,T!==void 0&&(h&2||h&4)&&ku(a,i,T),g=g.next}while(g!==u)}Pn(n,i,a);break;case 1:if(!gi&&(Kr(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(M){qt(a,i,M)}Pn(n,i,a);break;case 21:Pn(n,i,a);break;case 22:a.mode&1?(gi=(u=gi)||a.memoizedState!==null,Pn(n,i,a),gi=u):Pn(n,i,a);break;default:Pn(n,i,a)}}function of(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new bv),i.forEach(function(u){var g=Mv.bind(null,n,u);a.has(u)||(a.add(u),u.then(g,g))})}}function ji(n,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];try{var h=n,T=i,M=T;e:for(;M!==null;){switch(M.tag){case 5:ui=M.stateNode,Ki=!1;break e;case 3:ui=M.stateNode.containerInfo,Ki=!0;break e;case 4:ui=M.stateNode.containerInfo,Ki=!0;break e}M=M.return}if(ui===null)throw Error(Le(160));Ap(h,T,g),ui=null,Ki=!1;var z=g.alternate;z!==null&&(z.return=null),g.return=null}catch(W){qt(g,i,W)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Lp(i,n),i=i.sibling}function Lp(n,i){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ji(i,n),$i(n),u&4){try{Ws(3,n,n.return),Wo(3,n)}catch(ee){qt(n,n.return,ee)}try{Ws(5,n,n.return)}catch(ee){qt(n,n.return,ee)}}break;case 1:ji(i,n),$i(n),u&512&&a!==null&&Kr(a,a.return);break;case 5:if(ji(i,n),$i(n),u&512&&a!==null&&Kr(a,a.return),n.flags&32){var g=n.stateNode;try{Zs(g,"")}catch(ee){qt(n,n.return,ee)}}if(u&4&&(g=n.stateNode,g!=null)){var h=n.memoizedProps,T=a!==null?a.memoizedProps:h,M=n.type,z=n.updateQueue;if(n.updateQueue=null,z!==null)try{M==="input"&&h.type==="radio"&&h.name!=null&&Jf(g,h),Jl(M,T);var W=Jl(M,h);for(T=0;T<z.length;T+=2){var K=z[T],X=z[T+1];K==="style"?rd(g,X):K==="dangerouslySetInnerHTML"?id(g,X):K==="children"?Zs(g,X):qu(g,K,X,W)}switch(M){case"input":Ql(g,h);break;case"textarea":ed(g,h);break;case"select":var ne=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!h.multiple;var D=h.value;D!=null?Yr(g,!!h.multiple,D,!1):ne!==!!h.multiple&&(h.defaultValue!=null?Yr(g,!!h.multiple,h.defaultValue,!0):Yr(g,!!h.multiple,h.multiple?[]:"",!1))}g[ra]=h}catch(ee){qt(n,n.return,ee)}}break;case 6:if(ji(i,n),$i(n),u&4){if(n.stateNode===null)throw Error(Le(162));g=n.stateNode,h=n.memoizedProps;try{g.nodeValue=h}catch(ee){qt(n,n.return,ee)}}break;case 3:if(ji(i,n),$i(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Js(i.containerInfo)}catch(ee){qt(n,n.return,ee)}break;case 4:ji(i,n),$i(n);break;case 13:ji(i,n),$i(n),g=n.child,g.flags&8192&&(h=g.memoizedState!==null,g.stateNode.isHidden=h,!h||g.alternate!==null&&g.alternate.memoizedState!==null||(Eh=Zt())),u&4&&of(n);break;case 22:if(K=a!==null&&a.memoizedState!==null,n.mode&1?(gi=(W=gi)||K,ji(i,n),gi=W):ji(i,n),$i(n),u&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!K&&n.mode&1)for(Ge=n,K=n.child;K!==null;){for(X=Ge=K;Ge!==null;){switch(ne=Ge,D=ne.child,ne.tag){case 0:case 11:case 14:case 15:Ws(4,ne,ne.return);break;case 1:Kr(ne,ne.return);var ue=ne.stateNode;if(typeof ue.componentWillUnmount=="function"){u=ne,a=ne.return;try{i=u,ue.props=i.memoizedProps,ue.state=i.memoizedState,ue.componentWillUnmount()}catch(ee){qt(u,a,ee)}}break;case 5:Kr(ne,ne.return);break;case 22:if(ne.memoizedState!==null){uf(X);continue}}D!==null?(D.return=ne,Ge=D):uf(X)}K=K.sibling}e:for(K=null,X=n;;){if(X.tag===5){if(K===null){K=X;try{g=X.stateNode,W?(h=g.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(M=X.stateNode,z=X.memoizedProps.style,T=z!=null&&z.hasOwnProperty("display")?z.display:null,M.style.display=nd("display",T))}catch(ee){qt(n,n.return,ee)}}}else if(X.tag===6){if(K===null)try{X.stateNode.nodeValue=W?"":X.memoizedProps}catch(ee){qt(n,n.return,ee)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break e;for(;X.sibling===null;){if(X.return===null||X.return===n)break e;K===X&&(K=null),X=X.return}K===X&&(K=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:ji(i,n),$i(n),u&4&&of(n);break;case 21:break;default:ji(i,n),$i(n)}}function $i(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Ip(a)){var u=a;break e}a=a.return}throw Error(Le(160))}switch(u.tag){case 5:var g=u.stateNode;u.flags&32&&(Zs(g,""),u.flags&=-33);var h=af(n);Pu(n,h,g);break;case 3:case 4:var T=u.stateNode.containerInfo,M=af(n);Tu(n,M,T);break;default:throw Error(Le(161))}}catch(z){qt(n,n.return,z)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function kv(n,i,a){Ge=n,Op(n)}function Op(n,i,a){for(var u=(n.mode&1)!==0;Ge!==null;){var g=Ge,h=g.child;if(g.tag===22&&u){var T=g.memoizedState!==null||Va;if(!T){var M=g.alternate,z=M!==null&&M.memoizedState!==null||gi;M=Va;var W=gi;if(Va=T,(gi=z)&&!W)for(Ge=g;Ge!==null;)T=Ge,z=T.child,T.tag===22&&T.memoizedState!==null?hf(g):z!==null?(z.return=T,Ge=z):hf(g);for(;h!==null;)Ge=h,Op(h),h=h.sibling;Ge=g,Va=M,gi=W}lf(n)}else g.subtreeFlags&8772&&h!==null?(h.return=g,Ge=h):lf(n)}}function lf(n){for(;Ge!==null;){var i=Ge;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:gi||Wo(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!gi)if(a===null)u.componentDidMount();else{var g=i.elementType===i.type?a.memoizedProps:qi(i.type,a.memoizedProps);u.componentDidUpdate(g,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var h=i.updateQueue;h!==null&&Wc(i,h,u);break;case 3:var T=i.updateQueue;if(T!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Wc(i,T,a)}break;case 5:var M=i.stateNode;if(a===null&&i.flags&4){a=M;var z=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&a.focus();break;case"img":z.src&&(a.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var W=i.alternate;if(W!==null){var K=W.memoizedState;if(K!==null){var X=K.dehydrated;X!==null&&Js(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}gi||i.flags&512&&Nu(i)}catch(ne){qt(i,i.return,ne)}}if(i===n){Ge=null;break}if(a=i.sibling,a!==null){a.return=i.return,Ge=a;break}Ge=i.return}}function uf(n){for(;Ge!==null;){var i=Ge;if(i===n){Ge=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Ge=a;break}Ge=i.return}}function hf(n){for(;Ge!==null;){var i=Ge;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Wo(4,i)}catch(z){qt(i,a,z)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var g=i.return;try{u.componentDidMount()}catch(z){qt(i,g,z)}}var h=i.return;try{Nu(i)}catch(z){qt(i,h,z)}break;case 5:var T=i.return;try{Nu(i)}catch(z){qt(i,T,z)}}}catch(z){qt(i,i.return,z)}if(i===n){Ge=null;break}var M=i.sibling;if(M!==null){M.return=i.return,Ge=M;break}Ge=i.return}}var Nv=Math.ceil,Po=Cn.ReactCurrentDispatcher,Ch=Cn.ReactCurrentOwner,Vi=Cn.ReactCurrentBatchConfig,vt=0,ai=null,$t=null,hi=0,Ti=0,Qr=Jn(0),ti=0,ha=null,Sr=0,jo=0,bh=0,js=null,Si=null,Eh=0,hs=1/0,pn=null,Io=!1,Iu=null,Gn=null,Ha=!1,zn=null,Ao=0,qs=0,Au=null,to=-1,io=0;function yi(){return vt&6?Zt():to!==-1?to:to=Zt()}function Wn(n){return n.mode&1?vt&2&&hi!==0?hi&-hi:hv.transition!==null?(io===0&&(io=_d()),io):(n=kt,n!==0||(n=window.event,n=n===void 0?16:Cd(n.type)),n):1}function Xi(n,i,a,u){if(50<qs)throw qs=0,Au=null,Error(Le(185));fa(n,a,u),(!(vt&2)||n!==ai)&&(n===ai&&(!(vt&2)&&(jo|=a),ti===4&&Mn(n,hi)),ki(n,u),a===1&&vt===0&&!(i.mode&1)&&(hs=Zt()+500,Ho&&er()))}function ki(n,i){var a=n.callbackNode;hm(n,i);var u=po(n,n===ai?hi:0);if(u===0)a!==null&&vc(a),n.callbackNode=null,n.callbackPriority=0;else if(i=u&-u,n.callbackPriority!==i){if(a!=null&&vc(a),i===1)n.tag===0?uv(cf.bind(null,n)):Ud(cf.bind(null,n)),sv(function(){!(vt&6)&&er()}),a=null;else{switch(md(u)){case 1:a=Yu;break;case 4:a=pd;break;case 16:a=fo;break;case 536870912:a=gd;break;default:a=fo}a=Hp(a,Mp.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Mp(n,i){if(to=-1,io=0,vt&6)throw Error(Le(327));var a=n.callbackNode;if(is()&&n.callbackNode!==a)return null;var u=po(n,n===ai?hi:0);if(u===0)return null;if(u&30||u&n.expiredLanes||i)i=Lo(n,u);else{i=u;var g=vt;vt|=2;var h=Dp();(ai!==n||hi!==i)&&(pn=null,hs=Zt()+500,mr(n,i));do try{Iv();break}catch(M){Rp(n,M)}while(!0);hh(),Po.current=h,vt=g,$t!==null?i=0:(ai=null,hi=0,i=ti)}if(i!==0){if(i===2&&(g=ru(n),g!==0&&(u=g,i=Lu(n,g))),i===1)throw a=ha,mr(n,0),Mn(n,u),ki(n,Zt()),a;if(i===6)Mn(n,u);else{if(g=n.current.alternate,!(u&30)&&!Tv(g)&&(i=Lo(n,u),i===2&&(h=ru(n),h!==0&&(u=h,i=Lu(n,h))),i===1))throw a=ha,mr(n,0),Mn(n,u),ki(n,Zt()),a;switch(n.finishedWork=g,n.finishedLanes=u,i){case 0:case 1:throw Error(Le(345));case 2:dr(n,Si,pn);break;case 3:if(Mn(n,u),(u&130023424)===u&&(i=Eh+500-Zt(),10<i)){if(po(n,0)!==0)break;if(g=n.suspendedLanes,(g&u)!==u){yi(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=fu(dr.bind(null,n,Si,pn),i);break}dr(n,Si,pn);break;case 4:if(Mn(n,u),(u&4194240)===u)break;for(i=n.eventTimes,g=-1;0<u;){var T=31-Zi(u);h=1<<T,T=i[T],T>g&&(g=T),u&=~h}if(u=g,u=Zt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Nv(u/1960))-u,10<u){n.timeoutHandle=fu(dr.bind(null,n,Si,pn),u);break}dr(n,Si,pn);break;case 5:dr(n,Si,pn);break;default:throw Error(Le(329))}}}return ki(n,Zt()),n.callbackNode===a?Mp.bind(null,n):null}function Lu(n,i){var a=js;return n.current.memoizedState.isDehydrated&&(mr(n,i).flags|=256),n=Lo(n,i),n!==2&&(i=Si,Si=a,i!==null&&Ou(i)),n}function Ou(n){Si===null?Si=n:Si.push.apply(Si,n)}function Tv(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var g=a[u],h=g.getSnapshot;g=g.value;try{if(!Yi(h(),g))return!1}catch(T){return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Mn(n,i){for(i&=~bh,i&=~jo,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Zi(i),u=1<<a;n[a]=-1,i&=~u}}function cf(n){if(vt&6)throw Error(Le(327));is();var i=po(n,0);if(!(i&1))return ki(n,Zt()),null;var a=Lo(n,i);if(n.tag!==0&&a===2){var u=ru(n);u!==0&&(i=u,a=Lu(n,u))}if(a===1)throw a=ha,mr(n,0),Mn(n,i),ki(n,Zt()),a;if(a===6)throw Error(Le(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,dr(n,Si,pn),ki(n,Zt()),null}function kh(n,i){var a=vt;vt|=1;try{return n(i)}finally{vt=a,vt===0&&(hs=Zt()+500,Ho&&er())}}function Cr(n){zn!==null&&zn.tag===0&&!(vt&6)&&is();var i=vt;vt|=1;var a=Vi.transition,u=kt;try{if(Vi.transition=null,kt=1,n)return n()}finally{kt=u,Vi.transition=a,vt=i,!(vt&6)&&er()}}function Nh(){Ti=Qr.current,Dt(Qr)}function mr(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,rv(a)),$t!==null)for(a=$t.return;a!==null;){var u=a;switch(oh(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&yo();break;case 3:ls(),Dt(bi),Dt(_i),_h();break;case 5:gh(u);break;case 4:ls();break;case 13:Dt(Ht);break;case 19:Dt(Ht);break;case 10:ch(u.type._context);break;case 22:case 23:Nh()}a=a.return}if(ai=n,$t=n=jn(n.current,null),hi=Ti=i,ti=0,ha=null,bh=jo=Sr=0,Si=js=null,gr!==null){for(i=0;i<gr.length;i++)if(a=gr[i],u=a.interleaved,u!==null){a.interleaved=null;var g=u.next,h=a.pending;if(h!==null){var T=h.next;h.next=g,u.next=T}a.pending=u}gr=null}return n}function Rp(n,i){do{var a=$t;try{if(hh(),$a.current=To,No){for(var u=Ut.memoizedState;u!==null;){var g=u.queue;g!==null&&(g.pending=null),u=u.next}No=!1}if(xr=0,si=ei=Ut=null,Gs=!1,oa=0,Ch.current=null,a===null||a.return===null){ti=1,ha=i,$t=null;break}e:{var h=n,T=a.return,M=a,z=i;if(i=hi,M.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var W=z,K=M,X=K.tag;if(!(K.mode&1)&&(X===0||X===11||X===15)){var ne=K.alternate;ne?(K.updateQueue=ne.updateQueue,K.memoizedState=ne.memoizedState,K.lanes=ne.lanes):(K.updateQueue=null,K.memoizedState=null)}var D=Yc(T);if(D!==null){D.flags&=-257,$c(D,T,M,h,i),D.mode&1&&Xc(h,W,i),i=D,z=W;var ue=i.updateQueue;if(ue===null){var ee=new Set;ee.add(z),i.updateQueue=ee}else ue.add(z);break e}else{if(!(i&1)){Xc(h,W,i),Th();break e}z=Error(Le(426))}}else if(Bt&&M.mode&1){var ce=Yc(T);if(ce!==null){!(ce.flags&65536)&&(ce.flags|=256),$c(ce,T,M,h,i),lh(us(z,M));break e}}h=z=us(z,M),ti!==4&&(ti=2),js===null?js=[h]:js.push(h),h=T;do{switch(h.tag){case 3:h.flags|=65536,i&=-i,h.lanes|=i;var $=vp(h,z,i);Gc(h,$);break e;case 1:M=z;var J=h.type,te=h.stateNode;if(!(h.flags&128)&&(typeof J.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Gn===null||!Gn.has(te)))){h.flags|=65536,i&=-i,h.lanes|=i;var pe=yp(h,M,i);Gc(h,pe);break e}}h=h.return}while(h!==null)}Fp(a)}catch(ye){i=ye,$t===a&&a!==null&&($t=a=a.return);continue}break}while(!0)}function Dp(){var n=Po.current;return Po.current=To,n===null?To:n}function Th(){(ti===0||ti===3||ti===2)&&(ti=4),ai===null||!(Sr&268435455)&&!(jo&268435455)||Mn(ai,hi)}function Lo(n,i){var a=vt;vt|=2;var u=Dp();(ai!==n||hi!==i)&&(pn=null,mr(n,i));do try{Pv();break}catch(g){Rp(n,g)}while(!0);if(hh(),vt=a,Po.current=u,$t!==null)throw Error(Le(261));return ai=null,hi=0,ti}function Pv(){for(;$t!==null;)zp($t)}function Iv(){for(;$t!==null&&!tm();)zp($t)}function zp(n){var i=Vp(n.alternate,n,Ti);n.memoizedProps=n.pendingProps,i===null?Fp(n):$t=i,Ch.current=null}function Fp(n){var i=n;do{var a=i.alternate;if(n=i.return,i.flags&32768){if(a=Cv(a,i),a!==null){a.flags&=32767,$t=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ti=6,$t=null;return}}else if(a=Sv(a,i,Ti),a!==null){$t=a;return}if(i=i.sibling,i!==null){$t=i;return}$t=i=n}while(i!==null);ti===0&&(ti=5)}function dr(n,i,a){var u=kt,g=Vi.transition;try{Vi.transition=null,kt=1,Av(n,i,a,u)}finally{Vi.transition=g,kt=u}return null}function Av(n,i,a,u){do is();while(zn!==null);if(vt&6)throw Error(Le(327));a=n.finishedWork;var g=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(Le(177));n.callbackNode=null,n.callbackPriority=0;var h=a.lanes|a.childLanes;if(cm(n,h),n===ai&&($t=ai=null,hi=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Ha||(Ha=!0,Hp(fo,function(){return is(),null})),h=(a.flags&15990)!==0,a.subtreeFlags&15990||h){h=Vi.transition,Vi.transition=null;var T=kt;kt=1;var M=vt;vt|=4,Ch.current=null,Ev(n,a),Lp(a,n),Ym(hu),go=!!uu,hu=uu=null,n.current=a,kv(a),im(),vt=M,kt=T,Vi.transition=h}else n.current=a;if(Ha&&(Ha=!1,zn=n,Ao=g),h=n.pendingLanes,h===0&&(Gn=null),sm(a.stateNode),ki(n,Zt()),i!==null)for(u=n.onRecoverableError,a=0;a<i.length;a++)g=i[a],u(g.value,{componentStack:g.stack,digest:g.digest});if(Io)throw Io=!1,n=Iu,Iu=null,n;return Ao&1&&n.tag!==0&&is(),h=n.pendingLanes,h&1?n===Au?qs++:(qs=0,Au=n):qs=0,er(),null}function is(){if(zn!==null){var n=md(Ao),i=Vi.transition,a=kt;try{if(Vi.transition=null,kt=16>n?16:n,zn===null)var u=!1;else{if(n=zn,zn=null,Ao=0,vt&6)throw Error(Le(331));var g=vt;for(vt|=4,Ge=n.current;Ge!==null;){var h=Ge,T=h.child;if(Ge.flags&16){var M=h.deletions;if(M!==null){for(var z=0;z<M.length;z++){var W=M[z];for(Ge=W;Ge!==null;){var K=Ge;switch(K.tag){case 0:case 11:case 15:Ws(8,K,h)}var X=K.child;if(X!==null)X.return=K,Ge=X;else for(;Ge!==null;){K=Ge;var ne=K.sibling,D=K.return;if(Pp(K),K===W){Ge=null;break}if(ne!==null){ne.return=D,Ge=ne;break}Ge=D}}}var ue=h.alternate;if(ue!==null){var ee=ue.child;if(ee!==null){ue.child=null;do{var ce=ee.sibling;ee.sibling=null,ee=ce}while(ee!==null)}}Ge=h}}if(h.subtreeFlags&2064&&T!==null)T.return=h,Ge=T;else e:for(;Ge!==null;){if(h=Ge,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Ws(9,h,h.return)}var $=h.sibling;if($!==null){$.return=h.return,Ge=$;break e}Ge=h.return}}var J=n.current;for(Ge=J;Ge!==null;){T=Ge;var te=T.child;if(T.subtreeFlags&2064&&te!==null)te.return=T,Ge=te;else e:for(T=J;Ge!==null;){if(M=Ge,M.flags&2048)try{switch(M.tag){case 0:case 11:case 15:Wo(9,M)}}catch(ye){qt(M,M.return,ye)}if(M===T){Ge=null;break e}var pe=M.sibling;if(pe!==null){pe.return=M.return,Ge=pe;break e}Ge=M.return}}if(vt=g,er(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Do,n)}catch(ye){}u=!0}return u}finally{kt=a,Vi.transition=i}}return!1}function ff(n,i,a){i=us(a,i),i=vp(n,i,1),n=Un(n,i,1),i=yi(),n!==null&&(fa(n,1,i),ki(n,i))}function qt(n,i,a){if(n.tag===3)ff(n,n,a);else for(;i!==null;){if(i.tag===3){ff(i,n,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Gn===null||!Gn.has(u))){n=us(a,n),n=yp(i,n,1),i=Un(i,n,1),n=yi(),i!==null&&(fa(i,1,n),ki(i,n));break}}i=i.return}}function Lv(n,i,a){var u=n.pingCache;u!==null&&u.delete(i),i=yi(),n.pingedLanes|=n.suspendedLanes&a,ai===n&&(hi&a)===a&&(ti===4||ti===3&&(hi&130023424)===hi&&500>Zt()-Eh?mr(n,0):bh|=a),ki(n,i)}function Bp(n,i){i===0&&(n.mode&1?(i=Aa,Aa<<=1,!(Aa&130023424)&&(Aa=4194304)):i=1);var a=yi();n=xn(n,i),n!==null&&(fa(n,i,a),ki(n,a))}function Ov(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Bp(n,a)}function Mv(n,i){var a=0;switch(n.tag){case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=n.stateNode;break;default:throw Error(Le(314))}u!==null&&u.delete(i),Bp(n,a)}var Vp;Vp=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||bi.current)Ci=!0;else{if(!(n.lanes&a)&&!(i.flags&128))return Ci=!1,xv(n,i,a);Ci=!!(n.flags&131072)}else Ci=!1,Bt&&i.flags&1048576&&Gd(i,So,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;eo(n,i),n=i.pendingProps;var g=ss(i,_i.current);ts(i,a),g=vh(null,i,u,n,g,a);var h=yh();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ei(u)?(h=!0,wo(i)):h=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,dh(i),g.updater=Uo,i.stateNode=g,g._reactInternals=i,yu(i,u,n,a),i=Su(null,i,u,!0,h,a)):(i.tag=0,Bt&&h&&ah(i),vi(null,i,g,a),i=i.child),i;case 16:u=i.elementType;e:{switch(eo(n,i),n=i.pendingProps,g=u._init,u=g(u._payload),i.type=u,g=i.tag=Dv(u),n=qi(u,n),g){case 0:i=xu(null,i,u,n,a);break e;case 1:i=tf(null,i,u,n,a);break e;case 11:i=Jc(null,i,u,n,a);break e;case 14:i=ef(null,i,u,qi(u.type,n),a);break e}throw Error(Le(306,u,""))}return i;case 0:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:qi(u,g),xu(n,i,u,g,a);case 1:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:qi(u,g),tf(n,i,u,g,a);case 3:e:{if(Cp(i),n===null)throw Error(Le(387));u=i.pendingProps,h=i.memoizedState,g=h.element,Kd(n,i),Eo(i,u,null,a);var T=i.memoizedState;if(u=T.element,h.isDehydrated)if(h={element:u,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){g=us(Error(Le(423)),i),i=nf(n,i,u,a,g);break e}else if(u!==g){g=us(Error(Le(424)),i),i=nf(n,i,u,a,g);break e}else for(Pi=Hn(i.stateNode.containerInfo.firstChild),Ii=i,Bt=!0,Qi=null,a=Yd(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(as(),u===g){i=Sn(n,i,a);break e}vi(n,i,u,a)}i=i.child}return i;case 5:return $d(i),n===null&&_u(i),u=i.type,g=i.pendingProps,h=n!==null?n.memoizedProps:null,T=g.children,cu(u,g)?T=null:h!==null&&cu(u,h)&&(i.flags|=32),Sp(n,i),vi(n,i,T,a),i.child;case 6:return n===null&&_u(i),null;case 13:return bp(n,i,a);case 4:return ph(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=os(i,null,u,a):vi(n,i,u,a),i.child;case 11:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:qi(u,g),Jc(n,i,u,g,a);case 7:return vi(n,i,i.pendingProps,a),i.child;case 8:return vi(n,i,i.pendingProps.children,a),i.child;case 12:return vi(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(u=i.type._context,g=i.pendingProps,h=i.memoizedProps,T=g.value,Lt(Co,u._currentValue),u._currentValue=T,h!==null)if(Yi(h.value,T)){if(h.children===g.children&&!bi.current){i=Sn(n,i,a);break e}}else for(h=i.child,h!==null&&(h.return=i);h!==null;){var M=h.dependencies;if(M!==null){T=h.child;for(var z=M.firstContext;z!==null;){if(z.context===u){if(h.tag===1){z=vn(-1,a&-a),z.tag=2;var W=h.updateQueue;if(W!==null){W=W.shared;var K=W.pending;K===null?z.next=z:(z.next=K.next,K.next=z),W.pending=z}}h.lanes|=a,z=h.alternate,z!==null&&(z.lanes|=a),mu(h.return,a,i),M.lanes|=a;break}z=z.next}}else if(h.tag===10)T=h.type===i.type?null:h.child;else if(h.tag===18){if(T=h.return,T===null)throw Error(Le(341));T.lanes|=a,M=T.alternate,M!==null&&(M.lanes|=a),mu(T,a,i),T=h.sibling}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===i){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}vi(n,i,g.children,a),i=i.child}return i;case 9:return g=i.type,u=i.pendingProps.children,ts(i,a),g=Hi(g),u=u(g),i.flags|=1,vi(n,i,u,a),i.child;case 14:return u=i.type,g=qi(u,i.pendingProps),g=qi(u.type,g),ef(n,i,u,g,a);case 15:return wp(n,i,i.type,i.pendingProps,a);case 17:return u=i.type,g=i.pendingProps,g=i.elementType===u?g:qi(u,g),eo(n,i),i.tag=1,Ei(u)?(n=!0,wo(i)):n=!1,ts(i,a),Zd(i,u,g),yu(i,u,g,a),Su(null,i,u,!0,n,a);case 19:return Ep(n,i,a);case 22:return xp(n,i,a)}throw Error(Le(156,i.tag))};function Hp(n,i){return dd(n,i)}function Rv(n,i,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(n,i,a,u){return new Rv(n,i,a,u)}function Ph(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Dv(n){if(typeof n=="function")return Ph(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Qu)return 11;if(n===Zu)return 14}return 2}function jn(n,i){var a=n.alternate;return a===null?(a=Bi(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function no(n,i,a,u,g,h){var T=2;if(u=n,typeof n=="function")Ph(n)&&(T=1);else if(typeof n=="string")T=5;else e:switch(n){case Fr:return vr(a.children,g,h,i);case Ku:T=8,g|=8;break;case Gl:return n=Bi(12,a,i,g|2),n.elementType=Gl,n.lanes=h,n;case Wl:return n=Bi(13,a,i,g),n.elementType=Wl,n.lanes=h,n;case jl:return n=Bi(19,a,i,g),n.elementType=jl,n.lanes=h,n;case Xf:return qo(a,g,h,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Qf:T=10;break e;case Zf:T=9;break e;case Qu:T=11;break e;case Zu:T=14;break e;case In:T=16,u=null;break e}throw Error(Le(130,n==null?n:typeof n,""))}return i=Bi(T,a,i,g),i.elementType=n,i.type=u,i.lanes=h,i}function vr(n,i,a,u){return n=Bi(7,n,u,i),n.lanes=a,n}function qo(n,i,a,u){return n=Bi(22,n,u,i),n.elementType=Xf,n.lanes=a,n.stateNode={isHidden:!1},n}function Dl(n,i,a){return n=Bi(6,n,null,i),n.lanes=a,n}function zl(n,i,a){return i=Bi(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function zv(n,i,a,u,g){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ml(0),this.expirationTimes=ml(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ml(0),this.identifierPrefix=u,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Ih(n,i,a,u,g,h,T,M,z){return n=new zv(n,i,a,M,z),i===1?(i=1,h===!0&&(i|=8)):i=0,h=Bi(3,null,null,i),n.current=h,h.stateNode=n,h.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},dh(h),n}function Fv(n,i,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zr,key:u==null?null:""+u,children:n,containerInfo:i,implementation:a}}function Up(n){if(!n)return Xn;n=n._reactInternals;e:{if(Er(n)!==n||n.tag!==1)throw Error(Le(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ei(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(Le(171))}if(n.tag===1){var a=n.type;if(Ei(a))return Hd(n,a,i)}return i}function Gp(n,i,a,u,g,h,T,M,z){return n=Ih(a,u,!0,n,g,h,T,M,z),n.context=Up(null),a=n.current,u=yi(),g=Wn(a),h=vn(u,g),h.callback=i!=null?i:null,Un(a,h,g),n.current.lanes=g,fa(n,g,u),ki(n,u),n}function Ko(n,i,a,u){var g=i.current,h=yi(),T=Wn(g);return a=Up(a),i.context===null?i.context=a:i.pendingContext=a,i=vn(h,T),i.payload={element:n},u=u===void 0?null:u,u!==null&&(i.callback=u),n=Un(g,i,T),n!==null&&(Xi(n,g,T,h),Ya(n,g,T)),T}function Oo(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function df(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Ah(n,i){df(n,i),(n=n.alternate)&&df(n,i)}function Bv(){return null}var Wp=typeof reportError=="function"?reportError:function(n){console.error(n)};function Lh(n){this._internalRoot=n}Qo.prototype.render=Lh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(Le(409));Ko(n,i,null,null)};Qo.prototype.unmount=Lh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Cr(function(){Ko(null,n,null,null)}),i[wn]=null}};function Qo(n){this._internalRoot=n}Qo.prototype.unstable_scheduleHydration=function(n){if(n){var i=wd();n={blockedOn:null,target:n,priority:i};for(var a=0;a<On.length&&i!==0&&i<On[a].priority;a++);On.splice(a,0,n),a===0&&Sd(n)}};function Oh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Zo(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function pf(){}function Vv(n,i,a,u,g){if(g){if(typeof u=="function"){var h=u;u=function(){var W=Oo(T);h.call(W)}}var T=Gp(i,u,n,0,null,!1,!1,"",pf);return n._reactRootContainer=T,n[wn]=T.current,ia(n.nodeType===8?n.parentNode:n),Cr(),T}for(;g=n.lastChild;)n.removeChild(g);if(typeof u=="function"){var M=u;u=function(){var W=Oo(z);M.call(W)}}var z=Ih(n,0,!1,null,null,!1,!1,"",pf);return n._reactRootContainer=z,n[wn]=z.current,ia(n.nodeType===8?n.parentNode:n),Cr(function(){Ko(i,z,a,u)}),z}function Xo(n,i,a,u,g){var h=a._reactRootContainer;if(h){var T=h;if(typeof g=="function"){var M=g;g=function(){var z=Oo(T);M.call(z)}}Ko(i,T,n,g)}else T=Vv(a,i,n,g,u);return Oo(T)}vd=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ds(i.pendingLanes);a!==0&&($u(i,a|1),ki(i,Zt()),!(vt&6)&&(hs=Zt()+500,er()))}break;case 13:Cr(function(){var u=xn(n,1);if(u!==null){var g=yi();Xi(u,n,1,g)}}),Ah(n,1)}};Ju=function(n){if(n.tag===13){var i=xn(n,134217728);if(i!==null){var a=yi();Xi(i,n,134217728,a)}Ah(n,134217728)}};yd=function(n){if(n.tag===13){var i=Wn(n),a=xn(n,i);if(a!==null){var u=yi();Xi(a,n,i,u)}Ah(n,i)}};wd=function(){return kt};xd=function(n,i){var a=kt;try{return kt=n,i()}finally{kt=a}};tu=function(n,i,a){switch(i){case"input":if(Ql(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==n&&u.form===n.form){var g=Vo(u);if(!g)throw Error(Le(90));$f(u),Ql(u,g)}}}break;case"textarea":ed(n,a);break;case"select":i=a.value,i!=null&&Yr(n,!!a.multiple,i,!1)}};od=kh;ld=Cr;var Hv={usingClientEntryPoint:!1,Events:[pa,Ur,Vo,sd,ad,kh]},As={findFiberByHostInstance:pr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Uv={bundleType:As.bundleType,version:As.version,rendererPackageName:As.rendererPackageName,rendererConfig:As.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=cd(n),n===null?null:n.stateNode},findFiberByHostInstance:As.findFiberByHostInstance||Bv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ua.isDisabled&&Ua.supportsFiber)try{Do=Ua.inject(Uv),rn=Ua}catch(n){}}Li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hv;Li.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oh(i))throw Error(Le(200));return Fv(n,i,null,a)};Li.createRoot=function(n,i){if(!Oh(n))throw Error(Le(299));var a=!1,u="",g=Wp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=Ih(n,1,!1,null,null,a,!1,u,g),n[wn]=i.current,ia(n.nodeType===8?n.parentNode:n),new Lh(i)};Li.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(Le(188)):(n=Object.keys(n).join(","),Error(Le(268,n)));return n=cd(i),n=n===null?null:n.stateNode,n};Li.flushSync=function(n){return Cr(n)};Li.hydrate=function(n,i,a){if(!Zo(i))throw Error(Le(200));return Xo(null,n,i,!0,a)};Li.hydrateRoot=function(n,i,a){if(!Oh(n))throw Error(Le(405));var u=a!=null&&a.hydratedSources||null,g=!1,h="",T=Wp;if(a!=null&&(a.unstable_strictMode===!0&&(g=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),i=Gp(i,null,n,1,a!=null?a:null,g,!1,h,T),n[wn]=i.current,ia(n),u)for(n=0;n<u.length;n++)a=u[n],g=a._getVersion,g=g(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,g]:i.mutableSourceEagerHydrationData.push(a,g);return new Qo(i)};Li.render=function(n,i,a){if(!Zo(i))throw Error(Le(200));return Xo(null,n,i,!1,a)};Li.unmountComponentAtNode=function(n){if(!Zo(n))throw Error(Le(40));return n._reactRootContainer?(Cr(function(){Xo(null,null,n,!1,function(){n._reactRootContainer=null,n[wn]=null})}),!0):!1};Li.unstable_batchedUpdates=kh;Li.unstable_renderSubtreeIntoContainer=function(n,i,a,u){if(!Zo(a))throw Error(Le(200));if(n==null||n._reactInternals===void 0)throw Error(Le(38));return Xo(n,i,a,!1,u)};Li.version="18.2.0-next-9e3b772b8-20220608";function jp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jp)}catch(n){console.error(n)}}jp(),Gf.exports=Li;var Gv=Gf.exports,qp,gf=Gv;qp=gf.createRoot,gf.hydrateRoot;const _f=document.getElementById("root");_f?qp(_f).render(be.jsx(B0,{})):console.error("unable to find root");
